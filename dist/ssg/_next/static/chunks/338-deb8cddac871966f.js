/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright © 2024-2026 Oglama™ (https://oglama.com)
 * 
 * Licensed under the Oglama™ Source-Available License, Version 1.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     https://github.com/oglama/oglama/blob/main/LICENSE.txt
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{959:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(37876),l=n(12067),a=n(7156),i=n(13383),o=n(14232),s=n(66703),c=n(35003),d=n(84812),u=n(38388),p=n(45149);let m=e=>{let{handleFiles:t=()=>{},extensions:n=[],multiple:m=!1,minSize:x=null,maxSize:h=null,pop:f=!1,maxCount:A=null,withPaths:g=!1}=e,{i18n:j}=(0,a.B)(),b=(0,s.A)(),[v,y]=(0,o.useState)(!1),w=(0,o.useRef)(null),C=Array.isArray(n)&&n.length?n.map(e=>".".concat(e.trim())).join(", "):null,k=e=>{let r=[];for(let t of[...e]){if(Number.isInteger(x)&&t.size<1048576*x){i.o.error("".concat(t.name,": ").concat(j.t("file is smaller than {{minSize}}MB",{minSize:x})),{duration:5e3,ariaProps:{role:"alert"}});continue}if(Number.isInteger(h)&&t.size>1048576*h){i.o.error("".concat(t.name,": ").concat(j.t("file is larger than {{maxSize}}MB",{maxSize:h})),{duration:5e3,ariaProps:{role:"alert"}});continue}if(Array.isArray(n)&&n.length&&!n.includes((0,l.uQ)(t.name))){i.o.error("".concat(t.name,": ").concat(j.t("file extension not allowed")),{duration:5e3,ariaProps:{role:"alert"}});continue}if(r.push(t),Number.isInteger(A)&&r.length>=A||!m)break}"function"==typeof t&&t(r),null!==w.current&&(w.current.value=null)};return(0,r.jsxs)(d.A,{sx:{textTransform:"none",userSelect:"none",width:"100%",height:150,border:"1px solid",borderColor:v?b.palette.warning.main:"light"===b.palette.mode?"rgba(50,50,50,0.25)":"rgba(255,255,255,0.25)",borderRadius:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:2,cursor:"pointer",transition:"border-color 200ms","&:hover":{borderColor:b.palette.primary.main}},onDragOver:e=>{e.preventDefault(),y(!0)},onDragLeave:e=>{e.preventDefault(),y(!1)},onDrop:e=>{e.preventDefault(),y(!1);let t=e.nativeEvent.dataTransfer.files;if(g)for(let e of t){var n;e.path=null==(n=window.sdk)?void 0:n.ipc.main.getPathForFile(e)}k(t)},className:f?"pop":null,onClick:async e=>{var t,r;if(e.stopPropagation(),g)return void k(await (null==(r=window.sdk)?void 0:r.ipc.device.showFileSelector(Array.isArray(n)&&n.length?n.map(e=>"*.".concat(e)).join(", "):m?j.t("Select multiple files"):j.t("Select a single file"),n,m)));null==(t=w.current)||t.click()},children:[(0,r.jsx)("input",{hidden:!0,type:"file",ref:w,...m?{multiple:!0}:{},...C?{accept:C}:{},onChange:async e=>k(e.target.files)}),v?(0,r.jsx)(p.A,{sx:{fontSize:"3.5rem"},color:"warning"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{variant:"body1",sx:{mb:2},children:m?j.t("Select multiple files"):j.t("Select a single file")}),C?(0,r.jsx)(c.A,{variant:"caption",children:j.t("Accepted file extensions: {{accept}}",{accept:C})}):null,Number.isInteger(x)||Number.isInteger(h)?(0,r.jsxs)(u.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(c.A,{variant:"caption",sx:{px:1},children:Number.isInteger(x)?j.t("Minimum file size: {{size}}MB",{size:x.toLocaleString("en-US")}):null}),(0,r.jsx)(c.A,{variant:"caption",sx:{px:1},children:Number.isInteger(h)?j.t("Maximum file size: {{size}}MB",{size:h.toLocaleString("en-US")}):null})]}):null]})]})}},13353:(e,t,n)=>{n.d(t,{A:()=>I});var r=n(37876),l=n(71090),a=n(88992),i=n(14232),o=n(7156),s=n(39091),c=n(4728),d=n(39467),u=n(67906),p=n(80553),m=n(44395),x=n(96571),h=n(35003),f=n(71733),A=n(1912),g=n(84812),j=n(79270),b=n(52894),v=n(38388),y=n(71608),w=n(3678),C=n(9282),k=n(96728),S=n(43400);let I=e=>{let{isOpen:t=!1,onOpen:n=()=>{},onClose:I=()=>{},onCreate:M=()=>{},title:R,description:P}=e,{i18n:z}=(0,o.B)(),N=(0,i.useRef)(null),[E,D]=(0,i.useState)(!1),[B,F]=(0,i.useState)(!1),L={name:s.Yj().required(z.t("Module name is required")).min(3,()=>z.t("Must be at least {{n}} characters long",{n:3})).max(32,()=>z.t("Must be at most {{n}} characters long",{n:32})),description:s.Yj().max(4096,()=>z.t("Must be at most {{n}} characters long",{n:4096}))},{reset:T,control:X,handleSubmit:W,formState:{errors:O}}=(0,a.mN)({defaultValues:{name:"",description:""},mode:"onChange",resolver:(0,l.t)(s.Ik().shape(L))}),U=async e=>{let{name:t,description:n}=e;F(!0),await M(t,n),F(!1),I()};(0,i.useEffect)(()=>{t&&"function"==typeof n&&n()},[t]);let _=()=>{t&&"function"==typeof I&&I(),T()},q=()=>{N.current&&N.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return t?(0,r.jsxs)(j.A,{open:!0,onClose:B?()=>{}:_,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[B?null:(0,r.jsxs)(m.A,{children:[null!=R?R:z.t("Create a new module"),P?(0,r.jsx)(f.A,{"aria-label":z.t("More information"),sx:{ml:2},color:"default",onClick:()=>D(!E),size:"large",children:E?(0,r.jsx)(C.A,{}):(0,r.jsx)(y.A,{})}):null]}),(0,r.jsxs)(p.A,{children:[!B&&P&&E?(0,r.jsx)(b.A,{severity:"info",sx:{mb:6},children:(0,r.jsx)(h.A,{color:"inherit",variant:"body2",children:P})}):null,B?(0,r.jsx)(v.A,{sx:{mt:6},children:(0,r.jsx)(S.A,{})}):(0,r.jsxs)("form",{onSubmit:W(U),ref:N,children:[(0,r.jsxs)(x.A,{fullWidth:!0,sx:{my:3},error:!!O.name,children:[(0,r.jsx)(a.xI,{name:"name",control:X,render:e=>{let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(A.A,{disabled:B,autoFocus:!0,required:!0,value:t,onChange:n,onKeyDown:e=>"Enter"===e.key&&q(),spellCheck:!1,autoComplete:"off",inputProps:{minLength:3,maxLength:32,tabIndex:1},InputProps:{startAdornment:(0,r.jsx)(d.A,{position:"start",sx:{mr:-2},children:(0,r.jsx)(w.A,{fontSize:"small"})})},label:z.t("Module name"),placeholder:z.t("Module name"),error:!!O.name})}}),O.name&&(0,r.jsx)(c.A,{sx:{color:"error.main"},children:O.name.message})]}),(0,r.jsxs)(x.A,{fullWidth:!0,sx:{my:3},error:!!O.description,children:[(0,r.jsx)(a.xI,{name:"description",control:X,render:e=>{let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(A.A,{disabled:B,multiline:!0,maxRows:2,value:t,onChange:n,spellCheck:!1,autoComplete:"off",inputProps:{maxLength:4096,tabIndex:2},label:z.t("Module description"),placeholder:z.t("Module description"),error:!!O.description})}}),O.description&&(0,r.jsx)(c.A,{sx:{color:"error.main"},children:O.description.message})]})]})]}),B?null:(0,r.jsxs)(u.A,{children:[(0,r.jsx)(g.A,{color:"secondary",onClick:_,children:z.t("Cancel")}),(0,r.jsx)(g.A,{variant:"contained",onClick:q,startIcon:(0,r.jsx)(k.A,{}),children:z.t("Create module")})]})]}):null}},14632:(e,t,n)=>{n.d(t,{A:()=>r});let r=e=>{var t;return"light"==(null==e||null==(t=e.palette)?void 0:t.mode)?"#ddd":"#222"}},36740:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(14232),l=n(71507),a=n.n(l);let i=e=>e&&("TEXTAREA"===e.nodeName||"INPUT"===e.nodeName),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useRef)(null),n=()=>{e.onSuccess&&e.onSuccess(),e.selectOnCopy&&i(t.current)&&t.current.select()},l=()=>{e.onError&&e.onError(),!1!==e.selectOnError&&i(t.current)&&t.current.select()},o=e=>{a()(e).then(n).catch(l)};return{copy:(0,r.useCallback)(e=>{"string"==typeof e?o(e):t.current&&o(t.current.value)},[]),target:t}}},43400:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(37876),l=n(14232),a=n(89037);let i=function(e){var t;let{className:n,sx:i,count:o=1,columns:s=1,spacing:c=20,justify:d="start",rounded:u=!1,rowHeight:p=null}=e,m=[],x=Math.ceil(o);s=null!=(t=Math.abs(parseInt(s,10)))?t:1,c=Math.abs(parseInt(c,10)),d=-1===["start","center","end","space-between"].indexOf(d)?"start":d;for(let e=0;e<x;e++){let t=x>o&&e===x-1?o%1*100:100,n=[];if(s>1)for(let e=1;e<=s;e++){let r=t-100/s*(e-1);n.push(r<100/s?r>0?r:0:100/s)}else n.push(t);m.push((0,r.jsx)(l.Fragment,{children:n.map((t,n)=>{let l=0===c?"".concat(t,"%"):"calc(".concat(t,"% - ").concat(c,"px)"),a=0===c?null:"".concat(c,"px"),i={width:l,marginLeft:a,marginTop:a};return u&&(i.borderRadius="50%"),null!==p&&(i.height=p),(0,r.jsx)("div",{className:"skeleton",style:i,children:"‌"},"".concat(e,"-").concat(n))})},e))}let h=0===c?null:"".concat(c,"px");return(0,r.jsx)(a.A,{sx:{...i},className:n,children:(0,r.jsx)("div",{"aria-live":"polite","aria-busy":!0,style:{paddingRight:h,paddingBottom:h,display:"inline-flex",flexFlow:"wrap",width:"100%",height:"100%",top:"-3px",position:"relative",zIndex:0,justifyContent:d},children:m})})}},50694:(e,t,n)=>{n.d(t,{A:()=>N});var r=n(37876),l=n(71090),a=n(88992),i=n(8628),o=n(7156),s=n(14232),c=n(39091),d=n(91040),u=n(66703),p=n(4728),m=n(67906),x=n(80553),h=n(44395),f=n(96571),A=n(35003),g=n(71733),j=n(1912),b=n(38111),v=n(15852),y=n(84812),w=n(79270),C=n(42371),k=n(38388),S=n(46200),I=n(20302),M=n(19999),R=n(99476),P=n(56792),z=n(10483);let N=e=>{var t,n;let{module:N,tooltipPlacement:E="bottom",propagateModule:D=null,scale:B=1,inactive:F=!1}=e,[L,T]=(0,s.useState)(null),{i18n:X}=(0,o.B)(),W=(0,s.useRef)(null),O=(0,i.A)(),U=(0,u.A)(),[_,q]=(0,s.useState)(!1),Y={reason:c.Yj().max(512,()=>X.t("Must be at most {{n}} characters long",{n:512}))},{reset:V,control:K,handleSubmit:Q,formState:{errors:G}}=(0,a.mN)({defaultValues:{reason:""},mode:"onChange",resolver:(0,l.t)(c.Ik().shape(Y))}),H=I.A,J=F?U.palette.text.disabled:U.palette.text.primary,Z=U.palette.background.paper,$=X.t("Private module");do if(N.isPublic){if(J=U.palette.text.chip,N.isPending){H=M.A,Z=U.palette.warning.main,$=X.t("Module listing pending approval");break}if(N.isApproved){H=S.A,Z=U.palette.info.main,$=X.t("Module listing approved");break}H=R.A,Z=U.palette.error.main,$=X.t("Module listing rejected")}while(!1);let ee=()=>{T(null)},et=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("function"==typeof D&&"string"==typeof(null==N?void 0:N.id)){q(!1);try{var n;let r=await d.A.put("modules/".concat(N.id,"/review"),{approved:e,reason:t});N.id===(null==(n=r.data)?void 0:n.id)&&D(r.data,["isPublic","isPending","isApproved"])}catch(e){}V()}},en=async()=>{ee(),await et(!0)},er=async()=>{ee(),q(!0)};return(0,r.jsxs)(k.A,{sx:{position:"relative",display:"flex",alignItems:"center",transform:"scale(".concat(B,")"),transformOrigin:"50%"},children:["founder"===(null==(t=O.user)?void 0:t.userRole)&&N.isPublic&&"function"==typeof D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{title:X.t("Review module"),children:(0,r.jsx)(g.A,{color:N.isApproved?"primary":"warning",sx:{width:"40px",height:"40px",mr:2},onClick:e=>{T(e.currentTarget)},children:(0,r.jsx)(z.A,{fontSize:"small"})})}),(0,r.jsxs)(C.A,{anchorEl:L,open:!!L,onClose:ee,children:[(0,r.jsxs)(b.A,{disabled:N.isApproved,onClick:en,sx:{justifyContent:"space-between"},children:[(0,r.jsx)(P.A,{fontSize:"small"}),(0,r.jsx)(A.A,{sx:{ml:3},variant:"body2",children:X.t("Approve")})]}),(0,r.jsxs)(b.A,{disabled:!N.isPending&&!N.isApproved,onClick:er,children:[(0,r.jsx)(R.A,{fontSize:"small"}),(0,r.jsx)(A.A,{sx:{ml:3},variant:"body2",children:X.t("Reject")})]})]})]}):null,(0,r.jsx)(v.A,{title:$,placement:E,children:(0,r.jsx)(k.A,{sx:{display:"flex",height:"2rem",width:"2rem",justifyContent:"center",alignItems:"center",background:Z,borderRadius:"2rem"},children:(0,r.jsx)(H,{fontSize:"small",sx:{color:J}})})}),"founder"===(null==(n=O.user)?void 0:n.userRole)&&_?(0,r.jsxs)(w.A,{open:!0,onClose:()=>q(!1),sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[(0,r.jsx)(h.A,{children:X.t("Reject module")}),(0,r.jsx)(x.A,{children:(0,r.jsx)("form",{onSubmit:Q(async e=>{let{reason:t}=e;await et(!1,t)}),ref:W,children:(0,r.jsxs)(f.A,{fullWidth:!0,sx:{my:3},error:!!G.reason,children:[(0,r.jsx)(a.xI,{name:"reason",control:K,render:e=>{let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(j.A,{multiline:!0,rows:2,value:t,onChange:n,spellCheck:!1,autoComplete:"off",inputProps:{maxLength:512,tabIndex:2},label:X.t("Rejection reason"),placeholder:X.t("Reason for rejection"),error:!!G.reason})}}),G.reason&&(0,r.jsx)(p.A,{sx:{color:"error.main"},children:G.reason.message})]})})}),(0,r.jsxs)(m.A,{children:[(0,r.jsx)(y.A,{color:"secondary",onClick:()=>q(!1),children:X.t("Cancel")}),(0,r.jsx)(y.A,{color:"error",onClick:()=>{W.current&&W.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},startIcon:(0,r.jsx)(R.A,{}),children:X.t("Reject module")})]})]}):null]})}},84824:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(37876),l=n(35268),a=n(25999),i=n(38388);let o=(0,l.Ay)(i.A)(e=>{var t,n;let{theme:r,color:l}=e;return{backgroundColor:r.palette.background.paper,position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,height:"100%",width:"30%",backgroundColor:null!=(n=null==(t=r.palette[l])?void 0:t.main)?n:r.palette.primary.main,animation:"progress 1.5s infinite",willChange:"transform"},"@keyframes progress":{"0%":{transform:"translateX(-100%) scaleX(1)"},"70%":{transform:"translateX(200%) scaleX(1.5)"},"100%":{transform:"translateX(350%) scaleX(1)"}}}}),s=e=>{let{color:t="primary",variant:n="determinate",value:l=0,sx:i={}}=e;return("object"!=typeof i||null===i)&&(i={}),i={width:"100%",height:"4px",...i},["determinate","buffer"].includes(n)?(0,r.jsx)(a.A,{sx:i,color:t,variant:n,value:l}):(0,r.jsx)(o,{sx:i,color:t})}},98738:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(37876),l=n(14232),a=n(43934),i=n(66703),o=n(15852),s=n(63356),c=n(38388),d=n(8698);let u=e=>{let{items:t=[],setItems:n=()=>{},onDelete:u=null,sx:p={},tooltip:m=!1,tooltipEmpty:x=null,tooltipPrefix:h=null,maxContent:f=!1,numeric:A=!1,highlight:g=!1}=e,j=(0,l.useRef)(null),b=(0,l.useRef)(t),v=(0,l.useRef)(null),y=(0,i.A)();return t=(Array.isArray(t)?t:[]).map(e=>A?parseInt(e,10):"".concat(e||"")),("object"!=typeof p||null===p)&&(p={}),(0,l.useEffect)(()=>{v.current&&Array.isArray(t)&&(b.current=t,null!==j.current&&j.current.destroy(),j.current=a.Ay.create(v.current,{animation:150,onUpdate:e=>{let t=[...b.current],[r]=t.splice(e.oldIndex,1);t.splice(e.newIndex,0,r),b.current=t,n(t)}}))},[t]),(0,r.jsx)(c.A,{ref:v,sx:{...f?{width:"max-content"}:{width:"100%",flexWrap:"wrap"},borderRadius:1,padding:2,display:"flex",margin:0,"& .MuiChip-root:last-child":{marginRight:"0 !important"}},children:t.map((e,t)=>(0,r.jsx)(o.A,{title:m&&(null==e?void 0:e.length)?"".concat(h?"".concat(h,": "):"").concat(e):null!=x?x:null,placement:"top",children:(0,r.jsx)(s.A,{variant:e.length?"contained":"outlined",icon:(0,r.jsx)(d.A,{}),color:g&&(null==e?void 0:e.length)?"primary":"default",sx:{userSelect:"none",mr:2,mb:2*!f,cursor:"grab",borderRadius:1,...(null==e?void 0:e.length)?{}:{background:y.palette.divider},...p},label:e,onDelete:"function"==typeof u?()=>u(e):null})},"".concat(e,"-").concat(t)))})}}}]);
/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright © 2024-2025 Oglama (https://oglama.com)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{959:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(37876),l=n(12067),a=n(7156),i=n(13383),o=n(14232),s=n(66703),c=n(35003),u=n(84812),d=n(38388);let p=e=>{let{handleFiles:t=()=>{},extensions:n=[],multiple:p=!1,minSize:m=null,maxSize:h=null,pop:x=!1,maxCount:f=null,withPaths:g=!1}=e,{i18n:A}=(0,a.B)(),j=(0,s.A)(),b=(0,o.useRef)(null),y=Array.isArray(n)&&n.length?n.map(e=>".".concat(e.trim())).join(", "):null,v=e=>{let r=[];for(let t of[...e]){if(Number.isInteger(m)&&t.size<1048576*m){i.o.error("".concat(t.name,": ").concat(A.t("file is smaller than {{minSize}}MB",{minSize:m})),{duration:5e3,ariaProps:{role:"alert"}});continue}if(Number.isInteger(h)&&t.size>1048576*h){i.o.error("".concat(t.name,": ").concat(A.t("file is larger than {{maxSize}}MB",{maxSize:h})),{duration:5e3,ariaProps:{role:"alert"}});continue}if(Array.isArray(n)&&n.length&&!n.includes((0,l.uQ)(t.name))){i.o.error("".concat(t.name,": ").concat(A.t("file extension not allowed")),{duration:5e3,ariaProps:{role:"alert"}});continue}if(r.push(t),Number.isInteger(f)&&r.length>=f)break}"function"==typeof t&&t(r),null!==b.current&&(b.current.value=null)};return(0,r.jsxs)(u.A,{sx:{textTransform:"none",userSelect:"none",width:"100%",height:150,border:"1px solid",borderColor:"light"===j.palette.mode?"rgba(50,50,50,0.25)":"rgba(255,255,255,0.25)",borderRadius:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:2,cursor:"pointer",transition:"border-color 200ms","&:hover":{borderColor:j.palette.primary.main}},className:x?"pop":null,onClick:async e=>{var t,r;if(e.stopPropagation(),g)return void v(await (null==(r=window.sdk)?void 0:r.ipc.main.showOpenDialog(Array.isArray(n)&&n.length?n.map(e=>"*.".concat(e)).join(", "):p?A.t("Select multiple files"):A.t("Select a single file"),n,p)));null==(t=b.current)||t.click()},children:[(0,r.jsx)("input",{hidden:!0,type:"file",ref:b,...p?{multiple:!0}:{},...y?{accept:y}:{},onChange:async e=>v(e.target.files)}),(0,r.jsx)(c.A,{variant:"body1",sx:{mb:2},children:p?A.t("Select multiple files"):A.t("Select a single file")}),y?(0,r.jsx)(c.A,{variant:"caption",children:A.t("Accepted file extensions: {{accept}}",{accept:y})}):null,Number.isInteger(m)||Number.isInteger(h)?(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(c.A,{variant:"caption",sx:{px:1},children:Number.isInteger(m)?A.t("Minimum file size: {{size}}MB",{size:m.toLocaleString("en-US")}):null}),(0,r.jsx)(c.A,{variant:"caption",sx:{px:1},children:Number.isInteger(h)?A.t("Maximum file size: {{size}}MB",{size:h.toLocaleString("en-US")}):null})]}):null]})}},12067:(e,t,n)=>{function r(e){return"".concat(e).charAt(0).toUpperCase()+e.slice(1)}function l(e){let t="".concat(e).replace(/\W+$/g,"").match(/\.(\w+)$/i);return t?t[1].toLowerCase():""}function a(e){return"file://".concat("".concat(e||"").replace(/\\/g,"/"))}function i(e){return"".concat(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,l=1,a=0,i=t.split("\n");for(let t=0;t<i.length;t++)if(n.test(i[t])){let o=Math.max(t-r,0),s=Math.min(t+r,i.length-1),c=(s+1).toString().length,u="";for(let e=o;e<=s;e++){let r=(e+1).toString().padStart(c," "),o=e===t?">":" ";if(u+="".concat(o," ").concat(r," | ").concat(i[e],"\n"),e===t){let t=i[e].match(n),r=t?i[e].indexOf(t[0]):i[e].length-1;l=e+1,a=r+1,u+="  ".concat(" ".repeat(c)," | ").concat(" ".repeat(r),"^\n")}}return"".concat(e," (").concat(l,":").concat(a,")\n").concat(u)}return e}n.d(t,{Nu:()=>i,TF:()=>r,if:()=>o,uQ:()=>l,w8:()=>a})},13353:(e,t,n)=>{n.d(t,{A:()=>I});var r=n(37876),l=n(71090),a=n(88992),i=n(14232),o=n(7156),s=n(39091),c=n(4728),u=n(39467),d=n(67906),p=n(80553),m=n(44395),h=n(96571),x=n(35003),f=n(71733),g=n(1912),A=n(84812),j=n(79270),b=n(52894),y=n(38388),v=n(71608),w=n(3678),C=n(9282),k=n(96728),S=n(43400);let I=e=>{let{isOpen:t=!1,onOpen:n=()=>{},onClose:I=()=>{},onCreate:M=()=>{},title:R,description:N}=e,{i18n:P}=(0,o.B)(),z=(0,i.useRef)(null),[E,B]=(0,i.useState)(!1),[L,T]=(0,i.useState)(!1),W={name:s.Yj().required(P.t("Module name is required")).min(3,()=>P.t("Must be at least {{n}} characters long",{n:3})).max(32,()=>P.t("Must be at most {{n}} characters long",{n:32})),description:s.Yj().max(4096,()=>P.t("Must be at most {{n}} characters long",{n:4096}))},{reset:X,control:D,handleSubmit:O,formState:{errors:F}}=(0,a.mN)({defaultValues:{name:"",description:""},mode:"onChange",resolver:(0,l.t)(s.Ik().shape(W))}),K=async e=>{let{name:t,description:n}=e;T(!0),await M(t,n),T(!1),I()};(0,i.useEffect)(()=>{t&&"function"==typeof n&&n()},[t]);let U=()=>{t&&"function"==typeof I&&I(),X()},$=()=>{z.current&&z.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return t?(0,r.jsxs)(j.A,{open:!0,onClose:L?()=>{}:U,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[L?null:(0,r.jsxs)(m.A,{children:[null!=R?R:P.t("Create a new module"),N?(0,r.jsx)(f.A,{"aria-label":P.t("More information"),sx:{ml:2},color:"default",onClick:()=>B(!E),size:"large",children:E?(0,r.jsx)(C.A,{}):(0,r.jsx)(v.A,{})}):null]}),(0,r.jsxs)(p.A,{children:[!L&&N&&E?(0,r.jsx)(b.A,{severity:"info",sx:{mb:6},children:(0,r.jsx)(x.A,{color:"inherit",variant:"body2",children:N})}):null,L?(0,r.jsx)(y.A,{sx:{mt:6},children:(0,r.jsx)(S.A,{})}):(0,r.jsxs)("form",{onSubmit:O(K),ref:z,children:[(0,r.jsxs)(h.A,{fullWidth:!0,sx:{my:3},error:!!F.name,children:[(0,r.jsx)(a.xI,{name:"name",control:D,render:e=>{let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(g.A,{disabled:L,autoFocus:!0,required:!0,value:t,onChange:n,onKeyDown:e=>"Enter"===e.key&&$(),spellCheck:!1,autoComplete:"off",inputProps:{minLength:3,maxLength:32,tabIndex:1},InputProps:{startAdornment:(0,r.jsx)(u.A,{position:"start",sx:{mr:-2},children:(0,r.jsx)(w.A,{fontSize:"small"})})},label:P.t("Module name"),placeholder:P.t("Module name"),error:!!F.name})}}),F.name&&(0,r.jsx)(c.A,{sx:{color:"error.main"},children:F.name.message})]}),(0,r.jsxs)(h.A,{fullWidth:!0,sx:{my:3},error:!!F.description,children:[(0,r.jsx)(a.xI,{name:"description",control:D,render:e=>{let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(g.A,{disabled:L,multiline:!0,maxRows:2,value:t,onChange:n,onKeyDown:e=>"Enter"===e.key&&e.ctrlKey&&$(),spellCheck:!1,autoComplete:"off",inputProps:{maxLength:4096,tabIndex:2},label:P.t("Module description"),placeholder:P.t("Module description"),error:!!F.description})}}),F.description&&(0,r.jsx)(c.A,{sx:{color:"error.main"},children:F.description.message})]})]})]}),L?null:(0,r.jsxs)(d.A,{children:[(0,r.jsx)(A.A,{color:"secondary",onClick:U,children:P.t("Cancel")}),(0,r.jsx)(A.A,{variant:"contained",onClick:$,startIcon:(0,r.jsx)(k.A,{}),children:P.t("Create module")})]})]}):null}},14632:(e,t,n)=>{n.d(t,{A:()=>r});let r=e=>{var t;return"light"==(null==e||null==(t=e.palette)?void 0:t.mode)?"#ddd":"#222"}},36740:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(14232),l=n(71507),a=n.n(l);let i=e=>e&&("TEXTAREA"===e.nodeName||"INPUT"===e.nodeName),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useRef)(null),n=()=>{e.onSuccess&&e.onSuccess(),e.selectOnCopy&&i(t.current)&&t.current.select()},l=()=>{e.onError&&e.onError(),!1!==e.selectOnError&&i(t.current)&&t.current.select()},o=e=>{a()(e).then(n).catch(l)};return{copy:(0,r.useCallback)(e=>{"string"==typeof e?o(e):t.current&&o(t.current.value)},[]),target:t}}},43400:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(37876),l=n(14232),a=n(89037);let i=function(e){var t;let{className:n,sx:i,count:o=1,columns:s=1,spacing:c=20,justify:u="start",rounded:d=!1,rowHeight:p=null}=e,m=[],h=Math.ceil(o);s=null!=(t=Math.abs(parseInt(s,10)))?t:1,c=Math.abs(parseInt(c,10)),u=-1===["start","center","end","space-between"].indexOf(u)?"start":u;for(let e=0;e<h;e++){let t=h>o&&e===h-1?o%1*100:100,n=[];if(s>1)for(let e=1;e<=s;e++){let r=t-100/s*(e-1);n.push(r<100/s?r>0?r:0:100/s)}else n.push(t);m.push((0,r.jsx)(l.Fragment,{children:n.map((t,n)=>{let l=0===c?"".concat(t,"%"):"calc(".concat(t,"% - ").concat(c,"px)"),a=0===c?null:"".concat(c,"px"),i={width:l,marginLeft:a,marginTop:a};return d&&(i.borderRadius="50%"),null!==p&&(i.height=p),(0,r.jsx)("div",{className:"skeleton",style:i,children:"‌"},"".concat(e,"-").concat(n))})},e))}let x=0===c?null:"".concat(c,"px");return(0,r.jsx)(a.A,{sx:{...i},className:n,children:(0,r.jsx)("div",{"aria-live":"polite","aria-busy":!0,style:{paddingRight:x,paddingBottom:x,display:"inline-flex",flexFlow:"wrap",width:"100%",height:"100%",top:"-3px",position:"relative",zIndex:0,justifyContent:u},children:m})})}},50694:(e,t,n)=>{n.d(t,{A:()=>z});var r=n(37876),l=n(71090),a=n(88992),i=n(8628),o=n(7156),s=n(14232),c=n(39091),u=n(91040),d=n(66703),p=n(4728),m=n(67906),h=n(80553),x=n(44395),f=n(96571),g=n(35003),A=n(71733),j=n(1912),b=n(38111),y=n(15852),v=n(84812),w=n(79270),C=n(42371),k=n(38388),S=n(46200),I=n(20302),M=n(19999),R=n(99476),N=n(56792),P=n(10483);let z=e=>{var t,n;let{module:z,tooltipPlacement:E="bottom",propagateModule:B=null,scale:L=1,inactive:T=!1}=e,[W,X]=(0,s.useState)(null),{i18n:D}=(0,o.B)(),O=(0,s.useRef)(null),F=(0,i.A)(),K=(0,d.A)(),[U,$]=(0,s.useState)(!1),_={reason:c.Yj().max(512,()=>D.t("Must be at most {{n}} characters long",{n:512}))},{reset:q,control:Y,handleSubmit:Q,formState:{errors:V}}=(0,a.mN)({defaultValues:{reason:""},mode:"onChange",resolver:(0,l.t)(c.Ik().shape(_))}),G=I.A,H=T?K.palette.text.disabled:K.palette.text.primary,J=K.palette.background.paper,Z=D.t("Private module");do if(z.isPublic){if(H=K.palette.text.chip,z.isPending){G=M.A,J=K.palette.warning.main,Z=D.t("Module listing pending approval");break}if(z.isApproved){G=S.A,J=K.palette.info.main,Z=D.t("Module listing approved");break}G=R.A,J=K.palette.error.main,Z=D.t("Module listing rejected")}while(!1);let ee=()=>{X(null)},et=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("function"==typeof B&&"string"==typeof(null==z?void 0:z.id)){$(!1);try{var n;let r=await u.A.put("modules/".concat(z.id,"/review"),{approved:e,reason:t});z.id===(null==(n=r.data)?void 0:n.id)&&B(r.data,["isPublic","isPending","isApproved"])}catch(e){}q()}},en=async()=>{ee(),await et(!0)},er=async()=>{ee(),$(!0)},el=()=>{O.current&&O.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return(0,r.jsxs)(k.A,{sx:{position:"relative",display:"flex",alignItems:"center",transform:"scale(".concat(L,")"),transformOrigin:"50%"},children:["founder"===(null==(t=F.user)?void 0:t.userRole)&&z.isPublic&&"function"==typeof B?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.A,{title:D.t("Review module"),children:(0,r.jsx)(A.A,{color:z.isApproved?"primary":"warning",sx:{width:"40px",height:"40px",mr:2},onClick:e=>{X(e.currentTarget)},children:(0,r.jsx)(P.A,{fontSize:"small"})})}),(0,r.jsxs)(C.A,{anchorEl:W,open:!!W,onClose:ee,children:[(0,r.jsxs)(b.A,{disabled:z.isApproved,onClick:en,sx:{justifyContent:"space-between"},children:[(0,r.jsx)(N.A,{fontSize:"small"}),(0,r.jsx)(g.A,{sx:{ml:3},variant:"body2",children:D.t("Approve")})]}),(0,r.jsxs)(b.A,{disabled:!z.isPending&&!z.isApproved,onClick:er,children:[(0,r.jsx)(R.A,{fontSize:"small"}),(0,r.jsx)(g.A,{sx:{ml:3},variant:"body2",children:D.t("Reject")})]})]})]}):null,(0,r.jsx)(y.A,{title:Z,placement:E,children:(0,r.jsx)(k.A,{sx:{display:"flex",height:"2rem",width:"2rem",justifyContent:"center",alignItems:"center",background:J,borderRadius:"2rem"},children:(0,r.jsx)(G,{fontSize:"small",sx:{color:H}})})}),"founder"===(null==(n=F.user)?void 0:n.userRole)&&U?(0,r.jsxs)(w.A,{open:!0,onClose:()=>$(!1),sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[(0,r.jsx)(x.A,{children:D.t("Reject module")}),(0,r.jsx)(h.A,{children:(0,r.jsx)("form",{onSubmit:Q(async e=>{let{reason:t}=e;await et(!1,t)}),ref:O,children:(0,r.jsxs)(f.A,{fullWidth:!0,sx:{my:3},error:!!V.reason,children:[(0,r.jsx)(a.xI,{name:"reason",control:Y,render:e=>{let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(j.A,{multiline:!0,rows:2,value:t,onChange:n,onKeyDown:e=>"Enter"===e.key&&e.ctrlKey&&el(),spellCheck:!1,autoComplete:"off",inputProps:{maxLength:512,tabIndex:2},label:D.t("Rejection reason"),placeholder:D.t("Reason for rejection"),error:!!V.reason})}}),V.reason&&(0,r.jsx)(p.A,{sx:{color:"error.main"},children:V.reason.message})]})})}),(0,r.jsxs)(m.A,{children:[(0,r.jsx)(v.A,{color:"secondary",onClick:()=>$(!1),children:D.t("Cancel")}),(0,r.jsx)(v.A,{color:"error",onClick:el,startIcon:(0,r.jsx)(R.A,{}),children:D.t("Reject module")})]})]}):null]})}},84824:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(37876),l=n(35268),a=n(25999),i=n(38388);let o=(0,l.Ay)(i.A)(e=>{var t,n;let{theme:r,color:l}=e;return{backgroundColor:r.palette.background.paper,position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,height:"100%",width:"30%",backgroundColor:null!=(n=null==(t=r.palette[l])?void 0:t.main)?n:r.palette.primary.main,animation:"progress 1.5s infinite",willChange:"transform"},"@keyframes progress":{"0%":{transform:"translateX(-100%) scaleX(1)"},"70%":{transform:"translateX(200%) scaleX(1.5)"},"100%":{transform:"translateX(350%) scaleX(1)"}}}}),s=e=>{let{color:t="primary",variant:n="determinate",value:l=0,sx:i={}}=e;return("object"!=typeof i||null===i)&&(i={}),i={width:"100%",height:"4px",...i},["determinate","buffer"].includes(n)?(0,r.jsx)(a.A,{sx:i,color:t,variant:n,value:l}):(0,r.jsx)(o,{sx:i,color:t})}},98738:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(37876),l=n(14232),a=n(43934),i=n(66703),o=n(15852),s=n(63356),c=n(38388),u=n(8698);let d=e=>{let{items:t=[],setItems:n=()=>{},onDelete:d=null,sx:p={},tooltip:m=!1,tooltipEmpty:h=null,tooltipPrefix:x=null,maxContent:f=!1,numeric:g=!1,highlight:A=!1}=e,j=(0,l.useRef)(null),b=(0,l.useRef)(t),y=(0,l.useRef)(null),v=(0,i.A)();return t=(Array.isArray(t)?t:[]).map(e=>g?parseInt(e,10):"".concat(e||"")),("object"!=typeof p||null===p)&&(p={}),(0,l.useEffect)(()=>{y.current&&Array.isArray(t)&&(b.current=t,null!==j.current&&j.current.destroy(),j.current=a.Ay.create(y.current,{animation:150,onUpdate:e=>{let t=[...b.current],[r]=t.splice(e.oldIndex,1);t.splice(e.newIndex,0,r),b.current=t,n(t)}}))},[t]),(0,r.jsx)(c.A,{ref:y,sx:{...f?{width:"max-content"}:{width:"100%",flexWrap:"wrap"},borderRadius:1,padding:2,display:"flex",margin:0,"& .MuiChip-root:last-child":{marginRight:"0 !important"}},children:t.map((e,t)=>(0,r.jsx)(o.A,{title:m&&(null==e?void 0:e.length)?"".concat(x?"".concat(x,": "):"").concat(e):null!=h?h:null,placement:"top",children:(0,r.jsx)(s.A,{variant:e.length?"contained":"outlined",icon:(0,r.jsx)(u.A,{}),color:A&&(null==e?void 0:e.length)?"primary":"default",sx:{userSelect:"none",mr:2,mb:2*!f,cursor:"grab",borderRadius:1,...(null==e?void 0:e.length)?{}:{background:v.palette.divider},...p},label:e,onDelete:"function"==typeof d?()=>d(e):null})},"".concat(e,"-").concat(t)))})}}}]);
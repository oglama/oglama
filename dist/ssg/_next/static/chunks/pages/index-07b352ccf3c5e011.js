/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright Â© 2024-2025 Oglama (https://oglama.com)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{75557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(44302)}])},44302:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Go}});var r=n(47568),i=n(29815),o=n(97582),a=n(85893),l=n(60357),s=n.n(l),u=n(69604),c=n(67294),d=n(98404),p=n(67817);function f(e,t){return t&&Array.isArray(e)?e.reduce((function(e,n){return(null===n||void 0===n?void 0:n.id)===t?n:e}),null):null}function h(e,t,n){e=Array.isArray(e)?e.filter((function(e){return"object"===typeof e&&null!==e})):[],"object"===typeof n&&null!==n||(n={});var r=e.filter((function(e){return"bool"===e.type})).map((function(e){return e.key})),i=!1,o=!0,a=e.reduce((function(e,n){return n.key===t?n:e}),null);if(null!==a)switch(i="string"!==typeof a.depends||!r.includes(a.depends)||!!n[a.depends],a.type){case"int":case"string":o=!n[a.key]&&(null===a.default||"undefined"===typeof a.default);break;case"files":o=!Array.isArray(n[a.key])||!n[a.key].length;break;case"table":o=!n[a.key];break;default:o=!1}return{fieldShown:i,fieldEmpty:o}}var x=n(20214),m=n(41807),g=n(77058),v=n(11163),y=n(65782),Z=n.n(y),j=n(87066),b=n(90948),w=n(2734),k=n(80822),S=n(15861),C=n(11057),I=n(82975),_=n(82753);function A(e){var t=e.log;return(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center",width:"100%"},children:(0,a.jsx)(S.Z,{variant:"caption",noWrap:!0,align:"left",sx:{textTransform:"none",width:"calc(100% - 75px)"},children:t.m})})}var T=(0,b.ZP)(k.Z)((function(e){e.theme;var t=e.open;return{transition:"transform 350ms cubic-bezier(0.48, -0.35, 0.17, 0.95)",transform:void 0!==t&&t?"rotate(180deg)":"rotate(0deg)",justifyContent:"center",alignItems:"center",position:"relative",display:"flex"}})),z=function(e){var t=e.children,n=e.open,r=void 0!==n&&n,i=e.sx,o=void 0===i?{}:i;return"object"===typeof o&&null!==o||(o={}),(0,a.jsx)(T,{sx:o,open:!!r,children:t})};function E(e){var t=e.agents,n=(0,g.$)().i18n,r=(0,p.O)(),i=r.getAgentActive,o=r.onAgentActive,l=r.getAgentId,s=r.onAgentId,u=r.getLogs,d=r.onLog,f=r.getLogsEnabled,h=r.onLogsEnabled,x=r.getLogsVisible,m=r.onLogsVisible,v=r.setLogsVisible,y=(0,c.useState)(null),Z=y[0],j=y[1],b=(0,c.useState)(!1),w=b[0],T=b[1],E=(0,c.useState)(null),P=E[0],M=E[1],N=(0,c.useState)(!1),O=N[0],D=N[1],R=(0,c.useState)(!1),L=R[0],F=R[1];(0,c.useEffect)((function(){var e=u(l());j(Array.isArray(e)&&e.length?e[0]:null);var t=d((function(e){return j(Array.isArray(e)&&e.length?e[0]:null)}));T(i(l()));var n=o((function(e){var t=e.agentId,n=e.active;t===l()&&T(n)}));D(f());var r=h((function(e){return D(e)}));F(x());var a=m((function(e){return F(e)}));return function(){t(),n(),r(),a()}}),[P]),(0,c.useEffect)((function(){M(l());var e=s((function(e){return M(e)}));return function(){return e()}}),[t]);var W="action";return(w&&"string"==typeof(null===Z||void 0===Z?void 0:Z.s)||"error"===(null===Z||void 0===Z?void 0:Z.s))&&(W=Z.s),null!==P&&O?(0,a.jsx)(k.Z,{sx:{minWidth:"maxContent",width:"100%",flexShrink:1,display:"flex",height:"100%",overflow:"hidden"},children:(0,a.jsx)(k.Z,{sx:{width:"100%",height:"100%"},children:(0,a.jsxs)(C.Z,{onClick:function(){v(!L)},sx:{width:"100%",height:"100%",alignItems:"center",borderRadius:0,justifyContent:"start",pl:3},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[(0,a.jsx)(I.Z,{sx:{mr:2},color:W,fontSize:"small"}),null!==Z?(0,a.jsx)(A,{log:Z}):(0,a.jsx)(S.Z,{variant:"caption",noWrap:!0,align:"left",sx:{textTransform:"none",width:"calc(100% - 75px)"},children:n.t("No messages were recorded for this agent")})]}),(0,a.jsx)(k.Z,{sx:{position:"absolute",top:12,right:6},children:(0,a.jsx)(z,{open:L,children:(0,a.jsx)(_.Z,{color:"action"})})})]})})}):null}var P=n(26042),M=n(31425),N=n(6514),O=n(50657),D=n(43985),R=n(14924),L=n(45670),F=n(55050),W=n(46408),U=n(40044),B=n(42274),$=(0,b.ZP)(U.Z)((function(e){var t,n=e.theme;return t={},(0,R.Z)(t,n.breakpoints.down("md"),{minWidth:100}),(0,R.Z)(t,n.breakpoints.down("sm"),{minWidth:67}),t})),H=(0,b.ZP)("span")((function(e){var t=e.theme;return(0,R.Z)({lineHeight:1.71,fontSize:"0.875rem",marginLeft:t.spacing(2.4)},t.breakpoints.down("md"),{display:"none"})})),V=function(e){var t=e.tabs,n=e.hash,r=e.setHash,i=e.sx,o=void 0===i?{}:i,l=e.tabsReady,s=void 0===l||l,u=e.hideSingleTab,c=void 0===u||u,d=e.prefix,p=void 0===d?null:d,f=(0,g.$)().i18n,h={};return Object.keys(t).map((function(e){("undefined"===typeof t[e].visible||t[e].visible)&&(h[e]=t[e])})),null!==o&&"object"===typeof o||(o={}),(0,a.jsxs)(L.ZP,{value:n,children:[Object.keys(h).length<=1&&c?null:s?(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center"},children:[null!==p?(0,a.jsx)(k.Z,{sx:{mb:6,pl:3},children:p}):null,(0,a.jsx)(W.Z,{sx:{mb:6,pl:3},onChange:function(e,t){return r(t)},"aria-label":"Tabs",children:Object.keys(h).map((function(e,t){return(0,a.jsx)($,{value:e,label:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",px:2},children:[h[e].icon,(0,a.jsx)(H,{children:f.t(h[e].label)})]})},t)}))})]}):(0,a.jsx)(k.Z,{sx:{mb:6,height:"48px",width:{xs:"100%",md:"50%"}},children:(0,a.jsx)(B.Z,{count:1,columns:3})}),(0,a.jsx)(k.Z,{sx:(0,P.Z)({},o),children:Object.keys(h).map((function(e,t){return(0,a.jsx)(F.Z,{value:e,sx:{p:0},children:n===e?h[e].content:null},t)}))})]})},q=n(56267),K=n(7265),Y=n(51710),G=n(34386),X=n(35248),Q=n(5368);function J(e){var t=e.agent,n=e.title,r=void 0===n?null:n,i=e.iconSx,o=void 0===i?{}:i,l=e.nameSx,s=void 0===l?{}:l,u=(0,g.$)().i18n,c="string"===typeof(null===t||void 0===t?void 0:t.name)?"".concat(u.t("Agent")," ").concat(null===t||void 0===t?void 0:t.name):u.t("Agent");return(0,a.jsxs)(k.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none",fontSize:"inherit",fontFamily:"Inter, sans-serif"},children:[(0,a.jsx)(G.Z,{title:c,children:(0,a.jsxs)(k.Z,{sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",userSelect:"none"},children:[(0,a.jsx)(X.Z,{sx:(0,P.Z)({mr:2},o)}),(0,a.jsx)(k.Z,{sx:(0,P.Z)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"180px"},s),children:"string"===typeof(null===t||void 0===t?void 0:t.name)?t.name:null}),r?(0,a.jsx)(Q.Z,{}):null]})}),null!==r&&void 0!==r?r:null]})}var ee=n(51964),te=n.n(ee),ne=n(86886),re=n(60848),ie=n(32342),oe=n(44267),ae=n(66242),le=n(86822),se=n(87918),ue=n(47507),ce=function(e){var t=e.scale,n=void 0===t?1:t,r=e.small,i=void 0!==r&&r,o=(0,g.$)().i18n;return(0,a.jsx)(k.Z,{sx:{position:"relative",transform:"scale(".concat(n,")"),transformOrigin:"0 50%"},children:(0,a.jsx)(se.Z,{variant:i?"contained":"outlined",sx:(0,P.Z)({textTransform:"uppercase",userSelect:"none"},i?{"& .MuiChip-label":{px:"6px"}}:{px:2}),icon:(0,a.jsx)(ue.Z,{fontSize:"small"}),color:"success",size:"medium",label:i?"":o.t("Installed")})})},de=(0,b.ZP)("img")((function(e){return{marginBottom:e.theme.spacing(4),width:"96px",height:"96px",transition:"transform 100ms linear",position:"relative",zIndex:1}})),pe=(0,b.ZP)(S.Z)((function(e){return{fontWeight:400,flex:"1 1 100%",overflow:"hidden",fontSize:"0.75rem",whiteSpace:"nowrap",textOverflow:"ellipsis",textTransform:"none",marginBottom:e.theme.spacing(.75),maxWidth:"96px"}})),fe=function(e){var t=e.module,n=void 0===t?null:t,r=e.installedModuleId,i=void 0===r?null:r,o=e.setModuleId,l=void 0===o?function(){}:o,s=e.selected,u=void 0!==s&&s,c=(0,w.Z)(),d=(0,x.a)();return(0,a.jsx)(ne.ZP,{item:!0,children:(0,a.jsx)(C.Z,{color:"inherit",variant:"contained",onClick:function(){null!==n&&l(n.id)},sx:{borderRadius:1,p:0,background:u?c.palette.background.selected:"transparent","&:hover":{background:u?c.palette.background.selected:"transparent"},height:"100%"},children:(0,a.jsx)(ae.Z,{sx:{borderRadius:1,background:"transparent",boxShadow:"none",height:"100%"},children:(0,a.jsxs)(oe.Z,{sx:{"&.MuiCardContent-root":{p:3},height:"100%",position:"relative",borderRadius:1,border:"1px solid ".concat(u?c.palette.primary.main:c.palette.divider),display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex",width:"100%",position:"absolute",left:0,top:0,mt:0,px:1,zIndex:1e3,justifyContent:"space-between"},children:[(0,a.jsx)(k.Z,{children:(null===n||void 0===n?void 0:n.id)===i?(0,a.jsx)(ce,{scale:.8,small:!0}):null}),null!==n&&d.user.id===(null===n||void 0===n?void 0:n.authorId)?(0,a.jsx)(le.Z,{scale:.8,module:n}):null]}),(0,a.jsx)(k.Z,{sx:{position:"relative",mt:3,"&:before":{content:'""',display:null!==n?"block":"none",width:"96px",height:"96px",position:"absolute",top:0,left:0,zIndex:1,background:c.palette.background.paper,borderRadius:"50%",opacity:1}},children:null!==n?(0,a.jsx)(de,{src:null!==n.moduleLogoId?"".concat(ie.Z.s3Url,"/modules/").concat(n.id,"/").concat(n.moduleLogoId,".png"):"/img/placeholder/module.png"}):(0,a.jsx)(k.Z,{sx:{mb:2},children:(0,a.jsx)(B.Z,{rounded:!0,sx:{width:"96px",height:"96px"}})})}),null!==n?(0,a.jsx)(G.Z,{title:n.moduleName,children:(0,a.jsx)(pe,{children:n.moduleName})}):(0,a.jsx)(B.Z,{spacing:0,sx:{my:2,width:"96px",height:"1rem",display:"inline-block"}})]})})})})},he=n(58032),xe=n(98763),me=n(65834),ge=function(e){var t=e.modulesLoaded,n=e.setDialogCreate,r=void 0===n?function(){}:n;return(0,a.jsx)(ne.ZP,{item:!0,children:(0,a.jsx)(ae.Z,{sx:{boxShadow:"none"},children:(0,a.jsx)(oe.Z,{sx:{"&.MuiCardContent-root":{p:3},display:"flex",minHeight:"180px",boxShadow:"none"},children:(0,a.jsx)(k.Z,{sx:{width:"98px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(he.Z,{sx:{"&:hover":{transform:"scale(1.1)"}},size:"large",color:"primary",onClick:function(){return r(!0)},disabled:!t,children:t?(0,a.jsx)(me.Z,{}):(0,a.jsx)(xe.Z,{})})})})})})},ve=(0,b.ZP)(te())((function(e){return{padding:e.theme.spacing(2),overflow:"hidden",height:"calc(100vh - 235px)"}})),ye=function(e){var t=e.children;return(0,a.jsx)(ve,{options:{wheelPropagation:!1,suppressScrollX:!0},children:t})},Ze=function(e){var t=e.agent,n=e.moduleId,l=e.setModuleId,s=void 0===l?function(){}:l,u=e.modulesLoaded,d=e.modules,p=e.setModules,f=void 0===p?function(){}:p,h=(0,x.a)(),m=(0,c.useState)(!1),g=m[0],v=m[1],y=function(){var e=(0,r.Z)((function(e,t){var n,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(!h.user)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,j.Z.post("modules",{moduleName:e,moduleDescription:t})];case 2:return r=o.sent(),"string"===typeof(null===(n=r.data)||void 0===n?void 0:n.id)&&(f((0,i.Z)(d).concat([r.data])),s(r.data.id)),[3,4];case 3:return o.sent(),[3,4];case 4:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ye,{children:(0,a.jsxs)(ne.ZP,{container:!0,spacing:3,children:[u?d.map((function(e){return(0,a.jsx)(fe,{installedModuleId:null===t||void 0===t?void 0:t.installedModuleId,selected:n===e.id,module:e,setModuleId:s},e.id)})):[1,2,3].map((function(e){return(0,a.jsx)(fe,{},e)})),(0,a.jsx)(ge,{modulesLoaded:u,setDialogCreate:v})]})}),g?(0,a.jsx)(re.Z,{isOpen:!0,onCreate:y,onClose:function(){return v(!1)}}):null]})},je=n(87109),be=n(50135),we=n(46901),ke=n(69497),Se=(0,b.ZP)(te())((function(e){return{padding:e.theme.spacing(2),overflow:"hidden",height:"calc(100vh - 280px)"}})),Ce=function(e){var t=e.children;return(0,a.jsx)(Se,{options:{wheelPropagation:!1,suppressScrollX:!0},children:t})},Ie=function(e){var t=e.agent,n=e.moduleId,r=e.setModuleId,i=void 0===r?function(){}:r,o=e.modulesLoaded,l=e.modules,s=e.setSearchModuleName,u=void 0===s?function(){}:s,d=(0,g.$)().i18n,p=(0,c.useState)(null),f=(0,c.useCallback)((function(e){null!==p.current&&window.clearTimeout(p.current),p.current=window.setTimeout((function(){u(e),p.current=null}),250)}),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(be.Z,{variant:"standard",placeholder:d.t("Search"),onChange:function(e){return f(e.target.value.toLowerCase())},sx:{px:2,mb:2,width:"100%","& input":{fontSize:"0.75rem"}},InputProps:{startAdornment:(0,a.jsx)(je.Z,{position:"start",children:(0,a.jsx)(ke.Z,{fontSize:"small",sx:{ml:2,mr:-4}})})}}),(0,a.jsxs)(Ce,{children:[o&&!l.length?(0,a.jsx)(k.Z,{children:(0,a.jsx)(we.Z,{severity:"info",children:d.t("No modules matched your search criteria")})}):null,(0,a.jsx)(ne.ZP,{container:!0,spacing:3,children:o?l.map((function(e){return(0,a.jsx)(fe,{installedModuleId:null===t||void 0===t?void 0:t.installedModuleId,selected:n===e.id,module:e,setModuleId:i},e.id)})):[1,2,3,4].map((function(e){return(0,a.jsx)(fe,{},e)}))})]})]})},_e=n(87536),Ae=n(47533),Te=n(5097),ze=n(74231),Ee=n(56815),Pe=n(37645),Me=n(94054),Ne=n(93946),Oe=n(23599),De=n(67720),Re=n(38333),Le=n(38299),Fe=n(3690),We=n(46160),Ue=n(97943),Be=n(38047),$e=n(37936),He=n(69396),Ve=n(38074),qe=n(96544),Ke=(0,b.ZP)("img")((function(){return{width:200,height:200}})),Ye=function(e){var t=e.uploadPath,n=e.getSrc,i=e.onChange,l=void 0===i?(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return[2]}))})):i,s=e.crop,u=void 0===s?"fit":s,d=e.backgroundColor,p=void 0===d?null:d,f=e.borderColor,h=void 0===f?null:f,x=e.borderWidth,m=void 0===x?null:x,v=e.previewWidth,y=void 0===v?200:v,Z=e.previewHeight,b=void 0===Z?200:Z,C=e.radius,I=void 0===C?5:C,_=e.alt,A=void 0===_?"Logo":_,T=e.inputName,z=void 0===T?"logo":T,E=e.label,M=void 0===E?"Select logo":E,N=e.active,O=void 0!==N&&N,D=e.width,R=void 0===D?256:D,L=e.height,F=void 0===L?256:L;"function"!==typeof n&&(n=function(){return"/img/logo/192.png"});var W=(0,w.Z)(),U=(0,c.useState)(n()),$=U[0],H=U[1],V=(0,c.useState)(!1),K=V[0],Y=V[1],G=(0,g.$)().i18n,X=null!==h&&null!==m?"solid":null,Q=(0,Ve.uI)({multiple:!1,accept:{"image/png":[".png"],"image/jpg":[".jpg",".jpeg"],"image/webp":[".webp"]},onDrop:function(e){var n=document.createElement("img");n.onload=function(){Y(!0),setTimeout((function(){var e=n.width,i=n.height,a=0,s=0;if(e>i)if("fill"===u)i=F,e*=F/n.height,a=parseInt((R-e)/2,10);else e=R,i*=R/n.width,s=parseInt((F-i)/2,10);else if("fill"===u)e=R,i*=R/n.width,s=parseInt((F-i)/2,10);else i=F,e*=F/n.height,a=parseInt((R-e)/2,10);var c=document.createElement("canvas");c.width=R,c.height=F,c.getContext("2d").drawImage(n,a,s,e,i),c.toBlob((function(e){var n=new FormData;n.append(z,e),(0,r.Z)((function(){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,j.Z.post(t,n,{headers:{"Content-Type":"multipart/form-data"}})];case 1:return r=i.sent(),H(URL.createObjectURL(e)),"function"!==typeof l?[3,3]:[4,l(r.data,URL.createObjectURL(e))];case 2:i.sent(),i.label=3;case 3:return Y(!1),[3,5];case 4:return i.sent(),Y(!1),[3,5];case 5:return[2]}}))}))()}),"png"),c.remove(),n.remove()}),q.Z.delay.request)},n.onerror=function(){Te.A.error(G.t("The selected file is not a valid image"),{duration:5e3,ariaProps:{role:"alert"}})},n.src=URL.createObjectURL(Object.assign(e[0]))},validator:function(){}}),J=Q.getRootProps,ee=Q.getInputProps;return(0,a.jsx)(k.Z,{children:K?(0,a.jsx)(k.Z,{sx:{width:y,height:b,display:"flex",alignItems:"center",flexDirection:"column"},children:(0,a.jsx)(B.Z,{count:1,spacing:0,rounded:!0,sx:{p:5,width:y,height:b}})}):O?(0,a.jsxs)(k.Z,(0,He.Z)((0,P.Z)({},J({className:"dropzone"})),{sx:{position:"relative",alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column"},children:[(0,a.jsx)("input",(0,P.Z)({},ee())),(0,a.jsx)(Ke,{src:$,alt:"logo",sx:{m:0,pointerEvents:"none",borderRadius:I,backgroundColor:p,borderStyle:X,borderWidth:m,borderColor:h,width:y,height:b}}),(0,a.jsxs)(k.Z,{sx:{cursor:"pointer",position:"absolute",width:"70%",height:"70%",background:"dark"===W.palette.mode?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.6)",borderRadius:"50%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","&:hover > p":{display:"none"},"&:hover > svg":{transform:"scale(2)"}},children:[(0,a.jsx)(qe.Z,{}),(0,a.jsx)(S.Z,{size:"large",color:"inherit",sx:{mt:2,textAlign:"center"},children:M})]})]})):(0,a.jsx)(k.Z,{sx:{position:"relative",width:y,height:b,"&:before":{content:'""',display:"block",width:y,height:b,position:"absolute",top:0,left:0,zIndex:1,background:W.palette.background.paper,borderRadius:I}},children:(0,a.jsx)(Ke,{src:$,sx:{position:"relative",zIndex:1,width:y,height:b,borderRadius:I,backgroundColor:"transparent",borderWidth:m,borderColor:h},alt:A})})})},Ge=function(e){var t=e.agent,n=e.onAgentUpdate,i=void 0===n?function(){}:n,l=e.privateModules,s=void 0===l?[]:l,u=e.setPrivateModules,d=void 0===u?function(){}:u,f=e.publicModules,h=void 0===f?[]:f,m=e.setPublicModules,v=void 0===m?function(){}:m,y=e.moduleId,Z=e.setModuleId,b=void 0===Z?function(){}:Z,I=e.setOpen,_=void 0===I?function(){}:I,A=(0,p.O)(),T=A.getSource,z=A.setSource,E=A.setSourceModified,P=A.setAgentTab,R=(0,g.$)().i18n,L=(0,c.useRef)(null),F=(0,x.a)(),W=(0,w.Z)(),U=(0,c.useState)(null),$=U[0],H=U[1],V=(0,c.useState)(!1),K=V[0],Y=V[1],G=(0,c.useState)(!1),X=G[0],Q=G[1],J=(0,c.useState)(null),ee=J[0],te=J[1],ne=(0,c.useState)(!1),re=ne[0],oe=ne[1],ae=(0,c.useState)(!1),se=ae[0],de=ae[1],pe=(0,c.useState)(!1),fe=pe[0],he=pe[1],xe={name:ze.Z_().required(R.t("Module name is required")).min(3,(function(){return R.t("Must be at least {{n}} characters long",{n:3})})).max(64,(function(){return R.t("Must be at most {{n}} characters long",{n:64})})),description:ze.Z_().max(1024,(function(){return R.t("Must be at most {{n}} characters long",{n:1024})}))},me=(0,_e.cI)({defaultValues:{name:"",description:""},mode:"onChange",resolver:(0,Ae.X)(ze.Ry().shape(xe))}),ge=me.setValue,ve=me.control,ye=me.handleSubmit,Ze=me.formState.errors,ke=function(){H(null)},Se=function(){var e=(0,r.Z)((function(e,t){var n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return"string"!==typeof(n=null===e||void 0===e?void 0:e.id)?[3,2]:[4,T(n,!0)];case 1:i=o.sent(),null===(r=window.sdk)||void 0===r||r.ibc.source.send(n,"ibc-main:module-repo:data",[{agentData:e,moduleData:t,sourceCode:i}]),o.label=2;case 2:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=(0,r.Z)((function(){var e,n,r,a,l,s,u,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:Y(!1),o.label=1;case 1:return o.trys.push([1,7,,8]),[4,j.Z.put("agents/".concat(t.id,"/modules/").concat(y))];case 2:return a=o.sent(),t.id===(null===(e=a.data)||void 0===e?void 0:e.id)&&i(a.data),[4,j.Z.get("agents/".concat(t.id,"/src"))];case 3:return l=o.sent(),Array.isArray(null===(n=l.data)||void 0===n?void 0:n.srcStateMachine)&&(z(t.id,l.data),E(t.id,!1)),[4,j.Z.get("modules/".concat(y))];case 4:return s=o.sent(),"string"!==typeof(null===(r=s.data)||void 0===r?void 0:r.id)?[3,6]:[4,Se(a.data,s.data)];case 5:o.sent(),o.label=6;case 6:return[3,8];case 7:return u=o.sent(),Te.A.error("".concat(R.t("Install error"),": ").concat(null!==(c=u.message)&&void 0!==c?c:u),{duration:5e3,ariaProps:{role:"alert"}}),[3,8];case 8:return window.setTimeout((function(){Y(!0),_(!1),P("settings")}),250),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Ie=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Array.isArray(n)&&n.length){te(e);var r=function(t){if((null===t||void 0===t?void 0:t.id)===y){var r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;t[s]=e[s]}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}return t};v(structuredClone(h).map(r)),d(structuredClone(s).map(r))}Se(t,e)},He=function(){var e=(0,r.Z)((function(e){var t,n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(t=e.name,n=e.description,!F.user.id===(null===ee||void 0===ee?void 0:ee.authorId))return[2];Q(!1),Y(!1),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,j.Z.put("modules/".concat(y),{moduleName:t,moduleDescription:n})];case 2:return i=o.sent(),y===(null===(r=i.data)||void 0===r?void 0:r.id)&&Ie(i.data,["moduleName","moduleDescription"]),[3,4];case 3:return o.sent(),[3,4];case 4:return Y(!0),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(!F.user.id===(null===ee||void 0===ee?void 0:ee.authorId))return[2];Y(!1),oe(!0),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,j.Z.delete("modules/".concat(y))];case 2:return n.sent(),e=structuredClone(t),(null===t||void 0===t?void 0:t.installedModuleId)===y&&(e.installedModuleId=null,e.installedModuleSrcId=null,i(e)),b((null===t||void 0===t?void 0:t.installedModuleId)===y?null:t.installedModuleId),[4,Se(e,(null===t||void 0===t?void 0:t.installedModuleId)===y?null:ee)];case 3:return n.sent(),[3,5];case 4:return n.sent(),[3,5];case 5:return v(structuredClone(h).filter((function(e){return(null===e||void 0===e?void 0:e.id)!==y}))),d(structuredClone(s).filter((function(e){return(null===e||void 0===e?void 0:e.id)!==y}))),Y(!0),oe(!1),de(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(!F.user.id===(null===ee||void 0===ee?void 0:ee.authorId))return[2];Y(!1),oe(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,j.Z.put("modules/".concat(y),{isPublic:!ee.isPublic})];case 2:return t=n.sent(),y===(null===(e=t.data)||void 0===e?void 0:e.id)&&Ie(t.data,["isPublic","isPending","isApproved"]),[3,4];case 3:return n.sent(),[3,4];case 4:return Y(!0),oe(!1),he(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){if(Q(!1),null!==y){Y(!1);var e=window.setTimeout((0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,j.Z.get("modules/".concat(y))];case 1:return t=n.sent(),te(y===(null===(e=t.data)||void 0===e?void 0:e.id)?t.data:null),[3,3];case 2:return n.sent(),te(null),[3,3];case 3:return Y(!0),[2]}}))})),q.Z.delay.request);return function(){return window.clearTimeout(e)}}te(null)}),[y]),(0,c.useEffect)((function(){null!==ee&&(ge("name",ee.moduleName),ge("description",ee.moduleDescription))}),[ee]);var Ke=function(){L.current&&L.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return(0,a.jsxs)(k.Z,{sx:{display:"flex",position:"relative",flexDirection:"column",alignItems:"center",width:"100%",height:"calc(100vh - 180px)"},children:[(0,a.jsxs)(k.Z,{sx:{position:"absolute",top:0,right:-6,zIndex:11,width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,a.jsx)(k.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:!X&&K&&null!==ee?t.installedModuleId!==(null===ee||void 0===ee?void 0:ee.id)?(0,a.jsx)(C.Z,{variant:"contained",sx:{borderRadius:"1rem"},startIcon:(0,a.jsx)(ue.Z,{}),size:"small",onClick:Ce,className:null===t.installedModuleId?"pop pop-rounded":null,children:R.t("Install module")}):(0,a.jsx)(ce,{}):null}),F.user.id===(null===ee||void 0===ee?void 0:ee.authorId)&&K?X?(0,a.jsx)(C.Z,{onClick:Ke,sx:{mr:2,justifySelf:"end",mt:"5px"},variant:"contained",size:"small",color:"success",startIcon:(0,a.jsx)($e.Z,{}),children:R.t("Save")}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(k.Z,{sx:{mr:2,display:"flex",alignItems:"center"},children:[null!==ee&&F.user.id===ee.authorId?(0,a.jsx)(le.Z,{module:ee,propagateModule:Ie}):null,(0,a.jsx)(Ne.Z,{sx:{width:"40px",height:"40px",ml:2},onClick:function(e){H(e.currentTarget)},children:(0,a.jsx)(We.Z,{fontSize:"small"})})]}),(0,a.jsxs)(Re.Z,{anchorOrigin:{vertical:"bottom",horizontal:"left"},anchorEl:$,open:Boolean($),onClose:ke,children:[(0,a.jsx)(Oe.Z,{onClick:function(){ke(),Q(!0)},sx:{justifyContent:"space-between"},children:(0,a.jsxs)(k.Z,{sx:{display:"flex"},children:[(0,a.jsx)(Fe.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{sx:{ml:3},variant:"body2",children:R.t("Edit module")})]})}),(0,a.jsx)(Oe.Z,{onClick:function(){ke(),he(!0)},sx:{justifyContent:"space-between"},children:(0,a.jsxs)(k.Z,{sx:{display:"flex"},children:[ee.isPublic?(0,a.jsx)(Ue.Z,{fontSize:"small"}):(0,a.jsx)(Be.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{sx:{ml:3},variant:"body2",children:ee.isPublic?R.t("Unpublish module"):R.t("Publish module")})]})}),(0,a.jsx)(De.Z,{}),(0,a.jsx)(Oe.Z,{onClick:function(){ke(),de(!0)},sx:{justifyContent:"space-between"},children:(0,a.jsxs)(k.Z,{sx:{display:"flex"},children:[(0,a.jsx)(Le.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{sx:{ml:3},variant:"body2",children:R.t("Delete module")})]})})]})]}):null]}),(0,a.jsx)(k.Z,{sx:{height:180,mt:10},children:K?(0,a.jsx)(Ye,{crop:"fill",previewWidth:180,previewHeight:180,borderWidth:0,borderColor:W.palette.background.paper,backgroundColor:W.palette.background.paper,inputName:"logo",uploadPath:"modules/".concat(y,"/logo"),active:X,label:R.t("Select logo"),onChange:function(e){Ie(e,["moduleLogoId"])},alt:R.t("Module logo"),getSrc:function(){return"string"===typeof(null===ee||void 0===ee?void 0:ee.moduleLogoId)?"".concat(ie.Z.s3Url,"/modules/").concat(y,"/").concat(ee.moduleLogoId,".png"):"/img/placeholder/module.png"}}):(0,a.jsx)(B.Z,{rounded:!0,sx:{width:"180px",height:"180px"}})}),(0,a.jsx)("form",{onSubmit:ye(He),ref:L,style:{width:"100%",flexGrow:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:(0,a.jsxs)(a.Fragment,{children:[K?X?(0,a.jsxs)(Me.Z,{fullWidth:!0,sx:{my:2,px:2},error:!!Ze.name,children:[(0,a.jsx)(_e.Qr,{name:"name",control:ve,render:function(e){var t=e.field,n=t.value,r=t.onChange;return(0,a.jsx)(be.Z,{autoFocus:!0,required:!0,value:n,onChange:r,onKeyDown:function(e){return"Enter"===e.key&&Ke()},spellCheck:!1,autoComplete:"off",inputProps:{minLength:3,maxLength:64,tabIndex:1},InputProps:{sx:{borderRadius:1},startAdornment:(0,a.jsx)(je.Z,{position:"start",sx:{mr:-2},children:(0,a.jsx)(D.Z,{fontSize:"small"})})},label:R.t("Module name"),placeholder:R.t("Module name"),error:Boolean(Ze.name)})}}),Ze.name&&(0,a.jsx)(Ee.Z,{sx:{color:"error.main"},children:Ze.name.message})]}):(0,a.jsx)(S.Z,{variant:"h4",sx:{textAlign:"center",my:4},children:null!==ee?ee.moduleName:R.t("Module not found")}):(0,a.jsx)(k.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,a.jsx)(B.Z,{spacing:0,sx:{width:"15rem",my:5,height:"0.75rem",display:"inline-block"}})}),(0,a.jsx)(k.Z,{sx:{overflowY:"auto",mr:"1px",p:2},children:K?(0,a.jsxs)(k.Z,{children:[null===ee||!ee.isPublic||ee.isPending||ee.isApproved||X?null:(0,a.jsx)(we.Z,{severity:"error",sx:{mb:2},children:(0,a.jsx)(S.Z,{variant:"caption",color:"inherit",children:"string"===typeof ee.reason&&ee.reason.length?"".concat(R.t("Module rejected"),": ").concat(ee.reason):R.t("Module rejected")})}),X?(0,a.jsxs)(Me.Z,{fullWidth:!0,error:!!Ze.description,children:[(0,a.jsx)(_e.Qr,{name:"description",control:ve,render:function(e){var t=e.field,n=t.value,r=t.onChange;return(0,a.jsx)(be.Z,{multiline:!0,minRows:5,value:n,onChange:r,spellCheck:!1,autoComplete:"off",onKeyDown:function(e){return"Enter"===e.key&&e.ctrlKey&&Ke()},inputProps:{maxLength:1024,tabIndex:2,sx:{fontSize:"0.75rem"}},InputProps:{sx:{p:1,borderRadius:1}},label:R.t("Module description"),placeholder:R.t("Module description"),error:Boolean(Ze.description)})}}),Ze.description&&(0,a.jsx)(Ee.Z,{sx:{color:"error.main"},children:Ze.description.message})]}):(null===ee||void 0===ee?void 0:ee.moduleDescription.length)?(0,a.jsx)(S.Z,{color:"inherit",variant:"caption",sx:{whiteSpace:"pre-wrap"},children:ee.moduleDescription}):(0,a.jsx)(we.Z,{variant:"standard",severity:"warning",sx:{height:"auto"},children:(0,a.jsx)(S.Z,{color:"inherit",variant:"caption",sx:{whiteSpace:"pre-wrap"},children:R.t("No description provided")})})]}):(0,a.jsx)(B.Z,{sx:{mt:-2},count:3})})]})}),se?(0,a.jsxs)(O.Z,{open:!0,onClose:function(){return re?de(!1):null},sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[re?null:(0,a.jsx)(Pe.Z,{children:R.t("Delete module")}),(0,a.jsx)(N.Z,{children:re?(0,a.jsx)(B.Z,{}):(0,a.jsx)(we.Z,{severity:"warning",children:R.t("Are you sure you want to delete this module?")})}),re?null:(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{color:"secondary",onClick:function(){return de(!1)},children:R.t("Cancel")}),(0,a.jsx)(C.Z,{color:"error",onClick:Ve,startIcon:(0,a.jsx)(Le.Z,{}),children:R.t("Delete module")})]})]}):null,fe?(0,a.jsxs)(O.Z,{open:!0,onClose:function(){return re?he(!1):null},sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[re?null:(0,a.jsx)(Pe.Z,{children:(null===ee||void 0===ee?void 0:ee.isPublic)?R.t("Unpublish module"):R.t("Publish module")}),(0,a.jsx)(N.Z,{children:re?(0,a.jsx)(B.Z,{}):(0,a.jsx)(we.Z,{severity:"warning",children:ee.isPublic?R.t("Are you sure you want to unpublish this module? It will no longer be available for install in the module store."):R.t("This action will make your module public. Once approved, it will be available to others in the module store.")})}),re?null:(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{color:"secondary",onClick:function(){return he(!1)},children:R.t("Cancel")}),(0,a.jsx)(C.Z,{color:ee.isPublic?"error":"primary",onClick:qe,startIcon:ee.isPublic?(0,a.jsx)(Ue.Z,{fontSize:"small"}):(0,a.jsx)(Be.Z,{fontSize:"small"}),children:(null===ee||void 0===ee?void 0:ee.isPublic)?R.t("Unpublish module"):R.t("Publish module")})]})]}):null]})},Xe=function(e){var t=e.agent,n=e.setOpen,i=void 0===n?function(){}:n,l=e.onAgentUpdate,s=void 0===l?function(){}:l,u=(0,c.useState)(),d=u[0],p=u[1],f=(0,c.useState)(""),h=f[0],x=f[1],m=(0,c.useState)(!1),g=m[0],v=m[1],y=(0,c.useState)([]),Z=y[0],b=y[1],w=(0,c.useState)(!1),S=w[0],C=w[1],I=(0,c.useState)([]),_=I[0],A=I[1],T=(0,c.useState)(null),z=T[0],E=T[1];(0,c.useEffect)((function(){var e;v(!1),p(null!==(e=null===t||void 0===t?void 0:t.installedModuleId)&&void 0!==e?e:null);var n=window.setTimeout((0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,j.Z.get("modules")];case 1:return e=t.sent(),Array.isArray(e.data)&&b(e.data),v(!0),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}}))})),2*q.Z.delay.request);return function(){window.clearTimeout(n)}}),[]),(0,c.useEffect)((function(){C(!1);var e=window.setTimeout((0,r.Z)((function(){var e,t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t="string"===typeof z&&z.length?{moduleName:z}:{},[4,j.Z.get("repo",{params:t})];case 1:return n=r.sent(),Array.isArray(null===(e=n.data)||void 0===e?void 0:e.modules)&&A(n.data.modules),[3,3];case 2:return r.sent(),[3,3];case 3:return C(!0),[2]}}))})),q.Z.delay.request);return function(){window.clearTimeout(e)}}),[z]);var P={"":{label:"Repository",icon:(0,a.jsx)(Y.Z,{}),content:(0,a.jsx)(Ie,{agent:t,moduleId:d,setModuleId:p,modulesLoaded:S,modules:_,setSearchModuleName:E})},dev:{label:"My modules",icon:(0,a.jsx)(K.Z,{}),content:(0,a.jsx)(Ze,{agent:t,moduleId:d,setModuleId:p,modulesLoaded:g,modules:Z,setModules:b})}};return(0,a.jsxs)(k.Z,{sx:{display:"flex",height:"100%"},children:[(0,a.jsx)(k.Z,{sx:{width:"100%"},children:(0,a.jsx)(V,{tabs:P,hash:h,setHash:x,prefix:(0,a.jsx)(J,{agent:t})})}),d?(0,a.jsx)(k.Z,{sx:{width:"35%",minWidth:"400px",height:"100%",p:2,ml:1},children:(0,a.jsx)(Ge,{agent:t,setOpen:i,onAgentUpdate:s,publicModules:_,setPublicModules:A,privateModules:Z,setPrivateModules:b,moduleId:d,setModuleId:p})}):null]})},Qe=function(e){var t=e.agents,n=e.isOpen,r=void 0!==n&&n,i=e.setOpen,o=void 0===i?function(){}:i,l=e.onAgentUpdate,s=void 0===l?function(){}:l,u=e.onOpen,d=void 0===u?function(){}:u,h=e.onClose,x=void 0===h?function(){}:h,m=(0,p.O)(),v=m.getAgentId,y=m.onAgentId,Z=(0,g.$)().i18n,j=(0,w.Z)(),b=(0,c.useState)(f(t,v())),I=b[0],_=b[1],A=(0,c.useState)("string"===typeof(null===I||void 0===I?void 0:I.installedModuleId)),T=A[0],z=A[1];(0,c.useEffect)((function(){r&&"function"===typeof d&&d()}),[r]);var E=function(){r&&"function"===typeof x&&x()};(0,c.useEffect)((function(){z("string"===typeof(null===I||void 0===I?void 0:I.installedModuleId))}),[I]),(0,c.useEffect)((function(){_(f(t,v()));var e=y((function(e){return _(f(t,e))}));return function(){return e()}}),[t]);var R=T?{maxWidth:"100%",height:"100%",p:0}:null===(null===I||void 0===I?void 0:I.installedModuleId)?{backgroundImage:"url('/img/pages/circles-".concat(j.palette.mode,".svg')"),backgroundRepeat:"no-repeat",backgroundPosition:"50% -380px",backgroundSize:"150% auto"}:{};return r?(0,a.jsxs)(O.Z,{open:!0,fullWidth:!0,disableEscapeKeyDown:!0,onClose:E,sx:{"& .MuiPaper-root":(0,P.Z)({width:"100%",maxWidth:750,p:2},R)},children:[(0,a.jsx)(N.Z,{children:T?(0,a.jsx)(Xe,{agent:I,onAgentUpdate:s,setOpen:o}):(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",flexDirection:"column"},children:[(0,a.jsx)(k.Z,{sx:{mt:12},children:(0,a.jsx)(S.Z,{variant:"h2",children:Z.t("Install a module to run within the agent")})}),(0,a.jsx)(C.Z,{sx:{mt:12},size:"large",autoFocus:!0,startIcon:(0,a.jsx)(D.Z,{}),onClick:function(){return z(!0)},variant:"contained",className:"pop",children:Z.t("Install module")})]})}),(0,a.jsx)(M.Z,{children:(0,a.jsx)(C.Z,{color:"secondary",onClick:E,children:Z.t("Close")})})]}):null},Je=n(74496),et=n(52554),tt=n(25577),nt=function(e){var t=e.isOpen,n=void 0!==t&&t,i=e.onOpen,l=void 0===i?function(){}:i,s=e.onClose,u=void 0===s?function(){}:s,d=e.onAgentCreate,p=void 0===d?function(){}:d,f=(0,g.$)().i18n,h=(0,c.useRef)(null),x=(0,c.useState)(!1),m=x[0],v=x[1],y=(0,c.useState)(!1),Z=y[0],j=y[1],b=(0,c.useState)(!1),w=b[0],I=b[1],_={name:ze.Z_().required(f.t("Agent name is required")).min(3,(function(){return f.t("Must be at least {{n}} characters long",{n:3})})).max(64,(function(){return f.t("Must be at most {{n}} characters long",{n:64})}))},A=(0,_e.cI)({defaultValues:{name:""},mode:"onChange",resolver:(0,Ae.X)(ze.Ry().shape(_))}),T=A.reset,z=A.control,E=A.handleSubmit,P=A.formState.errors,D=function(){var e=(0,r.Z)((function(e){var t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return t=e.name,I(!0),[4,p(t)];case 1:return n.sent(),I(!1),u(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){n&&"function"===typeof l&&l()}),[n]);var R=function(){n&&"function"===typeof u&&u(),T()},L=function(){h.current&&h.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return n?(0,a.jsxs)(O.Z,{open:!0,onClose:w?function(){}:R,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[w?null:(0,a.jsxs)(Pe.Z,{children:[f.t("Add agent"),(0,a.jsx)(Ne.Z,{"aria-label":f.t("More information"),sx:{ml:2},color:"default",onClick:function(){return j(!Z)},size:"large",children:Z?(0,a.jsx)(tt.Z,{}):(0,a.jsx)(Je.Z,{})})]}),(0,a.jsxs)(N.Z,{children:[!w&&Z?(0,a.jsx)(we.Z,{severity:"success",sx:{mb:6},icon:(0,a.jsx)(et.Z,{className:"zoom-in"}),children:(0,a.jsx)(S.Z,{color:"inherit",variant:"body2",children:f.t("Agents are browser instances that use a bit of AI magic to automate repetitive web tasks that are just too boring for humans.")})}):null,(0,a.jsx)("form",{onSubmit:E(D),ref:h,children:w?(0,a.jsx)(k.Z,{sx:{mt:6},children:(0,a.jsx)(B.Z,{})}):(0,a.jsxs)(Me.Z,{fullWidth:!0,sx:{my:3},error:!!P.name,children:[(0,a.jsx)(_e.Qr,{name:"name",control:z,render:function(e){var t=e.field,n=t.value,r=t.onChange;return(0,a.jsx)(be.Z,{disabled:w,autoFocus:!0,required:!0,value:n,onChange:function(e){v(e.target.value.length>=3),r(e)},onKeyDown:function(e){return"Enter"===e.key&&L()},spellCheck:!1,autoComplete:"off",inputProps:{minLength:3,maxLength:64,tabIndex:1},InputProps:{startAdornment:(0,a.jsx)(je.Z,{position:"start",sx:{mr:0},children:(0,a.jsx)(X.Z,{})})},label:f.t("Agent name"),placeholder:f.t("Agent name"),error:Boolean(P.name)})}}),P.name&&(0,a.jsx)(Ee.Z,{sx:{color:"error.main"},children:P.name.message})]})})]}),w?null:(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{color:"secondary",onClick:R,children:f.t("Cancel")}),m?(0,a.jsx)(C.Z,{variant:"contained",className:"pop",onClick:L,endIcon:(0,a.jsx)(Q.Z,{}),children:f.t("Next")}):null]})]}):null},rt=function(e){var t,n=e.agents,i=e.isOpen,l=void 0!==i&&i,s=e.onOpen,u=void 0===s?function(){}:s,d=e.onClose,h=void 0===d?function(){}:d,x=e.onAgentUpdate,m=void 0===x?function(){}:x,v=(0,g.$)().i18n,y=(0,p.O)(),Z=y.getAgentId,b=y.onAgentId,w=(0,c.useRef)(null),I=(0,c.useState)(!1),_=I[0],A=I[1],T=(0,c.useState)(!1),z=T[0],E=T[1],P=(0,c.useState)(!1),D=P[0],R=P[1],L=(0,c.useState)(!1),F=L[0],W=L[1],U=(0,c.useState)(f(n,Z())),$=U[0],H=U[1],V={name:ze.Z_().required(v.t("Agent name is required")).min(3,(function(){return v.t("Must be at least {{n}} characters long",{n:3})})).max(64,(function(){return v.t("Must be at most {{n}} characters long",{n:64})}))},q={name:null!==(t=null===$||void 0===$?void 0:$.name)&&void 0!==t?t:""},K=(0,_e.cI)({defaultValues:q,mode:"onChange",resolver:(0,Ae.X)(ze.Ry().shape(V))}),Y=K.reset,G=K.control,Q=K.handleSubmit,ee=K.formState.errors,te=function(){var e=(0,r.Z)((function(e){var t,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:t=e.name,W(!0),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,null===(n=window.sdk)||void 0===n?void 0:n.ipc.main.setOnTop()];case 2:return i.sent(),[4,j.Z.put("agents/".concat($.id),{name:t})];case 3:return r=i.sent(),[4,m(r.data)];case 4:return i.sent(),[3,6];case 5:return i.sent(),[3,6];case 6:return W(!1),h(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){H(f(n,Z()));var e=b((function(e){return H(f(n,e))}));return function(){return e()}}),[n]),(0,c.useEffect)((function(){l&&"function"===typeof u&&u()}),[l]);var ne=function(){l&&"function"===typeof h&&h(),Y()},re=function(){w.current&&w.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return l?(0,a.jsxs)(O.Z,{open:!0,onClose:F?function(){}:ne,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[F?null:(0,a.jsx)(Pe.Z,{children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,a.jsx)(J,{agent:$,title:v.t("Rename agent")}),(0,a.jsx)(Ne.Z,{"aria-label":v.t("More information"),sx:{ml:2},color:"default",onClick:function(){return E(!z)},size:"large",children:z?(0,a.jsx)(tt.Z,{}):(0,a.jsx)(Je.Z,{})})]})}),(0,a.jsxs)(N.Z,{children:[!F&&z?(0,a.jsx)(we.Z,{severity:"success",sx:{mb:6},icon:(0,a.jsx)(et.Z,{className:"zoom-in"}),children:(0,a.jsx)(S.Z,{color:"inherit",variant:"body2",children:v.t("Agents are browser instances that use a bit of AI magic to automate repetitive web tasks that are just too boring for humans.")})}):null,(0,a.jsx)("form",{onSubmit:Q(te),ref:w,children:F?(0,a.jsx)(k.Z,{sx:{mt:6},children:(0,a.jsx)(B.Z,{})}):(0,a.jsxs)(Me.Z,{fullWidth:!0,sx:{my:3},error:!!ee.name,children:[(0,a.jsx)(_e.Qr,{name:"name",control:G,render:function(e){var t=e.field,n=t.value,r=t.onChange;return(0,a.jsx)(be.Z,{disabled:F,autoFocus:!0,required:!0,value:n,onChange:function(e){A(e.target.value.length>=3),R(e.target.value!==$.name),r(e)},onKeyDown:function(e){return"Enter"===e.key&&re()},spellCheck:!1,autoComplete:"off",inputProps:{minLength:3,maxLength:64,tabIndex:1},InputProps:{startAdornment:(0,a.jsx)(je.Z,{position:"start",sx:{mr:0},children:(0,a.jsx)(X.Z,{})})},label:v.t("Agent name"),placeholder:v.t("Agent name"),error:Boolean(ee.name)})}}),ee.name&&(0,a.jsx)(Ee.Z,{sx:{color:"error.main"},children:ee.name.message})]})})]}),F?null:(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{color:"secondary",onClick:ne,children:v.t("Cancel")}),_&&D?(0,a.jsx)(C.Z,{variant:"contained",onClick:re,endIcon:(0,a.jsx)($e.Z,{}),children:v.t("Save")}):null]})]}):null},it=function(e){var t=e.agents,n=e.isOpen,i=void 0!==n&&n,l=e.onOpen,s=void 0===l?function(){}:l,u=e.onClose,d=void 0===u?function(){}:u,h=e.onAgentDelete,x=void 0===h?function(){}:h,m=(0,g.$)().i18n,v=(0,p.O)(),y=v.getAgentId,Z=v.onAgentId,j=(0,c.useState)(!1),b=j[0],w=j[1],k=(0,c.useState)(!1),S=k[0],I=k[1],_=(0,c.useState)(f(t,y())),A=_[0],T=_[1];(0,c.useEffect)((function(){i&&"function"===typeof s&&s()}),[i]);var z=function(){i&&"function"===typeof d&&d()};(0,c.useEffect)((function(){T(f(t,y()));var e=Z((function(e){return T(f(t,e))}));return function(){return e()}}),[t]);var E=function(e){w((null===A||void 0===A?void 0:A.name)===e.target.value)},P=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:if(!b)return[3,6];I(!0),w(!1),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,x(null===A||void 0===A?void 0:A.id)];case 2:return e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return I(!1),[4,z()];case 5:e.sent(),e.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return i?(0,a.jsxs)(O.Z,{open:!0,onClose:S?function(){}:z,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[(0,a.jsx)(Pe.Z,{children:(0,a.jsx)(J,{agent:A,title:m.t("Delete agent")})}),(0,a.jsx)(N.Z,{children:S?(0,a.jsx)(B.Z,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(we.Z,{severity:"warning",sx:{mb:6},children:[m.t("Are you sure you want to delete this agent?")," ",m.t("This action is irreversible!"),(0,a.jsx)("br",{}),m.t('To confirm deleting your agent, please type "{{name}}" below:',{name:null===A||void 0===A?void 0:A.name})]}),(0,a.jsx)(be.Z,{autoFocus:!0,fullWidth:!0,spellCheck:!1,autoComplete:"off",required:!0,inputProps:{tabIndex:1},InputProps:{startAdornment:(0,a.jsx)(je.Z,{position:"start",sx:{mr:0},children:(0,a.jsx)(X.Z,{})})},type:"text",color:b?"primary":"error",label:m.t("Agent name"),placeholder:m.t("Agent name"),onChange:E,onKeyUp:E,onKeyDown:function(e){return"Enter"===e.key&&P()}})]})}),S?null:(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{color:"secondary",onClick:z,children:m.t("Cancel")}),(0,a.jsx)(C.Z,{color:"error",onClick:P,disabled:!b,startIcon:(0,a.jsx)(Le.Z,{}),children:m.t("Delete agent")})]})]}):null},ot=n(88073),at=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{month:"long",day:"numeric",year:"numeric"};return e?new Intl.DateTimeFormat(t,n).format(new Date(e)):e},lt=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60,i=String(t).padStart(2,"0"),o=String(n).padStart(2,"0"),a=String(r).padStart(2,"0");return"".concat(i,":").concat(o,":").concat(a)},st=n(83373),ut=n(78445),ct=n(20835),dt=n(55630),pt=function(e){var t=e.isOpen,n=void 0!==t&&t,i=e.onOpen,l=void 0===i?function(){}:i,s=e.onClose,u=void 0===s?function(){}:s,d=(0,ot.r)().settings,p=(0,g.$)().i18n,f=(0,x.a)(),h=(0,st.W)(),m=(0,w.Z)(),v=h.getUserData(),y=(0,c.useState)(null),Z=y[0],I=y[1],_=(0,c.useState)(!0),A=_[0],T=_[1],z=(0,c.useState)(!1),E=z[0],P=z[1],M=(0,c.useState)(!0),N=M[0],D=M[1],R=(0,c.useState)(null),L=R[0],F=R[1];(0,c.useEffect)((function(){n&&"function"===typeof l&&l()}),[n]);var W,U=function(){n&&"function"===typeof u&&u()},B=(0,_e.cI)({defaultValues:{userName:null!==(W=null===v||void 0===v?void 0:v.userName)&&void 0!==W?W:p.t("User name")},mode:"onChange",resolver:(0,Ae.X)(ze.Ry().shape({userName:ze.Z_().min(3,(function(){return p.t("Must be at least {{n}} characters long",{n:3})})).max(64,(function(){return p.t("Must be at most {{n}} characters long",{n:64})})).required()}))}),$=B.control,H=B.setValue,V=B.handleSubmit,K=B.formState.errors,Y=(0,b.ZP)(k.Z)((function(){return{display:"flex",position:"absolute",justifyContent:"flex-end",alignItems:"end",top:0,left:0,width:"100%",height:200,zIndex:0,opacity:1,background:L,animation:null!==L&&N?"header-opacity 1s forwards linear":"none","@keyframes header-opacity":{"0%":{opacity:0},"100%":{opacity:1}}}}));(0,c.useEffect)((function(){H("userName",null===v||void 0===v?void 0:v.userName);var e=setTimeout((0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){return F(null!==(e=m.palette.customColors.userColors.gradient[null===v||void 0===v?void 0:v.userColor])&&void 0!==e?e:m.palette.background.default),N&&window.setTimeout((function(){return D(!1)}),1e3),[2]}))})),q.Z.delay.request);return function(){return clearTimeout(e)}}),[v]);var X,Q=function(){var e=(0,r.Z)((function(e){var t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:if(!A)return[3,5];T(!1),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,j.Z.post("account",e)];case 2:return"string"===typeof(null===(n=r.sent())||void 0===n||null===(t=n.data)||void 0===t?void 0:t.userName)&&(H("userName",n.data.userName),f.setUser(n.data)),[3,4];case 3:return r.sent(),[3,4];case 4:T(!0),P(!1),r.label=5;case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,r.Z)((function(e){var t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:if(!A)return[3,5];T(!1),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,j.Z.post("account",{userColor:e})];case 2:return"string"===typeof(null===(n=r.sent())||void 0===n||null===(t=n.data)||void 0===t?void 0:t.userName)&&(H("userName",n.data.userName),f.setUser(n.data)),[3,4];case 3:return r.sent(),[3,4];case 4:T(!0),r.label=5;case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return n?(0,a.jsx)(O.Z,{open:!0,onClose:U,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:750,p:0}},children:(0,a.jsx)(ne.ZP,{container:!0,spacing:6,children:(0,a.jsx)(ne.ZP,{item:!0,xs:12,children:(0,a.jsxs)(ae.Z,{sx:{position:"relative"},children:[(0,a.jsx)(Y,{children:(0,a.jsx)(k.Z,{sx:{width:"100%",height:"100%",position:"absolute",background:"url(/img/pages/circles-profile-".concat(m.palette.mode,".svg)"),backgroundPosition:{xs:"50% -600px",md:"-680px -600px"},backgroundSize:"auto",backgroundRepeat:"no-repeat",zIndex:1}})}),(0,a.jsx)(ut.Z,{sx:{zIndex:10,position:"relative"},action:(0,a.jsxs)(k.Z,{sx:{display:"flex"},children:[E&&A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(G.Z,{title:p.t("Profile color"),children:(0,a.jsx)(Ne.Z,{sx:{zIndex:10,background:"light"===m.palette.mode?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.6)","&:hover":{background:m.palette.background.paper}},onClick:function(e){return I(e.currentTarget)},children:(0,a.jsx)(dt.Z,{color:"info"})})}),(0,a.jsx)(Re.Z,{keepMounted:!0,anchorEl:Z,open:Boolean(Z),onClose:function(){return I(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{ml:"2px",mt:2},PaperProps:{style:{minWidth:20}},children:Object.keys(m.palette.customColors.userColors.solid).map((function(e){return(0,a.jsx)(Oe.Z,{selected:(null===v||void 0===v?void 0:v.userColor)==e,onClick:function(){I(null),J(e)},children:(0,a.jsx)(k.Z,{sx:{width:15,height:15,borderRadius:"50%",background:m.palette.customColors.userColors.solid[e]}})},"user-color-".concat(e))}))})]}):null,(0,a.jsx)(G.Z,{title:E?p.t("Exit edit mode"):p.t("Edit profile"),children:(0,a.jsx)(Ne.Z,{sx:{ml:2,background:"light"===m.palette.mode?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.6)","&:hover":{background:m.palette.background.paper}},variant:"contained",color:"inherit",onClick:function(){E?(H("userName",v.userName),P(!1)):P(!0)},children:E?(0,a.jsx)(ct.Z,{}):(0,a.jsx)(Fe.Z,{})})})]})}),(0,a.jsxs)(oe.Z,{sx:{zIndex:10},children:[(0,a.jsx)("form",{onSubmit:V(Q),autoComplete:"off",children:(0,a.jsx)(ne.ZP,{container:!0,spacing:7,sx:{justifyContent:"left"},children:(0,a.jsx)(ne.ZP,{item:!0,xs:12,sx:{my:4,display:"flex"},children:(0,a.jsxs)(k.Z,{sx:{display:"flex",width:"100%",alignItems:{xs:"center",md:"flex-end"},flexDirection:{xs:"column",md:"row"}},children:[(0,a.jsx)(Ye,{crop:"fill",borderColor:m.palette.background.paper,backgroundColor:m.palette.background.paper,inputName:"avatar",uploadPath:"account/avatar",active:E,label:p.t("Select avatar"),radius:"50%",onChange:(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,j.Z.get("account")];case 1:return t=n.sent(),"string"===typeof(null===(e=t.data)||void 0===e?void 0:e.id)&&f.setUser(t.data),[2]}}))})),alt:null!==(X=null===v||void 0===v?void 0:v.userName)&&void 0!==X?X:p.t("User name"),getSrc:function(){var e,t=(new Date).toJSON().slice(0,10),n="".concat(ie.Z.s3Url,"/users/").concat(null===v||void 0===v?void 0:v.id,"/?cb=").concat(t);return(null===(e=f.user)||void 0===e?void 0:e.id)==(null===v||void 0===v?void 0:v.id)&&(n="string"===typeof(null===v||void 0===v?void 0:v.userAvatarId)?"".concat(ie.Z.s3Url,"/users/").concat(v.id,"/").concat(v.userAvatarId,".png"):"/img/placeholder/user.png"),n}}),(0,a.jsx)(k.Z,{sx:{ml:{xs:0,md:6},width:"100%",position:"relative"},children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(k.Z,{sx:{width:"100%",display:"flex"},children:[(0,a.jsx)(_e.Qr,{name:"userName",control:$,fullWidth:!0,rules:{required:!0},render:function(e){var t=e.field,n=t.value,r=t.onChange;return(0,a.jsx)(be.Z,{sx:{textAlign:"center"},fullWidth:!0,required:!0,spellCheck:!1,autoComplete:"off",autoFocus:!0,disabled:!A,value:n,label:p.t("User name"),onChange:r,placeholder:"John Doe"})}}),(0,a.jsx)(C.Z,{variant:"contained",startIcon:(0,a.jsx)($e.Z,{fontSize:"small"}),sx:{ml:3},type:"submit",disabled:!A,children:p.t("Save")})]}),K.userName&&(0,a.jsx)(Ee.Z,{sx:{color:"error.main",position:"absolute",bottom:-25},children:K.userName.message})]}):(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center"},children:(0,a.jsx)(G.Z,{title:(null===v||void 0===v?void 0:v.createdAt)?"".concat(p.t("Member since")," ").concat(at(v.createdAt,d.lang,{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})):null,children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"start",flexDirection:"column"},children:[(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center"},children:(0,a.jsx)(S.Z,{variant:"h6",children:v.userName})}),(0,a.jsx)(S.Z,{variant:"caption",children:null===v||void 0===v?void 0:v.userEmail})]})})})})]})})})}),(0,a.jsx)(k.Z,{sx:{display:"flex",justifyContent:"end",mt:2},children:(0,a.jsx)(C.Z,{color:"secondary",onClick:U,children:p.t("Close")})})]})]})})})}):null},ft=n(72852),ht=n(53917),xt=n(77849),mt=n(49897);function gt(e){var t=e.agents,n=e.onSelect,i=void 0===n?function(){}:n,l=e.showHint,s=void 0===l||l,u=e.setDialogModuleRepo,d=void 0===u?function(){}:u,h=e.onUpdate,x=void 0===h?function(){}:h,m=e.onDelete,v=void 0===m?function(){}:m,y=e.showLoading,j=void 0===y?async function(){}:y,b=(0,g.$)().i18n,w=(0,p.O)(),C=w.getAgentId,_=w.onAgentId,A=w.getLogs,T=w.log,z=w.getLogsEnabled,E=w.onLogsEnabled,P=w.setLogsEnabled,M=w.getLogsInit,N=w.setLogsInit,O=(0,c.useState)(null),D=O[0],R=O[1],L=(0,c.useState)(null),F=L[0],W=L[1],U=(0,c.useState)(!1),B=U[0],$=U[1];(0,c.useEffect)((function(){$(z());var e=E((function(e){return $(e)}));return function(){return e()}}),[F]),(0,c.useEffect)((function(){W(f(t,C()));var e=_((function(e){return W(f(t,e))}));return function(){return e()}}),[t]);var H=function(){R(null)},V=function(){var e=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return null===F?[3,4]:[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.source.open(F.id)];case 1:return t=n.sent(),t?[4,j()]:[3,3];case 2:n.sent(),n.label=3;case 3:n.label=4;case 4:return H(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(t){return e.preventDefault(),e.stopPropagation(),P(null===F||void 0===F?void 0:F.id,!B),H(),M(null===F||void 0===F?void 0:F.id)||(N(null===F||void 0===F?void 0:F.id,!0),B||A(null===F||void 0===F?void 0:F.id).length||(T(F.id,b.t("Errors happen, but at least they're detailed and nicely colored"),"error"),T(F.id,b.t("Messages are temporary - they get cleared when you close the application"),"warning"),T(F.id,b.t("Only the last {{logsPerAgent}} messages are kept in this console",{logsPerAgent:Z().max.logsPerAgent})),T(F.id,b.t("This is where agents display their messages"),"success"))),[2]}))}));return function(t){return e.apply(this,arguments)}}();return null!==F?(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(G.Z,{title:b.t("Agent module"),placement:"left",children:(0,a.jsx)(Ne.Z,{sx:{width:"40px",height:"40px",mr:2},onClick:function(){null!==F&&(d(!0),i(F.id,!0))},className:s&&null===F.installedModuleId?"pop pop-rounded pop-inset":null,children:(0,a.jsx)(Y.Z,{fontSize:"small"})})}),(0,a.jsx)(Ne.Z,{sx:{width:"40px",height:"40px",mr:4},onClick:function(e){R(e.currentTarget),null!==F&&i(F.id,!0)},children:(0,a.jsx)(We.Z,{fontSize:"small"})}),(0,a.jsxs)(Re.Z,{anchorEl:D,open:Boolean(D),onClose:H,children:[(0,a.jsxs)(Oe.Z,{onClick:q,sx:{justifyContent:"space-between"},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex"},children:[(0,a.jsx)(I.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{sx:{ml:3},variant:"body2",children:b.t("Agent logs")})]}),(0,a.jsx)(ft.Z,{size:"small",sx:{ml:3},checked:B,defaultValue:B})]}),(null===F||void 0===F?void 0:F.installedModuleId)?(0,a.jsxs)(Oe.Z,{onClick:V,children:[(0,a.jsx)(ht.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{sx:{ml:3},variant:"body2",children:b.t("Source code")})]}):null,(null===F||void 0===F?void 0:F.installedModuleId)?(0,a.jsxs)(Oe.Z,{onClick:function(){var e;null!==F&&(null===(e=window.sdk)||void 0===e||e.ipc.target.openDevTools(F.id,F.name));H()},children:[(0,a.jsx)(mt.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{sx:{ml:3},variant:"body2",children:b.t("Developer tools")})]}):null,(0,a.jsx)(De.Z,{}),(0,a.jsxs)(Oe.Z,{onClick:function(){x(),H()},children:[(0,a.jsx)(xt.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{sx:{ml:3},variant:"body2",children:b.t("Rename agent")})]}),(0,a.jsxs)(Oe.Z,{onClick:function(){v(),H()},children:[(0,a.jsx)(Le.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{sx:{ml:3},variant:"body2",children:b.t("Delete agent")})]})]})]}):null}var vt=n(98005),yt=n(81458),Zt=n(87422),jt=n(28832),bt=n(91711),wt=n(34253),kt=n(39748),St=function(e){var t=e.type,n=void 0===t?"chip":t,r=(0,p.O)(),i=r.onSubscription,o=r.getSubscription,l=(0,c.useState)({}),s=l[0],u=l[1],d=(0,g.$)().i18n,f=(0,x.a)();(0,c.useEffect)((function(){u(o());var e=i((function(e){var t=e.info;u(t)}));return function(){e()}}),[]);var h,m=s.active&&"pilot"===s.status&&s.pilotTotal>0&&100*s.pilotLeft/s.pilotTotal<=33;if("chip"===n){var v,y,Z,j,b,w=(null===(v=f.user)||void 0===v?void 0:v.computerEnabled)?s.active?"pilot"===s.status?m?d.t("Your free trial is almost over"):d.t("Free trial"):d.t("Active subscription"):null:d.t("Computer disabled");return s.ready?(0,a.jsx)(G.Z,{title:w,placement:"right",children:(0,a.jsx)(se.Z,{size:"small",color:(null===(y=f.user)||void 0===y?void 0:y.computerEnabled)?s.active?"pilot"===s.status?m?"warning":"success":ie.Z.billing.subscriptionStatus.pastDue===s.status?"warning":"default":"warning":"error",label:(null===(Z=f.user)||void 0===Z?void 0:Z.computerEnabled)?s.active?"pilot"===s.status?d.t("Free trial"):null!==(b=null===(j=s.pricePlan)||void 0===j?void 0:j.productName)&&void 0!==b?b:"Zen":d.t("Locked"):d.t("Disabled"),variant:s.active&&!["pilot",ie.Z.billing.subscriptionStatus.pastDue].includes(s.status)?"outlined":"filled",sx:{ml:1,fontSize:"0.75rem",fontFamily:"Yaldevi,sans-serif",textTransform:"none"}})}):null}if("progress"===n)return(null===(h=f.user)||void 0===h?void 0:h.computerEnabled)&&s.ready&&s.active&&"pilot"===s.status&&s.pilotTotal>0?(0,a.jsx)(yt.Z,{variant:"determinate",color:m?"warning":"success",value:Math.round(100*s.pilotLeft/s.pilotTotal),sx:{width:"100%",position:"absolute",left:"-1px",bottom:0}}):null;if("label"===n){var C,I,_,A,T,z,E=(T={},(0,R.Z)(T,ie.Z.billing.subscriptionStatus.active,d.t("active")),(0,R.Z)(T,ie.Z.billing.subscriptionStatus.cancelled,d.t("cancelled")),(0,R.Z)(T,ie.Z.billing.subscriptionStatus.onTrial,d.t("on trial")),(0,R.Z)(T,ie.Z.billing.subscriptionStatus.pastDue,d.t("past due")),(0,R.Z)(T,ie.Z.billing.subscriptionStatus.unpaid,d.t("unpaid")),(0,R.Z)(T,ie.Z.billing.subscriptionStatus.paused,d.t("paused")),(0,R.Z)(T,ie.Z.billing.subscriptionStatus.expired,d.t("expired")),T);return(0,a.jsx)(G.Z,{title:(null===(C=f.user)||void 0===C?void 0:C.computerEnabled)?s.active?"pilot"===s.status?d.t("Review pricing plans before your trial expires"):ie.Z.billing.subscriptionStatus.pastDue===s.status?d.t("Click to fix billing issue"):null:d.t("Unlock by upgrading to a paid plan"):d.t("Click to enable this computer"),placement:"bottom",children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"100%",py:2},children:[(null===(I=f.user)||void 0===I?void 0:I.computerEnabled)?s.active?"pilot"===s.status?(0,a.jsx)(kt.Z,{fontSize:"small",color:m?"warning":"inherit"}):ie.Z.billing.subscriptionStatus.pastDue===s.status?(0,a.jsx)(bt.Z,{fontSize:"small",color:"warning"}):(0,a.jsx)(jt.Z,{fontSize:"small"}):(0,a.jsx)(Zt.Z,{fontSize:"small"}):(0,a.jsx)(wt.Z,{color:"error"}),(0,a.jsx)(S.Z,{color:(null===(_=f.user)||void 0===_?void 0:_.computerEnabled)?s.active&&("pilot"===s.status&&m||ie.Z.billing.subscriptionStatus.pastDue===s.status)?"warning.main":"inherit":"error.main",variant:"caption",sx:{ml:3},children:(null===(A=f.user)||void 0===A?void 0:A.computerEnabled)?s.active?"pilot"===s.status?d.t("Expires in: {{time}}",{time:["".concat(Math.floor(s.pilotLeft/3600),"h"),"".concat(Math.floor(s.pilotLeft%3600/60),"m")].join(", ")}):ie.Z.billing.subscriptionStatus.pastDue===s.status?d.t("Pay overdue invoice"):"".concat(d.t("Manage billing")," (").concat(null!==(z=E[s.status])&&void 0!==z?z:s.status,")"):d.t("Purchase to unlock"):d.t("Computer disabled")})]})})}return null},Ct=n(7297),It=n(66485),_t=n.n(It),At=function(e){return e&&("TEXTAREA"===e.nodeName||"INPUT"===e.nodeName)},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useRef)(null),n=function(){e.onSuccess&&e.onSuccess(),e.selectOnCopy&&At(t.current)&&t.current.select()},r=function(){e.onError&&e.onError(),!1!==e.selectOnError&&At(t.current)&&t.current.select()},i=function(e){_t()(e).then(n).catch(r)},o=(0,c.useCallback)((function(e){"string"===typeof e?i(e):t.current&&i(t.current.value)}),[]);return{copy:o,target:t}},zt=n(70917),Et=n(70891),Pt=n(78462),Mt=n(14347),Nt=n(34869),Ot=n(71639),Dt=n(46628),Rt=n(1878),Lt=n(65025),Ft=n(90738),Wt=n(44417),Ut=n(78687),Bt=n(84885),$t=n(77381);function Ht(){var e=(0,Ct.Z)(["\n0%   { transform: scale(0.2); opacity: 0; }\n100% { transform: scale(1); opacity: 1; }"]);return Ht=function(){return e},e}function Vt(){var e=(0,Ct.Z)(["\n0%   { transform: scale(0.1) translateY(10rem); opacity: 0; }\n100% { transform: scale(1) translateY(0); opacity: 1; }"]);return Vt=function(){return e},e}var qt=(0,zt.F4)(Ht()),Kt=(0,zt.F4)(Vt()),Yt=(0,b.ZP)(Lt.Z)((function(e){e.theme;return{position:"absolute",right:"-10rem",bottom:"-10rem",width:"35rem",height:"35rem",zIndex:1,opacity:.1}})),Gt=(0,b.ZP)("pre")((function(e){var t=e.theme;return{backgroundColor:t.palette.divider,padding:t.spacing(2),marginTop:0,marginBottom:0,marginRight:t.spacing(2),borderRadius:t.shape.borderRadius,fontSize:"0.85rem",lineHeight:"0.85rem",fontFamily:"Inconsolata,monospace"}})),Xt=(0,b.ZP)(C.Z)((function(e){e.theme;var t=e.index,n=void 0===t?0:t;return{transformOrigin:"0% 50%",opacity:0,animation:"".concat(Kt," 750ms ease-in-out forwards"),animationDelay:"".concat(100*n,"ms")}})),Qt=(0,b.ZP)(Et.ZP)((function(e){e.theme;var t=e.index,n=void 0===t?0:t;return{transformOrigin:"0% 50%",opacity:0,animation:"".concat(qt," 750ms ease-in-out forwards"),animationDelay:"".concat(100*n,"ms")}})),Jt=function(e){var t=e.isOpen,n=void 0!==t&&t,i=e.onOpen,l=void 0===i?function(){}:i,s=e.onClose,u=void 0===s?function(){}:s,d=(0,g.$)().i18n,p=Tt(),f=(0,c.useState)({}),h=f[0],x=f[1];(0,c.useEffect)((function(){n&&"function"===typeof l&&l()}),[n]),(0,c.useEffect)((function(){var e=setTimeout((0,r.Z)((function(){var e,t,n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=ie.Z.version,[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.getProcessVersions()];case 1:return r=o.sent(),[4,null===(t=window.sdk)||void 0===t?void 0:t.ipc.device.getSerialNumber()];case 2:return i=o.sent(),x((0,He.Z)((0,P.Z)({},r),{app:n,serialNumber:i})),[2]}}))})),150);return function(){return clearTimeout(e)}}),[]);var m,v,y,Z,j,b=function(){n&&"function"===typeof u&&u()},w=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return Te.A.success(d.t("Navigating to licenses..."),null,!1),[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.openExternal("https://github.com/oglama/oglama-app/blob/main/NOTICE.md")];case 1:return t.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return Te.A.success(d.t("Navigating to status page..."),null,!1),[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.openExternal("https://status.oglama.com/")];case 1:return t.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return Te.A.success(d.t("Navigating to Terms of Service..."),null,!1),[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.openExternal("".concat(ie.Z.siteUrl,"/terms-of-service/"))];case 1:return t.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return Te.A.success(d.t("Navigating to my computers..."),null,!1),[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.openExternal("".concat(ie.Z.siteUrl,"/#/tab:computers"))];case 1:return t.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),A=[{icon:(0,a.jsx)(Ut.Z,{color:"inherit",fontSize:"large"}),key:"serialNumber",name:d.t("Serial Number"),version:null!==(m=h.serialNumber)&&void 0!==m?m:null,tooltip:d.t("The computer serial number is an anonymized unique hash that you can use to identify this computer in your online dashboard.")},{icon:(0,a.jsx)(Dt.Z,{color:"warning",fontSize:"large"}),key:"chrome",name:"Chromium",version:null!==(v=h.chrome)&&void 0!==v?v:null},{icon:(0,a.jsx)(Nt.Z,{color:"primary",fontSize:"large"}),key:"electron",name:"Electron.js",version:null!==(y=h.electron)&&void 0!==y?y:null},{icon:(0,a.jsx)(Bt.Z,{color:"success",fontSize:"large"}),key:"node",name:"Node.js",version:null!==(Z=h.node)&&void 0!==Z?Z:null},{icon:(0,a.jsx)($t.Z,{size:35,animate:!0}),key:"oglama",name:"Oglama",version:null!==(j=h.app)&&void 0!==j?j:null}];return n?(0,a.jsxs)(O.Z,{open:!0,onClose:b,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2,overflow:"hidden"}},children:[(0,a.jsx)(Yt,{color:"action",className:"rotate"}),(0,a.jsx)(Pe.Z,{sx:{position:"relative",zIndex:2},children:d.t("About Oglama")}),(0,a.jsx)(N.Z,{sx:{position:"relative",zIndex:2},children:(0,a.jsx)(Pt.Z,{children:A.map((function(e,t){var n;return(0,a.jsxs)(Qt,{index:t,children:[e.icon,(0,a.jsx)(S.Z,{variant:"body2",sx:{mx:2},children:e.name}),e.version?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(G.Z,{title:null!==(n=e.tooltip)&&void 0!==n?n:null,placement:"top",children:(0,a.jsx)(Gt,{children:e.version})}),(0,a.jsx)(G.Z,{title:d.t("Click to copy"),placement:"top",children:(0,a.jsx)(Ne.Z,{onClick:function(){return t=e.key,n=e.name,r=e.version,Te.A.success("serialNumber"===t?d.t("Copied computer serial number to clipboard"):d.t("Copied {{name}} version to clipboard",{name:n}),null,!1),void p.copy("serialNumber"===t?r:"".concat(n," v").concat(r));var t,n,r},children:(0,a.jsx)(Ft.Z,{fontSize:"small"})})}),"serialNumber"===e.key?(0,a.jsx)(G.Z,{title:d.t("Go to my computers"),placement:"top",children:(0,a.jsx)(Ne.Z,{onClick:function(){return _()},children:(0,a.jsx)(Wt.Z,{fontSize:"small"})})}):null]}):(0,a.jsx)(B.Z,{sx:{width:"15rem",mt:2},spacing:0})]},"".concat(t,"-").concat(e.key))}))})}),(0,a.jsxs)(M.Z,{sx:{position:"relative",zIndex:2},children:[(0,a.jsx)(Xt,{index:5,onClick:w,startIcon:(0,a.jsx)(Rt.Z,{}),children:d.t("Licenses")}),(0,a.jsx)(Xt,{index:6,onClick:k,startIcon:(0,a.jsx)(Mt.Z,{}),children:d.t("Contact & Status")}),(0,a.jsx)(Xt,{index:7,onClick:I,startIcon:(0,a.jsx)(Ot.Z,{}),children:d.t("Terms")}),(0,a.jsx)(C.Z,{color:"secondary",onClick:b,children:d.t("Close")})]})]}):null},en=n(87086),tn=n(39918),nn=n(44737),rn=n(73993),on=n(73896),an=n(58086),ln=n(58929),sn=n(66140),un=n(61730),cn=(0,b.ZP)(k.Z)((function(e){var t=e.theme,n=e.size,r=void 0===n?"small":n;return{background:t.palette.background.paper,justifyContent:"center",alignItems:"center",display:"flex",boxShadow:t.shadows[3],borderRadius:"small"===r?"0.4rem":"1rem",fontSize:"small"===r?"0.85rem":"3rem",marginRight:"small"===r?"0px":"2px",marginLeft:"small"===r?"1px":"2px",height:"small"===r?"2rem":"5rem",width:"small"===r?"1.1rem":"3rem"}}));function dn(e){var t=e.subInfo,n=void 0===t?{}:t,r=e.sx,o=void 0===r?{}:r,l=e.small,s=void 0!==l&&l,u=(0,w.Z)(),d=(0,un.Z)(u.breakpoints.up("sm")),p=(0,c.useState)(null),f=p[0],h=p[1];"object"===typeof o&&null!==o||(o={}),(0,c.useEffect)((function(){var e=null;return Number.isInteger(n.pilotLeft)&&n.pilotLeft>0&&(h(n.pilotLeft),e=setInterval((function(){h((function(e){return e-1}))}),1e3)),function(){return null!==e&&clearInterval(e)}}),[n.pilotLeft]);var x=n.pilotLeft>0&&(n.planComputersCount>0&&n.computersCount>n.planComputersCount||n.planAgentsCount>0&&n.agentsCount>n.planAgentsCount),m=(d||!s?"00:00:00":"00:00").split("");return"number"===typeof f&&f>0&&(m=[Math.floor(f/3600),Math.floor(f%3600/60)].concat((0,i.Z)(d||!s?[Math.floor(f%60)]:[])).map((function(e){return"".concat(e).padStart(2,"0")})).join(":").split("")),n.active&&"pilot"===n.status||x?(0,a.jsx)(k.Z,{sx:(0,P.Z)({display:"flex",justifyContent:"space-between"},o),children:m.map((function(e,t){return(0,a.jsx)(cn,{size:s?"small":"large",children:e},t)}))}):null}var pn=(0,b.ZP)(k.Z)((function(e){e.theme;return{position:"absolute",left:"-2rem",bottom:"-5rem",width:"25rem",height:"25rem",zIndex:1,opacity:.1,"&>svg":{position:"relative",width:"100%",height:"100%"}}})),fn=(0,b.ZP)("pre")((function(e){var t=e.theme;return{backgroundColor:t.palette.divider,padding:t.spacing(2),marginTop:0,marginBottom:0,color:t.palette.text.primary,marginRight:t.spacing(2),borderRadius:t.shape.borderRadius,fontSize:"0.85rem",lineHeight:"0.85rem",fontFamily:"Inconsolata,monospace"}}));function hn(e){var t,n,l,s,u,d,f=e.isOpen,h=void 0!==f&&f,m=e.onClose,v=void 0===m?function(){}:m,y=(0,p.O)(),j=y.onSubscription,b=y.getSubscription,w=(0,g.$)().i18n,I=Tt(),_=(0,x.a)(),A=(0,c.useState)(null),T=A[0],z=A[1],E=(0,c.useState)({}),P=E[0],D=E[1],R=(0,c.useState)(!1),L=R[0],F=R[1];(0,c.useEffect)((function(){D(b());var e=j((function(e){var t=e.info;D(t)}));return(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.device.getSerialNumber()];case 1:return z.apply(void 0,[t.sent()]),[2]}}))}))(),F(!0),function(){return e()}}),[]);var W=function(){h&&"function"===typeof v&&v()},U=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(t){return Te.A.success(w.t("Copied computer serial number to clipboard"),null,!1),I.copy(e),[2]}))}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,r.Z)((function(){var e,t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return W(),Te.A.success((null===(e=_.user)||void 0===e?void 0:e.computerEnabled)?w.t("Navigating to billing page..."):w.t("Navigating to my computers..."),null,!1),[4,null===(t=window.sdk)||void 0===t?void 0:t.ipc.main.openExternal((null===(n=_.user)||void 0===n?void 0:n.computerEnabled)?"".concat(ie.Z.siteUrl,"/profile/#/tab:billing"):"".concat(ie.Z.siteUrl,"/#/tab:computers"))];case 1:return r.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),$=[{key:"computersCount",labelSingular:w.t("computer"),labelPlural:w.t("computers"),count:P.computersCount,max:Z().max.computersCount,boostedCount:P.planComputersCount,boostedTooltip:w.t("You can use an extra computer until the trial expires"),Icon:Ut.Z},{key:"agentsCount",labelSingular:w.t("agent per computer"),labelPlural:w.t("agents per computer"),count:P.agentsCount,max:Z().max.agentsCount,boostedCount:P.planAgentsCount,boostedTooltip:w.t("You can use an extra agent until the trial expires"),Icon:rn.Z}],H=Math.max(Z().max.computersCount,Z().max.agentsCount),V=P.pilotLeft>0&&(P.planComputersCount>0&&P.computersCount>P.planComputersCount||P.planAgentsCount>0&&P.agentsCount>P.planAgentsCount),q=!(null===(t=_.user)||void 0===t?void 0:t.computerEnabled)||!P.active||ie.Z.billing.subscriptionStatus.pastDue===P.status;return h&&L?(0,a.jsxs)(O.Z,{open:!0,onClose:W,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2,overflow:"hidden"}},children:[(0,a.jsx)(pn,{className:"rotate",children:(null===(n=_.user)||void 0===n?void 0:n.computerEnabled)?P.active?"pilot"===P.status?(0,a.jsx)(ln.Z,{color:"info"}):ie.Z.billing.subscriptionStatus.pastDue===P.status?(0,a.jsx)(nn.Z,{color:"warning"}):V?(0,a.jsx)(tn.Z,{color:"success"}):(0,a.jsx)(en.Z,{color:"success"}):(0,a.jsx)(sn.Z,{color:"warning"}):(0,a.jsx)(wt.Z,{})}),(0,a.jsxs)(Pe.Z,{children:[(null===(l=_.user)||void 0===l?void 0:l.computerEnabled)?P.active?"pilot"===P.status?w.t("Free trial"):ie.Z.billing.subscriptionStatus.pastDue===P.status?w.t("Invoice past due"):w.t("Active subscription"):w.t("Subscription required"):w.t("Computer disabled"),V?" (".concat(w.t("boosted"),")"):null]}),(0,a.jsx)(N.Z,{sx:{my:6,position:"relative",zIndex:2},children:(null===(s=_.user)||void 0===s?void 0:s.computerEnabled)?P.active?(0,a.jsxs)(k.Z,{children:["pilot"!==P.status&&ie.Z.billing.subscriptionStatus.pastDue===P.status?(0,a.jsx)(we.Z,{severity:"warning",sx:{mb:6},children:w.t("Invoice past due. Please fix this issue to avoid service interruption.")}):null,"pilot"===P.status||V?(0,a.jsxs)(k.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",userSelect:"none",mb:6},children:[(0,a.jsx)(dn,{subInfo:P,sx:{mb:6}}),(0,a.jsx)(S.Z,{variant:"body2",children:w.t("Free trial limits expire soon")})]}):null,$.map((function(e){return(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[(0,a.jsx)(k.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",mr:6},children:(0,i.Z)(Array(H).keys()).map((function(t){var n=V&&t>=e.boostedCount;return t<e.count?(0,a.jsx)(G.Z,{placement:"top",title:n?e.boostedTooltip:null,children:(0,a.jsx)(e.Icon,{className:n?"zoom-in":null,color:n?"success":"inherit"})},t):(0,a.jsx)(an.Z,{sx:{opacity:t<e.max?1:0}},t)}))}),(0,a.jsx)(k.Z,{sx:{minWidth:"10rem",textAlign:"right"},children:(0,a.jsxs)(S.Z,{variant:"body2",color:"text.secondary",children:[(0,a.jsx)("b",{children:e.count})," ",1===e.count?e.labelSingular:e.labelPlural]})})]},e.key)}))]}):(0,a.jsx)(we.Z,{icon:(0,a.jsx)(on.Z,{}),severity:"warning",variant:"filled",children:w.t("To continue using the software, please upgrade to a paid plan.")}):(0,a.jsxs)(we.Z,{severity:"info",icon:(0,a.jsx)(wt.Z,{}),sx:{"&>.MuiAlert-message":{width:"100%"}},children:[(0,a.jsx)(S.Z,{variant:"body2",sx:{color:"inherit",width:"100%"},children:w.t("Please go to your dashboard and enable computer with serial number:")}),(0,a.jsxs)(k.Z,{display:"flex",sx:{width:"100%",justifyContent:"center",alignItems:"center",my:3},children:[(0,a.jsx)(G.Z,{title:w.t("The computer serial number is an anonymized unique hash that you can use to identify this computer in your online dashboard."),placement:"top",children:(0,a.jsx)(fn,{children:T})}),(0,a.jsx)(G.Z,{title:w.t("Click to copy"),placement:"top",children:(0,a.jsx)(Ne.Z,{onClick:function(){return U(T)},children:(0,a.jsx)(Ft.Z,{fontSize:"small"})})})]})]})}),(0,a.jsxs)(M.Z,{sx:{position:"relative",zIndex:2},children:[(0,a.jsx)(C.Z,{startIcon:(null===(u=_.user)||void 0===u?void 0:u.computerEnabled)?(0,a.jsx)(jt.Z,{}):(0,a.jsx)(Ut.Z,{}),onClick:B,color:P.active?"primary":"warning",className:q?"pop":null,variant:"contained",children:(null===(d=_.user)||void 0===d?void 0:d.computerEnabled)?w.t("Go to billing"):w.t("Go to my computers")}),(0,a.jsx)(C.Z,{color:"secondary",onClick:W,children:w.t("Close")})]})]}):null}var xn=(0,b.ZP)(Re.Z)((function(e){var t=e.theme;return{"& .MuiMenu-paper":(0,R.Z)({width:280,overflow:"hidden",marginTop:t.spacing(4)},t.breakpoints.down("sm"),{width:"100%"}),"& .MuiMenu-list":{padding:0}}})),mn=function(){var e=(0,p.O)().checkSubscription,t=(0,g.$)().i18n,n=(0,x.a)(),i=(0,c.useState)(!1),l=i[0],s=i[1],u=(0,c.useState)(null),d=u[0],f=u[1],h=(0,c.useState)(null),m=h[0],v=h[1],y=(0,c.useState)(0),Z=y[0],j=y[1],b=function(){var t=(0,r.Z)((function(t){var r,i;return(0,o.__generator)(this,(function(o){return null===(r=window.sdk)||void 0===r||r.ipc.main.setOnTop(),v(t.currentTarget),(i=Math.floor((new Date).getTime()/1e3))-Z>=5&&(j(i),e(n,!0)),[2]}))}));return function(e){return t.apply(this,arguments)}}(),w=function(){return v(null)},I=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return w(),s(!0),[2]}))}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return w(),[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.setOnTop()];case 1:return t.sent(),f(!0),[2]}}))}));return function(){return e.apply(this,arguments)}}();return n.user?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(C.Z,{onClick:b,fullWidth:!0,sx:{userSelect:"none",transition:"none",borderRadius:0,justifyContent:"space-between",alignItems:"center",height:"100%",position:"relative"},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"calc(100% - 25px)"},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,a.jsx)($t.Z,{size:24,sx:{mx:1,transition:"all 200ms linear"}}),(0,a.jsx)(S.Z,{variant:"caption",sx:{textTransform:"none",mx:2},children:q.Z.moduleName})]}),(0,a.jsx)(St,{type:"chip"})]}),(0,a.jsx)(St,{type:"progress"}),(0,a.jsx)(z,{sx:{flexShrink:0},open:!!m,children:(0,a.jsx)(vt.Z,{color:"action"})})]}),(0,a.jsxs)(xn,{sx:{mt:-2,width:"250px"},anchorEl:m,"aria-disabled":"true",open:Boolean(m),onClose:function(){return w()},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[(0,a.jsx)(Oe.Z,{onClick:function(){return I()},children:(0,a.jsx)(St,{type:"label"})}),(0,a.jsx)(Oe.Z,{onClick:function(){return _()},children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"100%",py:2},children:[(0,a.jsx)(Je.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{variant:"caption",sx:{ml:3},children:t.t("About")})]})})]}),d?(0,a.jsx)(Jt,{isOpen:!0,onClose:function(){return f(!1)}}):null,l?(0,a.jsx)(hn,{isOpen:!0,onClose:function(){return s(!1)}}):null]}):null},gn=n(7902),vn=n(99041),yn=n(56744),Zn=n(80187),jn=n(90617),bn=n(83295),wn=n(22410),kn=n(24850),Sn=n(42734),Cn=function(e){var t=document.createElement("div");t.textContent=e;var n=t.innerHTML;return t.remove(),n},In=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="";if(Array.isArray(e)){var i=0,o=!0,a=!1,l=void 0;try{for(var s,u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value;if(!n&&i>=Z().max.logsOnRender)break;var d=c.s;["info","success","warning","error"].includes(d)||(d="info");var p,f="number"===typeof c.t?at(1e3*c.t,"en-US",{day:"numeric",month:"short",hour:"numeric",minute:"numeric",second:"numeric"}):"today",h=Cn(null!==(p=c.m)&&void 0!==p?p:"");if("string"===typeof t&&t.length){var x=Cn(t),m=h.toLowerCase().indexOf(x);-1!==m&&(h=h.substring(0,m)+"<u>".concat(h.substring(m,m+x.length),"</u>")+h.substring(m+x.length))}r+='<p><i class="'.concat(d,'"></i><span>').concat(h,"</span><b>").concat(f,"</b></p>"),i++}}catch(g){a=!0,l=g}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}return r};function _n(e){var t=e.agent,n=e.filterText,r=e.filterStatuses,i=(0,g.$)().i18n,o=(0,p.O)(),l=o.onLog,s=o.getLogs,u=(0,c.useState)(s(null===t||void 0===t?void 0:t.id)),d=u[0],f=u[1],h=(0,c.useState)(!1),x=h[0],m=h[1];(0,c.useEffect)((function(){f(s(null===t||void 0===t?void 0:t.id));var e=l((function(e){return f(e)}));return function(){return e()}}),[null===t||void 0===t?void 0:t.id]),(0,c.useEffect)((function(){m(!1)}),[d]);var v=[{slug:"info",label:i.t("Information")},{slug:"success",label:i.t("Success")},{slug:"warning",label:i.t("Warning")},{slug:"error",label:i.t("Error")}],y=Array.isArray(d)&&d.length?d.filter((function(e){var t=!0;return r.length!==v.length&&(t=r.includes(e.s)),t&&n.length&&(t="".concat(e.m).toLowerCase().includes(n)),t})):[],j=y.length<=Z().max.logsOnRender||x?y.length:Z().max.logsOnRender;return(0,a.jsx)(a.Fragment,{children:y.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Z,{sx:{overflowY:"auto",mr:"1px"},children:(0,a.jsx)(k.Z,{className:"log-box",dangerouslySetInnerHTML:{__html:In(y,n,x)}})}),(0,a.jsxs)(k.Z,{sx:{display:"flex",justifyContent:"end",height:"25px",pr:5,alignItems:"center",flexShrink:0},children:[!x&&Array.isArray(d)&&d.length>Z().max.logsOnRender?(0,a.jsx)(k.Z,{sx:{display:"flex",flexGrow:1,justifyContent:"center"},children:(0,a.jsx)(C.Z,{size:"small",onClick:function(){return m(!0)},sx:{width:"100%",height:"25px",borderRadius:0},children:i.t("Load all")})}):null,(0,a.jsxs)(k.Z,{sx:{display:"flex",flexGrow:0,flexShrink:0,ml:2},children:[(0,a.jsxs)(S.Z,{variant:"caption",children:[j," ",1===j?i.t("message"):i.t("messages")]}),(0,a.jsx)(S.Z,{variant:"caption",sx:{ml:1},children:"(".concat(Array.isArray(d)?d.length:0," ").concat(i.t("total"),")")})]})]})]}):(0,a.jsx)(we.Z,{variant:"standard",severity:"info",sx:{mx:2,mt:1},children:(0,a.jsx)(S.Z,{variant:"caption",color:"inherit",children:v.length!==r.length||n.length?i.t("No messages matched your search criteria"):i.t("No messages were recorded for this agent")})})})}function An(){var e=(0,Ct.Z)(["\n0%   { transform: translateY(100vh); }\n100% { transform: translateY(0); }"]);return An=function(){return e},e}var Tn=(0,zt.F4)(An()),zn=(0,b.ZP)(k.Z)((function(e){var t=e.theme;return{width:"2px",height:"20px",position:"relative",borderLeft:"1px solid ".concat((0,u.k)(t)),marginLeft:t.spacing(2),marginRight:t.spacing(2)}}));function En(e){var t=e.agents,n=(0,g.$)().i18n,r=(0,p.O)(),o=r.getAgentActive,l=r.onAgentActive,s=r.getAgentId,d=r.onAgentId,h=r.getLogsEnabled,x=r.onLogsEnabled,m=r.getNavVisible,v=r.onNavVisible,y=r.getLogsVisible,Z=r.onLogsVisible,j=r.setLogsVisible,b=r.clearLogs,S=(0,w.Z)(),I=(0,c.useRef)(null),_=(0,c.useRef)(null),A=[{slug:"info",label:n.t("Information")},{slug:"success",label:n.t("Success")},{slug:"warning",label:n.t("Warning")},{slug:"error",label:n.t("Error")}],T=(0,c.useState)(null),z=T[0],E=T[1],P=(0,c.useState)(!1),D=P[0],R=P[1],L=(0,c.useState)(!1),F=L[0],W=L[1],U=(0,c.useState)(!1),B=U[0],$=U[1],H=(0,c.useState)(!1),V=H[0],q=H[1],K=(0,c.useState)(!1),Y=K[0],X=K[1],Q=(0,c.useState)([]),ee=Q[0],te=Q[1],ne=(0,c.useState)(""),re=ne[0],ie=ne[1],oe=(0,c.useState)(!1),ae=oe[0],le=oe[1],se=(0,c.useState)(!1),ue=se[0],ce=se[1];(0,c.useEffect)((function(){te((function(){return A.map((function(e){return e.slug}))})),R(o(s()));var e=l((function(e){var t=e.agentId,n=e.active;t===s()&&R(n)}));W(h());var t=x((function(e){return W(e)}));$(y());var n=Z((function(e){return $(e)}));X(m());var r=v((function(e){return X(e)}));return function(){e(),t(),n(),r()}}),[z]),(0,c.useEffect)((function(){E(f(t,s()));var e=d((function(e){return E(f(t,e))}));return function(){return e()}}),[t]);var de=D?"0px -1px 0px 0px #38b7d7":null,pe="1px solid ".concat((0,u.k)(S));return z&&F&&B?(0,a.jsxs)(k.Z,{sx:{boxShadow:de,borderTop:pe,zIndex:20,position:"fixed",display:"flex",flexDirection:"column",left:"250px",bottom:"50px",width:"calc(100vw - 250px)",height:ae?Y?"calc(100vh - 149px)":"calc(100vh - 99px)":"calc(50vh - 49px)",overflow:"hidden",opacity:ue?.2:1,"&:hover":{opacity:ue?.8:1},background:S.palette.background.default,transition:"opacity 100ms linear",animation:"".concat(Tn," 200ms ease-in-out forwards")},children:[(0,a.jsxs)(k.Z,{sx:{height:"50px",p:2,px:4,alignItems:"center",display:"flex"},children:[(0,a.jsx)(G.Z,{title:n.t("Clear agent logs"),placement:"bottom-end",children:(0,a.jsx)(Ne.Z,{onClick:function(){return q(!0)},sx:{width:"2rem",height:"2rem"},children:(0,a.jsx)(Le.Z,{fontSize:"small"})})}),(0,a.jsx)(zn,{}),(0,a.jsx)(be.Z,{inputRef:I,variant:"standard",placeholder:n.t("Filter messages"),onChange:function(e){return t=e.target.value.toLowerCase(),null!==_.current&&window.clearTimeout(_.current),void(_.current=window.setTimeout((function(){ie(t),_.current=null}),250));var t},sx:{width:"100%","& input":{px:"0 !important",fontSize:"0.75rem"},"& .MuiInput-root:before":{display:"none"}},InputProps:{startAdornment:(0,a.jsx)(je.Z,{position:"start",children:(0,a.jsx)(bn.Z,{fontSize:"small",sx:{mx:2}})}),endAdornment:re?(0,a.jsx)(je.Z,{position:"start",children:(0,a.jsx)(G.Z,{title:n.t("Clear filter"),children:(0,a.jsx)(Ne.Z,{size:"small",sx:{width:30,height:30},onClick:function(){ie(""),null!==I.current&&(I.current.value="")},children:(0,a.jsx)(gn.Z,{fontSize:"small"})})})}):null}}),(0,a.jsx)(k.Z,{sx:{display:"flex",ml:2},children:A.map((function(e){return(0,a.jsx)(G.Z,{title:"".concat(n.t("Toggle log level"),": ").concat(e.label),children:(0,a.jsx)(Ne.Z,{sx:{width:"2rem",height:"2rem",mr:1},onClick:function(){return function(e){var t=(0,i.Z)(ee);ee.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),te(t)}(e.slug)},children:ee.includes(e.slug)?(0,a.jsx)(vn.Z,{color:e.slug,fontSize:"small"}):(0,a.jsx)(jn.Z,{color:e.slug,fontSize:"small"})})},e.slug)}))}),(0,a.jsx)(zn,{}),(0,a.jsx)(G.Z,{title:n.t("Toggle translucence"),children:(0,a.jsx)(Ne.Z,{onClick:function(){return ce(!ue)},sx:{width:"2rem",height:"2rem",mr:1},children:ue?(0,a.jsx)(kn.Z,{fontSize:"small"}):(0,a.jsx)(wn.Z,{fontSize:"small"})})}),(0,a.jsx)(G.Z,{title:ae?n.t("Restore"):n.t("Maximize"),children:(0,a.jsx)(Ne.Z,{onClick:function(){return le(!ae)},sx:{width:"2rem",height:"2rem",mr:1},children:ae?(0,a.jsx)(Zn.Z,{fontSize:"small"}):(0,a.jsx)(yn.Z,{fontSize:"small"})})}),(0,a.jsx)(G.Z,{title:n.t("Close"),children:(0,a.jsx)(Ne.Z,{onClick:function(){j(!1),ie(""),te(A.map((function(e){return e.slug})))},sx:{width:"2rem",height:"2rem",mr:1},children:(0,a.jsx)(Sn.Z,{fontSize:"small"})})})]}),(0,a.jsx)(_n,{agent:z,filterText:re,filterStatuses:ee}),null!==z&&V?(0,a.jsxs)(O.Z,{open:!0,onClose:function(){return q(!1)},sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[(0,a.jsx)(Pe.Z,{children:(0,a.jsx)(J,{agent:z,title:n.t("Clear agent logs")})}),(0,a.jsx)(N.Z,{children:(0,a.jsx)(we.Z,{severity:"warning",children:n.t("Are you sure you want to delete all messages for this agent?")})}),(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{color:"secondary",onClick:function(){return q(!1)},children:n.t("Cancel")}),(0,a.jsx)(C.Z,{color:"error",onClick:function(){b(null===z||void 0===z?void 0:z.id),q(!1)},startIcon:(0,a.jsx)(Le.Z,{}),children:n.t("Clear agent logs")})]})]}):null]}):null}var Pn=n(17261),Mn=n(91435),Nn=(0,b.ZP)(U.Z)((function(e){var t,n=e.theme;return t={},(0,R.Z)(t,n.breakpoints.down("md"),{minWidth:100}),(0,R.Z)(t,n.breakpoints.down("sm"),{minWidth:67}),(0,R.Z)(t,"height","50px"),(0,R.Z)(t,"minHeight","50px"),t})),On=(0,b.ZP)("span")((function(e){var t=e.theme;return(0,R.Z)({fontSize:"0.8rem",lineHeight:"0.8rem",textTransform:"none",marginLeft:t.spacing(2.4)},t.breakpoints.down("md"),{display:"none"})}));function Dn(e){var t=e.agents,n=(0,g.$)().i18n,i=(0,p.O)(),l=i.getAgentActive,s=i.onAgentActive,u=i.getAgentId,d=i.onAgentId,h=i.onAgentTab,x=i.getAgentTab,m=i.setAgentTab,v=i.getSource,y=i.onSource,Z=i.onNavVisible,j=i.getNavVisible,b=i.setNavVisible,w=(0,c.useState)({inputs:!1,outputs:!1}),S=w[0],C=w[1],I=(0,c.useState)(!1),_=I[0],A=I[1],T=(0,c.useState)(!1),E=T[0],P=T[1],M=(0,c.useState)(null),N=M[0],O=M[1],D=(0,c.useState)(""),R=D[0],F=D[1],U={"":{label:"Browser",icon:(0,a.jsx)(Dt.Z,{className:E?"rotate-360":null})},settings:{label:"Settings",icon:(0,a.jsx)(Pn.Z,{}),visible:S.inputs},results:{label:"Results",icon:(0,a.jsx)(Mn.Z,{}),visible:S.outputs}};(0,c.useEffect)((function(){null!==N&&(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,v(u(),!0)];case 1:return e=t.sent(),C({inputs:N.installedModuleId||Array.isArray(e.srcInputs)&&e.srcInputs.length,outputs:N.installedModuleId||Array.isArray(e.srcOutputs)&&e.srcOutputs.length}),[2]}}))}))();var e=y((function(e){var t=e.agentId,n=e.sourceCode;t===(null===N||void 0===N?void 0:N.id)&&C({inputs:N.installedModuleId||Array.isArray(n.srcInputs)&&n.srcInputs.length,outputs:N.installedModuleId||Array.isArray(n.srcOutputs)&&n.srcOutputs.length})}));P(l(u()));var t=s((function(e){var t=e.agentId,n=e.active;t===u()&&P(n)})),n=h((function(e){return F(e)}));m(""),A(j());var i=Z((function(e){return A(e)}));return function(){e(),n(),i(),t()}}),[N]),(0,c.useEffect)((function(){O(f(t,u()));var e=d((function(e){return O(f(t,e))}));return function(){return e()}}),[t]);return N?(0,a.jsx)(L.ZP,{value:R,children:(0,a.jsx)(W.Z,{sx:{"& .MuiTabs-indicator":{borderRadius:"5px",marginBottom:"4px",height:"4px"},mx:1},onChange:function(e,t){return m(t)},children:Object.keys(U).filter((function(e){return"undefined"===typeof U[e].visible||U[e].visible})).map((function(e,t){return(0,a.jsx)(Nn,{icon:U[e].icon,iconPosition:"start",onClick:function(){return""===e&&void(""===x()&&b(!_))},value:e,label:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",px:2},children:[(0,a.jsx)(On,{children:n.t(U[e].label)}),""===e?(0,a.jsx)(k.Z,{sx:{ml:3,mr:-3},children:(0,a.jsx)(z,{open:_,children:(0,a.jsx)(vt.Z,{size:"small"})})}):null]})},t)}))})}):null}var Rn=n(29691),Ln=(0,b.ZP)(k.Z)((function(e){var t=e.theme;return{width:"1100px",height:"1100px",left:"50%",top:"50%",marginLeft:"-550px",marginTop:"-550px",position:"absolute",background:"url(/img/pages/circles-".concat(t.palette.mode,".svg)"),backgroundPosition:"50% 50%",backgroundSize:"cover",backgroundRepeat:"no-repeat",zIndex:1}}));function Fn(e){var t=e.agentsCount,n=void 0===t?0:t,i=e.agentsReady,l=void 0!==i&&i,s=e.dialogAgentCreate,d=void 0===s?null:s,f=e.setDialogAgentCreate,h=void 0===f?function(){}:f,v=(0,p.O)().checkSubscription,y=(0,c.useState)(!1),Z=y[0],j=y[1],b=(0,c.useState)(!1),S=b[0],I=b[1],_=(0,g.$)().i18n,A=(0,w.Z)(),T=(0,x.a)();(0,c.useEffect)((function(){l&&!n&&(0,m.G)("reveal")}),[l,n]);var z=function(){var e=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return I(!0),[4,v(T,!0)];case 1:return t=n.sent(),I(!1),(null===(e=T.user)||void 0===e?void 0:e.computerEnabled)&&t.active?h(!0):j(!0),[2]}}))}));return function(){return e.apply(this,arguments)}}();return l?0===n?(0,a.jsxs)(k.Z,{sx:{position:"absolute",zIndex:100,top:0,left:0,width:"100%",height:"calc(100% - 50px)",overflow:"hidden",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",background:A.palette.background.default,boxShadow:"0px 1px 0px 0px ".concat((0,u.k)(A))},children:[(0,a.jsx)(Ln,{className:"zoom-in"}),(0,a.jsx)(Ln,{className:"zoom-in",sx:{animationDelay:"2s"}}),(0,a.jsxs)(k.Z,{sx:{mt:14,p:5,position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[(0,a.jsx)($t.Z,{size:192,animate:!0,sx:{mb:6},className:"rotate"}),(0,a.jsx)(C.Z,{size:"large",variant:"contained",className:d||Z?null:"pop",fullWidth:!0,disabled:S,sx:{fontSize:"0.75rem",opacity:0,animation:"fadeIn 1s linear forwards",animationDelay:"1.5s"},startIcon:(0,a.jsx)(Rn.Z,{color:"inherit",fontSize:"large"}),onClick:z,children:_.t("Let's begin!")})]}),Z?(0,a.jsx)(hn,{isOpen:!0,onClose:function(){return j(!1)}}):null]}):null:(0,a.jsx)(k.Z,{sx:{position:"absolute",zIndex:100,top:0,left:0,display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",background:A.palette.background.default},children:(0,a.jsx)($t.Z,{size:192,animate:!0,grey:!0,className:"rotate"})})}var Wn=function(e){var t=e.isOpen,n=void 0!==t&&t,r=e.onOpen,i=void 0===r?function(){}:r;return(0,c.useEffect)((function(){n&&"function"===typeof i&&i()}),[n]),n?(0,a.jsx)(O.Z,{open:!0,sx:{"& .MuiPaper-root":{background:"transparent",boxShadow:"none"}},children:(0,a.jsx)(N.Z,{children:(0,a.jsx)(k.Z,{sx:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",opacity:.9},children:(0,a.jsx)($t.Z,{size:192,animate:!0,grey:!0,dark:!1,className:"rotate"})})})}):null},Un=n(82330),Bn=n(26406),$n=n(54356),Hn=n(35054),Vn=n(3922),qn=n(18578),Kn=n(85443),Yn=n(8114),Gn=n(30874),Xn=n(57160),Qn=n(38118),Jn=n(78729),er=n(70382),tr=n(5816);function nr(e){var t=e.agents,n=(0,p.O)(),r=n.getAgentId,i=n.onAgentId,o=n.onTickCounter,l=n.getTickCounters,s=n.getHourglass,u=n.onHourglass,d=(0,c.useRef)(null),f=(0,w.Z)(),h=(0,c.useState)(null),x=h[0],m=h[1],g=(0,c.useState)({}),v=g[0],y=g[1],Z=(0,c.useState)(!1),j=Z[0],b=Z[1],C=(0,c.useState)(0),I=C[0],_=C[1];(0,c.useEffect)((function(){m(r());var e=i((function(e){return m(e)}));return function(){return e()}}),[t]);var A=function(e){"object"===typeof e&&null!==e&&(b(e.active),_(e.active?e.total+parseInt((new Date).getTime()/1e3,10)-e.start:e.total),e.active&&(d.current=window.setTimeout((function(){A(s(r())),d.current=null}),1e3)))};return(0,c.useEffect)((function(){null!==d.current&&(window.clearTimeout(d.current),d.current=null),y(l(r()));var e=o((function(e){return y(e)}));A(s(r()));var t=u((function(e){var t=e.agentId,n=e.hourglass;t===r()&&A(n)}));return function(){e(),t()}}),[x]),null!==x&&"object"===typeof v&&null!==v?(0,a.jsxs)(k.Z,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"end",px:2,height:"100%"},children:[(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center"},children:Object.keys(v).slice(0,5).map((function(e){var t=!1,n=Xn.Z;switch(e){case"post":n=Un.Z;break;case"view":n=Yn.Z;break;case"like":n=Gn.Z;break;case"repost":n=er.Z;break;case"comment":n=Bn.Z;break;case"upload":n=Jn.Z;break;case"download":n=ue.Z;break;case"screenshot":n=Vn.Z;break;case"collect":n=tr.Z;break;case"success":n=$n.Z;break;case"warning":n=Qn.Z;break;case"contact":n=qn.Z;break;default:t=!0}return(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",mx:2},children:[(0,a.jsx)(G.Z,{title:e,placement:"left",children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(n,{fontSize:"small",color:"action",sx:{mr:2}}),t?(0,a.jsx)(S.Z,{color:"inherit",sx:{color:f.palette.text.disabled,mr:2,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:50,lineHeight:"1rem",fontSize:"0.75rem"},children:e}):null]})}),(0,a.jsx)(G.Z,{title:v[e],placement:"left",children:(0,a.jsx)(S.Z,{color:"disabled",sx:{display:"inline-block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:40,fontSize:"0.9rem",lineHeight:"0.9rem",fontFamily:"Inconsolata,monospace"},children:v[e]})})]},e)}))}),(0,a.jsx)(G.Z,{title:"Running time",placement:"left",children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center"},children:[j?(0,a.jsx)(Kn.Z,{fontSize:"small",color:"primary"}):(0,a.jsx)(Hn.Z,{fontSize:"small",color:"action"}),(0,a.jsx)(S.Z,{sx:{mx:2,textAlign:"right",fontSize:"0.9rem",lineHeight:"0.9rem",fontFamily:"Inconsolata,monospace",color:j?f.palette.primary.main:f.palette.text.disabled},children:lt(I)})]})})]}):null}var rr=n(15531),ir=n(64665),or=n(89778),ar=n(81743),lr=n(53535),sr=n(63203),ur=n(21489),cr=function(e){var t=e.agent,n=e.isOpen,r=void 0!==n&&n,i=e.onOpen,o=void 0===i?function(){}:i,l=e.onClose,s=void 0===l?function(){}:l,u=e.status,f=void 0===u?-1:u,h=(0,g.$)().i18n,x=(0,p.O)().getAgentBanner,m=(0,c.useState)(!1),v=m[0],y=m[1];(0,c.useEffect)((function(){r&&"function"===typeof o&&o()}),[r]);var Z=function(){r&&"function"===typeof s&&s()};return r?(0,a.jsxs)(O.Z,{open:!0,onClose:Z,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[(0,a.jsx)(Pe.Z,{children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,a.jsx)(J,{agent:t,title:d.Z.STATUS_PAUSED===f?h.t("Agent paused"):h.t("Agent stopped")}),(0,a.jsx)(Ne.Z,{"aria-label":h.t("More information"),sx:{ml:2},color:"default",onClick:function(){return y(!v)},size:"large",children:v?(0,a.jsx)(tt.Z,{}):(0,a.jsx)(Je.Z,{})})]})}),(0,a.jsxs)(N.Z,{children:[v?(0,a.jsx)(we.Z,{sx:{mb:6},children:(0,a.jsxs)(S.Z,{color:"inherit",variant:"body2",children:[h.t("Modules are not allowed to intercept or store any of your cookies, passwords, or other sensitive data.")," ",h.t("As a result, you'll need to manually log in to any websites that require authentication."),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),h.t("All of your data is securely stored exclusively on this computer.")]})}):null,(0,a.jsxs)(we.Z,{severity:"info",icon:(0,a.jsx)(ur.Z,{}),children:[h.t("Your attention is required."),(0,a.jsx)("br",{}),x(null===t||void 0===t?void 0:t.id)]})]}),(0,a.jsx)(M.Z,{children:(0,a.jsx)(C.Z,{color:"secondary",onClick:Z,children:h.t("OK")})})]}):null};function dr(e){var t=e.agent,n=e.status,r=(0,p.O)(),i=r.onAgentBanner,o=r.getAgentBanner,l=(0,c.useState)(o(null===t||void 0===t?void 0:t.id)),s=l[0],u=l[1],f=(0,g.$)().i18n;return(0,c.useEffect)((function(){u(o(null===t||void 0===t?void 0:t.id));var e=i((function(e){var n=e.agentId,r=e.banner;(null===t||void 0===t?void 0:t.id)===n&&u(r)}));return function(){e()}}),[null===t||void 0===t?void 0:t.id]),(0,a.jsx)(k.Z,{sx:{display:"flex",position:"relative",zIndex:2,alignItems:"center",width:"calc( 100% - 45px )",height:"100%",p:0,ml:1},children:(0,a.jsx)(G.Z,{title:s?null:null===t||void 0===t?void 0:t.name,enterDelay:500,enterNextDelay:500,componentsProps:{tooltip:{sx:{maxWidth:"248px"}}},children:(0,a.jsx)(S.Z,{sx:{mt:1,fontSize:"0.8rem",fontFamily:"Yaldevy, sans-serif",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textTransform:"none",maxWidth:"calc( 100% - 20px )",color:s||d.Z.STATUS_PAUSED===n?"warning.main":"text.main"},variant:"caption",children:s?d.Z.STATUS_PAUSED===n?f.t("Unpause when ready"):f.t("Start when ready"):null===t||void 0===t?void 0:t.name})})})}function pr(e){var t,n,i,l=e.agent,s=e.index,u=void 0===s?0:s,f=e.onSelect,m=void 0===f?async function(){}:f,v=(0,g.$)().i18n,y=(0,w.Z)(),Z=(0,x.a)(),b=(0,p.O)(),S=b.onAgentId,I=b.getAgentId,_=b.getAgentBanner,A=b.onAgentBanner,T=b.onSource,z=b.getSource,E=b.setSource,P=b.onInputs,M=b.getInputs,N=b.getMachine,O=b.onMachineStatus,D=b.onMachineBusy,R=b.onSubscription,L=b.getSubscription,F=b.onFirstPlay,W=b.getFirstPlay,U=b.setFirstPlay,B=(0,c.useState)(d.Z.STATUS_STOPPED),$=B[0],H=B[1],V=(0,c.useState)(0),q=V[0],K=V[1],Y=(0,c.useState)(null),Q=Y[0],J=Y[1],ee=(0,c.useState)(!1),te=ee[0],ne=ee[1],re=(0,c.useState)(!1),ie=re[0],oe=re[1],ae=(0,c.useState)(!1),le=ae[0],se=ae[1],ue=(0,c.useState)(!1),ce=ue[0],de=ue[1],pe=(0,c.useState)([]),fe=pe[0],he=pe[1],xe=(0,c.useState)({}),me=xe[0],ge=xe[1],ve=(0,c.useState)(!1),ye=ve[0],Ze=ve[1],je=function(){se(!0),setTimeout((function(){var e;return null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.setOnTop()}),250)};(0,c.useEffect)((function(){J(I());var e=S((function(e){J(e),_(null===l||void 0===l?void 0:l.id)&&(null===l||void 0===l?void 0:l.id)===e&&je()})),t=A((function(e){var t=e.agentId,n=e.banner;I()===t&&(null===l||void 0===l?void 0:l.id)===t&&n&&je()}));return function(){e(),t()}}),[]),(0,c.useEffect)((function(){if("string"===typeof(null===l||void 0===l?void 0:l.id)){(0,r.Z)((function(){var e,t,n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,z(l.id)];case 1:if(null!==(t=o.sent()))return[3,5];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,j.Z.get("agents/".concat(l.id,"/src"))];case 3:return r=o.sent(),Array.isArray(null===(n=r.data)||void 0===n?void 0:n.srcStateMachine)&&E(l.id,r.data),[3,5];case 4:return o.sent(),[3,5];case 5:return he(null!==(i=null===t||void 0===t?void 0:t.srcInputs)&&void 0!==i?i:[]),[4,M(l.id)];case 6:return ge.apply(void 0,[o.sent()]),[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.target.add(l.id,"about:home",l.id===I())];case 7:return o.sent(),[2]}}))}))();var e=D((function(e){var t=e.agentId,n=e.busy;l.id===t&&Ze(n)})),t=O((function(e){var t=e.agentId,n=e.status;l.id===t&&H(n)})),n=T((function(e){var t,n=e.agentId,r=e.sourceCode;l.id===n&&he(null!==(t=null===r||void 0===r?void 0:r.srcInputs)&&void 0!==t?t:[])})),i=P((function(e){var t=e.agentId,n=e.inputs;(null===l||void 0===l?void 0:l.id)===t&&ge(n)}));ne(W(l.id));var a,s=F((function(e){var t=e.agentId,n=e.firstPlay;l.id===t&&ne(n)})),u=L();oe(!!u.active),K(null!==(a=u.agentsCount)&&void 0!==a?a:0);var c=R((function(e){var t,n=e.info;oe(!!n.active),K(null!==(t=n.agentsCount)&&void 0!==t?t:0)})),d=function(){return N(l).stop()};return window.addEventListener("offline",d),function(){var r,o;e(),t(),n(),i(),s(),c(),window.removeEventListener("offline",d,!1),N(l).shutDown(),null===(r=window.sdk)||void 0===r||r.ipc.target.remove(l.id),null===(o=window.sdk)||void 0===o||o.ipc.source.close(l.id)}}}),[null===l||void 0===l?void 0:l.id]),(0,c.useEffect)((function(){var e;(!(null===(e=Z.user)||void 0===e?void 0:e.computerEnabled)||!ie||u>q-1)&&N(l).stop()}),[ie,q,null===(t=Z.user)||void 0===t?void 0:t.computerEnabled]);var be=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return e.stopPropagation(),[4,m(null===l||void 0===l?void 0:l.id)];case 1:return t.sent(),_(null===l||void 0===l?void 0:l.id)&&je(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=(0,r.Z)((function(e){var t,n,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e.stopPropagation(),"string"!==typeof(null===l||void 0===l?void 0:l.id)||ce?[2]:!ie||u>q-1?[2]:(te||U(l.id,!0),"string"===typeof Q?[3,2]:[4,m(l.id)]);case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,3,,5]),de(!0),setTimeout((function(){return de(!1)}),2500),d.Z.STATUS_STARTED===$?N(l).stop():(Q===(null===l||void 0===l?void 0:l.id)&&(null===(t=window.sdk)||void 0===t||t.ipc.main.setOnTop(!0)),N(l).start(null!==(n=l.installedModuleId)&&void 0!==n?n:null)),[3,5];case 3:return r=o.sent(),[4,null===(i=window.sdk)||void 0===i?void 0:i.ipc.main.setOnTop()];case 4:return o.sent(),Te.A.error("".concat(v.t("Agent toggle error"),": ").concat(null!==(a=r.message)&&void 0!==a?a:r),{duration:5e3,ariaProps:{role:"alert"}}),[3,5];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),ke=null;switch($){case d.Z.STATUS_STOPPED:ke=ye?v.t("Working"):v.t("Start");break;case d.Z.STATUS_PAUSED:ke=le?null:v.t("Unpause");break;case d.Z.STATUS_STARTED:ke=v.t("Stop")}var Se=fe.reduce((function(e,t){if(!e&&"bool"!==t.type){var n=h(fe,t.key,me),r=n.fieldShown,i=n.fieldEmpty;return r&&i&&"undefined"===typeof t.default}return e}),!1),Ce=!(null===(n=Z.user)||void 0===n?void 0:n.computerEnabled)||!ie||u>q-1,Ie=_(null===l||void 0===l?void 0:l.id),_e=Ce||ce||d.Z.STATUS_STOPPED===$&&ye;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(k.Z,{sx:{width:"100%",ml:"-1px",height:"50px",position:"relative"},children:[(0,a.jsxs)(C.Z,{startIcon:d.Z.STATUS_STOPPED===$?(0,a.jsx)(X.Z,{color:Ie?"warning":"action",sx:{ml:2}}):(0,a.jsx)(rr.Z,{color:d.Z.STATUS_PAUSED===$||Ie?"warning":"primary",sx:{ml:2}}),variant:"text",sx:{"&.MuiButton-root":{background:Q===(null===l||void 0===l?void 0:l.id)?y.palette.background.selected:null},borderRadius:0,width:"100%",transition:"none",height:"50px",position:"relative",zIndex:2},onClick:be,children:[(0,a.jsx)(dr,{agent:l,status:$}),(0,a.jsx)(k.Z,{sx:{position:"absolute",top:"5px",left:"5px",borderRadius:"5px",width:"5px",height:"40px",background:Q===(null===l||void 0===l?void 0:l.id)?d.Z.STATUS_PAUSED===$||Ie?y.palette.warning.main:y.palette.primary.main:"transparent",transform:"scaleY(".concat(Q===(null===l||void 0===l?void 0:l.id)?"100":"0","%)"),transition:"transform 200ms linear"}})]}),!l.installedModuleId||Se?null:(0,a.jsx)(G.Z,{title:Ce?(null===(i=Z.user)||void 0===i?void 0:i.computerEnabled)?v.t("Locked by billing"):v.t("Computer disabled"):_e?null:ke,placement:"left",children:(0,a.jsx)(k.Z,{sx:{position:"absolute",right:"5px",top:"5px",zIndex:2},children:(0,a.jsx)(Ne.Z,{className:te||Q!==(null===l||void 0===l?void 0:l.id)?null:"pop pop-rounded pop-inset",disabled:_e,onClick:we,children:Ce?(0,a.jsx)(ir.Z,{fontSize:"small",color:"inherit"}):d.Z.STATUS_STARTED===$?(0,a.jsx)(ar.Z,{color:_e?"disabled":"primary"}):d.Z.STATUS_STOPPED===$&&ye?(0,a.jsx)(or.Z,{className:"rotate-360"}):(0,a.jsx)(lr.Z,{color:_e?"disabled":d.Z.STATUS_PAUSED===$||Ie?"warning":"primary"})})})}),Ie?(0,a.jsx)(sr.Z,{color:"warning",variant:"indeterminate",sx:{position:"absolute",bottom:0,left:0,height:"2px",zIndex:3}}):null]}),le?(0,a.jsx)(cr,{agent:l,isOpen:!0,onClose:function(){return se(!1)},status:$}):null]})}var fr=n(36403),hr=n(19529),xr=n(41372),mr=n(13310),gr=n(55553),vr=(0,c.forwardRef)((function(e,t){var n=e.tooltipPlacement,r=void 0===n?"bottom":n,i=e.tooltipShown,o=void 0===i||i,l=(0,ot.r)(),s=l.settings,u=l.saveSettings,d=(0,c.useState)(!1),p=d[0],f=d[1],h=(0,g.$)().i18n,x=(0,w.Z)(),v="boolean"!==typeof(null===s||void 0===s?void 0:s.sound)||s.sound;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(G.Z,{title:o?v?h.t("Sound on"):h.t("Sound off"):null,placement:r,children:(0,a.jsx)(ft.Z,{ref:t,color:"default",inputProps:{"aria-label":"sound",name:"sound"},checked:v,disabled:p,sx:{mx:1,height:"38px","& .MuiSwitch-track":{background:"transparent",opacity:1,border:"1px solid ".concat(x.palette.divider)}},icon:(0,a.jsx)(gr.Z,{fontSize:"small",color:"disabled"}),checkedIcon:(0,a.jsx)(mr.Z,{fontSize:"small",color:"info",sx:{color:"#ff9b00"}}),onClick:function(){p||(f(!0),setTimeout((function(){return f(!1)}),500),u({sound:!v}),!v&&(0,m.G)("toastInfo"))}})})})})),yr=n(84165),Zr=n(21946),jr=function(){var e=(0,w.Z)();return{primaryFilled:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},primaryLight:{color:e.palette.primary.main,backgroundColor:(0,Zr.E)(e.palette.primary.main,.12)},secondaryFilled:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},secondaryLight:{color:e.palette.secondary.main,backgroundColor:(0,Zr.E)(e.palette.secondary.main,.12)},successFilled:{color:e.palette.success.contrastText,backgroundColor:e.palette.success.main},successLight:{color:e.palette.success.main,backgroundColor:(0,Zr.E)(e.palette.success.main,.12)},errorFilled:{color:e.palette.error.contrastText,backgroundColor:e.palette.error.main},errorLight:{color:e.palette.error.main,backgroundColor:(0,Zr.E)(e.palette.error.main,.12)},warningFilled:{color:e.palette.warning.contrastText,backgroundColor:e.palette.warning.main},warningLight:{color:e.palette.warning.main,backgroundColor:(0,Zr.E)(e.palette.warning.main,.12)},infoFilled:{color:e.palette.info.contrastText,backgroundColor:e.palette.info.main},infoLight:{color:e.palette.info.main,backgroundColor:(0,Zr.E)(e.palette.info.main,.12)}}},br=n(41796),wr=n(69661),kr=(0,c.forwardRef)((function(e,t){var n,r=e.user,i=e.sx,o=e.skin,l=e.color,s=(0,w.Z)(),u=jr(),c=(0,x.a)(),d=(new Date).toJSON().slice(0,10),p="".concat(ie.Z.s3Url,"/users/").concat(r.id,"/?cb=").concat(d);(null===(n=c.user)||void 0===n?void 0:n.id)==r.id&&(p="string"===typeof(null===r||void 0===r?void 0:r.userAvatarId)?"".concat(ie.Z.s3Url,"/users/").concat(r.id,"/").concat(r.userAvatarId,".png"):"/img/placeholder/user.png");var f,h=function(e,t){return"light"===e?(0,P.Z)({},u["".concat(t,"Light")]):"light-static"===e?{color:u["".concat(t,"Light")].color,backgroundColor:(0,br.$n)(s.palette[t].main,.88)}:(0,P.Z)({},u["".concat(t,"Filled")])};i.backgroundColor=s.palette.background.default,i.border="2px solid ".concat(null!==(f=s.palette.customColors.userColors.solid[r.userColor])&&void 0!==f?f:s.palette.divider);var m={primary:h(o,"primary"),secondary:h(o,"secondary"),success:h(o,"success"),error:h(o,"error"),warning:h(o,"warning"),info:h(o,"info")},g={sx:i,skin:o,color:l,src:p,alt:"avatar"};return(0,a.jsx)(wr.Z,(0,He.Z)((0,P.Z)({ref:t},g),{sx:!p&&o&&l?Object.assign(m[l],i):i}))}));kr.defaultProps={skin:"filled",color:"primary"};var Sr=kr,Cr=(0,b.ZP)(Re.Z)((function(e){var t=e.theme;return{"& .MuiMenu-paper":(0,R.Z)({width:280,overflow:"hidden",marginTop:t.spacing(4)},t.breakpoints.down("sm"),{width:"100%"}),"& .MuiMenu-list":{padding:0}}})),Ir=function(e){var t=e.onProfileOpen,n=void 0===t?function(){}:t,i=(0,ot.r)().settings,l=(0,g.$)().i18n,s=(0,w.Z)(),u=(0,x.a)(),d=(0,c.useState)(!1),p=d[0],f=d[1],h=(0,c.useState)(null),m=h[0],v=h[1],y=(0,c.useRef)(null),Z=(0,c.useRef)(null),j=function(){return v(null)},b=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return j(),[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.setOnTop()];case 1:return t.sent(),f(!0),[2]}}))}));return function(){return e.apply(this,arguments)}}();return u.user?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(C.Z,{onClick:function(e){v(e.currentTarget)},fullWidth:!0,sx:{borderRadius:0,justifyContent:"space-between",alignItems:"center",height:"100%"},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"calc(100% - 30px)"},children:[(0,a.jsx)(hr.Z,{"aria-disabled":"true",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,a.jsx)(Sr,{user:u.user,sx:{width:24,height:24,ml:1}})}),(0,a.jsx)(S.Z,{variant:"caption",sx:{textTransform:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",ml:3},children:u.user.userName})]}),(0,a.jsx)(z,{sx:{flexShrink:0},open:!!m,children:(0,a.jsx)(_.Z,{color:"action"})})]}),(0,a.jsxs)(Cr,{sx:{mt:-6,width:"250px"},anchorEl:m,"aria-disabled":"true",open:Boolean(m),onClose:function(){return j()},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:[(0,a.jsx)(Oe.Z,{onClick:function(){j(),n()},sx:{p:3,textDecoration:"none"},children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[(0,a.jsx)(hr.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,a.jsx)(Sr,{user:u.user,sx:{width:"2rem",height:"2rem",ml:1}})}),(0,a.jsxs)(k.Z,{"aria-disabled":"true",sx:{display:"flex",ml:3,alignItems:"flex-start",flexDirection:"column"},children:[(0,a.jsx)(G.Z,{title:u.user.userName,placement:"top",children:(0,a.jsx)(S.Z,{sx:{fontWeight:600,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"145px"},children:u.user.userName})}),(0,a.jsx)(G.Z,{title:u.user.userEmail,placement:"bottom",children:(0,a.jsx)(S.Z,{variant:"caption",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"145px"},children:u.user.userEmail})})]})]})}),(0,a.jsx)(De.Z,{}),(0,a.jsx)(Oe.Z,{onClick:function(e){e.stopPropagation(),j(),Z.current&&Z.current.click()},children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[(0,a.jsx)(k.Z,{sx:{ml:"-19px",mr:"-3px"},children:(0,a.jsx)(yr.Z,{ref:Z,tooltipShown:!1})}),(0,a.jsx)(S.Z,{variant:"body2",children:"dark"===s.palette.mode?l.t("Dark mode"):l.t("Light mode")})]})}),(0,a.jsx)(Oe.Z,{onClick:function(e){e.stopPropagation(),j(),y.current&&y.current.click()},children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[(0,a.jsx)(k.Z,{sx:{ml:"-19px",mr:"-3px"},children:(0,a.jsx)(vr,{ref:y,tooltipShown:!1})}),(0,a.jsx)(S.Z,{variant:"body2",children:i.sound?l.t("Sound on"):l.t("Sound off")})]})}),(0,a.jsx)(De.Z,{}),(0,a.jsxs)(Oe.Z,{sx:{py:3,fontWeight:400},"aria-disabled":"true",onClick:b,children:[(0,a.jsx)(xr.Z,{sx:{mr:5},color:"action"}),(0,a.jsx)(S.Z,{variant:"body2",children:l.t("Disconnect")})]})]}),p?(0,a.jsxs)(O.Z,{open:!0,onClose:function(){return f(!1)},sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[(0,a.jsx)(Pe.Z,{children:l.t("Disconnect")}),(0,a.jsx)(N.Z,{children:(0,a.jsx)(we.Z,{severity:"warning",children:l.t("Are you sure you want to log out of this computer?")})}),(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{color:"secondary",onClick:function(){return f(!1)},children:l.t("Cancel")}),(0,a.jsx)(C.Z,{variant:"text",color:"error",onClick:function(){return u.logout()},startIcon:(0,a.jsx)(xr.Z,{}),children:l.t("Disconnect")})]})]}):null]}):null},_r=n(51233);function Ar(e){var t=e.agents,n=e.agentsReady,r=void 0!==n&&n,i=(0,p.O)(),o=i.getAgentActive,l=i.onAgentActive,s=i.getAgentId,u=i.onAgentId,d=i.onTickArea,f=i.onVmouseMove,h=i.onVmouseClick,x=i.getVmouse,m=i.onDownloadInfo,g=i.getDownloadInfo,v=(0,w.Z)(),y=(0,c.useRef)(null),Z=(0,c.useRef)(null),j=(0,c.useRef)(null),b=(0,c.useRef)(null),C=(0,c.useState)(null),I=C[0],_=C[1],A=(0,c.useState)(!1),T=A[0],z=A[1],E=(0,c.useState)(!1),M=E[0],N=E[1],O=(0,c.useState)(null),D=O[0],R=O[1],L=(0,c.useState)({}),F=L[0],W=L[1],U=(0,c.useState)(null),B=U[0],$=U[1];return(0,c.useEffect)((function(){z(o(s()));var e=l((function(e){var t=e.agentId,n=e.active;t===s()&&z(n)}));_(null);var t=d((function(e){var t=e.agentId,n=e.area;if(t===s()&&Array.isArray(n)){var r=n.map((function(e){return parseInt(e,10)})).filter((function(e){return Number.isInteger(e)}));4===r.length&&(_(null),null!==j.current&&(window.clearTimeout(j.current),j.current=null),j.current=window.setTimeout((function(){_(r),j.current=null,null!==b.current&&(window.clearTimeout(b.current),b.current=null),b.current=window.setTimeout((function(){_(null),b.current=null}),1e3)}),50))}}));$(x(s()));var n=f((function(e){var t=e.agentId,n=e.vmouse;t===s()&&$(n)}));W(g(s()));var r=m((function(e){var t=e.agentId,n=e.info;t===s()&&W(n)})),i=h((function(e){var t=e.agentId,n=e.vmouse;t===s()&&["click","double-click"].includes(null===n||void 0===n?void 0:n.name)&&(N(!0),window.setTimeout((function(){return N(!1)}),250),R(null),null!==y.current&&(window.clearTimeout(y.current),y.current=null),y.current=window.setTimeout((function(){R(n),y.current=null,null!==Z.current&&(window.clearTimeout(Z.current),Z.current=null),Z.current=window.setTimeout((function(){R(null),Z.current=null}),300)}),50))}));return function(){t(),r(),n(),e(),i()}}),[]),(0,c.useEffect)((function(){var e=u((function(e){W(g(e)),z(o(e)),_(null)}));return function(){return e()}}),[t]),r?T?(0,a.jsxs)(k.Z,{sx:{position:"relative",width:"100%",height:"100%",boxShadow:"none",overflow:"hidden"},children:[(0,a.jsx)(k.Z,{className:"agent-overlay",children:(0,a.jsx)(k.Z,{sx:{width:"350px",height:"100%",right:"0px",position:"absolute",overflowY:"auto",mr:2,display:"flex",flexDirection:"column",justifyContent:"end"},children:Object.keys(F).map((function(e){var t="string"===typeof F[e].error?"error":F[e].done?"success":"primary",n="string"===typeof F[e].error?(0,a.jsx)(Qn.Z,{}):F[e].done?(0,a.jsx)($n.Z,{}):(0,a.jsx)(or.Z,{className:"rotate-360"}),r="string"===typeof F[e].error?F[e].error:"".concat(F[e].fileName).concat(F[e].totalBytes>0?" (".concat((F[e].totalBytes/1048576).toFixed(3),"MB)"):"");return(0,a.jsx)(_r.Z,{sx:{mb:2},children:(0,a.jsxs)(we.Z,{variant:"filled",color:t,sx:{px:2,"& .MuiAlert-message":{width:"100%"},boxShadow:v.shadows[3]},icon:n,children:[(0,a.jsx)(S.Z,{variant:"caption",color:"inherit",children:r}),"string"===typeof F[e].error||F[e].done?null:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"100%",height:"1rem"},children:[(0,a.jsx)(sr.Z,{color:"primary",value:parseFloat(F[e].progress),variant:F[e].totalBytes>0?"determinate":"indeterminate"}),F[e].totalBytes>0?(0,a.jsx)(S.Z,{variant:"caption",color:"inherit",sx:{ml:3},children:"".concat(F[e].progress,"%")}):null]})]})},e)}))})}),Array.isArray(I)?(0,a.jsx)(k.Z,{className:"tick-area",sx:{left:I[0],top:I[1],width:I[2],height:I[3]}}):null,null!==D?(0,a.jsx)(k.Z,{className:"mouse-ripple",sx:{left:"".concat(D.x-25,"px"),top:"".concat(D.y-25,"px"),animationIterationCount:"double-click"===D.name?2:1}}):null,null!==B?(0,a.jsx)(k.Z,{className:"mouse-pointer","data-tapped":"".concat(M),sx:(0,P.Z)({transform:"translate(".concat(B.x,"px, ").concat(B.y,"px)")},Number.isInteger(B.duration)?{transitionDuration:"".concat(B.duration,"ms")}:{})}):null]}):null:(0,a.jsx)(k.Z,{sx:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)($t.Z,{size:128,animate:!0,grey:!0,className:"rotate"})})}var Tr=n(40476),zr=n(18360),Er=n(57460),Pr=n.n(Er),Mr=n(10633),Nr=n(14529),Or=n(39244),Dr=n(22394),Rr=n(1938),Lr=n(84323),Fr=n(59798),Wr=n(37132),Ur=n(76419),Br=n(15027),$r=n(59925),Hr=n(77465),Vr=n(4554),qr=n(32882),Kr=n(82624),Yr=n(83212),Gr=n(65014),Xr=n(39289),Qr=n(56658),Jr=n(65188),ei=n(37230),ti=n(73586),ni=n(44123),ri=n(51582),ii=n(58505),oi=n(50092),ai=n(22954),li=n(95115),si=n(93898),ui={en:Fr._,cs:Wr.l,nl:Ur.R,fr:Br.g,de:$r.y,el:Hr.z,hu:Vr.s,it:qr.K,pt:Kr.F,pl:Yr.s,ro:Gr.C,ru:Xr.n,es:Qr._,sv:Jr.I,tr:ei.X,uk:ti.m,ar:ni.S,zh:ri.U,he:ii.A,ja:oi.j,ko:ai.u,fa:li.T,vi:si.I},ci=n(98690),di=function(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)},pi=function(e){var t=function(){var e=(0,ot.r)().settings,t=("undefined"!==typeof ui[null===e||void 0===e?void 0:e.lang]?ui[e.lang]:ui.en).components.MuiDataGrid.defaultProps.localeText;return t.MuiTablePagination.labelDisplayedRows=function(e){var t=e.from,n=e.to,r=e.count;return"".concat(t," - ").concat(n," / ").concat(r)},t}(),n=(0,w.Z)(),r=(0,c.useState)(di(3)),i=r[0],o=r[1],l=(0,c.useState)(di(3)),s=l[0],u=l[1];return(0,c.useEffect)((function(){var e=document.documentElement,t=new ResizeObserver((function(){u(di(3)),o(di(3))}));return t.observe(e),function(){return t.disconnect()}}),[]),(0,a.jsx)(k.Z,{sx:{border:"1px solid ".concat(n.palette.divider),borderRadius:"8px"},children:(0,a.jsx)(ci._,(0,He.Z)((0,P.Z)({},e),{showColumnRightBorder:!0,hideFooterSelectedRowCount:!0,dataGridLocale:t,rowHeight:s,columnHeaderHeight:i}))})},fi=n(40876),hi=(0,b.ZP)(k.Z)((function(e){var t=e.theme;return{border:"1px solid ".concat(t.palette.divider),borderRadius:t.spacing(2),width:"100%",overflowX:"auto",paddingBottom:t.spacing(1)}})),xi=(0,b.ZP)(k.Z)((function(e){var t=e.theme;return{height:"35px",width:"100%",display:"flex",alignItems:"center",padding:t.spacing(2),marginBottom:t.spacing(1)}})),mi=(0,b.ZP)(k.Z)((function(e){var t=e.theme,n=e.removed,r=void 0!==n&&n,i=e.excluded,o=void 0!==i&&i;return{border:"1px solid ".concat(t.palette.divider),borderRadius:t.spacing(1),width:"115px",flexShrink:0,flexGrow:0,marginRight:t.spacing(1),height:"35px",padding:t.spacing(2),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.75rem",lineHeight:"18px",verticalAlign:"middle",textDecoration:r?"line-through":"none",background:o?t.palette.divider:"transparent",userSelect:r||o?"none":"text"}})),gi=(0,b.ZP)(S.Z)((function(e){var t=e.theme;return{"&:before":{position:"absolute",content:'""',display:"block",top:0,left:0,width:"5px",height:"100%",background:t.palette.divider,borderRadius:t.spacing(1)},position:"relative",paddingLeft:t.spacing(4),whiteSpaceCollapse:"preserve",wordBreak:"break-word",whiteSpace:"pre-wrap",fontSize:"0.85rem",width:"100%"}})),vi=5e3,yi=function(){var e=(0,r.Z)((function(e){var t,n,i,a,l=arguments;return(0,o.__generator)(this,(function(s){return t=l.length>1&&void 0!==l[1]?l[1]:4,n=l.length>2&&void 0!==l[2]?l[2]:null,i=l.length>3&&void 0!==l[3]?l[3]:2,a=[],[2,new Promise((function(l,s){var u=new FileReader;u.onload=function(e){var u=e.target.result;Pr().parse(u,{header:!1,skipEmptyLines:!0,dynamicTyping:!0,comments:"#",worker:!1,step:function(){var e=(0,r.Z)((function(e,r){return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e.data.filter((function(e){return null!==e})).length?(a.push(e.data),"function"!==typeof n?(a.length>=t&&(l(a),a=[],r.abort()),[2]):a.length>=i?(r.pause(),[4,n(a)]):[3,2]):[2];case 1:o.sent(),a=[],r.resume(),o.label=2;case 2:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),complete:(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return"function"!==typeof n?(l(a),[2]):a.length>0?[4,n(a)]:[3,2];case 1:e.sent(),e.label=2;case 2:return l(!0),[2]}}))})),error:s})},u.onerror=s,u.readAsText(e)}))]}))}));return function(t){return e.apply(this,arguments)}}(),Zi=(0,c.memo)((function(e){var t,n=e.fieldKey,l=e.fieldName,s=e.fieldColumns,u=void 0===s?[]:s,d=e.runIds,f=void 0===d?null:d,h=e.pop,x=void 0!==h&&h,m=(0,p.O)(),v=m.getAgentId,y=m.refetchInputs,j=(0,g.$)().i18n,b=(0,c.useRef)(null);Array.isArray(u)||(u=[]);var w=(0,c.useState)(10),I=w[0],_=w[1],A=(0,c.useState)(1),T=A[0],z=A[1],E=(0,c.useState)(1),P=E[0],D=E[1],R=(0,c.useState)(!1),L=R[0],F=R[1],W=(0,c.useState)([]),U=W[0],$=W[1],H=(0,c.useState)(null),V=H[0],q=H[1],K=(0,c.useState)(!1),Y=K[0],X=K[1],J=(0,c.useState)(!1),ee=J[0],te=J[1],ne=(0,c.useState)(!1),re=ne[0],ie=ne[1],oe=(0,c.useState)(!1),ae=oe[0],le=oe[1],se=(0,c.useState)(null),ue=se[0],ce=se[1],de=(0,c.useState)([]),pe=de[0],fe=de[1],he=(0,c.useState)(!1),xe=he[0],ge=he[1],ve=(0,c.useState)([]),ye=ve[0],Ze=ve[1],ke=function(){var e=(0,r.Z)((function(){var e,t,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:F(!1),o.label=1;case 1:return o.trys.push([1,6,,7]),Array.isArray(f)?[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.diskStorage.outputTableQuery(v(),f.slice(-Z().max.diskStorage.outputRunsCount),n,P,vi)]:[3,3];case 2:return i=o.sent(),[3,5];case 3:return[4,null===(t=window.sdk)||void 0===t?void 0:t.ipc.diskStorage.inputTableQuery(v(),n,P,vi)];case 4:i=o.sent(),o.label=5;case 5:return"object"===typeof(r=i)&&null!==r&&(z(Math.ceil(r.total/vi)),$(r.rows)),[3,7];case 6:return o.sent(),[3,7];case 7:return[4,y(v())];case 8:return o.sent(),F(!0),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Se=function(){return Y?(t=Math).max.apply(t,(0,i.Z)((Array.isArray(pe)?pe:[]).map((function(e){return e.length}))).concat([u.length])):0};(0,c.useEffect)((function(){var e=setTimeout(ke,100);return function(){return window.clearTimeout(e)}}),[n,u,P,f]),(0,c.useEffect)((function(){Y&&Ze((0,i.Z)(u).concat((0,i.Z)(new Array(Se()-u.length).fill(""))))}),[Y,u,pe]);var Ce=function(){var e=(0,r.Z)((function(e){var t,r,i,a,l,s,c,d,p;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(Array.isArray(f))return[2];ie(!0),r=new FormData(e.target),i={},a=!0,l=!1,s=void 0;try{for(c=u[Symbol.iterator]();!(a=(d=c.next()).done);a=!0)p=d.value,i[p]=r.get(p)}catch(h){l=!0,s=h}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}return[4,null===(t=window.sdk)||void 0===t?void 0:t.ipc.diskStorage.inputTableAdd(v(),n,[i])];case 1:return o.sent(),ie(!1),le(!1),[4,ke()];case 2:return o.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,r.Z)((function(e,t){var r,i,a,l,s,c,d,p,h;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(Array.isArray(f))return[2];ie(!0),i=new FormData(e.target),a={},l=!0,s=!1,c=void 0;try{for(d=u[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)h=p.value,a[h]=i.get(h)}catch(x){s=!0,c=x}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return[4,null===(r=window.sdk)||void 0===r?void 0:r.ipc.diskStorage.inputTableUpdate(v(),n,t,a)];case 1:return o.sent(),ie(!1),le(!1),[4,ke()];case 2:return o.sent(),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),_e=function(){var e=(0,r.Z)((function(e){var t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return le(!1),Array.isArray(f)?[2]:(F(!1),[4,null===(t=window.sdk)||void 0===t?void 0:t.ipc.diskStorage.inputTableDelete(v(),n,e)]);case 1:return r.sent(),[4,ke()];case 2:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return te(!1),Array.isArray(f)?[2]:(F(!1),[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.diskStorage.inputTableDelete(v(),n)]);case 1:return t.sent(),[4,ke()];case 2:return t.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=(0,r.Z)((function(){var e,t,i;return(0,o.__generator)(this,(function(a){switch(a.label){case 0:if(!Array.isArray(ye)||!ye.length||!u.length)return Me(),[2];ie(!0),e=!1,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,yi(ue,4,function(){var t=(0,r.Z)((function(t){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return i=t.map((function(e){for(var t={},n=0;n<ye.length;n++)ye[n].length&&(t[ye[n]]="undefined"===typeof e[n]?null:e[n]);return t})),!e&&xe&&(e=!0,i.shift()),[4,null===(r=window.sdk)||void 0===r?void 0:r.ipc.diskStorage.inputTableAdd(v(),n,i)];case 1:return o.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}(),100)];case 2:return a.sent(),[3,4];case 3:return t=a.sent(),Te.A.error("".concat(j.t("Error importing CSV"),": ").concat(null!==(i=t.message)&&void 0!==i?i:t)),[3,4];case 4:return Me(),[4,ke()];case 5:return a.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=(0,r.Z)((function(e){var t,n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(t=Array.isArray(e)&&e.length?e[0]:null,n=[],null===t)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,yi(t,4)];case 2:return n=o.sent(),[3,4];case 3:return r=o.sent(),Te.A.error("".concat(j.t("Error parsing CSV"),": ").concat(null!==(i=r.message)&&void 0!==i?i:r)),[3,4];case 4:return Array.isArray(n)&&n.length?(ce(t),fe(n),[2]):(Te.A.error(j.t("The CSV file is empty")),[2])}}))}));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return X(!1),ie(!1),ce(null),fe([]),ge(!1),Ze([]),[2]}))}));return function(){return e.apply(this,arguments)}}(),De=function(){b.current&&b.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},Fe=(0,i.Z)(u.map((function(e,t){return{flex:1,hideable:0!==t,field:e,renderCell:function(t){var n=t.row;return(0,a.jsx)(G.Z,{title:n[e],children:(0,a.jsx)(S.Z,{variant:"caption",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textTransform:"none",maxWidth:"100%"},children:n[e]})})},valueGetter:function(t){return t.row[e]}}}))).concat((0,i.Z)(null===f?[{width:40,field:"actions",hideable:!1,filterable:!1,headerName:j.t("Actions"),renderHeader:function(){return""},renderCell:function(e){var t=e.row;return(0,a.jsx)(k.Z,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:(0,a.jsx)(G.Z,{title:j.t("Delete row"),children:(0,a.jsx)(Ne.Z,{size:"small",onClick:function(e){e.preventDefault(),e.stopPropagation(),_e(t._id)},children:(0,a.jsx)(Le.Z,{fontSize:"small"})})})})}}]:[])),We=Y&&null!==ue?ye.length<=4?550:ye.length>=9?1150:550+120*(ye.length-4):750;return(0,a.jsxs)(k.Z,{sx:{width:"100%"},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex",justifyContent:"end",alignItems:"center",mb:3,mr:3},children:[L&&u.length&&T>1?(0,a.jsx)(Mr.Z,{count:T,page:P,onChange:function(){var e=(0,r.Z)((function(e,t){return(0,o.__generator)(this,(function(e){return[2,D(t)]}))}));return function(t,n){return e.apply(this,arguments)}}()}):null,null===f&&u.length?(0,a.jsxs)(a.Fragment,{children:[L?(0,a.jsx)(C.Z,{variant:U.length?"outlined":"contained",disabled:!L,className:!x||ae||Y||ee||null!=V?null:"pop",startIcon:(0,a.jsx)(me.Z,{}),size:"small",onClick:function(e){return q(e.currentTarget)},endIcon:(0,a.jsx)(vt.Z,{}),sx:{mr:3},children:j.t("Add")}):(0,a.jsx)(B.Z,{spacing:0,sx:{width:"90px",height:"20px",mr:3,my:"5px"}}),L?U.length?(0,a.jsx)(G.Z,{title:j.t("Clear table"),children:(0,a.jsx)(Ne.Z,{sx:{width:"30px",height:"30px"},onClick:function(){return te(!0)},children:(0,a.jsx)(Le.Z,{fontSize:"small"})})}):null:(0,a.jsx)(B.Z,{spacing:0,rounded:!0,sx:{width:"30px",height:"30px"}}),(0,a.jsxs)(Re.Z,{anchorEl:V,open:Boolean(V),onClose:function(){return q(null)},children:[(0,a.jsxs)(Oe.Z,{onClick:function(){le(!0),q(null)},children:[(0,a.jsx)(Or.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{sx:{ml:3},variant:"body2",children:j.t("Add row")})]}),(0,a.jsxs)(Oe.Z,{onClick:function(){X(!0),q(null)},children:[(0,a.jsx)(Dr.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{sx:{ml:3},variant:"body2",children:j.t("Import csv")})]})]})]}):null]}),(0,a.jsx)(pi,{sx:{"& .MuiDataGrid-row":{cursor:"pointer"}},onPageSizeChange:function(e){return _(e)},onRowClick:function(e){var t=e.row;return le(t)},rowsPerPageOptions:[10,25,50,100],disableSelectionOnClick:!0,getRowId:function(e){return e._id},pageSize:I,columns:Fe,loading:!L,rows:U,autoHeight:!0}),L&&u.length&&ae?(0,a.jsxs)(O.Z,{open:!0,onClose:re?function(){}:function(){return le(!1)},sx:{"& .MuiPaper-root":{width:"100%",maxWidth:750,p:2}},children:[re?null:(0,a.jsxs)(Pe.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[l,null===f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q.Z,{}),"object"===typeof ae?j.t("Edit row"):j.t("Add row")]}):null]}),(0,a.jsx)(N.Z,{children:re?(0,a.jsx)(B.Z,{}):(0,a.jsx)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),null===f&&("object"===typeof ae?Ie(e,ae._id):Ce(e))},ref:b,children:u.map((function(e,t){var n,r="object"===typeof ae&&null!==ae?null!==(n=ae[e])&&void 0!==n?n:"":null;return(0,a.jsx)(k.Z,{sx:{width:"100%",display:"flex",p:2},children:null===f?(0,a.jsx)(be.Z,{variant:"outlined",autoFocus:0===t,defaultValue:r,InputProps:{startAdornment:(0,a.jsx)(je.Z,{position:"start",children:(0,a.jsx)(Rr.Z,{fontSize:"small"})})},label:e,sx:{width:"100%"},id:"cell-".concat(e),name:e,onKeyDown:function(e){return"Enter"===e.key&&De()}}):(0,a.jsx)(G.Z,{title:e,placement:"left",children:(0,a.jsx)(gi,{variant:"caption",children:(0,a.jsx)("span",{children:r})})})},e)}))})}),re?null:(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{color:"secondary",onClick:function(){return le(!1)},sx:{mr:2},children:null===f?j.t("Cancel"):j.t("OK")}),null===f?(0,a.jsx)(C.Z,{variant:"contained",onClick:De,startIcon:"object"===typeof ae?(0,a.jsx)(Nr.Z,{}):(0,a.jsx)(Or.Z,{}),children:"object"===typeof ae?j.t("Save row"):j.t("Add row")}):null]})]}):null,L&&null===f&&u.length&&U.length&&ee?(0,a.jsxs)(O.Z,{open:!0,onClose:function(){return te(!1)},sx:{"& .MuiPaper-root":{p:2}},children:[(0,a.jsxs)(Pe.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[l,(0,a.jsx)(Q.Z,{}),j.t("Clear table")]}),(0,a.jsx)(N.Z,{children:(0,a.jsx)(we.Z,{severity:"warning",children:j.t("Are you sure you want to delete all data in this table?")})}),(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{color:"secondary",onClick:function(){return te(!1)},children:j.t("Cancel")}),(0,a.jsx)(C.Z,{color:"error",onClick:Ae,startIcon:(0,a.jsx)(Le.Z,{}),children:j.t("Clear table")})]})]}):null,L&&null===f&&u.length&&Y?(0,a.jsxs)(O.Z,{open:!0,onClose:re?function(){}:Me,fullWidth:!0,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:We,p:2}},children:[re?null:(0,a.jsxs)(Pe.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[l,(0,a.jsx)(Q.Z,{}),j.t("Import csv file")]}),(0,a.jsx)(N.Z,{children:re?(0,a.jsx)(B.Z,{}):null===ue?(0,a.jsx)(fi.Z,{handleFiles:Ee,extensions:["csv"],maxSize:Z().max.sourceCode.ioFieldTableSize}):(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(we.Z,{severity:"info",sx:{mb:3},children:j.t("Use this preview to match each column with the correct entries")}),(0,a.jsxs)(k.Z,{sx:{width:"100%",display:"flex",p:2,mb:3},children:[(0,a.jsx)(ft.Z,{id:"skip-first-row",value:xe,onChange:function(e){return ge(e.target.checked)}}),(0,a.jsx)(k.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",wordWrap:"break-word",overflowWrap:"anywhere",ml:2},children:(0,a.jsxs)(Tr.Z,{htmlFor:"skip-first-row",sx:{cursor:"pointer",userSelect:"none"},children:[(0,a.jsx)(S.Z,{variant:"body2",children:j.t("Do not import the first row")}),(0,a.jsx)(S.Z,{variant:"caption",children:j.t("Check this if the first row in your csv file is a header row")})]})})]}),(0,a.jsxs)(hi,{children:[(0,a.jsx)(Lr.Z,{tooltip:!0,tooltipEmpty:j.t("Column not imported"),tooltipPrefix:j.t("Column imported as"),highlight:!0,maxContent:!0,items:ye,setItems:Ze,sx:{width:"115px",minWidth:"115px",mr:1}}),(Array.isArray(pe)?pe:[]).map((function(e,t){return Array.isArray(e)?(0,a.jsx)(G.Z,{title:xe&&0===t?j.t("Row not imported"):null,placement:"left",children:(0,a.jsx)(xi,{children:(0,i.Z)(e).concat((0,i.Z)(new Array(Se()-e.length).fill(""))).map((function(e,n){return(0,a.jsx)(mi,{removed:xe&&0===t,excluded:xe&&0===t||!ye[n],children:e},n)}))})},t):null}))]})]})}),re?null:(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{color:"secondary",onClick:Me,children:j.t("Cancel")}),null!==ue?(0,a.jsx)(C.Z,{variant:"contained",onClick:ze,startIcon:(0,a.jsx)(Dr.Z,{}),children:j.t("Import csv file")}):null]})]}):null]})})),ji=Zi,bi=n(76530),wi=n(82032),ki=n(828),Si=function(e){var t=e.sx,n=(e.container,(0,c.useRef)(null)),r=(0,c.useState)(!1),i=r[0],o=r[1];"object"===typeof t&&null!==t||(t={}),(0,c.useEffect)((function(){var e,t=null!==(e=null===t||void 0===t?void 0:t.current)&&void 0!==e?e:null,r=new IntersectionObserver((function(e){(0,ki.Z)(e,1)[0].isIntersecting&&(o(!0),r.disconnect())}),{root:t,threshold:.1});return r.observe(n.current),function(){return r.disconnect()}}),[]);var l=i&&"string"===typeof t.backgroundImage?t.backgroundImage:"none";return(0,a.jsx)(k.Z,{ref:n,sx:(0,He.Z)((0,P.Z)({},t),{backgroundImage:l})})},Ci=["png","apng","jpg","jpeg","gif","svg","webp","avif","bmp","tif","tiff","ico"],Ii=function(e){var t=e.onDelete,n=e.filePaths,i=void 0===n?[]:n,l=e.sx,s=void 0===l?{}:l,u=e.children,d=void 0===u?null:u,p=e.maxCount,f=void 0===p?null:p,h=e.tooltip,x=void 0===h?null:h,m=(0,c.useRef)(null),v=(0,g.$)().i18n,y=(0,w.Z)();"object"===typeof s&&null!==s||(s={});var Z=function(){var e=(0,r.Z)((function(e){var t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,null===(t=window.sdk)||void 0===t?void 0:t.ipc.device.showFileInFolder(e)];case 1:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)((function(e,n){return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return e.preventDefault(),e.stopPropagation(),"function"!==typeof t?[3,2]:[4,t(n)];case 1:r.sent(),r.label=2;case 2:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();return(0,a.jsxs)(k.Z,{sx:(0,P.Z)({border:"1px solid ".concat(y.palette.divider),borderRadius:1,p:3,position:"relative",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},s),children:[Array.isArray(i)&&i.length?(0,a.jsx)(ne.ZP,{container:!0,spacing:3,ref:m,children:i.map((function(e,n){var r=e.replace(/[\\\/]+$/g,"").replace(/[\\\/]+/g,"/").split("/").pop(),i=r.replace(/^.*\./g,"").toLowerCase();return(0,a.jsx)(ne.ZP,{item:!0,children:(0,a.jsx)(G.Z,{title:e,enterDelay:250,enterNextDelay:250,children:(0,a.jsxs)(k.Z,{sx:{width:90,display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,a.jsxs)(C.Z,{onClick:function(){return Z(e)},sx:{width:"100%",height:120,overflow:"hidden",position:"relative",zIndex:0},children:["function"===typeof t?(0,a.jsx)(Ne.Z,{component:"div",onClick:function(t){return j(t,e)},sx:{position:"absolute",top:2,right:2,"&:hover":{color:y.palette.error.main}},children:(0,a.jsx)(Le.Z,{fontSize:"small"})}):null,Ci.includes(i)?(0,a.jsx)(Si,{sx:{width:"100%",height:"100%",backgroundImage:"url('".concat((0,bi.qm)(e),"')"),backgroundSize:"contain",backgroundPosition:"50%",backgroundRepeat:"no-repeat"},container:m}):(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[(0,a.jsx)(wi.Z,{fontSize:"large",sx:{mb:2}}),(0,a.jsx)(S.Z,{variant:"caption",color:"primary",sx:{fontSize:"0.9rem",lineHeight:"0.9rem",fontFamily:"Inconsolata,monospace"},children:i})]})]}),(0,a.jsx)(S.Z,{variant:"caption",sx:{mt:1,userSelect:"none",fontFamily:"Yaldevi, sans-serif",textAlign:"center",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",whiteSpace:"normal",wordBreak:"break-word",overflow:"hidden",textOverflow:"ellipsis",textTransform:"none",maxWidth:"100%",lineHeight:"1rem",maxHeight:"2.4rem"},children:r})]})})},n)}))}):(0,a.jsx)(k.Z,{sx:{userSelect:"none",display:"flex",ml:3,mt:3,width:"100%",height:25,alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(S.Z,{variant:"caption",children:v.t("No files selected")})}),d&&(!Number.isInteger(f)||i.length<f)?(0,a.jsx)(k.Z,{sx:{mt:3},children:d}):null,(0,a.jsx)(k.Z,{sx:{mt:3,display:"flex",justifyContent:"end",position:"sticky",bottom:"8px",right:0},children:(0,a.jsx)(G.Z,{title:x,placement:"left",children:(0,a.jsx)(se.Z,{variant:"outlined",sx:{"&:hover":{background:y.palette.background.paper}},label:(0,a.jsx)(S.Z,{variant:"caption",children:Number.isInteger(f)?"".concat(i.length," / ").concat(f," ").concat(v.t("files")):"".concat(i.length," ").concat(1===i.length?v.t("file"):v.t("files"))})})})})]})},_i=n(92090),Ai=function(e){var t=e.agents,n=(0,p.O)(),l=n.getAgentId,s=n.onAgentId,u=n.getSource,d=n.onSource,x=n.getInputs,m=n.onInputs,v=n.inputsSetScalars,y=n.inputsAddFiles,j=n.inputsDeleteFile,b=(0,g.$)().i18n,w=(0,c.useRef)(null),C=(0,c.useRef)(null),I=(0,c.useRef)({}),_=(0,c.useRef)([]),A=(0,c.useRef)(null),T=(0,c.useState)(f(t,l())),z=T[0],E=T[1],M=(0,c.useState)(!1),N=M[0],O=M[1],D=(0,c.useState)([]),R=D[0],L=D[1],F=(0,c.useState)({}),W=F[0],U=F[1];(0,c.useEffect)((function(){O(!1),"string"===typeof(null===z||void 0===z?void 0:z.id)&&(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,u(z.id)];case 1:return _.current=null!==(t=null===(e=n.sent())||void 0===e?void 0:e.srcInputs)&&void 0!==t?t:[],L(_.current),[4,x(z.id,!0)];case 2:return U.apply(void 0,[n.sent()]),O(!0),[2]}}))}))();var e=d(function(){var e=(0,r.Z)((function(e){var t,n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.agentId,n=e.sourceCode,t!==(null===z||void 0===z?void 0:z.id)?[3,2]:(I.current={},JSON.stringify(_.current)!==JSON.stringify(null!==(r=null===n||void 0===n?void 0:n.srcInputs)&&void 0!==r?r:[])?(O(!1),_.current=null!==(i=null===n||void 0===n?void 0:n.srcInputs)&&void 0!==i?i:[],L(_.current),[4,x(t,!0)]):[3,2]);case 1:U.apply(void 0,[o.sent()]),window.setTimeout((function(){return O(!0)}),50),o.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()),t=m((function(e){var t=e.agentId,n=e.inputs;t===(null===z||void 0===z?void 0:z.id)&&U(n)}));return function(){e(),t()}}),[z]);var B=function(){A.current&&A.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},$=function(){var e=(0,r.Z)((function(e){var t,n,r,i,a,l,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(e.preventDefault(),"string"!==typeof(null===z||void 0===z?void 0:z.id))return[2];t=new FormData(e.target),n={},r=!0,i=!1,a=void 0;try{for(l=R[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)if(u=s.value,!["files","table"].includes(u.type))switch(u.type){case"int":n[u.key]=parseInt(t.get(u.key),10),isNaN(n[u.key])&&delete n[u.key];break;case"string":n[u.key]=t.get(u.key);break;case"bool":n[u.key]="on"===t.get(u.key)}}catch(c){i=!0,a=c}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return[4,v(z.id,n)];case 1:return o.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){E(f(t,l()));var e=s((function(e){return E(f(t,e))}));return function(){e()}}),[t]),(0,c.useEffect)((function(){N&&window.setTimeout((function(){B()}),200)}),[N]);var H=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return null!==w.current&&window.clearTimeout(w.current),w.current=window.setTimeout((function(){B(),w.current=null}),250),[2]}))}));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,r.Z)((function(e,t){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return Array.isArray(t)&&t.length?[4,y(l(),e,t.map((function(e){return e.path})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)((function(e,t){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,j(l(),e,t)];case 1:return n.sent(),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();return C.current=null,(0,a.jsx)(k.Z,{sx:{display:"flex",justifyContent:"center",width:"100%",height:"100%"},children:N?Array.isArray(R)&&R.length?(0,a.jsx)(k.Z,{sx:{width:"100%",maxWidth:"calc(1200px)",height:"100%",pb:3},children:(0,a.jsx)("form",{onSubmit:$,ref:A,children:R.map((function(e){var t,n,r=function(e){var t,n="files"===e.type?[]:null!==(t=e.default)&&void 0!==t?t:"";if("undefined"===typeof I.current[e.key]){var r=W[e.key];switch(e.type){case"int":Number.isInteger(r)||(r=n);break;case"string":"string"!==typeof r&&(r=n);break;case"bool":"boolean"!==typeof r&&(r=n);break;case"files":Array.isArray(r)||(r=n)}I.current[e.key]=r}return I.current[e.key]}(e),o=h(R,e.key,W),l=o.fieldShown,s=o.fieldEmpty;return null===C.current&&s&&"undefined"===typeof e.default&&(C.current=e.id),(0,a.jsxs)(k.Z,{sx:{width:"100%",display:l?"flex":"none",px:6,py:3},children:[(0,a.jsx)(k.Z,{sx:{width:"250px",flex:"0 0 250px",display:"flex",flexDirection:"column",justifyContent:"center",wordWrap:"break-word",overflowWrap:"anywhere",pr:3},children:(0,a.jsxs)(Tr.Z,{htmlFor:"field-".concat(e.id),sx:{cursor:!["int","string","bool"].includes(e.type)||Array.isArray(e.options)&&e.options.length?"default":"pointer"},children:[(0,a.jsx)(S.Z,{variant:"body2",children:null!==(t=e.name)&&void 0!==t?t:e.key}),e.desc?(0,a.jsx)(S.Z,{variant:"caption",children:e.desc}):null]})}),(0,a.jsx)(k.Z,{sx:{width:"100%"},children:["string","int"].includes(e.type)?Array.isArray(e.options)&&e.options.length?(0,a.jsx)(zr.Z,{fullWidth:!0,displayEmpty:!0,renderValue:function(e){return e||(0,a.jsx)(S.Z,{variant:"caption",children:b.t("Select an option")})},name:e.key,defaultValue:null!==r&&void 0!==r?r:"",className:C.current===e.id?"pop":"",inputProps:{id:"field-".concat(e.id)},onChange:function(t){return H(e.key,t.target.value)},children:e.options.map((function(e){return(0,a.jsx)(Oe.Z,{value:e,children:(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center"},children:e})},e)}))}):(0,a.jsx)(G.Z,{title:"int"===e.type?(0,i.Z)(Number.isInteger(e.min)?[b.t("Minimum: {{n}}",{n:e.min})]:[]).concat((0,i.Z)(Number.isInteger(e.max)?[b.t("Maximum: {{n}}",{n:e.max})]:[])).join(", "):(0,i.Z)(Number.isInteger(e.min)?[1===e.min?b.t("Required"):b.t("Minimum length: {{n}}",{n:e.min})]:[]).concat((0,i.Z)(Number.isInteger(e.max)?[b.t("Maximum length: {{n}}",{n:e.max})]:[])).join(", "),children:(0,a.jsx)(be.Z,{id:"field-".concat(e.id),className:C.current===e.id?"pop":"",name:e.key,InputLabelProps:{shrink:!0},sx:{width:"100%","& .MuiInputBase-multiline":{py:3},"& textarea":{p:"0 !important"}},defaultValue:r,placeholder:"".concat(null!==(n=e.default)&&void 0!==n?n:""),onChange:function(t){return H(e.key,t.target.value)},type:"int"===e.type?"number":"string",inputMode:"int"===e.type?"numeric":"text",multiline:"string"===e.type,onKeyDown:function(e){return"Enter"===e.key&&e.ctrlKey&&B()},maxRows:3,inputProps:(0,P.Z)({},"int"===e.type?{min:e.min,max:e.max}:{minLength:e.min,maxLength:e.max})})}):"bool"===e.type?(0,a.jsx)(ft.Z,{id:"field-".concat(e.id),name:e.key,defaultChecked:!!r,onChange:function(t){return H(e.key,t.target.value)}}):"files"===e.type?(0,a.jsx)(Ii,{maxCount:Z().max.sourceCode.ioInputFileCount,onDelete:function(t){return q(e.key,t)},filePaths:Array.isArray(W[e.key])?W[e.key]:r,sx:{mb:3},children:(0,a.jsx)(fi.Z,{multiple:!0,pop:C.current===e.id,maxCount:Z().max.sourceCode.ioInputFileCount,minSize:null===e||void 0===e?void 0:e.min,maxSize:null===e||void 0===e?void 0:e.max,extensions:Array.isArray(null===e||void 0===e?void 0:e.extensions)?e.extensions:["txt"],withPaths:!0,handleFiles:function(t){return V(e.key,t)}})}):"table"===e.type?(0,a.jsx)(ji,{pop:C.current===e.id,fieldKey:e.key,fieldName:e.name,fieldColumns:e.columns}):null})]},"".concat(e.id,"-").concat(e.type))}))})}):(0,a.jsx)(k.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(_i.default,{title:b.t("No inputs"),message:b.t("This module has no settings to configure"),sx:{"&.content-center":{minHeight:"100%"}}})}):(0,a.jsx)(k.Z,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,a.jsx)($t.Z,{grey:!0,size:128,className:"zoom-in"})})})},Ti=n(69368),zi=n(77533),Ei=n(63635),Pi=n(79794),Mi=n(52701),Ni=function(e){var t=e.runsAll,n=void 0===t?[]:t,i=e.runsFiltered,l=void 0===i?[]:i,s=e.runsExcluded,u=void 0===s?[]:s,c=e.open,d=void 0!==c&&c,f=e.loaded,h=void 0!==f&&f,x=e.onClose,m=void 0===x?function(){}:x,v=e.onDelete,y=void 0===v?(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return[2]}))})):v,Z=(0,p.O)(),j=Z.setFiltersRuns,b=Z.getAgentId,C=(0,g.$)().i18n,I=(0,w.Z)(),_=0===u.length?Pi.Z:l.length>=n.length?Ei.Z:Mi.Z,A=function(e){u.includes(e)?u=u.filter((function(t){return t!==e})):u.push(e),j(b(),u)},T=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return"function"!==typeof y?[3,2]:[4,y(e)];case 1:t.sent(),t.label=2;case 2:return u=u.filter((function(t){return t!==e})),j(b(),u),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,a.jsx)(zi.ZP,{anchor:"left",open:d,onClose:m,ModalProps:{disablePortal:!0},sx:{"&.MuiDrawer-root":{position:"absolute"}},PaperProps:{sx:{position:"absolute"}},children:(0,a.jsxs)(k.Z,{sx:{width:350,flexDirection:"column",position:"relative",zIndex:1,height:"100%"},children:[(0,a.jsxs)(k.Z,{sx:{px:4,width:"100%",height:50,display:"flex",justifyContent:"space-between",alignItems:"center",background:I.palette.background.paper,zIndex:1},children:[(0,a.jsx)(G.Z,{title:0===u.length?C.t("Deselect all"):C.t("Select all"),placement:"left",children:(0,a.jsx)(k.Z,{children:(0,a.jsx)(Ne.Z,{disabled:!h,onClick:function(){0!==u.length?j(b(),[]):j(b(),n.filter((function(e){return!l.includes(e)})))},sx:{width:40,height:40},children:(0,a.jsx)(_,{})})})}),(0,a.jsx)(G.Z,{title:C.t("Close"),placement:"left",children:(0,a.jsx)(Ne.Z,{onClick:m,sx:{width:40,height:40},children:(0,a.jsx)(Sn.Z,{})})})]}),(0,a.jsx)(k.Z,{sx:{width:"100%",minHeight:50,height:"calc(100% - 50px)",px:4,py:2,overflowY:"auto"},children:Array.isArray(n)&&n.length?n.map((function(e){var t=1e3*parseInt("".concat(e).trim().split("-").pop(),10),n=l.includes(e)&&!u.includes(e);return(0,a.jsxs)(k.Z,{sx:{my:1,display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsx)(G.Z,{title:n?C.t("Run excluded by filters"):null,placement:"left",children:(0,a.jsxs)(k.Z,{sx:{userSelect:"none",display:"flex",alignItems:"center"},children:[(0,a.jsx)(Ti.Z,{disabled:!h||n,checked:!l.includes(e),onClick:function(){return A(e)}}),h?(0,a.jsx)(S.Z,{onClick:function(){return h&&!n&&A(e)},variant:"caption",sx:(0,P.Z)({},n?{textDecoration:"line-through"}:{cursor:"pointer"}),children:isNaN(t)?e:at(t,"en",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}):(0,a.jsx)(k.Z,{sx:{width:200,height:20},children:(0,a.jsx)(B.Z,{spacing:0})})]})}),(0,a.jsx)(G.Z,{title:C.t("Delete run"),placement:"left",children:(0,a.jsx)(Ne.Z,{onClick:function(){return T(e)},disabled:!h,sx:{width:40,height:40},children:(0,a.jsx)(Le.Z,{fontSize:"small"})})})]},e)})):(0,a.jsx)(we.Z,{variant:"info",children:C.t("No runs found")})})]})})},Oi=n(82670),Di=(0,b.ZP)(k.Z)((function(e){var t,n=e.theme;return{"& .react-datepicker-popper":{zIndex:5},"& .react-datepicker-wrapper":{width:"100%"},"& .react-datepicker":(t={padding:n.spacing(2,0),color:n.palette.text.primary,borderRadius:n.shape.borderRadius,fontFamily:n.typography.fontFamily,backgroundColor:n.palette.background.paper,boxShadow:n.shadows["bordered"===q.Z.skin?0:7],border:"bordered"===q.Z.skin?"1px solid ".concat(n.palette.divider):"none","& .react-datepicker__header":{padding:0,border:"none",fontWeight:400,backgroundColor:n.palette.background.paper,"& .react-datepicker__day-name":{margin:0}},"& .react-datepicker-year-header":{lineHeight:2.1,marginBottom:"0.5rem",color:n.palette.text.primary},"& .react-datepicker__triangle":{display:"none"},"& > .react-datepicker__navigation":{top:n.spacing(3),"&.react-datepicker__navigation--previous":{border:"none",backgroundImage:"".concat("url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' style=\\'width:24px;height:24px\\' viewBox=\\'0 0 24 24\\'%3E%3Cpath fill=\\'currentColor\\' d=\\'M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z\\' /%3E%3C/svg%3E')".replace("currentColor",n.palette.text.secondary).replace("#","%23")),height:"24px",width:"24px","& .react-datepicker__navigation-icon":{display:"none"}},"&.react-datepicker__navigation--next":{border:"none",backgroundImage:"".concat("url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' style=\\'width:24px;height:24px\\' viewBox=\\'0 0 24 24\\'%3E%3Cpath fill=\\'currentColor\\' d=\\'M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z\\' /%3E%3C/svg%3E')".replace("currentColor",n.palette.text.secondary).replace("#","%23")),height:"24px",width:"24px","& .react-datepicker__navigation-icon":{display:"none"}},"&.react-datepicker__navigation--next--with-time":{right:"122px"},"&:focus, &:active":{outline:0}},"& .react-datepicker__current-month":{lineHeight:2.1,fontSize:"1rem",fontWeight:400,letterSpacing:"0.15px",marginBottom:n.spacing(2),color:n.palette.text.primary},"& .react-datepicker__day-name":{lineHeight:1.5,width:"2.25rem",fontSize:"0.75rem",letterSpacing:"0.4px",color:n.palette.text.secondary},"& .react-datepicker__day":{margin:0,width:"2.25rem",lineHeight:2.75,height:"2.25rem",borderRadius:"50%",color:n.palette.text.primary,"&.react-datepicker__day--selected, &.react-datepicker__day--keyboard-selected":{color:n.palette.common.white,backgroundColor:"".concat(n.palette.primary.main," !important")},"&.react-datepicker__day--in-range, &.react-datepicker__day--in-selecting-range":{borderRadius:0,color:n.palette.primary.main,backgroundColor:"".concat((0,Zr.E)(n.palette.primary.main,.06)," !important"),"&:empty":{backgroundColor:"transparent !important"}},"&.react-datepicker__day--selected.react-datepicker__day--in-selecting-range.react-datepicker__day--selecting-range-start, &.react-datepicker__day--selected.react-datepicker__day--range-start.react-datepicker__day--in-range, &.react-datepicker__day--range-start":{borderTopLeftRadius:"50%",borderBottomLeftRadius:"50%",color:n.palette.common.white,backgroundColor:"".concat(n.palette.primary.main," !important")},"&.react-datepicker__day--range-end":{borderTopRightRadius:"50%",borderBottomRightRadius:"50%",color:n.palette.common.white,backgroundColor:"".concat(n.palette.primary.main," !important")},"&:focus, &:active":{outline:0},"&.react-datepicker__day--outside-month":{height:"auto"},"&.react-datepicker__day--outside-month, &.react-datepicker__day--disabled:not(.react-datepicker__day--selected)":{color:n.palette.text.disabled,"&:hover":{backgroundColor:"transparent"}},"&.react-datepicker__day--highlighted, &.react-datepicker__day--highlighted:hover":{color:n.palette.success.main,backgroundColor:(0,Zr.E)(n.palette.success.main,.12)},"&.react-datepicker__day--today":{fontWeight:400}},"& .react-datepicker__header__dropdown":{"& .react-datepicker__month-dropdown-container:not(:last-child)":{marginRight:n.spacing(8)},"& .react-datepicker__month-dropdown-container, & .react-datepicker__year-dropdown-container":{marginBottom:n.spacing(4)},"& .react-datepicker__month-read-view--selected-month, & .react-datepicker__year-read-view--selected-year":{fontSize:"0.875rem",marginRight:n.spacing(1),color:n.palette.text.primary},"& .react-datepicker__month-read-view:hover .react-datepicker__month-read-view--down-arrow, & .react-datepicker__year-read-view:hover .react-datepicker__year-read-view--down-arrow":{borderTopColor:n.palette.text.secondary,borderRightColor:n.palette.text.secondary},"& .react-datepicker__month-read-view--down-arrow, & .react-datepicker__year-read-view--down-arrow":{top:4,borderTopColor:n.palette.text.disabled,borderRightColor:n.palette.text.disabled},"& .react-datepicker__month-dropdown, & .react-datepicker__year-dropdown":{paddingTop:n.spacing(1.5),paddingBottom:n.spacing(1.5),borderColor:n.palette.divider,borderRadius:n.shape.borderRadius,backgroundColor:n.palette.background.paper,boxShadow:"light"===n.palette.mode?n.shadows[8]:n.shadows[9]},"& .react-datepicker__month-option, & .react-datepicker__year-option":{paddingTop:n.spacing(.5),paddingBottom:n.spacing(.5),"&:hover":{backgroundColor:n.palette.action.hover}},"& .react-datepicker__month-option.react-datepicker__month-option--selected_month":{backgroundColor:(0,Zr.E)(n.palette.primary.main,.08),"&:hover":{backgroundColor:(0,Zr.E)(n.palette.primary.main,.12)},"& .react-datepicker__month-option--selected":{display:"none"}},"& .react-datepicker__year-option.react-datepicker__year-option--selected_year":{backgroundColor:(0,Zr.E)(n.palette.primary.main,.08),"&:hover":{backgroundColor:(0,Zr.E)(n.palette.primary.main,.12)},"& .react-datepicker__year-option--selected":{display:"none"}},"& .react-datepicker__year-option":{"& .react-datepicker__navigation--years-upcoming":{width:9,height:9,borderStyle:"solid",borderWidth:"3px 3px 0 0",transform:"rotate(-45deg)",borderTopColor:n.palette.text.disabled,borderRightColor:n.palette.text.disabled,margin:"".concat(n.spacing(2.75)," auto ").concat(n.spacing(0))},"&:hover .react-datepicker__navigation--years-upcoming":{borderTopColor:n.palette.text.secondary,borderRightColor:n.palette.text.secondary},"& .react-datepicker__navigation--years-previous":{width:9,height:9,borderStyle:"solid",borderWidth:"0 0 3px 3px",transform:"rotate(-45deg)",borderLeftColor:n.palette.text.disabled,borderBottomColor:n.palette.text.disabled,margin:"".concat(n.spacing(0)," auto ").concat(n.spacing(2.75))},"&:hover .react-datepicker__navigation--years-previous":{borderLeftColor:n.palette.text.secondary,borderBottomColor:n.palette.text.secondary}}},"& .react-datepicker__month":{marginTop:n.spacing(3)}},(0,R.Z)(t,n.breakpoints.down("sm"),{"& .react-datepicker__month":{marginLeft:0,marginRight:0,marginBottom:0}}),(0,R.Z)(t,"& .react-datepicker__month, & .react-datepicker__year",{"& .react-datepicker__month-text, & .react-datepicker__year-text, & .react-datepicker__quarter-text":{height:"2rem",alignItems:"center",display:"inline-flex",justifyContent:"center","&:hover":{borderRadius:n.shape.borderRadius},"&:focus, &:active":{outline:0}},"& .react-datepicker__quarter--selected, & .react-datepicker__year-text--selected, & .react-datepicker__month--selected, & .react-datepicker__quarter-text--keyboard-selected, & .react-datepicker__month-text--keyboard-selected, & .react-datepicker__year-text--keyboard-selected":{color:n.palette.common.white,borderRadius:n.shape.borderRadius,backgroundColor:"".concat(n.palette.primary.main," !important")},"& .react-datepicker__week-number":{fontWeight:600,color:n.palette.text.primary}}),(0,R.Z)(t,"& .react-datepicker__year-wrapper",{maxWidth:205,justifyContent:"center"}),(0,R.Z)(t,"& .react-datepicker__input-time-container",(0,P.Z)({display:"flex",alignItems:"center"},"rtl"===n.direction?{flexDirection:"row-reverse"}:{})),(0,R.Z)(t,"& .react-datepicker__today-button",{borderRadius:"1rem",margin:"0 1rem 0.3rem",color:n.palette.common.white,backgroundColor:n.palette.primary.main}),(0,R.Z)(t,"& .react-datepicker__time-container",{borderLeftColor:n.palette.divider}),(0,R.Z)(t,"&.react-datepicker--time-only, & .react-datepicker__time-container",{width:"7rem",padding:n.spacing(1.2,0),"& .react-datepicker-time__header":{marginBottom:n.spacing(3),color:n.palette.text.primary,fontSize:n.typography.body2.fontSize},"& .react-datepicker__time":{background:n.palette.background.paper,"& .react-datepicker__time-box .react-datepicker__time-list-item--disabled":{color:n.palette.text.disabled}},"& .react-datepicker__time-list-item":{lineHeight:1.75,height:"auto !important",marginLeft:n.spacing(3.2),marginRight:n.spacing(1.2),color:n.palette.text.primary,borderRadius:n.shape.borderRadius,"&:focus, &:active":{outline:0},"&:hover":{backgroundColor:"".concat(n.palette.action.hover," !important")},"&.react-datepicker__time-list-item--selected":{color:"".concat(n.palette.common.white," !important"),backgroundColor:"".concat(n.palette.primary.main," !important")}},"& .react-datepicker__time-box":{width:"100%"},"& .react-datepicker__time-list":{"&::-webkit-scrollbar":{width:8},"&::-webkit-scrollbar-track":{background:n.palette.background.paper},"&::-webkit-scrollbar-thumb":{background:"#aaa",borderRadius:"10px"},"&::-webkit-scrollbar-thumb:hover":{background:"#999"}}}),(0,R.Z)(t,"&.react-datepicker--time-only .react-datepicker__time-container",{width:"calc(7rem - 2px)"}),(0,R.Z)(t,"& .react-datepicker__day:hover, & .react-datepicker__month-text:hover, & .react-datepicker__quarter-text:hover, & .react-datepicker__year-text:hover",{backgroundColor:n.palette.action.hover}),t),"& .react-datepicker__close-icon":(0,He.Z)((0,P.Z)({paddingRight:n.spacing(4)},"rtl"===n.direction?{right:0,left:"auto"}:{}),{"&:after":{width:"unset",height:"unset",fontSize:"1.5rem",color:n.palette.text.primary,backgroundColor:"transparent !important"}})}})),Ri=n(9198),Li=n.n(Ri),Fi=n(72622),Wi=n(97395),Ui=n(54108),Bi=n(15777),$i=n(3045),Hi=n(58754),Vi=n(6538),qi=(0,b.ZP)(k.Z)((function(){return{display:"flex",width:"250px",flex:"0 0 250px",height:"50px"}})),Ki=(0,b.ZP)(k.Z)((function(){return{display:"flex",width:"100%"}})),Yi=(0,b.ZP)(k.Z)((function(){return{display:"flex",width:"100%",height:"50px",alignItems:"center"}})),Gi=function(e){var t=e.startTime,n=void 0===t?null:t,r=e.endTime,i=void 0===r?null:r,o=e.setStartTime,l=void 0===o?function(){}:o,s=e.setEndTime,u=void 0===s?function(){}:s,d=e.loaded,f=void 0!==d&&d,h=e.runsToggle,x=void 0===h?function(){}:h,m=e.showFilters,v=void 0!==m&&m,y=e.runsFiltered,Z=void 0===y?0:y,j=e.runsTotal,b=void 0===j?0:j,w=e.runsLoaded,I=void 0===w?0:w,_=(0,p.O)(),A=_.getFilters,T=_.setFiltersFields,z=_.getAgentId,E=(0,g.$)().i18n,P=(0,c.useState)("today"),M=P[0],N=P[1],O=A(z()).fields,D=[{value:"today",title:E.t("Today"),Icon:Vi.Z},{value:"yesterday",title:E.t("Yesterday"),Icon:Wi.Z},{value:"last-7",title:E.t("Last 7 days"),Icon:Hi.Z},{value:"last-30",title:E.t("Last 30 days"),Icon:$i.Z},{value:"custom",title:E.t("Custom"),Icon:Bi.Z}],R=I-Z.length,L="object"===typeof O&&null!=O?Object.keys(O).length:0;return(0,a.jsxs)(Yi,{children:[(0,a.jsx)(qi,{sx:{ml:4,pr:2,justifyContent:"space-between",alignItems:"center"},children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center"},children:(0,a.jsx)(G.Z,{title:E.t("Manually exclude runs from the current report"),children:(0,a.jsx)(C.Z,{onClick:x,size:"small",startIcon:(0,a.jsx)(Ui.Z,{fontSize:"small"}),children:E.t("Runs list")})})}),L>0?(0,a.jsx)(G.Z,{title:E.t("Clear all filters"),children:(0,a.jsx)(Ne.Z,{sx:{width:30,height:30},onClick:function(){return T(z(),{})},children:(0,a.jsx)(Fi.Z,{fontSize:"small"})})}):null]}):null}),(0,a.jsxs)(Ki,{sx:{justifyContent:"end",alignItems:"center",mr:5},children:[f?(0,a.jsx)(G.Z,{title:"".concat(E.t("Runs shown: {{runsShown}} of {{runsLoaded}}",{runsShown:R,runsLoaded:I})).concat(0===L?" "+E.t("(no filters)"):"").concat(b>I?". "+E.t("{{runsTotal}} runs were found for this interval, but only the last {{runsLoaded}} runs are shown.",{runsLoaded:I,runsTotal:b}):""),children:(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center",height:"30px"},children:(0,a.jsxs)(S.Z,{sx:{color:b>I?"warning.main":"inherit",userSelect:"none",fontSize:"0.75rem",mr:2},children:["".concat(R," / ").concat(I),b>I?" (".concat(b,")"):""]})})}):null,f&&"custom"===M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(G.Z,{title:E.t("Start time"),children:(0,a.jsx)(Di,{children:(0,a.jsx)(Li(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,selected:Number.isInteger(n)?new Date(1e3*n):new Date(Date.now()-864e5),dateFormat:"yyyy-MM-dd HH:mm",onChange:function(e){return function(e){(0,Oi.Z)(e,Date)&&l(Math.floor(e.getTime()/1e3))}(e)},customInput:(0,a.jsx)(be.Z,{sx:{width:160,"& .MuiInput-input":{height:50,py:0,px:2,textAlign:"center",fontSize:"0.75rem"},"& .MuiInput-root:before":{display:"none"}},variant:"standard"})})})}),(0,a.jsx)(S.Z,{variant:"caption",children:(0,a.jsx)(Q.Z,{fontSize:"small",sx:{mt:2}})}),(0,a.jsx)(G.Z,{title:E.t("End time"),children:(0,a.jsx)(Di,{children:(0,a.jsx)(Li(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,selected:Number.isInteger(i)?new Date(1e3*i):new Date,dateFormat:"yyyy-MM-dd HH:mm",onChange:function(e){return function(e){(0,Oi.Z)(e,Date)&&u(Math.floor(e.getTime()/1e3))}(e)},customInput:(0,a.jsx)(be.Z,{sx:{width:160,"& .MuiInput-input":{height:50,py:0,px:2,textAlign:"center",fontSize:"0.75rem"},"& .MuiInput-root:before":{display:"none"}},variant:"standard"})})})})]}):null,(0,a.jsx)(zr.Z,{sx:{height:50,ml:5,mr:1,"&.MuiInput-root:before":{display:"none"}},inputProps:{sx:{pl:2}},variant:"standard",onChange:function(e){return function(e){N(e);var t=Math.floor((new Date).setHours(0,0,0,0)/1e3);switch(e){case"today":l(t),u(null);break;case"yesterday":l(t-86400),u(t-1);break;case"last-7":l(t-604800),u(null);break;case"last-30":l(t-2592e3),u(null)}}(e.target.value)},value:M,children:D.map((function(e){var t=e.value,n=e.title,r=e.Icon;return(0,a.jsx)(Oe.Z,{value:t,sx:{py:0},children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",p:0,height:40},children:["undefined"!==typeof r?(0,a.jsx)(r,{fontSize:"small",sx:{mr:2}}):null,(0,a.jsx)(S.Z,{variant:"caption",color:"inherit",children:n})]})},t)}))})]})]})},Xi=function(e){var t=e.field,n=e.loaded,r=void 0!==n&&n,i=(0,p.O)(),o=i.getFilters,l=i.setFiltersFields,s=i.onFilters,u=i.getAgentId,d=(0,g.$)().i18n,f=(0,c.useRef)(null),h=(0,c.useState)(o(u())),x=h[0],m=h[1],v=(0,c.useState)(""),y=v[0],Z=v[1];(0,c.useEffect)((function(){var e=s((function(e){var t=e.agentId,n=e.filters;u()===t&&m(n)}));return function(){e()}}),[]),(0,c.useEffect)((function(){Z("object"===typeof(null===x||void 0===x?void 0:x.fields)&&null!==x.fields&&"string"===typeof x.fields[t.key]?x.fields[t.key]:"")}),[x]);return"string"===t.type?(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(G.Z,{title:d.t("Filter by text value"),children:(0,a.jsx)(bn.Z,{fontSize:"small",sx:{mr:2},color:"disabled"})}),(0,a.jsx)(be.Z,{sx:{width:"100%","& input":{px:"5px !important",fontSize:"0.75rem"}},placeholder:d.t("Filter"),variant:"standard",disabled:!r,value:y,onChange:function(e){return n=e.target.value.toLowerCase(),Z(n),null!==f.current&&window.clearTimeout(f.current),void(f.current=window.setTimeout((function(){"object"===typeof x.fields&&null!==x.fields&&(l(u(),(0,He.Z)((0,P.Z)({},x.fields),(0,R.Z)({},t.key,n))),f.current=null)}),250));var n}})]}),y.length?(0,a.jsx)(G.Z,{title:d.t("Clear filter"),children:(0,a.jsx)(Ne.Z,{sx:{width:30,height:30},onClick:function(){if("object"===typeof x.fields&&null!==x.fields&&"undefined"!==typeof x.fields[t.key]){Z("");var e=structuredClone(x.fields);delete e[t.key],l(u(),e)}},children:(0,a.jsx)(gn.Z,{fontSize:"small"})})}):null]}):null},Qi=n(68540),Ji=function(e){var t=e.field,n=e.loaded,r=void 0!==n&&n,i=(0,p.O)(),o=i.getFilters,l=i.setFiltersFields,s=i.getAgentId,u=(0,g.$)().i18n,c=o(s()).fields,d="object"===typeof c&&null!==c&&"boolean"===typeof c[t.key]?c[t.key]:null,f=function(e){if("object"===typeof c&&null!==c){var n=structuredClone(c);c[t.key]!==e?n[t.key]=!!e:delete n[t.key],l(s(),n)}};return"bool"===t.type?(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(G.Z,{title:u.t("Filter by boolean value"),children:(0,a.jsx)(bn.Z,{fontSize:"small",sx:{mr:2},color:"disabled"})}),(0,a.jsxs)(Qi.Z,{size:"small",children:[(0,a.jsx)(C.Z,{disabled:!r,onClick:function(){return f(!0)},variant:!0===d?"contained":"outlined",children:u.t("true")}),(0,a.jsx)(C.Z,{disabled:!r,onClick:function(){return f(!1)},variant:!1===d?"contained":"outlined",children:u.t("false")})]})]}),null!==d?(0,a.jsx)(G.Z,{title:u.t("Clear filter"),children:(0,a.jsx)(Ne.Z,{sx:{width:30,height:30},onClick:function(){if("object"===typeof c&&null!==c&&"undefined"!==typeof c[t.key]){var e=structuredClone(c);delete e[t.key],l(s(),e)}},children:(0,a.jsx)(gn.Z,{fontSize:"small"})})}):null]}):null},eo=function(e){var t=e.field,n=e.loaded,r=void 0!==n&&n,i=(0,p.O)(),o=i.getFilters,l=i.setFiltersFields,s=i.onFilters,u=i.getAgentId,d=(0,g.$)().i18n,f=(0,c.useRef)(null),h=(0,c.useRef)(null),x=(0,c.useState)(o(u())),m=x[0],v=x[1],y=(0,c.useState)(""),Z=y[0],j=y[1],b=(0,c.useState)(""),w=b[0],S=b[1];(0,c.useEffect)((function(){var e=s((function(e){var t=e.agentId,n=e.filters;u()===t&&v(n)}));return function(){e()}}),[]),(0,c.useEffect)((function(){var e="object"===typeof(null===m||void 0===m?void 0:m.fields)&&null!==m.fields&&"object"===typeof m.fields[t.key]&&null!==m.fields[t.key]?m.fields[t.key]:{min:"",max:""};j(Number.isInteger(e.min)?e.min:""),S(Number.isInteger(e.max)?e.max:"")}),[m]);return"int"===t.type?(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(G.Z,{title:d.t("Filter by minimum and maximum value"),children:(0,a.jsx)(bn.Z,{fontSize:"small",sx:{mr:2},color:"disabled"})}),["min","max"].map((function(e){return(0,a.jsx)(be.Z,{type:"number",variant:"standard",disabled:!r,inputMode:"numeric",value:"".concat("min"===e?Z:w),placeholder:"min"===e?d.t("Minimum"):d.t("Maximum"),onChange:function(n){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"min";e=parseInt(e,10),Number.isInteger(e)||(e="");var r="min"===n?f:h;("min"===n?j:S)(e),null!==r.current&&window.clearTimeout(r.current),r.current=window.setTimeout((function(){"object"===typeof m.fields&&null!==m.fields&&(l(u(),(0,He.Z)((0,P.Z)({},m.fields),(0,R.Z)({},t.key,(0,R.Z)({min:Number.isInteger(Z)?Z:"",max:Number.isInteger(w)?w:""},n,e)))),r.current=null)}),250)}(n.target.value.toLowerCase(),e)},sx:{width:"100%",ml:"min"===e?0:2,"& input":{px:"5px !important",fontSize:"0.75rem"}}},e)}))]}),Number.isInteger(Z)||Number.isInteger(w)?(0,a.jsx)(G.Z,{title:d.t("Clear filter"),children:(0,a.jsx)(Ne.Z,{sx:{width:30,height:30},onClick:function(){if("object"===typeof m.fields&&null!==m.fields&&"undefined"!==typeof m.fields[t.key]){j(""),S("");var e=structuredClone(m.fields);delete e[t.key],l(u(),e)}},children:(0,a.jsx)(gn.Z,{fontSize:"small"})})}):null]}):null},to=n(23488),no=function(e){var t=e.sx,n=void 0===t?{}:t,r=(0,g.$)().i18n;return"object"===typeof n&&null!==n||(n={}),(0,a.jsx)(k.Z,{sx:(0,P.Z)({width:"100%",height:"250px",display:"flex",alignItems:"center",borderRadius:1,px:3},n),children:(0,a.jsx)(we.Z,{severity:"info",sx:{width:"100%"},children:(0,a.jsx)(S.Z,{color:"inherit",variant:"caption",children:r.t("No data")})})})},ro=function(e){var t=e.field,n=e.runs,r=void 0===n?[]:n,i=e.loaded,o=void 0!==i&&i,l=(0,p.O)(),s=(0,l.getFilters)((0,l.getAgentId)()),u="object"===typeof(null===s||void 0===s?void 0:s.fields)&&null!==s.fields&&"string"===typeof s.fields[t.key]?s.fields[t.key]:"",c=function(e){var t=[e];if(u.length){var n=e.toLowerCase().indexOf(u);-1!==n&&(t=[e.substring(0,n),(0,a.jsx)("u",{children:e.substring(n,n+u.length)},n),e.substring(n+u.length)].filter((function(e){return""!==e})))}return t},d=function(){var e=[];if(Array.isArray(r)){var t=!0,n=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if("string"===typeof l.runData){var s=parseInt(l.runId.replace(/^.*\-(\d+)$/g,"$1"),10);e.push({time:Number.isInteger(s)?s:null,string:l.runData})}}}catch(u){n=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}return e}();return o?d.length?(0,a.jsx)(k.Z,{sx:{display:"flex",flexDirection:"column",py:2,width:"100%",wordWrap:"break-word",overflowWrap:"anywhere",height:250,overflowY:"auto"},children:d.map((function(e,t){var n=e.time,r=e.string,i=null!==n?at(1e3*n,"en",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}):null;return(0,a.jsx)(G.Z,{title:i,placement:"left",children:(0,a.jsxs)(k.Z,{sx:{display:"flex",mb:2},children:[(0,a.jsx)(to.Z,{sx:{mr:2},color:"text.primary",fontSize:"small"}),(0,a.jsx)(S.Z,{variant:"caption",sx:{whiteSpaceCollapse:"preserve",wordBreak:"break-word",whiteSpace:"pre-wrap"},children:c(r).map((function(e,t){return(0,a.jsx)("span",{children:e},t)}))})]})},t)}))}):(0,a.jsx)(no,{sx:{height:"250px"}}):(0,a.jsx)(k.Z,{sx:{width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)($t.Z,{grey:!0,size:50,className:"zoom-in"})})},io=function(e){var t=e.runs,n=void 0===t?[]:t,r=e.loaded,o=void 0!==r&&r,l=(0,g.$)().i18n,s=function(){var e=[];if(Array.isArray(n)){var t=!0,r=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s,u=a.value;if(Array.isArray(u.runData))(s=e).push.apply(s,(0,i.Z)(u.runData))}}catch(c){r=!0,o=c}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}}return e}();return o?s.length?(0,a.jsx)(Ii,{filePaths:s,sx:{height:"250px",maxHeight:"250px",overflowY:"auto"},tooltip:l.t("Up to {{count}} files are shown per run",{count:Z().max.sourceCode.ioOutputFileCount})}):(0,a.jsx)(no,{sx:{height:"250px"}}):(0,a.jsx)(k.Z,{sx:{width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)($t.Z,{grey:!0,size:50,className:"zoom-in"})})},oo=n(29009),ao=n(51302),lo=n(26050),so=n(4545),uo=n(82633),co=n(43815),po=function(e){var t=e.active,n=e.payload,r=e.coordinate,i=(0,g.$)().i18n;if(!t)return null;if(!Array.isArray(n)||!n.length)return null;var o=n[0].payload,l=o.value,s=o.time;return"undefined"===typeof l||"undefined"===typeof s?null:(0,a.jsx)(k.Z,{sx:{position:"absolute",left:r.x,top:r.y-5,pointerEvents:"none"},children:(0,a.jsx)(G.Z,{title:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},children:[null!==s?(0,a.jsx)(S.Z,{variant:"caption",color:"inherit",sx:{ml:2},children:at(1e3*s,"en",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}):null,(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center"},children:[l?(0,a.jsx)($e.Z,{fontSize:"small"}):(0,a.jsx)(Sn.Z,{fontSize:"small"}),(0,a.jsx)(S.Z,{variant:"caption",color:"inherit",sx:{ml:2,fontWeight:"bold"},children:null===l?i.t("No data"):l?i.t("true"):i.t("false")})]})]}),arrow:!0,placement:"top",open:!0,children:(0,a.jsx)("div",{style:{width:"1px",height:"1px"}})})})},fo=function(e){var t=e.runs,n=void 0===t?[]:t,r=e.loaded,i=void 0!==r&&r,o=(0,w.Z)(),l=(Array.isArray(n)?n:[]).map((function(e){var t=parseInt(e.runId.replace(/^.*\-(\d+)$/g,"$1"),10);return{time:Number.isInteger(t)?t:null,index:e.runData?1:.6,value:e.runData}}));return i?l.filter((function(e){return null!==e.value})).length?(0,a.jsx)(k.Z,{sx:{width:"100%",height:"80px",paddingTop:"10px"},children:(0,a.jsx)(oo.h,{width:"100%",height:80,children:(0,a.jsxs)(ao.v,{data:l,width:"100%",innerRadius:10,barSize:10,margin:{top:5,left:0,right:0,bottom:0},children:[(0,a.jsx)(lo.u,{content:function(e){var t=e.active,n=e.payload,r=e.coordinate;return(0,a.jsx)(po,{active:t,payload:n,coordinate:r})}}),(0,a.jsx)(so.d,{y:.75,stroke:o.palette.divider}),(0,a.jsx)(uo.$,{radius:15,dataKey:"index",children:l.map((function(e,t){var n=null===e.value?0:8;return(0,a.jsx)(co.b,{height:n,width:n,fill:null===e.value?o.palette.text.primary:e.value?o.palette.success.main:o.palette.error.main},"cell-".concat(t))}))})]})})}):(0,a.jsx)(no,{sx:{height:"80px"}}):(0,a.jsx)(k.Z,{sx:{width:"100%",height:"80px",alignItems:"center",display:"flex",justifyContent:"center"},children:(0,a.jsx)($t.Z,{grey:!0,size:50,className:"zoom-in"})})},ho=function(e){var t=e.active,n=e.payload,r=e.coordinate;if(!t)return null;if(!Array.isArray(n)||!n.length)return null;var i=n[0].payload,o=i.value,l=i.time;return"undefined"===typeof o||"undefined"===typeof l?null:(0,a.jsx)(k.Z,{sx:{position:"absolute",left:r.x,top:r.y-5,pointerEvents:"none"},children:(0,a.jsx)(G.Z,{title:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},children:[null!==l?(0,a.jsx)(S.Z,{variant:"caption",color:"inherit",children:at(1e3*l,"en",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}):null,(0,a.jsx)(S.Z,{variant:"caption",color:"inherit",sx:{fontWeight:"bold"},children:new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(o)})]}),arrow:!0,placement:"top",open:!0,children:(0,a.jsx)("div",{style:{width:"1px",height:"1px"}})})})},xo=function(e){var t=e.runs,n=void 0===t?[]:t,r=e.loaded,i=void 0!==r&&r,o=(0,w.Z)(),l=(Array.isArray(n)?n:[]).map((function(e){var t=parseInt(e.runId.replace(/^.*\-(\d+)$/g,"$1"),10);return{time:Number.isInteger(t)?t:null,value:e.runData}}));return i?l.filter((function(e){return null!==e.value})).length?(0,a.jsx)(oo.h,{width:"100%",height:250,children:(0,a.jsxs)(ao.v,{data:l,width:"100%",innerRadius:10,barSize:5,margin:{top:10,left:0,right:0,bottom:0},children:[(0,a.jsx)(lo.u,{content:function(e){var t=e.active,n=e.payload,r=e.coordinate;return(0,a.jsx)(ho,{active:t,payload:n,coordinate:r})}}),(0,a.jsx)(so.d,{y:0,stroke:o.palette.divider}),(0,a.jsx)(uo.$,{radius:10,dataKey:"value",fill:o.palette.secondary.main})]})}):(0,a.jsx)(no,{sx:{height:"250px"}}):(0,a.jsx)(k.Z,{sx:{width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)($t.Z,{grey:!0,size:50,className:"zoom-in"})})},mo=function(e){var t=e.field,n=e.runs,r=void 0===n?[]:n,i=e.loaded,o=void 0!==i&&i,l=(Array.isArray(r)?r:[]).map((function(e){return e.runId}));return o?l.length?(0,a.jsx)(ji,{fieldKey:t.key,fieldName:t.name,fieldColumns:t.columns,runIds:l}):(0,a.jsx)(no,{sx:{height:"250px"}}):(0,a.jsx)(k.Z,{sx:{width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)($t.Z,{grey:!0,size:50,className:"zoom-in"})})},go=(0,b.ZP)(k.Z)((function(e){return{display:"flex",flexDirection:"column",width:"250px",flex:"0 0 250px",paddingRight:e.theme.spacing(4),wordWrap:"break-word",overflowWrap:"anywhere",justifyContent:"center"}})),vo=(0,b.ZP)(k.Z)((function(){return{display:"flex",width:"100%",wordWrap:"break-word",overflowWrap:"anywhere"}})),yo=function(e){var t,n=e.field,r=e.runs,i=void 0===r?[]:r,o=e.loaded,l=void 0!==o&&o;return(0,a.jsxs)(k.Z,{sx:{width:"100%",display:"flex",mb:6},children:[(0,a.jsxs)(go,{children:[(0,a.jsxs)(k.Z,{sx:{width:"100%",mb:2},children:[(0,a.jsx)(S.Z,{variant:"body2",children:null!==(t=n.name)&&void 0!==t?t:n.key}),n.desc?(0,a.jsx)(S.Z,{variant:"caption",children:n.desc}):null]}),"int"===n.type?(0,a.jsx)(eo,{field:n,loaded:l}):null,"string"===n.type?(0,a.jsx)(Xi,{field:n,loaded:l}):null,"bool"===n.type?(0,a.jsx)(Ji,{field:n,loaded:l}):null]}),(0,a.jsxs)(vo,{children:["int"===n.type?(0,a.jsx)(xo,{runs:i,loaded:l}):null,"string"===n.type?(0,a.jsx)(ro,{field:n,runs:i,loaded:l}):null,"bool"===n.type?(0,a.jsx)(fo,{runs:i,loaded:l}):null,"files"===n.type?(0,a.jsx)(io,{runs:i,loaded:l}):null,"table"===n.type?(0,a.jsx)(mo,{field:n,runs:i,loaded:l}):null]})]})},Zo=(0,b.ZP)(k.Z)((function(){return{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",zIndex:0}})),jo=function(e){var t,n,l,s=e.agents,u=(0,p.O)(),d=u.getAgentId,h=u.onAgentId,x=u.getSource,m=u.onSource,v=u.onMachineStatus,y=u.onFilters,Z=u.getFilters,j=u.onOutputs,b=(0,g.$)().i18n,w=(0,c.useRef)([]),S=(0,c.useRef)({}),C=(0,c.useRef)([]),I=(0,c.useState)(f(s,d())),_=I[0],A=I[1],T=(0,c.useState)(!1),z=T[0],E=T[1],P=(0,c.useState)(null),M=P[0],N=P[1],O=(0,c.useState)([]),D=O[0],R=O[1],L=(0,c.useState)(null),F=L[0],W=L[1],U=(0,c.useState)(null),B=U[0],$=U[1],H=(0,c.useState)(!1),V=H[0],q=H[1],K=(0,c.useState)({}),Y=K[0],G=K[1],X=function(){var e=(0,r.Z)((function(e){var t,n,r,a,l,s,u,c,p,f,h,m,g,v,y,Z,j,b,k,C,I,_,A,T,z,E;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return w.current=[],[4,x(d(),!0)];case 1:if(a=o.sent(),s=null!==(l=null===a||void 0===a?void 0:a.srcOutputs)&&void 0!==l?l:[],u="object"===typeof(null===(t=S.current)||void 0===t?void 0:t.fields)&&null!==(null===(n=S.current)||void 0===n?void 0:n.fields)?null===(r=S.current)||void 0===r?void 0:r.fields:{},"object"===typeof(null===e||void 0===e?void 0:e.fields)&&null!==(null===e||void 0===e?void 0:e.fields)){c=!0,p=!1,f=void 0;try{for(h=function(){var t=g.value;if("undefined"===typeof e.fields[t.key])return"continue";if(!Array.isArray(u[t.key]))return"continue";var n=e.fields[t.key];u[t.key].map((function(e){var r=!0;do{if("undefined"===typeof e.runData)break;if("int"===t.type){if(Number.isInteger(n.min)&&e.runData<n.min){r=!1;break}if(Number.isInteger(n.max)&&e.runData>n.max){r=!1;break}}if("string"===t.type&&-1==="".concat(e.runData).toLowerCase().indexOf(n)){r=!1;break}if("bool"===t.type&&!!e.runData!==n){r=!1;break}}while(0);r||w.current.push(e.runId)}))},m=s[Symbol.iterator]();!(c=(g=m.next()).done);c=!0)h()}catch(P){p=!0,f=P}finally{try{c||null==m.return||m.return()}finally{if(p)throw f}}}if(Array.isArray(null===e||void 0===e?void 0:e.runs)){v=!0,y=!1,Z=void 0;try{for(j=e.runs[Symbol.iterator]();!(v=(b=j.next()).done);v=!0)"string"===typeof(k=b.value)&&w.current.push(k)}catch(P){y=!0,Z=P}finally{try{v||null==j.return||j.return()}finally{if(y)throw Z}}}w.current=(0,i.Z)(new Set(w.current)),C={},I=!0,_=!1,A=void 0;try{for(T=s[Symbol.iterator]();!(I=(z=T.next()).done);I=!0)E=z.value,C[E.key]=(Array.isArray(u[E.key])?u[E.key]:[]).filter((function(e){return!w.current.includes(e.runId)}))}catch(P){_=!0,A=P}finally{try{I||null==T.return||T.return()}finally{if(_)throw A}}return G(C),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=(0,r.Z)((function(){var e,t,n,r,i=arguments;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e=!(i.length>0&&void 0!==i[0])||i[0],"string"!==typeof(null===_||void 0===_?void 0:_.id)?[2]:[4,x(d(),!0)];case 1:return n=o.sent(),(null!==(r=null===n||void 0===n?void 0:n.srcOutputs)&&void 0!==r?r:[]).length?(e&&q(!1),[4,null===(t=window.sdk)||void 0===t?void 0:t.ipc.diskStorage.outputsQuery(d(),null===_||void 0===_?void 0:_.installedModuleId,F,B)]):[2];case 2:return S.current=o.sent(),[4,X(Z(d()))];case 3:return o.sent(),e?q(!0):N((new Date).getTime()),[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=y((function(e){var t=e.agentId,n=e.filters;t===(null===_||void 0===_?void 0:_.id)&&X(n)}));Q();var t=v((function(e){var t=e.agentId,n=e.status;t===(null===_||void 0===_?void 0:_.id)&&1!==n&&(null===B||B>Math.floor((new Date).getTime()/1e3))&&Q(!1)})),n=j((function(e){e===(null===_||void 0===_?void 0:_.id)&&(null===B||B>Math.floor((new Date).getTime()/1e3))&&Q(!1)}));return function(){e(),t(),n()}}),[_,F,B]);var J=function(){var e=(0,r.Z)((function(e){var t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,null===(t=window.sdk)||void 0===t?void 0:t.ipc.diskStorage.runDelete(d(),e)];case 1:return n.sent(),[4,Q()];case 2:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){"string"===typeof(null===_||void 0===_?void 0:_.id)&&(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,x(_.id,!0)];case 1:return C.current=null!==(t=null===(e=n.sent())||void 0===e?void 0:e.srcOutputs)&&void 0!==t?t:[],R(C.current),[2]}}))}))();var e=m((function(e){var t,n,r=e.agentId,i=e.sourceCode;r===(null===_||void 0===_?void 0:_.id)&&(JSON.stringify(C.current)!==JSON.stringify(null!==(t=null===i||void 0===i?void 0:i.srcOutputs)&&void 0!==t?t:[])&&(C.current=null!==(n=null===i||void 0===i?void 0:i.srcOutputs)&&void 0!==n?n:[],R(C.current)))}));return function(){return e()}}),[_]),(0,c.useEffect)((function(){A(f(s,d()));var e=h((function(e){return A(f(s,e))}));return function(){return e()}}),[s]);var ee,te=Array.isArray(null===(t=S.current)||void 0===t?void 0:t.runIds)?null===(n=S.current)||void 0===n?void 0:n.runIds:[],ne=null!==(ee=null===(l=S.current)||void 0===l?void 0:l.runIdsTotal)&&void 0!==ee?ee:0,re=te.length>0,ie=w.current,oe=Z(d()).runs;return(0,a.jsx)(Zo,{id:M,children:(0,a.jsx)(k.Z,{sx:{height:"100%",width:"100%"},children:Array.isArray(D)&&D.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Gi,{startTime:F,endTime:B,setStartTime:W,setEndTime:$,loaded:V,runsFiltered:ie,runsTotal:ne,runsLoaded:te.length,runsToggle:function(){return E((function(e){return!e}))},showFilters:re}),re?(0,a.jsx)(Ni,{runsAll:te,runsFiltered:ie,runsExcluded:oe,open:z,loaded:V,onClose:function(){return E(!1)},onDelete:J}):null,(0,a.jsx)(k.Z,{sx:{height:"calc(100% - 50px)",width:"100%",display:"flex",flexDirection:"column",overflowX:"hidden",px:6,pt:6},children:re?D.map((function(e){return(0,a.jsx)(yo,{field:e,loaded:V,runs:Array.isArray(Y[e.key])?Y[e.key]:[]},"".concat(e.id,"-").concat(e.type))})):V?(0,a.jsx)(_i.default,{title:b.t("No data"),message:b.t("No runs were executed in the specified interval"),sx:{"&.content-center":{minHeight:"100%",overflow:"hidden"}}}):(0,a.jsx)(k.Z,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,a.jsx)($t.Z,{grey:!0,size:128,className:"zoom-in"})})})]}):(0,a.jsx)(_i.default,{title:b.t("No outputs"),message:b.t("This module has no results to capture and analyze"),sx:{"&.content-center":{minHeight:"100%"}}})})})},bo=(0,b.ZP)(k.Z)((function(e){return{background:e.theme.palette.background.paper,position:"relative",overflowY:"auto",height:"100%",width:"100%",zIndex:0}}));function wo(e){var t=e.agents,n=e.agentsReady,r=(0,p.O)(),i=r.getAgentTab,o=r.onAgentTab,l=(0,c.useState)(""),s=l[0],u=l[1];return(0,c.useEffect)((function(){u(i());var e=o((function(e){return u(e)}));return function(){return e()}}),[t]),s.length?n?(0,a.jsxs)(bo,{children:["settings"===s?(0,a.jsx)(Ai,{agents:t}):null,"results"===s?(0,a.jsx)(jo,{agents:t}):null]}):null:(0,a.jsx)(Ar,{agents:t,agentsReady:n})}var ko=n(21001),So=(0,b.ZP)(k.Z)((function(e){var t=e.theme;return{width:"100%",height:"50px",position:"relative",display:"flex",alignItems:"center",justifyContent:"start",paddingLeft:t.spacing(4),paddingRight:t.spacing(4),borderRadius:0,textTransform:"none",textAlign:"left"}})),Co=(0,b.ZP)(S.Z)((function(e){e.theme;return{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"180px"}})),Io=function(){var e=(0,p.O)(),t=e.isLlmReady,n=e.onLlmStatus,i=e.onUpdaterInfo,l=e.getUpdaterInfo,s=e.onUpdaterStatus,u=e.getUpdaterStatus,d=(0,g.$)().i18n,f=(0,c.useState)(!1),h=f[0],x=f[1],m=(0,c.useState)(null),v=m[0],y=m[1],Z=(0,c.useState)(null),j=Z[0],b=Z[1],w=(0,c.useState)(!1),I=w[0],_=w[1],A=(0,c.useState)(!1),T=A[0],z=A[1];(0,c.useEffect)((function(){x(t());var e=n((function(){return x(t())}));b(l());var a=i((function(e){var t=e.info;return b(t)}));y(u());var c=s((function(e){var t=e.status;return y(t)}));return(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return t="linux",[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.device.getOS()];case 1:return[2,z.apply(void 0,[t===n.sent()])]}}))}))(),function(){e(),a(),c()}}),[]),(0,c.useEffect)((function(){var e;h&&(null===(e=window.sdk)||void 0===e||e.ipc.updater.check())}),[h]),(0,c.useEffect)((function(){!(null===v||void 0===v?void 0:v.working)&&(null===v||void 0===v?void 0:v.error)&&Te.A.error("".concat(d.t("Update cancelled.")," ").concat(v.error),{duration:5e3})}),[v]);var E,P=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.setOnTop()];case 1:return t.sent(),_(!0),[2]}}))}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.updater.install()];case 1:return t.sent(),_(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.jsxs)(a.Fragment,{children:[h&&(null===j||void 0===j?void 0:j.version)?(0,a.jsxs)(So,{children:[!(null===j||void 0===j?void 0:j.filePath)||(null===v||void 0===v?void 0:v.working)?(0,a.jsx)(k.Z,{sx:{mr:4},children:(null===v||void 0===v?void 0:v.working)?(0,a.jsx)(or.Z,{className:"rotate-360"}):(0,a.jsx)(sn.Z,{color:"primary"})}):null,(0,a.jsx)(k.Z,{sx:{display:"flex",flexDirection:"column",width:"100%",alignItems:"start"},children:!(null===j||void 0===j?void 0:j.filePath)||(null===v||void 0===v?void 0:v.working)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Co,{variant:"caption",color:"inherit",children:(null===v||void 0===v?void 0:v.working)?d.t("Updating to v.{{version}}...",{version:j.version}):d.t("Downloading v.{{version}}...",{version:j.version})}),(0,a.jsx)(sr.Z,{color:"primary",sx:{mt:1},variant:(null===v||void 0===v?void 0:v.working)?"indeterminate":"determinate",value:(null===v||void 0===v?void 0:v.working)?null:null!==(E=null===j||void 0===j?void 0:j.progress)&&void 0!==E?E:0})]}):(0,a.jsx)(G.Z,{title:d.t("Update to version {{version}}",{version:j.version}),placement:"top",children:(0,a.jsx)(C.Z,{fullWidth:!0,size:"small",variant:"outlined",startIcon:(0,a.jsx)(sn.Z,{}),onClick:function(){return P()},children:d.t("Update")})})})]}):null,h&&(null===j||void 0===j?void 0:j.version)&&I?(0,a.jsxs)(O.Z,{open:!0,onClose:function(){return!(null===v||void 0===v?void 0:v.working)&&_(!1)},sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:1}},children:[(0,a.jsx)(Pe.Z,{children:(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(S.Z,{variant:"h3",sx:{ml:4},children:(null===v||void 0===v?void 0:v.working)?d.t("Updating to v.{{version}}...",{version:j.version}):d.t("Install update")})})}),(0,a.jsx)(N.Z,{children:(null===v||void 0===v?void 0:v.working)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(we.Z,{severity:"warning",sx:{mb:4},children:d.t("Please do not close this window until the update is complete.")}),(0,a.jsx)(B.Z,{sx:{mb:-4}})]}):(0,a.jsx)(we.Z,{severity:"info",icon:(0,a.jsx)(ko.Z,{}),children:T?d.t("Updating to version {{version}} requires root privileges. Please enter your root password in the next dialog.",{version:j.version}):d.t("Update to version {{version}} and restart the application.",{version:j.version})})}),(null===v||void 0===v?void 0:v.working)?null:(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(C.Z,{size:"small",className:"pop",startIcon:(0,a.jsx)(sn.Z,{}),color:"primary",onClick:function(){return D()},variant:"contained",children:d.t("Update and restart")}),(0,a.jsx)(C.Z,{color:"secondary",variant:"text",onClick:function(){return _(!1)},children:d.t("Cancel")})]})]}):null]})},_o=function(e){var t=e.isOpen,n=void 0!==t&&t,r=e.onOpen,i=void 0===r?function(){}:r,o=e.onClose,l=void 0===o?function(){}:o,s=(0,g.$)().i18n;(0,c.useEffect)((function(){n&&"function"===typeof i&&i()}),[n]);var u=function(){n&&"function"===typeof l&&l()};return n?(0,a.jsxs)(O.Z,{open:!0,onClose:u,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[(0,a.jsx)(Pe.Z,{children:s.t("Window restored")}),(0,a.jsx)(N.Z,{children:(0,a.jsx)(we.Z,{children:s.t("This window must remain visible for the application to function correctly.")})}),(0,a.jsx)(M.Z,{children:(0,a.jsx)(C.Z,{color:"secondary",onClick:u,children:s.t("OK")})})]}):null},Ao=n(52510),To=n(95337),zo=n(36725),Eo=n(15510),Po=n(57418),Mo=n(57936),No=n(34325),Oo=function(){var e=(0,p.O)(),t=e.getLlmStatus,n=e.onLlmStatus,i=e.isLlmReady,l=e.onLlmInfo,s=e.showLlmInfo,u=(0,g.$)().i18n,d=(0,c.useRef)(!1),f=(0,c.useState)(!1),h=f[0],x=f[1],m=(0,c.useState)(!1),v=m[0],y=m[1],Z=(0,c.useState)({}),j=Z[0],b=Z[1];(0,c.useEffect)((function(){b(t());var e=n((function(e){var t=e.status;b(t),!d.current&&"".concat(null===t||void 0===t?void 0:t.code).match(/^(?:download|unpack)/gi)&&(d.current=!0),d.current&&"finish"===(null===t||void 0===t?void 0:t.code)&&s(!0)})),r=l((function(e){var t,n=e.show;(x(n),n)&&(null===(t=window.sdk)||void 0===t||t.ipc.main.setOnTop())}));return function(){e(),r()}}),[]),(0,c.useEffect)((function(){var e=null;return i()&&(e=window.setTimeout((0,r.Z)((function(){return(0,o.__generator)(this,(function(t){return h&&(Te.A.success(u.t("Large language model installed successfully!"),{duration:5e3}),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body",n=document.querySelector("".concat(t," > .confetti-container"));if(null===n){(n=document.createElement("div")).classList.add("confetti-container"),null===(e=document.querySelector(t))||void 0===e||e.appendChild(n);var r=["red","orange","yellow","green","blue","violet"],i=function(){return"".concat(Math.floor(Math.random()*window.innerWidth),"px")},o=function(){return r[Math.floor(Math.random()*r.length)]};n.innerHTML="";for(var a=0;a<200;a++)!function(e){setTimeout((function(){var e=document.createElement("div"),t=Math.random()<.5?"50%":0;e.classList.add("confetti"),e.style.left=i(),e.style.background=o(),e.style.borderRadius=t,n.appendChild(e),e.animate({top:"".concat(window.innerHeight,"px"),left:"".concat(Math.floor(Math.random()*window.innerWidth),"px")},Math.floor(500*Math.random()+1500))}),10*e)}(a);window.setTimeout((function(){var e;null===(e=n.parentNode)||void 0===e||e.removeChild(n)}),4e3)}}(".MuiDialog-root")),e=null,[2]}))})),250)),function(){null!==e&&(window.clearTimeout(e),e=null)}}),[j,h]);var w=function(){var e=(0,r.Z)((function(){var e,t,n=arguments;return(0,o.__generator)(this,(function(r){return e=n.length>0&&void 0!==n[0]&&n[0],null===(t=window.sdk)||void 0===t||t.ipc.llm.install(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),I=[{code:"download:ollama",Icon:Mo.Z,title:u.t("Downloading Ollama")},{code:"unpack:ollama",Icon:Mo.Z,title:u.t("Unpacking Ollama")},{code:"download:models",Icon:No.Z,title:u.t("Downloading large language model")},{code:"unpack:models",Icon:No.Z,title:u.t("Unpacking large language model")},{code:"serve",Icon:tn.Z,title:u.t("Launching server")},{code:"finish",Icon:To.Z,title:j.success?u.t("LLM server running"):u.t("LLM server failed to start")}],_=I.reduce((function(e,t){return t.code===j.code?t:e}),null),A=I.findIndex((function(e){return e.code===j.code}));return(0,a.jsxs)(a.Fragment,{children:[null===_||i()?null:(0,a.jsx)(G.Z,{title:j.success?_.title:u.t("Error installing LLM"),placement:"top",children:(0,a.jsxs)(C.Z,{onClick:function(){return s(!0)},sx:{width:"100%",height:"50px",position:"relative",display:"flex",alignItems:"center",justifyContent:"start",px:4,borderRadius:0,textTransform:"none",textAlign:"left"},children:[(0,a.jsx)(k.Z,{sx:{mr:4},children:(0,a.jsx)(_.Icon,{fontSize:"small",color:j.success?"primary":"warning"})}),(0,a.jsxs)(k.Z,{sx:{display:"flex",flexDirection:"column",width:"100%",alignItems:"start"},children:[(0,a.jsx)(S.Z,{variant:"caption",color:j.success?"inherit":"error",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"180px"},children:j.success?_.title:u.t("Error installing LLM")}),Number.isInteger(j.progressBar)||j.progressBar?(0,a.jsx)(sr.Z,{color:j.success?"primary":"warning",sx:{mt:1},variant:Number.isInteger(j.progressBar)?"determinate":"indeterminate",value:Number.isInteger(j.progressBar)?j.progressBar:null}):null]})]})}),h?(0,a.jsxs)(O.Z,{open:!0,onClose:function(){return x(!1)},sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:1}},children:[(0,a.jsx)(Pe.Z,{children:(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,a.jsx)(S.Z,{variant:"h3",sx:{ml:4},children:u.t("Large language model setup")}),(0,a.jsx)(Ne.Z,{"aria-label":u.t("More information"),sx:{ml:2},color:"default",onClick:function(){return y(!v)},size:"large",children:v?(0,a.jsx)(tt.Z,{}):(0,a.jsx)(Je.Z,{})})]})}),(0,a.jsxs)(N.Z,{children:[v?(0,a.jsx)(we.Z,{severity:"info",sx:{mb:2},children:(0,a.jsxs)(S.Z,{color:"inherit",variant:"body2",children:[u.t("To ensure complete privacy of your data, this module uses a large language model that runs locally on your machine."),(0,a.jsx)("br",{}),u.t("Downloading and extracting the model typically takes less than 10 minutes, depending on your internet connection speed and system performance.")]})}):null,I.map((function(e,t){return(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",my:2,opacity:t<=A?1:.4,userSelect:t<=A?"auto":"none"},children:[(0,a.jsx)(k.Z,{sx:{height:"100%",display:"flex",alignItems:"center"},children:A>=0&&t<=A?t===A?j.success?i()?(0,a.jsx)(Ao.Z,{color:"primary"}):(0,a.jsx)(zo.Z,{color:"primary",className:"rotate-360"}):(0,a.jsx)(Eo.Z,{color:"warning"}):(0,a.jsx)(vn.Z,{}):(0,a.jsx)(jn.Z,{})}),(0,a.jsxs)(k.Z,{sx:{width:"100%",height:40,display:"flex",alignItems:"start",justifyContent:"center",flexDirection:"column"},children:[(0,a.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(e.Icon,{sx:{mx:3},color:t===A?j.success?"primary":"warning":"inherit"}),(0,a.jsx)(S.Z,{color:t===A?j.success?"primary":"warning":"inherit",variant:"body2",children:e.title})]}),t===A&&(Number.isInteger(j.progressBar)||j.progressBar)?(0,a.jsx)(sr.Z,{color:j.success?"primary":"warning",sx:{mt:2,mx:3},variant:Number.isInteger(j.progressBar)?"determinate":"indeterminate",value:Number.isInteger(j.progressBar)?j.progressBar:null}):null]})]},t)})),j.success?null:(0,a.jsxs)(we.Z,{severity:"warning",children:[j.message.length?j.message:u.t("An error occured during the installation of the large language model."),(0,a.jsx)("br",{}),"serve"!==j.code?u.t("Press the reinstall button below to begin a fresh install."):u.t("Press the restart button below to reload the large language model.")]})]}),(0,a.jsxs)(M.Z,{children:[j.success?null:(0,a.jsx)(C.Z,{className:"pop",startIcon:"serve"!==j.code?(0,a.jsx)(ue.Z,{}):(0,a.jsx)(Po.Z,{}),color:"primary",onClick:function(){return w("serve"!==j.code)},variant:"contained",children:"serve"!==j.code?u.t("Reinstall"):u.t("Restart")}),(0,a.jsx)(C.Z,{color:j.success&&i()?"primary":"secondary",variant:j.success&&i()?"contained":"text",className:j.success&&i()?"pop":null,onClick:function(){return x(!1)},children:j.success&&i()?u.t("Let's go!"):u.t("OK")})]})]}):null]})},Do=n(79622),Ro=n(83830),Lo=n(4620);function Fo(){var e=(0,Ct.Z)(["\n0%   { transform: translateY(-50px); }\n100% { transform: translateY(0px); }"]);return Fo=function(){return e},e}var Wo=(0,zt.F4)(Fo()),Uo=(0,b.ZP)(k.Z)((function(e){var t=e.theme;return{width:"2px",height:"20px",position:"relative",borderRight:"1px solid ".concat((0,u.k)(t)),marginLeft:t.spacing(2)}}));function Bo(e){var t=e.agents,n=(0,p.O)(),i=n.getAgentActive,l=n.onAgentActive,s=n.getAgentId,d=n.onAgentId,h=n.getNavVisible,x=n.onNavVisible,m=n.setNavVisible,v=n.getNavUrl,y=n.onNavUrl,Z=n.getNavInfo,j=n.onNavInfo,b=n.log,C=(0,w.Z)(),I=(0,c.useRef)(null),_=(0,g.$)().i18n,A=(0,c.useRef)(null),T=(0,c.useState)(null),z=T[0],E=T[1],M=(0,c.useState)(!1),N=M[0],O=M[1],D=(0,c.useState)(!1),R=D[0],L=D[1],F=(0,c.useState)({status:-1}),W=F[0],U=F[1];(0,c.useEffect)((function(){O(i(s()));var e=l((function(e){var t=e.agentId,n=e.active;t===s()&&O(n)}));L(h());var t=x((function(e){L(e)}));null!==I.current&&(I.current.value=v(s()));var n=y((function(e){var t=e.agentId,n=e.url;t===s()&&null!==I.current&&(I.current.value=n)}));U(Z(s()));var r=j((function(e){var t=e.agentId,n=e.info;t===s()&&U(n)}));return function(){e(),t(),n(),r()}}),[z]),(0,c.useEffect)((function(){E(f(t,s()));var e=d((function(e){return E(f(t,e))}));return function(){return e()}}),[t]),(0,c.useEffect)((function(){R&&null!==I.current&&(I.current.value=v(s()))}),[R]);var B=function(){var e=(0,r.Z)((function(e){var t,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:if(N)return[2];U((0,He.Z)((0,P.Z)({},W),{status:-1})),null===(t=window.sdk)||void 0===t||t.ipc.main.setOnTop(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===(n=window.sdk)||void 0===n?void 0:n.ipc.target.loadUrl(s(),e)];case 2:return i.sent(),[3,4];case 3:return r=i.sent(),b(s(),"Navigation error: ".concat(r.message),"error"),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,r.Z)((function(){var e,t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:if(N)return[2];U((0,He.Z)((0,P.Z)({},W),{status:-1})),null===(e=window.sdk)||void 0===e||e.ipc.main.setOnTop(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,null===(t=window.sdk)||void 0===t?void 0:t.ipc.target.reload(s(),!0)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),b(s(),"Navigation error: ".concat(n.message),"error"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(N)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.target.goBack(s())];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),b(s(),"Navigation error: ".concat(t.message),"error"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(N)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.target.goForward(s())];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),b(s(),"Navigation error: ".concat(t.message),"error"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return m(!1),[2]}))}));return function(){return e.apply(this,arguments)}}(),K="1px solid ".concat(N?C.palette.primary.main:(0,u.k)(C));return z&&R?(0,a.jsx)(k.Z,{sx:{borderBottom:K,zIndex:20,position:"fixed",display:"flex",flexDirection:"column",left:"250px",top:"50px",width:"calc(100vw - 250px)",overflow:"hidden",background:C.palette.background.default,animation:"".concat(Wo," 100ms ease-in-out forwards")},children:(0,a.jsxs)(k.Z,{sx:{height:"49px",alignItems:"center",display:"flex"},children:[N?(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center",ml:4,mr:2,flex:"0 0 auto",userSelect:"none"},children:(0,a.jsx)(S.Z,{variant:"caption",color:C.palette.action.active,children:_.t("Controlled by agent")})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center",mx:2,ml:4},children:(0,a.jsx)(Ne.Z,{onClick:H,disabled:-1===W.status||!W.canGoBack,children:(0,a.jsx)(Ro.Z,{fontSize:"small"})})}),(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center",mr:2},children:(0,a.jsx)(Ne.Z,{onClick:V,disabled:-1===W.status||!W.canGoForward,children:(0,a.jsx)(Do.Z,{fontSize:"small"})})}),(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center"},children:(0,a.jsx)(Ne.Z,{onClick:$,disabled:-1===W.status,children:(0,a.jsx)(Lo.Z,{fontSize:"small"})})})]}),(0,a.jsx)(Uo,{sx:{mr:2}}),(0,a.jsx)(be.Z,{inputRef:I,variant:"standard",fullWidth:!0,disabled:N||-1===W.status,sx:{"& .MuiInput-root:before":{display:"none"}},onKeyDown:function(e){return"Enter"===e.key&&(t=e.target.value,null!==A.current&&window.clearTimeout(A.current),void(A.current=window.setTimeout((0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return A.current=null,t.match(RegExp("\\.[\\p{L}\\d]|about:home|localhost","u"))?(t.match(/^(https?\:\/\/|about:home)\b/gi)||(e=t.match(/^((127|0)\.\d+|localhost)/gi)?"http":"https",t="".concat(e,"://").concat(t.replace(/^\w+\:\/\//gi,"")),I.current.value=t),[4,B(t)]):(I.current.value=v(s()),[2]);case 1:return n.sent(),[2]}}))})),250)));var t},inputProps:{sx:{fontSize:"0.75rem",px:"0 !important"}},placeholder:_.t("Type URL and press Enter"),InputProps:{startAdornment:(0,a.jsx)(je.Z,{position:"start",sx:{userSelect:"none"},children:(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center",mx:2},children:(0,a.jsx)(k.Z,{sx:{height:"20px"},children:-1===W.status?(0,a.jsx)(or.Z,{fontSize:"small",className:"rotate-360"}):0===W.status?(0,a.jsx)(G.Z,{title:_.t("Failed to load"),placement:"left",children:(0,a.jsx)(nn.Z,{fontSize:"small",color:"warning"})}):N?(0,a.jsx)(rn.Z,{fontSize:"small",color:"action"}):(0,a.jsx)($n.Z,{fontSize:"small"})})})})}}),(0,a.jsx)(k.Z,{sx:{display:"flex",alignItems:"center",mx:4},children:(0,a.jsx)(G.Z,{title:_.t("Close"),placement:"bottom",children:(0,a.jsx)(Ne.Z,{onClick:q,sx:{mr:"2px"},children:(0,a.jsx)(Sn.Z,{fontSize:"small"})})})})]})}):null}function $o(e){var t,n,r=e.count,i=void 0===r?0:r,o=e.onAgentAdd,l=void 0===o?function(){}:o,s=(0,p.O)(),u=s.getSubscription,d=s.onSubscription,f=(0,g.$)().i18n,h=(0,x.a)(),m=(0,c.useState)(0),v=m[0],y=m[1],Z=(0,c.useState)(0),j=Z[0],b=Z[1];return(0,c.useEffect)((function(){var e,t=u();b(!!t.active),y(null!==(e=t.agentsCount)&&void 0!==e?e:0);var n=d((function(e){var t,n=e.info;b(!!n.active),y(null!==(t=n.agentsCount)&&void 0!==t?t:0)}));return function(){n()}}),[null===(t=h.user)||void 0===t?void 0:t.computerEnabled]),j&&(null===(n=h.user)||void 0===n?void 0:n.computerEnabled)&&i<v?(0,a.jsx)(k.Z,{sx:{px:3,my:3},children:(0,a.jsx)(C.Z,{fullWidth:!0,sx:{fontSize:"0.75rem"},startIcon:(0,a.jsx)(me.Z,{color:"inherit"}),onClick:l,children:f.t("Add agent")})}):null}var Ho=(0,b.ZP)(k.Z)((function(){return{display:"flex",width:"100%",height:"calc(100vh - 100px)",position:"relative",zIndex:2}})),Vo=(0,b.ZP)(k.Z)((function(e){var t=e.theme;return{display:"flex",width:"250px",height:"100%",boxShadow:"-1px 0px 0px 0px ".concat((0,u.k)(t)," inset")}})),qo=(0,b.ZP)(k.Z)((function(e){var t=e.theme;return{display:"flex",width:"calc(100vw - 250px)",boxShadow:"0px -1px 0px 0px ".concat((0,u.k)(t)," inset"),height:"100%"}})),Ko=(0,b.ZP)(k.Z)((function(e){return{display:"flex",width:"100%",height:"50px",background:e.theme.palette.background.default,position:"relative",zIndex:21}})),Yo=function(){var e,t=(0,p.O)(),n=t.onAgentId,l=t.getAgentId,h=t.setAgentId,y=t.getAgentActive,b=t.onAgentActive,S=t.getAgentTab,C=t.setAgentTab,I=t.onAgentTab,_=t.setHourglass,A=t.setPageTitle,T=t.setPageSubtitle,z=t.setLogsEnabled,P=t.onLogsVisible,M=t.getLogsVisible,N=t.setLogsVisible,O=t.onNavVisible,D=t.getNavVisible,R=t.setNavVisible,L=t.purge,F=(0,g.$)().i18n,W=(0,v.useRouter)(),U=(0,w.Z)(),B=(0,x.a)(),$=(0,c.useState)(!1),H=$[0],V=$[1],q=(0,c.useState)(!1),K=q[0],Y=q[1],G=(0,c.useState)(!1),X=G[0],Q=G[1],J=(0,c.useState)(!1),ee=J[0],te=J[1],ne=(0,c.useState)(!1),re=ne[0],ie=ne[1],oe=(0,c.useState)(!1),ae=oe[0],le=oe[1],se=(0,c.useState)(!1),ue=se[0],ce=se[1],de=(0,c.useState)(!1),pe=de[0],fe=de[1],he=(0,c.useState)([]),xe=he[0],me=he[1];(0,c.useEffect)((function(){B.user&&(d.Z.setI18n(F),(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,j.Z.get("agents")];case 1:return e=t.sent(),Array.isArray(e.data)&&me(e.data),e.data.length&&window.setTimeout((0,r.Z)((function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,ge(e.data[0].id)];case 1:return t.sent(),[2]}}))})),250),[3,3];case 2:return t.sent(),[3,3];case 3:return fe(!0),[2]}}))}))())}),[null===(e=B.user)||void 0===e?void 0:e.id]),(0,c.useEffect)((function(){var e;null===(e=window.sdk)||void 0===e||e.ibc.handle("ibc-source:agent:data",(function(e,t){"string"===typeof e&&"object"===typeof t&&null!==t&&me(xe.map((function(n){return n.id===e?t:n})))}));var t=function(e){var t;A((null===e||void 0===e?void 0:e.name)?"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:""):null)};t(f(xe,l()));var r=n((function(e){C(""),t(f(xe,e))}));return function(){return r()}}),[xe]),(0,c.useEffect)((function(){var e,t=f(xe,l());A(ue?F.t("User Profile"):(null===t||void 0===t?void 0:t.name)?"".concat(null!==(e=null===t||void 0===t?void 0:t.name)&&void 0!==e?e:""):null)}),[ue]),(0,c.useEffect)((function(){T(ee?F.t("Agent module"):null)}),[ee]),(0,c.useEffect)((function(){var e=null;return ae&&(e=window.setTimeout((function(){return le(!1)}),7500)),function(){return null!==e&&window.clearTimeout(e)}}),[ae]),(0,c.useEffect)((function(){var e,t;if("object"===typeof window.sdk){null===(e=window.sdk)||void 0===e||e.ibc.handle("ibc-source:open",(function(){return le(!1)})),null===(t=window.sdk)||void 0===t||t.ibc.handle("ipc:oglama:restored",(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.setOnTop()];case 1:return t.sent(),ie(!0),[2]}}))})));var n=function(){var e=(0,r.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.setOnTop()];case 1:return n.sent(),[4,null===(t=window.sdk)||void 0===t?void 0:t.ipc.target.removeAll()];case 2:return n.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();window.addEventListener("beforeunload",n),W.events.on("routeChangeStart",n);var i=P((function(e){return!e&&ve()})),a=O((function(e){return!e&&ve()})),s=b((function(e){var t=e.agentId,n=e.active;_(t,n)})),u=I((function(){null!==l()&&ge(l())}));return function(){window.removeEventListener("beforeunload",n),W.events.off("routeChangeStart",n),i(),a(),s(),u()}}W.replace("/home/")}),[]);var ge=(0,c.useCallback)(function(){var e=(0,r.Z)((function(e){var t,n,r,i,a=arguments;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=a.length>1&&void 0!==a[1]&&a[1],"string"!==typeof e?[2]:(h(e),r=t||""!==S()||M()||D()||y(e),[4,null===(n=window.sdk)||void 0===n?void 0:n.ipc.main.setOnTop(r)]);case 1:return o.sent(),""!==S()?[3,3]:[4,null===(i=window.sdk)||void 0===i?void 0:i.ipc.target.select(e)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[]),ve=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return""!==S()?[3,2]:[4,ge(l())];case 1:e.sent(),e.label=2;case 2:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=(0,r.Z)((function(e){var t,n,r,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if("string"!==typeof(null===(t=B.user)||void 0===t?void 0:t.computerId))return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,j.Z.post("agents",{name:e,computerId:B.user.computerId})];case 2:return a=o.sent(),"string"===typeof(null===(r=a.data)||void 0===r?void 0:r.id)&&(me((0,i.Z)(xe).concat([a.data])),h(a.data.id),z(a.data.id,!0,!1),te(!0)),[3,4];case 3:return o.sent(),[3,4];case 4:return[4,null===(n=window.sdk)||void 0===n?void 0:n.ipc.main.setOnTop()];case 5:return o.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Ze=(0,c.useCallback)((function(e){var t;"object"===typeof e&&null!==e&&(null===(t=window.sdk)||void 0===t||t.ibc.source.send(e.id,"ibc-main:agent:data",[e]),me(structuredClone(xe).map((function(t){return t.id===e.id?e:t}))))}),[xe]),je=function(){var e=(0,r.Z)((function(e){var t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,j.Z.delete("agents/".concat(e))];case 1:return n.sent(),t=xe.filter((function(t){return t.id!==e})),me(t),l()===e&&h(t.length?t[0].id:null),L(e),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.setOnTop()];case 1:return t.sent(),le(!0),[2]}}))}));return function(){return e.apply(this,arguments)}}(),we=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return N(!1),R(!1),[4,ve()];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.setOnTop()];case 1:return t.sent(),V(!0),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,null===(e=window.sdk)||void 0===e?void 0:e.ipc.main.setOnTop()];case 1:return t.sent(),ce(!0),[2]}}))}));return function(){return e.apply(this,arguments)}}();return null===B.user?(0,a.jsx)(fr.Z,{}):(0,a.jsxs)(k.Z,{sx:{display:"flex",width:"100vw",height:"100vh",flexDirection:"column"},children:[(0,a.jsx)(s(),{id:"a832ee7090d48c19",children:"body{background:transparent}"}),(0,a.jsx)(Fn,{agentsCount:xe.length,agentsReady:pe,dialogAgentCreate:H,setDialogAgentCreate:V}),(0,a.jsx)(Ko,{children:pe&&xe.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Vo,{sx:{justifyContent:"space-between",alignItems:"center"},children:(0,a.jsx)(mn,{})}),(0,a.jsxs)(qo,{sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsx)(Dn,{agents:xe,onSelect:ge}),(0,a.jsx)(gt,{agents:xe,onSelect:ge,showHint:!ue&&!ae&&!ee&&!H&&!K&&!X,onUpdate:function(){return Y(!0)},onDelete:function(){return Q(!0)},setDialogModuleRepo:te,showLoading:be})]})]}):null}),(0,a.jsx)(Ho,{children:pe&&xe.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Vo,{sx:{background:U.palette.background.default,flexDirection:"column"},children:(0,a.jsxs)(k.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},children:[(0,a.jsxs)(k.Z,{children:[xe.map((function(e,t){return(0,a.jsx)(pr,{agent:e,index:t,onSelect:ge},e.id)})),(0,a.jsx)($o,{count:xe.length,onAgentAdd:ke})]}),(0,a.jsx)(Io,{}),(0,a.jsx)(Oo,{})]})}),(0,a.jsx)(qo,{sx:{boxShadow:"none"},onMouseOver:ve,onMouseDown:we,children:(0,a.jsx)(wo,{agents:xe,agentsReady:pe})}),(0,a.jsx)(Bo,{agents:xe}),(0,a.jsx)(En,{agents:xe})]}):null}),(0,a.jsxs)(Ko,{children:[(0,a.jsx)(Vo,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative"},children:(0,a.jsx)(Ir,{onProfileOpen:Se})}),pe&&xe.length?(0,a.jsxs)(qo,{sx:{alignItems:"center",boxShadow:"0px 1px 0px 0px ".concat((0,u.k)(U)," inset"),justifyContent:"space-between"},children:[(0,a.jsx)(E,{agents:xe}),(0,a.jsx)(nr,{agents:xe})]}):null]}),ae?(0,a.jsx)(Wn,{isOpen:!0}):null,ee?(0,a.jsx)(Qe,{isOpen:!0,setOpen:te,agents:xe,onAgentUpdate:Ze,onClose:function(){return te(!1)}}):null,H&&xe.length<Z().max.agentsCount?(0,a.jsx)(nt,{isOpen:!0,onAgentCreate:ye,onClose:function(){return V(!1)}}):null,K?(0,a.jsx)(rt,{isOpen:!0,agents:xe,onAgentUpdate:Ze,onClose:function(){return Y(!1)}}):null,X?(0,a.jsx)(it,{isOpen:!0,agents:xe,onAgentDelete:je,onClose:function(){return Q(!1)}}):null,ue?(0,a.jsx)(pt,{isOpen:!0,onClose:function(){return ce(!1)}}):null,re?(0,a.jsx)(_o,{isOpen:!0,onClose:function(){return ie(!1)},onOpen:(0,m.G)("notification")}):null]})};Yo.guestGuard=!0;var Go=Yo}},function(e){e.O(0,[901,884,149,991,880,955,774,888,179],(function(){return t=75557,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
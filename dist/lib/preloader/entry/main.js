/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright © 2024-2026 Oglama™ (https://oglama.com)
 * 
 * Licensed under the Oglama™ Source-Available License, Version 1.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     https://github.com/oglama/oglama/blob/main/LICENSE.txt
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var de=Object.defineProperty;var x=a=>{throw TypeError(a)};var me=(a,i,e)=>i in a?de(a,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[i]=e;var h=(a,i)=>()=>(i||a((i={exports:{}}).exports,i),i.exports);var s=(a,i,e)=>me(a,typeof i!="symbol"?i+"":i,e),C=(a,i,e)=>i.has(a)||x("Cannot "+e);var n=(a,i,e)=>(C(a,i,"read from private field"),e?e.call(a):i.get(a)),u=(a,i,e)=>i.has(a)?x("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(a):i.set(a,e),w=(a,i,e,t)=>(C(a,i,"write to private field"),t?t.call(a,e):i.set(a,e),e);var b=h((Ke,M)=>{var m;M.exports=(m=class{static getSourceChannelName(i){return"".concat(m.WINDOW_SOURCE,"/").concat(i)}static getTargetChannelName(i){return"".concat(m.WINDOW_TARGET,"/").concat(i)}static getWorkerChannelName(i){return"".concat(m.WINDOW_WORKER,"/").concat(i)}static generateKey(){return"".concat(Date.now().toString(36)).concat(Math.random().toString(36).substring(2,13))}},s(m,"WINDOW_MAIN_LOGIN","@main/login"),s(m,"WINDOW_MAIN","@main"),s(m,"WINDOW_SOURCE","@source"),s(m,"WINDOW_TARGET","@target"),s(m,"WINDOW_WORKER","@worker"),m)});var I=h((Qe,E)=>{var v,P,D,N;E.exports=(v=class{constructor(){u(this,P,{});u(this,D,!1);u(this,N,null)}_useRPC(i){w(this,D,Number.isInteger(i)&&i>0?i:!1)}_register(i){if(typeof i=="string")for(let e of Object.getOwnPropertyNames(this))["_","#"].includes(e[0])||typeof this[e]!="function"||(n(this,P)[e]="ipc:".concat(i,":").concat(e))}_runner(i,...e){let t=n(this,D),r=function(o,l,c){this.run=async function(){let p=null;if(typeof n(o,P)[l]=="string")if(t)try{let f=await fetch("http://0.0.0.0:".concat(t,"/ipc"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({channel:n(o,P)[l],args:c})});p=f.ok?await f.json():new Error(await f.json())}catch(f){p=new Error("".concat(f.message??f))}else{if(n(o,N)===null)try{w(o,N,require("electron").ipcRenderer)}catch{}p=typeof n(o,N)?.invoke=="function"?await n(o,N).invoke(n(o,P)[l],...c):null}if(p instanceof Error)throw new Error("".concat(v.devMode?"".concat(t?"rpc:":"").concat(n(o,P)[l]," "):"").concat(p.message??p));return p}};return new r(this,i,e)}async _promise(i,...e){return await this._runner(i,...e).run()}},P=new WeakMap,D=new WeakMap,N=new WeakMap,s(v,"devMode",!1),v)});var G=h((Je,U)=>{var ge=I();U.exports=class extends ge{constructor(){super();s(this,"openAgentFiles",e=>this._promise("openAgentFiles",e));s(this,"purge",e=>this._promise("purge",e));s(this,"runInit",(e,t=null,r=null,o=null)=>this._promise("runInit",e,t,r,o));s(this,"runDelete",(e,t)=>this._promise("runDelete",e,t));s(this,"envGet",e=>this._promise("envGet",e));s(this,"envSet",(e,t)=>this._promise("envSet",e,t));s(this,"sourceGet",e=>this._promise("sourceGet",e));s(this,"sourceSet",(e,t)=>this._promise("sourceSet",e,t));s(this,"inputsGet",(e,t="session",r=null)=>this._promise("inputsGet",e,t,r));s(this,"inputScalarsSet",(e,t,r=null)=>this._promise("inputScalarsSet",e,t,r));s(this,"inputFilesAdd",(e,t,r,o=null)=>this._promise("inputFilesAdd",e,t,r,o));s(this,"inputFilesDelete",(e,t,r,o=null)=>this._promise("inputFilesDelete",e,t,r,o));s(this,"inputTableQuery",(e,t,r=1,o=5e3,l=null)=>this._promise("inputTableQuery",e,t,r,o,l));s(this,"inputTableAdd",(e,t,r=[],o=null)=>this._promise("inputTableAdd",e,t,r,o));s(this,"inputTableGet",(e,t,r,o="session",l=null)=>this._promise("inputTableGet",e,t,r,o,l));s(this,"inputTableUpdate",(e,t,r,o,l=null)=>this._promise("inputTableUpdate",e,t,r,o,l));s(this,"inputTableDelete",(e,t,r=null,o=null)=>this._promise("inputTableDelete",e,t,r,o));s(this,"outputTableQuery",(e,t,r,o=1,l=5e3)=>this._promise("outputTableQuery",e,t,r,o,l));s(this,"outputTableAdd",(e,t,r,o)=>this._promise("outputTableAdd",e,t,r,o));s(this,"outputsGet",(e,t)=>this._promise("outputsGet",e,t));s(this,"outputsQuery",(e,t,r=null,o=null,l=null)=>this._promise("outputsQuery",e,t,r,o,l));s(this,"outputScalarSet",async(e,t,r,o)=>this._promise("outputScalarSet",e,t,r,o));s(this,"outputFilesInit",async(e,t,r,o=null)=>this._promise("outputFilesInit",e,t,r,o));s(this,"outputFilesAppend",async(e,t,r,o,l=null)=>this._promise("outputFilesAppend",e,t,r,o,l));s(this,"outputFilesDelete",async(e,t,r)=>this._promise("outputFilesDelete",e,t,r));this._register("diskStorage")}}});var L=h((Ye,j)=>{var fe=I();j.exports=class extends fe{constructor(){super();s(this,"getAt",(e,t)=>this._promise("getAt",e,t));s(this,"create",(e,t,r)=>this._promise("create",e,t,r));s(this,"readAll",(e,t)=>this._promise("readAll",e,t));s(this,"read",(e,t)=>this._promise("read",e,t));s(this,"updateName",(e,t,r)=>this._promise("updateName",e,t,r));s(this,"updateInfo",(e,t,r)=>this._promise("updateInfo",e,t,r));s(this,"updateReady",(e,t,r)=>this._promise("updateReady",e,t,r));s(this,"updateEnabled",(e,t,r)=>this._promise("updateEnabled",e,t,r));s(this,"delete",(e,t=null,r=null)=>this._promise("delete",e,t,r));this._register("session")}}});var H=h((tt,K)=>{var ye=I();K.exports=class extends ye{constructor(){super();s(this,"install",()=>this._promise("install"));s(this,"check",()=>this._promise("check"));this._register("updater")}}});var B=h((it,Q)=>{var we=I();Q.exports=class extends we{constructor(){super();s(this,"getOS",()=>this._promise("getOS"));s(this,"getName",()=>this._promise("getName"));s(this,"getUUID",()=>this._promise("getUUID"));s(this,"getSerialNumber",()=>this._promise("getSerialNumber"));s(this,"getRam",()=>this._promise("getRam"));s(this,"getCpuArch",()=>this._promise("getCpuArch"));s(this,"getCpuName",()=>this._promise("getCpuName"));s(this,"getFileSize",e=>this._promise("getFileSize",e));s(this,"getPostAuth",()=>this._promise("getPostAuth"));s(this,"setPostAuth",e=>this._promise("setPostAuth",!!e));s(this,"showFileInFolder",e=>this._promise("showFileInFolder",e));s(this,"showFileSelector",(e,t=[],r=!1)=>this._promise("showFileSelector",e,t,r));s(this,"sendRequest",(e,t="GET",r={},o={},l=!0,c=60,p=!0)=>this._promise("sendRequest",e,t,r,o,l,c,p));s(this,"openURL",e=>this._promise("openURL","".concat(e)));s(this,"logError",(e,t="")=>this._promise("logError",e,t));this._register("device")}}});var J=h((lt,z)=>{var Ie=I();z.exports=class extends Ie{constructor(){super();s(this,"list",()=>this._promise("list"));s(this,"closeAll",()=>this._promise("closeAll"));s(this,"open",e=>this._promise("open",e));s(this,"close",e=>this._promise("close",e));s(this,"webContents",(e,t,r)=>this._promise("webContents",e,t,r));this._register("source")}}});var X=h((ct,V)=>{var Pe=I();V.exports=class extends Pe{constructor(){super();s(this,"list",()=>this._promise("list"));s(this,"removeAll",()=>this._promise("removeAll"));s(this,"add",(e,t,r=!1)=>this._promise("add",e,t,r));s(this,"initWorker",e=>this._promise("initWorker",e));s(this,"remove",e=>this._promise("remove",e));s(this,"select",e=>this._promise("select",e));s(this,"getSelected",()=>this._promise("getSelected"));s(this,"setControlled",(e,t=!0)=>this._promise("setControlled",e,t));s(this,"openDevTools",(e,t=null)=>this._promise("openDevTools",e,t));s(this,"setDevToolsTitle",(e,t=null)=>this._promise("setDevToolsTitle",e,t));s(this,"getBounds",e=>this._promise("getBounds",e));s(this,"getMouse",e=>this._promise("getMouse",e));s(this,"moveMouse",(e,t,r,o=null,l=!1,c=[])=>this._promise("moveMouse",e,t,r,o,l,c));s(this,"jiggleMouse",(e,t=50,r=[])=>this._promise("jiggleMouse",e,t,r));s(this,"typeAt",(e,t,r,o,l=!1,c=5,p=250)=>this._promise("typeAt",e,t,r,o,l,c,p));s(this,"loadUrl",(e,t,r=60)=>this._promise("loadUrl",e,t,r));s(this,"getUrl",e=>this._promise("getUrl",e));s(this,"getTitle",e=>this._promise("getTitle",e));s(this,"reload",(e,t=!1,r=60)=>this._promise("reload",e,t,r));s(this,"goHome",e=>this._promise("goHome",e));s(this,"goBack",(e,t=60)=>this._promise("goBack",e,t));s(this,"goForward",(e,t=60)=>this._promise("goForward",e,t));s(this,"setFileInput",(e,t,r)=>this._promise("setFileInput",e,t,r));s(this,"openInNewWindow",(e,t)=>this._promise("openInNewWindow",e,t));s(this,"waitForDomReady",(e,t=60)=>this._promise("waitForDomReady",e,t));s(this,"saveDownload",(e,t,r,o=600,l=null)=>this._promise("saveDownload",e,t,r,o,l));s(this,"saveScreenshot",async(e,t,r,o="png",l=null,c=!1,p=100)=>this._promise("saveScreenshot",e,t,r,o,l,c,p));s(this,"captureFrame",(e,t=null,r=null,o=!1,l=null)=>this._promise("captureFrame",e,t,r,o,l));s(this,"getPreview",e=>this._promise("getPreview",e));s(this,"smoothScroll",(e,t,r=100,o=!0)=>this._promise("smoothScroll",e,t,r,o));s(this,"webContents",(e,t,r=[],o=null,l=[])=>this._promise("webContents",e,t,r,o,l));s(this,"sendKeys",(e,t,r={})=>this._promise("sendKeys",e,t,r));this._register("target")}}});var Z=h((_t,Y)=>{var ke=I();Y.exports=class extends ke{constructor(){super();s(this,"focus",()=>this._promise("focus"));this._register("main/login")}}});var se=h((gt,te)=>{var ve=I(),Ne=Z(),S,ee;te.exports=(ee=class extends ve{constructor(e=!0){super();s(this,"login",null);u(this,S,null);s(this,"focus",()=>this._promise("focus"));s(this,"setOnTop",(e=!0)=>this._promise("setOnTop",!!e));s(this,"getOnTop",()=>this._promise("getOnTop"));s(this,"setDarkMode",e=>this._promise("setDarkMode",!!e));s(this,"getDarkMode",()=>this._promise("getDarkMode"));s(this,"getProcessVersions",()=>this._promise("getProcessVersions"));s(this,"getPathForFile",e=>{if(n(this,S)===null)try{w(this,S,require("electron").webUtils)}catch{}return n(this,S)?.getPathForFile(e)||""});s(this,"quit",()=>this._promise("quit"));this._register("main"),e&&(this.login=new Ne)}},S=new WeakMap,ee)});var ie=h((wt,re)=>{var Oe=I();re.exports=class extends Oe{constructor(){super();s(this,"init",e=>this._promise("init",e));s(this,"getPort",()=>this._promise("getPort"));this._register("llm")}}});var F=h((kt,ne)=>{var{ipcRenderer:$,contextBridge:Se}=require("electron"),Te=G(),We=L(),De=H(),Ae=B(),qe=J(),be=X(),$e=se(),Fe=ie(),Re=I(),g=b(),_,T,d,W,oe;ne.exports=(oe=class{constructor(i,e=!0){u(this,_,"");u(this,T,{});u(this,d,{});u(this,W,{});s(this,"source",{send:(i,e,t)=>{this.send(g.getSourceChannelName(i),e,t)},invoke:async(i,e,t,r=0)=>await this.invoke(g.getSourceChannelName(i),e,t,r)});s(this,"target",{send:(i,e,t)=>{(async()=>this.send(g.getTargetChannelName(i),e,t))()},invoke:async(i,e,t,r=0)=>await this.invoke(g.getTargetChannelName(i),e,t,r)});s(this,"worker",{send:(i,e,t)=>{(async()=>this.send(g.getWorkerChannelName(i),e,t))()},invoke:async(i,e,t,r=0)=>await this.invoke(g.getWorkerChannelName(i),e,t,r)});let t=this;w(this,_,i),Re.devMode=!1,w(this,W,{irc:{handle:(...r)=>this.handle.call(this,...r),send:(...r)=>this.send.call(this,...r),invoke:async(...r)=>await this.invoke.call(this,...r),source:{send:(...r)=>this.source.send.call(this,...r),invoke:async(...r)=>await this.source.invoke.call(this,...r)},target:{send:(...r)=>this.target.send.call(this,...r),invoke:async(...r)=>await this.target.invoke.call(this,...r)},worker:{send:(...r)=>this.worker.send.call(this,...r),invoke:async(...r)=>await this.worker.invoke.call(this,...r)},winName:n(this,_)},ipc:{diskStorage:new Te,session:new We,updater:new De,device:new Ae,source:new qe,target:new be,main:new $e,llm:new Fe},devMode:!1}),$.on(n(this,_),(r,o)=>{if(o[0]==="irc-target:cancel-promises"&&typeof o[1]=="string"){for(let y of Object.keys(n(this,d)))if(n(this,d)[y].toWinName===g.getTargetChannelName(o[1])){try{typeof o[2]=="string"?n(this,d)[y].reject(new Error(o[2])):n(this,d)[y].resolve(null)}catch{}delete n(t,d)[y]}return}if(o.length<3)return;let[l,c,p]=o,{type:f,fromWin:R,promiseId:q}=p??{};if(f==="req")(async()=>{let y=null;try{if(typeof l!="string"||typeof n(t,T)[l]!="function")throw new Error('Inter-Renderer Communication: handle "'.concat(l,'" not declared yet'));Array.isArray(c)||(c=[]),y=await n(t,T)[l](...c)}catch(k){let _e=n(t,_).indexOf(g.WINDOW_TARGET)===0?"irc.target.invoke":n(t,_).indexOf(g.WINDOW_WORKER)===0?"irc.worker.invoke":n(t,_).indexOf(g.WINDOW_SOURCE)===0?"irc.source.invoke":n(t,_);y=new Error("".concat(_e,"(").concat(JSON.stringify(l),") ").concat(k.message??k)),n(t,_).indexOf(g.WINDOW_TARGET)===0||n(t,_).indexOf(g.WINDOW_WORKER)}typeof R=="string"&&typeof q=="string"&&$.send(R,l,y,{type:"res",promiseId:q})})();else{let y=typeof q=="string"?"".concat(l,":").concat(q):null;if(y!==null){let k=n(t,d)[y]??null;k!==null&&(c instanceof Error?k.reject(c):k.resolve(c),delete n(t,d)[y])}}}),e&&Se.exposeInMainWorld("sdk",n(this,W))}getSdk(){return n(this,W)}handle(i,e){typeof i=="string"&&typeof e=="function"&&(n(this,T)[i]=e)}send(i,e,t){do{if(typeof i!="string"||typeof e!="string")break;Array.isArray(t)||(t=[]),$.send(i,e,t,{type:"req",fromWin:n(this,_)})}while(!1)}async invoke(i,e,t,r=0){let o=this;if(typeof i!="string"||typeof e!="string")return null;Array.isArray(t)||(t=[]),r=parseInt(r,10),(!Number.isInteger(r)||r<0)&&(r=0);let l=g.generateKey(),c=new Promise((p,f)=>{n(this,d)["".concat(e,":").concat(l)]={resolve:p,reject:f,toWinName:i}});return r>0&&setTimeout(()=>{let p=typeof l=="string"?"".concat(e,":").concat(l):null;if(typeof n(o,d)[p]<"u"){try{n(o,d)[p].reject(new Error("".concat(e,"() timed out")))}catch{}delete n(o,d)[p]}},r*1e3),$.send(i,e,t,{type:"req",fromWin:n(this,_),promiseId:l}),c}},_=new WeakMap,T=new WeakMap,d=new WeakMap,W=new WeakMap,oe)});var pe=h((Ot,ae)=>{var xe=b(),Ce=F(),A,le;ae.exports=(le=class{constructor(){u(this,A);w(this,A,new Ce(xe.WINDOW_MAIN_LOGIN).getSdk());for(let i of Object.getOwnPropertyNames(this))typeof this[i]=="function"&&n(this,A).irc.handle(i,this[i])}},A=new WeakMap,le)});var he=h((Wt,ue)=>{var Me=b(),Ee=F(),O,ce;ue.exports=(ce=class{constructor(){u(this,O);s(this,"getOnTop",async()=>await n(this,O).ipc.main.getOnTop());s(this,"setOnTop",async(i=!0)=>await n(this,O).ipc.main.setOnTop(i));w(this,O,new Ee(Me.WINDOW_MAIN).getSdk());for(let i of Object.getOwnPropertyNames(this))typeof this[i]=="function"&&n(this,O).irc.handle(i,this[i])}},O=new WeakMap,ce)});var Ue=pe(),Ge=he(),je=process.argv.filter(a=>a.indexOf("--win-type=")>=0).shift();switch("".concat(je).split("=")[1]){case"main/login":new Ue;break;default:new Ge}

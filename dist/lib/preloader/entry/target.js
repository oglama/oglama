/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright Â© 2024-2025 Oglama (https://oglama.com)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ge=Object.defineProperty;var ce=p=>{throw TypeError(p)};var Ke=(p,i,e)=>i in p?Ge(p,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):p[i]=e;var C=(p,i)=>()=>(i||p((i={exports:{}}).exports,i),i.exports);var a=(p,i,e)=>Ke(p,typeof i!="symbol"?i+"":i,e),he=(p,i,e)=>i.has(p)||ce("Cannot "+e);var s=(p,i,e)=>(he(p,i,"read from private field"),e?e.call(p):i.get(p)),d=(p,i,e)=>i.has(p)?ce("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(p):i.set(p,e),v=(p,i,e,t)=>(he(p,i,"write to private field"),t?t.call(p,e):i.set(p,e),e);var se=C((dt,ue)=>{var N;ue.exports=(N=class{static getSourceChannelName(i){return"".concat(N.WINDOW_SOURCE,"/").concat(i)}static getTargetChannelName(i){return"".concat(N.WINDOW_TARGET,"/").concat(i)}static generateKey(){return"".concat(Date.now().toString(36)).concat(Math.random().toString(36).substring(2,13))}},a(N,"WINDOW_MAIN_LOGIN","@main/login"),a(N,"WINDOW_MAIN","@main"),a(N,"WINDOW_SOURCE","@source"),a(N,"WINDOW_TARGET","@target"),N)});var P=C((gt,de)=>{var{ipcRenderer:Ue}=require("electron"),W,pe;de.exports=(pe=class{constructor(){d(this,W,{})}_register(i){if(typeof i=="string")for(let e of Object.getOwnPropertyNames(this))["_","#"].includes(e[0])||typeof this[e]!="function"||(s(this,W)[e]="ipc:".concat(i,":").concat(e))}_runner(i,...e){let t=function(n,o,r){this.run=async function(){let l=null;if(typeof s(n,W)[o]=="string"&&(l=await Ue.invoke(s(n,W)[o],...r)),l instanceof Error)throw new Error("".concat(s(n,W)[o]," ").concat(l.message??l));return l}};return new t(this,i,e)}async _promise(i,...e){return await this._runner(i,...e).run()}},W=new WeakMap,pe)});var me=C((_t,fe)=>{var je=P();fe.exports=class extends je{constructor(){super();a(this,"openAgentFiles",e=>this._promise("openAgentFiles",e));a(this,"purge",e=>this._promise("purge",e));a(this,"runInit",(e,t=null,n=null,o=null)=>this._promise("runInit",e,t,n,o));a(this,"runDelete",(e,t)=>this._promise("runDelete",e,t));a(this,"envGet",e=>this._promise("envGet",e));a(this,"envSet",(e,t)=>this._promise("envSet",e,t));a(this,"sourceGet",e=>this._promise("sourceGet",e));a(this,"sourceSet",(e,t)=>this._promise("sourceSet",e,t));a(this,"inputsGet",(e,t="session",n=null)=>this._promise("inputsGet",e,t,n));a(this,"inputScalarsSet",(e,t,n=null)=>this._promise("inputScalarsSet",e,t,n));a(this,"inputFilesAdd",(e,t,n,o=null)=>this._promise("inputFilesAdd",e,t,n,o));a(this,"inputFilesDelete",(e,t,n,o=null)=>this._promise("inputFilesDelete",e,t,n,o));a(this,"inputTableQuery",(e,t,n=1,o=5e3,r=null)=>this._promise("inputTableQuery",e,t,n,o,r));a(this,"inputTableAdd",(e,t,n=[],o=null)=>this._promise("inputTableAdd",e,t,n,o));a(this,"inputTableGet",(e,t,n,o="session",r=null)=>this._promise("inputTableGet",e,t,n,o,r));a(this,"inputTableUpdate",(e,t,n,o,r=null)=>this._promise("inputTableUpdate",e,t,n,o,r));a(this,"inputTableDelete",(e,t,n=null,o=null)=>this._promise("inputTableDelete",e,t,n,o));a(this,"outputTableQuery",(e,t,n,o=1,r=5e3)=>this._promise("outputTableQuery",e,t,n,o,r));a(this,"outputTableAdd",(e,t,n,o)=>this._promise("outputTableAdd",e,t,n,o));a(this,"outputsGet",(e,t)=>this._promise("outputsGet",e,t));a(this,"outputsQuery",(e,t,n=null,o=null,r=null)=>this._promise("outputsQuery",e,t,n,o,r));a(this,"outputScalarSet",async(e,t,n,o)=>this._promise("outputScalarSet",e,t,n,o));a(this,"outputFilesInit",async(e,t,n,o=null)=>this._promise("outputFilesInit",e,t,n,o));a(this,"outputFilesAppend",async(e,t,n,o,r=null)=>this._promise("outputFilesAppend",e,t,n,o,r));a(this,"outputFilesDelete",async(e,t,n)=>this._promise("outputFilesDelete",e,t,n));this._register("diskStorage")}}});var we=C((kt,ge)=>{var Ve=P();ge.exports=class extends Ve{constructor(){super();a(this,"getAt",(e,t)=>this._promise("getAt",e,t));a(this,"create",(e,t,n)=>this._promise("create",e,t,n));a(this,"readAll",(e,t)=>this._promise("readAll",e,t));a(this,"read",(e,t)=>this._promise("read",e,t));a(this,"updateName",(e,t,n)=>this._promise("updateName",e,t,n));a(this,"updateInfo",(e,t,n)=>this._promise("updateInfo",e,t,n));a(this,"updateReady",(e,t,n)=>this._promise("updateReady",e,t,n));a(this,"updateEnabled",(e,t,n)=>this._promise("updateEnabled",e,t,n));a(this,"delete",(e,t=null,n=null)=>this._promise("delete",e,t,n));this._register("session")}}});var _e=C(($t,ye)=>{var He=P();ye.exports=class extends He{constructor(){super();a(this,"install",()=>this._promise("install"));a(this,"check",()=>this._promise("check"));this._register("updater")}}});var Ie=C((St,be)=>{var ze=P();be.exports=class extends ze{constructor(){super();a(this,"getOS",()=>this._promise("getOS"));a(this,"getName",()=>this._promise("getName"));a(this,"getUUID",()=>this._promise("getUUID"));a(this,"getSerialNumber",()=>this._promise("getSerialNumber"));a(this,"getRam",()=>this._promise("getRam"));a(this,"getCpuArch",()=>this._promise("getCpuArch"));a(this,"getCpuName",()=>this._promise("getCpuName"));a(this,"setPostAuth",e=>this._promise("setPostAuth",!!e));a(this,"getPostAuth",()=>this._promise("getPostAuth"));a(this,"showFileInFolder",e=>this._promise("showFileInFolder",e));a(this,"request",(e,t="GET",n={},o={},r=!0,l=60,c=!0)=>this._promise("request",e,t,n,o,r,l,c));this._register("device")}}});var Ee=C((Tt,ke)=>{var Qe=P();ke.exports=class extends Qe{constructor(){super();a(this,"list",()=>this._promise("list"));a(this,"closeAll",()=>this._promise("closeAll"));a(this,"open",e=>this._promise("open",e));a(this,"close",e=>this._promise("close",e));a(this,"webContents",(e,t,n)=>this._promise("webContents",e,t,n));this._register("source")}}});var $e=C((Ot,Ce)=>{var Xe=P();Ce.exports=class extends Xe{constructor(){super();a(this,"list",()=>this._promise("list"));a(this,"removeAll",()=>this._promise("removeAll"));a(this,"add",(e,t,n=!1)=>this._promise("add",e,t,n));a(this,"remove",e=>this._promise("remove",e));a(this,"select",e=>this._promise("select",e));a(this,"getSelected",()=>this._promise("getSelected"));a(this,"setControlled",(e,t=!0)=>this._promise("setControlled",e,t));a(this,"openDevTools",(e,t=null)=>this._promise("openDevTools",e,t));a(this,"getBounds",e=>this._promise("getBounds",e));a(this,"mouse",(e,t,n,o=null,r=!1,l=[])=>this._promise("mouse",e,t,n,o,r,l));a(this,"typeAt",(e,t,n,o,r=!1,l=5)=>this._promise("typeAt",e,t,n,o,r,l));a(this,"loadUrl",(e,t)=>this._promise("loadUrl",e,t));a(this,"getUrl",e=>this._promise("getUrl",e));a(this,"getTitle",e=>this._promise("getTitle",e));a(this,"reload",(e,t=!1)=>this._promise("reload",e,t));a(this,"goHome",e=>this._promise("goHome",e));a(this,"goBack",e=>this._promise("goBack",e));a(this,"goForward",e=>this._promise("goForward",e));a(this,"setFileInput",(e,t,n)=>this._promise("setFileInput",e,t,n));a(this,"openInNewWindow",(e,t)=>this._promise("openInNewWindow",e,t));a(this,"waitForDomReady",(e,t=30)=>this._promise("waitForDomReady",e,t));a(this,"saveDownload",(e,t,n,o=600,r=null)=>this._promise("saveDownload",e,t,n,o,r));a(this,"webContents",(e,t,n)=>this._promise("webContents",e,t,n));a(this,"sendKeys",(e,t,n={})=>this._promise("sendKeys",e,t,n));this._register("target")}}});var Ae=C((Wt,Me)=>{var Ye=P();Me.exports=class extends Ye{constructor(){super();a(this,"openExternal",e=>this._promise("openExternal","".concat(e)));this._register("main/login")}}});var xe=C((Ft,Se)=>{var Je=P(),Ze=Ae();Se.exports=class extends Je{constructor(){super();a(this,"login",null);a(this,"focus",()=>this._promise("focus"));a(this,"setOnTop",(e=!0)=>this._promise("setOnTop",!!e));a(this,"getOnTop",()=>this._promise("getOnTop"));a(this,"setDarkMode",e=>this._promise("setDarkMode",!!e));a(this,"getDarkMode",()=>this._promise("getDarkMode"));a(this,"getProcessVersions",()=>this._promise("getProcessVersions"));a(this,"quit",()=>this._promise("quit"));a(this,"openExternal",e=>this._promise("openExternal","".concat(e)));a(this,"showOpenDialog",(e,t=[],n=!1)=>this._promise("showOpenDialog",e,t,n));this._register("main"),this.login=new Ze}}});var Te=C((Kt,Ne)=>{var et=P();Ne.exports=class extends et{constructor(){super();a(this,"install",e=>this._promise("install",e));a(this,"getPort",()=>this._promise("getPort"));this._register("llm")}}});var Oe=C((Vt,Pe)=>{var{ipcRenderer:X,contextBridge:tt}=require("electron"),st=me(),it=we(),nt=_e(),rt=Ie(),ot=Ee(),at=$e(),lt=xe(),ct=Te(),D=se(),A,B,I,G,ve;Pe.exports=(ve=class{constructor(i,e=!0){d(this,A,"");d(this,B,{});d(this,I,{});d(this,G,{});a(this,"source",{send:(i,e,t)=>{this.send(D.getSourceChannelName(i),e,t)},invoke:async(i,e,t,n=0)=>await this.invoke(D.getSourceChannelName(i),e,t,n)});a(this,"target",{send:(i,e,t)=>{(async()=>this.send(D.getTargetChannelName(i),e,t))()},invoke:async(i,e,t,n=0)=>await this.invoke(D.getTargetChannelName(i),e,t,n)});let t=this;v(this,A,i),v(this,G,{ibc:{handle:(...n)=>this.handle.call(this,...n),send:(...n)=>this.send.call(this,...n),invoke:async(...n)=>await this.invoke.call(this,...n),source:{send:(...n)=>this.source.send.call(this,...n),invoke:async(...n)=>await this.source.invoke.call(this,...n)},target:{send:(...n)=>this.target.send.call(this,...n),invoke:async(...n)=>await this.target.invoke.call(this,...n)},winName:s(this,A)},ipc:{diskStorage:new st,session:new it,updater:new nt,device:new rt,source:new ot,target:new at,main:new lt,llm:new ct},devMode:!1}),X.on(s(this,A),(n,o)=>{if(o[0]==="ibc-target:cancel-promises"&&typeof o[1]=="string"){for(let w of Object.keys(s(this,I)))if(s(this,I)[w].toWinName===D.getTargetChannelName(o[1])){try{typeof o[2]=="string"?s(this,I)[w].reject(new Error(o[2])):s(this,I)[w].resolve(null)}catch{}delete s(t,I)[w]}return}if(o.length<3)return;let[r,l,c]=o,{type:u,fromWin:_,promiseId:k}=c??{};if(u==="req")(async()=>{let w=null;try{if(typeof r!="string"||typeof s(t,B)[r]!="function")throw new Error('Inter-Browser Communication: handle "'.concat(r,'" not declared yet'));Array.isArray(l)||(l=[]),w=await s(t,B)[r](...l)}catch(x){let Z=s(t,A).indexOf(D.WINDOW_TARGET)===0?"ibc.target.invoke":s(t,A).indexOf(D.WINDOW_SOURCE)===0?"ibc.source.invoke":s(t,A);w=new Error("".concat(Z,"(").concat(JSON.stringify(r),") ").concat(x.message??x)),s(t,A).indexOf(D.WINDOW_TARGET)===0&&console.warn("".concat(r,"() ").concat(x.message??x))}typeof _=="string"&&typeof k=="string"&&X.send(_,r,w,{type:"res",promiseId:k})})();else{let w=typeof k=="string"?"".concat(r,":").concat(k):null;if(w!==null){let x=s(t,I)[w]??null;x!==null&&(l instanceof Error?x.reject(l):x.resolve(l),delete s(t,I)[w])}}}),e&&tt.exposeInMainWorld("sdk",s(this,G))}getSdk(){return s(this,G)}handle(i,e){typeof i=="string"&&typeof e=="function"&&(s(this,B)[i]=e)}send(i,e,t){do{if(typeof i!="string"||typeof e!="string")break;Array.isArray(t)||(t=[]),X.send(i,e,t,{type:"req",fromWin:s(this,A)})}while(!1)}async invoke(i,e,t,n=0){let o=this;if(typeof i!="string"||typeof e!="string")return null;Array.isArray(t)||(t=[]),n=parseInt(n,10),(!Number.isInteger(n)||n<0)&&(n=0);let r=D.generateKey(),l=new Promise((c,u)=>{s(this,I)["".concat(e,":").concat(r)]={resolve:c,reject:u,toWinName:i}});return n>0&&setTimeout(()=>{let c=typeof r=="string"?"".concat(e,":").concat(r):null;if(typeof s(o,I)[c]<"u"){try{s(o,I)[c].reject(new Error("".concat(e,"() timed out")))}catch{}delete s(o,I)[c]}},n*1e3),X.send(i,e,t,{type:"req",fromWin:s(this,A),promiseId:r}),l}},A=new WeakMap,B=new WeakMap,I=new WeakMap,G=new WeakMap,ve)});var We=C((Qt,qe)=>{var j=se(),ht=Oe(),q=150,g,f,L,K,y,b,h,R,m,Y,V,S,U,O,J,H,z,T,F,Q,De;qe.exports=(De=class{constructor(i){d(this,g);d(this,f);d(this,L,new WeakMap);d(this,K,new Map);d(this,y,{x:0,y:0,name:null});d(this,b,new AbortController);d(this,h,async i=>{if(s(this,b).signal.aborted)throw v(this,b,new AbortController),new Error("action aborted");await new Promise(e=>setTimeout(e,i))});d(this,R,i=>{if(!(i instanceof Element)||!i.isConnected)return null;let e=s(this,L).get(i);return typeof e!="string"&&(e=j.generateKey(),s(this,L).set(i,e),s(this,K).set(e,i)),e});d(this,m,i=>{if(typeof i!="string")return null;let e=s(this,K).get(i);return typeof e!="object"?null:!(e instanceof Element)||!e.isConnected||i!==s(this,L).get(e)?(s(this,L).delete(e),s(this,K).delete(i),null):e});d(this,Y,i=>{let e=s(this,m).call(this,i),t=null,n=(r,l)=>typeof l=="string"&&r===document.querySelector(l),o=r=>{let l=r.tagName.toLowerCase();if(n(r,l))return l;for(let u of r.attributes)if((["type","name","role","aria-label","aria-labelledby","for"].includes(u.name.toLowerCase())||u.name.toLowerCase().indexOf("data-")===0)&&(l+="[".concat(u.name,'="').concat(CSS.escape(u.value),'"]'),n(r,l)))return l;let c=l;for(let u of r.classList)if(l+=".".concat(CSS.escape(u)),n(r,l))return l;return c};do{if(!(e instanceof Element))break;let r=e.id?"#".concat(CSS.escape(e.id)):null;if(n(e,r)){t=r;break}let l=o(e);if(n(e,l)){t=l;break}let c=e,u=l;for(;c.parentElement;){c=c.parentElement;let _=o(c),k=Array.from(c.parentElement?.children??[]);if(k.length&&(_+=":nth-child(".concat(k.indexOf(c)+1,")")),u="".concat(_," > ").concat(u),n(e,u)){t=u;break}}}while(!1);return t});d(this,V,()=>{let i=[];for(let e of[...document.querySelectorAll("select[multiple]")])if(s(this,z).call(this,e,0)){let{left:t,top:n,width:o,height:r}=e.getBoundingClientRect();i.push({x:parseInt(t,10),y:parseInt(n,10),w:parseInt(o,10),h:parseInt(r,10)})}return i});d(this,S,async(i,e,t=null,n=!1)=>{if(await s(this,h).call(this,10),i=parseInt(i,10),e=parseInt(e,10),!Number.isInteger(i)||!Number.isInteger(e))return!1;i<0&&(i=0),e<0&&(e=0),["click","double-click"].includes(t)||(t=null);let o=await s(this,f).ipc.target.mouse(s(this,g),i,e,t,n,s(this,V).call(this));return v(this,y,{x:i,y:e,name:t}),o});d(this,U,async(i,e)=>{let t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,o=i<100?1:i>t-100?0:Math.floor(Math.random()*2),r=e<100?1:e>n-100?0:Math.floor(Math.random()*2),l=Math.abs(i+(o?1:-1)*(10+Math.floor(Math.random()*41))),c=Math.abs(e+(r?1:-1)*(10+Math.floor(Math.random()*41))),u=await s(this,S).call(this,l,c);return await s(this,h).call(this,150),u});d(this,O,i=>{if(!(i instanceof Element))return null;let{left:e,top:t,width:n,height:o}=i.getBoundingClientRect(),r=Math.floor(e+n/2+(n>4?-1+Math.floor(Math.random()*3):0)),l=Math.floor(t+o/2+(o>4?-1+Math.floor(Math.random()*3):0));return{x:r,y:l,left:e,top:t}});d(this,J,i=>{let e=!1;do{if(!(i instanceof Element))break;let t=i.tagName.toLowerCase();if(i.isContentEditable||t==="textarea"){e=!0;break}if(t==="input"&&["text","search","email","url","tel","password","number"].includes(i.type.toLowerCase())){e=!0;break}}while(!1);return e});d(this,H,i=>{let e=!1;do{if(!(i instanceof Element))break;let t=getComputedStyle(i);e=i.offsetParent!==null&&t.display!=="none"&&t.visibility!=="hidden"&&t.opacity!=="0"}while(!1);return e});d(this,z,(i,e=1)=>{let t=!1;do{if(!(i instanceof Element))break;let n=i.getBoundingClientRect();t=n.top+n.height-e>0&&n.top+e<(window.innerHeight||document.documentElement.clientHeight)}while(!1);return t});d(this,T,async i=>{if(await s(this,h).call(this,50),!(i instanceof Element))return!1;await s(this,f).ipc.target.webContents(s(this,g),"sendInputEvent",[{type:"mouseWheel",x:s(this,y).x,y:s(this,y).y,deltaX:0,deltaY:(Math.floor(Math.random()*2)?1:-1)*(Math.floor(Math.random()*3)+1)}]),await s(this,h).call(this,50+Math.floor(Math.random()*51)),i.scrollIntoView({behavior:"instant",block:"center",inline:"center"}),await s(this,h).call(this,350+Math.floor(Math.random()*51));let e=s(this,O).call(this,i);return e!==null&&await s(this,S).call(this,e.x,e.y),!0});d(this,F,async(i,e=60)=>{let t=new Date().getTime(),n=!1;do{if(new Date().getTime()-t>=e*1e3){n=!1;break}if(n=await i(),n!==!1)break;await s(this,h).call(this,1e3)}while(!0);return n});d(this,Q,(i="GET",e={},t={},n=!0)=>{let o=typeof i=="string"?i.trim().toUpperCase():"GET";o.length||(o="GET");let r;if(!["GET","HEAD"].includes(o)){if(n)r=JSON.stringify(e);else if(r=new FormData,typeof e=="object"&&e!==null)for(let c of Object.keys(e))FormData.append(c,e[c])}let l={};if(typeof t=="object"&&t!==null)for(let c of Object.keys(t)){let u=c.toLowerCase().trim();u.length&&(l[u]=t[c])}return n&&(l["content-type"]="application/json"),{method:o,body:r,headers:l}});a(this,"controlled",async(i=!0)=>{i?s(this,b).signal.aborted&&v(this,b,new AbortController):s(this,b).signal.aborted||s(this,b).abort("Action cancelled"),await s(this,f).ipc.target.setControlled(s(this,g),!!i)});a(this,"query",async(i,e=null,t=null,n=!1)=>{await s(this,h).call(this,10);let o=[],r=[];if(i=typeof i=="string"?i.trim():"",e=typeof e=="string"&&e.length?e.trim().toLowerCase():null,i.length){let l=typeof t=="string"?s(this,m).call(this,t):document;r=typeof l?.querySelectorAll=="function"?[...l.querySelectorAll(i)].filter(c=>c instanceof Element&&c.isConnected):[],r.length&&n&&(r=r.filter(c=>{let{top:u,height:_}=c.getBoundingClientRect();return u+_>0})),r.length&&typeof e=="string"&&(r=r.filter(c=>c.innerText.toLowerCase().indexOf(e)!==-1)),o=r.map(c=>s(this,R).call(this,c))}return o});a(this,"queryParent",async(i,e=null,t=null)=>{await s(this,h).call(this,10);let n=null,o=null;e=typeof e=="string"?e.trim():"",t=typeof t=="string"&&t.length?t.trim().toLowerCase():null;let r=s(this,m).call(this,i);if(r instanceof Element){for(;o===null&&r&&r!==document;)r=r.parentElement,r&&(!e.length||r.matches(e))&&(typeof t!="string"||r.innerText.toLowerCase().indexOf(t)!==-1)&&(o=r);n=s(this,R).call(this,o)}return n});a(this,"querySiblings",async(i,e,t=null)=>{await s(this,h).call(this,10);let n=[],o=[];e=typeof e=="string"?e.trim():"",t=typeof t=="string"&&t.length?t.trim().toLowerCase():null;let r=s(this,m).call(this,i);if(r instanceof Element){let l=r.parentElement;if(document!==l)for(let c of Array.from(l.children))c&&c!==r&&(!e.length||c.matches(e))&&(typeof t!="string"||c.innerText.toLowerCase().indexOf(t)!==-1)&&(o.push(c),n.push(s(this,R).call(this,c)))}return n});a(this,"queryAt",async(i,e,t=null,n=null)=>{await s(this,h).call(this,10);let o=null,r=null;t=typeof t=="string"?t.trim():"",n=typeof n=="string"&&n.length?n.trim().toLowerCase():null;let l=[],c=[],u=null;for(;(u=document.elementFromPoint(i,e))&&!c.includes(u);){if((!t.length||u.matches(t))&&(typeof n!="string"||u.innerText.toLowerCase().indexOf(n)!==-1)){r=u,o=s(this,R).call(this,u);break}c.push(u),l.push({element:u,display:u.style.display}),u.style.display="none"}return l.forEach(({element:_,display:k})=>{_.style.display=k}),o});a(this,"awaitPresent",async(i,e=null,t=null,n=60)=>(await s(this,h).call(this,10),await s(this,F).call(this,async()=>{let o=await this.query(i,e,t);return Array.isArray(o)&&o.length?o:!1},n)));a(this,"awaitNotPresent",async(i,e=60)=>(await s(this,h).call(this,10),await s(this,F).call(this,async()=>!(s(this,m).call(this,i)instanceof Element),e)));a(this,"awaitVisible",async(i,e=60)=>{await s(this,h).call(this,10);let t=s(this,m).call(this,i);return t instanceof Element?await s(this,F).call(this,async()=>s(this,H).call(this,t),e):!1});a(this,"awaitNotVisible",async(i,e=60)=>{await s(this,h).call(this,10);let t=s(this,m).call(this,i);return t instanceof Element?await s(this,F).call(this,async()=>{let n=getComputedStyle(t);return!(t.offsetParent!==null&&n.display!=="none"&&n.visibility!=="hidden"&&n.opacity!=="0")},e):!0});a(this,"scrollIntoView",async i=>await s(this,T).call(this,s(this,m).call(this,i)));a(this,"getBox",async i=>{await s(this,h).call(this,10);let e=s(this,m).call(this,i);if(!(e instanceof Element))return null;let{top:t,left:n,width:o,height:r}=e.getBoundingClientRect();return{left:parseInt(n,10),top:parseInt(t,10),width:parseInt(o,10),height:parseInt(r,10)}});a(this,"getValue",async i=>{await s(this,h).call(this,10);let e=s(this,m).call(this,i),t=null;if(e instanceof Element){let n=e.closest("form")||document;switch(e.tagName.toLowerCase()){case"input":switch(e.type.toLowerCase()){case"checkbox":if(n){let o=n.querySelectorAll('input[type="checkbox"][name="'.concat(CSS.escape(e.name),'"]'));t=o.length>1?[...o].filter(r=>r.checked).map(r=>r.value):e.checked}break;case"radio":n&&(t=[...n.querySelectorAll('input[type="radio"][name="'.concat(CSS.escape(e.name),'"]'))].reduce((r,l)=>l.checked?l.value:r,null));break;case"file":t=[...e.files].map(o=>({name:o.name,size:o.size,type:o.type,lastModified:o.lastModified}));break;default:t=e.value;break}break;case"textarea":t=e.value;break;case"select":t=e.multiple?Array.from(e.selectedOptions).map(o=>o.value):e.value;break}}return t});a(this,"getAttributes",async(i,e=[])=>{await s(this,h).call(this,10);let t={},n=s(this,m).call(this,i);if(n instanceof Element)for(let o of n.attributes){let r=o.name.toLowerCase();(!e.length||e.includes(r))&&(t[r]="".concat(o.value))}return t});a(this,"getTagName",async i=>{await s(this,h).call(this,10);let e=s(this,m).call(this,i),t=null;return e instanceof Element&&(t=e.tagName.toLowerCase()),t});a(this,"getContent",async(i,e=!1)=>{await s(this,h).call(this,10);let t=s(this,m).call(this,i),n=null;return t instanceof Element&&(n=e?t.innerHTML:t.innerText),n});a(this,"getVisible",async i=>(await s(this,h).call(this,10),s(this,H).call(this,s(this,m).call(this,i))));a(this,"getInViewport",async i=>(await s(this,h).call(this,10),s(this,z).call(this,s(this,m).call(this,i))));a(this,"getViewportSize",async()=>(await s(this,h).call(this,10),{width:window.innerWidth||document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}));a(this,"scroll",async(i,e=!0)=>(await s(this,h).call(this,10),i=parseInt(i,10),Number.isInteger(i)?(await s(this,f).ipc.target.webContents(s(this,g),"sendInputEvent",[{type:"mouseWheel",x:s(this,y).x,y:s(this,y).y,...e?{deltaX:0,deltaY:-i}:{deltaX:-i,deltaY:0}}]),await s(this,h).call(this,q),!0):!1));a(this,"scrollTo",async(i,e=0)=>{await s(this,h).call(this,10);let t=s(this,m).call(this,i);if(!(t instanceof Element))return!1;await s(this,T).call(this,t),e=parseInt(e,10),Number.isInteger(e)||(e=0);let n=s(this,O).call(this,t);await s(this,S).call(this,n.x,s(this,y).y);let o=Math.round(e-t.getBoundingClientRect().top);return await s(this,f).ipc.target.webContents(s(this,g),"sendInputEvent",[{type:"mouseWheel",x:s(this,y).x,y:s(this,y).y,deltaX:0,deltaY:o}]),n=s(this,O).call(this,t),await s(this,S).call(this,n.x,n.top+10+Math.floor(Math.random()*11)),await s(this,h).call(this,q),!0});a(this,"chooseFiles",async(i,e)=>{await s(this,h).call(this,10);let t=s(this,m).call(this,i);if(!(t instanceof Element)||t.tagName.toLowerCase()!=="input"||t.type.toLowerCase()!=="file"||(e=(Array.isArray(e)?e:[]).map(r=>"".concat(r).trim()).filter(r=>r.length),!e.length))return!1;let n=s(this,Y).call(this,i);if(typeof n!="string")return!1;await s(this,T).call(this,t);let o=await s(this,f).ipc.target.setFileInput(s(this,g),n,e);return await s(this,h).call(this,q),o});a(this,"saveRequest",async(i,e,t,n="GET",o={},r={},l=!0,c=600,u=null)=>{await s(this,h).call(this,10);let _="".concat(i,"-").concat(e),k=new Date().getTime();if(typeof u!="string"||!u.length){u=null;try{let E=new URL(t).pathname.match(/\.([\w]+)$/i);E&&(u=E[1])}catch{}}let{body:w,method:x,headers:Z}=s(this,Q).call(this,n,o,r,l),{fileName:$,filePath:Re,minSize:ie,maxSize:ee}=await s(this,f).ipc.diskStorage.outputFilesInit(s(this,g),i,e,u),M=0,ne=(E=null)=>{s(this,f).ibc.send(j.WINDOW_MAIN,"ibc-target:download:info",[s(this,g),_,{fileName:$,totalBytes:M,progress:"100",done:!0,error:E}])};try{if(s(this,b).signal.aborted)throw new Error('Download cancelled for "'.concat($,'"'));s(this,f).ibc.send(j.WINDOW_MAIN,"ibc-target:download:info",[s(this,g),_,{fileName:$,totalBytes:M,progress:"0",done:!1,error:null}]);let E=await fetch(t,{signal:s(this,b).signal,body:w,method:x,headers:Z,priority:"high",redirect:"follow"});if(!E.ok)throw new Error('HTTP status for "'.concat($,'": ').concat(E.status));let re=E.headers.get("Content-Length");if(re!==null&&(M=re),M>0){if(Number.isInteger(ie)&&M<ie*1048576)throw new Error('Minimum file size not met for "'.concat($,'" (').concat((M/1048576).toFixed(3),"MB)"));if(Number.isInteger(ee)&&M>ee*1048576)throw new Error('Maximum file size exceeded for "'.concat($,'" (').concat((M/1048576).toFixed(3),"MB)"))}let Fe=E.body.getReader(),oe=!1,ae=0;for(;;){let{done:Be,value:te}=await Fe.read();if(typeof te<"u"){if(!await s(this,f).ipc.diskStorage.outputFilesAppend(s(this,g),i,$,Buffer.from(te),ee))throw new Error('Could not save "'.concat($,'"'));if(new Date().getTime()-k>=c*1e3)throw new Error('Download timed out for "'.concat($,'" after ').concat(c,"s"));ae+=te.length}if(!oe||M>0){oe=!0;let le=M>0?(ae/M*100).toFixed(2):"0";s(this,f).ibc.send(j.WINDOW_MAIN,"ibc-target:download:info",[s(this,g),_,{fileName:$,totalBytes:M,progress:le,done:!1,error:null}])}if(s(this,b).signal.aborted)throw new Error('Download cancelled for "'.concat($,'"'));if(Be){ne();break}}}catch(E){return ne("".concat(E.message??E)),await s(this,f).ipc.diskStorage.outputFilesDelete(s(this,g),i,$),null}return Re});a(this,"makeRequest",async(i,e="GET",t={},n={},o=!0,r=60,l=!0)=>{await s(this,h).call(this,10);let{body:c,method:u,headers:_}=s(this,Q).call(this,e,t,n,o),k=setTimeout(()=>s(this,b).abort("Request timed out after ".concat(r,"s")),r*1e3);try{if(s(this,b).signal.aborted)throw new Error("Request cancelled");let w=await fetch(i,{signal:s(this,b).signal,body:c,method:u,headers:_,priority:"high",redirect:"follow"});return!l&&w.body?.cancel?.(),{ok:w.ok,status:w.status,headers:Object.fromEntries(w.headers.entries()),data:l?o?await w.json():await w.text():null}}finally{clearTimeout(k)}});a(this,"saveUrl",async(i,e,t,n=600,o=null)=>(t=new URL(t).toString(),setTimeout(()=>{let r=document.createElement("a");r.href=t,r.style.display="none",r.download=t.replace(/\/+$/g,"").replace(/^.*\//g,"")||e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},250),await s(this,f).ipc.target.saveDownload(s(this,g),i,e,n,o)));a(this,"clickAt",async(i,e,t=!1,n=!1)=>{await s(this,h).call(this,10);let o=await s(this,S).call(this,i,e,t?"double-click":"click");return!n&&await s(this,U).call(this,i,e),o});a(this,"clickOn",async(i,e=!1,t=!1)=>{await s(this,h).call(this,10);let n=s(this,m).call(this,i);if(!(n instanceof Element))return!1;await s(this,T).call(this,n);let o=s(this,O).call(this,n);return await this.clickAt(o.x,o.y,e,t)});a(this,"hoverAt",async(i,e)=>await s(this,S).call(this,i,e));a(this,"hoverOn",async i=>{await s(this,h).call(this,10);let e=s(this,m).call(this,i);if(!(e instanceof Element))return!1;await s(this,T).call(this,e);let t=s(this,O).call(this,e);return await s(this,S).call(this,t.x,t.y)});a(this,"hoverCenter",async()=>{await s(this,h).call(this,10),await s(this,U).call(this,s(this,y).x??0,s(this,y).y??0);let i=Math.round(window.innerWidth||document.documentElement.clientWidth)/2,e=Math.round(window.innerHeight||document.documentElement.clientHeight)/2;return await s(this,S).call(this,i,e)});a(this,"jiggle",async(i=10)=>{if(await s(this,h).call(this,10),!Number.isInteger(i)||i<1)return!1;let e=Math.floor(Math.random()*3)+5,t=[];for(let o=1;o<=e;o++){let r=Math.floor(Math.random()*(i/2))+Math.round(i/2),l=Math.floor(Math.random()*360)*(Math.PI/180),c=s(this,y).x+r*Math.cos(l),u=s(this,y).y+r*Math.sin(l);t.push({x:c,y:u})}t.push(s(this,y));let n=s(this,V).call(this);for(let o of t)await s(this,f).ipc.target.mouse(s(this,g),o.x,o.y,null,!0,n),v(this,y,{...o,name:null});return await s(this,h).call(this,q),!0});a(this,"type",async(i,e,t=!1,n=!1,o=5)=>{await s(this,h).call(this,10),typeof e!="string"&&(e=""),o=parseInt(o,10),o=Number.isInteger(o)?o>250?250:o<1?1:o:5;let r=s(this,m).call(this,i);if(!s(this,J).call(this,r))return!1;await s(this,T).call(this,r);let l=s(this,O).call(this,r),c=await s(this,f).ipc.target.typeAt(s(this,g),l.x,l.y,e,t,o);return n&&(await s(this,h).call(this,75+Math.floor(Math.random()*125)),await s(this,f).ipc.target.sendKeys(s(this,g),"enter")),await s(this,h).call(this,q),c});a(this,"typeAt",async(i,e,t,n=!1,o=!1,r=5)=>{await s(this,h).call(this,10),typeof t!="string"&&(t=""),r=parseInt(r,10),r=Number.isInteger(r)?r>250?250:r<1?1:r:5;let l=await s(this,f).ipc.target.typeAt(s(this,g),i,e,t,n,r);return o&&await s(this,f).ipc.target.sendKeys(s(this,g),"enter"),await s(this,h).call(this,q),l});a(this,"select",async(i,e)=>{await s(this,h).call(this,10);let t=s(this,m).call(this,i);if(!(t instanceof HTMLSelectElement))return!1;e=(Array.isArray(e)?e:[e]).map(r=>"".concat(r)),await s(this,T).call(this,t),t.focus();let n=process.platform==="darwin"&&!t.multiple;if(n&&(t.multiple=!0),t.multiple){for(let r of t.options)(e.includes(r.value)?!r.selected:r.selected)&&(r.selected=e.includes(r.value));await s(this,h).call(this,25+Math.floor(Math.random()*26));for(let r=0;r<=1;r++)await s(this,f).ipc.target.sendKeys(s(this,g),"space",{ctrl:!0}),await s(this,h).call(this,25+Math.floor(Math.random()*26))}else{let r=Array.from(t.options).map(l=>l.value).indexOf(e[0]);if(r!==-1){t.value=e[0],await s(this,h).call(this,25+Math.floor(Math.random()*26));let l=r===0?["right","left"]:["left","right"];for(let c of l)await s(this,f).ipc.target.sendKeys(s(this,g),c),await s(this,h).call(this,25+Math.floor(Math.random()*26))}}n&&(t.multiple=!1),t.blur(),await s(this,U).call(this,s(this,y).x,s(this,y).y);let{bottom:o}=t.getBoundingClientRect();return await s(this,S).call(this,s(this,y).x,o+10),await s(this,h).call(this,q),!0});a(this,"check",async(i,e)=>{await s(this,h).call(this,10);let t=s(this,m).call(this,i);if(!(t instanceof Element)||t.tagName.toLowerCase()!=="input"||!["checkbox","radio"].includes(t.type.toLowerCase()))return!1;e=(Array.isArray(e)?e:[e]).map(o=>"".concat(o));let n=[];do{let o=t.closest("form")||document;if(!o)break;if(t.type.toLowerCase()==="checkbox"){let l=o.querySelectorAll('input[type="checkbox"][name="'.concat(CSS.escape(t.name),'"]'));for(let c of l)(e.includes(c.value)?!c.checked:c.checked)&&n.push(c);break}if(!e.length)break;let r=o.querySelectorAll('input[type="radio"][name="'.concat(CSS.escape(t.name),'"]'));for(let l of r)if(e[0]===l.value&&!l.checked){n.push(l);break}}while(!1);if(await s(this,h).call(this,250),n.length){for(let o of n){await s(this,T).call(this,o);let r=s(this,O).call(this,o);r!==null&&await this.clickAt(r.x,r.y)}await s(this,h).call(this,q)}return!0});v(this,g,i),v(this,f,new ht(j.getTargetChannelName(i),!1).getSdk());for(let e of Object.getOwnPropertyNames(this))typeof this[e]=="function"&&s(this,f).ibc.handle(e,this[e])}},g=new WeakMap,f=new WeakMap,L=new WeakMap,K=new WeakMap,y=new WeakMap,b=new WeakMap,h=new WeakMap,R=new WeakMap,m=new WeakMap,Y=new WeakMap,V=new WeakMap,S=new WeakMap,U=new WeakMap,O=new WeakMap,J=new WeakMap,H=new WeakMap,z=new WeakMap,T=new WeakMap,F=new WeakMap,Q=new WeakMap,De)});var ut=We(),Le=process.argv.filter(p=>p.indexOf("--agent-id=")>=0).shift();if(typeof Le=="string"){let p=Le.split("=")[1];p.length&&new ut(p)}

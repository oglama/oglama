/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright © 2024-2026 Oglama™ (https://oglama.com)
 * 
 * Licensed under the Oglama™ Source-Available License, Version 1.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     https://github.com/oglama/oglama/blob/main/LICENSE.txt
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DP=Object.defineProperty;var A0=i=>{throw TypeError(i)};var PP=(i,e,t)=>e in i?DP(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var A=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var _=(i,e,t)=>PP(i,typeof e!="symbol"?e+"":e,t),Uh=(i,e,t)=>e.has(i)||A0("Cannot "+t);var p=(i,e,t)=>(Uh(i,e,"read from private field"),t?t.call(i):e.get(i)),L=(i,e,t)=>e.has(i)?A0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),V=(i,e,t,r)=>(Uh(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),j=(i,e,t)=>(Uh(i,e,"access private method"),t);var jt=A((g6,E0)=>{var Nt;E0.exports=(Nt=class{static getSourceChannelName(e){return"".concat(Nt.WINDOW_SOURCE,"/").concat(e)}static getTargetChannelName(e){return"".concat(Nt.WINDOW_TARGET,"/").concat(e)}static getWorkerChannelName(e){return"".concat(Nt.WINDOW_WORKER,"/").concat(e)}static generateKey(){return"".concat(Date.now().toString(36)).concat(Math.random().toString(36).substring(2,13))}},_(Nt,"WINDOW_MAIN_LOGIN","@main/login"),_(Nt,"WINDOW_MAIN","@main"),_(Nt,"WINDOW_SOURCE","@source"),_(Nt,"WINDOW_TARGET","@target"),_(Nt,"WINDOW_WORKER","@worker"),Nt)});var es=A((A6,b0)=>{b0.exports=class{constructor(e){_(this,"_oglama");this._oglama=e}}});var _0=A((S6,v0)=>{var ts=require("path"),S0=require("http"),Po=require("fs"),LP=jt(),xP=es(),Bh;v0.exports=(Bh=class extends xP{async start(){if(this.constructor._servers===null){let e=ts.join(this._oglama.rootPath,"ssg");this.constructor._servers={ssg:new Promise((t,r)=>{try{let n=S0.createServer((s,o)=>{let a=".empty";try{let u=new URL(s.url,"http://0.0.0.0");a=ts.resolve(decodeURIComponent(u.pathname)).replace(/^[a-z]:/gi,"")}catch{}let l=ts.join(e,a),c=200;Po.existsSync(l)&&Po.statSync(l).isDirectory()&&(l=ts.join(l,"index.html")),Po.existsSync(l)||(l=ts.join(e,"404/index.html"),c=404),o.writeHead(c,{"Content-Length":Po.statSync(l).size,"Content-Type":{".js":"application/javascript",".json":"application/json",".woff2":"font/woff2",".html":"text/html",".txt":"text/plain",".css":"text/css",".ico":"image/x-icon",".jpeg":"image/jpeg",".jpg":"image/jpeg",".png":"image/png",".gif":"image/gif",".svg":"image/svg+xml"}[ts.extname(l)]||"application/octet-stream"}),Po.createReadStream(l).pipe(o)});n.listen(this._oglama.config.getSsgPort(),()=>{this._oglama.log.info("ssg-server:start","Listening on port ".concat(this._oglama.config.getSsgPort())),t(n)})}catch(n){this._oglama.log.error("ssg-server:start",n),r(n)}}),rpc:new Promise((t,r)=>{try{let n=S0.createServer((s,o)=>{let a="";s.on("data",l=>{a+=l.toString()}),s.on("end",async()=>{let l=null;try{a.length&&(l=JSON.parse(a))}catch{}let c="";try{let h=new URL(s.url,"http://0.0.0.0");c=decodeURIComponent(h.pathname).replace(/^[\/\\]+|[\/\\]+$/g,"")}catch{}let u=404,f="";try{do{if(typeof l!="object"||l===null)break;if(c==="irc"){if(typeof l.channel!="string"||!Array.isArray(l.args))throw new Error("Invalid payload");if(typeof this._oglama.main?.view.webContents?.send!="function")throw new Error("Main view destroyed");u=200,f="null";let h=[l.channel,l.args,{type:"req"}];this._oglama.main?.view.webContents?.send(LP.WINDOW_MAIN,h);break}if(c==="ipc"){if(typeof l.channel!="string"||!Array.isArray(l.args))throw new Error("Invalid payload");let h="".concat(l.channel).split(":");if(h.length!==3||h[0]!=="ipc")throw new Error("Invalid channel: ".concat(l.channel));if(typeof this._oglama[h[1]]!="object")throw new Error("Invalid handler: ".concat(h[1]));if(typeof this._oglama[h[1]][h[2]]!="function")throw new Error("Invalid function: ".concat(h[1],".").concat(h[2]));u=200,f=JSON.stringify(await this._oglama[h[1]][h[2]](...l.args))}}while(!1)}catch(h){u=403,f=JSON.stringify("".concat(h?.message??h))}o.writeHead(u,{"Content-Length":f.length,"Content-Type":u===404?"text/plain":"application/json"}),o.end(f)})});n.listen(this._oglama.config.getRpcPort(),()=>{this._oglama.log.info("rpc-server:start","Listening on port ".concat(this._oglama.config.getRpcPort())),t(n)})}catch(n){this._oglama.log.error("rpc-server:start",n),r(n)}})}}return this.constructor._servers}},_(Bh,"_servers",null),Bh)});var T0=A((O6,O0)=>{var{dialog:jh}=require("electron"),kP=require("path"),FP=jt(),$P=es();O0.exports=class extends $P{constructor(){super(...arguments);_(this,"_showMessageBox",null)}async start(){let t=kP.join(this._oglama.rootPath,"res","index.html"),r={extraHeaders:"pragma: no-cache"};if(this._oglama.mainWindow().loadFile(t,r),this._oglama.mainLoginWindow().loadFile(t,r),this._oglama.mainWindow().hide(),this._oglama.mainLoginWindow().show(),this._showMessageBox===null){let n=this;this._showMessageBox=jh.showMessageBox,jh.showMessageBox=async function(s,o){if(Array.isArray(o.buttons)&&o.buttons.length){let a=o.buttons.map(l=>l.toLowerCase()).indexOf("ok");if(a!==-1){let l={agentId:null,type:o.buttons.length>1?"confirm":"alert",message:"".concat(o.message??"").trim(),result:o.buttons.length>1?!0:void 0};if(l.message.indexOf("::{")===0)try{let u=JSON.parse(l.message.substring(2));typeof u=="object"&&u!==null&&(l.agentId=u.a??null,l.type=u.t??"alert",l.message=u.m??"",l.result=u.t==="prompt"?u.d??"":u.t==="confirm"?!0:void 0)}catch{}let c=["ipc:oglama:dialog",[l],{type:"req"}];return n._oglama.main?.view.webContents?.send(FP.WINDOW_MAIN,c),{response:a}}}return n._showMessageBox.call(jh,s,o)}}}}});var N0=A((N6,C0)=>{var qP=es();C0.exports=class extends qP{error(){console.error("%coglama-error","color:red",...arguments)}info(){console.info("%coglama-info","color:lightblue",...arguments)}}});var R0=A((R6,I0)=>{var MP=es();I0.exports=class extends MP{getMainMinWidth(){return 1210}getMainMinHeight(){return 640}getMainLoginWidth(){return 512}getMainLoginHeight(){return 512}getSourceMinWidth(){return this.getMainMinWidth()-100}getSourceMinHeight(){return this.getMainMinHeight()-50}getRpcPort(){return 7099}getSsgPort(){return 7199}getOllamaPort(){return 7299}}});var is=A((P6,D0)=>{var Lo;D0.exports=(Lo=class{},_(Lo,"WINDOWS","win32"),_(Lo,"MACOS","darwin"),_(Lo,"LINUX","linux"),Lo)});var hi=A((k6,P0)=>{var{ipcMain:UP}=require("electron"),BP=es();P0.exports=class extends BP{constructor(e){super(e)}_register(e){if(typeof e=="string")for(let t of Object.getOwnPropertyNames(this)){if(["_","#"].includes(t[0]||typeof this[t]!="function"))continue;let r=this[t],n="ipc:".concat(e,":").concat(t);UP.handle(n,async(s,...o)=>{let a=null;try{a=typeof r=="function"?await r(...o):null}catch(l){a=l}return a})}}}});var x0=A(($6,L0)=>{var Hh;L0.exports=(Hh=class{},_(Hh,"max",{computersCount:10,agentsCount:9,logsPerAgent:250,logsOnRender:15,sourceCode:{smCodeLength:5120,smCount:64,smEnvSize:512,fnCodeLength:5120,fnCount:128,ioCount:128,ioInputFileCount:500,ioOutputFileCount:50,ioFieldNameLength:32,ioFieldDescLength:512,ioFieldStringLength:5120,ioFieldOptionLength:32,ioFieldOptionCount:25,ioFieldExtensionLength:24,ioFieldExtensionCount:100,ioFieldTableCount:3,ioFieldTableSize:20,ioFieldColumnLength:24,ioFieldColumnCount:6},diskStorage:{outputRunsCount:10}}),Hh)});var F0=A((U6,k0)=>{var Wh;k0.exports=(Wh=class{},_(Wh,"ModuleSrc",{K_SRC_STATE_MACHINE:"srcStateMachine",K_SRC_FUNCTIONS:"srcFunctions",K_SRC_INPUTS:"srcInputs",K_SRC_OUTPUTS:"srcOutputs"}),Wh)});var ko=A((j6,M0)=>{var{app:$0}=require("electron"),xo=require("path"),Gh=require("os"),q0=is(),It,rs,ns;M0.exports=(It=class{static getPathCache(){if(p(It,rs)===null){let e=process.env.XDG_CACHE_HOME||xo.join(Gh.homedir(),".cache");switch(process.platform){case q0.WINDOWS:e=process.env.LOCALAPPDATA||xo.join(Gh.homedir(),"AppData","Local");break;case q0.MACOS:e=xo.join(Gh.homedir(),"Library","Caches");break}V(It,rs,xo.join(e,"".concat($0.name.toLowerCase(),"-updater")))}return p(It,rs)}static getPathConfig(){return p(It,ns)===null&&V(It,ns,xo.join($0.getPath("appData"),"oglama")),p(It,ns)}},rs=new WeakMap,ns=new WeakMap,L(It,rs,null),L(It,ns,null),It)});var j0=A((G6,B0)=>{var z=require("path"),C=require("fs"),jP=jt(),HP=hi(),di=x0(),{ModuleSrc:Re}=F0(),WP=ko(),{shell:GP}=require("electron"),VP=150,Vh="default",ql="local",zP="metadata.json",YP="environment.json",KP="source.json",zh="input.json",Ml="input",Yh="output.json",QP="output",ss="files",ni,en,Ht,Rt,Fo,tn,Ri,Di,rn,os,nn,as,$o,qo,Kh,sn,Mo,ls,ne,Wt,Dt,Uo,pt,Bo,jo,je,Ho,U0;B0.exports=(U0=class extends HP{constructor(t){super(t);L(this,ni,{});L(this,en,{});L(this,Ht,{});L(this,Rt,null);L(this,Fo,t=>z.join(p(this,Rt),"agents",t,YP));L(this,tn,t=>z.join(p(this,Rt),"agents",t,KP));L(this,Ri,(t,r="session",n=null)=>r==="run"?p(this,je).call(this,t,n,zh):p(this,Ho).call(this,t,n,zh));L(this,Di,(t,r,n="session",s=null)=>{let o="".concat(Ml,"-").concat(r,".jsonl");return n==="run"?p(this,je).call(this,t,s,o):p(this,Ho).call(this,t,s,o)});L(this,rn,async(t,r=[],n={},s="session",o=null)=>{do{if(typeof t!="string"||!Array.isArray(r)||typeof n!="object"||n===null)break;for(let a of r)if(a?.type==="table"){let l=0,c=p(this,Di).call(this,t,a.key,s,o);C.existsSync(c)&&(l=await p(this,nn).call(this,c)),n[a.key]=l}}while(!1)});L(this,os,(t,r,n)=>p(this,je).call(this,t,n,"".concat(QP,"-").concat(r,".jsonl")));L(this,nn,async t=>new Promise(r=>{if(!C.existsSync(t)||!C.statSync(t).isFile()){r(0);return}let n=0,s="",o=C.createReadStream(t,{encoding:"utf8"});o.on("error",()=>r(0)),o.on("data",a=>{let l=a.split(/\r\n|\n/);n+=l.length-1,s=l.pop()}),o.on("end",()=>{s.length&&n++,r(n)})}));L(this,as,async(t,r,n=null)=>new Promise((s,o)=>{let a=[];if(!C.existsSync(t)||!C.statSync(t).isFile()){s(a);return}let l=0,c="",u=C.createReadStream(t,{encoding:"utf8"});u.on("error",o),u.on("data",f=>{let h=f.split(/\r\n|\n/);c=h.pop();for(let d of h){if(l>=r&&(n===null||a.length<n))try{a.push(JSON.parse(d))}catch{}l++}}),u.on("end",()=>{if(c.length){if(l>=r&&(n===null||a.length<n))try{a.push(JSON.parse(c))}catch{}l++}s(a)})}));L(this,$o,async(t,r,n,s=!1)=>new Promise(o=>{let a=0;if(!C.existsSync(t)||!C.statSync(t).isFile()){o(a);return}let l=0,c="",u="".concat(t,".temp");C.existsSync(u)&&C.rmSync(u,{force:!0,recursive:!0});let f=C.createReadStream(t,{encoding:"utf8"});f.on("data",h=>{let d=h.split(/\r\n|\n/);c=d.pop();for(let y of d){if(r>=0&&(l!==r||!s)){let g=l!==r?y:JSON.stringify(n);C.writeFileSync(u,"".concat(g,"\n"),{flag:"a",encoding:"utf8"}),a++}l++}}),f.on("close",()=>{if(c.length&&r>=0&&(l!==r||!s)){let h=l!==r?c:JSON.stringify(n);C.writeFileSync(u,"".concat(h,"\n"),{flag:"a",encoding:"utf8"}),a++}C.rmSync(t),C.existsSync(u)&&C.renameSync(u,t),o(a)})}));L(this,qo,async(t,r)=>new Promise(n=>{let s=-1;if(!C.existsSync(t)||!C.statSync(t).isFile()){n(s);return}let o=0,a="",l=C.createReadStream(t,{encoding:"utf8"});l.on("data",c=>{let u=c.split(/\r\n|\n/);a=u.pop();for(let f of u){if(s===-1)try{let h=JSON.parse(f);if(typeof h=="object"&&h!==null&&h._id===r){s=o;break}}catch{}o++}}),l.on("end",()=>{if(a.length&&s===-1)try{let c=JSON.parse(a);typeof c=="object"&&c!==null&&c._id===r&&(s=o)}catch{}n(s)})}));L(this,Kh,t=>{let r=n=>{let s="";if(typeof n<"u"&&n!==null)try{s=typeof n=="string"?n:JSON.stringify(n),s.includes('"')&&(s=s.replace(/"/g,'""')),(s.includes(",")||s.includes("\n")||s.includes('"'))&&(s='"'.concat(s,'"'))}catch{}return s};return(Array.isArray(t)?t.map(n=>r(n)):[]).join(",")});L(this,sn,(t,r)=>{if(typeof t!="object"||t===null||typeof r!="object"||r===null||r.type!=="table"||!Array.isArray(r.columns)||!r.columns.length)return null;let n={},s=!1;for(let o of r.columns)typeof t[o]<"u"&&(s=!0),n[o]="".concat(t[o]);return s&&typeof n._id!="string"&&(n={_id:jP.generateKey(),...n}),s?n:null});L(this,Mo,t=>{let r=null;if(typeof t=="object"&&t!==null){r={};for(let n of Object.values(Re))r[n]=(Array.isArray(t[n])?t[n]:[]).filter(s=>typeof s=="object"&&s!==null).map(s=>{for(let o of Object.keys(s))(typeof s[o]>"u"||s[o]===null)&&delete s[o];return s})}return r});L(this,ls,(t,r)=>{if(typeof r!="object"||r===null)return null;let n=r.default??null;if(["int","string"].includes(r.type)){let s=o=>{switch(r.type){case"int":o=parseInt(o,10),Number.isInteger(o)?(Number.isInteger(r.min)&&o<r.min&&(o=n),Number.isInteger(r.max)&&o>r.max&&(o=n)):o=n;break;case"string":o="".concat(o||""),(!o.length||r.min!==null&&o.length<r.min)&&(o=n),r.max!==null&&o!==null&&o.length>r.max&&(o=o.substring(0,r.max));break}return Array.isArray(r.options)&&r.options.length&&!r.options.includes(o)&&(o=n),o};t=r.isList?(o=>(o=[...new Set((Array.isArray(o)?o:[o]).map(a=>s(a)).filter(a=>a!==null))],o.length?o:n!==null?[n]:null))(t):s(t)}return r.type==="boolean"&&(t=!!(typeof t>"u"?n:t)),t});L(this,ne,t=>"".concat(t??"").replace(/\W+/g,""));L(this,Wt,t=>"".concat(t??"").replace(/[^\w\-]+/gi,""));L(this,Dt,t=>(t="".concat(t??"").replace(/[^\w\-]+/gi,""),t.length?t:null));L(this,Uo,t=>"".concat(t??"").replace(/[^\w\-\.]+/gi,"").replace(/\.{2,}/g,"."));L(this,pt,(t,r=32)=>"".concat(t).trim().toLowerCase().replace(/\s+/g,"-").replace(/\.{2,}/g,".").replace(/\-{2,}/g,"-").replace(/\_{2,}/g,"_").replace(/[^\w\.\-]+|^[\-\._]+|[\-\._]+$/gi,"").substring(0,r));L(this,Bo,(t,r,n=!0)=>{if(typeof t!="object"||t===null||typeof r!="string"||!r.length||!Array.isArray(t.extensions)||!t.extensions.includes(z.extname(r).replace(/^\./g,"").toLowerCase())||!C.existsSync(r)||!C.statSync(r).isFile())return!1;if(!n)return!0;let s=C.statSync(r).size;return!(Number.isInteger(t.min)&&t.min>0&&s<t.min*1048576||Number.isInteger(t.max)&&t.max>0&&s>t.max*1048576)});L(this,jo,(t,{agentId:r,runId:n,scalarData:s,srcOutputs:o})=>{let a={};do{if(typeof t!="object"||t===null||typeof r!="string"||typeof n!="string"||typeof s!="object"||s===null||!Array.isArray(o)||!o.length||typeof o[0]!="object"||o[0]===null||typeof o[0].type!="string")break;let l=z.join(p(this,je).call(this,r,n),ss);if(C.existsSync(l)&&C.lstatSync(l).isDirectory()){for(let c of C.readdirSync(l,{withFileTypes:!0}))if(c.isFile()){let u=c.name.replace(/^(.*?)\-\d+\..*$/gi,"$1");typeof a[u]>"u"&&(a[u]=[]),a[u].push(z.join(l,c.name))}}for(let c of o){if(c.type==="files"){t[c.key]=(Array.isArray(a[c.key])?a[c.key]:[]).filter(u=>p(this,Bo).call(this,c,u,!1)).slice(0,di.max.sourceCode.ioOutputFileCount);continue}t[c.key]=s[c.key],typeof t[c.key]>"u"&&(t[c.key]=c.default??null)}}while(!1);return a});L(this,je,(t,r=null,n=null)=>{let s=[];return typeof r=="string"&&r.length&&(s.push(r),typeof n=="string"&&n.length&&s.push(n)),z.join(p(this,Rt),"agents",t,"runs",...s)});L(this,Ho,(t,r=null,n=null)=>{let s=[typeof r=="string"&&r.length?r:Vh];return typeof n=="string"&&n.length&&s.push(n),z.join(p(this,Rt),"agents",t,"sessions",...s)});_(this,"openAgentFiles",async t=>{let r=!1;if(t=p(this,ne).call(this,t),t.length){let n=z.dirname(p(this,tn).call(this,t));C.existsSync(n)&&(GP.openPath(n),r=n)}return r});_(this,"purge",async t=>{let r=!1;if(t=p(this,ne).call(this,t),t.length){let n=z.dirname(p(this,tn).call(this,t));C.existsSync(n)&&(C.rmSync(n,{recursive:!0,force:!0}),r=!0)}return r});_(this,"runInit",(t,r=null,n=null,s=null)=>{if(t=p(this,ne).call(this,t),!t.length)throw new Error("Invalid agent ID");r="".concat(r??ql).toLowerCase().replace(/\W+/gi,""),r.length||(r=ql),n=p(this,Dt).call(this,n);let o="".concat(n??Vh).toLowerCase().replace(/\W+/gi,"");o.length||(o=Vh),(!Number.isInteger(s)||s<=0)&&(s=Math.floor(new Date().getTime()/1e3));let a="".concat(r,"-").concat(o,"-").concat(s),l=null;do{let c=this.sourceGet(t);if(typeof c!="object"||c===null)break;let u=c[Re.K_SRC_INPUTS],f=c[Re.K_SRC_OUTPUTS];if((!Array.isArray(u)||!u.length)&&(!Array.isArray(f)||!f.length))break;if(l=p(this,je).call(this,t,a),!C.existsSync(l)){C.mkdirSync(l,{recursive:!0}),C.mkdirSync(z.join(l,ss),{recursive:!0});let h=z.dirname(p(this,Ri).call(this,t,"session",n));if(typeof h=="string"&&C.existsSync(h)&&C.statSync(h).isDirectory())for(let d of C.readdirSync(h,{withFileTypes:!0}))d.isFile()&&(zh===d.name||d.name.indexOf("".concat(Ml,"-"))===0&&z.extname(d.name)===".jsonl")&&C.copyFileSync(z.join(h,d.name),z.join(l,d.name))}}while(!1);return typeof n=="string"&&this._oglama.session.incrementRuns(t,n),{runId:a,runPath:l}});_(this,"runDelete",(t,r)=>{let n=!1;do{if(t=p(this,ne).call(this,t),!t.length||(r=p(this,Wt).call(this,r),!r.length))break;let s=p(this,je).call(this,t,r);C.existsSync(s)&&(C.rmSync(s,{recursive:!0}),n=!0)}while(!1);return n});_(this,"envGet",t=>{if(t=p(this,ne).call(this,t),!t.length)return{};if(typeof p(this,ni)[t]>"u"){try{let r=p(this,Fo).call(this,t);C.existsSync(r)&&C.statSync(r).isFile()&&(p(this,ni)[t]=JSON.parse(C.readFileSync(r).toString()))}catch{}(typeof p(this,ni)[t]!="object"||p(this,ni)[t]===null)&&(p(this,ni)[t]={})}return p(this,ni)[t]});_(this,"envSet",(t,r)=>(t=p(this,ne).call(this,t),!t.length||typeof r!="object"?!1:(r!==null?p(this,ni)[t]=r:delete p(this,ni)[t],typeof p(this,en)[t]<"u"&&clearTimeout(p(this,en)[t]),p(this,en)[t]=setTimeout(()=>{delete p(this,en)[t];let n=p(this,Fo).call(this,t);r!==null?C.writeFileSync(n,JSON.stringify(r,null,2)):C.existsSync(n)&&C.rmSync(n)},VP),!0)));_(this,"sourceGet",t=>{if(t=p(this,ne).call(this,t),!t.length)return null;if(typeof p(this,Ht)[t]!="object"||p(this,Ht)[t]===null){p(this,Ht)[t]=null;try{let r=p(this,tn).call(this,t);if(!C.existsSync(r)||!C.statSync(r).isFile())throw new Error('"'.concat(z.basename(r),'" file not found'));p(this,Ht)[t]=p(this,Mo).call(this,JSON.parse(C.readFileSync(r).toString()))}catch{}}return p(this,Ht)[t]});_(this,"sourceSet",(t,r)=>{let n=!1;t=p(this,ne).call(this,t);do{if(!t.length||(r=p(this,Mo).call(this,r),JSON.stringify(this.sourceGet(t))===JSON.stringify(r)))break;p(this,Ht)[t]=r;let s=p(this,tn).call(this,t);if(C.existsSync(z.dirname(s))||C.mkdirSync(z.dirname(s),{recursive:!0}),p(this,Ht)[t]!==null){let o=p(this,Ht)[t][Re.K_SRC_INPUTS],a=[];if(Array.isArray(o)&&o.length)for(let u of o)typeof u=="object"&&u!==null&&u.type==="table"&&typeof u.key=="string"&&a.push("".concat(Ml,"-").concat(u.key,".jsonl"));let l=z.join(p(this,Rt),"agents",t,"sessions");C.existsSync(l)||C.mkdirSync(l,{recursive:!0});let c=C.readdirSync(l,{withFileTypes:!0}).filter(u=>u.isDirectory()).map(u=>u.name);for(let u of c){let f=z.dirname(p(this,Ri).call(this,t,"session",u));if(C.existsSync(f)&&C.lstatSync(f).isDirectory())for(let h of C.readdirSync(f,{withFileTypes:!0}))!h.isFile()||h.name.indexOf("".concat(Ml,"-"))!==0||a.includes(h.name)||C.rmSync(z.join(f,h.name))}C.writeFileSync(s,JSON.stringify(p(this,Ht)[t],null,2))}else C.existsSync(s)&&C.rmSync(s);n=!0}while(!1);return n});_(this,"inputsGet",async(t,r="session",n=null)=>{let s={};t=p(this,ne).call(this,t),n=r==="run"?p(this,Wt).call(this,n):p(this,Dt).call(this,n);do{if(!t.length||typeof n=="string"&&!n.length)break;let o=this.sourceGet(t);if(typeof o!="object"||o===null)break;let a=o[Re.K_SRC_INPUTS];if(!Array.isArray(a)||!a.length)break;let l=p(this,Ri).call(this,t,r,n),c={};if(C.existsSync(l)&&C.statSync(l).isFile())try{if(c=JSON.parse(C.readFileSync(l).toString()),typeof c!="object"||c===null)throw c={},new Error("Corrupted data")}catch{}for(let u of a)["int","string","boolean"].includes(u.type)&&(s[u.key]=p(this,ls).call(this,c[u.key],u)),u.type==="files"&&(s[u.key]=(Array.isArray(c[u.key])?c[u.key]:[]).slice(0,di.max.sourceCode.ioInputFileCount));r==="session"&&await p(this,rn).call(this,t,a,s,r,n)}while(!1);return s});_(this,"inputScalarsSet",async(t,r,n=null)=>{let s={};t=p(this,ne).call(this,t),n=p(this,Dt).call(this,n);do{if(!t.length)break;let o=this.sourceGet(t);if(typeof o!="object"||o===null)break;let a=o[Re.K_SRC_INPUTS];if(!Array.isArray(a)||!a.length)break;let l=p(this,Ri).call(this,t,"session",n),c={};try{C.existsSync(l)&&C.statSync(l).isFile()&&(c=JSON.parse(C.readFileSync(l).toString()),(typeof c!="object"||c===null)&&(c={}))}catch{}for(let u of a)if(u.type!=="table"){if(s[u.key]=c[u.key],u.type==="files"){s[u.key]=(Array.isArray(s[u.key])?s[u.key]:[]).slice(0,di.max.sourceCode.ioInputFileCount);continue}(typeof s[u.key]>"u"||s[u.key]===null)&&(s[u.key]=u.default??null),typeof r=="object"&&r!==null&&typeof r[u.key]<"u"&&(s[u.key]=p(this,ls).call(this,r[u.key],u),s[u.key]===null&&delete s[u.key])}C.existsSync(z.dirname(l))||C.mkdirSync(z.dirname(l),{recursive:!0}),C.writeFileSync(l,JSON.stringify(s,null,2)),await p(this,rn).call(this,t,a,s,"session",n)}while(!1);return s});_(this,"inputFilesAdd",async(t,r,n,s=null)=>{let o={},a=[];t=p(this,ne).call(this,t),r=p(this,pt).call(this,r),s=p(this,Dt).call(this,s);do{if(!t.length||!r.length)break;let l=this.sourceGet(t);if(typeof l!="object"||l===null)break;let c=l[Re.K_SRC_INPUTS];if(!Array.isArray(c)||!c.length)break;let u=p(this,Ri).call(this,t,"session",s),f={};try{C.existsSync(u)&&C.statSync(u).isFile()&&(f=JSON.parse(C.readFileSync(u).toString()),(typeof f!="object"||f===null)&&(f={}))}catch{}for(let h of c)if(h.type!=="table"){if(o[h.key]=f[h.key],h.type!=="files"){typeof o[h.key]>"u"&&(o[h.key]=h.default??null);continue}(typeof o[h.key]>"u"||!Array.isArray(o[h.key]))&&(o[h.key]=[]),h.key===r&&(a=(Array.isArray(n)?n:[]).map(d=>z.normalize("".concat(d).trim())).filter(d=>p(this,Bo).call(this,h,d,"")),o[h.key]=[...new Set([...o[h.key],...a])].slice(0,di.max.sourceCode.ioInputFileCount))}C.existsSync(z.dirname(u))||C.mkdirSync(z.dirname(u),{recursive:!0}),C.writeFileSync(u,JSON.stringify(o,null,2)),await p(this,rn).call(this,t,c,o,"session",s)}while(!1);return o});_(this,"inputFilesDelete",async(t,r,n,s=null)=>{let o={};t=p(this,ne).call(this,t),r=p(this,pt).call(this,r),s=p(this,Dt).call(this,s);let a=z.basename("".concat(n));do{if(!t.length||!r.length)break;let l=this.sourceGet(t);if(typeof l!="object"||l===null)break;let c=l[Re.K_SRC_INPUTS];if(!Array.isArray(c)||!c.length)break;let u=p(this,Ri).call(this,t,"session",s),f={};try{C.existsSync(u)&&C.statSync(u).isFile()&&(f=JSON.parse(C.readFileSync(u).toString()),(typeof f!="object"||f===null)&&(f={}))}catch{}for(let h of c)if(h.type!=="table"){if(o[h.key]=f[h.key],h.type!=="files"){typeof o[h.key]>"u"&&(o[h.key]=h.default??null);continue}(typeof o[h.key]>"u"||!Array.isArray(o[h.key]))&&(o[h.key]=[]),h.key===r&&(o[h.key]=(Array.isArray(o[h.key])?o[h.key]:[]).filter(d=>d!==z.normalize("".concat(n))).slice(0,di.max.sourceCode.ioInputFileCount))}C.existsSync(z.dirname(u))||C.mkdirSync(z.dirname(u),{recursive:!0}),C.writeFileSync(u,JSON.stringify(o,null,2)),await p(this,rn).call(this,t,c,o,"session",s)}while(!1);return o});_(this,"inputTableQuery",async(t,r,n=1,s=5e3,o=null)=>{let a=[],l=0;n=parseInt(n,10),(!Number.isInteger(n)||n<1)&&(n=1),s=parseInt(s,10),(!Number.isInteger(s)||s<1)&&(s=1);do{if(t=p(this,ne).call(this,t),r=p(this,pt).call(this,r),o=p(this,Dt).call(this,o),!t.length||!r.length)break;let c=this.sourceGet(t);if(typeof c!="object"||c===null)break;let u=c[Re.K_SRC_INPUTS];if(!Array.isArray(u)||!u.length||u.reduce((d,y)=>y.type==="table"&&y.key===r?y:d,null)===null)break;let h=p(this,Di).call(this,t,r,"session",o);if(!C.existsSync(h))break;if(l=await p(this,nn).call(this,h),l>0)try{a=await p(this,as).call(this,h,(n-1)*s,s)}catch{}}while(!1);return{rows:a,total:l,pageNumber:n,pageSize:s}});_(this,"inputTableAdd",async(t,r,n=[],s=null)=>{let o=!1;do{if(t=p(this,ne).call(this,t),r=p(this,pt).call(this,r),s=p(this,Dt).call(this,s),!t.length||!r.length)break;let a=this.sourceGet(t);if(typeof a!="object"||a===null)break;let l=a[Re.K_SRC_INPUTS];if(!Array.isArray(l)||!l.length)break;let c=l.reduce((f,h)=>h.type==="table"&&h.key===r?h:f,null);if(c===null||(n=Array.isArray(n)?n.map(f=>p(this,sn).call(this,f,c)).filter(f=>f!==null):[],!n.length))break;let u=p(this,Di).call(this,t,r,"session",s);if(C.existsSync(u)&&C.statSync(u).size/1048576>=di.max.sourceCode.ioFieldTableSize)break;C.existsSync(z.dirname(u))||C.mkdirSync(z.dirname(u),{recursive:!0}),C.writeFileSync(u,"".concat(n.map(f=>JSON.stringify(f)).join("\n"),"\n"),{flag:"a",encoding:"utf8"}),o=!0}while(!1);return o});_(this,"inputTableGet",async(t,r,n,s="session",o=null)=>{let a=null,l=null;t=p(this,ne).call(this,t),o=s==="run"?p(this,Wt).call(this,o):p(this,Dt).call(this,o);do{if(!t.length||(r=p(this,pt).call(this,r),!r.length)||typeof o=="string"&&!o.length)break;let c=this.sourceGet(t);if(typeof c!="object"||c===null)break;let u=c[Re.K_SRC_INPUTS];if(!Array.isArray(u)||!u.length)break;let f=u.reduce((y,g)=>g.type==="table"&&g.key===r?g:y,null);if(f===null)break;let h=p(this,Di).call(this,t,r,s,o);if(!C.existsSync(h))break;let d=await p(this,nn).call(this,h);if(n<d)try{let y=await p(this,as).call(this,h,n,1);y.length&&(a=p(this,sn).call(this,y[0],f))}catch{}n<d-1&&(l=n+1)}while(!1);return{row:a,nextIndex:l}});_(this,"inputTableUpdate",async(t,r,n,s,o=null)=>{let a=!1;do{if(t=p(this,ne).call(this,t),r=p(this,pt).call(this,r),o=p(this,Dt).call(this,o),!t.length||!r.length)break;let l=this.sourceGet(t);if(typeof l!="object"||l===null)break;let c=l[Re.K_SRC_INPUTS];if(!Array.isArray(c)||!c.length)break;let u=c.reduce((d,y)=>y.type==="table"&&y.key===r?y:d,null);if(u===null||(s=p(this,sn).call(this,s,u),s===null))break;let f=p(this,Di).call(this,t,r,"session",o),h=await p(this,qo).call(this,f,n);h>=0&&(await p(this,$o).call(this,f,h,s),a=!0)}while(!1);return a});_(this,"inputTableDelete",async(t,r,n=null,s=null)=>{let o=!1;do{if(t=p(this,ne).call(this,t),r=p(this,pt).call(this,r),s=p(this,Dt).call(this,s),!t.length||!r.length)break;let a=this.sourceGet(t);if(typeof a!="object"||a===null)break;let l=a[Re.K_SRC_INPUTS];if(!Array.isArray(l)||!l.length||l.reduce((f,h)=>h.type==="table"&&h.key===r?h:f,null)===null)break;let u=p(this,Di).call(this,t,r,"session",s);if(typeof n=="string"){let f=await p(this,qo).call(this,u,n);f>=0&&await p(this,$o).call(this,u,f,null,!0),o=!0;break}C.existsSync(u)&&(C.rmSync(u),o=!0)}while(!1);return o});_(this,"outputTableQuery",async(t,r,n,s=1,o=5e3)=>{let a=[],l=0;s=parseInt(s,10),(!Number.isInteger(s)||s<1)&&(s=1),o=parseInt(o,10),(!Number.isInteger(o)||o<1)&&(o=1);do{if(t=p(this,ne).call(this,t),n=p(this,pt).call(this,n),r=Array.isArray(r)?[...new Set(r)].slice(-di.max.diskStorage.outputRunsCount):[],!t.length||!n.length||!r.length)break;let c=this.sourceGet(t);if(typeof c!="object"||c===null)break;let u=c[Re.K_SRC_OUTPUTS];if(!Array.isArray(u)||!u.length||u.reduce((v,T)=>T.type==="table"&&T.key===n?T:v,null)===null)break;let h={};for(let v of r){let T=p(this,os).call(this,t,n,v);if(!C.existsSync(T))continue;let N=await p(this,nn).call(this,T);N>0&&(l+=N,h[v]=N)}let d=[],y=(s-1)*o,g=0,w=0,S=0;for(let v of Object.keys(h)){if(g>=o)break;S+=h[v]-1;let T=y>=w&&y<=S,N=y+o-1>=w&&y+o-1<=S,P=y<=w&&y+o-1>=S;if(T||P||N){let R=y-w,x=Math.min(S-y+1,o-g);g+=x,d.push({runId:v,startIndex:R,count:x})}w+=h[v],S=w}if(!d.length)break;for(let v of d){let{runId:T,startIndex:N,count:P}=v,R=p(this,os).call(this,t,n,T),x=parseInt(T.replace(/^.*\-(\d+)$/g,"$1"),10),b=T.split("-")[1]??"default";try{a=a.concat((await p(this,as).call(this,R,N,P)).map(D=>(D._time=x,D._sid=b,D)))}catch{}}}while(!1);return{rows:a,total:l,pageNumber:s,pageSize:o}});_(this,"outputTableAdd",(t,r,n,s)=>{let o=!1;do{if(t=p(this,ne).call(this,t),!t.length||(n=p(this,pt).call(this,n),!n.length)||(r=p(this,Wt).call(this,r),!r.length))break;let a=this.sourceGet(t);if(typeof a!="object"||a===null)break;let l=a[Re.K_SRC_OUTPUTS];if(!Array.isArray(l)||!l.length)break;let c=l.reduce((f,h)=>h.type==="table"&&h.key===n?h:f,null);if(c===null||(s=p(this,sn).call(this,s,c),s===null))break;let u=p(this,os).call(this,t,n,r);if(C.existsSync(u)&&C.statSync(u).size/1048576>=di.max.sourceCode.ioFieldTableSize)break;C.existsSync(z.dirname(u))||C.mkdirSync(z.dirname(u),{recursive:!0}),C.writeFileSync(u,"".concat(JSON.stringify(s),"\n"),{flag:"a",encoding:"utf8"}),o=!0}while(!1);return o});_(this,"outputsGet",(t,r,n=null)=>{let s={},o={};do{if(t=p(this,ne).call(this,t),!t.length||(r=p(this,Wt).call(this,r),!r.length))break;let a=p(this,je).call(this,t,r);if(!C.existsSync(a)||!C.statSync(a).isDirectory())break;let l=p(this,je).call(this,t,r,Yh),c={};try{C.existsSync(l)&&C.statSync(l).isFile()&&(c=JSON.parse(C.readFileSync(l).toString()),(typeof c!="object"||c===null)&&(c={}))}catch{}if(!Array.isArray(n)||!n.length){let u=this.sourceGet(t);if(typeof u!="object"||u===null||(n=u[Re.K_SRC_OUTPUTS],!Array.isArray(n)||!n.length))break}o=p(this,jo).call(this,s,{agentId:t,runId:r,scalarData:c,srcOutputs:n})}while(!1);return s});_(this,"outputsQuery",(t,r,n=null,s=null)=>{let o=[],a=0,l={};do{if(t=p(this,ne).call(this,t),!t.length)break;let c=p(this,je).call(this,t);if(!C.existsSync(c)||!C.statSync(c).isDirectory())break;r="".concat(r??ql).toLowerCase().replace(/\W+/gi,""),r.length||(r=ql);let u=this.sourceGet(t);if(typeof u!="object"||u===null)break;let f=u[Re.K_SRC_OUTPUTS];if(!Array.isArray(f)||!f.length)break;for(let h of f)l[h.key]=[];(!Number.isInteger(n)||n<=0)&&(n=Math.floor(new Date().setHours(0,0,0,0)/1e3)),(!Number.isInteger(s)||s<=0)&&(s=Math.floor(new Date().getTime()/1e3));for(let h of C.readdirSync(c,{withFileTypes:!0})){let d=h.name;if(!h.isDirectory()||d.indexOf("".concat(r,"-"))!==0)continue;let y=d.match(/\-(\d+)$/);if(!y)continue;let g=parseInt(y[1],10);!Number.isInteger(g)||g<n||g>s||(o.push(d),a++)}o.sort((h,d)=>{let y="".concat(h).trim().split("-").pop(),g="".concat(d).trim().split("-").pop();return y>g?-1:y<g?1:0}),o.length>di.max.diskStorage.outputRunsCount&&(o=o.slice(0,di.max.diskStorage.outputRunsCount));for(let h of o){let d=p(this,je).call(this,t,h,Yh),y={};try{C.existsSync(d)&&C.statSync(d).isFile()&&(y=JSON.parse(C.readFileSync(d).toString()),(typeof y!="object"||y===null)&&(y={}))}catch{}let g={};p(this,jo).call(this,g,{agentId:t,runId:h,scalarData:y,srcOutputs:f});for(let w of f)typeof g[w.key]<"u"&&l[w.key].push({runId:h,runData:g[w.key]})}}while(!1);return{runIds:o,runIdsTotal:a,fields:l}});_(this,"outputScalarSet",async(t,r,n,s)=>{let o=!1;do{if(t=p(this,ne).call(this,t),!t.length||(r=p(this,Wt).call(this,r),!r.length))break;let a=this.sourceGet(t);if(typeof a!="object"||a===null)break;let l=a[Re.K_SRC_OUTPUTS];if(!Array.isArray(l)||!l.length)break;let c=l.reduce((d,y)=>["int","string","boolean"].includes(y.type)&&y.key===n?y:d,null);if(c===null)break;let u=await this.outputsGet(t,r,l);u[n]=p(this,ls).call(this,s,c);let f={};for(let d of l)["int","string","boolean"].includes(d.type)&&typeof u[d.key]<"u"&&(f[d.key]=u[d.key]);let h=p(this,je).call(this,t,r,Yh);C.existsSync(z.dirname(h))||C.mkdirSync(z.dirname(h),{recursive:!0}),C.writeFileSync(h,JSON.stringify(f,null,2)),o=!0}while(!1);return o});_(this,"outputFilesInit",(t,r,n,s=null)=>{if(t=p(this,ne).call(this,t),!t.length)throw new Error("Invalid agent ID");if(r=p(this,Wt).call(this,r),!r.length)throw new Error("Invalid run ID");if(n=p(this,pt).call(this,n),!n.length)throw new Error("Invalid output key");let o=p(this,je).call(this,t,r);if(!C.existsSync(o)||!C.statSync(o).isDirectory())throw new Error("Run not initialized");let a=z.join(o,ss);C.existsSync(a)||C.mkdirSync(a,{recursive:!0});let l=this.sourceGet(t);if(typeof l!="object"||l===null)throw new Error("Source code not defined for this agent");let c=l[Re.K_SRC_OUTPUTS];if(!Array.isArray(c)||!c.length)throw new Error("Outputs not defined for this agent");let u=c.reduce((S,v)=>v.type==="files"&&v.key===n?v:S,null);if(u===null)throw new Error('Field "'.concat(n,'" is not of type file'));Array.isArray(u.extensions)||(u.extensions=["txt"]),s=typeof s=="string"?p(this,pt).call(this,s):null,u.extensions.includes(s)||(s=u.extensions[0]);let f=0,h="".concat(n,"-"),[d,y]=r.split("-");for(let S of C.readdirSync(z.dirname(o),{withFileTypes:!0})){if(!S.isDirectory())continue;let[v,T]=S.name.split("-");if(v!==d||T!==y)continue;let N=z.join(z.dirname(o),S.name,ss);if(C.existsSync(N)){for(let P of C.readdirSync(N,{withFileTypes:!0}))if(P.isFile()&&P.name.indexOf(h)===0){let R=parseInt(P.name.substring(h.length).replace(/^(\d+).*/,"$1"),10);Number.isInteger(R)&&R>0&&R>f&&(f=R)}}}let g="".concat(n,"-").concat(f+1,".").concat(s),w=z.join(a,g);return C.writeFileSync(w,"",{flag:"a"}),{fileName:g,filePath:w,minSize:Number.isInteger(u.min)&&u.min>0?u.min:null,maxSize:Number.isInteger(u.max)&&u.max>0?u.max:null}});_(this,"outputFilesAppend",async(t,r,n,s,o=null)=>{let a=!1;if(t=p(this,ne).call(this,t),r=p(this,Wt).call(this,r),n=p(this,Uo).call(this,n),t.length&&r.length&&n.length){let l=z.join(p(this,je).call(this,t,r),ss,n);if(C.existsSync(l)){if(Number.isInteger(o)&&C.statSync(l).size+s.length>o*1048576)throw C.rmSync(l),new Error("Maximum file size exceeded for ".concat(n," (").concat(o,"MB)"));C.writeFileSync(l,s,{flag:"a"}),a=!0}}return a});_(this,"outputFilesDelete",async(t,r,n)=>{let s=!1;if(t=p(this,ne).call(this,t),r=p(this,Wt).call(this,r),n=p(this,Uo).call(this,n),t.length&&r.length&&n.length){let o=z.join(p(this,je).call(this,t,r),ss,n);C.existsSync(o)&&(C.rmSync(o,{force:!0}),s=!0)}return s});this._register("diskStorage"),V(this,Rt,WP.getPathConfig()),C.existsSync(p(this,Rt))||C.mkdirSync(p(this,Rt),{recursive:!0})}getSessionMetaPath(t){return t=p(this,ne).call(this,t),t.length?z.join(p(this,Rt),"agents",t,"sessions",zP):null}getStorePath(){return p(this,Rt)}},ni=new WeakMap,en=new WeakMap,Ht=new WeakMap,Rt=new WeakMap,Fo=new WeakMap,tn=new WeakMap,Ri=new WeakMap,Di=new WeakMap,rn=new WeakMap,os=new WeakMap,nn=new WeakMap,as=new WeakMap,$o=new WeakMap,qo=new WeakMap,Kh=new WeakMap,sn=new WeakMap,Mo=new WeakMap,ls=new WeakMap,ne=new WeakMap,Wt=new WeakMap,Dt=new WeakMap,Uo=new WeakMap,pt=new WeakMap,Bo=new WeakMap,jo=new WeakMap,je=new WeakMap,Ho=new WeakMap,U0)});var G0=A((Y6,W0)=>{var Ul=require("path"),Pt=require("fs"),XP=jt(),JP=hi(),be,si,lr,H0;W0.exports=(H0=class extends JP{constructor(t){super(t);L(this,be);_(this,"getAt",(t,r)=>{let n=j(this,be,si).call(this,t);if(!Array.isArray(n)||!Number.isInteger(r)||r<=0)return null;let s=null,o=new Date(r*1e3),a=o.getFullYear(),l=o.getMonth()+1,c=o.getDate(),u=o.getHours(),f=o.getMinutes();for(let d of n)if(d.sessionType==="schedule"&&!(!d.sessionReady||!d.sessionEnabled)&&d.sessionInfo.year===a&&d.sessionInfo.month===l&&d.sessionInfo.day===c&&d.sessionInfo.hour===u&&d.sessionInfo.minute===f){s=d;break}if(s!==null)return s;let h=(d,y=!1)=>{if(d="".concat(d??"").trim(),d==="*")return()=>!0;if(d[0]==="%"){let g=Math.abs(parseInt(d.substring(1),10));if(Number.isInteger(g)&&g>=2&&g<=1e3)return w=>w%g===0}if(d.match(/^\d+(?:,\d+)*?$/)){let g=d.split(",").map(w=>Math.abs(parseInt(w.trim(),10))).filter(w=>Number.isInteger(w));if(g.length)return w=>g.includes(w)}if(y&&d.match(/^\d+(?:,\d+)*?$/)){let g=d.substring(1).split(",").map(w=>Math.abs(parseInt(w.trim(),10))).filter(w=>Number.isInteger(w)&&w>=1&&w<=7);if(g.length)return w=>g.includes(w)}return()=>!1};for(let d of n)if(d.sessionType==="cron"&&!(!d.sessionReady||!d.sessionEnabled)&&h(d.sessionInfo.day,!0)(c)&&h(d.sessionInfo.hour)(u)&&h(d.sessionInfo.minute)(f)){s=d;break}return s});_(this,"create",(t,r,n)=>{let s=j(this,be,si).call(this,t);if(!Array.isArray(s))return null;let o=n[0]+XP.generateKey().substring(1);do{if(typeof r=="string"&&(r=r.toLowerCase().trim(),r.length))break;r=null}while(!1);["schedule","cron"].includes(n)||(n="schedule");let a=!0,l=!1,c=0,u="[ ".concat(n==="schedule"?"scheduled":"recurring"," ]"),f=new Date(new Date().getTime()+864e5),h=n==="schedule"?{year:f.getFullYear(),month:f.getMonth()+1,day:f.getDate(),hour:f.getHours(),minute:f.getMinutes()}:{day:"*",hour:"*",minute:"0"};return s.push({sessionId:o,moduleId:r,sessionEnabled:a,sessionReady:l,sessionName:u,sessionType:n,sessionInfo:h,sessionRuns:c}),j(this,be,lr).call(this,t,s),o});_(this,"readAll",(t,r)=>{let n=j(this,be,si).call(this,t,r);return Array.isArray(n)?n:[]});_(this,"read",(t,r)=>{let n=j(this,be,si).call(this,t);return(Array.isArray(n)?n:[]).reduce((s,o)=>o.sessionId===r?o:s,null)});_(this,"updateName",(t,r,n)=>{let s=j(this,be,si).call(this,t);if(!Array.isArray(s))return"";let o=s.reduce((a,l)=>l.sessionId===r?l.sessionType:a,null);return["schedule","cron"].includes(o)?(n="".concat(n??"").replace(/\s+/g," ").substring(0,32).trim(),j(this,be,lr).call(this,t,s.map(a=>a.sessionId===r?{...a,sessionName:n}:a)),n):""});_(this,"updateInfo",(t,r,n)=>{let s=j(this,be,si).call(this,t);if(!Array.isArray(s))return!1;let o=s.reduce((l,c)=>c.sessionId===r?c.sessionType:l,null);if(!["schedule","cron"].includes(o)||typeof n!="object"||n===null)return!1;let a={};if(o==="schedule")for(let l of["year","month","day","hour","minute"]){if(!Number.isInteger(n[l])||n[l]<0||n[l]>1e4)return!1;a[l]=n[l]}else for(let l of["day","hour","minute"]){if(typeof n[l]!="string"||!n[l].length)return!1;a[l]=n[l]}return n=a,j(this,be,lr).call(this,t,s.map(l=>l.sessionId===r?{...l,sessionInfo:n}:l)),!0});_(this,"updateReady",(t,r,n)=>{let s=j(this,be,si).call(this,t);return Array.isArray(s)?(n=!!n,s.reduce((a,l)=>l.sessionId===r?l.sessionReady:a,!1)!==n?(j(this,be,lr).call(this,t,s.map(a=>a.sessionId===r?{...a,sessionReady:n}:a)),!0):!1):!1});_(this,"updateEnabled",(t,r,n)=>{let s=j(this,be,si).call(this,t);return Array.isArray(s)?(n=!!n,s.reduce((a,l)=>l.sessionId===r?l.sessionEnabled:a,!1)!==n?(j(this,be,lr).call(this,t,s.map(a=>a.sessionId===r?{...a,sessionEnabled:n}:a)),!0):!1):!1});_(this,"delete",(t,r=null,n=null)=>{let s=j(this,be,si).call(this,t);return Array.isArray(s)?(s=s.filter(o=>typeof r=="string"&&o.sessionType!==r||typeof n=="string"&&o.sessionId!==n),j(this,be,lr).call(this,t,s),!0):!1});this._register("session")}incrementRuns(t,r){let n=j(this,be,si).call(this,t);if(!Array.isArray(n))return!1;let s=n.reduce((c,u)=>u.sessionId===r?u.sessionType:c,null);if(!["schedule","cron"].includes(s))return!1;let o=n.reduce((c,u)=>u.sessionId===r?u.sessionReady:c,!1),a=n.reduce((c,u)=>u.sessionId===r?u.sessionEnabled:c,!1);if(!o||!a)return!1;let l=n.reduce((c,u)=>u.sessionId===r?u.sessionRuns:c,0);return Number.isInteger(l)&&l>0?l++:l=1,j(this,be,lr).call(this,t,n.map(c=>c.sessionId===r?{...c,sessionRuns:l}:c)),!0}},be=new WeakSet,si=function(t,r=null){if(typeof t!="string")return null;let n=this._oglama.diskStorage.getSessionMetaPath(t);if(typeof n!="string")return null;let s=Ul.dirname(n);Pt.existsSync(s)||Pt.mkdirSync(s,{recursive:!0});let o=[];if(!Pt.existsSync(n))Pt.writeFileSync(n,"[]");else try{let l=JSON.parse(Pt.readFileSync(n).toString());Array.isArray(l)&&(o=l)}catch{}let a=Pt.readdirSync(s,{withFileTypes:!0}).filter(l=>l.isDirectory()&&l.name!=="default").map(l=>l.name);return o=o.filter(l=>typeof l=="object"&&typeof l?.sessionId=="string"&&(r===null||l?.sessionType===r)&&a.includes(l.sessionId)),o},lr=function(t,r){if(typeof t!="string"||!Array.isArray(r))return!1;let n=this._oglama.diskStorage.getSessionMetaPath(t);if(typeof n!="string")return!1;let s=Ul.dirname(n);Pt.existsSync(s)||Pt.mkdirSync(s,{recursive:!0}),Pt.writeFileSync(n,JSON.stringify(r,null,2));let o=r.map(l=>l.sessionId),a=Pt.readdirSync(s,{withFileTypes:!0}).filter(l=>l.isDirectory()&&l.name!=="default").map(l=>l.name);for(let l of o){let c=Ul.join(s,l);Pt.existsSync(c)||Pt.mkdirSync(c,{recursive:!0})}for(let l of a)if(!o.includes(l)){let c=Ul.join(s,l);Pt.rmSync(c,{recursive:!0})}return!0},H0)});var mt=A(Qh=>{"use strict";Qh.fromCallback=function(i){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")i.apply(this,e);else return new Promise((t,r)=>{e.push((n,s)=>n!=null?r(n):t(s)),i.apply(this,e)})},"name",{value:i.name})};Qh.fromPromise=function(i){return Object.defineProperty(function(...e){let t=e[e.length-1];if(typeof t!="function")return i.apply(this,e);e.pop(),i.apply(this,e).then(r=>t(null,r),t)},"name",{value:i.name})}});var z0=A((X6,V0)=>{var cr=require("constants"),ZP=process.cwd,Bl=null,eL=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Bl||(Bl=ZP.call(process)),Bl};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Xh=process.chdir,process.chdir=function(i){Bl=null,Xh.call(process,i)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Xh));var Xh;V0.exports=tL;function tL(i){cr.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(i),i.lutimes||t(i),i.chown=s(i.chown),i.fchown=s(i.fchown),i.lchown=s(i.lchown),i.chmod=r(i.chmod),i.fchmod=r(i.fchmod),i.lchmod=r(i.lchmod),i.chownSync=o(i.chownSync),i.fchownSync=o(i.fchownSync),i.lchownSync=o(i.lchownSync),i.chmodSync=n(i.chmodSync),i.fchmodSync=n(i.fchmodSync),i.lchmodSync=n(i.lchmodSync),i.stat=a(i.stat),i.fstat=a(i.fstat),i.lstat=a(i.lstat),i.statSync=l(i.statSync),i.fstatSync=l(i.fstatSync),i.lstatSync=l(i.lstatSync),i.chmod&&!i.lchmod&&(i.lchmod=function(u,f,h){h&&process.nextTick(h)},i.lchmodSync=function(){}),i.chown&&!i.lchown&&(i.lchown=function(u,f,h,d){d&&process.nextTick(d)},i.lchownSync=function(){}),eL==="win32"&&(i.rename=typeof i.rename!="function"?i.rename:(function(u){function f(h,d,y){var g=Date.now(),w=0;u(h,d,function S(v){if(v&&(v.code==="EACCES"||v.code==="EPERM"||v.code==="EBUSY")&&Date.now()-g<6e4){setTimeout(function(){i.stat(d,function(T,N){T&&T.code==="ENOENT"?u(h,d,S):y(v)})},w),w<100&&(w+=10);return}y&&y(v)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f})(i.rename)),i.read=typeof i.read!="function"?i.read:(function(u){function f(h,d,y,g,w,S){var v;if(S&&typeof S=="function"){var T=0;v=function(N,P,R){if(N&&N.code==="EAGAIN"&&T<10)return T++,u.call(i,h,d,y,g,w,v);S.apply(this,arguments)}}return u.call(i,h,d,y,g,w,v)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f})(i.read),i.readSync=typeof i.readSync!="function"?i.readSync:(function(u){return function(f,h,d,y,g){for(var w=0;;)try{return u.call(i,f,h,d,y,g)}catch(S){if(S.code==="EAGAIN"&&w<10){w++;continue}throw S}}})(i.readSync);function e(u){u.lchmod=function(f,h,d){u.open(f,cr.O_WRONLY|cr.O_SYMLINK,h,function(y,g){if(y){d&&d(y);return}u.fchmod(g,h,function(w){u.close(g,function(S){d&&d(w||S)})})})},u.lchmodSync=function(f,h){var d=u.openSync(f,cr.O_WRONLY|cr.O_SYMLINK,h),y=!0,g;try{g=u.fchmodSync(d,h),y=!1}finally{if(y)try{u.closeSync(d)}catch{}else u.closeSync(d)}return g}}function t(u){cr.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(f,h,d,y){u.open(f,cr.O_SYMLINK,function(g,w){if(g){y&&y(g);return}u.futimes(w,h,d,function(S){u.close(w,function(v){y&&y(S||v)})})})},u.lutimesSync=function(f,h,d){var y=u.openSync(f,cr.O_SYMLINK),g,w=!0;try{g=u.futimesSync(y,h,d),w=!1}finally{if(w)try{u.closeSync(y)}catch{}else u.closeSync(y)}return g}):u.futimes&&(u.lutimes=function(f,h,d,y){y&&process.nextTick(y)},u.lutimesSync=function(){})}function r(u){return u&&function(f,h,d){return u.call(i,f,h,function(y){c(y)&&(y=null),d&&d.apply(this,arguments)})}}function n(u){return u&&function(f,h){try{return u.call(i,f,h)}catch(d){if(!c(d))throw d}}}function s(u){return u&&function(f,h,d,y){return u.call(i,f,h,d,function(g){c(g)&&(g=null),y&&y.apply(this,arguments)})}}function o(u){return u&&function(f,h,d){try{return u.call(i,f,h,d)}catch(y){if(!c(y))throw y}}}function a(u){return u&&function(f,h,d){typeof h=="function"&&(d=h,h=null);function y(g,w){w&&(w.uid<0&&(w.uid+=4294967296),w.gid<0&&(w.gid+=4294967296)),d&&d.apply(this,arguments)}return h?u.call(i,f,h,y):u.call(i,f,y)}}function l(u){return u&&function(f,h){var d=h?u.call(i,f,h):u.call(i,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function c(u){if(!u||u.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var Q0=A((J6,K0)=>{var Y0=require("stream").Stream;K0.exports=iL;function iL(i){return{ReadStream:e,WriteStream:t};function e(r,n){if(!(this instanceof e))return new e(r,n);Y0.call(this);var s=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var o=Object.keys(n),a=0,l=o.length;a<l;a++){var c=o[a];this[c]=n[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}i.open(this.path,this.flags,this.mode,function(u,f){if(u){s.emit("error",u),s.readable=!1;return}s.fd=f,s.emit("open",f),s._read()})}function t(r,n){if(!(this instanceof t))return new t(r,n);Y0.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),o=0,a=s.length;o<a;o++){var l=s[o];this[l]=n[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=i.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var J0=A((Z6,X0)=>{"use strict";X0.exports=nL;var rL=Object.getPrototypeOf||function(i){return i.__proto__};function nL(i){if(i===null||typeof i!="object")return i;if(i instanceof Object)var e={__proto__:rL(i)};else var e=Object.create(null);return Object.getOwnPropertyNames(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}),e}});var nt=A((eY,ed)=>{var we=require("fs"),sL=z0(),oL=Q0(),aL=J0(),jl=require("util"),He,Wl;typeof Symbol=="function"&&typeof Symbol.for=="function"?(He=Symbol.for("graceful-fs.queue"),Wl=Symbol.for("graceful-fs.previous")):(He="___graceful-fs.queue",Wl="___graceful-fs.previous");function lL(){}function tA(i,e){Object.defineProperty(i,He,{get:function(){return e}})}var on=lL;jl.debuglog?on=jl.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(on=function(){var i=jl.format.apply(jl,arguments);i="GFS4: "+i.split(/\n/).join("\nGFS4: "),console.error(i)});we[He]||(Z0=global[He]||[],tA(we,Z0),we.close=(function(i){function e(t,r){return i.call(we,t,function(n){n||eA(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(e,Wl,{value:i}),e})(we.close),we.closeSync=(function(i){function e(t){i.apply(we,arguments),eA()}return Object.defineProperty(e,Wl,{value:i}),e})(we.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){on(we[He]),require("assert").equal(we[He].length,0)}));var Z0;global[He]||tA(global,we[He]);ed.exports=Jh(aL(we));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!we.__patched&&(ed.exports=Jh(we),we.__patched=!0);function Jh(i){sL(i),i.gracefulify=Jh,i.createReadStream=P,i.createWriteStream=R;var e=i.readFile;i.readFile=t;function t(D,B,k){return typeof B=="function"&&(k=B,B=null),U(D,B,k);function U(ce,ie,X,W){return e(ce,ie,function(se){se&&(se.code==="EMFILE"||se.code==="ENFILE")?cs([U,[ce,ie,X],se,W||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var r=i.writeFile;i.writeFile=n;function n(D,B,k,U){return typeof k=="function"&&(U=k,k=null),ce(D,B,k,U);function ce(ie,X,W,se,Ee){return r(ie,X,W,function(oe){oe&&(oe.code==="EMFILE"||oe.code==="ENFILE")?cs([ce,[ie,X,W,se],oe,Ee||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments)})}}var s=i.appendFile;s&&(i.appendFile=o);function o(D,B,k,U){return typeof k=="function"&&(U=k,k=null),ce(D,B,k,U);function ce(ie,X,W,se,Ee){return s(ie,X,W,function(oe){oe&&(oe.code==="EMFILE"||oe.code==="ENFILE")?cs([ce,[ie,X,W,se],oe,Ee||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments)})}}var a=i.copyFile;a&&(i.copyFile=l);function l(D,B,k,U){return typeof k=="function"&&(U=k,k=0),ce(D,B,k,U);function ce(ie,X,W,se,Ee){return a(ie,X,W,function(oe){oe&&(oe.code==="EMFILE"||oe.code==="ENFILE")?cs([ce,[ie,X,W,se],oe,Ee||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments)})}}var c=i.readdir;i.readdir=f;var u=/^v[0-5]\./;function f(D,B,k){typeof B=="function"&&(k=B,B=null);var U=u.test(process.version)?function(X,W,se,Ee){return c(X,ce(X,W,se,Ee))}:function(X,W,se,Ee){return c(X,W,ce(X,W,se,Ee))};return U(D,B,k);function ce(ie,X,W,se){return function(Ee,oe){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?cs([U,[ie,X,W],Ee,se||Date.now(),Date.now()]):(oe&&oe.sort&&oe.sort(),typeof W=="function"&&W.call(this,Ee,oe))}}}if(process.version.substr(0,4)==="v0.8"){var h=oL(i);S=h.ReadStream,T=h.WriteStream}var d=i.ReadStream;d&&(S.prototype=Object.create(d.prototype),S.prototype.open=v);var y=i.WriteStream;y&&(T.prototype=Object.create(y.prototype),T.prototype.open=N),Object.defineProperty(i,"ReadStream",{get:function(){return S},set:function(D){S=D},enumerable:!0,configurable:!0}),Object.defineProperty(i,"WriteStream",{get:function(){return T},set:function(D){T=D},enumerable:!0,configurable:!0});var g=S;Object.defineProperty(i,"FileReadStream",{get:function(){return g},set:function(D){g=D},enumerable:!0,configurable:!0});var w=T;Object.defineProperty(i,"FileWriteStream",{get:function(){return w},set:function(D){w=D},enumerable:!0,configurable:!0});function S(D,B){return this instanceof S?(d.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function v(){var D=this;b(D.path,D.flags,D.mode,function(B,k){B?(D.autoClose&&D.destroy(),D.emit("error",B)):(D.fd=k,D.emit("open",k),D.read())})}function T(D,B){return this instanceof T?(y.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function N(){var D=this;b(D.path,D.flags,D.mode,function(B,k){B?(D.destroy(),D.emit("error",B)):(D.fd=k,D.emit("open",k))})}function P(D,B){return new i.ReadStream(D,B)}function R(D,B){return new i.WriteStream(D,B)}var x=i.open;i.open=b;function b(D,B,k,U){return typeof k=="function"&&(U=k,k=null),ce(D,B,k,U);function ce(ie,X,W,se,Ee){return x(ie,X,W,function(oe,ar){oe&&(oe.code==="EMFILE"||oe.code==="ENFILE")?cs([ce,[ie,X,W,se],oe,Ee||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments)})}}return i}function cs(i){on("ENQUEUE",i[0].name,i[1]),we[He].push(i),Zh()}var Hl;function eA(){for(var i=Date.now(),e=0;e<we[He].length;++e)we[He][e].length>2&&(we[He][e][3]=i,we[He][e][4]=i);Zh()}function Zh(){if(clearTimeout(Hl),Hl=void 0,we[He].length!==0){var i=we[He].shift(),e=i[0],t=i[1],r=i[2],n=i[3],s=i[4];if(n===void 0)on("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-n>=6e4){on("TIMEOUT",e.name,t);var o=t.pop();typeof o=="function"&&o.call(null,r)}else{var a=Date.now()-s,l=Math.max(s-n,1),c=Math.min(l*1.2,100);a>=c?(on("RETRY",e.name,t),e.apply(null,t.concat([n]))):we[He].push(i)}Hl===void 0&&(Hl=setTimeout(Zh,0))}}});var an=A(ur=>{"use strict";var iA=mt().fromCallback,gt=nt(),cL=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof gt[i]=="function");Object.assign(ur,gt);cL.forEach(i=>{ur[i]=iA(gt[i])});ur.exists=function(i,e){return typeof e=="function"?gt.exists(i,e):new Promise(t=>gt.exists(i,t))};ur.read=function(i,e,t,r,n,s){return typeof s=="function"?gt.read(i,e,t,r,n,s):new Promise((o,a)=>{gt.read(i,e,t,r,n,(l,c,u)=>{if(l)return a(l);o({bytesRead:c,buffer:u})})})};ur.write=function(i,e,...t){return typeof t[t.length-1]=="function"?gt.write(i,e,...t):new Promise((r,n)=>{gt.write(i,e,...t,(s,o,a)=>{if(s)return n(s);r({bytesWritten:o,buffer:a})})})};typeof gt.writev=="function"&&(ur.writev=function(i,e,...t){return typeof t[t.length-1]=="function"?gt.writev(i,e,...t):new Promise((r,n)=>{gt.writev(i,e,...t,(s,o,a)=>{if(s)return n(s);r({bytesWritten:o,buffers:a})})})});typeof gt.realpath.native=="function"?ur.realpath.native=iA(gt.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var nA=A((iY,rA)=>{"use strict";var uL=require("path");rA.exports.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(uL.parse(e).root,""))){let r=new Error("Path contains invalid characters: ".concat(e));throw r.code="EINVAL",r}}});var lA=A((rY,td)=>{"use strict";var sA=an(),{checkPath:oA}=nA(),aA=i=>{let e={mode:511};return typeof i=="number"?i:{...e,...i}.mode};td.exports.makeDir=async(i,e)=>(oA(i),sA.mkdir(i,{mode:aA(e),recursive:!0}));td.exports.makeDirSync=(i,e)=>(oA(i),sA.mkdirSync(i,{mode:aA(e),recursive:!0}))});var oi=A((nY,cA)=>{"use strict";var fL=mt().fromPromise,{makeDir:hL,makeDirSync:id}=lA(),rd=fL(hL);cA.exports={mkdirs:rd,mkdirsSync:id,mkdirp:rd,mkdirpSync:id,ensureDir:rd,ensureDirSync:id}});var fr=A((sY,fA)=>{"use strict";var dL=mt().fromPromise,uA=an();function pL(i){return uA.access(i).then(()=>!0).catch(()=>!1)}fA.exports={pathExists:dL(pL),pathExistsSync:uA.existsSync}});var nd=A((oY,hA)=>{"use strict";var us=nt();function mL(i,e,t,r){us.open(i,"r+",(n,s)=>{if(n)return r(n);us.futimes(s,e,t,o=>{us.close(s,a=>{r&&r(o||a)})})})}function gL(i,e,t){let r=us.openSync(i,"r+");return us.futimesSync(r,e,t),us.closeSync(r)}hA.exports={utimesMillis:mL,utimesMillisSync:gL}});var ln=A((aY,mA)=>{"use strict";var fs=an(),Le=require("path"),yL=require("util");function wL(i,e,t){let r=t.dereference?n=>fs.stat(n,{bigint:!0}):n=>fs.lstat(n,{bigint:!0});return Promise.all([r(i),r(e).catch(n=>{if(n.code==="ENOENT")return null;throw n})]).then(([n,s])=>({srcStat:n,destStat:s}))}function AL(i,e,t){let r,n=t.dereference?o=>fs.statSync(o,{bigint:!0}):o=>fs.lstatSync(o,{bigint:!0}),s=n(i);try{r=n(e)}catch(o){if(o.code==="ENOENT")return{srcStat:s,destStat:null};throw o}return{srcStat:s,destStat:r}}function EL(i,e,t,r,n){yL.callbackify(wL)(i,e,r,(s,o)=>{if(s)return n(s);let{srcStat:a,destStat:l}=o;if(l){if(Wo(a,l)){let c=Le.basename(i),u=Le.basename(e);return t==="move"&&c!==u&&c.toLowerCase()===u.toLowerCase()?n(null,{srcStat:a,destStat:l,isChangingCase:!0}):n(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!l.isDirectory())return n(new Error("Cannot overwrite non-directory '".concat(e,"' with directory '").concat(i,"'.")));if(!a.isDirectory()&&l.isDirectory())return n(new Error("Cannot overwrite directory '".concat(e,"' with non-directory '").concat(i,"'.")))}return a.isDirectory()&&sd(i,e)?n(new Error(Gl(i,e,t))):n(null,{srcStat:a,destStat:l})})}function bL(i,e,t,r){let{srcStat:n,destStat:s}=AL(i,e,r);if(s){if(Wo(n,s)){let o=Le.basename(i),a=Le.basename(e);if(t==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error("Cannot overwrite non-directory '".concat(e,"' with directory '").concat(i,"'."));if(!n.isDirectory()&&s.isDirectory())throw new Error("Cannot overwrite directory '".concat(e,"' with non-directory '").concat(i,"'."))}if(n.isDirectory()&&sd(i,e))throw new Error(Gl(i,e,t));return{srcStat:n,destStat:s}}function dA(i,e,t,r,n){let s=Le.resolve(Le.dirname(i)),o=Le.resolve(Le.dirname(t));if(o===s||o===Le.parse(o).root)return n();fs.stat(o,{bigint:!0},(a,l)=>a?a.code==="ENOENT"?n():n(a):Wo(e,l)?n(new Error(Gl(i,t,r))):dA(i,e,o,r,n))}function pA(i,e,t,r){let n=Le.resolve(Le.dirname(i)),s=Le.resolve(Le.dirname(t));if(s===n||s===Le.parse(s).root)return;let o;try{o=fs.statSync(s,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Wo(e,o))throw new Error(Gl(i,t,r));return pA(i,e,s,r)}function Wo(i,e){return e.ino&&e.dev&&e.ino===i.ino&&e.dev===i.dev}function sd(i,e){let t=Le.resolve(i).split(Le.sep).filter(n=>n),r=Le.resolve(e).split(Le.sep).filter(n=>n);return t.reduce((n,s,o)=>n&&r[o]===s,!0)}function Gl(i,e,t){return"Cannot ".concat(t," '").concat(i,"' to a subdirectory of itself, '").concat(e,"'.")}mA.exports={checkPaths:EL,checkPathsSync:bL,checkParentPaths:dA,checkParentPathsSync:pA,isSrcSubdir:sd,areIdentical:Wo}});var vA=A((lY,SA)=>{"use strict";var yt=nt(),Go=require("path"),SL=oi().mkdirs,vL=fr().pathExists,_L=nd().utimesMillis,Vo=ln();function OL(i,e,t,r){typeof t=="function"&&!r?(r=t,t={}):typeof t=="function"&&(t={filter:t}),r=r||function(){},t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n	see https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001"),Vo.checkPaths(i,e,"copy",t,(n,s)=>{if(n)return r(n);let{srcStat:o,destStat:a}=s;Vo.checkParentPaths(i,o,e,"copy",l=>l?r(l):t.filter?wA(gA,a,i,e,t,r):gA(a,i,e,t,r))})}function gA(i,e,t,r,n){let s=Go.dirname(t);vL(s,(o,a)=>{if(o)return n(o);if(a)return Vl(i,e,t,r,n);SL(s,l=>l?n(l):Vl(i,e,t,r,n))})}function wA(i,e,t,r,n,s){Promise.resolve(n.filter(t,r)).then(o=>o?i(e,t,r,n,s):s(),o=>s(o))}function TL(i,e,t,r,n){return r.filter?wA(Vl,i,e,t,r,n):Vl(i,e,t,r,n)}function Vl(i,e,t,r,n){(r.dereference?yt.stat:yt.lstat)(e,(o,a)=>o?n(o):a.isDirectory()?LL(a,i,e,t,r,n):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?CL(a,i,e,t,r,n):a.isSymbolicLink()?FL(i,e,t,r,n):a.isSocket()?n(new Error("Cannot copy a socket file: ".concat(e))):a.isFIFO()?n(new Error("Cannot copy a FIFO pipe: ".concat(e))):n(new Error("Unknown file: ".concat(e))))}function CL(i,e,t,r,n,s){return e?NL(i,t,r,n,s):AA(i,t,r,n,s)}function NL(i,e,t,r,n){if(r.overwrite)yt.unlink(t,s=>s?n(s):AA(i,e,t,r,n));else return r.errorOnExist?n(new Error("'".concat(t,"' already exists"))):n()}function AA(i,e,t,r,n){yt.copyFile(e,t,s=>s?n(s):r.preserveTimestamps?IL(i.mode,e,t,n):zl(t,i.mode,n))}function IL(i,e,t,r){return RL(i)?DL(t,i,n=>n?r(n):yA(i,e,t,r)):yA(i,e,t,r)}function RL(i){return(i&128)===0}function DL(i,e,t){return zl(i,e|128,t)}function yA(i,e,t,r){PL(e,t,n=>n?r(n):zl(t,i,r))}function zl(i,e,t){return yt.chmod(i,e,t)}function PL(i,e,t){yt.stat(i,(r,n)=>r?t(r):_L(e,n.atime,n.mtime,t))}function LL(i,e,t,r,n,s){return e?EA(t,r,n,s):xL(i.mode,t,r,n,s)}function xL(i,e,t,r,n){yt.mkdir(t,s=>{if(s)return n(s);EA(e,t,r,o=>o?n(o):zl(t,i,n))})}function EA(i,e,t,r){yt.readdir(i,(n,s)=>n?r(n):bA(s,i,e,t,r))}function bA(i,e,t,r,n){let s=i.pop();return s?kL(i,s,e,t,r,n):n()}function kL(i,e,t,r,n,s){let o=Go.join(t,e),a=Go.join(r,e);Vo.checkPaths(o,a,"copy",n,(l,c)=>{if(l)return s(l);let{destStat:u}=c;TL(u,o,a,n,f=>f?s(f):bA(i,t,r,n,s))})}function FL(i,e,t,r,n){yt.readlink(e,(s,o)=>{if(s)return n(s);if(r.dereference&&(o=Go.resolve(process.cwd(),o)),i)yt.readlink(t,(a,l)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?yt.symlink(o,t,n):n(a):(r.dereference&&(l=Go.resolve(process.cwd(),l)),Vo.isSrcSubdir(o,l)?n(new Error("Cannot copy '".concat(o,"' to a subdirectory of itself, '").concat(l,"'."))):i.isDirectory()&&Vo.isSrcSubdir(l,o)?n(new Error("Cannot overwrite '".concat(l,"' with '").concat(o,"'."))):$L(o,t,n)));else return yt.symlink(o,t,n)})}function $L(i,e,t){yt.unlink(e,r=>r?t(r):yt.symlink(i,e,t))}SA.exports=OL});var NA=A((cY,CA)=>{"use strict";var Ye=nt(),zo=require("path"),qL=oi().mkdirsSync,ML=nd().utimesMillisSync,Yo=ln();function UL(i,e,t){typeof t=="function"&&(t={filter:t}),t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n	see https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");let{srcStat:r,destStat:n}=Yo.checkPathsSync(i,e,"copy",t);return Yo.checkParentPathsSync(i,r,e,"copy"),BL(n,i,e,t)}function BL(i,e,t,r){if(r.filter&&!r.filter(e,t))return;let n=zo.dirname(t);return Ye.existsSync(n)||qL(n),_A(i,e,t,r)}function jL(i,e,t,r){if(!(r.filter&&!r.filter(e,t)))return _A(i,e,t,r)}function _A(i,e,t,r){let s=(r.dereference?Ye.statSync:Ye.lstatSync)(e);if(s.isDirectory())return KL(s,i,e,t,r);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return HL(s,i,e,t,r);if(s.isSymbolicLink())return JL(i,e,t,r);throw s.isSocket()?new Error("Cannot copy a socket file: ".concat(e)):s.isFIFO()?new Error("Cannot copy a FIFO pipe: ".concat(e)):new Error("Unknown file: ".concat(e))}function HL(i,e,t,r,n){return e?WL(i,t,r,n):OA(i,t,r,n)}function WL(i,e,t,r){if(r.overwrite)return Ye.unlinkSync(t),OA(i,e,t,r);if(r.errorOnExist)throw new Error("'".concat(t,"' already exists"))}function OA(i,e,t,r){return Ye.copyFileSync(e,t),r.preserveTimestamps&&GL(i.mode,e,t),od(t,i.mode)}function GL(i,e,t){return VL(i)&&zL(t,i),YL(e,t)}function VL(i){return(i&128)===0}function zL(i,e){return od(i,e|128)}function od(i,e){return Ye.chmodSync(i,e)}function YL(i,e){let t=Ye.statSync(i);return ML(e,t.atime,t.mtime)}function KL(i,e,t,r,n){return e?TA(t,r,n):QL(i.mode,t,r,n)}function QL(i,e,t,r){return Ye.mkdirSync(t),TA(e,t,r),od(t,i)}function TA(i,e,t){Ye.readdirSync(i).forEach(r=>XL(r,i,e,t))}function XL(i,e,t,r){let n=zo.join(e,i),s=zo.join(t,i),{destStat:o}=Yo.checkPathsSync(n,s,"copy",r);return jL(o,n,s,r)}function JL(i,e,t,r){let n=Ye.readlinkSync(e);if(r.dereference&&(n=zo.resolve(process.cwd(),n)),i){let s;try{s=Ye.readlinkSync(t)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return Ye.symlinkSync(n,t);throw o}if(r.dereference&&(s=zo.resolve(process.cwd(),s)),Yo.isSrcSubdir(n,s))throw new Error("Cannot copy '".concat(n,"' to a subdirectory of itself, '").concat(s,"'."));if(Ye.statSync(t).isDirectory()&&Yo.isSrcSubdir(s,n))throw new Error("Cannot overwrite '".concat(s,"' with '").concat(n,"'."));return ZL(n,t)}else return Ye.symlinkSync(n,t)}function ZL(i,e){return Ye.unlinkSync(e),Ye.symlinkSync(i,e)}CA.exports=UL});var Yl=A((uY,IA)=>{"use strict";var ex=mt().fromCallback;IA.exports={copy:ex(vA()),copySync:NA()}});var qA=A((fY,$A)=>{"use strict";var RA=nt(),xA=require("path"),ue=require("assert"),Ko=process.platform==="win32";function kA(i){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{i[t]=i[t]||RA[t],t=t+"Sync",i[t]=i[t]||RA[t]}),i.maxBusyTries=i.maxBusyTries||3}function ad(i,e,t){let r=0;typeof e=="function"&&(t=e,e={}),ue(i,"rimraf: missing path"),ue.strictEqual(typeof i,"string","rimraf: path should be a string"),ue.strictEqual(typeof t,"function","rimraf: callback function required"),ue(e,"rimraf: invalid options argument provided"),ue.strictEqual(typeof e,"object","rimraf: options should be object"),kA(e),DA(i,e,function n(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&r<e.maxBusyTries){r++;let o=r*100;return setTimeout(()=>DA(i,e,n),o)}s.code==="ENOENT"&&(s=null)}t(s)})}function DA(i,e,t){ue(i),ue(e),ue(typeof t=="function"),e.lstat(i,(r,n)=>{if(r&&r.code==="ENOENT")return t(null);if(r&&r.code==="EPERM"&&Ko)return PA(i,e,r,t);if(n&&n.isDirectory())return Kl(i,e,r,t);e.unlink(i,s=>{if(s){if(s.code==="ENOENT")return t(null);if(s.code==="EPERM")return Ko?PA(i,e,s,t):Kl(i,e,s,t);if(s.code==="EISDIR")return Kl(i,e,s,t)}return t(s)})})}function PA(i,e,t,r){ue(i),ue(e),ue(typeof r=="function"),e.chmod(i,438,n=>{n?r(n.code==="ENOENT"?null:t):e.stat(i,(s,o)=>{s?r(s.code==="ENOENT"?null:t):o.isDirectory()?Kl(i,e,t,r):e.unlink(i,r)})})}function LA(i,e,t){let r;ue(i),ue(e);try{e.chmodSync(i,438)}catch(n){if(n.code==="ENOENT")return;throw t}try{r=e.statSync(i)}catch(n){if(n.code==="ENOENT")return;throw t}r.isDirectory()?Ql(i,e,t):e.unlinkSync(i)}function Kl(i,e,t,r){ue(i),ue(e),ue(typeof r=="function"),e.rmdir(i,n=>{n&&(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")?tx(i,e,r):n&&n.code==="ENOTDIR"?r(t):r(n)})}function tx(i,e,t){ue(i),ue(e),ue(typeof t=="function"),e.readdir(i,(r,n)=>{if(r)return t(r);let s=n.length,o;if(s===0)return e.rmdir(i,t);n.forEach(a=>{ad(xA.join(i,a),e,l=>{if(!o){if(l)return t(o=l);--s===0&&e.rmdir(i,t)}})})})}function FA(i,e){let t;e=e||{},kA(e),ue(i,"rimraf: missing path"),ue.strictEqual(typeof i,"string","rimraf: path should be a string"),ue(e,"rimraf: missing options"),ue.strictEqual(typeof e,"object","rimraf: options should be object");try{t=e.lstatSync(i)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&Ko&&LA(i,e,r)}try{t&&t.isDirectory()?Ql(i,e,null):e.unlinkSync(i)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return Ko?LA(i,e,r):Ql(i,e,r);if(r.code!=="EISDIR")throw r;Ql(i,e,r)}}function Ql(i,e,t){ue(i),ue(e);try{e.rmdirSync(i)}catch(r){if(r.code==="ENOTDIR")throw t;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")ix(i,e);else if(r.code!=="ENOENT")throw r}}function ix(i,e){if(ue(i),ue(e),e.readdirSync(i).forEach(t=>FA(xA.join(i,t),e)),Ko){let t=Date.now();do try{return e.rmdirSync(i,e)}catch{}while(Date.now()-t<500)}else return e.rmdirSync(i,e)}$A.exports=ad;ad.sync=FA});var Qo=A((hY,UA)=>{"use strict";var Xl=nt(),rx=mt().fromCallback,MA=qA();function nx(i,e){if(Xl.rm)return Xl.rm(i,{recursive:!0,force:!0},e);MA(i,e)}function sx(i){if(Xl.rmSync)return Xl.rmSync(i,{recursive:!0,force:!0});MA.sync(i)}UA.exports={remove:rx(nx),removeSync:sx}});var YA=A((dY,zA)=>{"use strict";var ox=mt().fromPromise,HA=an(),WA=require("path"),GA=oi(),VA=Qo(),BA=ox(async function(e){let t;try{t=await HA.readdir(e)}catch{return GA.mkdirs(e)}return Promise.all(t.map(r=>VA.remove(WA.join(e,r))))});function jA(i){let e;try{e=HA.readdirSync(i)}catch{return GA.mkdirsSync(i)}e.forEach(t=>{t=WA.join(i,t),VA.removeSync(t)})}zA.exports={emptyDirSync:jA,emptydirSync:jA,emptyDir:BA,emptydir:BA}});var JA=A((pY,XA)=>{"use strict";var ax=mt().fromCallback,KA=require("path"),hr=nt(),QA=oi();function lx(i,e){function t(){hr.writeFile(i,"",r=>{if(r)return e(r);e()})}hr.stat(i,(r,n)=>{if(!r&&n.isFile())return e();let s=KA.dirname(i);hr.stat(s,(o,a)=>{if(o)return o.code==="ENOENT"?QA.mkdirs(s,l=>{if(l)return e(l);t()}):e(o);a.isDirectory()?t():hr.readdir(s,l=>{if(l)return e(l)})})})}function cx(i){let e;try{e=hr.statSync(i)}catch{}if(e&&e.isFile())return;let t=KA.dirname(i);try{hr.statSync(t).isDirectory()||hr.readdirSync(t)}catch(r){if(r&&r.code==="ENOENT")QA.mkdirsSync(t);else throw r}hr.writeFileSync(i,"")}XA.exports={createFile:ax(lx),createFileSync:cx}});var rE=A((mY,iE)=>{"use strict";var ux=mt().fromCallback,ZA=require("path"),dr=nt(),eE=oi(),fx=fr().pathExists,{areIdentical:tE}=ln();function hx(i,e,t){function r(n,s){dr.link(n,s,o=>{if(o)return t(o);t(null)})}dr.lstat(e,(n,s)=>{dr.lstat(i,(o,a)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),t(o);if(s&&tE(a,s))return t(null);let l=ZA.dirname(e);fx(l,(c,u)=>{if(c)return t(c);if(u)return r(i,e);eE.mkdirs(l,f=>{if(f)return t(f);r(i,e)})})})})}function dx(i,e){let t;try{t=dr.lstatSync(e)}catch{}try{let s=dr.lstatSync(i);if(t&&tE(s,t))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let r=ZA.dirname(e);return dr.existsSync(r)||eE.mkdirsSync(r),dr.linkSync(i,e)}iE.exports={createLink:ux(hx),createLinkSync:dx}});var sE=A((gY,nE)=>{"use strict";var pr=require("path"),Xo=nt(),px=fr().pathExists;function mx(i,e,t){if(pr.isAbsolute(i))return Xo.lstat(i,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),t(r)):t(null,{toCwd:i,toDst:i}));{let r=pr.dirname(e),n=pr.join(r,i);return px(n,(s,o)=>s?t(s):o?t(null,{toCwd:n,toDst:i}):Xo.lstat(i,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),t(a)):t(null,{toCwd:i,toDst:pr.relative(r,i)})))}}function gx(i,e){let t;if(pr.isAbsolute(i)){if(t=Xo.existsSync(i),!t)throw new Error("absolute srcpath does not exist");return{toCwd:i,toDst:i}}else{let r=pr.dirname(e),n=pr.join(r,i);if(t=Xo.existsSync(n),t)return{toCwd:n,toDst:i};if(t=Xo.existsSync(i),!t)throw new Error("relative srcpath does not exist");return{toCwd:i,toDst:pr.relative(r,i)}}}nE.exports={symlinkPaths:mx,symlinkPathsSync:gx}});var lE=A((yY,aE)=>{"use strict";var oE=nt();function yx(i,e,t){if(t=typeof e=="function"?e:t,e=typeof e=="function"?!1:e,e)return t(null,e);oE.lstat(i,(r,n)=>{if(r)return t(null,"file");e=n&&n.isDirectory()?"dir":"file",t(null,e)})}function wx(i,e){let t;if(e)return e;try{t=oE.lstatSync(i)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}aE.exports={symlinkType:yx,symlinkTypeSync:wx}});var gE=A((wY,mE)=>{"use strict";var Ax=mt().fromCallback,uE=require("path"),ai=an(),fE=oi(),Ex=fE.mkdirs,bx=fE.mkdirsSync,hE=sE(),Sx=hE.symlinkPaths,vx=hE.symlinkPathsSync,dE=lE(),_x=dE.symlinkType,Ox=dE.symlinkTypeSync,Tx=fr().pathExists,{areIdentical:pE}=ln();function Cx(i,e,t,r){r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,ai.lstat(e,(n,s)=>{!n&&s.isSymbolicLink()?Promise.all([ai.stat(i),ai.stat(e)]).then(([o,a])=>{if(pE(o,a))return r(null);cE(i,e,t,r)}):cE(i,e,t,r)})}function cE(i,e,t,r){Sx(i,e,(n,s)=>{if(n)return r(n);i=s.toDst,_x(s.toCwd,t,(o,a)=>{if(o)return r(o);let l=uE.dirname(e);Tx(l,(c,u)=>{if(c)return r(c);if(u)return ai.symlink(i,e,a,r);Ex(l,f=>{if(f)return r(f);ai.symlink(i,e,a,r)})})})})}function Nx(i,e,t){let r;try{r=ai.lstatSync(e)}catch{}if(r&&r.isSymbolicLink()){let a=ai.statSync(i),l=ai.statSync(e);if(pE(a,l))return}let n=vx(i,e);i=n.toDst,t=Ox(n.toCwd,t);let s=uE.dirname(e);return ai.existsSync(s)||bx(s),ai.symlinkSync(i,e,t)}mE.exports={createSymlink:Ax(Cx),createSymlinkSync:Nx}});var _E=A((AY,vE)=>{"use strict";var{createFile:yE,createFileSync:wE}=JA(),{createLink:AE,createLinkSync:EE}=rE(),{createSymlink:bE,createSymlinkSync:SE}=gE();vE.exports={createFile:yE,createFileSync:wE,ensureFile:yE,ensureFileSync:wE,createLink:AE,createLinkSync:EE,ensureLink:AE,ensureLinkSync:EE,createSymlink:bE,createSymlinkSync:SE,ensureSymlink:bE,ensureSymlinkSync:SE}});var Jl=A((EY,OE)=>{function Ix(i,{EOL:e="\n",finalEOL:t=!0,replacer:r=null,spaces:n}={}){let s=t?e:"";return JSON.stringify(i,r,n).replace(/\n/g,e)+s}function Rx(i){return Buffer.isBuffer(i)&&(i=i.toString("utf8")),i.replace(/^\uFEFF/,"")}OE.exports={stringify:Ix,stripBom:Rx}});var IE=A((bY,NE)=>{var hs;try{hs=nt()}catch{hs=require("fs")}var Zl=mt(),{stringify:TE,stripBom:CE}=Jl();async function Dx(i,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||hs,r="throws"in e?e.throws:!0,n=await Zl.fromCallback(t.readFile)(i,e);n=CE(n);let s;try{s=JSON.parse(n,e?e.reviver:null)}catch(o){if(r)throw o.message="".concat(i,": ").concat(o.message),o;return null}return s}var Px=Zl.fromPromise(Dx);function Lx(i,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||hs,r="throws"in e?e.throws:!0;try{let n=t.readFileSync(i,e);return n=CE(n),JSON.parse(n,e.reviver)}catch(n){if(r)throw n.message="".concat(i,": ").concat(n.message),n;return null}}async function xx(i,e,t={}){let r=t.fs||hs,n=TE(e,t);await Zl.fromCallback(r.writeFile)(i,n,t)}var kx=Zl.fromPromise(xx);function Fx(i,e,t={}){let r=t.fs||hs,n=TE(e,t);return r.writeFileSync(i,n,t)}var $x={readFile:Px,readFileSync:Lx,writeFile:kx,writeFileSync:Fx};NE.exports=$x});var DE=A((SY,RE)=>{"use strict";var ec=IE();RE.exports={readJson:ec.readFile,readJsonSync:ec.readFileSync,writeJson:ec.writeFile,writeJsonSync:ec.writeFileSync}});var tc=A((vY,xE)=>{"use strict";var qx=mt().fromCallback,Jo=nt(),PE=require("path"),LE=oi(),Mx=fr().pathExists;function Ux(i,e,t,r){typeof t=="function"&&(r=t,t="utf8");let n=PE.dirname(i);Mx(n,(s,o)=>{if(s)return r(s);if(o)return Jo.writeFile(i,e,t,r);LE.mkdirs(n,a=>{if(a)return r(a);Jo.writeFile(i,e,t,r)})})}function Bx(i,...e){let t=PE.dirname(i);if(Jo.existsSync(t))return Jo.writeFileSync(i,...e);LE.mkdirsSync(t),Jo.writeFileSync(i,...e)}xE.exports={outputFile:qx(Ux),outputFileSync:Bx}});var FE=A((_Y,kE)=>{"use strict";var{stringify:jx}=Jl(),{outputFile:Hx}=tc();async function Wx(i,e,t={}){let r=jx(e,t);await Hx(i,r,t)}kE.exports=Wx});var qE=A((OY,$E)=>{"use strict";var{stringify:Gx}=Jl(),{outputFileSync:Vx}=tc();function zx(i,e,t){let r=Gx(e,t);Vx(i,r,t)}$E.exports=zx});var UE=A((TY,ME)=>{"use strict";var Yx=mt().fromPromise,st=DE();st.outputJson=Yx(FE());st.outputJsonSync=qE();st.outputJSON=st.outputJson;st.outputJSONSync=st.outputJsonSync;st.writeJSON=st.writeJson;st.writeJSONSync=st.writeJsonSync;st.readJSON=st.readJson;st.readJSONSync=st.readJsonSync;ME.exports=st});var GE=A((CY,WE)=>{"use strict";var Kx=nt(),cd=require("path"),Qx=Yl().copy,HE=Qo().remove,Xx=oi().mkdirp,Jx=fr().pathExists,BE=ln();function Zx(i,e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=t.overwrite||t.clobber||!1;BE.checkPaths(i,e,"move",t,(s,o)=>{if(s)return r(s);let{srcStat:a,isChangingCase:l=!1}=o;BE.checkParentPaths(i,a,e,"move",c=>{if(c)return r(c);if(ek(e))return jE(i,e,n,l,r);Xx(cd.dirname(e),u=>u?r(u):jE(i,e,n,l,r))})})}function ek(i){let e=cd.dirname(i);return cd.parse(e).root===e}function jE(i,e,t,r,n){if(r)return ld(i,e,t,n);if(t)return HE(e,s=>s?n(s):ld(i,e,t,n));Jx(e,(s,o)=>s?n(s):o?n(new Error("dest already exists.")):ld(i,e,t,n))}function ld(i,e,t,r){Kx.rename(i,e,n=>n?n.code!=="EXDEV"?r(n):tk(i,e,t,r):r())}function tk(i,e,t,r){Qx(i,e,{overwrite:t,errorOnExist:!0},s=>s?r(s):HE(i,r))}WE.exports=Zx});var QE=A((NY,KE)=>{"use strict";var zE=nt(),fd=require("path"),ik=Yl().copySync,YE=Qo().removeSync,rk=oi().mkdirpSync,VE=ln();function nk(i,e,t){t=t||{};let r=t.overwrite||t.clobber||!1,{srcStat:n,isChangingCase:s=!1}=VE.checkPathsSync(i,e,"move",t);return VE.checkParentPathsSync(i,n,e,"move"),sk(e)||rk(fd.dirname(e)),ok(i,e,r,s)}function sk(i){let e=fd.dirname(i);return fd.parse(e).root===e}function ok(i,e,t,r){if(r)return ud(i,e,t);if(t)return YE(e),ud(i,e,t);if(zE.existsSync(e))throw new Error("dest already exists.");return ud(i,e,t)}function ud(i,e,t){try{zE.renameSync(i,e)}catch(r){if(r.code!=="EXDEV")throw r;return ak(i,e,t)}}function ak(i,e,t){return ik(i,e,{overwrite:t,errorOnExist:!0}),YE(i)}KE.exports=nk});var JE=A((IY,XE)=>{"use strict";var lk=mt().fromCallback;XE.exports={move:lk(GE()),moveSync:QE()}});var Pi=A((RY,ZE)=>{"use strict";ZE.exports={...an(),...Yl(),...YA(),..._E(),...UE(),...oi(),...JE(),...tc(),...fr(),...Qo()}});var ic=A(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.CancellationError=ds.CancellationToken=void 0;var ck=require("events"),hd=class extends ck.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(e){this.removeParentCancelHandler(),this._parent=e,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(e){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,e!=null&&(this.parent=e)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(e){this.cancelled?e():this.once("cancel",e)}createPromise(e){if(this.cancelled)return Promise.reject(new Zo);let t=()=>{if(r!=null)try{this.removeListener("cancel",r),r=null}catch{}},r=null;return new Promise((n,s)=>{let o=null;if(r=()=>{try{o!=null&&(o(),o=null)}finally{s(new Zo)}},this.cancelled){r();return}this.onCancel(r),e(n,s,a=>{o=a})}).then(n=>(t(),n)).catch(n=>{throw t(),n})}removeParentCancelHandler(){let e=this._parent;e!=null&&this.parentCancelHandler!=null&&(e.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};ds.CancellationToken=hd;var Zo=class extends Error{constructor(){super("cancelled")}};ds.CancellationError=Zo});var ea=A(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.newError=uk;function uk(i,e){let t=new Error(i);return t.code=e,t}});var tb=A((LY,eb)=>{var ps=1e3,ms=ps*60,gs=ms*60,cn=gs*24,fk=cn*7,hk=cn*365.25;eb.exports=function(i,e){e=e||{};var t=typeof i;if(t==="string"&&i.length>0)return dk(i);if(t==="number"&&isFinite(i))return e.long?mk(i):pk(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function dk(i){if(i=String(i),!(i.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(e){var t=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return t*hk;case"weeks":case"week":case"w":return t*fk;case"days":case"day":case"d":return t*cn;case"hours":case"hour":case"hrs":case"hr":case"h":return t*gs;case"minutes":case"minute":case"mins":case"min":case"m":return t*ms;case"seconds":case"second":case"secs":case"sec":case"s":return t*ps;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function pk(i){var e=Math.abs(i);return e>=cn?Math.round(i/cn)+"d":e>=gs?Math.round(i/gs)+"h":e>=ms?Math.round(i/ms)+"m":e>=ps?Math.round(i/ps)+"s":i+"ms"}function mk(i){var e=Math.abs(i);return e>=cn?rc(i,e,cn,"day"):e>=gs?rc(i,e,gs,"hour"):e>=ms?rc(i,e,ms,"minute"):e>=ps?rc(i,e,ps,"second"):i+" ms"}function rc(i,e,t,r){var n=e>=t*1.5;return Math.round(i/t)+" "+r+(n?"s":"")}});var pd=A((xY,ib)=>{function gk(i){t.debug=t,t.default=t,t.coerce=l,t.disable=o,t.enable=n,t.enabled=a,t.humanize=tb(),t.destroy=c,Object.keys(i).forEach(u=>{t[u]=i[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let f=0;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return t.colors[Math.abs(f)%t.colors.length]}t.selectColor=e;function t(u){let f,h=null,d,y;function g(...w){if(!g.enabled)return;let S=g,v=Number(new Date),T=v-(f||v);S.diff=T,S.prev=f,S.curr=v,f=v,w[0]=t.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let N=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(R,x)=>{if(R==="%%")return"%";N++;let b=t.formatters[x];if(typeof b=="function"){let D=w[N];R=b.call(S,D),w.splice(N,1),N--}return R}),t.formatArgs.call(S,w),(S.log||t.log).apply(S,w)}return g.namespace=u,g.useColors=t.useColors(),g.color=t.selectColor(u),g.extend=r,g.destroy=t.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==t.namespaces&&(d=t.namespaces,y=t.enabled(u)),y),set:w=>{h=w}}),typeof t.init=="function"&&t.init(g),g}function r(u,f){let h=t(this.namespace+(typeof f>"u"?":":f)+u);return h.log=this.log,h}function n(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let f=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let h of f)h[0]==="-"?t.skips.push(h.slice(1)):t.names.push(h)}function s(u,f){let h=0,d=0,y=-1,g=0;for(;h<u.length;)if(d<f.length&&(f[d]===u[h]||f[d]==="*"))f[d]==="*"?(y=d,g=h,d++):(h++,d++);else if(y!==-1)d=y+1,g++,h=g;else return!1;for(;d<f.length&&f[d]==="*";)d++;return d===f.length}function o(){let u=[...t.names,...t.skips.map(f=>"-"+f)].join(",");return t.enable(""),u}function a(u){for(let f of t.skips)if(s(u,f))return!1;for(let f of t.names)if(s(u,f))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}ib.exports=gk});var rb=A((wt,nc)=>{wt.formatArgs=wk;wt.save=Ak;wt.load=Ek;wt.useColors=yk;wt.storage=bk();wt.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();wt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function yk(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let i;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(i[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function wk(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+nc.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;i.splice(1,0,e,"color: inherit");let t=0,r=0;i[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(t++,n==="%c"&&(r=t))}),i.splice(r,0,e)}wt.log=console.debug||console.log||(()=>{});function Ak(i){try{i?wt.storage.setItem("debug",i):wt.storage.removeItem("debug")}catch{}}function Ek(){let i;try{i=wt.storage.getItem("debug")||wt.storage.getItem("DEBUG")}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}function bk(){try{return localStorage}catch{}}nc.exports=pd()(wt);var{formatters:Sk}=nc.exports;Sk.j=function(i){try{return JSON.stringify(i)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var sb=A((kY,nb)=>{"use strict";nb.exports=(i,e=process.argv)=>{let t=i.startsWith("-")?"":i.length===1?"-":"--",r=e.indexOf(t+i),n=e.indexOf("--");return r!==-1&&(n===-1||r<n)}});var lb=A((FY,ab)=>{"use strict";var vk=require("os"),ob=require("tty"),Gt=sb(),{env:xe}=process,mr;Gt("no-color")||Gt("no-colors")||Gt("color=false")||Gt("color=never")?mr=0:(Gt("color")||Gt("colors")||Gt("color=true")||Gt("color=always"))&&(mr=1);"FORCE_COLOR"in xe&&(xe.FORCE_COLOR==="true"?mr=1:xe.FORCE_COLOR==="false"?mr=0:mr=xe.FORCE_COLOR.length===0?1:Math.min(parseInt(xe.FORCE_COLOR,10),3));function md(i){return i===0?!1:{level:i,hasBasic:!0,has256:i>=2,has16m:i>=3}}function gd(i,e){if(mr===0)return 0;if(Gt("color=16m")||Gt("color=full")||Gt("color=truecolor"))return 3;if(Gt("color=256"))return 2;if(i&&!e&&mr===void 0)return 0;let t=mr||0;if(xe.TERM==="dumb")return t;if(process.platform==="win32"){let r=vk.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in xe)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in xe)||xe.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in xe)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(xe.TEAMCITY_VERSION)?1:0;if(xe.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in xe){let r=parseInt((xe.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(xe.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(xe.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(xe.TERM)||"COLORTERM"in xe?1:t}function _k(i){let e=gd(i,i&&i.isTTY);return md(e)}ab.exports={supportsColor:_k,stdout:md(gd(!0,ob.isatty(1))),stderr:md(gd(!0,ob.isatty(2)))}});var ub=A((ke,oc)=>{var Ok=require("tty"),sc=require("util");ke.init=Pk;ke.log=Ik;ke.formatArgs=Ck;ke.save=Rk;ke.load=Dk;ke.useColors=Tk;ke.destroy=sc.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ke.colors=[6,2,3,4,5,1];try{let i=lb();i&&(i.stderr||i).level>=2&&(ke.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ke.inspectOpts=Object.keys(process.env).filter(i=>/^debug_/i.test(i)).reduce((i,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),i[t]=r,i},{});function Tk(){return"colors"in ke.inspectOpts?!!ke.inspectOpts.colors:Ok.isatty(process.stderr.fd)}function Ck(i){let{namespace:e,useColors:t}=this;if(t){let r=this.color,n="\x1B[3"+(r<8?r:"8;5;"+r),s="  ".concat(n,";1m").concat(e," \x1B[0m");i[0]=s+i[0].split("\n").join("\n"+s),i.push(n+"m+"+oc.exports.humanize(this.diff)+"\x1B[0m")}else i[0]=Nk()+e+" "+i[0]}function Nk(){return ke.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Ik(...i){return process.stderr.write(sc.formatWithOptions(ke.inspectOpts,...i)+"\n")}function Rk(i){i?process.env.DEBUG=i:delete process.env.DEBUG}function Dk(){return process.env.DEBUG}function Pk(i){i.inspectOpts={};let e=Object.keys(ke.inspectOpts);for(let t=0;t<e.length;t++)i.inspectOpts[e[t]]=ke.inspectOpts[e[t]]}oc.exports=pd()(ke);var{formatters:cb}=oc.exports;cb.o=function(i){return this.inspectOpts.colors=this.useColors,sc.inspect(i,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")};cb.O=function(i){return this.inspectOpts.colors=this.useColors,sc.inspect(i,this.inspectOpts)}});var fb=A(($Y,yd)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?yd.exports=rb():yd.exports=ub()});var Ad=A(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.ProgressCallbackTransform=void 0;var Lk=require("stream"),wd=class extends Lk.Transform{constructor(e,t,r){super(),this.total=e,this.cancellationToken=t,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(e,t,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}this.transferred+=e.length,this.delta+=e.length;let n=Date.now();n>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=n+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((n-this.start)/1e3))}),this.delta=0),r(null,e)}_flush(e){if(this.cancellationToken.cancelled){e(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,e(null)}};ac.ProgressCallbackTransform=wd});var mb=A(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.DigestTransform=ot.HttpExecutor=ot.HttpError=void 0;ot.createHttpError=Ed;ot.parseJson=Bk;ot.configureRequestOptionsFromUrl=pb;ot.configureRequestUrl=Sd;ot.safeGetHeader=ys;ot.configureRequestOptions=lc;ot.safeStringifyJson=cc;var xk=require("crypto"),kk=fb(),Fk=require("fs"),$k=require("stream"),db=require("url"),qk=ic(),hb=ea(),Mk=Ad(),ta=(0,kk.default)("electron-builder");function Ed(i,e=null){return new ia(i.statusCode||-1,"".concat(i.statusCode," ").concat(i.statusMessage)+(e==null?"":"\n"+JSON.stringify(e,null,"  "))+"\nHeaders: "+cc(i.headers),e)}var Uk=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]),ia=class extends Error{constructor(e,t="HTTP error: ".concat(Uk.get(e)||e),r=null){super(t),this.statusCode=e,this.description=r,this.name="HttpError",this.code="HTTP_ERROR_".concat(e)}isServerError(){return this.statusCode>=500&&this.statusCode<=599}};ot.HttpError=ia;function Bk(i){return i.then(e=>e==null||e.length===0?null:JSON.parse(e))}var bd=class i{constructor(){this.maxRedirects=10}request(e,t=new qk.CancellationToken,r){lc(e);let n=r==null?void 0:JSON.stringify(r),s=n?Buffer.from(n):void 0;if(s!=null){ta(n);let{headers:o,...a}=e;e={method:"post",headers:{"Content-Type":"application/json","Content-Length":s.length,...o},...a}}return this.doApiRequest(e,t,o=>o.end(s))}doApiRequest(e,t,r,n=0){return ta.enabled&&ta("Request: ".concat(cc(e))),t.createPromise((s,o,a)=>{let l=this.createRequest(e,c=>{try{this.handleResponse(c,e,t,s,o,n,r)}catch(u){o(u)}});this.addErrorAndTimeoutHandlers(l,o,e.timeout),this.addRedirectHandlers(l,e,o,n,c=>{this.doApiRequest(c,t,r,n).then(s).catch(o)}),r(l,o),a(()=>l.abort())})}addRedirectHandlers(e,t,r,n,s){}addErrorAndTimeoutHandlers(e,t,r=60*1e3){this.addTimeOutHandler(e,t,r),e.on("error",t),e.on("aborted",()=>{t(new Error("Request has been aborted by the server"))})}handleResponse(e,t,r,n,s,o,a){var l;if(ta.enabled&&ta("Response: ".concat(e.statusCode," ").concat(e.statusMessage,", request options: ").concat(cc(t))),e.statusCode===404){s(Ed(e,"method: ".concat(t.method||"GET"," url: ").concat(t.protocol||"https:","//").concat(t.hostname).concat(t.port?":".concat(t.port):"").concat(t.path,"\n\nPlease double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.\n")));return}else if(e.statusCode===204){n();return}let c=(l=e.statusCode)!==null&&l!==void 0?l:0,u=c>=300&&c<400,f=ys(e,"location");if(u&&f!=null){if(o>this.maxRedirects){s(this.createMaxRedirectError());return}this.doApiRequest(i.prepareRedirectUrlOptions(f,t),r,a,o).then(n).catch(s);return}e.setEncoding("utf8");let h="";e.on("error",s),e.on("data",d=>h+=d),e.on("end",()=>{try{if(e.statusCode!=null&&e.statusCode>=400){let d=ys(e,"content-type"),y=d!=null&&(Array.isArray(d)?d.find(g=>g.includes("json"))!=null:d.includes("json"));s(Ed(e,"method: ".concat(t.method||"GET"," url: ").concat(t.protocol||"https:","//").concat(t.hostname).concat(t.port?":".concat(t.port):"").concat(t.path,"\n\n          Data:\n          ").concat(y?JSON.stringify(JSON.parse(h)):h,"\n          ")))}else n(h.length===0?null:h)}catch(d){s(d)}})}async downloadToBuffer(e,t){return await t.cancellationToken.createPromise((r,n,s)=>{let o=[],a={headers:t.headers||void 0,redirect:"manual"};Sd(e,a),lc(a),this.doDownload(a,{destination:null,options:t,onCancel:s,callback:l=>{l==null?r(Buffer.concat(o)):n(l)},responseHandler:(l,c)=>{let u=0;l.on("data",f=>{if(u+=f.length,u>524288e3){c(new Error("Maximum allowed size is 500 MB"));return}o.push(f)}),l.on("end",()=>{c(null)})}},0)})}doDownload(e,t,r){let n=this.createRequest(e,s=>{if(s.statusCode>=400){t.callback(new Error('Cannot download "'.concat(e.protocol||"https:","//").concat(e.hostname).concat(e.path,'", status ').concat(s.statusCode,": ").concat(s.statusMessage)));return}s.on("error",t.callback);let o=ys(s,"location");if(o!=null){r<this.maxRedirects?this.doDownload(i.prepareRedirectUrlOptions(o,e),t,r++):t.callback(this.createMaxRedirectError());return}t.responseHandler==null?Hk(t,s):t.responseHandler(s,t.callback)});this.addErrorAndTimeoutHandlers(n,t.callback,e.timeout),this.addRedirectHandlers(n,e,t.callback,r,s=>{this.doDownload(s,t,r++)}),n.end()}createMaxRedirectError(){return new Error("Too many redirects (> ".concat(this.maxRedirects,")"))}addTimeOutHandler(e,t,r){e.on("socket",n=>{n.setTimeout(r,()=>{e.abort(),t(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(e,t){let r=pb(e,{...t}),n=r.headers;if(n?.authorization){let s=new db.URL(e);(s.hostname.endsWith(".amazonaws.com")||s.searchParams.has("X-Amz-Credential"))&&delete n.authorization}return r}static retryOnServerError(e,t=3){for(let r=0;;r++)try{return e()}catch(n){if(r<t&&(n instanceof ia&&n.isServerError()||n.code==="EPIPE"))continue;throw n}}};ot.HttpExecutor=bd;function pb(i,e){let t=lc(e);return Sd(new db.URL(i),t),t}function Sd(i,e){e.protocol=i.protocol,e.hostname=i.hostname,i.port?e.port=i.port:e.port&&delete e.port,e.path=i.pathname+i.search}var ra=class extends $k.Transform{get actual(){return this._actual}constructor(e,t="sha512",r="base64"){super(),this.expected=e,this.algorithm=t,this.encoding=r,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,xk.createHash)(t)}_transform(e,t,r){this.digester.update(e),r(null,e)}_flush(e){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(t){e(t);return}e(null)}validate(){if(this._actual==null)throw(0,hb.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,hb.newError)("".concat(this.algorithm," checksum mismatch, expected ").concat(this.expected,", got ").concat(this._actual),"ERR_CHECKSUM_MISMATCH");return null}};ot.DigestTransform=ra;function jk(i,e,t){return i!=null&&e!=null&&i!==e?(t(new Error("checksum mismatch: expected ".concat(e," but got ").concat(i," (X-Checksum-Sha2 header)"))),!1):!0}function ys(i,e){let t=i.headers[e];return t==null?null:Array.isArray(t)?t.length===0?null:t[t.length-1]:t}function Hk(i,e){if(!jk(ys(e,"X-Checksum-Sha2"),i.options.sha2,i.callback))return;let t=[];if(i.options.onProgress!=null){let o=ys(e,"content-length");o!=null&&t.push(new Mk.ProgressCallbackTransform(parseInt(o,10),i.options.cancellationToken,i.options.onProgress))}let r=i.options.sha512;r!=null?t.push(new ra(r,"sha512",r.length===128&&!r.includes("+")&&!r.includes("Z")&&!r.includes("=")?"hex":"base64")):i.options.sha2!=null&&t.push(new ra(i.options.sha2,"sha256","hex"));let n=(0,Fk.createWriteStream)(i.destination);t.push(n);let s=e;for(let o of t)o.on("error",a=>{n.close(),i.options.cancellationToken.cancelled||i.callback(a)}),s=s.pipe(o);n.on("finish",()=>{n.close(i.callback)})}function lc(i,e,t){t!=null&&(i.method=t),i.headers={...i.headers};let r=i.headers;return e!=null&&(r.authorization=e.startsWith("Basic")||e.startsWith("Bearer")?e:"token ".concat(e)),r["User-Agent"]==null&&(r["User-Agent"]="electron-builder"),(t==null||t==="GET"||r["Cache-Control"]==null)&&(r["Cache-Control"]="no-cache"),i.protocol==null&&process.versions.electron!=null&&(i.protocol="https:"),i}function cc(i,e){return JSON.stringify(i,(t,r)=>t.endsWith("Authorization")||t.endsWith("authorization")||t.endsWith("Password")||t.endsWith("PASSWORD")||t.endsWith("Token")||t.includes("password")||t.includes("token")||e!=null&&e.has(t)?"<stripped sensitive data>":r,2)}});var yb=A(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.MemoLazy=void 0;var vd=class{constructor(e,t){this.selector=e,this.creator=t,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){let e=this.selector();if(this._value!==void 0&&gb(this.selected,e))return this._value;this.selected=e;let t=this.creator(e);return this.value=t,t}set value(e){this._value=e}};uc.MemoLazy=vd;function gb(i,e){if(typeof i=="object"&&i!==null&&(typeof e=="object"&&e!==null)){let n=Object.keys(i),s=Object.keys(e);return n.length===s.length&&n.every(o=>gb(i[o],e[o]))}return i===e}});var Ab=A(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.githubUrl=Wk;fc.getS3LikeProviderBaseUrl=Gk;function Wk(i,e="github.com"){return"".concat(i.protocol||"https","://").concat(i.host||e)}function Gk(i){let e=i.provider;if(e==="s3")return Vk(i);if(e==="spaces")return zk(i);throw new Error("Not supported provider: ".concat(e))}function Vk(i){let e;if(i.accelerate==!0)e="https://".concat(i.bucket,".s3-accelerate.amazonaws.com");else if(i.endpoint!=null)e="".concat(i.endpoint,"/").concat(i.bucket);else if(i.bucket.includes(".")){if(i.region==null)throw new Error('Bucket name "'.concat(i.bucket,'" includes a dot, but S3 region is missing'));i.region==="us-east-1"?e="https://s3.amazonaws.com/".concat(i.bucket):e="https://s3-".concat(i.region,".amazonaws.com/").concat(i.bucket)}else i.region==="cn-north-1"?e="https://".concat(i.bucket,".s3.").concat(i.region,".amazonaws.com.cn"):e="https://".concat(i.bucket,".s3.amazonaws.com");return wb(e,i.path)}function wb(i,e){return e!=null&&e.length>0&&(e.startsWith("/")||(i+="/"),i+=e),i}function zk(i){if(i.name==null)throw new Error("name is missing");if(i.region==null)throw new Error("region is missing");return wb("https://".concat(i.name,".").concat(i.region,".digitaloceanspaces.com"),i.path)}});var bb=A(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.retry=Eb;var Yk=ic();async function Eb(i,e,t,r=0,n=0,s){var o;let a=new Yk.CancellationToken;try{return await i()}catch(l){if((!((o=s?.(l))!==null&&o!==void 0)||o)&&e>0&&!a.cancelled)return await new Promise(c=>setTimeout(c,t+r*n)),await Eb(i,e-1,t,r,n+1,s);throw l}}});var Sb=A(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});Od.parseDn=Kk;function Kk(i){let e=!1,t=null,r="",n=0;i=i.trim();let s=new Map;for(let o=0;o<=i.length;o++){if(o===i.length){t!==null&&s.set(t,r);break}let a=i[o];if(e){if(a==='"'){e=!1;continue}}else{if(a==='"'){e=!0;continue}if(a==="\\"){o++;let l=parseInt(i.slice(o,o+2),16);Number.isNaN(l)?r+=i[o]:(o++,r+=String.fromCharCode(l));continue}if(t===null&&a==="="){t=r,r="";continue}if(a===","||a===";"||a==="+"){t!==null&&s.set(t,r),t=null,r="";continue}}if(a===" "&&!e){if(r.length===0)continue;if(o>n){let l=o;for(;i[l]===" ";)l++;n=l}if(n>=i.length||i[n]===","||i[n]===";"||t===null&&i[n]==="="||t!==null&&i[n]==="+"){o=n-1;continue}}r+=a}return s}});var Cb=A(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.nil=ws.UUID=void 0;var Ob=require("crypto"),Tb=ea(),Qk="options.name must be either a string or a Buffer",vb=(0,Ob.randomBytes)(16);vb[0]=vb[0]|1;var hc={},J=[];for(let i=0;i<256;i++){let e=(i+256).toString(16).substr(1);hc[e]=i,J[i]=e}var un=class i{constructor(e){this.ascii=null,this.binary=null;let t=i.check(e);if(!t)throw new Error("not a UUID");this.version=t.version,t.format==="ascii"?this.ascii=e:this.binary=e}static v5(e,t){return Xk(e,"sha1",80,t)}toString(){return this.ascii==null&&(this.ascii=Jk(this.binary)),this.ascii}inspect(){return"UUID v".concat(this.version," ").concat(this.toString())}static check(e,t=0){if(typeof e=="string")return e=e.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(e)?e==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(hc[e[14]+e[15]]&240)>>4,variant:_b((hc[e[19]+e[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(e)){if(e.length<t+16)return!1;let r=0;for(;r<16&&e[t+r]===0;r++);return r===16?{version:void 0,variant:"nil",format:"binary"}:{version:(e[t+6]&240)>>4,variant:_b((e[t+8]&224)>>5),format:"binary"}}throw(0,Tb.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(e){let t=Buffer.allocUnsafe(16),r=0;for(let n=0;n<16;n++)t[n]=hc[e[r++]+e[r++]],(n===3||n===5||n===7||n===9)&&(r+=1);return t}};ws.UUID=un;un.OID=un.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function _b(i){switch(i){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var na;(function(i){i[i.ASCII=0]="ASCII",i[i.BINARY=1]="BINARY",i[i.OBJECT=2]="OBJECT"})(na||(na={}));function Xk(i,e,t,r,n=na.ASCII){let s=(0,Ob.createHash)(e);if(typeof i!="string"&&!Buffer.isBuffer(i))throw(0,Tb.newError)(Qk,"ERR_INVALID_UUID_NAME");s.update(r),s.update(i);let a=s.digest(),l;switch(n){case na.BINARY:a[6]=a[6]&15|t,a[8]=a[8]&63|128,l=a;break;case na.OBJECT:a[6]=a[6]&15|t,a[8]=a[8]&63|128,l=new un(a);break;default:l=J[a[0]]+J[a[1]]+J[a[2]]+J[a[3]]+"-"+J[a[4]]+J[a[5]]+"-"+J[a[6]&15|t]+J[a[7]]+"-"+J[a[8]&63|128]+J[a[9]]+"-"+J[a[10]]+J[a[11]]+J[a[12]]+J[a[13]]+J[a[14]]+J[a[15]];break}return l}function Jk(i){return J[i[0]]+J[i[1]]+J[i[2]]+J[i[3]]+"-"+J[i[4]]+J[i[5]]+"-"+J[i[6]]+J[i[7]]+"-"+J[i[8]]+J[i[9]]+"-"+J[i[10]]+J[i[11]]+J[i[12]]+J[i[13]]+J[i[14]]+J[i[15]]}ws.nil=new un("00000000-0000-0000-0000-000000000000")});var Nb=A(dc=>{(function(i){i.parser=function(E,m){return new t(E,m)},i.SAXParser=t,i.SAXStream=c,i.createStream=l,i.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];i.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(E,m){if(!(this instanceof t))return new t(E,m);var I=this;n(I),I.q=I.c="",I.bufferCheckPosition=i.MAX_BUFFER_LENGTH,I.opt=m||{},I.opt.lowercase=I.opt.lowercase||I.opt.lowercasetags,I.looseCase=I.opt.lowercase?"toLowerCase":"toUpperCase",I.tags=[],I.closed=I.closedRoot=I.sawRoot=!1,I.tag=I.error=null,I.strict=!!E,I.noscript=!!(E||I.opt.noscript),I.state=b.BEGIN,I.strictEntities=I.opt.strictEntities,I.ENTITIES=I.strictEntities?Object.create(i.XML_ENTITIES):Object.create(i.ENTITIES),I.attribList=[],I.opt.xmlns&&(I.ns=Object.create(y)),I.opt.unquotedAttributeValues===void 0&&(I.opt.unquotedAttributeValues=!E),I.trackPosition=I.opt.position!==!1,I.trackPosition&&(I.position=I.line=I.column=0),B(I,"onready")}Object.create||(Object.create=function(E){function m(){}m.prototype=E;var I=new m;return I}),Object.keys||(Object.keys=function(E){var m=[];for(var I in E)E.hasOwnProperty(I)&&m.push(I);return m});function r(E){for(var m=Math.max(i.MAX_BUFFER_LENGTH,10),I=0,O=0,re=e.length;O<re;O++){var Ne=E[e[O]].length;if(Ne>m)switch(e[O]){case"textNode":U(E);break;case"cdata":k(E,"oncdata",E.cdata),E.cdata="";break;case"script":k(E,"onscript",E.script),E.script="";break;default:ie(E,"Max buffer length exceeded: "+e[O])}I=Math.max(I,Ne)}var Ie=i.MAX_BUFFER_LENGTH-I;E.bufferCheckPosition=Ie+E.position}function n(E){for(var m=0,I=e.length;m<I;m++)E[e[m]]=""}function s(E){U(E),E.cdata!==""&&(k(E,"oncdata",E.cdata),E.cdata=""),E.script!==""&&(k(E,"onscript",E.script),E.script="")}t.prototype={end:function(){X(this)},write:IP,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var o;try{o=require("stream").Stream}catch{o=function(){}}o||(o=function(){});var a=i.EVENTS.filter(function(E){return E!=="error"&&E!=="end"});function l(E,m){return new c(E,m)}function c(E,m){if(!(this instanceof c))return new c(E,m);o.apply(this),this._parser=new t(E,m),this.writable=!0,this.readable=!0;var I=this;this._parser.onend=function(){I.emit("end")},this._parser.onerror=function(O){I.emit("error",O),I._parser.error=null},this._decoder=null,a.forEach(function(O){Object.defineProperty(I,"on"+O,{get:function(){return I._parser["on"+O]},set:function(re){if(!re)return I.removeAllListeners(O),I._parser["on"+O]=re,re;I.on(O,re)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(o.prototype,{constructor:{value:c}}),c.prototype.write=function(E){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(E)){if(!this._decoder){var m=require("string_decoder").StringDecoder;this._decoder=new m("utf8")}E=this._decoder.write(E)}return this._parser.write(E.toString()),this.emit("data",E),!0},c.prototype.end=function(E){return E&&E.length&&this.write(E),this._parser.end(),!0},c.prototype.on=function(E,m){var I=this;return!I._parser["on"+E]&&a.indexOf(E)!==-1&&(I._parser["on"+E]=function(){var O=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);O.splice(0,0,E),I.emit.apply(I,O)}),o.prototype.on.call(I,E,m)};var u="[CDATA[",f="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/2000/xmlns/",y={xml:h,xmlns:d},g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function T(E){return E===" "||E==="\n"||E==="\r"||E==="	"}function N(E){return E==='"'||E==="'"}function P(E){return E===">"||T(E)}function R(E,m){return E.test(m)}function x(E,m){return!R(E,m)}var b=0;i.STATE={BEGIN:b++,BEGIN_WHITESPACE:b++,TEXT:b++,TEXT_ENTITY:b++,OPEN_WAKA:b++,SGML_DECL:b++,SGML_DECL_QUOTED:b++,DOCTYPE:b++,DOCTYPE_QUOTED:b++,DOCTYPE_DTD:b++,DOCTYPE_DTD_QUOTED:b++,COMMENT_STARTING:b++,COMMENT:b++,COMMENT_ENDING:b++,COMMENT_ENDED:b++,CDATA:b++,CDATA_ENDING:b++,CDATA_ENDING_2:b++,PROC_INST:b++,PROC_INST_BODY:b++,PROC_INST_ENDING:b++,OPEN_TAG:b++,OPEN_TAG_SLASH:b++,ATTRIB:b++,ATTRIB_NAME:b++,ATTRIB_NAME_SAW_WHITE:b++,ATTRIB_VALUE:b++,ATTRIB_VALUE_QUOTED:b++,ATTRIB_VALUE_CLOSED:b++,ATTRIB_VALUE_UNQUOTED:b++,ATTRIB_VALUE_ENTITY_Q:b++,ATTRIB_VALUE_ENTITY_U:b++,CLOSE_TAG:b++,CLOSE_TAG_SAW_WHITE:b++,SCRIPT:b++,SCRIPT_ENDING:b++},i.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},i.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(i.ENTITIES).forEach(function(E){var m=i.ENTITIES[E],I=typeof m=="number"?String.fromCharCode(m):m;i.ENTITIES[E]=I});for(var D in i.STATE)i.STATE[i.STATE[D]]=D;b=i.STATE;function B(E,m,I){E[m]&&E[m](I)}function k(E,m,I){E.textNode&&U(E),B(E,m,I)}function U(E){E.textNode=ce(E.opt,E.textNode),E.textNode&&B(E,"ontext",E.textNode),E.textNode=""}function ce(E,m){return E.trim&&(m=m.trim()),E.normalize&&(m=m.replace(/\s+/g," ")),m}function ie(E,m){return U(E),E.trackPosition&&(m+="\nLine: "+E.line+"\nColumn: "+E.column+"\nChar: "+E.c),m=new Error(m),E.error=m,B(E,"onerror",m),E}function X(E){return E.sawRoot&&!E.closedRoot&&W(E,"Unclosed root tag"),E.state!==b.BEGIN&&E.state!==b.BEGIN_WHITESPACE&&E.state!==b.TEXT&&ie(E,"Unexpected end"),U(E),E.c="",E.closed=!0,B(E,"onend"),t.call(E,E.strict,E.opt),E}function W(E,m){if(typeof E!="object"||!(E instanceof t))throw new Error("bad call to strictFail");E.strict&&ie(E,m)}function se(E){E.strict||(E.tagName=E.tagName[E.looseCase]());var m=E.tags[E.tags.length-1]||E,I=E.tag={name:E.tagName,attributes:{}};E.opt.xmlns&&(I.ns=m.ns),E.attribList.length=0,k(E,"onopentagstart",I)}function Ee(E,m){var I=E.indexOf(":"),O=I<0?["",E]:E.split(":"),re=O[0],Ne=O[1];return m&&E==="xmlns"&&(re="xmlns",Ne=""),{prefix:re,local:Ne}}function oe(E){if(E.strict||(E.attribName=E.attribName[E.looseCase]()),E.attribList.indexOf(E.attribName)!==-1||E.tag.attributes.hasOwnProperty(E.attribName)){E.attribName=E.attribValue="";return}if(E.opt.xmlns){var m=Ee(E.attribName,!0),I=m.prefix,O=m.local;if(I==="xmlns")if(O==="xml"&&E.attribValue!==h)W(E,"xml: prefix must be bound to "+h+"\nActual: "+E.attribValue);else if(O==="xmlns"&&E.attribValue!==d)W(E,"xmlns: prefix must be bound to "+d+"\nActual: "+E.attribValue);else{var re=E.tag,Ne=E.tags[E.tags.length-1]||E;re.ns===Ne.ns&&(re.ns=Object.create(Ne.ns)),re.ns[O]=E.attribValue}E.attribList.push([E.attribName,E.attribValue])}else E.tag.attributes[E.attribName]=E.attribValue,k(E,"onattribute",{name:E.attribName,value:E.attribValue});E.attribName=E.attribValue=""}function ar(E,m){if(E.opt.xmlns){var I=E.tag,O=Ee(E.tagName);I.prefix=O.prefix,I.local=O.local,I.uri=I.ns[O.prefix]||"",I.prefix&&!I.uri&&(W(E,"Unbound namespace prefix: "+JSON.stringify(E.tagName)),I.uri=O.prefix);var re=E.tags[E.tags.length-1]||E;I.ns&&re.ns!==I.ns&&Object.keys(I.ns).forEach(function(w0){k(E,"onopennamespace",{prefix:w0,uri:I.ns[w0]})});for(var Ne=0,Ie=E.attribList.length;Ne<Ie;Ne++){var ht=E.attribList[Ne],dt=ht[0],Zn=ht[1],Be=Ee(dt,!0),Ii=Be.prefix,RP=Be.local,y0=Ii===""?"":I.ns[Ii]||"",Mh={name:dt,value:Zn,prefix:Ii,local:RP,uri:y0};Ii&&Ii!=="xmlns"&&!y0&&(W(E,"Unbound namespace prefix: "+JSON.stringify(Ii)),Mh.uri=Ii),E.tag.attributes[dt]=Mh,k(E,"onattribute",Mh)}E.attribList.length=0}E.tag.isSelfClosing=!!m,E.sawRoot=!0,E.tags.push(E.tag),k(E,"onopentag",E.tag),m||(!E.noscript&&E.tagName.toLowerCase()==="script"?E.state=b.SCRIPT:E.state=b.TEXT,E.tag=null,E.tagName=""),E.attribName=E.attribValue="",E.attribList.length=0}function qh(E){if(!E.tagName){W(E,"Weird empty close tag."),E.textNode+="</>",E.state=b.TEXT;return}if(E.script){if(E.tagName!=="script"){E.script+="</"+E.tagName+">",E.tagName="",E.state=b.SCRIPT;return}k(E,"onscript",E.script),E.script=""}var m=E.tags.length,I=E.tagName;E.strict||(I=I[E.looseCase]());for(var O=I;m--;){var re=E.tags[m];if(re.name!==O)W(E,"Unexpected close tag");else break}if(m<0){W(E,"Unmatched closing tag: "+E.tagName),E.textNode+="</"+E.tagName+">",E.state=b.TEXT;return}E.tagName=I;for(var Ne=E.tags.length;Ne-- >m;){var Ie=E.tag=E.tags.pop();E.tagName=E.tag.name,k(E,"onclosetag",E.tagName);var ht={};for(var dt in Ie.ns)ht[dt]=Ie.ns[dt];var Zn=E.tags[E.tags.length-1]||E;E.opt.xmlns&&Ie.ns!==Zn.ns&&Object.keys(Ie.ns).forEach(function(Be){var Ii=Ie.ns[Be];k(E,"onclosenamespace",{prefix:Be,uri:Ii})})}m===0&&(E.closedRoot=!0),E.tagName=E.attribValue=E.attribName="",E.attribList.length=0,E.state=b.TEXT}function NP(E){var m=E.entity,I=m.toLowerCase(),O,re="";return E.ENTITIES[m]?E.ENTITIES[m]:E.ENTITIES[I]?E.ENTITIES[I]:(m=I,m.charAt(0)==="#"&&(m.charAt(1)==="x"?(m=m.slice(2),O=parseInt(m,16),re=O.toString(16)):(m=m.slice(1),O=parseInt(m,10),re=O.toString(10))),m=m.replace(/^0+/,""),isNaN(O)||re.toLowerCase()!==m?(W(E,"Invalid character entity"),"&"+E.entity+";"):String.fromCodePoint(O))}function m0(E,m){m==="<"?(E.state=b.OPEN_WAKA,E.startTagPosition=E.position):T(m)||(W(E,"Non-whitespace before first tag."),E.textNode=m,E.state=b.TEXT)}function g0(E,m){var I="";return m<E.length&&(I=E.charAt(m)),I}function IP(E){var m=this;if(this.error)throw this.error;if(m.closed)return ie(m,"Cannot write after close. Assign an onready handler.");if(E===null)return X(m);typeof E=="object"&&(E=E.toString());for(var I=0,O="";O=g0(E,I++),m.c=O,!!O;)switch(m.trackPosition&&(m.position++,O==="\n"?(m.line++,m.column=0):m.column++),m.state){case b.BEGIN:if(m.state=b.BEGIN_WHITESPACE,O==="\uFEFF")continue;m0(m,O);continue;case b.BEGIN_WHITESPACE:m0(m,O);continue;case b.TEXT:if(m.sawRoot&&!m.closedRoot){for(var re=I-1;O&&O!=="<"&&O!=="&";)O=g0(E,I++),O&&m.trackPosition&&(m.position++,O==="\n"?(m.line++,m.column=0):m.column++);m.textNode+=E.substring(re,I-1)}O==="<"&&!(m.sawRoot&&m.closedRoot&&!m.strict)?(m.state=b.OPEN_WAKA,m.startTagPosition=m.position):(!T(O)&&(!m.sawRoot||m.closedRoot)&&W(m,"Text data outside of root node."),O==="&"?m.state=b.TEXT_ENTITY:m.textNode+=O);continue;case b.SCRIPT:O==="<"?m.state=b.SCRIPT_ENDING:m.script+=O;continue;case b.SCRIPT_ENDING:O==="/"?m.state=b.CLOSE_TAG:(m.script+="<"+O,m.state=b.SCRIPT);continue;case b.OPEN_WAKA:if(O==="!")m.state=b.SGML_DECL,m.sgmlDecl="";else if(!T(O))if(R(g,O))m.state=b.OPEN_TAG,m.tagName=O;else if(O==="/")m.state=b.CLOSE_TAG,m.tagName="";else if(O==="?")m.state=b.PROC_INST,m.procInstName=m.procInstBody="";else{if(W(m,"Unencoded <"),m.startTagPosition+1<m.position){var Ne=m.position-m.startTagPosition;O=new Array(Ne).join(" ")+O}m.textNode+="<"+O,m.state=b.TEXT}continue;case b.SGML_DECL:if(m.sgmlDecl+O==="--"){m.state=b.COMMENT,m.comment="",m.sgmlDecl="";continue}m.doctype&&m.doctype!==!0&&m.sgmlDecl?(m.state=b.DOCTYPE_DTD,m.doctype+="<!"+m.sgmlDecl+O,m.sgmlDecl=""):(m.sgmlDecl+O).toUpperCase()===u?(k(m,"onopencdata"),m.state=b.CDATA,m.sgmlDecl="",m.cdata=""):(m.sgmlDecl+O).toUpperCase()===f?(m.state=b.DOCTYPE,(m.doctype||m.sawRoot)&&W(m,"Inappropriately located doctype declaration"),m.doctype="",m.sgmlDecl=""):O===">"?(k(m,"onsgmldeclaration",m.sgmlDecl),m.sgmlDecl="",m.state=b.TEXT):(N(O)&&(m.state=b.SGML_DECL_QUOTED),m.sgmlDecl+=O);continue;case b.SGML_DECL_QUOTED:O===m.q&&(m.state=b.SGML_DECL,m.q=""),m.sgmlDecl+=O;continue;case b.DOCTYPE:O===">"?(m.state=b.TEXT,k(m,"ondoctype",m.doctype),m.doctype=!0):(m.doctype+=O,O==="["?m.state=b.DOCTYPE_DTD:N(O)&&(m.state=b.DOCTYPE_QUOTED,m.q=O));continue;case b.DOCTYPE_QUOTED:m.doctype+=O,O===m.q&&(m.q="",m.state=b.DOCTYPE);continue;case b.DOCTYPE_DTD:O==="]"?(m.doctype+=O,m.state=b.DOCTYPE):O==="<"?(m.state=b.OPEN_WAKA,m.startTagPosition=m.position):N(O)?(m.doctype+=O,m.state=b.DOCTYPE_DTD_QUOTED,m.q=O):m.doctype+=O;continue;case b.DOCTYPE_DTD_QUOTED:m.doctype+=O,O===m.q&&(m.state=b.DOCTYPE_DTD,m.q="");continue;case b.COMMENT:O==="-"?m.state=b.COMMENT_ENDING:m.comment+=O;continue;case b.COMMENT_ENDING:O==="-"?(m.state=b.COMMENT_ENDED,m.comment=ce(m.opt,m.comment),m.comment&&k(m,"oncomment",m.comment),m.comment=""):(m.comment+="-"+O,m.state=b.COMMENT);continue;case b.COMMENT_ENDED:O!==">"?(W(m,"Malformed comment"),m.comment+="--"+O,m.state=b.COMMENT):m.doctype&&m.doctype!==!0?m.state=b.DOCTYPE_DTD:m.state=b.TEXT;continue;case b.CDATA:O==="]"?m.state=b.CDATA_ENDING:m.cdata+=O;continue;case b.CDATA_ENDING:O==="]"?m.state=b.CDATA_ENDING_2:(m.cdata+="]"+O,m.state=b.CDATA);continue;case b.CDATA_ENDING_2:O===">"?(m.cdata&&k(m,"oncdata",m.cdata),k(m,"onclosecdata"),m.cdata="",m.state=b.TEXT):O==="]"?m.cdata+="]":(m.cdata+="]]"+O,m.state=b.CDATA);continue;case b.PROC_INST:O==="?"?m.state=b.PROC_INST_ENDING:T(O)?m.state=b.PROC_INST_BODY:m.procInstName+=O;continue;case b.PROC_INST_BODY:if(!m.procInstBody&&T(O))continue;O==="?"?m.state=b.PROC_INST_ENDING:m.procInstBody+=O;continue;case b.PROC_INST_ENDING:O===">"?(k(m,"onprocessinginstruction",{name:m.procInstName,body:m.procInstBody}),m.procInstName=m.procInstBody="",m.state=b.TEXT):(m.procInstBody+="?"+O,m.state=b.PROC_INST_BODY);continue;case b.OPEN_TAG:R(w,O)?m.tagName+=O:(se(m),O===">"?ar(m):O==="/"?m.state=b.OPEN_TAG_SLASH:(T(O)||W(m,"Invalid character in tag name"),m.state=b.ATTRIB));continue;case b.OPEN_TAG_SLASH:O===">"?(ar(m,!0),qh(m)):(W(m,"Forward-slash in opening tag not followed by >"),m.state=b.ATTRIB);continue;case b.ATTRIB:if(T(O))continue;O===">"?ar(m):O==="/"?m.state=b.OPEN_TAG_SLASH:R(g,O)?(m.attribName=O,m.attribValue="",m.state=b.ATTRIB_NAME):W(m,"Invalid attribute name");continue;case b.ATTRIB_NAME:O==="="?m.state=b.ATTRIB_VALUE:O===">"?(W(m,"Attribute without value"),m.attribValue=m.attribName,oe(m),ar(m)):T(O)?m.state=b.ATTRIB_NAME_SAW_WHITE:R(w,O)?m.attribName+=O:W(m,"Invalid attribute name");continue;case b.ATTRIB_NAME_SAW_WHITE:if(O==="=")m.state=b.ATTRIB_VALUE;else{if(T(O))continue;W(m,"Attribute without value"),m.tag.attributes[m.attribName]="",m.attribValue="",k(m,"onattribute",{name:m.attribName,value:""}),m.attribName="",O===">"?ar(m):R(g,O)?(m.attribName=O,m.state=b.ATTRIB_NAME):(W(m,"Invalid attribute name"),m.state=b.ATTRIB)}continue;case b.ATTRIB_VALUE:if(T(O))continue;N(O)?(m.q=O,m.state=b.ATTRIB_VALUE_QUOTED):(m.opt.unquotedAttributeValues||ie(m,"Unquoted attribute value"),m.state=b.ATTRIB_VALUE_UNQUOTED,m.attribValue=O);continue;case b.ATTRIB_VALUE_QUOTED:if(O!==m.q){O==="&"?m.state=b.ATTRIB_VALUE_ENTITY_Q:m.attribValue+=O;continue}oe(m),m.q="",m.state=b.ATTRIB_VALUE_CLOSED;continue;case b.ATTRIB_VALUE_CLOSED:T(O)?m.state=b.ATTRIB:O===">"?ar(m):O==="/"?m.state=b.OPEN_TAG_SLASH:R(g,O)?(W(m,"No whitespace between attributes"),m.attribName=O,m.attribValue="",m.state=b.ATTRIB_NAME):W(m,"Invalid attribute name");continue;case b.ATTRIB_VALUE_UNQUOTED:if(!P(O)){O==="&"?m.state=b.ATTRIB_VALUE_ENTITY_U:m.attribValue+=O;continue}oe(m),O===">"?ar(m):m.state=b.ATTRIB;continue;case b.CLOSE_TAG:if(m.tagName)O===">"?qh(m):R(w,O)?m.tagName+=O:m.script?(m.script+="</"+m.tagName,m.tagName="",m.state=b.SCRIPT):(T(O)||W(m,"Invalid tagname in closing tag"),m.state=b.CLOSE_TAG_SAW_WHITE);else{if(T(O))continue;x(g,O)?m.script?(m.script+="</"+O,m.state=b.SCRIPT):W(m,"Invalid tagname in closing tag."):m.tagName=O}continue;case b.CLOSE_TAG_SAW_WHITE:if(T(O))continue;O===">"?qh(m):W(m,"Invalid characters in closing tag");continue;case b.TEXT_ENTITY:case b.ATTRIB_VALUE_ENTITY_Q:case b.ATTRIB_VALUE_ENTITY_U:var Ie,ht;switch(m.state){case b.TEXT_ENTITY:Ie=b.TEXT,ht="textNode";break;case b.ATTRIB_VALUE_ENTITY_Q:Ie=b.ATTRIB_VALUE_QUOTED,ht="attribValue";break;case b.ATTRIB_VALUE_ENTITY_U:Ie=b.ATTRIB_VALUE_UNQUOTED,ht="attribValue";break}if(O===";"){var dt=NP(m);m.opt.unparsedEntities&&!Object.values(i.XML_ENTITIES).includes(dt)?(m.entity="",m.state=Ie,m.write(dt)):(m[ht]+=dt,m.entity="",m.state=Ie)}else R(m.entity.length?v:S,O)?m.entity+=O:(W(m,"Invalid character in entity name"),m[ht]+="&"+m.entity+O,m.entity="",m.state=Ie);continue;default:throw new Error(m,"Unknown state: "+m.state)}return m.position>=m.bufferCheckPosition&&r(m),m}String.fromCodePoint||(function(){var E=String.fromCharCode,m=Math.floor,I=function(){var O=16384,re=[],Ne,Ie,ht=-1,dt=arguments.length;if(!dt)return"";for(var Zn="";++ht<dt;){var Be=Number(arguments[ht]);if(!isFinite(Be)||Be<0||Be>1114111||m(Be)!==Be)throw RangeError("Invalid code point: "+Be);Be<=65535?re.push(Be):(Be-=65536,Ne=(Be>>10)+55296,Ie=Be%1024+56320,re.push(Ne,Ie)),(ht+1===dt||re.length>O)&&(Zn+=E.apply(null,re),re.length=0)}return Zn};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:I,configurable:!0,writable:!0}):String.fromCodePoint=I})()})(typeof dc>"u"?dc.sax={}:dc)});var Rb=A(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.XElement=void 0;sa.parseXml=iF;var Zk=Nb(),pc=ea(),mc=class{constructor(e){if(this.name=e,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!e)throw(0,pc.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!tF(e))throw(0,pc.newError)("Invalid element name: ".concat(e),"ERR_XML_ELEMENT_INVALID_NAME")}attribute(e){let t=this.attributes===null?null:this.attributes[e];if(t==null)throw(0,pc.newError)('No attribute "'.concat(e,'"'),"ERR_XML_MISSED_ATTRIBUTE");return t}removeAttribute(e){this.attributes!==null&&delete this.attributes[e]}element(e,t=!1,r=null){let n=this.elementOrNull(e,t);if(n===null)throw(0,pc.newError)(r||'No element "'.concat(e,'"'),"ERR_XML_MISSED_ELEMENT");return n}elementOrNull(e,t=!1){if(this.elements===null)return null;for(let r of this.elements)if(Ib(r,e,t))return r;return null}getElements(e,t=!1){return this.elements===null?[]:this.elements.filter(r=>Ib(r,e,t))}elementValueOrEmpty(e,t=!1){let r=this.elementOrNull(e,t);return r===null?"":r.value}};sa.XElement=mc;var eF=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function tF(i){return eF.test(i)}function Ib(i,e,t){let r=i.name;return r===e||t===!0&&r.length===e.length&&r.toLowerCase()===e.toLowerCase()}function iF(i){let e=null,t=Zk.parser(!0,{}),r=[];return t.onopentag=n=>{let s=new mc(n.name);if(s.attributes=n.attributes,e===null)e=s;else{let o=r[r.length-1];o.elements==null&&(o.elements=[]),o.elements.push(s)}r.push(s)},t.onclosetag=()=>{r.pop()},t.ontext=n=>{r.length>0&&(r[r.length-1].value=n)},t.oncdata=n=>{let s=r[r.length-1];s.value=n,s.isCData=!0},t.onerror=n=>{throw n},t.write(i),e}});var Fe=A(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.CURRENT_APP_PACKAGE_FILE_NAME=H.CURRENT_APP_INSTALLER_FILE_NAME=H.XElement=H.parseXml=H.UUID=H.parseDn=H.retry=H.githubUrl=H.getS3LikeProviderBaseUrl=H.ProgressCallbackTransform=H.MemoLazy=H.safeStringifyJson=H.safeGetHeader=H.parseJson=H.HttpExecutor=H.HttpError=H.DigestTransform=H.createHttpError=H.configureRequestUrl=H.configureRequestOptionsFromUrl=H.configureRequestOptions=H.newError=H.CancellationToken=H.CancellationError=void 0;H.asArray=cF;var Db=ic();Object.defineProperty(H,"CancellationError",{enumerable:!0,get:function(){return Db.CancellationError}});Object.defineProperty(H,"CancellationToken",{enumerable:!0,get:function(){return Db.CancellationToken}});var rF=ea();Object.defineProperty(H,"newError",{enumerable:!0,get:function(){return rF.newError}});var pi=mb();Object.defineProperty(H,"configureRequestOptions",{enumerable:!0,get:function(){return pi.configureRequestOptions}});Object.defineProperty(H,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return pi.configureRequestOptionsFromUrl}});Object.defineProperty(H,"configureRequestUrl",{enumerable:!0,get:function(){return pi.configureRequestUrl}});Object.defineProperty(H,"createHttpError",{enumerable:!0,get:function(){return pi.createHttpError}});Object.defineProperty(H,"DigestTransform",{enumerable:!0,get:function(){return pi.DigestTransform}});Object.defineProperty(H,"HttpError",{enumerable:!0,get:function(){return pi.HttpError}});Object.defineProperty(H,"HttpExecutor",{enumerable:!0,get:function(){return pi.HttpExecutor}});Object.defineProperty(H,"parseJson",{enumerable:!0,get:function(){return pi.parseJson}});Object.defineProperty(H,"safeGetHeader",{enumerable:!0,get:function(){return pi.safeGetHeader}});Object.defineProperty(H,"safeStringifyJson",{enumerable:!0,get:function(){return pi.safeStringifyJson}});var nF=yb();Object.defineProperty(H,"MemoLazy",{enumerable:!0,get:function(){return nF.MemoLazy}});var sF=Ad();Object.defineProperty(H,"ProgressCallbackTransform",{enumerable:!0,get:function(){return sF.ProgressCallbackTransform}});var Pb=Ab();Object.defineProperty(H,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return Pb.getS3LikeProviderBaseUrl}});Object.defineProperty(H,"githubUrl",{enumerable:!0,get:function(){return Pb.githubUrl}});var oF=bb();Object.defineProperty(H,"retry",{enumerable:!0,get:function(){return oF.retry}});var aF=Sb();Object.defineProperty(H,"parseDn",{enumerable:!0,get:function(){return aF.parseDn}});var lF=Cb();Object.defineProperty(H,"UUID",{enumerable:!0,get:function(){return lF.UUID}});var Lb=Rb();Object.defineProperty(H,"parseXml",{enumerable:!0,get:function(){return Lb.parseXml}});Object.defineProperty(H,"XElement",{enumerable:!0,get:function(){return Lb.XElement}});H.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe";H.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function cF(i){return i==null?[]:Array.isArray(i)?i:[i]}});var As=A((YY,fn)=>{"use strict";function xb(i){return typeof i>"u"||i===null}function uF(i){return typeof i=="object"&&i!==null}function fF(i){return Array.isArray(i)?i:xb(i)?[]:[i]}function hF(i,e){var t,r,n,s;if(e)for(s=Object.keys(e),t=0,r=s.length;t<r;t+=1)n=s[t],i[n]=e[n];return i}function dF(i,e){var t="",r;for(r=0;r<e;r+=1)t+=i;return t}function pF(i){return i===0&&Number.NEGATIVE_INFINITY===1/i}fn.exports.isNothing=xb;fn.exports.isObject=uF;fn.exports.toArray=fF;fn.exports.repeat=dF;fn.exports.isNegativeZero=pF;fn.exports.extend=hF});var Es=A((KY,Fb)=>{"use strict";function kb(i,e){var t="",r=i.reason||"(unknown reason)";return i.mark?(i.mark.name&&(t+='in "'+i.mark.name+'" '),t+="("+(i.mark.line+1)+":"+(i.mark.column+1)+")",!e&&i.mark.snippet&&(t+="\n\n"+i.mark.snippet),r+" "+t):r}function oa(i,e){Error.call(this),this.name="YAMLException",this.reason=i,this.mark=e,this.message=kb(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}oa.prototype=Object.create(Error.prototype);oa.prototype.constructor=oa;oa.prototype.toString=function(e){return this.name+": "+kb(this,e)};Fb.exports=oa});var qb=A((QY,$b)=>{"use strict";var aa=As();function Td(i,e,t,r,n){var s="",o="",a=Math.floor(n/2)-1;return r-e>a&&(s=" ... ",e=r-a+s.length),t-r>a&&(o=" ...",t=r+a-o.length),{str:s+i.slice(e,t).replace(/\t/g,"\u2192")+o,pos:r-e+s.length}}function Cd(i,e){return aa.repeat(" ",e-i.length)+i}function mF(i,e){if(e=Object.create(e||null),!i.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,r=[0],n=[],s,o=-1;s=t.exec(i.buffer);)n.push(s.index),r.push(s.index+s[0].length),i.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a="",l,c,u=Math.min(i.line+e.linesAfter,n.length).toString().length,f=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=Td(i.buffer,r[o-l],n[o-l],i.position-(r[o]-r[o-l]),f),a=aa.repeat(" ",e.indent)+Cd((i.line-l+1).toString(),u)+" | "+c.str+"\n"+a;for(c=Td(i.buffer,r[o],n[o],i.position,f),a+=aa.repeat(" ",e.indent)+Cd((i.line+1).toString(),u)+" | "+c.str+"\n",a+=aa.repeat("-",e.indent+u+3+c.pos)+"^\n",l=1;l<=e.linesAfter&&!(o+l>=n.length);l++)c=Td(i.buffer,r[o+l],n[o+l],i.position-(r[o]-r[o+l]),f),a+=aa.repeat(" ",e.indent)+Cd((i.line+l+1).toString(),u)+" | "+c.str+"\n";return a.replace(/\n$/,"")}$b.exports=mF});var Ke=A((XY,Ub)=>{"use strict";var Mb=Es(),gF=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],yF=["scalar","sequence","mapping"];function wF(i){var e={};return i!==null&&Object.keys(i).forEach(function(t){i[t].forEach(function(r){e[String(r)]=t})}),e}function AF(i,e){if(e=e||{},Object.keys(e).forEach(function(t){if(gF.indexOf(t)===-1)throw new Mb('Unknown option "'+t+'" is met in definition of "'+i+'" YAML type.')}),this.options=e,this.tag=i,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=wF(e.styleAliases||null),yF.indexOf(this.kind)===-1)throw new Mb('Unknown kind "'+this.kind+'" is specified for "'+i+'" YAML type.')}Ub.exports=AF});var Rd=A((JY,jb)=>{"use strict";var la=Es(),Nd=Ke();function Bb(i,e){var t=[];return i[e].forEach(function(r){var n=t.length;t.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(n=o)}),t[n]=r}),t}function EF(){var i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function r(n){n.multi?(i.multi[n.kind].push(n),i.multi.fallback.push(n)):i[n.kind][n.tag]=i.fallback[n.tag]=n}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return i}function Id(i){return this.extend(i)}Id.prototype.extend=function(e){var t=[],r=[];if(e instanceof Nd)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new la("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof Nd))throw new la("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new la("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new la("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof Nd))throw new la("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(Id.prototype);return n.implicit=(this.implicit||[]).concat(t),n.explicit=(this.explicit||[]).concat(r),n.compiledImplicit=Bb(n,"implicit"),n.compiledExplicit=Bb(n,"explicit"),n.compiledTypeMap=EF(n.compiledImplicit,n.compiledExplicit),n};jb.exports=Id});var Dd=A((ZY,Hb)=>{"use strict";var bF=Ke();Hb.exports=new bF("tag:yaml.org,2002:str",{kind:"scalar",construct:function(i){return i!==null?i:""}})});var Pd=A((eK,Wb)=>{"use strict";var SF=Ke();Wb.exports=new SF("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(i){return i!==null?i:[]}})});var Ld=A((tK,Gb)=>{"use strict";var vF=Ke();Gb.exports=new vF("tag:yaml.org,2002:map",{kind:"mapping",construct:function(i){return i!==null?i:{}}})});var xd=A((iK,Vb)=>{"use strict";var _F=Rd();Vb.exports=new _F({explicit:[Dd(),Pd(),Ld()]})});var kd=A((rK,zb)=>{"use strict";var OF=Ke();function TF(i){if(i===null)return!0;var e=i.length;return e===1&&i==="~"||e===4&&(i==="null"||i==="Null"||i==="NULL")}function CF(){return null}function NF(i){return i===null}zb.exports=new OF("tag:yaml.org,2002:null",{kind:"scalar",resolve:TF,construct:CF,predicate:NF,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})});var Fd=A((nK,Yb)=>{"use strict";var IF=Ke();function RF(i){if(i===null)return!1;var e=i.length;return e===4&&(i==="true"||i==="True"||i==="TRUE")||e===5&&(i==="false"||i==="False"||i==="FALSE")}function DF(i){return i==="true"||i==="True"||i==="TRUE"}function PF(i){return Object.prototype.toString.call(i)==="[object Boolean]"}Yb.exports=new IF("tag:yaml.org,2002:bool",{kind:"scalar",resolve:RF,construct:DF,predicate:PF,represent:{lowercase:function(i){return i?"true":"false"},uppercase:function(i){return i?"TRUE":"FALSE"},camelcase:function(i){return i?"True":"False"}},defaultStyle:"lowercase"})});var $d=A((sK,Kb)=>{"use strict";var LF=As(),xF=Ke();function kF(i){return 48<=i&&i<=57||65<=i&&i<=70||97<=i&&i<=102}function FF(i){return 48<=i&&i<=55}function $F(i){return 48<=i&&i<=57}function qF(i){if(i===null)return!1;var e=i.length,t=0,r=!1,n;if(!e)return!1;if(n=i[t],(n==="-"||n==="+")&&(n=i[++t]),n==="0"){if(t+1===e)return!0;if(n=i[++t],n==="b"){for(t++;t<e;t++)if(n=i[t],n!=="_"){if(n!=="0"&&n!=="1")return!1;r=!0}return r&&n!=="_"}if(n==="x"){for(t++;t<e;t++)if(n=i[t],n!=="_"){if(!kF(i.charCodeAt(t)))return!1;r=!0}return r&&n!=="_"}if(n==="o"){for(t++;t<e;t++)if(n=i[t],n!=="_"){if(!FF(i.charCodeAt(t)))return!1;r=!0}return r&&n!=="_"}}if(n==="_")return!1;for(;t<e;t++)if(n=i[t],n!=="_"){if(!$F(i.charCodeAt(t)))return!1;r=!0}return!(!r||n==="_")}function MF(i){var e=i,t=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(t=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function UF(i){return Object.prototype.toString.call(i)==="[object Number]"&&i%1===0&&!LF.isNegativeZero(i)}Kb.exports=new xF("tag:yaml.org,2002:int",{kind:"scalar",resolve:qF,construct:MF,predicate:UF,represent:{binary:function(i){return i>=0?"0b"+i.toString(2):"-0b"+i.toString(2).slice(1)},octal:function(i){return i>=0?"0o"+i.toString(8):"-0o"+i.toString(8).slice(1)},decimal:function(i){return i.toString(10)},hexadecimal:function(i){return i>=0?"0x"+i.toString(16).toUpperCase():"-0x"+i.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var qd=A((oK,Xb)=>{"use strict";var Qb=As(),BF=Ke(),jF=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function HF(i){return!(i===null||!jF.test(i)||i[i.length-1]==="_")}function WF(i){var e,t;return e=i.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var GF=/^[-+]?[0-9]+e/;function VF(i,e){var t;if(isNaN(i))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Qb.isNegativeZero(i))return"-0.0";return t=i.toString(10),GF.test(t)?t.replace("e",".e"):t}function zF(i){return Object.prototype.toString.call(i)==="[object Number]"&&(i%1!==0||Qb.isNegativeZero(i))}Xb.exports=new BF("tag:yaml.org,2002:float",{kind:"scalar",resolve:HF,construct:WF,predicate:zF,represent:VF,defaultStyle:"lowercase"})});var Md=A((aK,Jb)=>{"use strict";Jb.exports=xd().extend({implicit:[kd(),Fd(),$d(),qd()]})});var Ud=A((lK,Zb)=>{"use strict";Zb.exports=Md()});var Bd=A((cK,iS)=>{"use strict";var YF=Ke(),eS=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),tS=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function KF(i){return i===null?!1:eS.exec(i)!==null||tS.exec(i)!==null}function QF(i){var e,t,r,n,s,o,a,l=0,c=null,u,f,h;if(e=eS.exec(i),e===null&&(e=tS.exec(i)),e===null)throw new Error("Date resolve error");if(t=+e[1],r=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(t,r,n));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],f=+(e[11]||0),c=(u*60+f)*6e4,e[9]==="-"&&(c=-c)),h=new Date(Date.UTC(t,r,n,s,o,a,l)),c&&h.setTime(h.getTime()-c),h}function XF(i){return i.toISOString()}iS.exports=new YF("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:KF,construct:QF,instanceOf:Date,represent:XF})});var jd=A((uK,rS)=>{"use strict";var JF=Ke();function ZF(i){return i==="<<"||i===null}rS.exports=new JF("tag:yaml.org,2002:merge",{kind:"scalar",resolve:ZF})});var Wd=A((fK,nS)=>{"use strict";var e$=Ke(),Hd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function t$(i){if(i===null)return!1;var e,t,r=0,n=i.length,s=Hd;for(t=0;t<n;t++)if(e=s.indexOf(i.charAt(t)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function i$(i){var e,t,r=i.replace(/[\r\n=]/g,""),n=r.length,s=Hd,o=0,a=[];for(e=0;e<n;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(r.charAt(e));return t=n%4*6,t===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):t===18?(a.push(o>>10&255),a.push(o>>2&255)):t===12&&a.push(o>>4&255),new Uint8Array(a)}function r$(i){var e="",t=0,r,n,s=i.length,o=Hd;for(r=0;r<s;r++)r%3===0&&r&&(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]),t=(t<<8)+i[r];return n=s%3,n===0?(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]):n===2?(e+=o[t>>10&63],e+=o[t>>4&63],e+=o[t<<2&63],e+=o[64]):n===1&&(e+=o[t>>2&63],e+=o[t<<4&63],e+=o[64],e+=o[64]),e}function n$(i){return Object.prototype.toString.call(i)==="[object Uint8Array]"}nS.exports=new e$("tag:yaml.org,2002:binary",{kind:"scalar",resolve:t$,construct:i$,predicate:n$,represent:r$})});var Gd=A((hK,sS)=>{"use strict";var s$=Ke(),o$=Object.prototype.hasOwnProperty,a$=Object.prototype.toString;function l$(i){if(i===null)return!0;var e=[],t,r,n,s,o,a=i;for(t=0,r=a.length;t<r;t+=1){if(n=a[t],o=!1,a$.call(n)!=="[object Object]")return!1;for(s in n)if(o$.call(n,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function c$(i){return i!==null?i:[]}sS.exports=new s$("tag:yaml.org,2002:omap",{kind:"sequence",resolve:l$,construct:c$})});var Vd=A((dK,oS)=>{"use strict";var u$=Ke(),f$=Object.prototype.toString;function h$(i){if(i===null)return!0;var e,t,r,n,s,o=i;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1){if(r=o[e],f$.call(r)!=="[object Object]"||(n=Object.keys(r),n.length!==1))return!1;s[e]=[n[0],r[n[0]]]}return!0}function d$(i){if(i===null)return[];var e,t,r,n,s,o=i;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1)r=o[e],n=Object.keys(r),s[e]=[n[0],r[n[0]]];return s}oS.exports=new u$("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:h$,construct:d$})});var zd=A((pK,aS)=>{"use strict";var p$=Ke(),m$=Object.prototype.hasOwnProperty;function g$(i){if(i===null)return!0;var e,t=i;for(e in t)if(m$.call(t,e)&&t[e]!==null)return!1;return!0}function y$(i){return i!==null?i:{}}aS.exports=new p$("tag:yaml.org,2002:set",{kind:"mapping",resolve:g$,construct:y$})});var gc=A((mK,lS)=>{"use strict";lS.exports=Ud().extend({implicit:[Bd(),jd()],explicit:[Wd(),Gd(),Vd(),zd()]})});var OS=A((gK,Xd)=>{"use strict";var dn=As(),mS=Es(),w$=qb(),A$=gc(),yr=Object.prototype.hasOwnProperty,yc=1,gS=2,yS=3,wc=4,Yd=1,E$=2,cS=3,b$=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,S$=/[\x85\u2028\u2029]/,v$=/[,\[\]\{\}]/,wS=/^(?:!|!!|![a-z\-]+!)$/i,AS=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function uS(i){return Object.prototype.toString.call(i)}function mi(i){return i===10||i===13}function pn(i){return i===9||i===32}function At(i){return i===9||i===32||i===10||i===13}function bs(i){return i===44||i===91||i===93||i===123||i===125}function _$(i){var e;return 48<=i&&i<=57?i-48:(e=i|32,97<=e&&e<=102?e-97+10:-1)}function O$(i){return i===120?2:i===117?4:i===85?8:0}function T$(i){return 48<=i&&i<=57?i-48:-1}function fS(i){return i===48?"\0":i===97?"\x07":i===98?"\b":i===116||i===9?"	":i===110?"\n":i===118?"\v":i===102?"\f":i===114?"\r":i===101?"\x1B":i===32?" ":i===34?'"':i===47?"/":i===92?"\\":i===78?"\x85":i===95?"\xA0":i===76?"\u2028":i===80?"\u2029":""}function C$(i){return i<=65535?String.fromCharCode(i):String.fromCharCode((i-65536>>10)+55296,(i-65536&1023)+56320)}function ES(i,e,t){e==="__proto__"?Object.defineProperty(i,e,{configurable:!0,enumerable:!0,writable:!0,value:t}):i[e]=t}var bS=new Array(256),SS=new Array(256);for(hn=0;hn<256;hn++)bS[hn]=fS(hn)?1:0,SS[hn]=fS(hn);var hn;function N$(i,e){this.input=i,this.filename=e.filename||null,this.schema=e.schema||A$,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=i.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function vS(i,e){var t={name:i.filename,buffer:i.input.slice(0,-1),position:i.position,line:i.line,column:i.position-i.lineStart};return t.snippet=w$(t),new mS(e,t)}function M(i,e){throw vS(i,e)}function Ac(i,e){i.onWarning&&i.onWarning.call(null,vS(i,e))}var hS={YAML:function(e,t,r){var n,s,o;e.version!==null&&M(e,"duplication of %YAML directive"),r.length!==1&&M(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),n===null&&M(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),o=parseInt(n[2],10),s!==1&&M(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&Ac(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,s;r.length!==2&&M(e,"TAG directive accepts exactly two arguments"),n=r[0],s=r[1],wS.test(n)||M(e,"ill-formed tag handle (first argument) of the TAG directive"),yr.call(e.tagMap,n)&&M(e,'there is a previously declared suffix for "'+n+'" tag handle'),AS.test(s)||M(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{M(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s}};function gr(i,e,t,r){var n,s,o,a;if(e<t){if(a=i.input.slice(e,t),r)for(n=0,s=a.length;n<s;n+=1)o=a.charCodeAt(n),o===9||32<=o&&o<=1114111||M(i,"expected valid JSON character");else b$.test(a)&&M(i,"the stream contains non-printable characters");i.result+=a}}function dS(i,e,t,r){var n,s,o,a;for(dn.isObject(t)||M(i,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(t),o=0,a=n.length;o<a;o+=1)s=n[o],yr.call(e,s)||(ES(e,s,t[s]),r[s]=!0)}function Ss(i,e,t,r,n,s,o,a,l){var c,u;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),c=0,u=n.length;c<u;c+=1)Array.isArray(n[c])&&M(i,"nested arrays are not supported inside keys"),typeof n=="object"&&uS(n[c])==="[object Object]"&&(n[c]="[object Object]");if(typeof n=="object"&&uS(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)dS(i,e,s[c],t);else dS(i,e,s,t);else!i.json&&!yr.call(t,n)&&yr.call(e,n)&&(i.line=o||i.line,i.lineStart=a||i.lineStart,i.position=l||i.position,M(i,"duplicated mapping key")),ES(e,n,s),delete t[n];return e}function Kd(i){var e;e=i.input.charCodeAt(i.position),e===10?i.position++:e===13?(i.position++,i.input.charCodeAt(i.position)===10&&i.position++):M(i,"a line break is expected"),i.line+=1,i.lineStart=i.position,i.firstTabInLine=-1}function Te(i,e,t){for(var r=0,n=i.input.charCodeAt(i.position);n!==0;){for(;pn(n);)n===9&&i.firstTabInLine===-1&&(i.firstTabInLine=i.position),n=i.input.charCodeAt(++i.position);if(e&&n===35)do n=i.input.charCodeAt(++i.position);while(n!==10&&n!==13&&n!==0);if(mi(n))for(Kd(i),n=i.input.charCodeAt(i.position),r++,i.lineIndent=0;n===32;)i.lineIndent++,n=i.input.charCodeAt(++i.position);else break}return t!==-1&&r!==0&&i.lineIndent<t&&Ac(i,"deficient indentation"),r}function Ec(i){var e=i.position,t;return t=i.input.charCodeAt(e),!!((t===45||t===46)&&t===i.input.charCodeAt(e+1)&&t===i.input.charCodeAt(e+2)&&(e+=3,t=i.input.charCodeAt(e),t===0||At(t)))}function Qd(i,e){e===1?i.result+=" ":e>1&&(i.result+=dn.repeat("\n",e-1))}function I$(i,e,t){var r,n,s,o,a,l,c,u,f=i.kind,h=i.result,d;if(d=i.input.charCodeAt(i.position),At(d)||bs(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(n=i.input.charCodeAt(i.position+1),At(n)||t&&bs(n)))return!1;for(i.kind="scalar",i.result="",s=o=i.position,a=!1;d!==0;){if(d===58){if(n=i.input.charCodeAt(i.position+1),At(n)||t&&bs(n))break}else if(d===35){if(r=i.input.charCodeAt(i.position-1),At(r))break}else{if(i.position===i.lineStart&&Ec(i)||t&&bs(d))break;if(mi(d))if(l=i.line,c=i.lineStart,u=i.lineIndent,Te(i,!1,-1),i.lineIndent>=e){a=!0,d=i.input.charCodeAt(i.position);continue}else{i.position=o,i.line=l,i.lineStart=c,i.lineIndent=u;break}}a&&(gr(i,s,o,!1),Qd(i,i.line-l),s=o=i.position,a=!1),pn(d)||(o=i.position+1),d=i.input.charCodeAt(++i.position)}return gr(i,s,o,!1),i.result?!0:(i.kind=f,i.result=h,!1)}function R$(i,e){var t,r,n;if(t=i.input.charCodeAt(i.position),t!==39)return!1;for(i.kind="scalar",i.result="",i.position++,r=n=i.position;(t=i.input.charCodeAt(i.position))!==0;)if(t===39)if(gr(i,r,i.position,!0),t=i.input.charCodeAt(++i.position),t===39)r=i.position,i.position++,n=i.position;else return!0;else mi(t)?(gr(i,r,n,!0),Qd(i,Te(i,!1,e)),r=n=i.position):i.position===i.lineStart&&Ec(i)?M(i,"unexpected end of the document within a single quoted scalar"):(i.position++,n=i.position);M(i,"unexpected end of the stream within a single quoted scalar")}function D$(i,e){var t,r,n,s,o,a;if(a=i.input.charCodeAt(i.position),a!==34)return!1;for(i.kind="scalar",i.result="",i.position++,t=r=i.position;(a=i.input.charCodeAt(i.position))!==0;){if(a===34)return gr(i,t,i.position,!0),i.position++,!0;if(a===92){if(gr(i,t,i.position,!0),a=i.input.charCodeAt(++i.position),mi(a))Te(i,!1,e);else if(a<256&&bS[a])i.result+=SS[a],i.position++;else if((o=O$(a))>0){for(n=o,s=0;n>0;n--)a=i.input.charCodeAt(++i.position),(o=_$(a))>=0?s=(s<<4)+o:M(i,"expected hexadecimal character");i.result+=C$(s),i.position++}else M(i,"unknown escape sequence");t=r=i.position}else mi(a)?(gr(i,t,r,!0),Qd(i,Te(i,!1,e)),t=r=i.position):i.position===i.lineStart&&Ec(i)?M(i,"unexpected end of the document within a double quoted scalar"):(i.position++,r=i.position)}M(i,"unexpected end of the stream within a double quoted scalar")}function P$(i,e){var t=!0,r,n,s,o=i.tag,a,l=i.anchor,c,u,f,h,d,y=Object.create(null),g,w,S,v;if(v=i.input.charCodeAt(i.position),v===91)u=93,d=!1,a=[];else if(v===123)u=125,d=!0,a={};else return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=a),v=i.input.charCodeAt(++i.position);v!==0;){if(Te(i,!0,e),v=i.input.charCodeAt(i.position),v===u)return i.position++,i.tag=o,i.anchor=l,i.kind=d?"mapping":"sequence",i.result=a,!0;t?v===44&&M(i,"expected the node content, but found ','"):M(i,"missed comma between flow collection entries"),w=g=S=null,f=h=!1,v===63&&(c=i.input.charCodeAt(i.position+1),At(c)&&(f=h=!0,i.position++,Te(i,!0,e))),r=i.line,n=i.lineStart,s=i.position,vs(i,e,yc,!1,!0),w=i.tag,g=i.result,Te(i,!0,e),v=i.input.charCodeAt(i.position),(h||i.line===r)&&v===58&&(f=!0,v=i.input.charCodeAt(++i.position),Te(i,!0,e),vs(i,e,yc,!1,!0),S=i.result),d?Ss(i,a,y,w,g,S,r,n,s):f?a.push(Ss(i,null,y,w,g,S,r,n,s)):a.push(g),Te(i,!0,e),v=i.input.charCodeAt(i.position),v===44?(t=!0,v=i.input.charCodeAt(++i.position)):t=!1}M(i,"unexpected end of the stream within a flow collection")}function L$(i,e){var t,r,n=Yd,s=!1,o=!1,a=e,l=0,c=!1,u,f;if(f=i.input.charCodeAt(i.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(i.kind="scalar",i.result="";f!==0;)if(f=i.input.charCodeAt(++i.position),f===43||f===45)Yd===n?n=f===43?cS:E$:M(i,"repeat of a chomping mode identifier");else if((u=T$(f))>=0)u===0?M(i,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?M(i,"repeat of an indentation width identifier"):(a=e+u-1,o=!0);else break;if(pn(f)){do f=i.input.charCodeAt(++i.position);while(pn(f));if(f===35)do f=i.input.charCodeAt(++i.position);while(!mi(f)&&f!==0)}for(;f!==0;){for(Kd(i),i.lineIndent=0,f=i.input.charCodeAt(i.position);(!o||i.lineIndent<a)&&f===32;)i.lineIndent++,f=i.input.charCodeAt(++i.position);if(!o&&i.lineIndent>a&&(a=i.lineIndent),mi(f)){l++;continue}if(i.lineIndent<a){n===cS?i.result+=dn.repeat("\n",s?1+l:l):n===Yd&&s&&(i.result+="\n");break}for(r?pn(f)?(c=!0,i.result+=dn.repeat("\n",s?1+l:l)):c?(c=!1,i.result+=dn.repeat("\n",l+1)):l===0?s&&(i.result+=" "):i.result+=dn.repeat("\n",l):i.result+=dn.repeat("\n",s?1+l:l),s=!0,o=!0,l=0,t=i.position;!mi(f)&&f!==0;)f=i.input.charCodeAt(++i.position);gr(i,t,i.position,!1)}return!0}function pS(i,e){var t,r=i.tag,n=i.anchor,s=[],o,a=!1,l;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=s),l=i.input.charCodeAt(i.position);l!==0&&(i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,M(i,"tab characters must not be used in indentation")),!(l!==45||(o=i.input.charCodeAt(i.position+1),!At(o))));){if(a=!0,i.position++,Te(i,!0,-1)&&i.lineIndent<=e){s.push(null),l=i.input.charCodeAt(i.position);continue}if(t=i.line,vs(i,e,yS,!1,!0),s.push(i.result),Te(i,!0,-1),l=i.input.charCodeAt(i.position),(i.line===t||i.lineIndent>e)&&l!==0)M(i,"bad indentation of a sequence entry");else if(i.lineIndent<e)break}return a?(i.tag=r,i.anchor=n,i.kind="sequence",i.result=s,!0):!1}function x$(i,e,t){var r,n,s,o,a,l,c=i.tag,u=i.anchor,f={},h=Object.create(null),d=null,y=null,g=null,w=!1,S=!1,v;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=f),v=i.input.charCodeAt(i.position);v!==0;){if(!w&&i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,M(i,"tab characters must not be used in indentation")),r=i.input.charCodeAt(i.position+1),s=i.line,(v===63||v===58)&&At(r))v===63?(w&&(Ss(i,f,h,d,y,null,o,a,l),d=y=g=null),S=!0,w=!0,n=!0):w?(w=!1,n=!0):M(i,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),i.position+=1,v=r;else{if(o=i.line,a=i.lineStart,l=i.position,!vs(i,t,gS,!1,!0))break;if(i.line===s){for(v=i.input.charCodeAt(i.position);pn(v);)v=i.input.charCodeAt(++i.position);if(v===58)v=i.input.charCodeAt(++i.position),At(v)||M(i,"a whitespace character is expected after the key-value separator within a block mapping"),w&&(Ss(i,f,h,d,y,null,o,a,l),d=y=g=null),S=!0,w=!1,n=!1,d=i.tag,y=i.result;else if(S)M(i,"can not read an implicit mapping pair; a colon is missed");else return i.tag=c,i.anchor=u,!0}else if(S)M(i,"can not read a block mapping entry; a multiline key may not be an implicit key");else return i.tag=c,i.anchor=u,!0}if((i.line===s||i.lineIndent>e)&&(w&&(o=i.line,a=i.lineStart,l=i.position),vs(i,e,wc,!0,n)&&(w?y=i.result:g=i.result),w||(Ss(i,f,h,d,y,g,o,a,l),d=y=g=null),Te(i,!0,-1),v=i.input.charCodeAt(i.position)),(i.line===s||i.lineIndent>e)&&v!==0)M(i,"bad indentation of a mapping entry");else if(i.lineIndent<e)break}return w&&Ss(i,f,h,d,y,null,o,a,l),S&&(i.tag=c,i.anchor=u,i.kind="mapping",i.result=f),S}function k$(i){var e,t=!1,r=!1,n,s,o;if(o=i.input.charCodeAt(i.position),o!==33)return!1;if(i.tag!==null&&M(i,"duplication of a tag property"),o=i.input.charCodeAt(++i.position),o===60?(t=!0,o=i.input.charCodeAt(++i.position)):o===33?(r=!0,n="!!",o=i.input.charCodeAt(++i.position)):n="!",e=i.position,t){do o=i.input.charCodeAt(++i.position);while(o!==0&&o!==62);i.position<i.length?(s=i.input.slice(e,i.position),o=i.input.charCodeAt(++i.position)):M(i,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!At(o);)o===33&&(r?M(i,"tag suffix cannot contain exclamation marks"):(n=i.input.slice(e-1,i.position+1),wS.test(n)||M(i,"named tag handle cannot contain such characters"),r=!0,e=i.position+1)),o=i.input.charCodeAt(++i.position);s=i.input.slice(e,i.position),v$.test(s)&&M(i,"tag suffix cannot contain flow indicator characters")}s&&!AS.test(s)&&M(i,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{M(i,"tag name is malformed: "+s)}return t?i.tag=s:yr.call(i.tagMap,n)?i.tag=i.tagMap[n]+s:n==="!"?i.tag="!"+s:n==="!!"?i.tag="tag:yaml.org,2002:"+s:M(i,'undeclared tag handle "'+n+'"'),!0}function F$(i){var e,t;if(t=i.input.charCodeAt(i.position),t!==38)return!1;for(i.anchor!==null&&M(i,"duplication of an anchor property"),t=i.input.charCodeAt(++i.position),e=i.position;t!==0&&!At(t)&&!bs(t);)t=i.input.charCodeAt(++i.position);return i.position===e&&M(i,"name of an anchor node must contain at least one character"),i.anchor=i.input.slice(e,i.position),!0}function $$(i){var e,t,r;if(r=i.input.charCodeAt(i.position),r!==42)return!1;for(r=i.input.charCodeAt(++i.position),e=i.position;r!==0&&!At(r)&&!bs(r);)r=i.input.charCodeAt(++i.position);return i.position===e&&M(i,"name of an alias node must contain at least one character"),t=i.input.slice(e,i.position),yr.call(i.anchorMap,t)||M(i,'unidentified alias "'+t+'"'),i.result=i.anchorMap[t],Te(i,!0,-1),!0}function vs(i,e,t,r,n){var s,o,a,l=1,c=!1,u=!1,f,h,d,y,g,w;if(i.listener!==null&&i.listener("open",i),i.tag=null,i.anchor=null,i.kind=null,i.result=null,s=o=a=wc===t||yS===t,r&&Te(i,!0,-1)&&(c=!0,i.lineIndent>e?l=1:i.lineIndent===e?l=0:i.lineIndent<e&&(l=-1)),l===1)for(;k$(i)||F$(i);)Te(i,!0,-1)?(c=!0,a=s,i.lineIndent>e?l=1:i.lineIndent===e?l=0:i.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||n),(l===1||wc===t)&&(yc===t||gS===t?g=e:g=e+1,w=i.position-i.lineStart,l===1?a&&(pS(i,w)||x$(i,w,g))||P$(i,g)?u=!0:(o&&L$(i,g)||R$(i,g)||D$(i,g)?u=!0:$$(i)?(u=!0,(i.tag!==null||i.anchor!==null)&&M(i,"alias node should not have any properties")):I$(i,g,yc===t)&&(u=!0,i.tag===null&&(i.tag="?")),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):l===0&&(u=a&&pS(i,w))),i.tag===null)i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);else if(i.tag==="?"){for(i.result!==null&&i.kind!=="scalar"&&M(i,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+i.kind+'"'),f=0,h=i.implicitTypes.length;f<h;f+=1)if(y=i.implicitTypes[f],y.resolve(i.result)){i.result=y.construct(i.result),i.tag=y.tag,i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);break}}else if(i.tag!=="!"){if(yr.call(i.typeMap[i.kind||"fallback"],i.tag))y=i.typeMap[i.kind||"fallback"][i.tag];else for(y=null,d=i.typeMap.multi[i.kind||"fallback"],f=0,h=d.length;f<h;f+=1)if(i.tag.slice(0,d[f].tag.length)===d[f].tag){y=d[f];break}y||M(i,"unknown tag !<"+i.tag+">"),i.result!==null&&y.kind!==i.kind&&M(i,"unacceptable node kind for !<"+i.tag+'> tag; it should be "'+y.kind+'", not "'+i.kind+'"'),y.resolve(i.result,i.tag)?(i.result=y.construct(i.result,i.tag),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):M(i,"cannot resolve a node with !<"+i.tag+"> explicit tag")}return i.listener!==null&&i.listener("close",i),i.tag!==null||i.anchor!==null||u}function q$(i){var e=i.position,t,r,n,s=!1,o;for(i.version=null,i.checkLineBreaks=i.legacy,i.tagMap=Object.create(null),i.anchorMap=Object.create(null);(o=i.input.charCodeAt(i.position))!==0&&(Te(i,!0,-1),o=i.input.charCodeAt(i.position),!(i.lineIndent>0||o!==37));){for(s=!0,o=i.input.charCodeAt(++i.position),t=i.position;o!==0&&!At(o);)o=i.input.charCodeAt(++i.position);for(r=i.input.slice(t,i.position),n=[],r.length<1&&M(i,"directive name must not be less than one character in length");o!==0;){for(;pn(o);)o=i.input.charCodeAt(++i.position);if(o===35){do o=i.input.charCodeAt(++i.position);while(o!==0&&!mi(o));break}if(mi(o))break;for(t=i.position;o!==0&&!At(o);)o=i.input.charCodeAt(++i.position);n.push(i.input.slice(t,i.position))}o!==0&&Kd(i),yr.call(hS,r)?hS[r](i,r,n):Ac(i,'unknown document directive "'+r+'"')}if(Te(i,!0,-1),i.lineIndent===0&&i.input.charCodeAt(i.position)===45&&i.input.charCodeAt(i.position+1)===45&&i.input.charCodeAt(i.position+2)===45?(i.position+=3,Te(i,!0,-1)):s&&M(i,"directives end mark is expected"),vs(i,i.lineIndent-1,wc,!1,!0),Te(i,!0,-1),i.checkLineBreaks&&S$.test(i.input.slice(e,i.position))&&Ac(i,"non-ASCII line breaks are interpreted as content"),i.documents.push(i.result),i.position===i.lineStart&&Ec(i)){i.input.charCodeAt(i.position)===46&&(i.position+=3,Te(i,!0,-1));return}if(i.position<i.length-1)M(i,"end of the stream or a document separator is expected");else return}function _S(i,e){i=String(i),e=e||{},i.length!==0&&(i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+="\n"),i.charCodeAt(0)===65279&&(i=i.slice(1)));var t=new N$(i,e),r=i.indexOf("\0");for(r!==-1&&(t.position=r,M(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)q$(t);return t.documents}function M$(i,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var r=_S(i,t);if(typeof e!="function")return r;for(var n=0,s=r.length;n<s;n+=1)e(r[n])}function U$(i,e){var t=_S(i,e);if(t.length!==0){if(t.length===1)return t[0];throw new mS("expected a single document in the stream, but found more")}}Xd.exports.loadAll=M$;Xd.exports.load=U$});var VS=A((yK,GS)=>{"use strict";var vc=As(),da=Es(),B$=gc(),xS=Object.prototype.toString,kS=Object.prototype.hasOwnProperty,ip=65279,j$=9,ua=10,H$=13,W$=32,G$=33,V$=34,Jd=35,z$=37,Y$=38,K$=39,Q$=42,FS=44,X$=45,bc=58,J$=61,Z$=62,eq=63,tq=64,$S=91,qS=93,iq=96,MS=123,rq=124,US=125,Qe={};Qe[0]="\\0";Qe[7]="\\a";Qe[8]="\\b";Qe[9]="\\t";Qe[10]="\\n";Qe[11]="\\v";Qe[12]="\\f";Qe[13]="\\r";Qe[27]="\\e";Qe[34]='\\"';Qe[92]="\\\\";Qe[133]="\\N";Qe[160]="\\_";Qe[8232]="\\L";Qe[8233]="\\P";var nq=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],sq=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function oq(i,e){var t,r,n,s,o,a,l;if(e===null)return{};for(t={},r=Object.keys(e),n=0,s=r.length;n<s;n+=1)o=r[n],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=i.compiledTypeMap.fallback[o],l&&kS.call(l.styleAliases,a)&&(a=l.styleAliases[a]),t[o]=a;return t}function aq(i){var e,t,r;if(e=i.toString(16).toUpperCase(),i<=255)t="x",r=2;else if(i<=65535)t="u",r=4;else if(i<=4294967295)t="U",r=8;else throw new da("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+vc.repeat("0",r-e.length)+e}var lq=1,fa=2;function cq(i){this.schema=i.schema||B$,this.indent=Math.max(1,i.indent||2),this.noArrayIndent=i.noArrayIndent||!1,this.skipInvalid=i.skipInvalid||!1,this.flowLevel=vc.isNothing(i.flowLevel)?-1:i.flowLevel,this.styleMap=oq(this.schema,i.styles||null),this.sortKeys=i.sortKeys||!1,this.lineWidth=i.lineWidth||80,this.noRefs=i.noRefs||!1,this.noCompatMode=i.noCompatMode||!1,this.condenseFlow=i.condenseFlow||!1,this.quotingType=i.quotingType==='"'?fa:lq,this.forceQuotes=i.forceQuotes||!1,this.replacer=typeof i.replacer=="function"?i.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function TS(i,e){for(var t=vc.repeat(" ",e),r=0,n=-1,s="",o,a=i.length;r<a;)n=i.indexOf("\n",r),n===-1?(o=i.slice(r),r=a):(o=i.slice(r,n+1),r=n+1),o.length&&o!=="\n"&&(s+=t),s+=o;return s}function Zd(i,e){return"\n"+vc.repeat(" ",i.indent*e)}function uq(i,e){var t,r,n;for(t=0,r=i.implicitTypes.length;t<r;t+=1)if(n=i.implicitTypes[t],n.resolve(e))return!0;return!1}function Sc(i){return i===W$||i===j$}function ha(i){return 32<=i&&i<=126||161<=i&&i<=55295&&i!==8232&&i!==8233||57344<=i&&i<=65533&&i!==ip||65536<=i&&i<=1114111}function CS(i){return ha(i)&&i!==ip&&i!==H$&&i!==ua}function NS(i,e,t){var r=CS(i),n=r&&!Sc(i);return(t?r:r&&i!==FS&&i!==$S&&i!==qS&&i!==MS&&i!==US)&&i!==Jd&&!(e===bc&&!n)||CS(e)&&!Sc(e)&&i===Jd||e===bc&&n}function fq(i){return ha(i)&&i!==ip&&!Sc(i)&&i!==X$&&i!==eq&&i!==bc&&i!==FS&&i!==$S&&i!==qS&&i!==MS&&i!==US&&i!==Jd&&i!==Y$&&i!==Q$&&i!==G$&&i!==rq&&i!==J$&&i!==Z$&&i!==K$&&i!==V$&&i!==z$&&i!==tq&&i!==iq}function hq(i){return!Sc(i)&&i!==bc}function ca(i,e){var t=i.charCodeAt(e),r;return t>=55296&&t<=56319&&e+1<i.length&&(r=i.charCodeAt(e+1),r>=56320&&r<=57343)?(t-55296)*1024+r-56320+65536:t}function BS(i){var e=/^\n* /;return e.test(i)}var jS=1,ep=2,HS=3,WS=4,_s=5;function dq(i,e,t,r,n,s,o,a){var l,c=0,u=null,f=!1,h=!1,d=r!==-1,y=-1,g=fq(ca(i,0))&&hq(ca(i,i.length-1));if(e||o)for(l=0;l<i.length;c>=65536?l+=2:l++){if(c=ca(i,l),!ha(c))return _s;g=g&&NS(c,u,a),u=c}else{for(l=0;l<i.length;c>=65536?l+=2:l++){if(c=ca(i,l),c===ua)f=!0,d&&(h=h||l-y-1>r&&i[y+1]!==" ",y=l);else if(!ha(c))return _s;g=g&&NS(c,u,a),u=c}h=h||d&&l-y-1>r&&i[y+1]!==" "}return!f&&!h?g&&!o&&!n(i)?jS:s===fa?_s:ep:t>9&&BS(i)?_s:o?s===fa?_s:ep:h?WS:HS}function pq(i,e,t,r,n){i.dump=(function(){if(e.length===0)return i.quotingType===fa?'""':"''";if(!i.noCompatMode&&(nq.indexOf(e)!==-1||sq.test(e)))return i.quotingType===fa?'"'+e+'"':"'"+e+"'";var s=i.indent*Math.max(1,t),o=i.lineWidth===-1?-1:Math.max(Math.min(i.lineWidth,40),i.lineWidth-s),a=r||i.flowLevel>-1&&t>=i.flowLevel;function l(c){return uq(i,c)}switch(dq(e,a,i.indent,o,l,i.quotingType,i.forceQuotes&&!r,n)){case jS:return e;case ep:return"'"+e.replace(/'/g,"''")+"'";case HS:return"|"+IS(e,i.indent)+RS(TS(e,s));case WS:return">"+IS(e,i.indent)+RS(TS(mq(e,o),s));case _s:return'"'+gq(e,o)+'"';default:throw new da("impossible error: invalid scalar style")}})()}function IS(i,e){var t=BS(i)?String(e):"",r=i[i.length-1]==="\n",n=r&&(i[i.length-2]==="\n"||i==="\n"),s=n?"+":r?"":"-";return t+s+"\n"}function RS(i){return i[i.length-1]==="\n"?i.slice(0,-1):i}function mq(i,e){for(var t=/(\n+)([^\n]*)/g,r=(function(){var c=i.indexOf("\n");return c=c!==-1?c:i.length,t.lastIndex=c,DS(i.slice(0,c),e)})(),n=i[0]==="\n"||i[0]===" ",s,o;o=t.exec(i);){var a=o[1],l=o[2];s=l[0]===" ",r+=a+(!n&&!s&&l!==""?"\n":"")+DS(l,e),n=s}return r}function DS(i,e){if(i===""||i[0]===" ")return i;for(var t=/ [^ ]/g,r,n=0,s,o=0,a=0,l="";r=t.exec(i);)a=r.index,a-n>e&&(s=o>n?o:a,l+="\n"+i.slice(n,s),n=s+1),o=a;return l+="\n",i.length-n>e&&o>n?l+=i.slice(n,o)+"\n"+i.slice(o+1):l+=i.slice(n),l.slice(1)}function gq(i){for(var e="",t=0,r,n=0;n<i.length;t>=65536?n+=2:n++)t=ca(i,n),r=Qe[t],!r&&ha(t)?(e+=i[n],t>=65536&&(e+=i[n+1])):e+=r||aq(t);return e}function yq(i,e,t){var r="",n=i.tag,s,o,a;for(s=0,o=t.length;s<o;s+=1)a=t[s],i.replacer&&(a=i.replacer.call(t,String(s),a)),(Li(i,e,a,!1,!1)||typeof a>"u"&&Li(i,e,null,!1,!1))&&(r!==""&&(r+=","+(i.condenseFlow?"":" ")),r+=i.dump);i.tag=n,i.dump="["+r+"]"}function PS(i,e,t,r){var n="",s=i.tag,o,a,l;for(o=0,a=t.length;o<a;o+=1)l=t[o],i.replacer&&(l=i.replacer.call(t,String(o),l)),(Li(i,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&Li(i,e+1,null,!0,!0,!1,!0))&&((!r||n!=="")&&(n+=Zd(i,e)),i.dump&&ua===i.dump.charCodeAt(0)?n+="-":n+="- ",n+=i.dump);i.tag=s,i.dump=n||"[]"}function wq(i,e,t){var r="",n=i.tag,s=Object.keys(t),o,a,l,c,u;for(o=0,a=s.length;o<a;o+=1)u="",r!==""&&(u+=", "),i.condenseFlow&&(u+='"'),l=s[o],c=t[l],i.replacer&&(c=i.replacer.call(t,l,c)),Li(i,e,l,!1,!1)&&(i.dump.length>1024&&(u+="? "),u+=i.dump+(i.condenseFlow?'"':"")+":"+(i.condenseFlow?"":" "),Li(i,e,c,!1,!1)&&(u+=i.dump,r+=u));i.tag=n,i.dump="{"+r+"}"}function Aq(i,e,t,r){var n="",s=i.tag,o=Object.keys(t),a,l,c,u,f,h;if(i.sortKeys===!0)o.sort();else if(typeof i.sortKeys=="function")o.sort(i.sortKeys);else if(i.sortKeys)throw new da("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)h="",(!r||n!=="")&&(h+=Zd(i,e)),c=o[a],u=t[c],i.replacer&&(u=i.replacer.call(t,c,u)),Li(i,e+1,c,!0,!0,!0)&&(f=i.tag!==null&&i.tag!=="?"||i.dump&&i.dump.length>1024,f&&(i.dump&&ua===i.dump.charCodeAt(0)?h+="?":h+="? "),h+=i.dump,f&&(h+=Zd(i,e)),Li(i,e+1,u,!0,f)&&(i.dump&&ua===i.dump.charCodeAt(0)?h+=":":h+=": ",h+=i.dump,n+=h));i.tag=s,i.dump=n||"{}"}function LS(i,e,t){var r,n,s,o,a,l;for(n=t?i.explicitTypes:i.implicitTypes,s=0,o=n.length;s<o;s+=1)if(a=n[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(t?a.multi&&a.representName?i.tag=a.representName(e):i.tag=a.tag:i.tag="?",a.represent){if(l=i.styleMap[a.tag]||a.defaultStyle,xS.call(a.represent)==="[object Function]")r=a.represent(e,l);else if(kS.call(a.represent,l))r=a.represent[l](e,l);else throw new da("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');i.dump=r}return!0}return!1}function Li(i,e,t,r,n,s,o){i.tag=null,i.dump=t,LS(i,t,!1)||LS(i,t,!0);var a=xS.call(i.dump),l=r,c;r&&(r=i.flowLevel<0||i.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",f,h;if(u&&(f=i.duplicates.indexOf(t),h=f!==-1),(i.tag!==null&&i.tag!=="?"||h||i.indent!==2&&e>0)&&(n=!1),h&&i.usedDuplicates[f])i.dump="*ref_"+f;else{if(u&&h&&!i.usedDuplicates[f]&&(i.usedDuplicates[f]=!0),a==="[object Object]")r&&Object.keys(i.dump).length!==0?(Aq(i,e,i.dump,n),h&&(i.dump="&ref_"+f+i.dump)):(wq(i,e,i.dump),h&&(i.dump="&ref_"+f+" "+i.dump));else if(a==="[object Array]")r&&i.dump.length!==0?(i.noArrayIndent&&!o&&e>0?PS(i,e-1,i.dump,n):PS(i,e,i.dump,n),h&&(i.dump="&ref_"+f+i.dump)):(yq(i,e,i.dump),h&&(i.dump="&ref_"+f+" "+i.dump));else if(a==="[object String]")i.tag!=="?"&&pq(i,i.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(i.skipInvalid)return!1;throw new da("unacceptable kind of an object to dump "+a)}i.tag!==null&&i.tag!=="?"&&(c=encodeURI(i.tag[0]==="!"?i.tag.slice(1):i.tag).replace(/!/g,"%21"),i.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",i.dump=c+" "+i.dump)}return!0}function Eq(i,e){var t=[],r=[],n,s;for(tp(i,t,r),n=0,s=r.length;n<s;n+=1)e.duplicates.push(t[r[n]]);e.usedDuplicates=new Array(s)}function tp(i,e,t){var r,n,s;if(i!==null&&typeof i=="object")if(n=e.indexOf(i),n!==-1)t.indexOf(n)===-1&&t.push(n);else if(e.push(i),Array.isArray(i))for(n=0,s=i.length;n<s;n+=1)tp(i[n],e,t);else for(r=Object.keys(i),n=0,s=r.length;n<s;n+=1)tp(i[r[n]],e,t)}function bq(i,e){e=e||{};var t=new cq(e);t.noRefs||Eq(i,t);var r=i;return t.replacer&&(r=t.replacer.call({"":r},"",r)),Li(t,0,r,!0,!0)?t.dump+"\n":""}GS.exports.dump=bq});var _c=A((wK,at)=>{"use strict";var zS=OS(),Sq=VS();function rp(i,e){return function(){throw new Error("Function yaml."+i+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}at.exports.Type=Ke();at.exports.Schema=Rd();at.exports.FAILSAFE_SCHEMA=xd();at.exports.JSON_SCHEMA=Md();at.exports.CORE_SCHEMA=Ud();at.exports.DEFAULT_SCHEMA=gc();at.exports.load=zS.load;at.exports.loadAll=zS.loadAll;at.exports.dump=Sq.dump;at.exports.YAMLException=Es();at.exports.types={binary:Wd(),float:qd(),map:Ld(),null:kd(),pairs:Vd(),set:zd(),timestamp:Bd(),bool:Fd(),int:$d(),merge:jd(),omap:Gd(),seq:Pd(),str:Dd()};at.exports.safeLoad=rp("safeLoad","load");at.exports.safeLoadAll=rp("safeLoadAll","loadAll");at.exports.safeDump=rp("safeDump","dump")});var YS=A(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.Lazy=void 0;var np=class{constructor(e){this._value=null,this.creator=e}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;let e=this.creator();return this.value=e,e}set value(e){this._value=e,this.creator=null}};Oc.Lazy=np});var pa=A((EK,KS)=>{"use strict";var vq="2.0.0",_q=Number.MAX_SAFE_INTEGER||9007199254740991,Oq=16,Tq=250,Cq=["major","premajor","minor","preminor","patch","prepatch","prerelease"];KS.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Oq,MAX_SAFE_BUILD_LENGTH:Tq,MAX_SAFE_INTEGER:_q,RELEASE_TYPES:Cq,SEMVER_SPEC_VERSION:vq,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ma=A((bK,QS)=>{"use strict";var Nq=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...i)=>console.error("SEMVER",...i):()=>{};QS.exports=Nq});var Os=A((gi,XS)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:sp,MAX_SAFE_BUILD_LENGTH:Iq,MAX_LENGTH:Rq}=pa(),Dq=ma();gi=XS.exports={};var Pq=gi.re=[],Lq=gi.safeRe=[],F=gi.src=[],xq=gi.safeSrc=[],$=gi.t={},kq=0,op="[a-zA-Z0-9-]",Fq=[["\\s",1],["\\d",Rq],[op,Iq]],$q=i=>{for(let[e,t]of Fq)i=i.split("".concat(e,"*")).join("".concat(e,"{0,").concat(t,"}")).split("".concat(e,"+")).join("".concat(e,"{1,").concat(t,"}"));return i},Y=(i,e,t)=>{let r=$q(e),n=kq++;Dq(i,n,e),$[i]=n,F[n]=e,xq[n]=r,Pq[n]=new RegExp(e,t?"g":void 0),Lq[n]=new RegExp(r,t?"g":void 0)};Y("NUMERICIDENTIFIER","0|[1-9]\\d*");Y("NUMERICIDENTIFIERLOOSE","\\d+");Y("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(op,"*"));Y("MAINVERSION","(".concat(F[$.NUMERICIDENTIFIER],")\\.")+"(".concat(F[$.NUMERICIDENTIFIER],")\\.")+"(".concat(F[$.NUMERICIDENTIFIER],")"));Y("MAINVERSIONLOOSE","(".concat(F[$.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(F[$.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(F[$.NUMERICIDENTIFIERLOOSE],")"));Y("PRERELEASEIDENTIFIER","(?:".concat(F[$.NONNUMERICIDENTIFIER],"|").concat(F[$.NUMERICIDENTIFIER],")"));Y("PRERELEASEIDENTIFIERLOOSE","(?:".concat(F[$.NONNUMERICIDENTIFIER],"|").concat(F[$.NUMERICIDENTIFIERLOOSE],")"));Y("PRERELEASE","(?:-(".concat(F[$.PRERELEASEIDENTIFIER],"(?:\\.").concat(F[$.PRERELEASEIDENTIFIER],")*))"));Y("PRERELEASELOOSE","(?:-?(".concat(F[$.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(F[$.PRERELEASEIDENTIFIERLOOSE],")*))"));Y("BUILDIDENTIFIER","".concat(op,"+"));Y("BUILD","(?:\\+(".concat(F[$.BUILDIDENTIFIER],"(?:\\.").concat(F[$.BUILDIDENTIFIER],")*))"));Y("FULLPLAIN","v?".concat(F[$.MAINVERSION]).concat(F[$.PRERELEASE],"?").concat(F[$.BUILD],"?"));Y("FULL","^".concat(F[$.FULLPLAIN],"$"));Y("LOOSEPLAIN","[v=\\s]*".concat(F[$.MAINVERSIONLOOSE]).concat(F[$.PRERELEASELOOSE],"?").concat(F[$.BUILD],"?"));Y("LOOSE","^".concat(F[$.LOOSEPLAIN],"$"));Y("GTLT","((?:<|>)?=?)");Y("XRANGEIDENTIFIERLOOSE","".concat(F[$.NUMERICIDENTIFIERLOOSE],"|x|X|\\*"));Y("XRANGEIDENTIFIER","".concat(F[$.NUMERICIDENTIFIER],"|x|X|\\*"));Y("XRANGEPLAIN","[v=\\s]*(".concat(F[$.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(F[$.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(F[$.XRANGEIDENTIFIER],")")+"(?:".concat(F[$.PRERELEASE],")?").concat(F[$.BUILD],"?")+")?)?");Y("XRANGEPLAINLOOSE","[v=\\s]*(".concat(F[$.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(F[$.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(F[$.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(F[$.PRERELEASELOOSE],")?").concat(F[$.BUILD],"?")+")?)?");Y("XRANGE","^".concat(F[$.GTLT],"\\s*").concat(F[$.XRANGEPLAIN],"$"));Y("XRANGELOOSE","^".concat(F[$.GTLT],"\\s*").concat(F[$.XRANGEPLAINLOOSE],"$"));Y("COERCEPLAIN","(^|[^\\d])(\\d{1,".concat(sp,"})")+"(?:\\.(\\d{1,".concat(sp,"}))?")+"(?:\\.(\\d{1,".concat(sp,"}))?"));Y("COERCE","".concat(F[$.COERCEPLAIN],"(?:$|[^\\d])"));Y("COERCEFULL",F[$.COERCEPLAIN]+"(?:".concat(F[$.PRERELEASE],")?")+"(?:".concat(F[$.BUILD],")?")+"(?:$|[^\\d])");Y("COERCERTL",F[$.COERCE],!0);Y("COERCERTLFULL",F[$.COERCEFULL],!0);Y("LONETILDE","(?:~>?)");Y("TILDETRIM","(\\s*)".concat(F[$.LONETILDE],"\\s+"),!0);gi.tildeTrimReplace="$1~";Y("TILDE","^".concat(F[$.LONETILDE]).concat(F[$.XRANGEPLAIN],"$"));Y("TILDELOOSE","^".concat(F[$.LONETILDE]).concat(F[$.XRANGEPLAINLOOSE],"$"));Y("LONECARET","(?:\\^)");Y("CARETTRIM","(\\s*)".concat(F[$.LONECARET],"\\s+"),!0);gi.caretTrimReplace="$1^";Y("CARET","^".concat(F[$.LONECARET]).concat(F[$.XRANGEPLAIN],"$"));Y("CARETLOOSE","^".concat(F[$.LONECARET]).concat(F[$.XRANGEPLAINLOOSE],"$"));Y("COMPARATORLOOSE","^".concat(F[$.GTLT],"\\s*(").concat(F[$.LOOSEPLAIN],")$|^$"));Y("COMPARATOR","^".concat(F[$.GTLT],"\\s*(").concat(F[$.FULLPLAIN],")$|^$"));Y("COMPARATORTRIM","(\\s*)".concat(F[$.GTLT],"\\s*(").concat(F[$.LOOSEPLAIN],"|").concat(F[$.XRANGEPLAIN],")"),!0);gi.comparatorTrimReplace="$1$2$3";Y("HYPHENRANGE","^\\s*(".concat(F[$.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(F[$.XRANGEPLAIN],")")+"\\s*$");Y("HYPHENRANGELOOSE","^\\s*(".concat(F[$.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(F[$.XRANGEPLAINLOOSE],")")+"\\s*$");Y("STAR","(<|>)?=?\\s*\\*");Y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Tc=A((SK,JS)=>{"use strict";var qq=Object.freeze({loose:!0}),Mq=Object.freeze({}),Uq=i=>i?typeof i!="object"?qq:i:Mq;JS.exports=Uq});var ap=A((vK,tv)=>{"use strict";var ZS=/^[0-9]+$/,ev=(i,e)=>{let t=ZS.test(i),r=ZS.test(e);return t&&r&&(i=+i,e=+e),i===e?0:t&&!r?-1:r&&!t?1:i<e?-1:1},Bq=(i,e)=>ev(e,i);tv.exports={compareIdentifiers:ev,rcompareIdentifiers:Bq}});var Xe=A((_K,rv)=>{"use strict";var Cc=ma(),{MAX_LENGTH:iv,MAX_SAFE_INTEGER:Nc}=pa(),{safeRe:Ic,t:Rc}=Os(),jq=Tc(),{compareIdentifiers:Ts}=ap(),lp=class i{constructor(e,t){if(t=jq(t),e instanceof i){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError('Invalid version. Must be a string. Got type "'.concat(typeof e,'".'));if(e.length>iv)throw new TypeError("version is longer than ".concat(iv," characters"));Cc("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Ic[Rc.LOOSE]:Ic[Rc.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Nc||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Nc||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Nc||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let s=+n;if(s>=0&&s<Nc)return s}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(e){if(Cc("SemVer.compare",this.version,this.options,e),!(e instanceof i)){if(typeof e=="string"&&e===this.version)return 0;e=new i(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof i||(e=new i(e,this.options)),Ts(this.major,e.major)||Ts(this.minor,e.minor)||Ts(this.patch,e.patch)}comparePre(e){if(e instanceof i||(e=new i(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],n=e.prerelease[t];if(Cc("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Ts(r,n)}while(++t)}compareBuild(e){e instanceof i||(e=new i(e,this.options));let t=0;do{let r=this.build[t],n=e.build[t];if(Cc("build compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Ts(r,n)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let n="-".concat(t).match(this.options.loose?Ic[Rc.PRERELEASELOOSE]:Ic[Rc.PRERELEASE]);if(!n||n[1]!==t)throw new Error("invalid identifier: ".concat(t))}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(this.prerelease.length===0)throw new Error("version ".concat(this.raw," is not a prerelease"));this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(t){let s=[t,n];r===!1&&(s=[t]),Ts(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error("invalid increment argument: ".concat(e))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}};rv.exports=lp});var mn=A((OK,sv)=>{"use strict";var nv=Xe(),Hq=(i,e,t=!1)=>{if(i instanceof nv)return i;try{return new nv(i,e)}catch(r){if(!t)return null;throw r}};sv.exports=Hq});var av=A((TK,ov)=>{"use strict";var Wq=mn(),Gq=(i,e)=>{let t=Wq(i,e);return t?t.version:null};ov.exports=Gq});var cv=A((CK,lv)=>{"use strict";var Vq=mn(),zq=(i,e)=>{let t=Vq(i.trim().replace(/^[=v]+/,""),e);return t?t.version:null};lv.exports=zq});var hv=A((NK,fv)=>{"use strict";var uv=Xe(),Yq=(i,e,t,r,n)=>{typeof t=="string"&&(n=r,r=t,t=void 0);try{return new uv(i instanceof uv?i.version:i,t).inc(e,r,n).version}catch{return null}};fv.exports=Yq});var mv=A((IK,pv)=>{"use strict";var dv=mn(),Kq=(i,e)=>{let t=dv(i,null,!0),r=dv(e,null,!0),n=t.compare(r);if(n===0)return null;let s=n>0,o=s?t:r,a=s?r:t,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let u=l?"pre":"";return t.major!==r.major?u+"major":t.minor!==r.minor?u+"minor":t.patch!==r.patch?u+"patch":"prerelease"};pv.exports=Kq});var yv=A((RK,gv)=>{"use strict";var Qq=Xe(),Xq=(i,e)=>new Qq(i,e).major;gv.exports=Xq});var Av=A((DK,wv)=>{"use strict";var Jq=Xe(),Zq=(i,e)=>new Jq(i,e).minor;wv.exports=Zq});var bv=A((PK,Ev)=>{"use strict";var eM=Xe(),tM=(i,e)=>new eM(i,e).patch;Ev.exports=tM});var vv=A((LK,Sv)=>{"use strict";var iM=mn(),rM=(i,e)=>{let t=iM(i,e);return t&&t.prerelease.length?t.prerelease:null};Sv.exports=rM});var Vt=A((xK,Ov)=>{"use strict";var _v=Xe(),nM=(i,e,t)=>new _v(i,t).compare(new _v(e,t));Ov.exports=nM});var Cv=A((kK,Tv)=>{"use strict";var sM=Vt(),oM=(i,e,t)=>sM(e,i,t);Tv.exports=oM});var Iv=A((FK,Nv)=>{"use strict";var aM=Vt(),lM=(i,e)=>aM(i,e,!0);Nv.exports=lM});var Dc=A(($K,Dv)=>{"use strict";var Rv=Xe(),cM=(i,e,t)=>{let r=new Rv(i,t),n=new Rv(e,t);return r.compare(n)||r.compareBuild(n)};Dv.exports=cM});var Lv=A((qK,Pv)=>{"use strict";var uM=Dc(),fM=(i,e)=>i.sort((t,r)=>uM(t,r,e));Pv.exports=fM});var kv=A((MK,xv)=>{"use strict";var hM=Dc(),dM=(i,e)=>i.sort((t,r)=>hM(r,t,e));xv.exports=dM});var ga=A((UK,Fv)=>{"use strict";var pM=Vt(),mM=(i,e,t)=>pM(i,e,t)>0;Fv.exports=mM});var Pc=A((BK,$v)=>{"use strict";var gM=Vt(),yM=(i,e,t)=>gM(i,e,t)<0;$v.exports=yM});var cp=A((jK,qv)=>{"use strict";var wM=Vt(),AM=(i,e,t)=>wM(i,e,t)===0;qv.exports=AM});var up=A((HK,Mv)=>{"use strict";var EM=Vt(),bM=(i,e,t)=>EM(i,e,t)!==0;Mv.exports=bM});var Lc=A((WK,Uv)=>{"use strict";var SM=Vt(),vM=(i,e,t)=>SM(i,e,t)>=0;Uv.exports=vM});var xc=A((GK,Bv)=>{"use strict";var _M=Vt(),OM=(i,e,t)=>_M(i,e,t)<=0;Bv.exports=OM});var fp=A((VK,jv)=>{"use strict";var TM=cp(),CM=up(),NM=ga(),IM=Lc(),RM=Pc(),DM=xc(),PM=(i,e,t,r)=>{switch(e){case"===":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i===t;case"!==":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i!==t;case"":case"=":case"==":return TM(i,t,r);case"!=":return CM(i,t,r);case">":return NM(i,t,r);case">=":return IM(i,t,r);case"<":return RM(i,t,r);case"<=":return DM(i,t,r);default:throw new TypeError("Invalid operator: ".concat(e))}};jv.exports=PM});var Wv=A((zK,Hv)=>{"use strict";var LM=Xe(),xM=mn(),{safeRe:kc,t:Fc}=Os(),kM=(i,e)=>{if(i instanceof LM)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;e=e||{};let t=null;if(!e.rtl)t=i.match(e.includePrerelease?kc[Fc.COERCEFULL]:kc[Fc.COERCE]);else{let l=e.includePrerelease?kc[Fc.COERCERTLFULL]:kc[Fc.COERCERTL],c;for(;(c=l.exec(i))&&(!t||t.index+t[0].length!==i.length);)(!t||c.index+c[0].length!==t.index+t[0].length)&&(t=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(t===null)return null;let r=t[2],n=t[3]||"0",s=t[4]||"0",o=e.includePrerelease&&t[5]?"-".concat(t[5]):"",a=e.includePrerelease&&t[6]?"+".concat(t[6]):"";return xM("".concat(r,".").concat(n,".").concat(s).concat(o).concat(a),e)};Hv.exports=kM});var Vv=A((YK,Gv)=>{"use strict";var hp=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let n=this.map.keys().next().value;this.delete(n)}this.map.set(e,t)}return this}};Gv.exports=hp});var zt=A((KK,Qv)=>{"use strict";var FM=/\s+/g,dp=class i{constructor(e,t){if(t=qM(t),e instanceof i)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new i(e.raw,t);if(e instanceof pp)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(FM," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(n=>!Yv(n[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&GM(n[0])){this.set=[n];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let r=0;r<t.length;r++)r>0&&(this.formatted+=" "),this.formatted+=t[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&HM)|(this.options.loose&&WM))+":"+e,n=zv.get(r);if(n)return n;let s=this.options.loose,o=s?Et[lt.HYPHENRANGELOOSE]:Et[lt.HYPHENRANGE];e=e.replace(o,tU(this.options.includePrerelease)),de("hyphen replace",e),e=e.replace(Et[lt.COMPARATORTRIM],UM),de("comparator trim",e),e=e.replace(Et[lt.TILDETRIM],BM),de("tilde trim",e),e=e.replace(Et[lt.CARETTRIM],jM),de("caret trim",e);let a=e.split(" ").map(f=>VM(f,this.options)).join(" ").split(/\s+/).map(f=>eU(f,this.options));s&&(a=a.filter(f=>(de("loose invalid filter",f,this.options),!!f.match(Et[lt.COMPARATORLOOSE])))),de("range list",a);let l=new Map,c=a.map(f=>new pp(f,this.options));for(let f of c){if(Yv(f))return[f];l.set(f.value,f)}l.size>1&&l.has("")&&l.delete("");let u=[...l.values()];return zv.set(r,u),u}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Range is required");return this.set.some(r=>Kv(r,t)&&e.set.some(n=>Kv(n,t)&&r.every(s=>n.every(o=>s.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new MM(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(iU(this.set[t],e,this.options))return!0;return!1}};Qv.exports=dp;var $M=Vv(),zv=new $M,qM=Tc(),pp=ya(),de=ma(),MM=Xe(),{safeRe:Et,t:lt,comparatorTrimReplace:UM,tildeTrimReplace:BM,caretTrimReplace:jM}=Os(),{FLAG_INCLUDE_PRERELEASE:HM,FLAG_LOOSE:WM}=pa(),Yv=i=>i.value==="<0.0.0-0",GM=i=>i.value==="",Kv=(i,e)=>{let t=!0,r=i.slice(),n=r.pop();for(;t&&r.length;)t=r.every(s=>n.intersects(s,e)),n=r.pop();return t},VM=(i,e)=>(de("comp",i,e),i=KM(i,e),de("caret",i),i=zM(i,e),de("tildes",i),i=XM(i,e),de("xrange",i),i=ZM(i,e),de("stars",i),i),ct=i=>!i||i.toLowerCase()==="x"||i==="*",zM=(i,e)=>i.trim().split(/\s+/).map(t=>YM(t,e)).join(" "),YM=(i,e)=>{let t=e.loose?Et[lt.TILDELOOSE]:Et[lt.TILDE];return i.replace(t,(r,n,s,o,a)=>{de("tilde",i,r,n,s,o,a);let l;return ct(n)?l="":ct(s)?l=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):ct(o)?l=">=".concat(n,".").concat(s,".0 <").concat(n,".").concat(+s+1,".0-0"):a?(de("replaceTilde pr",a),l=">=".concat(n,".").concat(s,".").concat(o,"-").concat(a," <").concat(n,".").concat(+s+1,".0-0")):l=">=".concat(n,".").concat(s,".").concat(o," <").concat(n,".").concat(+s+1,".0-0"),de("tilde return",l),l})},KM=(i,e)=>i.trim().split(/\s+/).map(t=>QM(t,e)).join(" "),QM=(i,e)=>{de("caret",i,e);let t=e.loose?Et[lt.CARETLOOSE]:Et[lt.CARET],r=e.includePrerelease?"-0":"";return i.replace(t,(n,s,o,a,l)=>{de("caret",i,n,s,o,a,l);let c;return ct(s)?c="":ct(o)?c=">=".concat(s,".0.0").concat(r," <").concat(+s+1,".0.0-0"):ct(a)?s==="0"?c=">=".concat(s,".").concat(o,".0").concat(r," <").concat(s,".").concat(+o+1,".0-0"):c=">=".concat(s,".").concat(o,".0").concat(r," <").concat(+s+1,".0.0-0"):l?(de("replaceCaret pr",l),s==="0"?o==="0"?c=">=".concat(s,".").concat(o,".").concat(a,"-").concat(l," <").concat(s,".").concat(o,".").concat(+a+1,"-0"):c=">=".concat(s,".").concat(o,".").concat(a,"-").concat(l," <").concat(s,".").concat(+o+1,".0-0"):c=">=".concat(s,".").concat(o,".").concat(a,"-").concat(l," <").concat(+s+1,".0.0-0")):(de("no pr"),s==="0"?o==="0"?c=">=".concat(s,".").concat(o,".").concat(a).concat(r," <").concat(s,".").concat(o,".").concat(+a+1,"-0"):c=">=".concat(s,".").concat(o,".").concat(a).concat(r," <").concat(s,".").concat(+o+1,".0-0"):c=">=".concat(s,".").concat(o,".").concat(a," <").concat(+s+1,".0.0-0")),de("caret return",c),c})},XM=(i,e)=>(de("replaceXRanges",i,e),i.split(/\s+/).map(t=>JM(t,e)).join(" ")),JM=(i,e)=>{i=i.trim();let t=e.loose?Et[lt.XRANGELOOSE]:Et[lt.XRANGE];return i.replace(t,(r,n,s,o,a,l)=>{de("xRange",i,r,n,s,o,a,l);let c=ct(s),u=c||ct(o),f=u||ct(a),h=f;return n==="="&&h&&(n=""),l=e.includePrerelease?"-0":"",c?n===">"||n==="<"?r="<0.0.0-0":r="*":n&&h?(u&&(o=0),a=0,n===">"?(n=">=",u?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):n==="<="&&(n="<",u?s=+s+1:o=+o+1),n==="<"&&(l="-0"),r="".concat(n+s,".").concat(o,".").concat(a).concat(l)):u?r=">=".concat(s,".0.0").concat(l," <").concat(+s+1,".0.0-0"):f&&(r=">=".concat(s,".").concat(o,".0").concat(l," <").concat(s,".").concat(+o+1,".0-0")),de("xRange return",r),r})},ZM=(i,e)=>(de("replaceStars",i,e),i.trim().replace(Et[lt.STAR],"")),eU=(i,e)=>(de("replaceGTE0",i,e),i.trim().replace(Et[e.includePrerelease?lt.GTE0PRE:lt.GTE0],"")),tU=i=>(e,t,r,n,s,o,a,l,c,u,f,h)=>(ct(r)?t="":ct(n)?t=">=".concat(r,".0.0").concat(i?"-0":""):ct(s)?t=">=".concat(r,".").concat(n,".0").concat(i?"-0":""):o?t=">=".concat(t):t=">=".concat(t).concat(i?"-0":""),ct(c)?l="":ct(u)?l="<".concat(+c+1,".0.0-0"):ct(f)?l="<".concat(c,".").concat(+u+1,".0-0"):h?l="<=".concat(c,".").concat(u,".").concat(f,"-").concat(h):i?l="<".concat(c,".").concat(u,".").concat(+f+1,"-0"):l="<=".concat(l),"".concat(t," ").concat(l).trim()),iU=(i,e,t)=>{for(let r=0;r<i.length;r++)if(!i[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<i.length;r++)if(de(i[r].semver),i[r].semver!==pp.ANY&&i[r].semver.prerelease.length>0){let n=i[r].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var ya=A((QK,i_)=>{"use strict";var wa=Symbol("SemVer ANY"),yp=class i{static get ANY(){return wa}constructor(e,t){if(t=Xv(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),gp("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===wa?this.value="":this.value=this.operator+this.semver.version,gp("comp",this)}parse(e){let t=this.options.loose?Jv[Zv.COMPARATORLOOSE]:Jv[Zv.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: ".concat(e));this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new e_(r[2],this.options.loose):this.semver=wa}toString(){return this.value}test(e){if(gp("Comparator.test",e,this.options.loose),this.semver===wa||e===wa)return!0;if(typeof e=="string")try{e=new e_(e,this.options)}catch{return!1}return mp(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new t_(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new t_(this.value,t).test(e.semver):(t=Xv(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||mp(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||mp(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};i_.exports=yp;var Xv=Tc(),{safeRe:Jv,t:Zv}=Os(),mp=fp(),gp=ma(),e_=Xe(),t_=zt()});var Aa=A((XK,r_)=>{"use strict";var rU=zt(),nU=(i,e,t)=>{try{e=new rU(e,t)}catch{return!1}return e.test(i)};r_.exports=nU});var s_=A((JK,n_)=>{"use strict";var sU=zt(),oU=(i,e)=>new sU(i,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));n_.exports=oU});var a_=A((ZK,o_)=>{"use strict";var aU=Xe(),lU=zt(),cU=(i,e,t)=>{let r=null,n=null,s=null;try{s=new lU(e,t)}catch{return null}return i.forEach(o=>{s.test(o)&&(!r||n.compare(o)===-1)&&(r=o,n=new aU(r,t))}),r};o_.exports=cU});var c_=A((e4,l_)=>{"use strict";var uU=Xe(),fU=zt(),hU=(i,e,t)=>{let r=null,n=null,s=null;try{s=new fU(e,t)}catch{return null}return i.forEach(o=>{s.test(o)&&(!r||n.compare(o)===1)&&(r=o,n=new uU(r,t))}),r};l_.exports=hU});var h_=A((t4,f_)=>{"use strict";var wp=Xe(),dU=zt(),u_=ga(),pU=(i,e)=>{i=new dU(i,e);let t=new wp("0.0.0");if(i.test(t)||(t=new wp("0.0.0-0"),i.test(t)))return t;t=null;for(let r=0;r<i.set.length;++r){let n=i.set[r],s=null;n.forEach(o=>{let a=new wp(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||u_(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(o.operator))}}),s&&(!t||u_(t,s))&&(t=s)}return t&&i.test(t)?t:null};f_.exports=pU});var p_=A((i4,d_)=>{"use strict";var mU=zt(),gU=(i,e)=>{try{return new mU(i,e).range||"*"}catch{return null}};d_.exports=gU});var $c=A((r4,w_)=>{"use strict";var yU=Xe(),y_=ya(),{ANY:wU}=y_,AU=zt(),EU=Aa(),m_=ga(),g_=Pc(),bU=xc(),SU=Lc(),vU=(i,e,t,r)=>{i=new yU(i,r),e=new AU(e,r);let n,s,o,a,l;switch(t){case">":n=m_,s=bU,o=g_,a=">",l=">=";break;case"<":n=g_,s=SU,o=m_,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(EU(i,e,r))return!1;for(let c=0;c<e.set.length;++c){let u=e.set[c],f=null,h=null;if(u.forEach(d=>{d.semver===wU&&(d=new y_(">=0.0.0")),f=f||d,h=h||d,n(d.semver,f.semver,r)?f=d:o(d.semver,h.semver,r)&&(h=d)}),f.operator===a||f.operator===l||(!h.operator||h.operator===a)&&s(i,h.semver))return!1;if(h.operator===l&&o(i,h.semver))return!1}return!0};w_.exports=vU});var E_=A((n4,A_)=>{"use strict";var _U=$c(),OU=(i,e,t)=>_U(i,e,">",t);A_.exports=OU});var S_=A((s4,b_)=>{"use strict";var TU=$c(),CU=(i,e,t)=>TU(i,e,"<",t);b_.exports=CU});var O_=A((o4,__)=>{"use strict";var v_=zt(),NU=(i,e,t)=>(i=new v_(i,t),e=new v_(e,t),i.intersects(e,t));__.exports=NU});var C_=A((a4,T_)=>{"use strict";var IU=Aa(),RU=Vt();T_.exports=(i,e,t)=>{let r=[],n=null,s=null,o=i.sort((u,f)=>RU(u,f,t));for(let u of o)IU(u,e,t)?(s=u,n||(n=u)):(s&&r.push([n,s]),s=null,n=null);n&&r.push([n,null]);let a=[];for(let[u,f]of r)u===f?a.push(u):!f&&u===o[0]?a.push("*"):f?u===o[0]?a.push("<=".concat(f)):a.push("".concat(u," - ").concat(f)):a.push(">=".concat(u));let l=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return l.length<c.length?l:e}});var L_=A((l4,P_)=>{"use strict";var N_=zt(),Ep=ya(),{ANY:Ap}=Ep,Ea=Aa(),bp=Vt(),DU=(i,e,t={})=>{if(i===e)return!0;i=new N_(i,t),e=new N_(e,t);let r=!1;e:for(let n of i.set){for(let s of e.set){let o=LU(n,s,t);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},PU=[new Ep(">=0.0.0-0")],I_=[new Ep(">=0.0.0")],LU=(i,e,t)=>{if(i===e)return!0;if(i.length===1&&i[0].semver===Ap){if(e.length===1&&e[0].semver===Ap)return!0;t.includePrerelease?i=PU:i=I_}if(e.length===1&&e[0].semver===Ap){if(t.includePrerelease)return!0;e=I_}let r=new Set,n,s;for(let d of i)d.operator===">"||d.operator===">="?n=R_(n,d,t):d.operator==="<"||d.operator==="<="?s=D_(s,d,t):r.add(d.semver);if(r.size>1)return null;let o;if(n&&s){if(o=bp(n.semver,s.semver,t),o>0)return null;if(o===0&&(n.operator!==">="||s.operator!=="<="))return null}for(let d of r){if(n&&!Ea(d,String(n),t)||s&&!Ea(d,String(s),t))return null;for(let y of e)if(!Ea(d,String(y),t))return!1;return!0}let a,l,c,u,f=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=n&&!t.includePrerelease&&n.semver.prerelease.length?n.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(u=u||d.operator===">"||d.operator===">=",c=c||d.operator==="<"||d.operator==="<=",n){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=R_(n,d,t),a===d&&a!==n)return!1}else if(n.operator===">="&&!Ea(n.semver,String(d),t))return!1}if(s){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(l=D_(s,d,t),l===d&&l!==s)return!1}else if(s.operator==="<="&&!Ea(s.semver,String(d),t))return!1}if(!d.operator&&(s||n)&&o!==0)return!1}return!(n&&c&&!s&&o!==0||s&&u&&!n&&o!==0||h||f)},R_=(i,e,t)=>{if(!i)return e;let r=bp(i.semver,e.semver,t);return r>0?i:r<0||e.operator===">"&&i.operator===">="?e:i},D_=(i,e,t)=>{if(!i)return e;let r=bp(i.semver,e.semver,t);return r<0?i:r>0||e.operator==="<"&&i.operator==="<="?e:i};P_.exports=DU});var vp=A((c4,F_)=>{"use strict";var Sp=Os(),x_=pa(),xU=Xe(),k_=ap(),kU=mn(),FU=av(),$U=cv(),qU=hv(),MU=mv(),UU=yv(),BU=Av(),jU=bv(),HU=vv(),WU=Vt(),GU=Cv(),VU=Iv(),zU=Dc(),YU=Lv(),KU=kv(),QU=ga(),XU=Pc(),JU=cp(),ZU=up(),e2=Lc(),t2=xc(),i2=fp(),r2=Wv(),n2=ya(),s2=zt(),o2=Aa(),a2=s_(),l2=a_(),c2=c_(),u2=h_(),f2=p_(),h2=$c(),d2=E_(),p2=S_(),m2=O_(),g2=C_(),y2=L_();F_.exports={parse:kU,valid:FU,clean:$U,inc:qU,diff:MU,major:UU,minor:BU,patch:jU,prerelease:HU,compare:WU,rcompare:GU,compareLoose:VU,compareBuild:zU,sort:YU,rsort:KU,gt:QU,lt:XU,eq:JU,neq:ZU,gte:e2,lte:t2,cmp:i2,coerce:r2,Comparator:n2,Range:s2,satisfies:o2,toComparators:a2,maxSatisfying:l2,minSatisfying:c2,minVersion:u2,validRange:f2,outside:h2,gtr:d2,ltr:p2,intersects:m2,simplifyRange:g2,subset:y2,SemVer:xU,re:Sp.re,src:Sp.src,tokens:Sp.t,SEMVER_SPEC_VERSION:x_.SEMVER_SPEC_VERSION,RELEASE_TYPES:x_.RELEASE_TYPES,compareIdentifiers:k_.compareIdentifiers,rcompareIdentifiers:k_.rcompareIdentifiers}});var yO=A((ba,Ns)=>{var w2=200,xp="__lodash_hash_undefined__",Gc=1,Y_=2,K_=9007199254740991,qc="[object Arguments]",Cp="[object Array]",A2="[object AsyncFunction]",Q_="[object Boolean]",X_="[object Date]",J_="[object Error]",Z_="[object Function]",E2="[object GeneratorFunction]",Mc="[object Map]",eO="[object Number]",b2="[object Null]",Cs="[object Object]",$_="[object Promise]",S2="[object Proxy]",tO="[object RegExp]",Uc="[object Set]",iO="[object String]",v2="[object Symbol]",_2="[object Undefined]",Np="[object WeakMap]",rO="[object ArrayBuffer]",Bc="[object DataView]",O2="[object Float32Array]",T2="[object Float64Array]",C2="[object Int8Array]",N2="[object Int16Array]",I2="[object Int32Array]",R2="[object Uint8Array]",D2="[object Uint8ClampedArray]",P2="[object Uint16Array]",L2="[object Uint32Array]",x2=/[\\^$.*+?()[\]{}|]/g,k2=/^\[object .+?Constructor\]$/,F2=/^(?:0|[1-9]\d*)$/,pe={};pe[O2]=pe[T2]=pe[C2]=pe[N2]=pe[I2]=pe[R2]=pe[D2]=pe[P2]=pe[L2]=!0;pe[qc]=pe[Cp]=pe[rO]=pe[Q_]=pe[Bc]=pe[X_]=pe[J_]=pe[Z_]=pe[Mc]=pe[eO]=pe[Cs]=pe[tO]=pe[Uc]=pe[iO]=pe[Np]=!1;var nO=typeof global=="object"&&global&&global.Object===Object&&global,$2=typeof self=="object"&&self&&self.Object===Object&&self,xi=nO||$2||Function("return this")(),sO=typeof ba=="object"&&ba&&!ba.nodeType&&ba,q_=sO&&typeof Ns=="object"&&Ns&&!Ns.nodeType&&Ns,oO=q_&&q_.exports===sO,_p=oO&&nO.process,M_=(function(){try{return _p&&_p.binding&&_p.binding("util")}catch{}})(),U_=M_&&M_.isTypedArray;function q2(i,e){for(var t=-1,r=i==null?0:i.length,n=0,s=[];++t<r;){var o=i[t];e(o,t,i)&&(s[n++]=o)}return s}function M2(i,e){for(var t=-1,r=e.length,n=i.length;++t<r;)i[n+t]=e[t];return i}function U2(i,e){for(var t=-1,r=i==null?0:i.length;++t<r;)if(e(i[t],t,i))return!0;return!1}function B2(i,e){for(var t=-1,r=Array(i);++t<i;)r[t]=e(t);return r}function j2(i){return function(e){return i(e)}}function H2(i,e){return i.has(e)}function W2(i,e){return i?.[e]}function G2(i){var e=-1,t=Array(i.size);return i.forEach(function(r,n){t[++e]=[n,r]}),t}function V2(i,e){return function(t){return i(e(t))}}function z2(i){var e=-1,t=Array(i.size);return i.forEach(function(r){t[++e]=r}),t}var Y2=Array.prototype,K2=Function.prototype,Vc=Object.prototype,Op=xi["__core-js_shared__"],aO=K2.toString,yi=Vc.hasOwnProperty,B_=(function(){var i=/[^.]+$/.exec(Op&&Op.keys&&Op.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})(),lO=Vc.toString,Q2=RegExp("^"+aO.call(yi).replace(x2,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j_=oO?xi.Buffer:void 0,jc=xi.Symbol,H_=xi.Uint8Array,cO=Vc.propertyIsEnumerable,X2=Y2.splice,gn=jc?jc.toStringTag:void 0,W_=Object.getOwnPropertySymbols,J2=j_?j_.isBuffer:void 0,Z2=V2(Object.keys,Object),Ip=Is(xi,"DataView"),Sa=Is(xi,"Map"),Rp=Is(xi,"Promise"),Dp=Is(xi,"Set"),Pp=Is(xi,"WeakMap"),va=Is(Object,"create"),eB=An(Ip),tB=An(Sa),iB=An(Rp),rB=An(Dp),nB=An(Pp),G_=jc?jc.prototype:void 0,Tp=G_?G_.valueOf:void 0;function yn(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var r=i[e];this.set(r[0],r[1])}}function sB(){this.__data__=va?va(null):{},this.size=0}function oB(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}function aB(i){var e=this.__data__;if(va){var t=e[i];return t===xp?void 0:t}return yi.call(e,i)?e[i]:void 0}function lB(i){var e=this.__data__;return va?e[i]!==void 0:yi.call(e,i)}function cB(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=va&&e===void 0?xp:e,this}yn.prototype.clear=sB;yn.prototype.delete=oB;yn.prototype.get=aB;yn.prototype.has=lB;yn.prototype.set=cB;function ki(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var r=i[e];this.set(r[0],r[1])}}function uB(){this.__data__=[],this.size=0}function fB(i){var e=this.__data__,t=zc(e,i);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():X2.call(e,t,1),--this.size,!0}function hB(i){var e=this.__data__,t=zc(e,i);return t<0?void 0:e[t][1]}function dB(i){return zc(this.__data__,i)>-1}function pB(i,e){var t=this.__data__,r=zc(t,i);return r<0?(++this.size,t.push([i,e])):t[r][1]=e,this}ki.prototype.clear=uB;ki.prototype.delete=fB;ki.prototype.get=hB;ki.prototype.has=dB;ki.prototype.set=pB;function wn(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var r=i[e];this.set(r[0],r[1])}}function mB(){this.size=0,this.__data__={hash:new yn,map:new(Sa||ki),string:new yn}}function gB(i){var e=Yc(this,i).delete(i);return this.size-=e?1:0,e}function yB(i){return Yc(this,i).get(i)}function wB(i){return Yc(this,i).has(i)}function AB(i,e){var t=Yc(this,i),r=t.size;return t.set(i,e),this.size+=t.size==r?0:1,this}wn.prototype.clear=mB;wn.prototype.delete=gB;wn.prototype.get=yB;wn.prototype.has=wB;wn.prototype.set=AB;function Hc(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new wn;++e<t;)this.add(i[e])}function EB(i){return this.__data__.set(i,xp),this}function bB(i){return this.__data__.has(i)}Hc.prototype.add=Hc.prototype.push=EB;Hc.prototype.has=bB;function Ar(i){var e=this.__data__=new ki(i);this.size=e.size}function SB(){this.__data__=new ki,this.size=0}function vB(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}function _B(i){return this.__data__.get(i)}function OB(i){return this.__data__.has(i)}function TB(i,e){var t=this.__data__;if(t instanceof ki){var r=t.__data__;if(!Sa||r.length<w2-1)return r.push([i,e]),this.size=++t.size,this;t=this.__data__=new wn(r)}return t.set(i,e),this.size=t.size,this}Ar.prototype.clear=SB;Ar.prototype.delete=vB;Ar.prototype.get=_B;Ar.prototype.has=OB;Ar.prototype.set=TB;function CB(i,e){var t=Wc(i),r=!t&&jB(i),n=!t&&!r&&Lp(i),s=!t&&!r&&!n&&gO(i),o=t||r||n||s,a=o?B2(i.length,String):[],l=a.length;for(var c in i)(e||yi.call(i,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||$B(c,l)))&&a.push(c);return a}function zc(i,e){for(var t=i.length;t--;)if(hO(i[t][0],e))return t;return-1}function NB(i,e,t){var r=e(i);return Wc(i)?r:M2(r,t(i))}function Oa(i){return i==null?i===void 0?_2:b2:gn&&gn in Object(i)?kB(i):BB(i)}function V_(i){return _a(i)&&Oa(i)==qc}function uO(i,e,t,r,n){return i===e?!0:i==null||e==null||!_a(i)&&!_a(e)?i!==i&&e!==e:IB(i,e,t,r,uO,n)}function IB(i,e,t,r,n,s){var o=Wc(i),a=Wc(e),l=o?Cp:wr(i),c=a?Cp:wr(e);l=l==qc?Cs:l,c=c==qc?Cs:c;var u=l==Cs,f=c==Cs,h=l==c;if(h&&Lp(i)){if(!Lp(e))return!1;o=!0,u=!1}if(h&&!u)return s||(s=new Ar),o||gO(i)?fO(i,e,t,r,n,s):LB(i,e,l,t,r,n,s);if(!(t&Gc)){var d=u&&yi.call(i,"__wrapped__"),y=f&&yi.call(e,"__wrapped__");if(d||y){var g=d?i.value():i,w=y?e.value():e;return s||(s=new Ar),n(g,w,t,r,s)}}return h?(s||(s=new Ar),xB(i,e,t,r,n,s)):!1}function RB(i){if(!mO(i)||MB(i))return!1;var e=dO(i)?Q2:k2;return e.test(An(i))}function DB(i){return _a(i)&&pO(i.length)&&!!pe[Oa(i)]}function PB(i){if(!UB(i))return Z2(i);var e=[];for(var t in Object(i))yi.call(i,t)&&t!="constructor"&&e.push(t);return e}function fO(i,e,t,r,n,s){var o=t&Gc,a=i.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(i);if(c&&s.get(e))return c==e;var u=-1,f=!0,h=t&Y_?new Hc:void 0;for(s.set(i,e),s.set(e,i);++u<a;){var d=i[u],y=e[u];if(r)var g=o?r(y,d,u,e,i,s):r(d,y,u,i,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!U2(e,function(w,S){if(!H2(h,S)&&(d===w||n(d,w,t,r,s)))return h.push(S)})){f=!1;break}}else if(!(d===y||n(d,y,t,r,s))){f=!1;break}}return s.delete(i),s.delete(e),f}function LB(i,e,t,r,n,s,o){switch(t){case Bc:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case rO:return!(i.byteLength!=e.byteLength||!s(new H_(i),new H_(e)));case Q_:case X_:case eO:return hO(+i,+e);case J_:return i.name==e.name&&i.message==e.message;case tO:case iO:return i==e+"";case Mc:var a=G2;case Uc:var l=r&Gc;if(a||(a=z2),i.size!=e.size&&!l)return!1;var c=o.get(i);if(c)return c==e;r|=Y_,o.set(i,e);var u=fO(a(i),a(e),r,n,s,o);return o.delete(i),u;case v2:if(Tp)return Tp.call(i)==Tp.call(e)}return!1}function xB(i,e,t,r,n,s){var o=t&Gc,a=z_(i),l=a.length,c=z_(e),u=c.length;if(l!=u&&!o)return!1;for(var f=l;f--;){var h=a[f];if(!(o?h in e:yi.call(e,h)))return!1}var d=s.get(i);if(d&&s.get(e))return d==e;var y=!0;s.set(i,e),s.set(e,i);for(var g=o;++f<l;){h=a[f];var w=i[h],S=e[h];if(r)var v=o?r(S,w,h,e,i,s):r(w,S,h,i,e,s);if(!(v===void 0?w===S||n(w,S,t,r,s):v)){y=!1;break}g||(g=h=="constructor")}if(y&&!g){var T=i.constructor,N=e.constructor;T!=N&&"constructor"in i&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof N=="function"&&N instanceof N)&&(y=!1)}return s.delete(i),s.delete(e),y}function z_(i){return NB(i,GB,FB)}function Yc(i,e){var t=i.__data__;return qB(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Is(i,e){var t=W2(i,e);return RB(t)?t:void 0}function kB(i){var e=yi.call(i,gn),t=i[gn];try{i[gn]=void 0;var r=!0}catch{}var n=lO.call(i);return r&&(e?i[gn]=t:delete i[gn]),n}var FB=W_?function(i){return i==null?[]:(i=Object(i),q2(W_(i),function(e){return cO.call(i,e)}))}:VB,wr=Oa;(Ip&&wr(new Ip(new ArrayBuffer(1)))!=Bc||Sa&&wr(new Sa)!=Mc||Rp&&wr(Rp.resolve())!=$_||Dp&&wr(new Dp)!=Uc||Pp&&wr(new Pp)!=Np)&&(wr=function(i){var e=Oa(i),t=e==Cs?i.constructor:void 0,r=t?An(t):"";if(r)switch(r){case eB:return Bc;case tB:return Mc;case iB:return $_;case rB:return Uc;case nB:return Np}return e});function $B(i,e){return e=e??K_,!!e&&(typeof i=="number"||F2.test(i))&&i>-1&&i%1==0&&i<e}function qB(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}function MB(i){return!!B_&&B_ in i}function UB(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||Vc;return i===t}function BB(i){return lO.call(i)}function An(i){if(i!=null){try{return aO.call(i)}catch{}try{return i+""}catch{}}return""}function hO(i,e){return i===e||i!==i&&e!==e}var jB=V_((function(){return arguments})())?V_:function(i){return _a(i)&&yi.call(i,"callee")&&!cO.call(i,"callee")},Wc=Array.isArray;function HB(i){return i!=null&&pO(i.length)&&!dO(i)}var Lp=J2||zB;function WB(i,e){return uO(i,e)}function dO(i){if(!mO(i))return!1;var e=Oa(i);return e==Z_||e==E2||e==A2||e==S2}function pO(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=K_}function mO(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}function _a(i){return i!=null&&typeof i=="object"}var gO=U_?j2(U_):DB;function GB(i){return HB(i)?CB(i):PB(i)}function VB(){return[]}function zB(){return!1}Ns.exports=WB});var AO=A(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.DownloadedUpdateHelper=void 0;Ca.createTempUpdateFile=XB;var YB=require("crypto"),KB=require("fs"),wO=yO(),En=Pi(),Ta=require("path"),kp=class{constructor(e){this.cacheDir=e,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return Ta.join(this.cacheDir,"pending")}async validateDownloadedPath(e,t,r,n){if(this.versionInfo!=null&&this.file===e&&this.fileInfo!=null)return wO(this.versionInfo,t)&&wO(this.fileInfo.info,r.info)&&await(0,En.pathExists)(e)?e:null;let s=await this.getValidCachedUpdateFile(r,n);return s===null?null:(n.info("Update has already been downloaded to ".concat(e,").")),this._file=s,s)}async setDownloadedFile(e,t,r,n,s,o){this._file=e,this._packageFile=t,this.versionInfo=r,this.fileInfo=n,this._downloadedFileInfo={fileName:s,sha512:n.info.sha512,isAdminRightsRequired:n.info.isAdminRightsRequired===!0},o&&await(0,En.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,En.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(e,t){let r=this.getUpdateInfoFile();if(!await(0,En.pathExists)(r))return null;let s;try{s=await(0,En.readJson)(r)}catch(c){let u="No cached update info available";return c.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),u+=" (error on read: ".concat(c.message,")")),t.info(u),null}if(!(s?.fileName!==null))return t.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(e.info.sha512!==s.sha512)return t.info("Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ".concat(s.sha512,", expected: ").concat(e.info.sha512,". Directory for cached update will be cleaned")),await this.cleanCacheDirForPendingUpdate(),null;let a=Ta.join(this.cacheDirForPendingUpdate,s.fileName);if(!await(0,En.pathExists)(a))return t.info("Cached update file doesn't exist"),null;let l=await QB(a);return e.info.sha512!==l?(t.warn("Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ".concat(l,", expected: ").concat(e.info.sha512)),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=s,a)}getUpdateInfoFile(){return Ta.join(this.cacheDirForPendingUpdate,"update-info.json")}};Ca.DownloadedUpdateHelper=kp;function QB(i,e="sha512",t="base64",r){return new Promise((n,s)=>{let o=(0,YB.createHash)(e);o.on("error",s).setEncoding(t),(0,KB.createReadStream)(i,{...r,highWaterMark:1024*1024}).on("error",s).on("end",()=>{o.end(),n(o.read())}).pipe(o,{end:!1})})}async function XB(i,e,t){let r=0,n=Ta.join(e,i);for(let s=0;s<3;s++)try{return await(0,En.unlink)(n),n}catch(o){if(o.code==="ENOENT")return n;t.warn("Error on remove temp update file: ".concat(o)),n=Ta.join(e,"".concat(r++,"-").concat(i))}return n}});var EO=A($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});$p.getAppCacheDir=ZB;var Fp=require("path"),JB=require("os");function ZB(){let i=(0,JB.homedir)(),e;return process.platform==="win32"?e=process.env.LOCALAPPDATA||Fp.join(i,"AppData","Local"):process.platform==="darwin"?e=Fp.join(i,"Library","Caches"):e=process.env.XDG_CACHE_HOME||Fp.join(i,".cache"),e}});var SO=A(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.ElectronAppAdapter=void 0;var bO=require("path"),ej=EO(),qp=class{constructor(e=require("electron").app){this.app=e}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?bO.join(process.resourcesPath,"app-update.yml"):bO.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,ej.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(e){this.app.once("quit",(t,r)=>e(r))}};Kc.ElectronAppAdapter=qp});var _O=A(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.ElectronHttpExecutor=Er.NET_SESSION_NAME=void 0;Er.getNetSession=vO;var Qc=Fe();Er.NET_SESSION_NAME="electron-updater";function vO(){return require("electron").session.fromPartition(Er.NET_SESSION_NAME,{cache:!1})}var Mp=class extends Qc.HttpExecutor{constructor(e){super(),this.proxyLoginCallback=e,this.cachedSession=null}async download(e,t,r){return await r.cancellationToken.createPromise((n,s,o)=>{let a={headers:r.headers||void 0,redirect:"manual"};(0,Qc.configureRequestUrl)(e,a),(0,Qc.configureRequestOptions)(a),this.doDownload(a,{destination:t,options:r,onCancel:o,callback:l=>{l==null?n(t):s(l)},responseHandler:null},0)})}createRequest(e,t){e.headers&&e.headers.Host&&(e.host=e.headers.Host,delete e.headers.Host),this.cachedSession==null&&(this.cachedSession=vO());let r=require("electron").net.request({...e,session:this.cachedSession});return r.on("response",t),this.proxyLoginCallback!=null&&r.on("login",this.proxyLoginCallback),r}addRedirectHandlers(e,t,r,n,s){e.on("redirect",(o,a,l)=>{e.abort(),n>this.maxRedirects?r(this.createMaxRedirectError()):s(Qc.HttpExecutor.prepareRedirectUrlOptions(l,t))})}};Er.ElectronHttpExecutor=Mp});var RO=A((p4,IO)=>{var tj=1/0,ij="[object Symbol]",NO=/[\\^$.*+?()[\]{}|]/g,rj=RegExp(NO.source),nj=typeof global=="object"&&global&&global.Object===Object&&global,sj=typeof self=="object"&&self&&self.Object===Object&&self,oj=nj||sj||Function("return this")(),aj=Object.prototype,lj=aj.toString,OO=oj.Symbol,TO=OO?OO.prototype:void 0,CO=TO?TO.toString:void 0;function cj(i){if(typeof i=="string")return i;if(fj(i))return CO?CO.call(i):"";var e=i+"";return e=="0"&&1/i==-tj?"-0":e}function uj(i){return!!i&&typeof i=="object"}function fj(i){return typeof i=="symbol"||uj(i)&&lj.call(i)==ij}function hj(i){return i==null?"":cj(i)}function dj(i){return i=hj(i),i&&rj.test(i)?i.replace(NO,"\\$&"):i}IO.exports=dj});var br=A(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.newBaseUrl=mj;Rs.newUrlFromBase=Up;Rs.getChannelFilename=gj;Rs.blockmapFiles=yj;var DO=require("url"),pj=RO();function mj(i){let e=new DO.URL(i);return e.pathname.endsWith("/")||(e.pathname+="/"),e}function Up(i,e,t=!1){let r=new DO.URL(i,e),n=e.search;return n!=null&&n.length!==0?r.search=n:t&&(r.search="noCache=".concat(Date.now().toString(32))),r}function gj(i){return"".concat(i,".yml")}function yj(i,e,t){let r=Up("".concat(i.pathname,".blockmap"),i);return[Up("".concat(i.pathname.replace(new RegExp(pj(t),"g"),e),".blockmap"),i),r]}});var Lt=A(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.Provider=void 0;vr.findFile=Aj;vr.parseUpdateInfo=Ej;vr.getFileList=LO;vr.resolveFiles=bj;var Sr=Fe(),wj=_c(),PO=br(),Bp=class{constructor(e){this.runtimeOptions=e,this.requestHeaders=null,this.executor=e.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){let e=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(e==="x64"?"":"-".concat(e))}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(e){return"".concat(e).concat(this.getChannelFilePrefix())}get fileExtraDownloadHeaders(){return null}setRequestHeaders(e){this.requestHeaders=e}httpRequest(e,t,r){return this.executor.request(this.createRequestOptions(e,t),r)}createRequestOptions(e,t){let r={};return this.requestHeaders==null?t!=null&&(r.headers=t):r.headers=t==null?this.requestHeaders:{...this.requestHeaders,...t},(0,Sr.configureRequestUrl)(e,r),r}};vr.Provider=Bp;function Aj(i,e,t){if(i.length===0)throw(0,Sr.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");let r=i.find(n=>n.url.pathname.toLowerCase().endsWith(".".concat(e)));return r??(t==null?i[0]:i.find(n=>!t.some(s=>n.url.pathname.toLowerCase().endsWith(".".concat(s)))))}function Ej(i,e,t){if(i==null)throw(0,Sr.newError)("Cannot parse update info from ".concat(e," in the latest release artifacts (").concat(t,"): rawData: null"),"ERR_UPDATER_INVALID_UPDATE_INFO");let r;try{r=(0,wj.load)(i)}catch(n){throw(0,Sr.newError)("Cannot parse update info from ".concat(e," in the latest release artifacts (").concat(t,"): ").concat(n.stack||n.message,", rawData: ").concat(i),"ERR_UPDATER_INVALID_UPDATE_INFO")}return r}function LO(i){let e=i.files;if(e!=null&&e.length>0)return e;if(i.path!=null)return[{url:i.path,sha2:i.sha2,sha512:i.sha512}];throw(0,Sr.newError)("No files provided: ".concat((0,Sr.safeStringifyJson)(i)),"ERR_UPDATER_NO_FILES_PROVIDED")}function bj(i,e,t=r=>r){let n=LO(i).map(a=>{if(a.sha2==null&&a.sha512==null)throw(0,Sr.newError)("Update info doesn't contain nor sha256 neither sha512 checksum: ".concat((0,Sr.safeStringifyJson)(a)),"ERR_UPDATER_NO_CHECKSUM");return{url:(0,PO.newUrlFromBase)(t(a.url),e),info:a}}),s=i.packages,o=s==null?null:s[process.arch]||s.ia32;return o!=null&&(n[0].packageInfo={...o,path:(0,PO.newUrlFromBase)(t(o.path),e).href}),n}});var Gp=A(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.GenericProvider=void 0;var xO=Fe(),jp=br(),Hp=Lt(),Wp=class extends Hp.Provider{constructor(e,t,r){super(r),this.configuration=e,this.updater=t,this.baseUrl=(0,jp.newBaseUrl)(this.configuration.url)}get channel(){let e=this.updater.channel||this.configuration.channel;return e==null?this.getDefaultChannelName():this.getCustomChannelName(e)}async getLatestVersion(){let e=(0,jp.getChannelFilename)(this.channel),t=(0,jp.newUrlFromBase)(e,this.baseUrl,this.updater.isAddNoCacheQuery);for(let r=0;;r++)try{return(0,Hp.parseUpdateInfo)(await this.httpRequest(t),e,t)}catch(n){if(n instanceof xO.HttpError&&n.statusCode===404)throw(0,xO.newError)('Cannot find channel "'.concat(e,'" update info: ').concat(n.stack||n.message),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(n.code==="ECONNREFUSED"&&r<3){await new Promise((s,o)=>{try{setTimeout(s,1e3*r)}catch(a){o(a)}});continue}throw n}}resolveFiles(e){return(0,Hp.resolveFiles)(e,this.baseUrl)}};Xc.GenericProvider=Wp});var FO=A(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.BitbucketProvider=void 0;var kO=Fe(),Vp=br(),zp=Lt(),Yp=class extends zp.Provider{constructor(e,t,r){super({...r,isUseMultipleRangeRequest:!1}),this.configuration=e,this.updater=t;let{owner:n,slug:s}=e;this.baseUrl=(0,Vp.newBaseUrl)("https://api.bitbucket.org/2.0/repositories/".concat(n,"/").concat(s,"/downloads"))}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){let e=new kO.CancellationToken,t=(0,Vp.getChannelFilename)(this.getCustomChannelName(this.channel)),r=(0,Vp.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);try{let n=await this.httpRequest(r,void 0,e);return(0,zp.parseUpdateInfo)(n,t,r)}catch(n){throw(0,kO.newError)("Unable to find latest version on ".concat(this.toString(),", please ensure release exists: ").concat(n.stack||n.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(e){return(0,zp.resolveFiles)(e,this.baseUrl)}toString(){let{owner:e,slug:t}=this.configuration;return"Bitbucket (owner: ".concat(e,", slug: ").concat(t,", channel: ").concat(this.channel,")")}};Jc.BitbucketProvider=Yp});var Jp=A(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.GitHubProvider=bn.BaseGitHubProvider=void 0;bn.computeReleaseNotes=qO;var Fi=Fe(),Ds=vp(),Sj=require("url"),Ps=br(),Qp=Lt(),Kp=/\/tag\/([^/]+)$/,Zc=class extends Qp.Provider{constructor(e,t,r){super({...r,isUseMultipleRangeRequest:!1}),this.options=e,this.baseUrl=(0,Ps.newBaseUrl)((0,Fi.githubUrl)(e,t));let n=t==="github.com"?"api.github.com":t;this.baseApiUrl=(0,Ps.newBaseUrl)((0,Fi.githubUrl)(e,n))}computeGithubBasePath(e){let t=this.options.host;return t&&!["github.com","api.github.com"].includes(t)?"/api/v3".concat(e):e}};bn.BaseGitHubProvider=Zc;var Xp=class extends Zc{constructor(e,t,r){super(e,"github.com",r),this.options=e,this.updater=t}get channel(){let e=this.updater.channel||this.options.channel;return e==null?this.getDefaultChannelName():this.getCustomChannelName(e)}async getLatestVersion(){var e,t,r,n,s;let o=new Fi.CancellationToken,a=await this.httpRequest((0,Ps.newUrlFromBase)("".concat(this.basePath,".atom"),this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},o),l=(0,Fi.parseXml)(a),c=l.element("entry",!1,"No published versions on GitHub"),u=null;try{if(this.updater.allowPrerelease){let w=((e=this.updater)===null||e===void 0?void 0:e.channel)||((t=Ds.prerelease(this.updater.currentVersion))===null||t===void 0?void 0:t[0])||null;if(w===null)u=Kp.exec(c.element("link").attribute("href"))[1];else for(let S of l.getElements("entry")){let v=Kp.exec(S.element("link").attribute("href"));if(v===null)continue;let T=v[1],N=((r=Ds.prerelease(T))===null||r===void 0?void 0:r[0])||null,P=!w||["alpha","beta"].includes(w),R=N!==null&&!["alpha","beta"].includes(String(N));if(P&&!R&&!(w==="beta"&&N==="alpha")){u=T;break}if(N&&N===w){u=T;break}}}else{u=await this.getLatestTagName(o);for(let w of l.getElements("entry"))if(Kp.exec(w.element("link").attribute("href"))[1]===u){c=w;break}}}catch(w){throw(0,Fi.newError)("Cannot parse releases feed: ".concat(w.stack||w.message,",\nXML:\n").concat(a),"ERR_UPDATER_INVALID_RELEASE_FEED")}if(u==null)throw(0,Fi.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let f,h="",d="",y=async w=>{h=(0,Ps.getChannelFilename)(w),d=(0,Ps.newUrlFromBase)(this.getBaseDownloadPath(String(u),h),this.baseUrl);let S=this.createRequestOptions(d);try{return await this.executor.request(S,o)}catch(v){throw v instanceof Fi.HttpError&&v.statusCode===404?(0,Fi.newError)("Cannot find ".concat(h," in the latest release artifacts (").concat(d,"): ").concat(v.stack||v.message),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):v}};try{let w=this.channel;this.updater.allowPrerelease&&(!((n=Ds.prerelease(u))===null||n===void 0)&&n[0])&&(w=this.getCustomChannelName(String((s=Ds.prerelease(u))===null||s===void 0?void 0:s[0]))),f=await y(w)}catch(w){if(this.updater.allowPrerelease)f=await y(this.getDefaultChannelName());else throw w}let g=(0,Qp.parseUpdateInfo)(f,h,d);return g.releaseName==null&&(g.releaseName=c.elementValueOrEmpty("title")),g.releaseNotes==null&&(g.releaseNotes=qO(this.updater.currentVersion,this.updater.fullChangelog,l,c)),{tag:u,...g}}async getLatestTagName(e){let t=this.options,r=t.host==null||t.host==="github.com"?(0,Ps.newUrlFromBase)("".concat(this.basePath,"/latest"),this.baseUrl):new Sj.URL("".concat(this.computeGithubBasePath("/repos/".concat(t.owner,"/").concat(t.repo,"/releases")),"/latest"),this.baseApiUrl);try{let n=await this.httpRequest(r,{Accept:"application/json"},e);return n==null?null:JSON.parse(n).tag_name}catch(n){throw(0,Fi.newError)("Unable to find latest version on GitHub (".concat(r,"), please ensure a production release exists: ").concat(n.stack||n.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return"/".concat(this.options.owner,"/").concat(this.options.repo,"/releases")}resolveFiles(e){return(0,Qp.resolveFiles)(e,this.baseUrl,t=>this.getBaseDownloadPath(e.tag,t.replace(/ /g,"-")))}getBaseDownloadPath(e,t){return"".concat(this.basePath,"/download/").concat(e,"/").concat(t)}};bn.GitHubProvider=Xp;function $O(i){let e=i.elementValueOrEmpty("content");return e==="No content."?"":e}function qO(i,e,t,r){if(!e)return $O(r);let n=[];for(let s of t.getElements("entry")){let o=/\/tag\/v?([^/]+)$/.exec(s.element("link").attribute("href"))[1];Ds.lt(i,o)&&n.push({version:o,note:$O(s)})}return n.sort((s,o)=>Ds.rcompare(s.version,o.version))}});var UO=A(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.KeygenProvider=void 0;var MO=Fe(),Zp=br(),em=Lt(),tm=class extends em.Provider{constructor(e,t,r){super({...r,isUseMultipleRangeRequest:!1}),this.configuration=e,this.updater=t,this.defaultHostname="api.keygen.sh";let n=this.configuration.host||this.defaultHostname;this.baseUrl=(0,Zp.newBaseUrl)("https://".concat(n,"/v1/accounts/").concat(this.configuration.account,"/artifacts?product=").concat(this.configuration.product))}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){let e=new MO.CancellationToken,t=(0,Zp.getChannelFilename)(this.getCustomChannelName(this.channel)),r=(0,Zp.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);try{let n=await this.httpRequest(r,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},e);return(0,em.parseUpdateInfo)(n,t,r)}catch(n){throw(0,MO.newError)("Unable to find latest version on ".concat(this.toString(),", please ensure release exists: ").concat(n.stack||n.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(e){return(0,em.resolveFiles)(e,this.baseUrl)}toString(){let{account:e,product:t,platform:r}=this.configuration;return"Keygen (account: ".concat(e,", product: ").concat(t,", platform: ").concat(r,", channel: ").concat(this.channel,")")}};eu.KeygenProvider=tm});var HO=A(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.PrivateGitHubProvider=void 0;var Ls=Fe(),vj=_c(),_j=require("path"),BO=require("url"),jO=br(),Oj=Jp(),Tj=Lt(),im=class extends Oj.BaseGitHubProvider{constructor(e,t,r,n){super(e,"api.github.com",n),this.updater=t,this.token=r}createRequestOptions(e,t){let r=super.createRequestOptions(e,t);return r.redirect="manual",r}async getLatestVersion(){let e=new Ls.CancellationToken,t=(0,jO.getChannelFilename)(this.getDefaultChannelName()),r=await this.getLatestVersionInfo(e),n=r.assets.find(a=>a.name===t);if(n==null)throw(0,Ls.newError)("Cannot find ".concat(t," in the release ").concat(r.html_url||r.name),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");let s=new BO.URL(n.url),o;try{o=(0,vj.load)(await this.httpRequest(s,this.configureHeaders("application/octet-stream"),e))}catch(a){throw a instanceof Ls.HttpError&&a.statusCode===404?(0,Ls.newError)("Cannot find ".concat(t," in the latest release artifacts (").concat(s,"): ").concat(a.stack||a.message),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):a}return o.assets=r.assets,o}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(e){return{accept:e,authorization:"token ".concat(this.token)}}async getLatestVersionInfo(e){let t=this.updater.allowPrerelease,r=this.basePath;t||(r="".concat(r,"/latest"));let n=(0,jO.newUrlFromBase)(r,this.baseUrl);try{let s=JSON.parse(await this.httpRequest(n,this.configureHeaders("application/vnd.github.v3+json"),e));return t?s.find(o=>o.prerelease)||s[0]:s}catch(s){throw(0,Ls.newError)("Unable to find latest version on GitHub (".concat(n,"), please ensure a production release exists: ").concat(s.stack||s.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath("/repos/".concat(this.options.owner,"/").concat(this.options.repo,"/releases"))}resolveFiles(e){return(0,Tj.getFileList)(e).map(t=>{let r=_j.posix.basename(t.url).replace(/ /g,"-"),n=e.assets.find(s=>s!=null&&s.name===r);if(n==null)throw(0,Ls.newError)('Cannot find asset "'.concat(r,'" in: ').concat(JSON.stringify(e.assets,null,2)),"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new BO.URL(n.url),info:t}})}};tu.PrivateGitHubProvider=im});var VO=A(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.isUrlProbablySupportMultiRangeRequests=GO;ru.createClient=Dj;var iu=Fe(),Cj=FO(),WO=Gp(),Nj=Jp(),Ij=UO(),Rj=HO();function GO(i){return!i.includes("s3.amazonaws.com")}function Dj(i,e,t){if(typeof i=="string")throw(0,iu.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");let r=i.provider;switch(r){case"github":{let n=i,s=(n.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||n.token;return s==null?new Nj.GitHubProvider(n,e,t):new Rj.PrivateGitHubProvider(n,e,s,t)}case"bitbucket":return new Cj.BitbucketProvider(i,e,t);case"keygen":return new Ij.KeygenProvider(i,e,t);case"s3":case"spaces":return new WO.GenericProvider({provider:"generic",url:(0,iu.getS3LikeProviderBaseUrl)(i),channel:i.channel||null},e,{...t,isUseMultipleRangeRequest:!1});case"generic":{let n=i;return new WO.GenericProvider(n,e,{...t,isUseMultipleRangeRequest:n.useMultipleRangeRequest!==!1&&GO(n.url)})}case"custom":{let n=i,s=n.updateProvider;if(!s)throw(0,iu.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new s(n,e,t)}default:throw(0,iu.newError)("Unsupported provider: ".concat(r),"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}});var nu=A(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.OperationKind=void 0;Na.computeOperations=Pj;var Sn;(function(i){i[i.COPY=0]="COPY",i[i.DOWNLOAD=1]="DOWNLOAD"})(Sn||(Na.OperationKind=Sn={}));function Pj(i,e,t){let r=YO(i.files),n=YO(e.files),s=null,o=e.files[0],a=[],l=o.name,c=r.get(l);if(c==null)throw new Error("no file ".concat(l," in old blockmap"));let u=n.get(l),f=0,{checksumToOffset:h,checksumToOldSize:d}=xj(r.get(l),c.offset,t),y=o.offset;for(let g=0;g<u.checksums.length;y+=u.sizes[g],g++){let w=u.sizes[g],S=u.checksums[g],v=h.get(S);v!=null&&d.get(S)!==w&&(t.warn('Checksum ("'.concat(S,'") matches, but size differs (old: ').concat(d.get(S),", new: ").concat(w,")")),v=void 0),v===void 0?(f++,s!=null&&s.kind===Sn.DOWNLOAD&&s.end===y?s.end+=w:(s={kind:Sn.DOWNLOAD,start:y,end:y+w},zO(s,a,S,g))):s!=null&&s.kind===Sn.COPY&&s.end===v?s.end+=w:(s={kind:Sn.COPY,start:v,end:v+w},zO(s,a,S,g))}return f>0&&t.info("File".concat(o.name==="file"?"":" "+o.name," has ").concat(f," changed blocks")),a}var Lj=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function zO(i,e,t,r){if(Lj&&e.length!==0){let n=e[e.length-1];if(n.kind===i.kind&&i.start<n.end&&i.start>n.start){let s=[n.start,n.end,i.start,i.end].reduce((o,a)=>o<a?o:a);throw new Error("operation (block index: ".concat(r,", checksum: ").concat(t,", kind: ").concat(Sn[i.kind],") overlaps previous operation (checksum: ").concat(t,"):\n")+"abs: ".concat(n.start," until ").concat(n.end," and ").concat(i.start," until ").concat(i.end,"\n")+"rel: ".concat(n.start-s," until ").concat(n.end-s," and ").concat(i.start-s," until ").concat(i.end-s))}}e.push(i)}function xj(i,e,t){let r=new Map,n=new Map,s=e;for(let o=0;o<i.checksums.length;o++){let a=i.checksums[o],l=i.sizes[o],c=n.get(a);if(c===void 0)r.set(a,s),n.set(a,l);else if(t.debug!=null){let u=c===l?"(same size)":"(size: ".concat(c,", this size: ").concat(l,")");t.debug("".concat(a," duplicated in blockmap ").concat(u,", it doesn't lead to broken differential downloader, just corresponding block will be skipped)"))}s+=l}return{checksumToOffset:r,checksumToOldSize:n}}function YO(i){let e=new Map;for(let t of i)e.set(t.name,t);return e}});var nm=A(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.DataSplitter=void 0;Ia.copyData=QO;var su=Fe(),kj=require("fs"),Fj=require("stream"),$j=nu(),KO=Buffer.from("\r\n\r\n"),_r;(function(i){i[i.INIT=0]="INIT",i[i.HEADER=1]="HEADER",i[i.BODY=2]="BODY"})(_r||(_r={}));function QO(i,e,t,r,n){let s=(0,kj.createReadStream)("",{fd:t,autoClose:!1,start:i.start,end:i.end-1});s.on("error",r),s.once("end",n),s.pipe(e,{end:!1})}var rm=class extends Fj.Writable{constructor(e,t,r,n,s,o){super(),this.out=e,this.options=t,this.partIndexToTaskIndex=r,this.partIndexToLength=s,this.finishHandler=o,this.partIndex=-1,this.headerListBuffer=null,this.readState=_r.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=n.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(e,t,r){if(this.isFinished){console.error("Trailing ignored data: ".concat(e.length," bytes"));return}this.handleData(e).then(r).catch(r)}async handleData(e){let t=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,su.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){let r=Math.min(this.ignoreByteCount,e.length);this.ignoreByteCount-=r,t=r}else if(this.remainingPartDataCount>0){let r=Math.min(this.remainingPartDataCount,e.length);this.remainingPartDataCount-=r,await this.processPartData(e,0,r),t=r}if(t!==e.length){if(this.readState===_r.HEADER){let r=this.searchHeaderListEnd(e,t);if(r===-1)return;t=r,this.readState=_r.BODY,this.headerListBuffer=null}for(;;){if(this.readState===_r.BODY)this.readState=_r.INIT;else{this.partIndex++;let o=this.partIndexToTaskIndex.get(this.partIndex);if(o==null)if(this.isFinished)o=this.options.end;else throw(0,su.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");let a=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(a<o)await this.copyExistingData(a,o);else if(a>o)throw(0,su.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(t=this.searchHeaderListEnd(e,t),t===-1){this.readState=_r.HEADER;return}}let r=this.partIndexToLength[this.partIndex],n=t+r,s=Math.min(n,e.length);if(await this.processPartStarted(e,t,s),this.remainingPartDataCount=r-(s-t),this.remainingPartDataCount>0)return;if(t=n+this.boundaryLength,t>=e.length){this.ignoreByteCount=this.boundaryLength-(e.length-n);return}}}}copyExistingData(e,t){return new Promise((r,n)=>{let s=()=>{if(e===t){r();return}let o=this.options.tasks[e];if(o.kind!==$j.OperationKind.COPY){n(new Error("Task kind must be COPY"));return}QO(o,this.out,this.options.oldFileFd,n,()=>{e++,s()})};s()})}searchHeaderListEnd(e,t){let r=e.indexOf(KO,t);if(r!==-1)return r+KO.length;let n=t===0?e:e.slice(t);return this.headerListBuffer==null?this.headerListBuffer=n:this.headerListBuffer=Buffer.concat([this.headerListBuffer,n]),-1}onPartEnd(){let e=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==e)throw(0,su.newError)("Expected length: ".concat(e," differs from actual: ").concat(this.actualPartLength),"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(e,t,r){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(e,t,r)}processPartData(e,t,r){this.actualPartLength+=r-t;let n=this.out;return n.write(t===0&&e.length===r?e:e.slice(t,r))?Promise.resolve():new Promise((s,o)=>{n.on("error",o),n.once("drain",()=>{n.removeListener("error",o),s()})})}};Ia.DataSplitter=rm});var ZO=A(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.executeTasksUsingMultipleRangeRequests=qj;ou.checkIsRangesSupported=om;var sm=Fe(),XO=nm(),JO=nu();function qj(i,e,t,r,n){let s=o=>{if(o>=e.length){i.fileMetadataBuffer!=null&&t.write(i.fileMetadataBuffer),t.end();return}let a=o+1e3;Mj(i,{tasks:e,start:o,end:Math.min(e.length,a),oldFileFd:r},t,()=>s(a),n)};return s}function Mj(i,e,t,r,n){let s="bytes=",o=0,a=new Map,l=[];for(let f=e.start;f<e.end;f++){let h=e.tasks[f];h.kind===JO.OperationKind.DOWNLOAD&&(s+="".concat(h.start,"-").concat(h.end-1,", "),a.set(o,f),o++,l.push(h.end-h.start))}if(o<=1){let f=h=>{if(h>=e.end){r();return}let d=e.tasks[h++];if(d.kind===JO.OperationKind.COPY)(0,XO.copyData)(d,t,e.oldFileFd,n,()=>f(h));else{let y=i.createRequestOptions();y.headers.Range="bytes=".concat(d.start,"-").concat(d.end-1);let g=i.httpExecutor.createRequest(y,w=>{om(w,n)&&(w.pipe(t,{end:!1}),w.once("end",()=>f(h)))});i.httpExecutor.addErrorAndTimeoutHandlers(g,n),g.end()}};f(e.start);return}let c=i.createRequestOptions();c.headers.Range=s.substring(0,s.length-2);let u=i.httpExecutor.createRequest(c,f=>{if(!om(f,n))return;let h=(0,sm.safeGetHeader)(f,"content-type"),d=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(h);if(d==null){n(new Error('Content-Type "multipart/byteranges" is expected, but got "'.concat(h,'"')));return}let y=new XO.DataSplitter(t,e,a,d[1]||d[2],l,r);y.on("error",n),f.pipe(y),f.on("end",()=>{setTimeout(()=>{u.abort(),n(new Error("Response ends without calling any handlers"))},1e4)})});i.httpExecutor.addErrorAndTimeoutHandlers(u,n),u.end()}function om(i,e){if(i.statusCode>=400)return e((0,sm.createHttpError)(i)),!1;if(i.statusCode!==206){let t=(0,sm.safeGetHeader)(i,"accept-ranges");if(t==null||t==="none")return e(new Error("Server doesn't support Accept-Ranges (response code ".concat(i.statusCode,")"))),!1}return!0}});var eT=A(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.ProgressDifferentialDownloadCallbackTransform=void 0;var Uj=require("stream"),xs;(function(i){i[i.COPY=0]="COPY",i[i.DOWNLOAD=1]="DOWNLOAD"})(xs||(xs={}));var am=class extends Uj.Transform{constructor(e,t,r){super(),this.progressDifferentialDownloadInfo=e,this.cancellationToken=t,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=xs.COPY,this.nextUpdate=this.start+1e3}_transform(e,t,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}if(this.operationType==xs.COPY){r(null,e);return}this.transferred+=e.length,this.delta+=e.length;let n=Date.now();n>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=n+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((n-this.start)/1e3))}),this.delta=0),r(null,e)}beginFileCopy(){this.operationType=xs.COPY}beginRangeDownload(){this.operationType=xs.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(e){if(this.cancellationToken.cancelled){e(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,e(null)}};au.ProgressDifferentialDownloadCallbackTransform=am});var um=A(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.DifferentialDownloader=void 0;var Ra=Fe(),lm=Pi(),Bj=require("fs"),jj=nm(),Hj=require("url"),lu=nu(),tT=ZO(),Wj=eT(),cm=class{constructor(e,t,r){this.blockAwareFileInfo=e,this.httpExecutor=t,this.options=r,this.fileMetadataBuffer=null,this.logger=r.logger}createRequestOptions(){let e={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,Ra.configureRequestUrl)(this.options.newUrl,e),(0,Ra.configureRequestOptions)(e),e}doDownload(e,t){if(e.version!==t.version)throw new Error("version is different (".concat(e.version," - ").concat(t.version,"), full download is required"));let r=this.logger,n=(0,lu.computeOperations)(e,t,r);r.debug!=null&&r.debug(JSON.stringify(n,null,2));let s=0,o=0;for(let l of n){let c=l.end-l.start;l.kind===lu.OperationKind.DOWNLOAD?s+=c:o+=c}let a=this.blockAwareFileInfo.size;if(s+o+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==a)throw new Error("Internal error, size mismatch: downloadSize: ".concat(s,", copySize: ").concat(o,", newSize: ").concat(a));return r.info("Full: ".concat(iT(a),", To download: ").concat(iT(s)," (").concat(Math.round(s/(a/100)),"%)")),this.downloadFile(n)}downloadFile(e){let t=[],r=()=>Promise.all(t.map(n=>(0,lm.close)(n.descriptor).catch(s=>{this.logger.error('cannot close file "'.concat(n.path,'": ').concat(s))})));return this.doDownloadFile(e,t).then(r).catch(n=>r().catch(s=>{try{this.logger.error("cannot close files: ".concat(s))}catch(o){try{console.error(o)}catch{}}throw n}).then(()=>{throw n}))}async doDownloadFile(e,t){let r=await(0,lm.open)(this.options.oldFile,"r");t.push({descriptor:r,path:this.options.oldFile});let n=await(0,lm.open)(this.options.newFile,"w");t.push({descriptor:n,path:this.options.newFile});let s=(0,Bj.createWriteStream)(this.options.newFile,{fd:n});await new Promise((o,a)=>{let l=[],c;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){let S=[],v=0;for(let N of e)N.kind===lu.OperationKind.DOWNLOAD&&(S.push(N.end-N.start),v+=N.end-N.start);let T={expectedByteCounts:S,grandTotal:v};c=new Wj.ProgressDifferentialDownloadCallbackTransform(T,this.options.cancellationToken,this.options.onProgress),l.push(c)}let u=new Ra.DigestTransform(this.blockAwareFileInfo.sha512);u.isValidateOnEnd=!1,l.push(u),s.on("finish",()=>{s.close(()=>{t.splice(1,1);try{u.validate()}catch(S){a(S);return}o(void 0)})}),l.push(s);let f=null;for(let S of l)S.on("error",a),f==null?f=S:f=f.pipe(S);let h=l[0],d;if(this.options.isUseMultipleRangeRequest){d=(0,tT.executeTasksUsingMultipleRangeRequests)(this,e,h,r,a),d(0);return}let y=0,g=null;this.logger.info("Differential download: ".concat(this.options.newUrl));let w=this.createRequestOptions();w.redirect="manual",d=S=>{var v,T;if(S>=e.length){this.fileMetadataBuffer!=null&&h.write(this.fileMetadataBuffer),h.end();return}let N=e[S++];if(N.kind===lu.OperationKind.COPY){c&&c.beginFileCopy(),(0,jj.copyData)(N,h,r,a,()=>d(S));return}let P="bytes=".concat(N.start,"-").concat(N.end-1);w.headers.range=P,(T=(v=this.logger)===null||v===void 0?void 0:v.debug)===null||T===void 0||T.call(v,"download range: ".concat(P)),c&&c.beginRangeDownload();let R=this.httpExecutor.createRequest(w,x=>{x.on("error",a),x.on("aborted",()=>{a(new Error("response has been aborted by the server"))}),x.statusCode>=400&&a((0,Ra.createHttpError)(x)),x.pipe(h,{end:!1}),x.once("end",()=>{c&&c.endRangeDownload(),++y===100?(y=0,setTimeout(()=>d(S),1e3)):d(S)})});R.on("redirect",(x,b,D)=>{this.logger.info("Redirect to ".concat(Gj(D))),g=D,(0,Ra.configureRequestUrl)(new Hj.URL(g),w),R.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(R,a),R.end()},d(0)})}async readRemoteBytes(e,t){let r=Buffer.allocUnsafe(t+1-e),n=this.createRequestOptions();n.headers.range="bytes=".concat(e,"-").concat(t);let s=0;if(await this.request(n,o=>{o.copy(r,s),s+=o.length}),s!==r.length)throw new Error("Received data length ".concat(s," is not equal to expected ").concat(r.length));return r}request(e,t){return new Promise((r,n)=>{let s=this.httpExecutor.createRequest(e,o=>{(0,tT.checkIsRangesSupported)(o,n)&&(o.on("error",n),o.on("aborted",()=>{n(new Error("response has been aborted by the server"))}),o.on("data",t),o.on("end",()=>r()))});this.httpExecutor.addErrorAndTimeoutHandlers(s,n),s.end()})}};cu.DifferentialDownloader=cm;function iT(i,e=" KB"){return new Intl.NumberFormat("en").format((i/1024).toFixed(2))+e}function Gj(i){let e=i.indexOf("?");return e<0?i:i.substring(0,e)}});var rT=A(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.GenericDifferentialDownloader=void 0;var Vj=um(),fm=class extends Vj.DifferentialDownloader{download(e,t){return this.doDownload(e,t)}};uu.GenericDifferentialDownloader=fm});var Or=A(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.UpdaterSignal=xt.UPDATE_DOWNLOADED=xt.DOWNLOAD_PROGRESS=xt.CancellationToken=void 0;xt.addHandler=Da;var zj=Fe();Object.defineProperty(xt,"CancellationToken",{enumerable:!0,get:function(){return zj.CancellationToken}});xt.DOWNLOAD_PROGRESS="download-progress";xt.UPDATE_DOWNLOADED="update-downloaded";var hm=class{constructor(e){this.emitter=e}login(e){Da(this.emitter,"login",e)}progress(e){Da(this.emitter,xt.DOWNLOAD_PROGRESS,e)}updateDownloaded(e){Da(this.emitter,xt.UPDATE_DOWNLOADED,e)}updateCancelled(e){Da(this.emitter,"update-cancelled",e)}};xt.UpdaterSignal=hm;var Yj=!1;function Da(i,e,t){Yj?i.on(e,(...r)=>{console.log("%s %s",e,r),t(...r)}):i.on(e,t)}});var hu=A($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.NoOpLogger=$s.AppUpdater=void 0;var ut=Fe(),Kj=require("crypto"),Qj=require("os"),Xj=require("events"),ks=Pi(),Jj=_c(),dm=YS(),vn=require("path"),_n=vp(),nT=AO(),Zj=SO(),sT=_O(),eH=Gp(),pm=VO(),tH=require("zlib"),iH=br(),rH=rT(),Fs=Or(),mm=class i extends Xj.EventEmitter{get channel(){return this._channel}set channel(e){if(this._channel!=null){if(typeof e!="string")throw(0,ut.newError)("Channel must be a string, but got: ".concat(e),"ERR_UPDATER_INVALID_CHANNEL");if(e.length===0)throw(0,ut.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=e,this.allowDowngrade=!0}addAuthHeader(e){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:e})}get netSession(){return(0,sT.getNetSession)()}get logger(){return this._logger}set logger(e){this._logger=e??new fu}set updateConfigPath(e){this.clientPromise=null,this._appUpdateConfigPath=e,this.configOnDisk=new dm.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(e){e&&(this._isUpdateSupported=e)}constructor(e,t){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new Fs.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=s=>this.checkIfUpdateSupported(s),this.clientPromise=null,this.stagingUserIdPromise=new dm.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new dm.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",s=>{this._logger.error("Error: ".concat(s.stack||s.message))}),t==null?(this.app=new Zj.ElectronAppAdapter,this.httpExecutor=new sT.ElectronHttpExecutor((s,o)=>this.emit("login",s,o))):(this.app=t,this.httpExecutor=null);let r=this.app.version,n=(0,_n.parse)(r);if(n==null)throw(0,ut.newError)('App version is not a valid semver version: "'.concat(r,'"'),"ERR_UPDATER_INVALID_VERSION");this.currentVersion=n,this.allowPrerelease=nH(n),e!=null&&(this.setFeedURL(e),typeof e!="string"&&e.requestHeaders&&(this.requestHeaders=e.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(e){let t=this.createProviderRuntimeOptions(),r;typeof e=="string"?r=new eH.GenericProvider({provider:"generic",url:e},this,{...t,isUseMultipleRangeRequest:(0,pm.isUrlProbablySupportMultiRangeRequests)(e)}):r=(0,pm.createClient)(e,this,t),this.clientPromise=Promise.resolve(r)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let e=this.checkForUpdatesPromise;if(e!=null)return this._logger.info("Checking for update (already in progress)"),e;let t=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),e=this.doCheckForUpdates().then(r=>(t(),r)).catch(r=>{throw t(),this.emit("error",r,"Cannot check for updates: ".concat((r.stack||r).toString())),r}),this.checkForUpdatesPromise=e,e}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(e){return this.checkForUpdates().then(t=>t?.downloadPromise?(t.downloadPromise.then(()=>{let r=i.formatDownloadNotification(t.updateInfo.version,this.app.name,e);new(require("electron")).Notification(r).show()}),t):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),t))}static formatDownloadNotification(e,t,r){return r==null&&(r={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),r={title:r.title.replace("{appName}",t).replace("{version}",e),body:r.body.replace("{appName}",t).replace("{version}",e)},r}async isStagingMatch(e){let t=e.stagingPercentage,r=t;if(r==null)return!0;if(r=parseInt(r,10),isNaN(r))return this._logger.warn("Staging percentage is NaN: ".concat(t)),!0;r=r/100;let n=await this.stagingUserIdPromise.value,o=ut.UUID.parse(n).readUInt32BE(12)/4294967295;return this._logger.info("Staging percentage: ".concat(r,", percentage: ").concat(o,", user id: ").concat(n)),o<r}computeFinalHeaders(e){return this.requestHeaders!=null&&Object.assign(e,this.requestHeaders),e}async isUpdateAvailable(e){let t=(0,_n.parse)(e.version);if(t==null)throw(0,ut.newError)('This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "'.concat(e.version,'"'),"ERR_UPDATER_INVALID_VERSION");let r=this.currentVersion;if((0,_n.eq)(t,r)||!await Promise.resolve(this.isUpdateSupported(e))||!await this.isStagingMatch(e))return!1;let s=(0,_n.gt)(t,r),o=(0,_n.lt)(t,r);return s?!0:this.allowDowngrade&&o}checkIfUpdateSupported(e){let t=e?.minimumSystemVersion,r=(0,Qj.release)();if(t)try{if((0,_n.lt)(r,t))return this._logger.info("Current OS version ".concat(r," is less than the minimum OS version required ").concat(t," for version ").concat(r)),!1}catch(n){this._logger.warn("Failed to compare current OS version(".concat(r,") with minimum OS version(").concat(t,"): ").concat((n.message||n).toString()))}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(r=>(0,pm.createClient)(r,this,this.createProviderRuntimeOptions())));let e=await this.clientPromise,t=await this.stagingUserIdPromise.value;return e.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":t})),{info:await e.getLatestVersion(),provider:e}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");let e=await this.getUpdateInfoAndProvider(),t=e.info;if(!await this.isUpdateAvailable(t))return this._logger.info("Update for version ".concat(this.currentVersion.format()," is not available (latest version: ").concat(t.version,", downgrade is ").concat(this.allowDowngrade?"allowed":"disallowed",").")),this.emit("update-not-available",t),{isUpdateAvailable:!1,versionInfo:t,updateInfo:t};this.updateInfoAndProvider=e,this.onUpdateAvailable(t);let r=new ut.CancellationToken;return{isUpdateAvailable:!0,versionInfo:t,updateInfo:t,cancellationToken:r,downloadPromise:this.autoDownload?this.downloadUpdate(r):null}}onUpdateAvailable(e){this._logger.info("Found version ".concat(e.version," (url: ").concat((0,ut.asArray)(e.files).map(t=>t.url).join(", "),")")),this.emit("update-available",e)}downloadUpdate(e=new ut.CancellationToken){let t=this.updateInfoAndProvider;if(t==null){let n=new Error("Please check update first");return this.dispatchError(n),Promise.reject(n)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info("Downloading update from ".concat((0,ut.asArray)(t.info.files).map(n=>n.url).join(", ")));let r=n=>{if(!(n instanceof ut.CancellationError))try{this.dispatchError(n)}catch(s){this._logger.warn("Cannot dispatch error event: ".concat(s.stack||s))}return n};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:t,requestHeaders:this.computeRequestHeaders(t.provider),cancellationToken:e,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(n=>{throw r(n)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(e){this.emit("error",e,(e.stack||e).toString())}dispatchUpdateDownloaded(e){this.emit(Fs.UPDATE_DOWNLOADED,e)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,Jj.load)(await(0,ks.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(e){let t=e.fileExtraDownloadHeaders;if(t!=null){let r=this.requestHeaders;return r==null?t:{...t,...r}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){let e=vn.join(this.app.userDataPath,".updaterId");try{let r=await(0,ks.readFile)(e,"utf-8");if(ut.UUID.check(r))return r;this._logger.warn("Staging user id file exists, but content was invalid: ".concat(r))}catch(r){r.code!=="ENOENT"&&this._logger.warn("Couldn't read staging user ID, creating a blank one: ".concat(r))}let t=ut.UUID.v5((0,Kj.randomBytes)(4096),ut.UUID.OID);this._logger.info("Generated new staging user ID: ".concat(t));try{await(0,ks.outputFile)(e,t)}catch(r){this._logger.warn("Couldn't write out staging user ID: ".concat(r))}return t}get isAddNoCacheQuery(){let e=this.requestHeaders;if(e==null)return!0;for(let t of Object.keys(e)){let r=t.toLowerCase();if(r==="authorization"||r==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let e=this.downloadedUpdateHelper;if(e==null){let t=(await this.configOnDisk.value).updaterCacheDirName,r=this._logger;t==null&&r.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");let n=vn.join(this.app.baseCachePath,t||this.app.name);r.debug!=null&&r.debug("updater cache dir: ".concat(n)),e=new nT.DownloadedUpdateHelper(n),this.downloadedUpdateHelper=e}return e}async executeDownload(e){let t=e.fileInfo,r={headers:e.downloadUpdateOptions.requestHeaders,cancellationToken:e.downloadUpdateOptions.cancellationToken,sha2:t.info.sha2,sha512:t.info.sha512};this.listenerCount(Fs.DOWNLOAD_PROGRESS)>0&&(r.onProgress=v=>this.emit(Fs.DOWNLOAD_PROGRESS,v));let n=e.downloadUpdateOptions.updateInfoAndProvider.info,s=n.version,o=t.packageInfo;function a(){let v=decodeURIComponent(e.fileInfo.url.pathname);return v.endsWith(".".concat(e.fileExtension))?vn.basename(v):e.fileInfo.info.url}let l=await this.getOrCreateDownloadHelper(),c=l.cacheDirForPendingUpdate;await(0,ks.mkdir)(c,{recursive:!0});let u=a(),f=vn.join(c,u),h=o==null?null:vn.join(c,"package-".concat(s).concat(vn.extname(o.path)||".7z")),d=async v=>(await l.setDownloadedFile(f,h,n,t,u,v),await e.done({...n,downloadedFile:f}),h==null?[f]:[f,h]),y=this._logger,g=await l.validateDownloadedPath(f,n,t,y);if(g!=null)return f=g,await d(!1);let w=async()=>(await l.clear().catch(()=>{}),await(0,ks.unlink)(f).catch(()=>{})),S=await(0,nT.createTempUpdateFile)("temp-".concat(u),c,y);try{await e.task(S,r,h,w),await(0,ut.retry)(()=>(0,ks.rename)(S,f),60,500,0,0,v=>v instanceof Error&&/^EBUSY:/.test(v.message))}catch(v){throw await w(),v instanceof ut.CancellationError&&(y.info("cancelled"),this.emit("update-cancelled",n)),v}return y.info("New version ".concat(s," has been downloaded to ").concat(f)),await d(!0)}async differentialDownloadInstaller(e,t,r,n,s){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;let o=(0,iH.blockmapFiles)(e.url,this.app.version,t.updateInfoAndProvider.info.version);this._logger.info('Download block maps (old: "'.concat(o[0],'", new: ').concat(o[1],")"));let a=async u=>{let f=await this.httpExecutor.downloadToBuffer(u,{headers:t.requestHeaders,cancellationToken:t.cancellationToken});if(f==null||f.length===0)throw new Error('Blockmap "'.concat(u.href,'" is empty'));try{return JSON.parse((0,tH.gunzipSync)(f).toString())}catch(h){throw new Error('Cannot parse blockmap "'.concat(u.href,'", error: ').concat(h))}},l={newUrl:e.url,oldFile:vn.join(this.downloadedUpdateHelper.cacheDir,s),logger:this._logger,newFile:r,isUseMultipleRangeRequest:n.isUseMultipleRangeRequest,requestHeaders:t.requestHeaders,cancellationToken:t.cancellationToken};this.listenerCount(Fs.DOWNLOAD_PROGRESS)>0&&(l.onProgress=u=>this.emit(Fs.DOWNLOAD_PROGRESS,u));let c=await Promise.all(o.map(u=>a(u)));return await new rH.GenericDifferentialDownloader(e.info,this.httpExecutor,l).download(c[0],c[1]),!1}catch(o){if(this._logger.error("Cannot download differentially, fallback to full download: ".concat(o.stack||o)),this._testOnlyOptions!=null)throw o;return!0}}};$s.AppUpdater=mm;function nH(i){let e=(0,_n.prerelease)(i);return e!=null&&e.length>0}var fu=class{info(e){}warn(e){}error(e){}};$s.NoOpLogger=fu});var On=A(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.BaseUpdater=void 0;var oT=require("child_process"),sH=hu(),gm=class extends sH.AppUpdater{constructor(e,t){super(e,t),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(e=!1,t=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(e,e?t:this.autoRunAppAfterInstall)?setImmediate(()=>{require("electron").autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(e){return super.executeDownload({...e,done:t=>(this.dispatchUpdateDownloaded(t),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(e=!1,t=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;let r=this.downloadedUpdateHelper,n=this.installerPath,s=r==null?null:r.downloadedFileInfo;if(n==null||s==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info("Install: isSilent: ".concat(e,", isForceRunAfter: ").concat(t)),this.doInstall({isSilent:e,isForceRunAfter:t,isAdminRightsRequired:s.isAdminRightsRequired})}catch(o){return this.dispatchError(o),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(e=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(e!==0){this._logger.info("Update will be not installed on quit because application is quitting with exit code ".concat(e));return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){let{name:e}=this.app,t='"'.concat(e,' would like to update"'),r=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),n=[r];return/kdesudo/i.test(r)?(n.push("--comment",t),n.push("-c")):/gksudo/i.test(r)?n.push("--message",t):/pkexec/i.test(r)&&n.push("--disable-internal-agent"),n.join(" ")}spawnSyncLog(e,t=[],r={}){this._logger.info("Executing: ".concat(e," with args: ").concat(t));let n=(0,oT.spawnSync)(e,t,{env:{...process.env,...r},encoding:"utf-8",shell:!0}),{error:s,status:o,stdout:a,stderr:l}=n;if(s!=null)throw this._logger.error(l),s;if(o!=null&&o!==0)throw this._logger.error(l),new Error("Command ".concat(e," exited with code ").concat(o));return a.trim()}async spawnLog(e,t=[],r=void 0,n="ignore"){return this._logger.info("Executing: ".concat(e," with args: ").concat(t)),new Promise((s,o)=>{try{let a={stdio:n,env:r,detached:!0},l=(0,oT.spawn)(e,t,a);l.on("error",c=>{o(c)}),l.unref(),l.pid!==void 0&&s(!0)}catch(a){o(a)}})}};du.BaseUpdater=gm});var wm=A(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;var qs=Pi(),oH=um(),aH=require("zlib"),ym=class extends oH.DifferentialDownloader{async download(){let e=this.blockAwareFileInfo,t=e.size,r=t-(e.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(r,t-1);let n=aT(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await lH(this.options.oldFile),n)}};pu.FileWithEmbeddedBlockMapDifferentialDownloader=ym;function aT(i){return JSON.parse((0,aH.inflateRawSync)(i).toString())}async function lH(i){let e=await(0,qs.open)(i,"r");try{let t=(await(0,qs.fstat)(e)).size,r=Buffer.allocUnsafe(4);await(0,qs.read)(e,r,0,r.length,t-r.length);let n=Buffer.allocUnsafe(r.readUInt32BE(0));return await(0,qs.read)(e,n,0,n.length,t-r.length-n.length),await(0,qs.close)(e),aT(n)}catch(t){throw await(0,qs.close)(e),t}}});var Em=A(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.AppImageUpdater=void 0;var lT=Fe(),cT=require("child_process"),cH=Pi(),uH=require("fs"),Pa=require("path"),fH=On(),hH=wm(),dH=Lt(),uT=Or(),Am=class extends fH.BaseUpdater{constructor(e,t){super(e,t)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(e){let t=e.updateInfoAndProvider.provider,r=(0,dH.findFile)(t.resolveFiles(e.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:r,downloadUpdateOptions:e,task:async(n,s)=>{let o=process.env.APPIMAGE;if(o==null)throw(0,lT.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(e.disableDifferentialDownload||await this.downloadDifferential(r,o,n,t,e))&&await this.httpExecutor.download(r.url,n,s),await(0,cH.chmod)(n,493)}})}async downloadDifferential(e,t,r,n,s){try{let o={newUrl:e.url,oldFile:t,logger:this._logger,newFile:r,isUseMultipleRangeRequest:n.isUseMultipleRangeRequest,requestHeaders:s.requestHeaders,cancellationToken:s.cancellationToken};return this.listenerCount(uT.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(uT.DOWNLOAD_PROGRESS,a)),await new hH.FileWithEmbeddedBlockMapDifferentialDownloader(e.info,this.httpExecutor,o).download(),!1}catch(o){return this._logger.error("Cannot download differentially, fallback to full download: ".concat(o.stack||o)),process.platform==="linux"}}doInstall(e){let t=process.env.APPIMAGE;if(t==null)throw(0,lT.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,uH.unlinkSync)(t);let r,n=Pa.basename(t),s=this.installerPath;if(s==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;Pa.basename(s)===n||!/\d+\.\d+\.\d+/.test(n)?r=t:r=Pa.join(Pa.dirname(t),Pa.basename(s)),(0,cT.execFileSync)("mv",["-f",s,r]),r!==t&&this.emit("appimage-filename-updated",r);let o={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return e.isForceRunAfter?this.spawnLog(r,[],o):(o.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,cT.execFileSync)(r,[],{env:o})),!0}};mu.AppImageUpdater=Am});var Sm=A(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.DebUpdater=void 0;var pH=On(),mH=Lt(),fT=Or(),bm=class extends pH.BaseUpdater{constructor(e,t){super(e,t)}doDownloadUpdate(e){let t=e.updateInfoAndProvider.provider,r=(0,mH.findFile)(t.resolveFiles(e.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:r,downloadUpdateOptions:e,task:async(n,s)=>{this.listenerCount(fT.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(fT.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(r.url,n,s)}})}get installerPath(){var e,t;return(t=(e=super.installerPath)===null||e===void 0?void 0:e.replace(/ /g,"\\ "))!==null&&t!==void 0?t:null}doInstall(e){let t=this.wrapSudo(),r=/pkexec/i.test(t)?"":'"',n=this.installerPath;if(n==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let s=["dpkg","-i",n,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(t,["".concat(r,"/bin/bash"),"-c","'".concat(s.join(" "),"'").concat(r)]),e.isForceRunAfter&&this.app.relaunch(),!0}};gu.DebUpdater=bm});var _m=A(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.PacmanUpdater=void 0;var gH=On(),hT=Or(),yH=Lt(),vm=class extends gH.BaseUpdater{constructor(e,t){super(e,t)}doDownloadUpdate(e){let t=e.updateInfoAndProvider.provider,r=(0,yH.findFile)(t.resolveFiles(e.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:r,downloadUpdateOptions:e,task:async(n,s)=>{this.listenerCount(hT.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(hT.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(r.url,n,s)}})}get installerPath(){var e,t;return(t=(e=super.installerPath)===null||e===void 0?void 0:e.replace(/ /g,"\\ "))!==null&&t!==void 0?t:null}doInstall(e){let t=this.wrapSudo(),r=/pkexec/i.test(t)?"":'"',n=this.installerPath;if(n==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let s=["pacman","-U","--noconfirm",n];return this.spawnSyncLog(t,["".concat(r,"/bin/bash"),"-c","'".concat(s.join(" "),"'").concat(r)]),e.isForceRunAfter&&this.app.relaunch(),!0}};yu.PacmanUpdater=vm});var Tm=A(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.RpmUpdater=void 0;var wH=On(),dT=Or(),AH=Lt(),Om=class extends wH.BaseUpdater{constructor(e,t){super(e,t)}doDownloadUpdate(e){let t=e.updateInfoAndProvider.provider,r=(0,AH.findFile)(t.resolveFiles(e.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:r,downloadUpdateOptions:e,task:async(n,s)=>{this.listenerCount(dT.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(dT.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(r.url,n,s)}})}get installerPath(){var e,t;return(t=(e=super.installerPath)===null||e===void 0?void 0:e.replace(/ /g,"\\ "))!==null&&t!==void 0?t:null}doInstall(e){let t=this.wrapSudo(),r=/pkexec/i.test(t)?"":'"',n=this.spawnSyncLog("which zypper"),s=this.installerPath;if(s==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let o;return n?o=[n,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",s]:o=[this.spawnSyncLog("which dnf || which yum"),"-y","install",s],this.spawnSyncLog(t,["".concat(r,"/bin/bash"),"-c","'".concat(o.join(" "),"'").concat(r)]),e.isForceRunAfter&&this.app.relaunch(),!0}};wu.RpmUpdater=Om});var Im=A(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.MacUpdater=void 0;var pT=Fe(),Cm=Pi(),EH=require("fs"),mT=require("path"),bH=require("http"),SH=hu(),vH=Lt(),gT=require("child_process"),yT=require("crypto"),Nm=class extends SH.AppUpdater{constructor(e,t){super(e,t),this.nativeUpdater=require("electron").autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",r=>{this._logger.warn(r),this.emit("error",r)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(e){this._logger.debug!=null&&this._logger.debug(e)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(e=>{e&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(e){let t=e.updateInfoAndProvider.provider.resolveFiles(e.updateInfoAndProvider.info),r=this._logger,n="sysctl.proc_translated",s=!1;try{this.debug("Checking for macOS Rosetta environment"),s=(0,gT.execFileSync)("sysctl",[n],{encoding:"utf8"}).includes("".concat(n,": 1")),r.info("Checked for macOS Rosetta environment (isRosetta=".concat(s,")"))}catch(f){r.warn("sysctl shell command to check for macOS Rosetta environment failed: ".concat(f))}let o=!1;try{this.debug("Checking for arm64 in uname");let h=(0,gT.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");r.info("Checked 'uname -a': arm64=".concat(h)),o=o||h}catch(f){r.warn("uname shell command to check for arm64 failed: ".concat(f))}o=o||process.arch==="arm64"||s;let a=f=>{var h;return f.url.pathname.includes("arm64")||((h=f.info.url)===null||h===void 0?void 0:h.includes("arm64"))};o&&t.some(a)?t=t.filter(f=>o===a(f)):t=t.filter(f=>!a(f));let l=(0,vH.findFile)(t,"zip",["pkg","dmg"]);if(l==null)throw(0,pT.newError)("ZIP file not provided: ".concat((0,pT.safeStringifyJson)(t)),"ERR_UPDATER_ZIP_FILE_NOT_FOUND");let c=e.updateInfoAndProvider.provider,u="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:l,downloadUpdateOptions:e,task:async(f,h)=>{let d=mT.join(this.downloadedUpdateHelper.cacheDir,u),y=()=>(0,Cm.pathExistsSync)(d)?!e.disableDifferentialDownload:(r.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1),g=!0;y()&&(g=await this.differentialDownloadInstaller(l,e,f,c,u)),g&&await this.httpExecutor.download(l.url,f,h)},done:async f=>{if(!e.disableDifferentialDownload)try{let h=mT.join(this.downloadedUpdateHelper.cacheDir,u);await(0,Cm.copyFile)(f.downloadedFile,h)}catch(h){this._logger.warn("Unable to copy file for caching for future differential downloads: ".concat(h.message))}return this.updateDownloaded(l,f)}})}async updateDownloaded(e,t){var r;let n=t.downloadedFile,s=(r=e.info.size)!==null&&r!==void 0?r:(await(0,Cm.stat)(n)).size,o=this._logger,a="fileToProxy=".concat(e.url.href);this.closeServerIfExists(),this.debug("Creating proxy server for native Squirrel.Mac (".concat(a,")")),this.server=(0,bH.createServer)(),this.debug("Proxy server for native Squirrel.Mac is created (".concat(a,")")),this.server.on("close",()=>{o.info("Proxy server for native Squirrel.Mac is closed (".concat(a,")"))});let l=c=>{let u=c.address();return typeof u=="string"?u:"http://127.0.0.1:".concat(u?.port)};return await new Promise((c,u)=>{let f=(0,yT.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),h=Buffer.from("autoupdater:".concat(f),"ascii"),d="/".concat((0,yT.randomBytes)(64).toString("hex"),".zip");this.server.on("request",(y,g)=>{let w=y.url;if(o.info("".concat(w," requested")),w==="/"){if(!y.headers.authorization||y.headers.authorization.indexOf("Basic ")===-1){g.statusCode=401,g.statusMessage="Invalid Authentication Credentials",g.end(),o.warn("No authenthication info");return}let T=y.headers.authorization.split(" ")[1],N=Buffer.from(T,"base64").toString("ascii"),[P,R]=N.split(":");if(P!=="autoupdater"||R!==f){g.statusCode=401,g.statusMessage="Invalid Authentication Credentials",g.end(),o.warn("Invalid authenthication credentials");return}let x=Buffer.from('{ "url": "'.concat(l(this.server)).concat(d,'" }'));g.writeHead(200,{"Content-Type":"application/json","Content-Length":x.length}),g.end(x);return}if(!w.startsWith(d)){o.warn("".concat(w," requested, but not supported")),g.writeHead(404),g.end();return}o.info("".concat(d," requested by Squirrel.Mac, pipe ").concat(n));let S=!1;g.on("finish",()=>{S||(this.nativeUpdater.removeListener("error",u),c([]))});let v=(0,EH.createReadStream)(n);v.on("error",T=>{try{g.end()}catch(N){o.warn("cannot end response: ".concat(N))}S=!0,this.nativeUpdater.removeListener("error",u),u(new Error('Cannot pipe "'.concat(n,'": ').concat(T)))}),g.writeHead(200,{"Content-Type":"application/zip","Content-Length":s}),v.pipe(g)}),this.debug("Proxy server for native Squirrel.Mac is starting to listen (".concat(a,")")),this.server.listen(0,"127.0.0.1",()=>{this.debug("Proxy server for native Squirrel.Mac is listening (address=".concat(l(this.server),", ").concat(a,")")),this.nativeUpdater.setFeedURL({url:l(this.server),headers:{"Cache-Control":"no-cache",Authorization:"Basic ".concat(h.toString("base64"))}}),this.dispatchUpdateDownloaded(t),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",u),this.nativeUpdater.checkForUpdates()):c([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};Au.MacUpdater=Nm});var bT=A(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.verifySignature=OH;var wT=Fe(),ET=require("child_process"),_H=require("os"),AT=require("path");function OH(i,e,t){return new Promise((r,n)=>{let s=e.replace(/'/g,"''");t.info("Verifying signature ".concat(s)),(0,ET.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command","\"Get-AuthenticodeSignature -LiteralPath '".concat(s,"' | ConvertTo-Json -Compress\"")],{shell:!0,timeout:20*1e3},(o,a,l)=>{var c;try{if(o!=null||l){Rm(t,o,l,n),r(null);return}let u=TH(a);if(u.Status===0){try{let y=AT.normalize(u.Path),g=AT.normalize(e);if(t.info("LiteralPath: ".concat(y,". Update Path: ").concat(g)),y!==g){Rm(t,new Error("LiteralPath of ".concat(y," is different than ").concat(g)),l,n),r(null);return}}catch(y){t.warn("Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ".concat((c=y.message)!==null&&c!==void 0?c:y.stack))}let h=(0,wT.parseDn)(u.SignerCertificate.Subject),d=!1;for(let y of i){let g=(0,wT.parseDn)(y);if(g.size?d=Array.from(g.keys()).every(S=>g.get(S)===h.get(S)):y===h.get("CN")&&(t.warn("Signature validated using only CN ".concat(y,". Please add your full Distinguished Name (DN) to publisherNames configuration")),d=!0),d){r(null);return}}}let f="publisherNames: ".concat(i.join(" | "),", raw info: ")+JSON.stringify(u,(h,d)=>h==="RawData"?void 0:d,2);t.warn("Sign verification failed, installer signed with incorrect certificate: ".concat(f)),r(f)}catch(u){Rm(t,u,null,n),r(null);return}})})}function TH(i){let e=JSON.parse(i);delete e.PrivateKey,delete e.IsOSBinary,delete e.SignatureType;let t=e.SignerCertificate;return t!=null&&(delete t.Archived,delete t.Extensions,delete t.Handle,delete t.HasPrivateKey,delete t.SubjectName),e}function Rm(i,e,t,r){if(CH()){i.warn("Cannot execute Get-AuthenticodeSignature: ".concat(e||t,". Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher."));return}try{(0,ET.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(n){i.warn("Cannot execute ConvertTo-Json: ".concat(n.message,". Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher."));return}e!=null&&r(e),t&&r(new Error("Cannot execute Get-AuthenticodeSignature, stderr: ".concat(t,". Failing signature validation due to unknown stderr.")))}function CH(){let i=_H.release();return i.startsWith("6.")&&!i.startsWith("6.3")}});var Lm=A(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.NsisUpdater=void 0;var Eu=Fe(),ST=require("path"),NH=On(),IH=wm(),vT=Or(),RH=Lt(),DH=Pi(),PH=bT(),_T=require("url"),Pm=class extends NH.BaseUpdater{constructor(e,t){super(e,t),this._verifyUpdateCodeSignature=(r,n)=>(0,PH.verifySignature)(r,n,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(e){e&&(this._verifyUpdateCodeSignature=e)}doDownloadUpdate(e){let t=e.updateInfoAndProvider.provider,r=(0,RH.findFile)(t.resolveFiles(e.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:e,fileInfo:r,task:async(n,s,o,a)=>{let l=r.packageInfo,c=l!=null&&o!=null;if(c&&e.disableWebInstaller)throw(0,Eu.newError)("Unable to download new version ".concat(e.updateInfoAndProvider.info.version,". Web Installers are disabled"),"ERR_UPDATER_WEB_INSTALLER_DISABLED");!c&&!e.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(c||e.disableDifferentialDownload||await this.differentialDownloadInstaller(r,e,n,t,Eu.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(r.url,n,s);let u=await this.verifySignature(n);if(u!=null)throw await a(),(0,Eu.newError)("New version ".concat(e.updateInfoAndProvider.info.version," is not signed by the application owner: ").concat(u),"ERR_UPDATER_INVALID_SIGNATURE");if(c&&await this.differentialDownloadWebPackage(e,l,o,t))try{await this.httpExecutor.download(new _T.URL(l.path),o,{headers:e.requestHeaders,cancellationToken:e.cancellationToken,sha512:l.sha512})}catch(f){try{await(0,DH.unlink)(o)}catch{}throw f}}})}async verifySignature(e){let t;try{if(t=(await this.configOnDisk.value).publisherName,t==null)return null}catch(r){if(r.code==="ENOENT")return null;throw r}return await this._verifyUpdateCodeSignature(Array.isArray(t)?t:[t],e)}doInstall(e){let t=this.installerPath;if(t==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let r=["--updated"];e.isSilent&&r.push("/S"),e.isForceRunAfter&&r.push("--force-run"),this.installDirectory&&r.push("/D=".concat(this.installDirectory));let n=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;n!=null&&r.push("--package-file=".concat(n));let s=()=>{this.spawnLog(ST.join(process.resourcesPath,"elevate.exe"),[t].concat(r)).catch(o=>this.dispatchError(o))};return e.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),s(),!0):(this.spawnLog(t,r).catch(o=>{let a=o.code;this._logger.info("Cannot run installer: error code: ".concat(a,', error message: "').concat(o.message,'", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT')),a==="UNKNOWN"||a==="EACCES"?s():a==="ENOENT"?require("electron").shell.openPath(t).catch(l=>this.dispatchError(l)):this.dispatchError(o)}),!0)}async differentialDownloadWebPackage(e,t,r,n){if(t.blockMapSize==null)return!0;try{let s={newUrl:new _T.URL(t.path),oldFile:ST.join(this.downloadedUpdateHelper.cacheDir,Eu.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:r,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:n.isUseMultipleRangeRequest,cancellationToken:e.cancellationToken};this.listenerCount(vT.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(vT.DOWNLOAD_PROGRESS,o)),await new IH.FileWithEmbeddedBlockMapDifferentialDownloader(t,this.httpExecutor,s).download()}catch(s){return this._logger.error("Cannot download differentially, fallback to full download: ".concat(s.stack||s)),process.platform==="win32"}return!1}};bu.NsisUpdater=Pm});var CT=A(ae=>{"use strict";var LH=ae&&ae.__createBinding||(Object.create?(function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,r,n)}):(function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]})),xH=ae&&ae.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&LH(e,i,t)};Object.defineProperty(ae,"__esModule",{value:!0});ae.NsisUpdater=ae.MacUpdater=ae.RpmUpdater=ae.PacmanUpdater=ae.DebUpdater=ae.AppImageUpdater=ae.Provider=ae.NoOpLogger=ae.AppUpdater=ae.BaseUpdater=void 0;var OT=Pi(),kH=require("path"),FH=On();Object.defineProperty(ae,"BaseUpdater",{enumerable:!0,get:function(){return FH.BaseUpdater}});var TT=hu();Object.defineProperty(ae,"AppUpdater",{enumerable:!0,get:function(){return TT.AppUpdater}});Object.defineProperty(ae,"NoOpLogger",{enumerable:!0,get:function(){return TT.NoOpLogger}});var $H=Lt();Object.defineProperty(ae,"Provider",{enumerable:!0,get:function(){return $H.Provider}});var qH=Em();Object.defineProperty(ae,"AppImageUpdater",{enumerable:!0,get:function(){return qH.AppImageUpdater}});var MH=Sm();Object.defineProperty(ae,"DebUpdater",{enumerable:!0,get:function(){return MH.DebUpdater}});var UH=_m();Object.defineProperty(ae,"PacmanUpdater",{enumerable:!0,get:function(){return UH.PacmanUpdater}});var BH=Tm();Object.defineProperty(ae,"RpmUpdater",{enumerable:!0,get:function(){return BH.RpmUpdater}});var jH=Im();Object.defineProperty(ae,"MacUpdater",{enumerable:!0,get:function(){return jH.MacUpdater}});var HH=Lm();Object.defineProperty(ae,"NsisUpdater",{enumerable:!0,get:function(){return HH.NsisUpdater}});xH(Or(),ae);var $i;function WH(){if(process.platform==="win32")$i=new(Lm()).NsisUpdater;else if(process.platform==="darwin")$i=new(Im()).MacUpdater;else{$i=new(Em()).AppImageUpdater;try{let i=kH.join(process.resourcesPath,"package-type");if(!(0,OT.existsSync)(i))return $i;console.info("Checking for beta autoupdate feature for deb/rpm distributions");let e=(0,OT.readFileSync)(i).toString().trim();switch(console.info("Found package-type:",e),e){case"deb":$i=new(Sm()).DebUpdater;break;case"rpm":$i=new(Tm()).RpmUpdater;break;case"pacman":$i=new(_m()).PacmanUpdater;break;default:break}}catch(i){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",i.message)}}return $i}Object.defineProperty(ae,"autoUpdater",{enumerable:!0,get:()=>$i||WH()})});var LT=A((B4,PT)=>{var q={child:require("child_process"),crypto:require("crypto"),fs:require("fs"),os:require("os"),path:require("path"),process,util:require("util")};function GH(i,e){var t=q.process.platform;if(t==="darwin")return KH(i,e);if(t==="linux")return zH(i,e);if(t==="win32")return iW(i,e);e(new Error("Platform not yet supported."))}function Yt(i){if(typeof i!="string")throw new Error("Expected a string.");return i.replace(/"/g,'\\"')}function VH(){if(arguments.length<1||arguments.length>3)throw new Error("Wrong number of arguments.");var i=arguments[0],e={},t=function(){};if(typeof i!="string")throw new Error("Command should be a string.");if(arguments.length===2)if(q.util.isObject(arguments[1]))e=arguments[1];else if(q.util.isFunction(arguments[1]))t=arguments[1];else throw new Error("Expected options or callback.");else if(arguments.length===3){if(q.util.isObject(arguments[1]))e=arguments[1];else throw new Error("Expected options to be an object.");if(q.util.isFunction(arguments[2]))t=arguments[2];else throw new Error("Expected callback to be a function.")}if(/^sudo/i.test(i))return t(new Error('Command should not be prefixed with "sudo".'));if(typeof e.name>"u"){var r=q.process.title;if(NT(r))e.name=r;else return t(new Error("process.title cannot be used as a valid name."))}else if(!NT(e.name)){var n="";return n+="options.name must be alphanumeric only ",n+="(spaces are allowed) and <= 70 characters.",t(new Error(n))}if(typeof e.icns<"u"){if(typeof e.icns!="string")return t(new Error("options.icns must be a string if provided."));if(e.icns.trim().length===0)return t(new Error("options.icns must not be empty if provided."))}if(typeof e.env<"u"){if(typeof e.env!="object")return t(new Error("options.env must be an object if provided."));if(Object.keys(e.env).length===0)return t(new Error("options.env must not be empty if provided."));for(var s in e.env){var o=e.env[s];if(typeof s!="string"||typeof o!="string")return t(new Error("options.env environment variables must be strings."));if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(s))return t(new Error("options.env has an invalid environment variable name: "+JSON.stringify(s)));if(/[\r\n]/.test(o))return t(new Error("options.env has an invalid environment variable value: "+JSON.stringify(o)))}}var a=q.process.platform;if(a!=="darwin"&&a!=="linux"&&a!=="win32")return t(new Error("Platform not yet supported."));var l={command:i,options:e,uuid:void 0,path:void 0};GH(l,t)}function zH(i,e){YH(i,function(t,r){if(t)return e(t);var n=[];n.push('cd "'+Yt(q.process.cwd())+'";');for(var s in i.options.env){var o=i.options.env[s];n.push("export "+s+'="'+Yt(o)+'";')}n.push('"'+Yt(r)+'"'),/kdesudo/i.test(r)?(n.push("--comment",'"'+i.options.name+' wants to make changes. Enter your password to allow this."'),n.push("-d"),n.push("--")):/pkexec/i.test(r)&&n.push("--disable-internal-agent");var a="SUDOPROMPT\n";n.push('/bin/bash -c "echo '+Yt(a.trim())+"; "+Yt(i.command)+'"'),n=n.join(" "),q.child.exec(n,{encoding:"utf-8",maxBuffer:cW},function(l,c,u){var f=c&&c.slice(0,a.length)===a;f&&(c=c.slice(a.length)),l&&!f&&(/No authentication agent found/.test(u)?l.message=lW:l.message=Su),e(l,c,u)})})}function YH(i,e){var t=0,r=["/usr/bin/kdesudo","/usr/bin/pkexec"];function n(){if(t===r.length)return e(new Error("Unable to find pkexec or kdesudo."));var s=r[t++];q.fs.stat(s,function(o){if(o){if(o.code==="ENOTDIR"||o.code==="ENOENT")return n();e(o)}else e(void 0,s)})}n()}function KH(i,e){var t=q.os.tmpdir();if(!t)return e(new Error("os.tmpdir() not defined."));var r=q.process.env.USER;if(!r)return e(new Error("env['USER'] not defined."));RT(i,function(n,s){if(n)return e(n);i.uuid=s,i.path=q.path.join(t,i.uuid,i.options.name+".app");function o(a,l,c){IT(q.path.dirname(i.path),function(u){if(a)return e(a);if(u)return e(u);e(void 0,l,c)})}QH(i,function(a,l,c){if(a)return o(a,l,c);JH(i,function(u){if(u)return o(u);eW(i,function(f,h,d){if(f)return o(f,h,d);XH(i,function(y){if(y)return o(y);ZH(i,function(g,w,S){if(g)return o(g,w,S);tW(i,o)})})})})})})}function QH(i,e){var t=q.path.dirname(i.path);q.fs.mkdir(t,function(r){if(r)return e(r);var n=q.path.join(t,"sudo-prompt-applet.zip");q.fs.writeFile(n,aW,"base64",function(s){if(s)return e(s);var o=[];o.push("/usr/bin/unzip"),o.push("-o"),o.push('"'+Yt(n)+'"'),o.push('-d "'+Yt(i.path)+'"'),o=o.join(" "),q.child.exec(o,{encoding:"utf-8"},e)})})}function XH(i,e){var t=q.path.join(i.path,"Contents","MacOS","sudo-prompt-command"),r=[];r.push('cd "'+Yt(q.process.cwd())+'"');for(var n in i.options.env){var s=i.options.env[n];r.push("export "+n+'="'+Yt(s)+'"')}r.push(i.command),r=r.join("\n"),q.fs.writeFile(t,r,"utf-8",e)}function JH(i,e){if(!i.options.icns)return e();q.fs.readFile(i.options.icns,function(t,r){if(t)return e(t);var n=q.path.join(i.path,"Contents","Resources","applet.icns");q.fs.writeFile(n,r,e)})}function ZH(i,e){var t=q.path.join(i.path,"Contents","MacOS","applet"),r={cwd:q.path.dirname(t),encoding:"utf-8"};q.child.exec("./"+q.path.basename(t),r,e)}function eW(i,e){var t=q.path.join(i.path,"Contents","Info.plist"),r=Yt(t),n=Yt("CFBundleName"),s=i.options.name+" Password Prompt";if(/'/.test(s))return e(new Error("Value should not contain single quotes."));var o=[];o.push("/usr/bin/defaults"),o.push("write"),o.push('"'+r+'"'),o.push('"'+n+'"'),o.push("'"+s+"'"),o=o.join(" "),q.child.exec(o,{encoding:"utf-8"},e)}function tW(i,e){var t=q.path.join(i.path,"Contents","MacOS");q.fs.readFile(q.path.join(t,"code"),"utf-8",function(r,n){if(r){if(r.code==="ENOENT")return e(new Error(Su));e(r)}else q.fs.readFile(q.path.join(t,"stdout"),"utf-8",function(s,o){if(s)return e(s);q.fs.readFile(q.path.join(t,"stderr"),"utf-8",function(a,l){if(a)return e(a);n=parseInt(n.trim(),10),n===0?e(void 0,o,l):(a=new Error("Command failed: "+i.command+"\n"+l),a.code=n,e(a,o,l))})})})}function IT(i,e){if(typeof i!="string"||!i.trim())return e(new Error("Argument path not defined."));var t=[];if(q.process.platform==="win32"){if(/"/.test(i))return e(new Error("Argument path cannot contain double-quotes."));t.push('rmdir /s /q "'+i+'"')}else t.push("/bin/rm"),t.push("-rf"),t.push('"'+Yt(q.path.normalize(i))+'"');t=t.join(" "),q.child.exec(t,{encoding:"utf-8"},e)}function RT(i,e){q.crypto.randomBytes(256,function(t,r){t&&(r=Date.now()+""+Math.random());var n=q.crypto.createHash("SHA256");n.update("sudo-prompt-3"),n.update(i.options.name),n.update(i.command),n.update(r);var s=n.digest("hex").slice(-32);if(!s||typeof s!="string"||s.length!==32)return e(new Error("Expected a valid UUID."));e(void 0,s)})}function NT(i){return!(!/^[a-z0-9 ]+$/i.test(i)||i.trim().length===0||i.length>70)}function iW(i,e){var t=q.os.tmpdir();if(!t)return e(new Error("os.tmpdir() not defined."));RT(i,function(r,n){if(r)return e(r);if(i.uuid=n,i.path=q.path.join(t,i.uuid),/"/.test(i.path))return e(new Error("instance.path cannot contain double-quotes."));i.pathElevate=q.path.join(i.path,"elevate.vbs"),i.pathExecute=q.path.join(i.path,"execute.bat"),i.pathCommand=q.path.join(i.path,"command.bat"),i.pathStdout=q.path.join(i.path,"stdout"),i.pathStderr=q.path.join(i.path,"stderr"),i.pathStatus=q.path.join(i.path,"status"),q.fs.mkdir(i.path,function(s){if(s)return e(s);function o(a,l,c){IT(i.path,function(u){if(a)return e(a);if(u)return e(u);e(void 0,l,c)})}oW(i,function(a){if(a)return o(a);sW(i,function(l){if(l)return o(l);rW(i,function(c,u,f){if(c)return o(c,u,f);DT(i,function(h){if(h)return o(h);nW(i,o)})})})})})})}function rW(i,e){var t=[];t.push("powershell.exe"),t.push("Start-Process"),t.push("-FilePath"),t.push("\"'"+i.pathExecute.replace(/'/g,"`'")+"'\""),t.push("-WindowStyle hidden"),t.push("-Verb runAs"),t=t.join(" ");var r=q.child.exec(t,{encoding:"utf-8"},function(n,s,o){if(n)return e(new Error(Su),s,o);e()});r.stdin.end()}function nW(i,e){q.fs.readFile(i.pathStatus,"utf-8",function(t,r){if(t)return e(t);q.fs.readFile(i.pathStdout,"utf-8",function(n,s){if(n)return e(n);q.fs.readFile(i.pathStderr,"utf-8",function(o,a){if(o)return e(o);r=parseInt(r.trim(),10),r===0?e(void 0,s,a):(o=new Error("Command failed: "+i.command+"\r\n"+a),o.code=r,e(o,s,a))})})})}function DT(i,e){q.fs.stat(i.pathStatus,function(t,r){t&&t.code==="ENOENT"||r.size<2?setTimeout(function(){q.fs.stat(i.pathStdout,function(n){if(n)return e(new Error(Su));DT(i,e)})},1e3):t?e(t):e()})}function sW(i,e){var t=q.process.cwd();if(/"/.test(t))return e(new Error("process.cwd() cannot contain double-quotes."));var r=[];r.push("@echo off"),r.push("chcp 65001>nul"),r.push('cd /d "'+t+'"');for(var n in i.options.env){var s=i.options.env[n];r.push("set "+n+"="+s.replace(/([<>\\|&^])/g,"^$1"))}r.push(i.command),r=r.join("\r\n"),q.fs.writeFile(i.pathCommand,r,"utf-8",e)}function oW(i,e){var t=[];t.push("@echo off"),t.push('call "'+i.pathCommand+'" > "'+i.pathStdout+'" 2> "'+i.pathStderr+'"'),t.push('(echo %ERRORLEVEL%) > "'+i.pathStatus+'"'),t=t.join("\r\n"),q.fs.writeFile(i.pathExecute,t,"utf-8",e)}PT.exports.exec=VH;var aW="UEsDBAoAAAAAAO1YcEcAAAAAAAAAAAAAAAAJABwAQ29udGVudHMvVVQJAAPNnElWLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACACgeXBHlHaGqKEBAAC+AwAAEwAcAENvbnRlbnRzL0luZm8ucGxpc3RVVAkAA1zWSVYtkRBXdXgLAAEE9QEAAAQUAAAAfZNRb5swFIWfl1/BeA9OpSmqJkqVBCJFop1VyKQ9Ta59S6wa27NNCfv1M0naJWTsEXO+c8+9vo7v97UI3sBYruRdeBPNwgAkVYzL6i7cluvpbXifTOLP6bdV+QNngRbcugBvl/lmFYRThBZaC0AoLdMA55uiDLwHQtljGIQ75/RXhNq2jUiviqiqe6FF2CgNxnW5N5t6IGKOhb7M0f0ijj9lnLpk8il+hS5ZrZeNZAIWQqj2ge+B5YoSwX8T5xEbo17ktc40gIZQCm8glK5BuieovP5Dbp3xHSeZrHyCXYxO3wM+2wNtHHkWMAQP/bkxbkOVXPMxKuK0Dz6CMh+Wv3AwQ9gPM7INU1NtVK3Ha8sXlfoB+m6J6b4fRzv0mkezMf6R1Fe5MbG2VYYF+L+lMaGvpIKy01cOC4zzMazYKeNOQYuDYkjfjMcteCWJa8w/Zi2ugubFA5e8buqisw7qU81ltzB0xx3QC5/TFh7J/e385/zL+7+/wWbR/LwIOl/dvHiCXw03YFfEPJ9dwsWu5sV2kwnod3QoeLeL0eGdJJM/UEsDBAoAAAAAAHSBjkgAAAAAAAAAAAAAAAAPABwAQ29udGVudHMvTWFjT1MvVVQJAAMbpQ9XLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACABVHBdH7Dk4KTIIAADIYQAAFQAcAENvbnRlbnRzL01hY09TL2FwcGxldFVUCQADMiPZVVOlD1d1eAsAAQT1AQAABBQAAADtnG9sHEcVwGfti7M1/rONLNVtXHqpzsipis+pHOSWFOzEm25at3XrJI2ozbK+W/suuds79vaSuCKSpaOIxRy1+NSPRPAhlWj7AVRaQCWpTRz+CEo+RSKCCho4K67kVhUyAeV4b3fWt17fXZqKFgHvp8zO3/dmdmfPmtl5L7+8/uPXGWMNELZCaGRMgmjHIlxaBCibdcoGsewCljGCIAiCIAiCIAiCIP7r+M21d67zjb/zEaAdwr1bGHuWMQH2/2wAgqqODj0kf0F+8nGfoFRbJ8p9U0C5g/KRgwEZqZLGfrfwwJx+LP2kVWkelD9zJ2NfBr1nWt2xrhNisxWZ3Ex6MpNSc1Z+soqOO+5i7JMYt7vj9BC5jiZXBwirCT2V1c0qOgZAxwMYt9cbRyxnmUljusa9mKBjGON2tgG/PlXNGyeSRlxNGlOZKjpeBR0KxsFx+MB7VJy5GB46OOSrCLPKfEjrH3/gFry+4zOpuH8sm+VF5srW6ltVjZQ3HVnL3KRDDLsflMSADpyDyjuR0urp6AAdHRgHdOD9iOs6Ypl0OmPUupeecOW19OsQAmn3tzBy4LFH5OED3jz0MbYouM8D460BOdTXCaEF6tsgLkF8GeJPQBj16Rb4PTf5xl2NH4J8a5Vy1N3F3OcZzefMaCo5GeVTuJ2P4cUf/aH5qbbP73/utpfeevdbLzwfYfy+Q80woGan/1E+ljo/703g77IaOJY479t5rqFLDag9OjaTs/R0dCQ5aWrmTHS/qaX1ExnzWC66L2PqY7p5PBnTc71TXnn0sG7mkhkjFx3a0IL30e/rQxB+EXL68J4BBLe73r298DySk5tlGPtJY1BmOhZTc727PBH2Ke+ZhF35nTyP80oQBEEQBPFRcJTZVwpvrxZWpLmJkN0VKT4q2iORUGFBOPfnBuFX9nhELOG67f1D9pWxpw4XVrrmTklz+ZY5Wfwurm/t3ffi9cE+uM41vYbbj2fP5kNXt9sXiopwVRj6xhPlr160mttfuVi4Fs2vXv2rfc5u7UeZfxQ+y4pPh/JrpyUUBjmrofzmadGXKf0eui7KK/ZwJLQUiuRAe+mLUFQ+tFKUV3npd7AU9ytz8iqIiXYoUnoBsqdxDbXk3CXcRov9lYhoW5EQjBxb4NoSY9iQsvn5+QSuusrduAybL3eHIIIbLqyIS9CHlY3loB8rldVKuLfyOsE1+a6zhUVxYsFp3Amqz8tr7Lz8dza1JF8TmC3/syivYVtcfxcWOycWQDvuLcrdnc61y7mGnWsErgmsXDbK5TKkscnypJvGhsuH3TQ2X37YTaPQ8ucw7W6t1LR2TFfjekqb0SGTiedTOmz0klZSSyWf0U01pqVSufXGmThsjs20OpU3Yrjuxbnu4u+GP8b1LO6PcX2L4Q6+v8Q07u9aQFLy71Ckt54TIfjfNdzfDkMYhTAOIXHXh39vCYIgCIIgCIIgCIL4z3Nm+84/Ci1Nn8b0ryHsgbBX1rbgOXD7LZJzNtrC0/gFqYOn8csQ/GONguQchPXzcvy+9CBzvk84HxkO+tJH3bRz5Fb0pb/nS3/fl/6BL/2aL43faLzz3Wbmju8W5p6pttaoR9THjgyZ0zEeH2eqqmbNzLShpXVIpxOqflKP5S1dTehaXDeZqhvHk2bGYOo+LZXal0lnM4ZuWMPJXFazYgmmPp7VjWF9SsunrPVa1HpMn0lPm2r8hGZO3aea+nQyZ+mmmtNjFp5i4oG0lTChE+eDj2pm8lbSgDFoln4yCRp00zQyEDmZtBZLbGxnanHzgWh092d29e/uv+/f+DIQBEEQBEEQBEEQ/7P81rX/FxoZm/Xs/5UmtP8PO/W3M9fGvKoPAEfYXLQJ1HOpmk+AJx80OOb5m/URGG9z9c378rVs9F15tPXP1dS3wvVtC+Q9/H4DFX21fQcY9zvo9eXrj6++D0Af1zfqy9eyx3f16QnVMayufr+zXN+sL99YRx/O69er+RdIgXkNxJv9DfBTDIxLPa6Zudr6enz5euO6ke9Bj7TRzr0noK+JbczfyA9hgOvr9OX98t57XNFX3ydhlOsL+2T8+oK/ucrvNOCfEHbbXhAqeebLB/0V7oYp7+Pt8PsZWnl1+urRpAn7SUCcYBX/hkth95kd2cFYllX3bxB4+xCrzcCO6v4PbXzo1fwbEM/H4ds/f/nCgZH+8k+j0vNPv7Jlz7qPQ1PFx+FVPoZ76ozj42K87YP9/cT7xuf9UfpSeP0MsJvzp0A8/4g3w+78ef4R+F4QBEEQBPH/w1Gm2FeUwturytwpUSnmJfta4Q3h3J8aFeE9xf7d1ZBSOCcqhftZ/m+YKuG6wV4qaQzdGED0Z2jJ/zpa9ZcegjIF7fkVaIBrt11nJxYOOepXpPPyKjsvvytOLcnvCWxJfh87V+xTa0rx1Kpj0a8UFqWJhXL3fgHt9xXn+rCz7Bop3rkTEkNj5e7bIZ7HNRZb/ku5XE6g58HyZUzdj6mLjh1/Pbt7XMt5dvfvtLl1Fbv7BtbhrtyEPW6V038H1yE88yQTTkqC1LJVnIeaCNe7dr3sEPEe6lCb9LWGfa3efvNG8pe5fF8NeW8g3n7jCI+/xOOEVH19KvF9oudHH2n/YOtYgiAIgiAIgiAIgiA+fm69mx3aO8bYtkHn/xlwDq8nkwaavz9h9swzc+DWwRrm71A5CJVVjeChTtk26Fqwu0fxQjUL+9vqHVV/KC53OUd+bJxVfBkw7/gzCO5pr3dOK/g+WUQDeZlV/A2QRwJ5THjn1/xcd9BfhlT1KbgpVwLn+W2amGr2//8CUEsDBBQAAAAIAAVHj0ga7FYjfQEAAKoCAAAhABwAQ29udGVudHMvTWFjT1Mvc3Vkby1wcm9tcHQtc2NyaXB0VVQJAAOJkBBXipAQV3V4CwABBPUBAAAEFAAAAI1SO08cMRDu91cMHIKGxUB5xSGEUqTlFKWMvPYca+EXnjGXy6/PeNcg0qVay+PvObs5U5OLatI0DxvYIwNVm4BdQGIdMhxSkauJ8K1i7FOjvSdwB2A+/WJnXpEJdEGwjvTk0W6HhTW8WldgzKDedVF2Ug2tLn7svz3DDpTFdxWr93C/u7wbVKWyoDhVM/8XZAOPOXvcm+IyXxGcizeaUca0XJ1D0CfQnlEysE2VwbuII0br4gvdCMF37m9IoC39+oxTO2EpS8oZJdtRS0aIKY5/sCQoyLVEMMki6Ghl0BGN9SeuICkPIctXDHDDSB9oGEQi1yZWUAda8EZnIcR/eIOOVao+9TrbkpYFjLmkkHk0KYSGvdt12/e71cP6Hs2c4OJBemtsYusplVX+GLHQ7DKkQ098/ZF38dLEpRCeNUMlMW90BIseeQkWtuu2qKmIyDHCuqFuo1N11Ud/1Cf6CHb7Sfxld2ATklQoUGEDActfZ5326WU74G/HcDv8BVBLAwQKAAAAAADtWHBHqiAGewgAAAAIAAAAEAAcAENvbnRlbnRzL1BrZ0luZm9VVAkAA82cSVYqkRBXdXgLAAEE9QEAAAQUAAAAQVBQTGFwbHRQSwMECgAAAAAAm3lwRwAAAAAAAAAAAAAAABMAHABDb250ZW50cy9SZXNvdXJjZXMvVVQJAANW1klWLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACACAeXBHfrnysfYGAAAf3AAAHgAcAENvbnRlbnRzL1Jlc291cmNlcy9hcHBsZXQuaWNuc1VUCQADH9ZJVnGlD1d1eAsAAQT1AQAABBQAAADt3Xk81Hkcx/Hvb5yVo5bGsVlKbcpRRqFlGZGS5JikRBIdI0OZttMZloqiYwrVjD1UqJaUokTRubG72bZVjqR1VZNjp2XEGo9H+9gt+9h/9tHx8H7N4/fw5MHjYeaPz+P7+P7x/bL9griEPNBm+001J0S+ZbvL/NmKwzWHE0IUHebYuRFCEckjL9v/xSvk2EpCpBXZtrYuDra2Oi4hwSvZgSsIMU9MdPdePcZd1aqQu0p3fDkrcFrs+mPWihMU9y6clp5XEFFdbRrEczCtGtfkL3pWfvBGublJ4ct051kuocYtaaqll/IjdfR+V75vlTdl//AJVZU6elZ5f0S7NO3MaE2xMElhF+TUrHgW2nFYeGTrs/OrhDJN5zMX8ZJVKXrqSUM1Rj03bnf85/pJMXECNdl0D1ctfe/j82imziM2nllSa3t5q8+vP1f38k/k22uN1lmnvfz0b8dGxO+mnh91v7WB2tKdrG3d4vmJaHlTvjGzdMqWcw/9frnCtQpPZK9sMKi/Ey/jzgqIPzBy9/dlf9griI2/u+sjcApozWx6/NXytC+qBTlrhb69fE7J6tgOzpWjFSl8qxihr5dYf/qExoeupY6Ze/j2PfL1azhhZ8fU3eelJY+ylk16UJN6KmOU0M4r+75cZhH/mxNndowNb4wx7TCoN4yvMGu8ySq5l5W5t+xQyYbS/Ome7e0W0sXbC5aktl0LEXNYR9obH7dMT721dbNdT/eFzXNEYSH8GU+bQ5s6YniGcj3fHtgXPbo0Oj4i3d5G1Fjfm/Ng7kgpjQDNxw4RRnu+Vloy5ZE3J6OpwlFBzaxS25He2h3lJuizO70zJPLUYtks14RE5yrD8y2tXa5l5Wqh/NBY06yoiCLF08Nk9A5Ojbs43GmR1Ch/PaZsLf3e6uPRSrIM1ROqGjt80leqfdxYbNn+WV7K7ZKiy/t6r1/3ie46V5432T/Oahs9V7NnVzb9zoq2rFgvPxXrcAMzmvWnGjof/RpdsZThIEpex6DGbd5h6STaOyZXxV/YfW9u4KyllmZ3X15IMHHLSJtVPSOvULCsz2TyPC/WL9kGSme/1L01SSzjfbHnqk+OV7OBmevZeo3DBR7lXT5drT0MkX5PwDd1EQ0ebfkh1zy/L8ydd+VJ4CLuRndNjuwj+vMfU8q2l2l1rGtr8FC2D+fdSGk81eltuTjYSMk++4BMd0DXQo35iXbZndGdcXkGFyeG6b28evF22M2w22HlYSXetGSLW4cfFT00WqvN9bkqCujQ9KzdSt+snr+qmbcme+5Y3cDRn9BDLps+dPVltE9UkPeb6XovineiVUznTznyuZaSn/ZvR8VeRUYLqe3iHFqnU6+7+4LmtfsmaS0MdjIvslFJGG/rn7DPdMGLcx4d6eP2Oz92Y49kWbBUjudU2ijHnc7YIODQxD1aPx8PynVr+cmvJoy2+M5nQa2Kt0dvdPxp73LNU6aTeaktTfHH1L+8Pm/XalZcFcfzYxlhTefuzjRGobLKEqPZh8QKxUXWbU/ERvW78ghvTGTUNd0g9YqbcjUy5h0xVbn3S7SS54SOqKt88UR0qZuxKfxlZfODUm52o2HkGTOLw5dqhevvWjH7ssiqxAhKwA91d1nWG9w/GJIc7GwWbKKe/mAsGRqXBb87P10jH8/0LY6kpGQV1KcuAwAAeCt4LiVFWRJKs4DJ6p9GxGHWfLuTM5dt61/pzCCE7vLmSodGJM/ASqdzU2U3VjpY6WClg5XOICudUaI3VjocuWCsdAAAAAAAAAAAAAAAAD5o1Gmr054TSoqWxPvnfrLxVEIc29/cT5YmkmdgPzlCSz8a+8nYT8Z+MvaTB9lPZpJX+8lRktFyRdDF0m6IdcF2MgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC8ddD8G5oJkUuQnAXwnvxLAAAAADDkEFURRckVE6rIv+Tb1078MiZEetubJ34RHckzcOIXd8uWTpz4hRO/cOIXTvwa5MQvoidZ5S8a9h8nfl1QVhipQ6jyyWeuvTaBGP3D5fwgE4gpeQYmUCZ7XQ0mECYQJhAm0GATyOfVmYOU4sAdNi+cOUpm/9cdNv2Di8kkFN3mYOtrg8sE14xicGFwYXDhmlEAAD5w/Os1o8bTcM0oVjpY6WClg2tGAQAAAAAAAAAAAAAAgL/wb9eMBpow+r817yN/fwnJf33P5g78nWofEZNXD3u95GdSkh3o135/aL2i3vl/gHf/7t59oDlnDSHS8gQhNGQL8uWs6P+iwPYLDuIOzARqyM+E9QOfA3PIfw4IIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhND70J9QSwMEFAAAAAgA7VhwR/dYplZAAAAAagEAAB4AHABDb250ZW50cy9SZXNvdXJjZXMvYXBwbGV0LnJzcmNVVAkAA82cSVZTpQ9XdXgLAAEE9QEAAAQUAAAAY2BgZGBgYFQBEiDsxjDygJQDPlkmEIEaRpJAQg8kLAMML8bi5OIqIFuouKA4A0jLMTD8/w+S5AdrB7PlBIAEAFBLAwQKAAAAAADtWHBHAAAAAAAAAAAAAAAAJAAcAENvbnRlbnRzL1Jlc291cmNlcy9kZXNjcmlwdGlvbi5ydGZkL1VUCQADzZxJVi2REFd1eAsAAQT1AQAABBQAAABQSwMEFAAAAAgA7VhwRzPLNU9TAAAAZgAAACsAHABDb250ZW50cy9SZXNvdXJjZXMvZGVzY3JpcHRpb24ucnRmZC9UWFQucnRmVVQJAAPNnElWU6UPV3V4CwABBPUBAAAEFAAAACWJOw6AIBAFe08DCBVX2QbWhZgQ1vCpCHcXtHkzkzegtCDB5Xp/g0+UyihARnb70kL/UbvffYpjQODcmk9zKXListxCoUsZA7EQ5S0+dVq085gvUEsDBAoAAAAAAIeBjkgAAAAAAAAAAAAAAAAbABwAQ29udGVudHMvUmVzb3VyY2VzL1NjcmlwdHMvVVQJAAM9pQ9XLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACAAJgI5ICl5liTUBAADMAQAAJAAcAENvbnRlbnRzL1Jlc291cmNlcy9TY3JpcHRzL21haW4uc2NwdFVUCQADcaIPV1OlD1d1eAsAAQT1AQAABBQAAAB9UMtOAkEQrNldd9dhH3Dz6NGYiPIJHjTxLCZeF9iDcXEJC0RvfoI/4sEfIvoHPEQEhbIHvOok01U16emu7vOkaF2dXu7XqrUTcyMATkxCwYKthCAUbmciAQ8O11yFcGBfbF/4jR24WmCvWjwUeXqfNutn13XyEeYYHkqKam+kghdJGfUCvwIfB6jiGAX6aCHHETroCrYFe6IKNEXfGOXChc0v7HKpBRzdSFrtELvbumKVC80F/FIjzwe9bj91uZRuXJuwAiLjNi7DlsxPaJSUAMrCFOeac3GfpINennQ6d/0sA4z7JxzKiVCCV+YHAs74LuuIONUi//4RIoC63czrIbYQS3PFicWJcTMTv1JHmocmROLJ45gjzfHvXJqjf7ZZ4RT+61uaBbDipGh2ZanBcjh8/gFQSwECHgMKAAAAAADtWHBHAAAAAAAAAAAAAAAACQAYAAAAAAAAABAA7UEAAAAAQ29udGVudHMvVVQFAAPNnElWdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAoHlwR5R2hqihAQAAvgMAABMAGAAAAAAAAQAAAKSBQwAAAENvbnRlbnRzL0luZm8ucGxpc3RVVAUAA1zWSVZ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAAB0gY5IAAAAAAAAAAAAAAAADwAYAAAAAAAAABAA7UExAgAAQ29udGVudHMvTWFjT1MvVVQFAAMbpQ9XdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAVRwXR+w5OCkyCAAAyGEAABUAGAAAAAAAAAAAAO2BegIAAENvbnRlbnRzL01hY09TL2FwcGxldFVUBQADMiPZVXV4CwABBPUBAAAEFAAAAFBLAQIeAxQAAAAIAAVHj0ga7FYjfQEAAKoCAAAhABgAAAAAAAEAAADtgfsKAABDb250ZW50cy9NYWNPUy9zdWRvLXByb21wdC1zY3JpcHRVVAUAA4mQEFd1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAADtWHBHqiAGewgAAAAIAAAAEAAYAAAAAAABAAAApIHTDAAAQ29udGVudHMvUGtnSW5mb1VUBQADzZxJVnV4CwABBPUBAAAEFAAAAFBLAQIeAwoAAAAAAJt5cEcAAAAAAAAAAAAAAAATABgAAAAAAAAAEADtQSUNAABDb250ZW50cy9SZXNvdXJjZXMvVVQFAANW1klWdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAgHlwR3658rH2BgAAH9wAAB4AGAAAAAAAAAAAAKSBcg0AAENvbnRlbnRzL1Jlc291cmNlcy9hcHBsZXQuaWNuc1VUBQADH9ZJVnV4CwABBPUBAAAEFAAAAFBLAQIeAxQAAAAIAO1YcEf3WKZWQAAAAGoBAAAeABgAAAAAAAAAAACkgcAUAABDb250ZW50cy9SZXNvdXJjZXMvYXBwbGV0LnJzcmNVVAUAA82cSVZ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAADtWHBHAAAAAAAAAAAAAAAAJAAYAAAAAAAAABAA7UFYFQAAQ29udGVudHMvUmVzb3VyY2VzL2Rlc2NyaXB0aW9uLnJ0ZmQvVVQFAAPNnElWdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgA7VhwRzPLNU9TAAAAZgAAACsAGAAAAAAAAQAAAKSBthUAAENvbnRlbnRzL1Jlc291cmNlcy9kZXNjcmlwdGlvbi5ydGZkL1RYVC5ydGZVVAUAA82cSVZ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAACHgY5IAAAAAAAAAAAAAAAAGwAYAAAAAAAAABAA7UFuFgAAQ29udGVudHMvUmVzb3VyY2VzL1NjcmlwdHMvVVQFAAM9pQ9XdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgACYCOSApeZYk1AQAAzAEAACQAGAAAAAAAAAAAAKSBwxYAAENvbnRlbnRzL1Jlc291cmNlcy9TY3JpcHRzL21haW4uc2NwdFVUBQADcaIPV3V4CwABBPUBAAAEFAAAAFBLBQYAAAAADQANANwEAABWGAAAAAA=",Su="User did not grant permission.",lW="No polkit authentication agent found.",cW=134217728});var GT=A((H4,WT)=>{var{autoUpdater:Ms}=CT(),{app:xm,session:xT}=require("electron"),uW=LT(),kT=require("path"),vu=require("fs"),FT=jt(),fW=hi(),$T=is(),hW=ko(),dW=(i,e)=>{let t="".concat(typeof i=="string"?i:"0").split(".").map(Number),r="".concat(typeof e=="string"?e:"0").split(".").map(Number),n=Math.max(t.length,r.length);for(let s=0;s<n;s++){let o=t[s]||0,a=r[s]||0;if(o>a)return!0;if(o<a)return!1}return!1},Tn,La,Mi,Cn,xa,We,Tr,me,qi,_u,MT,UT,BT,jT,HT,qT;WT.exports=(qT=class extends fW{constructor(t){super(t);L(this,me);L(this,Tn,!0);L(this,La,!1);L(this,Mi,!1);L(this,Cn,!1);L(this,xa,!1);L(this,We,{version:null,filePath:null,progress:0});L(this,Tr,null);_(this,"check",()=>{if(!p(this,Tn)||p(this,Mi))return!1;V(this,Mi,!0);try{V(this,We,{version:null,filePath:null,progress:0}),j(this,me,qi).call(this),$T.LINUX===process.platform?j(this,me,MT).call(this):j(this,me,UT).call(this)}catch{}return!0});_(this,"install",async()=>{if(!p(this,Tn)||typeof p(this,We).version!="string"||typeof p(this,We).filePath!="string"||p(this,Cn))return!1;V(this,Cn,!0);try{if(typeof p(this,We).filePath!="string")throw new Error("Nothing to install");j(this,me,_u).call(this),$T.LINUX===process.platform?await j(this,me,BT).call(this):j(this,me,jT).call(this),j(this,me,_u).call(this,!1)}catch(t){j(this,me,_u).call(this,!1,"".concat(t.message??t))}return!0});V(this,Tn,!0),this._register("updater"),V(this,Tr,kT.join(hW.getPathCache(),"pending"))}async start(){if(!p(this,La)&&(V(this,La,!0),!!p(this,Tn)))try{vu.existsSync(p(this,Tr))&&vu.rmSync(p(this,Tr),{recursive:!0,force:!0}),vu.mkdirSync(p(this,Tr),{recursive:!0})}catch{}}isChecking(){return p(this,Mi)}isInstalling(){return p(this,Cn)}},Tn=new WeakMap,La=new WeakMap,Mi=new WeakMap,Cn=new WeakMap,xa=new WeakMap,We=new WeakMap,Tr=new WeakMap,me=new WeakSet,qi=function(){if(typeof this._oglama.main?.view.webContents?.send=="function"){let t=["ipc:updater:check",[p(this,We)],{type:"req"}];this._oglama.main?.view.webContents?.send(FT.WINDOW_MAIN,t)}},_u=function(t=!0,r=null){if(t||V(this,Cn,!1),typeof this._oglama.main?.view.webContents?.send=="function"){let n=["ipc:updater:install",[{working:t,error:r}],{type:"req"}];this._oglama.main?.view.webContents?.send(FT.WINDOW_MAIN,n)}},MT=async function(){try{let t=await(await fetch("https://api.github.com/repos/oglama/oglama/releases/latest")).json(),r=(Array.isArray(t?.assets)?t.assets:[]).find(s=>typeof s?.name=="string"&&s.name.endsWith(".deb")&&typeof s.browser_download_url=="string");if(!r)throw new Error("No assets released");let n=r.browser_download_url.replace(/^.*?\-(\d+\.\d+\.\d+)\.deb$/,"$1");if(!dW(n,xm.getVersion()))throw new Error("No update available");p(this,We).version=n,j(this,me,qi).call(this),p(this,We).filePath=await j(this,me,HT).call(this,r.browser_download_url,r.name)}catch{}j(this,me,qi).call(this),V(this,Mi,!1)},UT=async function(){p(this,xa)||(V(this,xa,!0),Ms.on("update-not-available",t=>{j(this,me,qi).call(this),V(this,Mi,!1)}),Ms.on("update-available",t=>{p(this,We).version=t?.version??null,j(this,me,qi).call(this)}),Ms.on("download-progress",t=>{p(this,We).progress=parseInt(t.percent,10),j(this,me,qi).call(this)}),Ms.on("update-downloaded",t=>{p(this,We).filePath=t.downloadedFile,p(this,We).progress=100,j(this,me,qi).call(this),V(this,Mi,!1)})),Ms.checkForUpdates()},BT=async function(){return new Promise((t,r)=>{let n='"'.concat(p(this,We).filePath.replace(/(["\\$`])/g,"\\$1"),'"');uW.exec("dpkg -i ".concat(n),{name:"Oglama"},s=>{if(s){r(s);return}t(),setTimeout(()=>xm.relaunch(),xm.quit(),250)})})},jT=function(){Ms.quitAndInstall()},HT=async function(t,r){let n=kT.join(p(this,Tr),r);return vu.existsSync(n)?(p(this,We).progress=100,n):new Promise((s,o)=>{let a=(l,c)=>{c.setSavePath(n),c.on("updated",(u,f)=>{f==="progressing"&&(p(this,We).progress=Math.floor(c.getReceivedBytes()/c.getTotalBytes()*100),j(this,me,qi).call(this))}),c.once("done",(u,f)=>{if(xT.defaultSession.removeListener("will-download",a),f==="completed"){s(c.getSavePath());return}o(new Error("Download failed: ".concat(f)))})};xT.defaultSession.once("will-download",a),this._oglama.main?.view.webContents.downloadURL(t)})},qT)});var Q=A(Ge=>{"use strict";var km=Symbol.for("yaml.alias"),VT=Symbol.for("yaml.document"),Ou=Symbol.for("yaml.map"),zT=Symbol.for("yaml.pair"),Fm=Symbol.for("yaml.scalar"),Tu=Symbol.for("yaml.seq"),Ui=Symbol.for("yaml.node.type"),pW=i=>!!i&&typeof i=="object"&&i[Ui]===km,mW=i=>!!i&&typeof i=="object"&&i[Ui]===VT,gW=i=>!!i&&typeof i=="object"&&i[Ui]===Ou,yW=i=>!!i&&typeof i=="object"&&i[Ui]===zT,YT=i=>!!i&&typeof i=="object"&&i[Ui]===Fm,wW=i=>!!i&&typeof i=="object"&&i[Ui]===Tu;function KT(i){if(i&&typeof i=="object")switch(i[Ui]){case Ou:case Tu:return!0}return!1}function AW(i){if(i&&typeof i=="object")switch(i[Ui]){case km:case Ou:case Fm:case Tu:return!0}return!1}var EW=i=>(YT(i)||KT(i))&&!!i.anchor;Ge.ALIAS=km;Ge.DOC=VT;Ge.MAP=Ou;Ge.NODE_TYPE=Ui;Ge.PAIR=zT;Ge.SCALAR=Fm;Ge.SEQ=Tu;Ge.hasAnchor=EW;Ge.isAlias=pW;Ge.isCollection=KT;Ge.isDocument=mW;Ge.isMap=gW;Ge.isNode=AW;Ge.isPair=yW;Ge.isScalar=YT;Ge.isSeq=wW});var ka=A($m=>{"use strict";var De=Q(),bt=Symbol("break visit"),QT=Symbol("skip children"),wi=Symbol("remove node");function Cu(i,e){let t=XT(e);De.isDocument(i)?Us(null,i.contents,t,Object.freeze([i]))===wi&&(i.contents=null):Us(null,i,t,Object.freeze([]))}Cu.BREAK=bt;Cu.SKIP=QT;Cu.REMOVE=wi;function Us(i,e,t,r){let n=JT(i,e,t,r);if(De.isNode(n)||De.isPair(n))return ZT(i,r,n),Us(i,n,t,r);if(typeof n!="symbol"){if(De.isCollection(e)){r=Object.freeze(r.concat(e));for(let s=0;s<e.items.length;++s){let o=Us(s,e.items[s],t,r);if(typeof o=="number")s=o-1;else{if(o===bt)return bt;o===wi&&(e.items.splice(s,1),s-=1)}}}else if(De.isPair(e)){r=Object.freeze(r.concat(e));let s=Us("key",e.key,t,r);if(s===bt)return bt;s===wi&&(e.key=null);let o=Us("value",e.value,t,r);if(o===bt)return bt;o===wi&&(e.value=null)}}return n}async function Nu(i,e){let t=XT(e);De.isDocument(i)?await Bs(null,i.contents,t,Object.freeze([i]))===wi&&(i.contents=null):await Bs(null,i,t,Object.freeze([]))}Nu.BREAK=bt;Nu.SKIP=QT;Nu.REMOVE=wi;async function Bs(i,e,t,r){let n=await JT(i,e,t,r);if(De.isNode(n)||De.isPair(n))return ZT(i,r,n),Bs(i,n,t,r);if(typeof n!="symbol"){if(De.isCollection(e)){r=Object.freeze(r.concat(e));for(let s=0;s<e.items.length;++s){let o=await Bs(s,e.items[s],t,r);if(typeof o=="number")s=o-1;else{if(o===bt)return bt;o===wi&&(e.items.splice(s,1),s-=1)}}}else if(De.isPair(e)){r=Object.freeze(r.concat(e));let s=await Bs("key",e.key,t,r);if(s===bt)return bt;s===wi&&(e.key=null);let o=await Bs("value",e.value,t,r);if(o===bt)return bt;o===wi&&(e.value=null)}}return n}function XT(i){return typeof i=="object"&&(i.Collection||i.Node||i.Value)?Object.assign({Alias:i.Node,Map:i.Node,Scalar:i.Node,Seq:i.Node},i.Value&&{Map:i.Value,Scalar:i.Value,Seq:i.Value},i.Collection&&{Map:i.Collection,Seq:i.Collection},i):i}function JT(i,e,t,r){if(typeof t=="function")return t(i,e,r);if(De.isMap(e))return t.Map?.(i,e,r);if(De.isSeq(e))return t.Seq?.(i,e,r);if(De.isPair(e))return t.Pair?.(i,e,r);if(De.isScalar(e))return t.Scalar?.(i,e,r);if(De.isAlias(e))return t.Alias?.(i,e,r)}function ZT(i,e,t){let r=e[e.length-1];if(De.isCollection(r))r.items[i]=t;else if(De.isPair(r))i==="key"?r.key=t:r.value=t;else if(De.isDocument(r))r.contents=t;else{let n=De.isAlias(r)?"alias":"scalar";throw new Error("Cannot replace node with ".concat(n," parent"))}}$m.visit=Cu;$m.visitAsync=Nu});var qm=A(tC=>{"use strict";var eC=Q(),bW=ka(),SW={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},vW=i=>i.replace(/[!,[\]{}]/g,e=>SW[e]),Fa=class i{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},i.defaultYaml,e),this.tags=Object.assign({},i.defaultTags,t)}clone(){let e=new i(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){let e=new i(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:i.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},i.defaultTags);break}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:i.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},i.defaultTags),this.atNextDocument=!1);let r=e.trim().split(/[ \t]+/),n=r.shift();switch(n){case"%TAG":{if(r.length!==2&&(t(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;let[s,o]=r;return this.tags[s]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return t(0,"%YAML directive should contain exactly one part"),!1;let[s]=r;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{let o=/^\d+\.\d+$/.test(s);return t(6,"Unsupported YAML version ".concat(s),o),!1}}default:return t(0,"Unknown directive ".concat(n),!0),!1}}tagName(e,t){if(e==="!")return"!";if(e[0]!=="!")return t("Not a valid tag: ".concat(e)),null;if(e[1]==="<"){let o=e.slice(2,-1);return o==="!"||o==="!!"?(t("Verbatim tags aren't resolved, so ".concat(e," is invalid.")),null):(e[e.length-1]!==">"&&t("Verbatim tags must end with a >"),o)}let[,r,n]=e.match(/^(.*!)([^!]*)$/s);n||t("The ".concat(e," tag has no suffix"));let s=this.tags[r];if(s)try{return s+decodeURIComponent(n)}catch(o){return t(String(o)),null}return r==="!"?e:(t("Could not resolve tag: ".concat(e)),null)}tagString(e){for(let[t,r]of Object.entries(this.tags))if(e.startsWith(r))return t+vW(e.substring(r.length));return e[0]==="!"?e:"!<".concat(e,">")}toString(e){let t=this.yaml.explicit?["%YAML ".concat(this.yaml.version||"1.2")]:[],r=Object.entries(this.tags),n;if(e&&r.length>0&&eC.isNode(e.contents)){let s={};bW.visit(e.contents,(o,a)=>{eC.isNode(a)&&a.tag&&(s[a.tag]=!0)}),n=Object.keys(s)}else n=[];for(let[s,o]of r)s==="!!"&&o==="tag:yaml.org,2002:"||(!e||n.some(a=>a.startsWith(o)))&&t.push("%TAG ".concat(s," ").concat(o));return t.join("\n")}};Fa.defaultYaml={explicit:!1,version:"1.2"};Fa.defaultTags={"!!":"tag:yaml.org,2002:"};tC.Directives=Fa});var Iu=A($a=>{"use strict";var iC=Q(),_W=ka();function OW(i){if(/[\x00-\x19\s,[\]{}]/.test(i)){let e=JSON.stringify(i),t="Anchor must not contain whitespace or control characters: ".concat(e);throw new Error(t)}return!0}function rC(i){let e=new Set;return _W.visit(i,{Value(t,r){r.anchor&&e.add(r.anchor)}}),e}function nC(i,e){for(let t=1;;++t){let r="".concat(i).concat(t);if(!e.has(r))return r}}function TW(i,e){let t=[],r=new Map,n=null;return{onAnchor:s=>{t.push(s),n??(n=rC(i));let o=nC(e,n);return n.add(o),o},setAnchors:()=>{for(let s of t){let o=r.get(s);if(typeof o=="object"&&o.anchor&&(iC.isScalar(o.node)||iC.isCollection(o.node)))o.node.anchor=o.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=s,a}}},sourceObjects:r}}$a.anchorIsValid=OW;$a.anchorNames=rC;$a.createNodeAnchors=TW;$a.findNewAnchor=nC});var Mm=A(sC=>{"use strict";function qa(i,e,t,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let n=0,s=r.length;n<s;++n){let o=r[n],a=qa(i,r,String(n),o);a===void 0?delete r[n]:a!==o&&(r[n]=a)}else if(r instanceof Map)for(let n of Array.from(r.keys())){let s=r.get(n),o=qa(i,r,n,s);o===void 0?r.delete(n):o!==s&&r.set(n,o)}else if(r instanceof Set)for(let n of Array.from(r)){let s=qa(i,r,n,n);s===void 0?r.delete(n):s!==n&&(r.delete(n),r.add(s))}else for(let[n,s]of Object.entries(r)){let o=qa(i,r,n,s);o===void 0?delete r[n]:o!==s&&(r[n]=o)}return i.call(e,t,r)}sC.applyReviver=qa});var Cr=A(aC=>{"use strict";var CW=Q();function oC(i,e,t){if(Array.isArray(i))return i.map((r,n)=>oC(r,String(n),t));if(i&&typeof i.toJSON=="function"){if(!t||!CW.hasAnchor(i))return i.toJSON(e,t);let r={aliasCount:0,count:1,res:void 0};t.anchors.set(i,r),t.onCreate=s=>{r.res=s,delete t.onCreate};let n=i.toJSON(e,t);return t.onCreate&&t.onCreate(n),n}return typeof i=="bigint"&&!t?.keep?Number(i):i}aC.toJS=oC});var Ru=A(cC=>{"use strict";var NW=Mm(),lC=Q(),IW=Cr(),Um=class{constructor(e){Object.defineProperty(this,lC.NODE_TYPE,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:r,onAnchor:n,reviver:s}={}){if(!lC.isDocument(e))throw new TypeError("A document argument is required");let o={anchors:new Map,doc:e,keep:!0,mapAsMap:t===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=IW.toJS(this,"",o);if(typeof n=="function")for(let{count:l,res:c}of o.anchors.values())n(c,l);return typeof s=="function"?NW.applyReviver(s,{"":a},"",a):a}};cC.NodeBase=Um});var Ma=A(uC=>{"use strict";var RW=Iu(),DW=ka(),js=Q(),PW=Ru(),LW=Cr(),Bm=class extends PW.NodeBase{constructor(e){super(js.ALIAS),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,t){let r;t?.aliasResolveCache?r=t.aliasResolveCache:(r=[],DW.visit(e,{Node:(s,o)=>{(js.isAlias(o)||js.hasAnchor(o))&&r.push(o)}}),t&&(t.aliasResolveCache=r));let n;for(let s of r){if(s===this)break;s.anchor===this.source&&(n=s)}return n}toJSON(e,t){if(!t)return{source:this.source};let{anchors:r,doc:n,maxAliasCount:s}=t,o=this.resolve(n,t);if(!o){let l="Unresolved alias (the anchor must be set before the alias): ".concat(this.source);throw new ReferenceError(l)}let a=r.get(o);if(a||(LW.toJS(o,null,t),a=r.get(o)),!a||a.res===void 0){let l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(s>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=Du(n,o,r)),a.count*a.aliasCount>s)){let l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,t,r){let n="*".concat(this.source);if(e){if(RW.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let s="Unresolved alias (the anchor must be set before the alias): ".concat(this.source);throw new Error(s)}if(e.implicitKey)return"".concat(n," ")}return n}};function Du(i,e,t){if(js.isAlias(e)){let r=e.resolve(i),n=t&&r&&t.get(r);return n?n.count*n.aliasCount:0}else if(js.isCollection(e)){let r=0;for(let n of e.items){let s=Du(i,n,t);s>r&&(r=s)}return r}else if(js.isPair(e)){let r=Du(i,e.key,t),n=Du(i,e.value,t);return Math.max(r,n)}return 1}uC.Alias=Bm});var Ce=A(jm=>{"use strict";var xW=Q(),kW=Ru(),FW=Cr(),$W=i=>!i||typeof i!="function"&&typeof i!="object",Nr=class extends kW.NodeBase{constructor(e){super(xW.SCALAR),this.value=e}toJSON(e,t){return t?.keep?this.value:FW.toJS(this.value,e,t)}toString(){return String(this.value)}};Nr.BLOCK_FOLDED="BLOCK_FOLDED";Nr.BLOCK_LITERAL="BLOCK_LITERAL";Nr.PLAIN="PLAIN";Nr.QUOTE_DOUBLE="QUOTE_DOUBLE";Nr.QUOTE_SINGLE="QUOTE_SINGLE";jm.Scalar=Nr;jm.isScalarValue=$W});var Ua=A(hC=>{"use strict";var qW=Ma(),Nn=Q(),fC=Ce(),MW="tag:yaml.org,2002:";function UW(i,e,t){if(e){let r=t.filter(s=>s.tag===e),n=r.find(s=>!s.format)??r[0];if(!n)throw new Error("Tag ".concat(e," not found"));return n}return t.find(r=>r.identify?.(i)&&!r.format)}function BW(i,e,t){if(Nn.isDocument(i)&&(i=i.contents),Nn.isNode(i))return i;if(Nn.isPair(i)){let f=t.schema[Nn.MAP].createNode?.(t.schema,null,t);return f.items.push(i),f}(i instanceof String||i instanceof Number||i instanceof Boolean||typeof BigInt<"u"&&i instanceof BigInt)&&(i=i.valueOf());let{aliasDuplicateObjects:r,onAnchor:n,onTagObj:s,schema:o,sourceObjects:a}=t,l;if(r&&i&&typeof i=="object"){if(l=a.get(i),l)return l.anchor??(l.anchor=n(i)),new qW.Alias(l.anchor);l={anchor:null,node:null},a.set(i,l)}e?.startsWith("!!")&&(e=MW+e.slice(2));let c=UW(i,e,o.tags);if(!c){if(i&&typeof i.toJSON=="function"&&(i=i.toJSON()),!i||typeof i!="object"){let f=new fC.Scalar(i);return l&&(l.node=f),f}c=i instanceof Map?o[Nn.MAP]:Symbol.iterator in Object(i)?o[Nn.SEQ]:o[Nn.MAP]}s&&(s(c),delete t.onTagObj);let u=c?.createNode?c.createNode(t.schema,i,t):typeof c?.nodeClass?.from=="function"?c.nodeClass.from(t.schema,i,t):new fC.Scalar(i);return e?u.tag=e:c.default||(u.tag=c.tag),l&&(l.node=u),u}hC.createNode=BW});var Lu=A(Pu=>{"use strict";var jW=Ua(),Ai=Q(),HW=Ru();function Hm(i,e,t){let r=t;for(let n=e.length-1;n>=0;--n){let s=e[n];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){let o=[];o[s]=r,r=o}else r=new Map([[s,r]])}return jW.createNode(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:i,sourceObjects:new Map})}var dC=i=>i==null||typeof i=="object"&&!!i[Symbol.iterator]().next().done,Wm=class extends HW.NodeBase{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){let t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(r=>Ai.isNode(r)||Ai.isPair(r)?r.clone(e):r),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(dC(e))this.add(t);else{let[r,...n]=e,s=this.get(r,!0);if(Ai.isCollection(s))s.addIn(n,t);else if(s===void 0&&this.schema)this.set(r,Hm(this.schema,n,t));else throw new Error("Expected YAML collection at ".concat(r,". Remaining path: ").concat(n))}}deleteIn(e){let[t,...r]=e;if(r.length===0)return this.delete(t);let n=this.get(t,!0);if(Ai.isCollection(n))return n.deleteIn(r);throw new Error("Expected YAML collection at ".concat(t,". Remaining path: ").concat(r))}getIn(e,t){let[r,...n]=e,s=this.get(r,!0);return n.length===0?!t&&Ai.isScalar(s)?s.value:s:Ai.isCollection(s)?s.getIn(n,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!Ai.isPair(t))return!1;let r=t.value;return r==null||e&&Ai.isScalar(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){let[t,...r]=e;if(r.length===0)return this.has(t);let n=this.get(t,!0);return Ai.isCollection(n)?n.hasIn(r):!1}setIn(e,t){let[r,...n]=e;if(n.length===0)this.set(r,t);else{let s=this.get(r,!0);if(Ai.isCollection(s))s.setIn(n,t);else if(s===void 0&&this.schema)this.set(r,Hm(this.schema,n,t));else throw new Error("Expected YAML collection at ".concat(r,". Remaining path: ").concat(n))}}};Pu.Collection=Wm;Pu.collectionFromPath=Hm;Pu.isEmptyPath=dC});var Ba=A(xu=>{"use strict";var WW=i=>i.replace(/^(?!$)(?: $)?/gm,"#");function Gm(i,e){return/^\n+$/.test(i)?i.substring(1):e?i.replace(/^(?! *$)/gm,e):i}var GW=(i,e,t)=>i.endsWith("\n")?Gm(t,e):t.includes("\n")?"\n"+Gm(t,e):(i.endsWith(" ")?"":" ")+t;xu.indentComment=Gm;xu.lineComment=GW;xu.stringifyComment=WW});var mC=A(ja=>{"use strict";var VW="flow",Vm="block",ku="quoted";function zW(i,e,t="flow",{indentAtStart:r,lineWidth:n=80,minContentWidth:s=20,onFold:o,onOverflow:a}={}){if(!n||n<0)return i;n<s&&(s=0);let l=Math.max(1+s,1+n-e.length);if(i.length<=l)return i;let c=[],u={},f=n-e.length;typeof r=="number"&&(r>n-Math.max(2,s)?c.push(0):f=n-r);let h,d,y=!1,g=-1,w=-1,S=-1;t===Vm&&(g=pC(i,g,e.length),g!==-1&&(f=g+l));for(let T;T=i[g+=1];){if(t===ku&&T==="\\"){switch(w=g,i[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}S=g}if(T==="\n")t===Vm&&(g=pC(i,g,e.length)),f=g+e.length+l,h=void 0;else{if(T===" "&&d&&d!==" "&&d!=="\n"&&d!=="	"){let N=i[g+1];N&&N!==" "&&N!=="\n"&&N!=="	"&&(h=g)}if(g>=f)if(h)c.push(h),f=h+l,h=void 0;else if(t===ku){for(;d===" "||d==="	";)d=T,T=i[g+=1],y=!0;let N=g>S+1?g-2:w-1;if(u[N])return i;c.push(N),u[N]=!0,f=N+l,h=void 0}else y=!0}d=T}if(y&&a&&a(),c.length===0)return i;o&&o();let v=i.slice(0,c[0]);for(let T=0;T<c.length;++T){let N=c[T],P=c[T+1]||i.length;N===0?v="\n".concat(e).concat(i.slice(0,P)):(t===ku&&u[N]&&(v+="".concat(i[N],"\\")),v+="\n".concat(e).concat(i.slice(N+1,P)))}return v}function pC(i,e,t){let r=e,n=e+1,s=i[n];for(;s===" "||s==="	";)if(e<n+t)s=i[++e];else{do s=i[++e];while(s&&s!=="\n");r=e,n=e+1,s=i[n]}return r}ja.FOLD_BLOCK=Vm;ja.FOLD_FLOW=VW;ja.FOLD_QUOTED=ku;ja.foldFlowLines=zW});var Wa=A(gC=>{"use strict";var li=Ce(),Ir=mC(),$u=(i,e)=>({indentAtStart:e?i.indent.length:i.indentAtStart,lineWidth:i.options.lineWidth,minContentWidth:i.options.minContentWidth}),qu=i=>/^(%|---|\.\.\.)/m.test(i);function YW(i,e,t){if(!e||e<0)return!1;let r=e-t,n=i.length;if(n<=r)return!1;for(let s=0,o=0;s<n;++s)if(i[s]==="\n"){if(s-o>r)return!0;if(o=s+1,n-o<=r)return!1}return!0}function Ha(i,e){let t=JSON.stringify(i);if(e.options.doubleQuotedAsJSON)return t;let{implicitKey:r}=e,n=e.options.doubleQuotedMinMultiLineLength,s=e.indent||(qu(i)?"  ":""),o="",a=0;for(let l=0,c=t[l];c;c=t[++l])if(c===" "&&t[l+1]==="\\"&&t[l+2]==="n"&&(o+=t.slice(a,l)+"\\ ",l+=1,a=l,c="\\"),c==="\\")switch(t[l+1]){case"u":{o+=t.slice(a,l);let u=t.substr(l+2,4);switch(u){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:u.substr(0,2)==="00"?o+="\\x"+u.substr(2):o+=t.substr(l,6)}l+=5,a=l+1}break;case"n":if(r||t[l+2]==='"'||t.length<n)l+=1;else{for(o+=t.slice(a,l)+"\n\n";t[l+2]==="\\"&&t[l+3]==="n"&&t[l+4]!=='"';)o+="\n",l+=2;o+=s,t[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+t.slice(a):t,r?o:Ir.foldFlowLines(o,s,Ir.FOLD_QUOTED,$u(e,!1))}function zm(i,e){if(e.options.singleQuote===!1||e.implicitKey&&i.includes("\n")||/[ \t]\n|\n[ \t]/.test(i))return Ha(i,e);let t=e.indent||(qu(i)?"  ":""),r="'"+i.replace(/'/g,"''").replace(/\n+/g,"$&\n".concat(t))+"'";return e.implicitKey?r:Ir.foldFlowLines(r,t,Ir.FOLD_FLOW,$u(e,!1))}function Hs(i,e){let{singleQuote:t}=e.options,r;if(t===!1)r=Ha;else{let n=i.includes('"'),s=i.includes("'");n&&!s?r=zm:s&&!n?r=Ha:r=t?zm:Ha}return r(i,e)}var Ym;try{Ym=new RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{Ym=/\n+(?!\n|$)/g}function Fu({comment:i,type:e,value:t},r,n,s){let{blockQuote:o,commentString:a,lineWidth:l}=r.options;if(!o||/\n[\t ]+$/.test(t)||/^\s*$/.test(t))return Hs(t,r);let c=r.indent||(r.forceBlockIndent||qu(t)?"  ":""),u=o==="literal"?!0:o==="folded"||e===li.Scalar.BLOCK_FOLDED?!1:e===li.Scalar.BLOCK_LITERAL?!0:!YW(t,l,c.length);if(!t)return u?"|\n":">\n";let f,h;for(h=t.length;h>0;--h){let P=t[h-1];if(P!=="\n"&&P!=="	"&&P!==" ")break}let d=t.substring(h),y=d.indexOf("\n");y===-1?f="-":t===d||y!==d.length-1?(f="+",s&&s()):f="",d&&(t=t.slice(0,-d.length),d[d.length-1]==="\n"&&(d=d.slice(0,-1)),d=d.replace(Ym,"$&".concat(c)));let g=!1,w,S=-1;for(w=0;w<t.length;++w){let P=t[w];if(P===" ")g=!0;else if(P==="\n")S=w;else break}let v=t.substring(0,S<w?S+1:w);v&&(t=t.substring(v.length),v=v.replace(/\n+/g,"$&".concat(c)));let N=(g?c?"2":"1":"")+f;if(i&&(N+=" "+a(i.replace(/ ?[\r\n]+/g," ")),n&&n()),!u){let P=t.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,"$&".concat(c)),R=!1,x=$u(r,!0);o!=="folded"&&e!==li.Scalar.BLOCK_FOLDED&&(x.onOverflow=()=>{R=!0});let b=Ir.foldFlowLines("".concat(v).concat(P).concat(d),c,Ir.FOLD_BLOCK,x);if(!R)return">".concat(N,"\n").concat(c).concat(b)}return t=t.replace(/\n+/g,"$&".concat(c)),"|".concat(N,"\n").concat(c).concat(v).concat(t).concat(d)}function KW(i,e,t,r){let{type:n,value:s}=i,{actualString:o,implicitKey:a,indent:l,indentStep:c,inFlow:u}=e;if(a&&s.includes("\n")||u&&/[[\]{},]/.test(s))return Hs(s,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return a||u||!s.includes("\n")?Hs(s,e):Fu(i,e,t,r);if(!a&&!u&&n!==li.Scalar.PLAIN&&s.includes("\n"))return Fu(i,e,t,r);if(qu(s)){if(l==="")return e.forceBlockIndent=!0,Fu(i,e,t,r);if(a&&l===c)return Hs(s,e)}let f=s.replace(/\n+/g,"$&\n".concat(l));if(o){let h=g=>g.default&&g.tag!=="tag:yaml.org,2002:str"&&g.test?.test(f),{compat:d,tags:y}=e.doc.schema;if(y.some(h)||d?.some(h))return Hs(s,e)}return a?f:Ir.foldFlowLines(f,l,Ir.FOLD_FLOW,$u(e,!1))}function QW(i,e,t,r){let{implicitKey:n,inFlow:s}=e,o=typeof i.value=="string"?i:Object.assign({},i,{value:String(i.value)}),{type:a}=i;a!==li.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=li.Scalar.QUOTE_DOUBLE);let l=u=>{switch(u){case li.Scalar.BLOCK_FOLDED:case li.Scalar.BLOCK_LITERAL:return n||s?Hs(o.value,e):Fu(o,e,t,r);case li.Scalar.QUOTE_DOUBLE:return Ha(o.value,e);case li.Scalar.QUOTE_SINGLE:return zm(o.value,e);case li.Scalar.PLAIN:return KW(o,e,t,r);default:return null}},c=l(a);if(c===null){let{defaultKeyType:u,defaultStringType:f}=e.options,h=n&&u||f;if(c=l(h),c===null)throw new Error("Unsupported default string type ".concat(h))}return c}gC.stringifyString=QW});var Ga=A(Km=>{"use strict";var XW=Iu(),Rr=Q(),JW=Ba(),ZW=Wa();function eG(i,e){let t=Object.assign({blockQuote:!0,commentString:JW.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},i.schema.toStringOptions,e),r;switch(t.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:i,flowCollectionPadding:t.flowCollectionPadding?" ":"",indent:"",indentStep:typeof t.indent=="number"?" ".repeat(t.indent):"  ",inFlow:r,options:t}}function tG(i,e){if(e.tag){let n=i.filter(s=>s.tag===e.tag);if(n.length>0)return n.find(s=>s.format===e.format)??n[0]}let t,r;if(Rr.isScalar(e)){r=e.value;let n=i.filter(s=>s.identify?.(r));if(n.length>1){let s=n.filter(o=>o.test);s.length>0&&(n=s)}t=n.find(s=>s.format===e.format)??n.find(s=>!s.format)}else r=e,t=i.find(n=>n.nodeClass&&r instanceof n.nodeClass);if(!t){let n=r?.constructor?.name??(r===null?"null":typeof r);throw new Error("Tag not resolved for ".concat(n," value"))}return t}function iG(i,e,{anchors:t,doc:r}){if(!r.directives)return"";let n=[],s=(Rr.isScalar(i)||Rr.isCollection(i))&&i.anchor;s&&XW.anchorIsValid(s)&&(t.add(s),n.push("&".concat(s)));let o=i.tag??(e.default?null:e.tag);return o&&n.push(r.directives.tagString(o)),n.join(" ")}function rG(i,e,t,r){if(Rr.isPair(i))return i.toString(e,t,r);if(Rr.isAlias(i)){if(e.doc.directives)return i.toString(e);if(e.resolvedAliases?.has(i))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(i):e.resolvedAliases=new Set([i]),i=i.resolve(e.doc)}let n,s=Rr.isNode(i)?i:e.doc.createNode(i,{onTagObj:l=>n=l});n??(n=tG(e.doc.schema.tags,s));let o=iG(s,n,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);let a=typeof n.stringify=="function"?n.stringify(s,e,t,r):Rr.isScalar(s)?ZW.stringifyString(s,e,t,r):s.toString(e,t,r);return o?Rr.isScalar(s)||a[0]==="{"||a[0]==="["?"".concat(o," ").concat(a):"".concat(o,"\n").concat(e.indent).concat(a):a}Km.createStringifyContext=eG;Km.stringify=rG});var EC=A(AC=>{"use strict";var Bi=Q(),yC=Ce(),wC=Ga(),Va=Ba();function nG({key:i,value:e},t,r,n){let{allNullValues:s,doc:o,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:f}}=t,h=Bi.isNode(i)&&i.comment||null;if(f){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(Bi.isCollection(i)||!Bi.isNode(i)&&typeof i=="object"){let x="With simple keys, collection cannot be used as a key value";throw new Error(x)}}let d=!f&&(!i||h&&e==null&&!t.inFlow||Bi.isCollection(i)||(Bi.isScalar(i)?i.type===yC.Scalar.BLOCK_FOLDED||i.type===yC.Scalar.BLOCK_LITERAL:typeof i=="object"));t=Object.assign({},t,{allNullValues:!1,implicitKey:!d&&(f||!s),indent:a+l});let y=!1,g=!1,w=wC.stringify(i,t,()=>y=!0,()=>g=!0);if(!d&&!t.inFlow&&w.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(t.inFlow){if(s||e==null)return y&&r&&r(),w===""?"?":d?"? ".concat(w):w}else if(s&&!f||e==null&&d)return w="? ".concat(w),h&&!y?w+=Va.lineComment(w,t.indent,c(h)):g&&n&&n(),w;y&&(h=null),d?(h&&(w+=Va.lineComment(w,t.indent,c(h))),w="? ".concat(w,"\n").concat(a,":")):(w="".concat(w,":"),h&&(w+=Va.lineComment(w,t.indent,c(h))));let S,v,T;Bi.isNode(e)?(S=!!e.spaceBefore,v=e.commentBefore,T=e.comment):(S=!1,v=null,T=null,e&&typeof e=="object"&&(e=o.createNode(e))),t.implicitKey=!1,!d&&!h&&Bi.isScalar(e)&&(t.indentAtStart=w.length+1),g=!1,!u&&l.length>=2&&!t.inFlow&&!d&&Bi.isSeq(e)&&!e.flow&&!e.tag&&!e.anchor&&(t.indent=t.indent.substring(2));let N=!1,P=wC.stringify(e,t,()=>N=!0,()=>g=!0),R=" ";if(h||S||v){if(R=S?"\n":"",v){let x=c(v);R+="\n".concat(Va.indentComment(x,t.indent))}P===""&&!t.inFlow?R==="\n"&&(R="\n\n"):R+="\n".concat(t.indent)}else if(!d&&Bi.isCollection(e)){let x=P[0],b=P.indexOf("\n"),D=b!==-1,B=t.inFlow??e.flow??e.items.length===0;if(D||!B){let k=!1;if(D&&(x==="&"||x==="!")){let U=P.indexOf(" ");x==="&"&&U!==-1&&U<b&&P[U+1]==="!"&&(U=P.indexOf(" ",U+1)),(U===-1||b<U)&&(k=!0)}k||(R="\n".concat(t.indent))}}else(P===""||P[0]==="\n")&&(R="");return w+=R+P,t.inFlow?N&&r&&r():T&&!N?w+=Va.lineComment(w,t.indent,c(T)):g&&n&&n(),w}AC.stringifyPair=nG});var Xm=A(Qm=>{"use strict";var bC=require("process");function sG(i,...e){i==="debug"&&console.log(...e)}function oG(i,e){(i==="debug"||i==="warn")&&(typeof bC.emitWarning=="function"?bC.emitWarning(e):console.warn(e))}Qm.debug=sG;Qm.warn=oG});var ju=A(Bu=>{"use strict";var za=Q(),SC=Ce(),Mu="<<",Uu={identify:i=>i===Mu||typeof i=="symbol"&&i.description===Mu,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new SC.Scalar(Symbol(Mu)),{addToJSMap:vC}),stringify:()=>Mu},aG=(i,e)=>(Uu.identify(e)||za.isScalar(e)&&(!e.type||e.type===SC.Scalar.PLAIN)&&Uu.identify(e.value))&&i?.doc.schema.tags.some(t=>t.tag===Uu.tag&&t.default);function vC(i,e,t){if(t=i&&za.isAlias(t)?t.resolve(i.doc):t,za.isSeq(t))for(let r of t.items)Jm(i,e,r);else if(Array.isArray(t))for(let r of t)Jm(i,e,r);else Jm(i,e,t)}function Jm(i,e,t){let r=i&&za.isAlias(t)?t.resolve(i.doc):t;if(!za.isMap(r))throw new Error("Merge sources must be maps or map aliases");let n=r.toJSON(null,i,Map);for(let[s,o]of n)e instanceof Map?e.has(s)||e.set(s,o):e instanceof Set?e.add(s):Object.prototype.hasOwnProperty.call(e,s)||Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}Bu.addMergeToJSMap=vC;Bu.isMergeKey=aG;Bu.merge=Uu});var eg=A(TC=>{"use strict";var lG=Xm(),_C=ju(),cG=Ga(),OC=Q(),Zm=Cr();function uG(i,e,{key:t,value:r}){if(OC.isNode(t)&&t.addToJSMap)t.addToJSMap(i,e,r);else if(_C.isMergeKey(i,t))_C.addMergeToJSMap(i,e,r);else{let n=Zm.toJS(t,"",i);if(e instanceof Map)e.set(n,Zm.toJS(r,n,i));else if(e instanceof Set)e.add(n);else{let s=fG(t,n,i),o=Zm.toJS(r,s,i);s in e?Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[s]=o}}return e}function fG(i,e,t){if(e===null)return"";if(typeof e!="object")return String(e);if(OC.isNode(i)&&t?.doc){let r=cG.createStringifyContext(t.doc,{});r.anchors=new Set;for(let s of t.anchors.keys())r.anchors.add(s.anchor);r.inFlow=!0,r.inStringifyKey=!0;let n=i.toString(r);if(!t.mapKeyWarned){let s=JSON.stringify(n);s.length>40&&(s=s.substring(0,36)+'..."'),lG.warn(t.doc.options.logLevel,"Keys with collection values will be stringified due to JS Object restrictions: ".concat(s,". Set mapAsMap: true to use object keys.")),t.mapKeyWarned=!0}return n}return JSON.stringify(e)}TC.addPairToJSMap=uG});var Dr=A(tg=>{"use strict";var CC=Ua(),hG=EC(),dG=eg(),Hu=Q();function pG(i,e,t){let r=CC.createNode(i,void 0,t),n=CC.createNode(e,void 0,t);return new Wu(r,n)}var Wu=class i{constructor(e,t=null){Object.defineProperty(this,Hu.NODE_TYPE,{value:Hu.PAIR}),this.key=e,this.value=t}clone(e){let{key:t,value:r}=this;return Hu.isNode(t)&&(t=t.clone(e)),Hu.isNode(r)&&(r=r.clone(e)),new i(t,r)}toJSON(e,t){let r=t?.mapAsMap?new Map:{};return dG.addPairToJSMap(t,r,this)}toString(e,t,r){return e?.doc?hG.stringifyPair(this,e,t,r):JSON.stringify(this)}};tg.Pair=Wu;tg.createPair=pG});var ig=A(IC=>{"use strict";var In=Q(),NC=Ga(),Gu=Ba();function mG(i,e,t){return(e.inFlow??i.flow?yG:gG)(i,e,t)}function gG({comment:i,items:e},t,{blockItemPrefix:r,flowChars:n,itemIndent:s,onChompKeep:o,onComment:a}){let{indent:l,options:{commentString:c}}=t,u=Object.assign({},t,{indent:s,type:null}),f=!1,h=[];for(let y=0;y<e.length;++y){let g=e[y],w=null;if(In.isNode(g))!f&&g.spaceBefore&&h.push(""),Vu(t,h,g.commentBefore,f),g.comment&&(w=g.comment);else if(In.isPair(g)){let v=In.isNode(g.key)?g.key:null;v&&(!f&&v.spaceBefore&&h.push(""),Vu(t,h,v.commentBefore,f))}f=!1;let S=NC.stringify(g,u,()=>w=null,()=>f=!0);w&&(S+=Gu.lineComment(S,s,c(w))),f&&w&&(f=!1),h.push(r+S)}let d;if(h.length===0)d=n.start+n.end;else{d=h[0];for(let y=1;y<h.length;++y){let g=h[y];d+=g?"\n".concat(l).concat(g):"\n"}}return i?(d+="\n"+Gu.indentComment(c(i),l),a&&a()):f&&o&&o(),d}function yG({items:i},e,{flowChars:t,itemIndent:r}){let{indent:n,indentStep:s,flowCollectionPadding:o,options:{commentString:a}}=e;r+=s;let l=Object.assign({},e,{indent:r,inFlow:!0,type:null}),c=!1,u=0,f=[];for(let y=0;y<i.length;++y){let g=i[y],w=null;if(In.isNode(g))g.spaceBefore&&f.push(""),Vu(e,f,g.commentBefore,!1),g.comment&&(w=g.comment);else if(In.isPair(g)){let v=In.isNode(g.key)?g.key:null;v&&(v.spaceBefore&&f.push(""),Vu(e,f,v.commentBefore,!1),v.comment&&(c=!0));let T=In.isNode(g.value)?g.value:null;T?(T.comment&&(w=T.comment),T.commentBefore&&(c=!0)):g.value==null&&v?.comment&&(w=v.comment)}w&&(c=!0);let S=NC.stringify(g,l,()=>w=null);y<i.length-1&&(S+=","),w&&(S+=Gu.lineComment(S,r,a(w))),!c&&(f.length>u||S.includes("\n"))&&(c=!0),f.push(S),u=f.length}let{start:h,end:d}=t;if(f.length===0)return h+d;if(!c){let y=f.reduce((g,w)=>g+w.length+2,2);c=e.options.lineWidth>0&&y>e.options.lineWidth}if(c){let y=h;for(let g of f)y+=g?"\n".concat(s).concat(n).concat(g):"\n";return"".concat(y,"\n").concat(n).concat(d)}else return"".concat(h).concat(o).concat(f.join(" ")).concat(o).concat(d)}function Vu({indent:i,options:{commentString:e}},t,r,n){if(r&&n&&(r=r.replace(/^\n+/,"")),r){let s=Gu.indentComment(e(r),i);t.push(s.trimStart())}}IC.stringifyCollection=mG});var Lr=A(ng=>{"use strict";var wG=ig(),AG=eg(),EG=Lu(),Pr=Q(),zu=Dr(),bG=Ce();function Ya(i,e){let t=Pr.isScalar(e)?e.value:e;for(let r of i)if(Pr.isPair(r)&&(r.key===e||r.key===t||Pr.isScalar(r.key)&&r.key.value===t))return r}var rg=class extends EG.Collection{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(Pr.MAP,e),this.items=[]}static from(e,t,r){let{keepUndefined:n,replacer:s}=r,o=new this(e),a=(l,c)=>{if(typeof s=="function")c=s.call(t,l,c);else if(Array.isArray(s)&&!s.includes(l))return;(c!==void 0||n)&&o.items.push(zu.createPair(l,c,r))};if(t instanceof Map)for(let[l,c]of t)a(l,c);else if(t&&typeof t=="object")for(let l of Object.keys(t))a(l,t[l]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,t){let r;Pr.isPair(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new zu.Pair(e,e?.value):r=new zu.Pair(e.key,e.value);let n=Ya(this.items,r.key),s=this.schema?.sortMapEntries;if(n){if(!t)throw new Error("Key ".concat(r.key," already set"));Pr.isScalar(n.value)&&bG.isScalarValue(r.value)?n.value.value=r.value:n.value=r.value}else if(s){let o=this.items.findIndex(a=>s(r,a)<0);o===-1?this.items.push(r):this.items.splice(o,0,r)}else this.items.push(r)}delete(e){let t=Ya(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){let n=Ya(this.items,e)?.value;return(!t&&Pr.isScalar(n)?n.value:n)??void 0}has(e){return!!Ya(this.items,e)}set(e,t){this.add(new zu.Pair(e,t),!0)}toJSON(e,t,r){let n=r?new r:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(n);for(let s of this.items)AG.addPairToJSMap(t,n,s);return n}toString(e,t,r){if(!e)return JSON.stringify(this);for(let n of this.items)if(!Pr.isPair(n))throw new Error("Map items must all be pairs; found ".concat(JSON.stringify(n)," instead"));return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),wG.stringifyCollection(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:t})}};ng.YAMLMap=rg;ng.findPair=Ya});var Ws=A(DC=>{"use strict";var SG=Q(),RC=Lr(),vG={collection:"map",default:!0,nodeClass:RC.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(i,e){return SG.isMap(i)||e("Expected a mapping for this tag"),i},createNode:(i,e,t)=>RC.YAMLMap.from(i,e,t)};DC.map=vG});var xr=A(PC=>{"use strict";var _G=Ua(),OG=ig(),TG=Lu(),Ku=Q(),CG=Ce(),NG=Cr(),sg=class extends TG.Collection{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Ku.SEQ,e),this.items=[]}add(e){this.items.push(e)}delete(e){let t=Yu(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){let r=Yu(e);if(typeof r!="number")return;let n=this.items[r];return!t&&Ku.isScalar(n)?n.value:n}has(e){let t=Yu(e);return typeof t=="number"&&t<this.items.length}set(e,t){let r=Yu(e);if(typeof r!="number")throw new Error("Expected a valid index, not ".concat(e,"."));let n=this.items[r];Ku.isScalar(n)&&CG.isScalarValue(t)?n.value=t:this.items[r]=t}toJSON(e,t){let r=[];t?.onCreate&&t.onCreate(r);let n=0;for(let s of this.items)r.push(NG.toJS(s,String(n++),t));return r}toString(e,t,r){return e?OG.stringifyCollection(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:t}):JSON.stringify(this)}static from(e,t,r){let{replacer:n}=r,s=new this(e);if(t&&Symbol.iterator in Object(t)){let o=0;for(let a of t){if(typeof n=="function"){let l=t instanceof Set?a:String(o++);a=n.call(t,l,a)}s.items.push(_G.createNode(a,void 0,r))}}return s}};function Yu(i){let e=Ku.isScalar(i)?i.value:i;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}PC.YAMLSeq=sg});var Gs=A(xC=>{"use strict";var IG=Q(),LC=xr(),RG={collection:"seq",default:!0,nodeClass:LC.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(i,e){return IG.isSeq(i)||e("Expected a sequence for this tag"),i},createNode:(i,e,t)=>LC.YAMLSeq.from(i,e,t)};xC.seq=RG});var Ka=A(kC=>{"use strict";var DG=Wa(),PG={identify:i=>typeof i=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:i=>i,stringify(i,e,t,r){return e=Object.assign({actualString:!0},e),DG.stringifyString(i,e,t,r)}};kC.string=PG});var Qu=A(qC=>{"use strict";var FC=Ce(),$C={identify:i=>i==null,createNode:()=>new FC.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new FC.Scalar(null),stringify:({source:i},e)=>typeof i=="string"&&$C.test.test(i)?i:e.options.nullStr};qC.nullTag=$C});var og=A(UC=>{"use strict";var LG=Ce(),MC={identify:i=>typeof i=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:i=>new LG.Scalar(i[0]==="t"||i[0]==="T"),stringify({source:i,value:e},t){if(i&&MC.test.test(i)){let r=i[0]==="t"||i[0]==="T";if(e===r)return i}return e?t.options.trueStr:t.options.falseStr}};UC.boolTag=MC});var Vs=A(BC=>{"use strict";function xG({format:i,minFractionDigits:e,tag:t,value:r}){if(typeof r=="bigint")return String(r);let n=typeof r=="number"?r:Number(r);if(!isFinite(n))return isNaN(n)?".nan":n<0?"-.inf":".inf";let s=JSON.stringify(r);if(!i&&e&&(!t||t==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let o=s.indexOf(".");o<0&&(o=s.length,s+=".");let a=e-(s.length-o-1);for(;a-- >0;)s+="0"}return s}BC.stringifyNumber=xG});var lg=A(Xu=>{"use strict";var kG=Ce(),ag=Vs(),FG={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:i=>i.slice(-3).toLowerCase()==="nan"?NaN:i[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ag.stringifyNumber},$G={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:i=>parseFloat(i),stringify(i){let e=Number(i.value);return isFinite(e)?e.toExponential():ag.stringifyNumber(i)}},qG={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(i){let e=new kG.Scalar(parseFloat(i)),t=i.indexOf(".");return t!==-1&&i[i.length-1]==="0"&&(e.minFractionDigits=i.length-t-1),e},stringify:ag.stringifyNumber};Xu.float=qG;Xu.floatExp=$G;Xu.floatNaN=FG});var ug=A(Zu=>{"use strict";var jC=Vs(),Ju=i=>typeof i=="bigint"||Number.isInteger(i),cg=(i,e,t,{intAsBigInt:r})=>r?BigInt(i):parseInt(i.substring(e),t);function HC(i,e,t){let{value:r}=i;return Ju(r)&&r>=0?t+r.toString(e):jC.stringifyNumber(i)}var MG={identify:i=>Ju(i)&&i>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(i,e,t)=>cg(i,2,8,t),stringify:i=>HC(i,8,"0o")},UG={identify:Ju,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(i,e,t)=>cg(i,0,10,t),stringify:jC.stringifyNumber},BG={identify:i=>Ju(i)&&i>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(i,e,t)=>cg(i,2,16,t),stringify:i=>HC(i,16,"0x")};Zu.int=UG;Zu.intHex=BG;Zu.intOct=MG});var GC=A(WC=>{"use strict";var jG=Ws(),HG=Qu(),WG=Gs(),GG=Ka(),VG=og(),fg=lg(),hg=ug(),zG=[jG.map,WG.seq,GG.string,HG.nullTag,VG.boolTag,hg.intOct,hg.int,hg.intHex,fg.floatNaN,fg.floatExp,fg.float];WC.schema=zG});var YC=A(zC=>{"use strict";var YG=Ce(),KG=Ws(),QG=Gs();function VC(i){return typeof i=="bigint"||Number.isInteger(i)}var ef=({value:i})=>JSON.stringify(i),XG=[{identify:i=>typeof i=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:i=>i,stringify:ef},{identify:i=>i==null,createNode:()=>new YG.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:ef},{identify:i=>typeof i=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:i=>i==="true",stringify:ef},{identify:VC,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(i,e,{intAsBigInt:t})=>t?BigInt(i):parseInt(i,10),stringify:({value:i})=>VC(i)?i.toString():JSON.stringify(i)},{identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:i=>parseFloat(i),stringify:ef}],JG={default:!0,tag:"",test:/^/,resolve(i,e){return e("Unresolved plain scalar ".concat(JSON.stringify(i))),i}},ZG=[KG.map,QG.seq].concat(XG,JG);zC.schema=ZG});var pg=A(KC=>{"use strict";var Qa=require("buffer"),dg=Ce(),e3=Wa(),t3={identify:i=>i instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(i,e){if(typeof Qa.Buffer=="function")return Qa.Buffer.from(i,"base64");if(typeof atob=="function"){let t=atob(i.replace(/[\n\r]/g,"")),r=new Uint8Array(t.length);for(let n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),i},stringify({comment:i,type:e,value:t},r,n,s){if(!t)return"";let o=t,a;if(typeof Qa.Buffer=="function")a=o instanceof Qa.Buffer?o.toString("base64"):Qa.Buffer.from(o.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=dg.Scalar.BLOCK_LITERAL),e!==dg.Scalar.QUOTE_DOUBLE){let l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),c=Math.ceil(a.length/l),u=new Array(c);for(let f=0,h=0;f<c;++f,h+=l)u[f]=a.substr(h,l);a=u.join(e===dg.Scalar.BLOCK_LITERAL?"\n":" ")}return e3.stringifyString({comment:i,type:e,value:a},r,n,s)}};KC.binary=t3});var nf=A(rf=>{"use strict";var tf=Q(),mg=Dr(),i3=Ce(),r3=xr();function QC(i,e){if(tf.isSeq(i))for(let t=0;t<i.items.length;++t){let r=i.items[t];if(!tf.isPair(r)){if(tf.isMap(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");let n=r.items[0]||new mg.Pair(new i3.Scalar(null));if(r.commentBefore&&(n.key.commentBefore=n.key.commentBefore?"".concat(r.commentBefore,"\n").concat(n.key.commentBefore):r.commentBefore),r.comment){let s=n.value??n.key;s.comment=s.comment?"".concat(r.comment,"\n").concat(s.comment):r.comment}r=n}i.items[t]=tf.isPair(r)?r:new mg.Pair(r)}}else e("Expected a sequence for this tag");return i}function XC(i,e,t){let{replacer:r}=t,n=new r3.YAMLSeq(i);n.tag="tag:yaml.org,2002:pairs";let s=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof r=="function"&&(o=r.call(e,String(s++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError("Expected [key, value] tuple: ".concat(o));else if(o&&o instanceof Object){let c=Object.keys(o);if(c.length===1)a=c[0],l=o[a];else throw new TypeError("Expected tuple with one key, not ".concat(c.length," keys"))}else a=o;n.items.push(mg.createPair(a,l,t))}return n}var n3={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:QC,createNode:XC};rf.createPairs=XC;rf.pairs=n3;rf.resolvePairs=QC});var wg=A(yg=>{"use strict";var JC=Q(),gg=Cr(),Xa=Lr(),s3=xr(),ZC=nf(),Rn=class i extends s3.YAMLSeq{constructor(){super(),this.add=Xa.YAMLMap.prototype.add.bind(this),this.delete=Xa.YAMLMap.prototype.delete.bind(this),this.get=Xa.YAMLMap.prototype.get.bind(this),this.has=Xa.YAMLMap.prototype.has.bind(this),this.set=Xa.YAMLMap.prototype.set.bind(this),this.tag=i.tag}toJSON(e,t){if(!t)return super.toJSON(e);let r=new Map;t?.onCreate&&t.onCreate(r);for(let n of this.items){let s,o;if(JC.isPair(n)?(s=gg.toJS(n.key,"",t),o=gg.toJS(n.value,s,t)):s=gg.toJS(n,"",t),r.has(s))throw new Error("Ordered maps must not include duplicate keys");r.set(s,o)}return r}static from(e,t,r){let n=ZC.createPairs(e,t,r),s=new this;return s.items=n.items,s}};Rn.tag="tag:yaml.org,2002:omap";var o3={collection:"seq",identify:i=>i instanceof Map,nodeClass:Rn,default:!1,tag:"tag:yaml.org,2002:omap",resolve(i,e){let t=ZC.resolvePairs(i,e),r=[];for(let{key:n}of t.items)JC.isScalar(n)&&(r.includes(n.value)?e("Ordered maps must not include duplicate keys: ".concat(n.value)):r.push(n.value));return Object.assign(new Rn,t)},createNode:(i,e,t)=>Rn.from(i,e,t)};yg.YAMLOMap=Rn;yg.omap=o3});var nN=A(Ag=>{"use strict";var eN=Ce();function tN({value:i,source:e},t){return e&&(i?iN:rN).test.test(e)?e:i?t.options.trueStr:t.options.falseStr}var iN={identify:i=>i===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new eN.Scalar(!0),stringify:tN},rN={identify:i=>i===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new eN.Scalar(!1),stringify:tN};Ag.falseTag=rN;Ag.trueTag=iN});var sN=A(sf=>{"use strict";var a3=Ce(),Eg=Vs(),l3={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:i=>i.slice(-3).toLowerCase()==="nan"?NaN:i[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Eg.stringifyNumber},c3={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:i=>parseFloat(i.replace(/_/g,"")),stringify(i){let e=Number(i.value);return isFinite(e)?e.toExponential():Eg.stringifyNumber(i)}},u3={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(i){let e=new a3.Scalar(parseFloat(i.replace(/_/g,""))),t=i.indexOf(".");if(t!==-1){let r=i.substring(t+1).replace(/_/g,"");r[r.length-1]==="0"&&(e.minFractionDigits=r.length)}return e},stringify:Eg.stringifyNumber};sf.float=u3;sf.floatExp=c3;sf.floatNaN=l3});var aN=A(Za=>{"use strict";var oN=Vs(),Ja=i=>typeof i=="bigint"||Number.isInteger(i);function of(i,e,t,{intAsBigInt:r}){let n=i[0];if((n==="-"||n==="+")&&(e+=1),i=i.substring(e).replace(/_/g,""),r){switch(t){case 2:i="0b".concat(i);break;case 8:i="0o".concat(i);break;case 16:i="0x".concat(i);break}let o=BigInt(i);return n==="-"?BigInt(-1)*o:o}let s=parseInt(i,t);return n==="-"?-1*s:s}function bg(i,e,t){let{value:r}=i;if(Ja(r)){let n=r.toString(e);return r<0?"-"+t+n.substr(1):t+n}return oN.stringifyNumber(i)}var f3={identify:Ja,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(i,e,t)=>of(i,2,2,t),stringify:i=>bg(i,2,"0b")},h3={identify:Ja,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(i,e,t)=>of(i,1,8,t),stringify:i=>bg(i,8,"0")},d3={identify:Ja,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(i,e,t)=>of(i,0,10,t),stringify:oN.stringifyNumber},p3={identify:Ja,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(i,e,t)=>of(i,2,16,t),stringify:i=>bg(i,16,"0x")};Za.int=d3;Za.intBin=f3;Za.intHex=p3;Za.intOct=h3});var vg=A(Sg=>{"use strict";var cf=Q(),af=Dr(),lf=Lr(),Dn=class i extends lf.YAMLMap{constructor(e){super(e),this.tag=i.tag}add(e){let t;cf.isPair(e)?t=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?t=new af.Pair(e.key,null):t=new af.Pair(e,null),lf.findPair(this.items,t.key)||this.items.push(t)}get(e,t){let r=lf.findPair(this.items,e);return!t&&cf.isPair(r)?cf.isScalar(r.key)?r.key.value:r.key:r}set(e,t){if(typeof t!="boolean")throw new Error("Expected boolean value for set(key, value) in a YAML set, not ".concat(typeof t));let r=lf.findPair(this.items,e);r&&!t?this.items.splice(this.items.indexOf(r),1):!r&&t&&this.items.push(new af.Pair(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,r);throw new Error("Set items must all have null values")}static from(e,t,r){let{replacer:n}=r,s=new this(e);if(t&&Symbol.iterator in Object(t))for(let o of t)typeof n=="function"&&(o=n.call(t,o,o)),s.items.push(af.createPair(o,null,r));return s}};Dn.tag="tag:yaml.org,2002:set";var m3={collection:"map",identify:i=>i instanceof Set,nodeClass:Dn,default:!1,tag:"tag:yaml.org,2002:set",createNode:(i,e,t)=>Dn.from(i,e,t),resolve(i,e){if(cf.isMap(i)){if(i.hasAllNullValues(!0))return Object.assign(new Dn,i);e("Set items must all have null values")}else e("Expected a mapping for this tag");return i}};Sg.YAMLSet=Dn;Sg.set=m3});var Og=A(uf=>{"use strict";var g3=Vs();function _g(i,e){let t=i[0],r=t==="-"||t==="+"?i.substring(1):i,n=o=>e?BigInt(o):Number(o),s=r.replace(/_/g,"").split(":").reduce((o,a)=>o*n(60)+n(a),n(0));return t==="-"?n(-1)*s:s}function lN(i){let{value:e}=i,t=o=>o;if(typeof e=="bigint")t=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return g3.stringifyNumber(i);let r="";e<0&&(r="-",e*=t(-1));let n=t(60),s=[e%n];return e<60?s.unshift(0):(e=(e-s[0])/n,s.unshift(e%n),e>=60&&(e=(e-s[0])/n,s.unshift(e))),r+s.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var y3={identify:i=>typeof i=="bigint"||Number.isInteger(i),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(i,e,{intAsBigInt:t})=>_g(i,t),stringify:lN},w3={identify:i=>typeof i=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:i=>_g(i,!1),stringify:lN},cN={identify:i=>i instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(i){let e=i.match(cN.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,t,r,n,s,o,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0,c=Date.UTC(t,r-1,n,s||0,o||0,a||0,l),u=e[8];if(u&&u!=="Z"){let f=_g(u,!1);Math.abs(f)<30&&(f*=60),c-=6e4*f}return new Date(c)},stringify:({value:i})=>i?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""};uf.floatTime=w3;uf.intTime=y3;uf.timestamp=cN});var hN=A(fN=>{"use strict";var A3=Ws(),E3=Qu(),b3=Gs(),S3=Ka(),v3=pg(),uN=nN(),Tg=sN(),ff=aN(),_3=ju(),O3=wg(),T3=nf(),C3=vg(),Cg=Og(),N3=[A3.map,b3.seq,S3.string,E3.nullTag,uN.trueTag,uN.falseTag,ff.intBin,ff.intOct,ff.int,ff.intHex,Tg.floatNaN,Tg.floatExp,Tg.float,v3.binary,_3.merge,O3.omap,T3.pairs,C3.set,Cg.intTime,Cg.floatTime,Cg.timestamp];fN.schema=N3});var SN=A(Rg=>{"use strict";var gN=Ws(),I3=Qu(),yN=Gs(),R3=Ka(),D3=og(),Ng=lg(),Ig=ug(),P3=GC(),L3=YC(),wN=pg(),el=ju(),AN=wg(),EN=nf(),dN=hN(),bN=vg(),hf=Og(),pN=new Map([["core",P3.schema],["failsafe",[gN.map,yN.seq,R3.string]],["json",L3.schema],["yaml11",dN.schema],["yaml-1.1",dN.schema]]),mN={binary:wN.binary,bool:D3.boolTag,float:Ng.float,floatExp:Ng.floatExp,floatNaN:Ng.floatNaN,floatTime:hf.floatTime,int:Ig.int,intHex:Ig.intHex,intOct:Ig.intOct,intTime:hf.intTime,map:gN.map,merge:el.merge,null:I3.nullTag,omap:AN.omap,pairs:EN.pairs,seq:yN.seq,set:bN.set,timestamp:hf.timestamp},x3={"tag:yaml.org,2002:binary":wN.binary,"tag:yaml.org,2002:merge":el.merge,"tag:yaml.org,2002:omap":AN.omap,"tag:yaml.org,2002:pairs":EN.pairs,"tag:yaml.org,2002:set":bN.set,"tag:yaml.org,2002:timestamp":hf.timestamp};function k3(i,e,t){let r=pN.get(e);if(r&&!i)return t&&!r.includes(el.merge)?r.concat(el.merge):r.slice();let n=r;if(!n)if(Array.isArray(i))n=[];else{let s=Array.from(pN.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error('Unknown schema "'.concat(e,'"; use one of ').concat(s," or define customTags array"))}if(Array.isArray(i))for(let s of i)n=n.concat(s);else typeof i=="function"&&(n=i(n.slice()));return t&&(n=n.concat(el.merge)),n.reduce((s,o)=>{let a=typeof o=="string"?mN[o]:o;if(!a){let l=JSON.stringify(o),c=Object.keys(mN).map(u=>JSON.stringify(u)).join(", ");throw new Error("Unknown custom tag ".concat(l,"; use one of ").concat(c))}return s.includes(a)||s.push(a),s},[])}Rg.coreKnownTags=x3;Rg.getTags=k3});var Lg=A(vN=>{"use strict";var Dg=Q(),F3=Ws(),$3=Gs(),q3=Ka(),df=SN(),M3=(i,e)=>i.key<e.key?-1:i.key>e.key?1:0,Pg=class i{constructor({compat:e,customTags:t,merge:r,resolveKnownTags:n,schema:s,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?df.getTags(e,"compat"):e?df.getTags(null,e):null,this.name=typeof s=="string"&&s||"core",this.knownTags=n?df.coreKnownTags:{},this.tags=df.getTags(t,this.name,r),this.toStringOptions=a??null,Object.defineProperty(this,Dg.MAP,{value:F3.map}),Object.defineProperty(this,Dg.SCALAR,{value:q3.string}),Object.defineProperty(this,Dg.SEQ,{value:$3.seq}),this.sortMapEntries=typeof o=="function"?o:o===!0?M3:null}clone(){let e=Object.create(i.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};vN.Schema=Pg});var ON=A(_N=>{"use strict";var U3=Q(),xg=Ga(),tl=Ba();function B3(i,e){let t=[],r=e.directives===!0;if(e.directives!==!1&&i.directives){let l=i.directives.toString(i);l?(t.push(l),r=!0):i.directives.docStart&&(r=!0)}r&&t.push("---");let n=xg.createStringifyContext(i,e),{commentString:s}=n.options;if(i.commentBefore){t.length!==1&&t.unshift("");let l=s(i.commentBefore);t.unshift(tl.indentComment(l,""))}let o=!1,a=null;if(i.contents){if(U3.isNode(i.contents)){if(i.contents.spaceBefore&&r&&t.push(""),i.contents.commentBefore){let u=s(i.contents.commentBefore);t.push(tl.indentComment(u,""))}n.forceBlockIndent=!!i.comment,a=i.contents.comment}let l=a?void 0:()=>o=!0,c=xg.stringify(i.contents,n,()=>a=null,l);a&&(c+=tl.lineComment(c,"",s(a))),(c[0]==="|"||c[0]===">")&&t[t.length-1]==="---"?t[t.length-1]="--- ".concat(c):t.push(c)}else t.push(xg.stringify(i.contents,n));if(i.directives?.docEnd)if(i.comment){let l=s(i.comment);l.includes("\n")?(t.push("..."),t.push(tl.indentComment(l,""))):t.push("... ".concat(l))}else t.push("...");else{let l=i.comment;l&&o&&(l=l.replace(/^\n+/,"")),l&&((!o||a)&&t[t.length-1]!==""&&t.push(""),t.push(tl.indentComment(s(l),"")))}return t.join("\n")+"\n"}_N.stringifyDocument=B3});var il=A(TN=>{"use strict";var j3=Ma(),zs=Lu(),Kt=Q(),H3=Dr(),W3=Cr(),G3=Lg(),V3=ON(),kg=Iu(),z3=Mm(),Y3=Ua(),Fg=qm(),$g=class i{constructor(e,t,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Kt.NODE_TYPE,{value:Kt.DOC});let n=null;typeof t=="function"||Array.isArray(t)?n=t:r===void 0&&t&&(r=t,t=void 0);let s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=s;let{version:o}=s;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Fg.Directives({version:o}),this.setSchema(o,r),this.contents=e===void 0?null:this.createNode(e,n,r)}clone(){let e=Object.create(i.prototype,{[Kt.NODE_TYPE]:{value:Kt.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Kt.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Ys(this.contents)&&this.contents.add(e)}addIn(e,t){Ys(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){let r=kg.anchorNames(this);e.anchor=!t||r.has(t)?kg.findNewAnchor(t||"a",r):t}return new j3.Alias(e.anchor)}createNode(e,t,r){let n;if(typeof t=="function")e=t.call({"":e},"",e),n=t;else if(Array.isArray(t)){let w=v=>typeof v=="number"||v instanceof String||v instanceof Number,S=t.filter(w).map(String);S.length>0&&(t=t.concat(S)),n=t}else r===void 0&&t&&(r=t,t=void 0);let{aliasDuplicateObjects:s,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:c,tag:u}=r??{},{onAnchor:f,setAnchors:h,sourceObjects:d}=kg.createNodeAnchors(this,o||"a"),y={aliasDuplicateObjects:s??!0,keepUndefined:l??!1,onAnchor:f,onTagObj:c,replacer:n,schema:this.schema,sourceObjects:d},g=Y3.createNode(e,u,y);return a&&Kt.isCollection(g)&&(g.flow=!0),h(),g}createPair(e,t,r={}){let n=this.createNode(e,null,r),s=this.createNode(t,null,r);return new H3.Pair(n,s)}delete(e){return Ys(this.contents)?this.contents.delete(e):!1}deleteIn(e){return zs.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):Ys(this.contents)?this.contents.deleteIn(e):!1}get(e,t){return Kt.isCollection(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return zs.isEmptyPath(e)?!t&&Kt.isScalar(this.contents)?this.contents.value:this.contents:Kt.isCollection(this.contents)?this.contents.getIn(e,t):void 0}has(e){return Kt.isCollection(this.contents)?this.contents.has(e):!1}hasIn(e){return zs.isEmptyPath(e)?this.contents!==void 0:Kt.isCollection(this.contents)?this.contents.hasIn(e):!1}set(e,t){this.contents==null?this.contents=zs.collectionFromPath(this.schema,[e],t):Ys(this.contents)&&this.contents.set(e,t)}setIn(e,t){zs.isEmptyPath(e)?this.contents=t:this.contents==null?this.contents=zs.collectionFromPath(this.schema,Array.from(e),t):Ys(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){typeof e=="number"&&(e=String(e));let r;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Fg.Directives({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Fg.Directives({version:e}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{let n=JSON.stringify(e);throw new Error("Expected '1.1', '1.2' or null as first argument, but found: ".concat(n))}}if(t.schema instanceof Object)this.schema=t.schema;else if(r)this.schema=new G3.Schema(Object.assign(r,t));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:r,maxAliasCount:n,onAnchor:s,reviver:o}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},l=W3.toJS(this.contents,t??"",a);if(typeof s=="function")for(let{count:c,res:u}of a.anchors.values())s(u,c);return typeof o=="function"?z3.applyReviver(o,{"":l},"",l):l}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let t=JSON.stringify(e.indent);throw new Error('"indent" option must be a positive integer, not '.concat(t))}return V3.stringifyDocument(this,e)}};function Ys(i){if(Kt.isCollection(i))return!0;throw new Error("Expected a YAML collection as document contents")}TN.Document=$g});var sl=A(nl=>{"use strict";var rl=class extends Error{constructor(e,t,r,n){super(),this.name=e,this.code=r,this.message=n,this.pos=t}},qg=class extends rl{constructor(e,t,r){super("YAMLParseError",e,t,r)}},Mg=class extends rl{constructor(e,t,r){super("YAMLWarning",e,t,r)}},K3=(i,e)=>t=>{if(t.pos[0]===-1)return;t.linePos=t.pos.map(a=>e.linePos(a));let{line:r,col:n}=t.linePos[0];t.message+=" at line ".concat(r,", column ").concat(n);let s=n-1,o=i.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(s>=60&&o.length>80){let a=Math.min(s-39,o.length-79);o="\u2026"+o.substring(a),s-=a-1}if(o.length>80&&(o=o.substring(0,79)+"\u2026"),r>1&&/^ *$/.test(o.substring(0,s))){let a=i.substring(e.lineStarts[r-2],e.lineStarts[r-1]);a.length>80&&(a=a.substring(0,79)+"\u2026\n"),o=a+o}if(/[^ ]/.test(o)){let a=1,l=t.linePos[1];l&&l.line===r&&l.col>n&&(a=Math.max(1,Math.min(l.col-n,80-s)));let c=" ".repeat(s)+"^".repeat(a);t.message+=":\n\n".concat(o,"\n").concat(c,"\n")}};nl.YAMLError=rl;nl.YAMLParseError=qg;nl.YAMLWarning=Mg;nl.prettifyError=K3});var ol=A(CN=>{"use strict";function Q3(i,{flow:e,indicator:t,next:r,offset:n,onError:s,parentIndent:o,startOnNewline:a}){let l=!1,c=a,u=a,f="",h="",d=!1,y=!1,g=null,w=null,S=null,v=null,T=null,N=null,P=null;for(let b of i)switch(y&&(b.type!=="space"&&b.type!=="newline"&&b.type!=="comma"&&s(b.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),y=!1),g&&(c&&b.type!=="comment"&&b.type!=="newline"&&s(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),g=null),b.type){case"space":!e&&(t!=="doc-start"||r?.type!=="flow-collection")&&b.source.includes("	")&&(g=b),u=!0;break;case"comment":{u||s(b,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let D=b.source.substring(1)||" ";f?f+=h+D:f=D,h="",c=!1;break}case"newline":c?f?f+=b.source:(!N||t!=="seq-item-ind")&&(l=!0):h+=b.source,c=!0,d=!0,(w||S)&&(v=b),u=!0;break;case"anchor":w&&s(b,"MULTIPLE_ANCHORS","A node can have at most one anchor"),b.source.endsWith(":")&&s(b.offset+b.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),w=b,P??(P=b.offset),c=!1,u=!1,y=!0;break;case"tag":{S&&s(b,"MULTIPLE_TAGS","A node can have at most one tag"),S=b,P??(P=b.offset),c=!1,u=!1,y=!0;break}case t:(w||S)&&s(b,"BAD_PROP_ORDER","Anchors and tags must be after the ".concat(b.source," indicator")),N&&s(b,"UNEXPECTED_TOKEN","Unexpected ".concat(b.source," in ").concat(e??"collection")),N=b,c=t==="seq-item-ind"||t==="explicit-key-ind",u=!1;break;case"comma":if(e){T&&s(b,"UNEXPECTED_TOKEN","Unexpected , in ".concat(e)),T=b,c=!1,u=!1;break}default:s(b,"UNEXPECTED_TOKEN","Unexpected ".concat(b.type," token")),c=!1,u=!1}let R=i[i.length-1],x=R?R.offset+R.source.length:n;return y&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&s(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),g&&(c&&g.indent<=o||r?.type==="block-map"||r?.type==="block-seq")&&s(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:T,found:N,spaceBefore:l,comment:f,hasNewline:d,anchor:w,tag:S,newlineAfterProp:v,end:x,start:P??x}}CN.resolveProps=Q3});var pf=A(NN=>{"use strict";function Ug(i){if(!i)return null;switch(i.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(i.source.includes("\n"))return!0;if(i.end){for(let e of i.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of i.items){for(let t of e.start)if(t.type==="newline")return!0;if(e.sep){for(let t of e.sep)if(t.type==="newline")return!0}if(Ug(e.key)||Ug(e.value))return!0}return!1;default:return!0}}NN.containsNewline=Ug});var Bg=A(IN=>{"use strict";var X3=pf();function J3(i,e,t){if(e?.type==="flow-collection"){let r=e.end[0];r.indent===i&&(r.source==="]"||r.source==="}")&&X3.containsNewline(e)&&t(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}IN.flowIndentCheck=J3});var jg=A(DN=>{"use strict";var RN=Q();function Z3(i,e,t){let{uniqueKeys:r}=i.options;if(r===!1)return!1;let n=typeof r=="function"?r:(s,o)=>s===o||RN.isScalar(s)&&RN.isScalar(o)&&s.value===o.value;return e.some(s=>n(s.key,t))}DN.mapIncludes=Z3});var $N=A(FN=>{"use strict";var PN=Dr(),eV=Lr(),LN=ol(),tV=pf(),xN=Bg(),iV=jg(),kN="All mapping items must start at the same column";function rV({composeNode:i,composeEmptyNode:e},t,r,n,s){let o=s?.nodeClass??eV.YAMLMap,a=new o(t.schema);t.atRoot&&(t.atRoot=!1);let l=r.offset,c=null;for(let u of r.items){let{start:f,key:h,sep:d,value:y}=u,g=LN.resolveProps(f,{indicator:"explicit-key-ind",next:h??d?.[0],offset:l,onError:n,parentIndent:r.indent,startOnNewline:!0}),w=!g.found;if(w){if(h&&(h.type==="block-seq"?n(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in h&&h.indent!==r.indent&&n(l,"BAD_INDENT",kN)),!g.anchor&&!g.tag&&!d){c=g.end,g.comment&&(a.comment?a.comment+="\n"+g.comment:a.comment=g.comment);continue}(g.newlineAfterProp||tV.containsNewline(h))&&n(h??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else g.found?.indent!==r.indent&&n(l,"BAD_INDENT",kN);t.atKey=!0;let S=g.end,v=h?i(t,h,g,n):e(t,S,f,null,g,n);t.schema.compat&&xN.flowIndentCheck(r.indent,h,n),t.atKey=!1,iV.mapIncludes(t,a.items,v)&&n(S,"DUPLICATE_KEY","Map keys must be unique");let T=LN.resolveProps(d??[],{indicator:"map-value-ind",next:y,offset:v.range[2],onError:n,parentIndent:r.indent,startOnNewline:!h||h.type==="block-scalar"});if(l=T.end,T.found){w&&(y?.type==="block-map"&&!T.hasNewline&&n(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),t.options.strict&&g.start<T.found.offset-1024&&n(v.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let N=y?i(t,y,T,n):e(t,l,d,null,T,n);t.schema.compat&&xN.flowIndentCheck(r.indent,y,n),l=N.range[2];let P=new PN.Pair(v,N);t.options.keepSourceTokens&&(P.srcToken=u),a.items.push(P)}else{w&&n(v.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),T.comment&&(v.comment?v.comment+="\n"+T.comment:v.comment=T.comment);let N=new PN.Pair(v);t.options.keepSourceTokens&&(N.srcToken=u),a.items.push(N)}}return c&&c<l&&n(c,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,l,c??l],a}FN.resolveBlockMap=rV});var MN=A(qN=>{"use strict";var nV=xr(),sV=ol(),oV=Bg();function aV({composeNode:i,composeEmptyNode:e},t,r,n,s){let o=s?.nodeClass??nV.YAMLSeq,a=new o(t.schema);t.atRoot&&(t.atRoot=!1),t.atKey&&(t.atKey=!1);let l=r.offset,c=null;for(let{start:u,value:f}of r.items){let h=sV.resolveProps(u,{indicator:"seq-item-ind",next:f,offset:l,onError:n,parentIndent:r.indent,startOnNewline:!0});if(!h.found)if(h.anchor||h.tag||f)f&&f.type==="block-seq"?n(h.end,"BAD_INDENT","All sequence items must start at the same column"):n(l,"MISSING_CHAR","Sequence item without - indicator");else{c=h.end,h.comment&&(a.comment=h.comment);continue}let d=f?i(t,f,h,n):e(t,h.end,u,null,h,n);t.schema.compat&&oV.flowIndentCheck(r.indent,f,n),l=d.range[2],a.items.push(d)}return a.range=[r.offset,l,c??l],a}qN.resolveBlockSeq=aV});var Ks=A(UN=>{"use strict";function lV(i,e,t,r){let n="";if(i){let s=!1,o="";for(let a of i){let{source:l,type:c}=a;switch(c){case"space":s=!0;break;case"comment":{t&&!s&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=l.substring(1)||" ";n?n+=o+u:n=u,o="";break}case"newline":n&&(o+=l),s=!0;break;default:r(a,"UNEXPECTED_TOKEN","Unexpected ".concat(c," at node end"))}e+=l.length}}return{comment:n,offset:e}}UN.resolveEnd=lV});var WN=A(HN=>{"use strict";var cV=Q(),uV=Dr(),BN=Lr(),fV=xr(),hV=Ks(),jN=ol(),dV=pf(),pV=jg(),Hg="Block collections are not allowed within flow collections",Wg=i=>i&&(i.type==="block-map"||i.type==="block-seq");function mV({composeNode:i,composeEmptyNode:e},t,r,n,s){let o=r.start.source==="{",a=o?"flow map":"flow sequence",l=s?.nodeClass??(o?BN.YAMLMap:fV.YAMLSeq),c=new l(t.schema);c.flow=!0;let u=t.atRoot;u&&(t.atRoot=!1),t.atKey&&(t.atKey=!1);let f=r.offset+r.start.source.length;for(let w=0;w<r.items.length;++w){let S=r.items[w],{start:v,key:T,sep:N,value:P}=S,R=jN.resolveProps(v,{flow:a,indicator:"explicit-key-ind",next:T??N?.[0],offset:f,onError:n,parentIndent:r.indent,startOnNewline:!1});if(!R.found){if(!R.anchor&&!R.tag&&!N&&!P){w===0&&R.comma?n(R.comma,"UNEXPECTED_TOKEN","Unexpected , in ".concat(a)):w<r.items.length-1&&n(R.start,"UNEXPECTED_TOKEN","Unexpected empty item in ".concat(a)),R.comment&&(c.comment?c.comment+="\n"+R.comment:c.comment=R.comment),f=R.end;continue}!o&&t.options.strict&&dV.containsNewline(T)&&n(T,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(w===0)R.comma&&n(R.comma,"UNEXPECTED_TOKEN","Unexpected , in ".concat(a));else if(R.comma||n(R.start,"MISSING_CHAR","Missing , between ".concat(a," items")),R.comment){let x="";e:for(let b of v)switch(b.type){case"comma":case"space":break;case"comment":x=b.source.substring(1);break e;default:break e}if(x){let b=c.items[c.items.length-1];cV.isPair(b)&&(b=b.value??b.key),b.comment?b.comment+="\n"+x:b.comment=x,R.comment=R.comment.substring(x.length+1)}}if(!o&&!N&&!R.found){let x=P?i(t,P,R,n):e(t,R.end,N,null,R,n);c.items.push(x),f=x.range[2],Wg(P)&&n(x.range,"BLOCK_IN_FLOW",Hg)}else{t.atKey=!0;let x=R.end,b=T?i(t,T,R,n):e(t,x,v,null,R,n);Wg(T)&&n(b.range,"BLOCK_IN_FLOW",Hg),t.atKey=!1;let D=jN.resolveProps(N??[],{flow:a,indicator:"map-value-ind",next:P,offset:b.range[2],onError:n,parentIndent:r.indent,startOnNewline:!1});if(D.found){if(!o&&!R.found&&t.options.strict){if(N)for(let U of N){if(U===D.found)break;if(U.type==="newline"){n(U,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}R.start<D.found.offset-1024&&n(D.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else P&&("source"in P&&P.source&&P.source[0]===":"?n(P,"MISSING_CHAR","Missing space after : in ".concat(a)):n(D.start,"MISSING_CHAR","Missing , or : between ".concat(a," items")));let B=P?i(t,P,D,n):D.found?e(t,D.end,N,null,D,n):null;B?Wg(P)&&n(B.range,"BLOCK_IN_FLOW",Hg):D.comment&&(b.comment?b.comment+="\n"+D.comment:b.comment=D.comment);let k=new uV.Pair(b,B);if(t.options.keepSourceTokens&&(k.srcToken=S),o){let U=c;pV.mapIncludes(t,U.items,b)&&n(x,"DUPLICATE_KEY","Map keys must be unique"),U.items.push(k)}else{let U=new BN.YAMLMap(t.schema);U.flow=!0,U.items.push(k);let ce=(B??b).range;U.range=[b.range[0],ce[1],ce[2]],c.items.push(U)}f=B?B.range[2]:D.end}}let h=o?"}":"]",[d,...y]=r.end,g=f;if(d&&d.source===h)g=d.offset+d.source.length;else{let w=a[0].toUpperCase()+a.substring(1),S=u?"".concat(w," must end with a ").concat(h):"".concat(w," in block collection must be sufficiently indented and end with a ").concat(h);n(f,u?"MISSING_CHAR":"BAD_INDENT",S),d&&d.source.length!==1&&y.unshift(d)}if(y.length>0){let w=hV.resolveEnd(y,g,t.options.strict,n);w.comment&&(c.comment?c.comment+="\n"+w.comment:c.comment=w.comment),c.range=[r.offset,g,w.offset]}else c.range=[r.offset,g,g];return c}HN.resolveFlowCollection=mV});var VN=A(GN=>{"use strict";var gV=Q(),yV=Ce(),wV=Lr(),AV=xr(),EV=$N(),bV=MN(),SV=WN();function Gg(i,e,t,r,n,s){let o=t.type==="block-map"?EV.resolveBlockMap(i,e,t,r,s):t.type==="block-seq"?bV.resolveBlockSeq(i,e,t,r,s):SV.resolveFlowCollection(i,e,t,r,s),a=o.constructor;return n==="!"||n===a.tagName?(o.tag=a.tagName,o):(n&&(o.tag=n),o)}function vV(i,e,t,r,n){let s=r.tag,o=s?e.directives.tagName(s.source,h=>n(s,"TAG_RESOLVE_FAILED",h)):null;if(t.type==="block-seq"){let{anchor:h,newlineAfterProp:d}=r,y=h&&s?h.offset>s.offset?h:s:h??s;y&&(!d||d.offset<y.offset)&&n(y,"MISSING_CHAR","Missing newline after block sequence props")}let a=t.type==="block-map"?"map":t.type==="block-seq"?"seq":t.start.source==="{"?"map":"seq";if(!s||!o||o==="!"||o===wV.YAMLMap.tagName&&a==="map"||o===AV.YAMLSeq.tagName&&a==="seq")return Gg(i,e,t,n,o);let l=e.schema.tags.find(h=>h.tag===o&&h.collection===a);if(!l){let h=e.schema.knownTags[o];if(h&&h.collection===a)e.schema.tags.push(Object.assign({},h,{default:!1})),l=h;else return h?n(s,"BAD_COLLECTION_TYPE","".concat(h.tag," used for ").concat(a," collection, but expects ").concat(h.collection??"scalar"),!0):n(s,"TAG_RESOLVE_FAILED","Unresolved tag: ".concat(o),!0),Gg(i,e,t,n,o)}let c=Gg(i,e,t,n,o,l),u=l.resolve?.(c,h=>n(s,"TAG_RESOLVE_FAILED",h),e.options)??c,f=gV.isNode(u)?u:new yV.Scalar(u);return f.range=c.range,f.tag=o,l?.format&&(f.format=l.format),f}GN.composeCollection=vV});var zg=A(zN=>{"use strict";var Vg=Ce();function _V(i,e,t){let r=e.offset,n=OV(e,i.options.strict,t);if(!n)return{value:"",type:null,comment:"",range:[r,r,r]};let s=n.mode===">"?Vg.Scalar.BLOCK_FOLDED:Vg.Scalar.BLOCK_LITERAL,o=e.source?TV(e.source):[],a=o.length;for(let g=o.length-1;g>=0;--g){let w=o[g][1];if(w===""||w==="\r")a=g;else break}if(a===0){let g=n.chomp==="+"&&o.length>0?"\n".repeat(Math.max(1,o.length-1)):"",w=r+n.length;return e.source&&(w+=e.source.length),{value:g,type:s,comment:n.comment,range:[r,w,w]}}let l=e.indent+n.indent,c=e.offset+n.length,u=0;for(let g=0;g<a;++g){let[w,S]=o[g];if(S===""||S==="\r")n.indent===0&&w.length>l&&(l=w.length);else{w.length<l&&t(c+w.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),n.indent===0&&(l=w.length),u=g,l===0&&!i.atRoot&&t(c,"BAD_INDENT","Block scalar values in collections must be indented");break}c+=w.length+S.length+1}for(let g=o.length-1;g>=a;--g)o[g][0].length>l&&(a=g+1);let f="",h="",d=!1;for(let g=0;g<u;++g)f+=o[g][0].slice(l)+"\n";for(let g=u;g<a;++g){let[w,S]=o[g];c+=w.length+S.length+1;let v=S[S.length-1]==="\r";if(v&&(S=S.slice(0,-1)),S&&w.length<l){let T=n.indent?"explicit indentation indicator":"first line",N="Block scalar lines must not be less indented than their ".concat(T);t(c-S.length-(v?2:1),"BAD_INDENT",N),w=""}s===Vg.Scalar.BLOCK_LITERAL?(f+=h+w.slice(l)+S,h="\n"):w.length>l||S[0]==="	"?(h===" "?h="\n":!d&&h==="\n"&&(h="\n\n"),f+=h+w.slice(l)+S,h="\n",d=!0):S===""?h==="\n"?f+="\n":h="\n":(f+=h+S,h=" ",d=!1)}switch(n.chomp){case"-":break;case"+":for(let g=a;g<o.length;++g)f+="\n"+o[g][0].slice(l);f[f.length-1]!=="\n"&&(f+="\n");break;default:f+="\n"}let y=r+n.length+e.source.length;return{value:f,type:s,comment:n.comment,range:[r,y,y]}}function OV({offset:i,props:e},t,r){if(e[0].type!=="block-scalar-header")return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:n}=e[0],s=n[0],o=0,a="",l=-1;for(let h=1;h<n.length;++h){let d=n[h];if(!a&&(d==="-"||d==="+"))a=d;else{let y=Number(d);!o&&y?o=y:l===-1&&(l=i+h)}}l!==-1&&r(l,"UNEXPECTED_TOKEN","Block scalar header includes extra characters: ".concat(n));let c=!1,u="",f=n.length;for(let h=1;h<e.length;++h){let d=e[h];switch(d.type){case"space":c=!0;case"newline":f+=d.source.length;break;case"comment":t&&!c&&r(d,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=d.source.length,u=d.source.substring(1);break;case"error":r(d,"UNEXPECTED_TOKEN",d.message),f+=d.source.length;break;default:{let y="Unexpected token in block scalar header: ".concat(d.type);r(d,"UNEXPECTED_TOKEN",y);let g=d.source;g&&typeof g=="string"&&(f+=g.length)}}}return{mode:s,indent:o,chomp:a,comment:u,length:f}}function TV(i){let e=i.split(/\n( *)/),t=e[0],r=t.match(/^( *)/),s=[r?.[1]?[r[1],t.slice(r[1].length)]:["",t]];for(let o=1;o<e.length;o+=2)s.push([e[o],e[o+1]]);return s}zN.resolveBlockScalar=_V});var Kg=A(KN=>{"use strict";var Yg=Ce(),CV=Ks();function NV(i,e,t){let{offset:r,type:n,source:s,end:o}=i,a,l,c=(h,d,y)=>t(r+h,d,y);switch(n){case"scalar":a=Yg.Scalar.PLAIN,l=IV(s,c);break;case"single-quoted-scalar":a=Yg.Scalar.QUOTE_SINGLE,l=RV(s,c);break;case"double-quoted-scalar":a=Yg.Scalar.QUOTE_DOUBLE,l=DV(s,c);break;default:return t(i,"UNEXPECTED_TOKEN","Expected a flow scalar value, but found: ".concat(n)),{value:"",type:null,comment:"",range:[r,r+s.length,r+s.length]}}let u=r+s.length,f=CV.resolveEnd(o,u,e,t);return{value:l,type:a,comment:f.comment,range:[r,u,f.offset]}}function IV(i,e){let t="";switch(i[0]){case"	":t="a tab character";break;case",":t="flow indicator character ,";break;case"%":t="directive indicator character %";break;case"|":case">":{t="block scalar indicator ".concat(i[0]);break}case"@":case"`":{t="reserved character ".concat(i[0]);break}}return t&&e(0,"BAD_SCALAR_START","Plain value cannot start with ".concat(t)),YN(i)}function RV(i,e){return(i[i.length-1]!=="'"||i.length===1)&&e(i.length,"MISSING_CHAR","Missing closing 'quote"),YN(i.slice(1,-1)).replace(/''/g,"'")}function YN(i){let e,t;try{e=new RegExp("(.*?)(?<![ 	])[ 	]*\r?\n","sy"),t=new RegExp("[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?\n","sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,t=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(i);if(!r)return i;let n=r[1],s=" ",o=e.lastIndex;for(t.lastIndex=o;r=t.exec(i);)r[1]===""?s==="\n"?n+=s:s="\n":(n+=s+r[1],s=" "),o=t.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=o,r=a.exec(i),n+s+(r?.[1]??"")}function DV(i,e){let t="";for(let r=1;r<i.length-1;++r){let n=i[r];if(!(n==="\r"&&i[r+1]==="\n"))if(n==="\n"){let{fold:s,offset:o}=PV(i,r);t+=s,r=o}else if(n==="\\"){let s=i[++r],o=LV[s];if(o)t+=o;else if(s==="\n")for(s=i[r+1];s===" "||s==="	";)s=i[++r+1];else if(s==="\r"&&i[r+1]==="\n")for(s=i[++r+1];s===" "||s==="	";)s=i[++r+1];else if(s==="x"||s==="u"||s==="U"){let a={x:2,u:4,U:8}[s];t+=xV(i,r+1,a,e),r+=a}else{let a=i.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE","Invalid escape sequence ".concat(a)),t+=a}}else if(n===" "||n==="	"){let s=r,o=i[r+1];for(;o===" "||o==="	";)o=i[++r+1];o!=="\n"&&!(o==="\r"&&i[r+2]==="\n")&&(t+=r>s?i.slice(s,r+1):n)}else t+=n}return(i[i.length-1]!=='"'||i.length===1)&&e(i.length,"MISSING_CHAR",'Missing closing "quote'),t}function PV(i,e){let t="",r=i[e+1];for(;(r===" "||r==="	"||r==="\n"||r==="\r")&&!(r==="\r"&&i[e+2]!=="\n");)r==="\n"&&(t+="\n"),e+=1,r=i[e+1];return t||(t=" "),{fold:t,offset:e}}var LV={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:"\n",r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function xV(i,e,t,r){let n=i.substr(e,t),o=n.length===t&&/^[0-9a-fA-F]+$/.test(n)?parseInt(n,16):NaN;if(isNaN(o)){let a=i.substr(e-2,t+2);return r(e-2,"BAD_DQ_ESCAPE","Invalid escape sequence ".concat(a)),a}return String.fromCodePoint(o)}KN.resolveFlowScalar=NV});var JN=A(XN=>{"use strict";var Pn=Q(),QN=Ce(),kV=zg(),FV=Kg();function $V(i,e,t,r){let{value:n,type:s,comment:o,range:a}=e.type==="block-scalar"?kV.resolveBlockScalar(i,e,r):FV.resolveFlowScalar(e,i.options.strict,r),l=t?i.directives.tagName(t.source,f=>r(t,"TAG_RESOLVE_FAILED",f)):null,c;i.options.stringKeys&&i.atKey?c=i.schema[Pn.SCALAR]:l?c=qV(i.schema,n,l,t,r):e.type==="scalar"?c=MV(i,n,e,r):c=i.schema[Pn.SCALAR];let u;try{let f=c.resolve(n,h=>r(t??e,"TAG_RESOLVE_FAILED",h),i.options);u=Pn.isScalar(f)?f:new QN.Scalar(f)}catch(f){let h=f instanceof Error?f.message:String(f);r(t??e,"TAG_RESOLVE_FAILED",h),u=new QN.Scalar(n)}return u.range=a,u.source=n,s&&(u.type=s),l&&(u.tag=l),c.format&&(u.format=c.format),o&&(u.comment=o),u}function qV(i,e,t,r,n){if(t==="!")return i[Pn.SCALAR];let s=[];for(let a of i.tags)if(!a.collection&&a.tag===t)if(a.default&&a.test)s.push(a);else return a;for(let a of s)if(a.test?.test(e))return a;let o=i.knownTags[t];return o&&!o.collection?(i.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(n(r,"TAG_RESOLVE_FAILED","Unresolved tag: ".concat(t),t!=="tag:yaml.org,2002:str"),i[Pn.SCALAR])}function MV({atKey:i,directives:e,schema:t},r,n,s){let o=t.tags.find(a=>(a.default===!0||i&&a.default==="key")&&a.test?.test(r))||t[Pn.SCALAR];if(t.compat){let a=t.compat.find(l=>l.default&&l.test?.test(r))??t[Pn.SCALAR];if(o.tag!==a.tag){let l=e.tagString(o.tag),c=e.tagString(a.tag),u="Value may be parsed as either ".concat(l," or ").concat(c);s(n,"TAG_RESOLVE_FAILED",u,!0)}}return o}XN.composeScalar=$V});var eI=A(ZN=>{"use strict";function UV(i,e,t){if(e){t??(t=e.length);for(let r=t-1;r>=0;--r){let n=e[r];switch(n.type){case"space":case"comment":case"newline":i-=n.source.length;continue}for(n=e[++r];n?.type==="space";)i+=n.source.length,n=e[++r];break}}return i}ZN.emptyScalarPosition=UV});var rI=A(Xg=>{"use strict";var BV=Ma(),jV=Q(),HV=VN(),tI=JN(),WV=Ks(),GV=eI(),VV={composeNode:iI,composeEmptyNode:Qg};function iI(i,e,t,r){let n=i.atKey,{spaceBefore:s,comment:o,anchor:a,tag:l}=t,c,u=!0;switch(e.type){case"alias":c=zV(i,e,r),(a||l)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=tI.composeScalar(i,e,l,r),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=HV.composeCollection(VV,i,e,t,r),a&&(c.anchor=a.source.substring(1));break;default:{let f=e.type==="error"?e.message:"Unsupported token (type: ".concat(e.type,")");r(e,"UNEXPECTED_TOKEN",f),c=Qg(i,e.offset,void 0,null,t,r),u=!1}}return a&&c.anchor===""&&r(a,"BAD_ALIAS","Anchor cannot be an empty string"),n&&i.options.stringKeys&&(!jV.isScalar(c)||typeof c.value!="string"||c.tag&&c.tag!=="tag:yaml.org,2002:str")&&r(l??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),i.options.keepSourceTokens&&u&&(c.srcToken=e),c}function Qg(i,e,t,r,{spaceBefore:n,comment:s,anchor:o,tag:a,end:l},c){let u={type:"scalar",offset:GV.emptyScalarPosition(e,t,r),indent:-1,source:""},f=tI.composeScalar(i,u,a,c);return o&&(f.anchor=o.source.substring(1),f.anchor===""&&c(o,"BAD_ALIAS","Anchor cannot be an empty string")),n&&(f.spaceBefore=!0),s&&(f.comment=s,f.range[2]=l),f}function zV({options:i},{offset:e,source:t,end:r},n){let s=new BV.Alias(t.substring(1));s.source===""&&n(e,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&n(e+t.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let o=e+t.length,a=WV.resolveEnd(r,o,i.strict,n);return s.range=[e,o,a.offset],a.comment&&(s.comment=a.comment),s}Xg.composeEmptyNode=Qg;Xg.composeNode=iI});var oI=A(sI=>{"use strict";var YV=il(),nI=rI(),KV=Ks(),QV=ol();function XV(i,e,{offset:t,start:r,value:n,end:s},o){let a=Object.assign({_directives:e},i),l=new YV.Document(void 0,a),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=QV.resolveProps(r,{indicator:"doc-start",next:n??s?.[0],offset:t,onError:o,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,n&&(n.type==="block-map"||n.type==="block-seq")&&!u.hasNewline&&o(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=n?nI.composeNode(c,n,u,o):nI.composeEmptyNode(c,u.end,r,null,u,o);let f=l.contents.range[2],h=KV.resolveEnd(s,f,!1,o);return h.comment&&(l.comment=h.comment),l.range=[t,f,h.offset],l}sI.composeDoc=XV});var Zg=A(cI=>{"use strict";var JV=require("process"),ZV=qm(),e9=il(),al=sl(),aI=Q(),t9=oI(),i9=Ks();function ll(i){if(typeof i=="number")return[i,i+1];if(Array.isArray(i))return i.length===2?i:[i[0],i[1]];let{offset:e,source:t}=i;return[e,e+(typeof t=="string"?t.length:1)]}function lI(i){let e="",t=!1,r=!1;for(let n=0;n<i.length;++n){let s=i[n];switch(s[0]){case"#":e+=(e===""?"":r?"\n\n":"\n")+(s.substring(1)||" "),t=!0,r=!1;break;case"%":i[n+1]?.[0]!=="#"&&(n+=1),t=!1;break;default:t||(r=!0),t=!1}}return{comment:e,afterEmptyLine:r}}var Jg=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,r,n,s)=>{let o=ll(t);s?this.warnings.push(new al.YAMLWarning(o,r,n)):this.errors.push(new al.YAMLParseError(o,r,n))},this.directives=new ZV.Directives({version:e.version||"1.2"}),this.options=e}decorate(e,t){let{comment:r,afterEmptyLine:n}=lI(this.prelude);if(r){let s=e.contents;if(t)e.comment=e.comment?"".concat(e.comment,"\n").concat(r):r;else if(n||e.directives.docStart||!s)e.commentBefore=r;else if(aI.isCollection(s)&&!s.flow&&s.items.length>0){let o=s.items[0];aI.isPair(o)&&(o=o.key);let a=o.commentBefore;o.commentBefore=a?"".concat(r,"\n").concat(a):r}else{let o=s.commentBefore;s.commentBefore=o?"".concat(r,"\n").concat(o):r}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:lI(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,r=-1){for(let n of e)yield*this.next(n);yield*this.end(t,r)}*next(e){switch(JV.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(t,r,n)=>{let s=ll(e);s[0]+=t,this.onError(s,"BAD_DIRECTIVE",r,n)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let t=t9.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let t=e.source?"".concat(e.message,": ").concat(JSON.stringify(e.source)):e.message,r=new al.YAMLParseError(ll(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){let r="Unexpected doc-end without preceding document";this.errors.push(new al.YAMLParseError(ll(e),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;let t=i9.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){let r=this.doc.comment;this.doc.comment=r?"".concat(r,"\n").concat(t.comment):t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new al.YAMLParseError(ll(e),"UNEXPECTED_TOKEN","Unsupported token ".concat(e.type)))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let r=Object.assign({_directives:this.directives},this.options),n=new e9.Document(void 0,r);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,t,t],this.decorate(n,!1),yield n}}};cI.Composer=Jg});var hI=A(mf=>{"use strict";var r9=zg(),n9=Kg(),s9=sl(),uI=Wa();function o9(i,e=!0,t){if(i){let r=(n,s,o)=>{let a=typeof n=="number"?n:Array.isArray(n)?n[0]:n.offset;if(t)t(a,s,o);else throw new s9.YAMLParseError([a,a+1],s,o)};switch(i.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return n9.resolveFlowScalar(i,e,r);case"block-scalar":return r9.resolveBlockScalar({options:{strict:e}},i,r)}}return null}function a9(i,e){let{implicitKey:t=!1,indent:r,inFlow:n=!1,offset:s=-1,type:o="PLAIN"}=e,a=uI.stringifyString({type:o,value:i},{implicitKey:t,indent:r>0?" ".repeat(r):"",inFlow:n,options:{blockQuote:!0,lineWidth:-1}}),l=e.end??[{type:"newline",offset:-1,indent:r,source:"\n"}];switch(a[0]){case"|":case">":{let c=a.indexOf("\n"),u=a.substring(0,c),f=a.substring(c+1)+"\n",h=[{type:"block-scalar-header",offset:s,indent:r,source:u}];return fI(h,l)||h.push({type:"newline",offset:-1,indent:r,source:"\n"}),{type:"block-scalar",offset:s,indent:r,props:h,source:f}}case'"':return{type:"double-quoted-scalar",offset:s,indent:r,source:a,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:r,source:a,end:l};default:return{type:"scalar",offset:s,indent:r,source:a,end:l}}}function l9(i,e,t={}){let{afterKey:r=!1,implicitKey:n=!1,inFlow:s=!1,type:o}=t,a="indent"in i?i.indent:null;if(r&&typeof a=="number"&&(a+=2),!o)switch(i.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{let c=i.props[0];if(c.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o=c.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}let l=uI.stringifyString({type:o,value:e},{implicitKey:n||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":c9(i,l);break;case'"':ey(i,l,"double-quoted-scalar");break;case"'":ey(i,l,"single-quoted-scalar");break;default:ey(i,l,"scalar")}}function c9(i,e){let t=e.indexOf("\n"),r=e.substring(0,t),n=e.substring(t+1)+"\n";if(i.type==="block-scalar"){let s=i.props[0];if(s.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s.source=r,i.source=n}else{let{offset:s}=i,o="indent"in i?i.indent:-1,a=[{type:"block-scalar-header",offset:s,indent:o,source:r}];fI(a,"end"in i?i.end:void 0)||a.push({type:"newline",offset:-1,indent:o,source:"\n"});for(let l of Object.keys(i))l!=="type"&&l!=="offset"&&delete i[l];Object.assign(i,{type:"block-scalar",indent:o,props:a,source:n})}}function fI(i,e){if(e)for(let t of e)switch(t.type){case"space":case"comment":i.push(t);break;case"newline":return i.push(t),!0}return!1}function ey(i,e,t){switch(i.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":i.type=t,i.source=e;break;case"block-scalar":{let r=i.props.slice(1),n=e.length;i.props[0].type==="block-scalar-header"&&(n-=i.props[0].source.length);for(let s of r)s.offset+=n;delete i.props,Object.assign(i,{type:t,source:e,end:r});break}case"block-map":case"block-seq":{let n={type:"newline",offset:i.offset+e.length,indent:i.indent,source:"\n"};delete i.items,Object.assign(i,{type:t,source:e,end:[n]});break}default:{let r="indent"in i?i.indent:-1,n="end"in i&&Array.isArray(i.end)?i.end.filter(s=>s.type==="space"||s.type==="comment"||s.type==="newline"):[];for(let s of Object.keys(i))s!=="type"&&s!=="offset"&&delete i[s];Object.assign(i,{type:t,indent:r,source:e,end:n})}}}mf.createScalarToken=a9;mf.resolveAsScalar=o9;mf.setScalarValue=l9});var pI=A(dI=>{"use strict";var u9=i=>"type"in i?yf(i):gf(i);function yf(i){switch(i.type){case"block-scalar":{let e="";for(let t of i.props)e+=yf(t);return e+i.source}case"block-map":case"block-seq":{let e="";for(let t of i.items)e+=gf(t);return e}case"flow-collection":{let e=i.start.source;for(let t of i.items)e+=gf(t);for(let t of i.end)e+=t.source;return e}case"document":{let e=gf(i);if(i.end)for(let t of i.end)e+=t.source;return e}default:{let e=i.source;if("end"in i&&i.end)for(let t of i.end)e+=t.source;return e}}}function gf({start:i,key:e,sep:t,value:r}){let n="";for(let s of i)n+=s.source;if(e&&(n+=yf(e)),t)for(let s of t)n+=s.source;return r&&(n+=yf(r)),n}dI.stringify=u9});var wI=A(yI=>{"use strict";var ty=Symbol("break visit"),f9=Symbol("skip children"),mI=Symbol("remove item");function Ln(i,e){"type"in i&&i.type==="document"&&(i={start:i.start,value:i.value}),gI(Object.freeze([]),i,e)}Ln.BREAK=ty;Ln.SKIP=f9;Ln.REMOVE=mI;Ln.itemAtPath=(i,e)=>{let t=i;for(let[r,n]of e){let s=t?.[r];if(s&&"items"in s)t=s.items[n];else return}return t};Ln.parentCollection=(i,e)=>{let t=Ln.itemAtPath(i,e.slice(0,-1)),r=e[e.length-1][0],n=t?.[r];if(n&&"items"in n)return n;throw new Error("Parent collection not found")};function gI(i,e,t){let r=t(e,i);if(typeof r=="symbol")return r;for(let n of["key","value"]){let s=e[n];if(s&&"items"in s){for(let o=0;o<s.items.length;++o){let a=gI(Object.freeze(i.concat([[n,o]])),s.items[o],t);if(typeof a=="number")o=a-1;else{if(a===ty)return ty;a===mI&&(s.items.splice(o,1),o-=1)}}typeof r=="function"&&n==="key"&&(r=r(e,i))}}return typeof r=="function"?r(e,i):r}yI.visit=Ln});var wf=A(St=>{"use strict";var iy=hI(),h9=pI(),d9=wI(),ry="\uFEFF",ny="",sy="",oy="",p9=i=>!!i&&"items"in i,m9=i=>!!i&&(i.type==="scalar"||i.type==="single-quoted-scalar"||i.type==="double-quoted-scalar"||i.type==="block-scalar");function g9(i){switch(i){case ry:return"<BOM>";case ny:return"<DOC>";case sy:return"<FLOW_END>";case oy:return"<SCALAR>";default:return JSON.stringify(i)}}function y9(i){switch(i){case ry:return"byte-order-mark";case ny:return"doc-mode";case sy:return"flow-error-end";case oy:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(i[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}St.createScalarToken=iy.createScalarToken;St.resolveAsScalar=iy.resolveAsScalar;St.setScalarValue=iy.setScalarValue;St.stringify=h9.stringify;St.visit=d9.visit;St.BOM=ry;St.DOCUMENT=ny;St.FLOW_END=sy;St.SCALAR=oy;St.isCollection=p9;St.isScalar=m9;St.prettyToken=g9;St.tokenType=y9});var cy=A(EI=>{"use strict";var cl=wf();function ci(i){switch(i){case void 0:case" ":case"\n":case"\r":case"	":return!0;default:return!1}}var AI=new Set("0123456789ABCDEFabcdef"),w9=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Af=new Set(",[]{}"),A9=new Set(" ,[]{}\n\r	"),ay=i=>!i||A9.has(i),ly=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!t;let r=this.next??"stream";for(;r&&(t||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;t===" "||t==="	";)t=this.buffer[++e];return!t||t==="#"||t==="\n"?!0:t==="\r"?this.buffer[e+1]==="\n":!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let r=0;for(;t===" ";)t=this.buffer[++r+e];if(t==="\r"){let n=this.buffer[r+e+1];if(n==="\n"||!n&&!this.atEnd)return e+r+1}return t==="\n"||r>=this.indentNext||!t&&!this.atEnd?e+r:-1}if(t==="-"||t==="."){let r=this.buffer.substr(e,3);if((r==="---"||r==="...")&&ci(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===cl.BOM&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let t=e.length,r=e.indexOf("#");for(;r!==-1;){let s=e[r-1];if(s===" "||s==="	"){t=r-1;break}else r=e.indexOf("#",r+1)}for(;;){let s=e[t-1];if(s===" "||s==="	")t-=1;else break}let n=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-n),this.pushNewline(),"stream"}if(this.atLineEnd()){let t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield cl.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let t=this.peek(3);if((t==="---"||t==="...")&&ci(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,t==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!ci(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&ci(t)){let r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(ay),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=yield*this.parseBlockScalarHeader(),t+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,r=-1;do e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=r=t):t=0,t+=yield*this.pushSpaces(!0);while(e+t>0);let n=this.getLine();if(n===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&n[0]!=="#"||r===0&&(n.startsWith("---")||n.startsWith("..."))&&ci(n[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(n[0]==="]"||n[0]==="}")))return this.flowLevel=0,yield cl.FLOW_END,yield*this.parseLineStart();let s=0;for(;n[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),n[s]){case void 0:return"flow";case"#":return yield*this.pushCount(n.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(ay),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let o=this.charAt(1);if(this.flowKey||ci(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),t=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;t!==-1&&this.buffer[t+1]==="'";)t=this.buffer.indexOf("'",t+2);else for(;t!==-1;){let s=0;for(;this.buffer[t-1-s]==="\\";)s+=1;if(s%2===0)break;t=this.buffer.indexOf('"',t+1)}let r=this.buffer.substring(0,t),n=r.indexOf("\n",this.pos);if(n!==-1){for(;n!==-1;){let s=this.continueScalar(n+1);if(s===-1)break;n=r.indexOf("\n",s)}n!==-1&&(t=n-(r[n-1]==="\r"?2:1))}if(t===-1){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let t=this.buffer[++e];if(t==="+")this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if(t!=="-")break}return yield*this.pushUntil(t=>ci(t)||t==="#")}*parseBlockScalar(){let e=this.pos-1,t=0,r;e:for(let s=this.pos;r=this.buffer[s];++s)switch(r){case" ":t+=1;break;case"\n":e=s,t=0;break;case"\r":{let o=this.buffer[s+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o==="\n")break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(t>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=t:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{let s=this.continueScalar(e+1);if(s===-1)break;e=this.buffer.indexOf("\n",s)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let n=e+1;for(r=this.buffer[n];r===" ";)r=this.buffer[++n];if(r==="	"){for(;r==="	"||r===" "||r==="\r"||r==="\n";)r=this.buffer[++n];e=n-1}else if(!this.blockScalarKeep)do{let s=e-1,o=this.buffer[s];o==="\r"&&(o=this.buffer[--s]);let a=s;for(;o===" ";)o=this.buffer[--s];if(o==="\n"&&s>=this.pos&&s+1+t>a)e=s;else break}while(!0);return yield cl.SCALAR,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,t=this.pos-1,r=this.pos-1,n;for(;n=this.buffer[++r];)if(n===":"){let s=this.buffer[r+1];if(ci(s)||e&&Af.has(s))break;t=r}else if(ci(n)){let s=this.buffer[r+1];if(n==="\r"&&(s==="\n"?(r+=1,n="\n",s=this.buffer[r+1]):t=r),s==="#"||e&&Af.has(s))break;if(n==="\n"){let o=this.continueScalar(r+1);if(o===-1)break;r=Math.max(r,o-2)}}else{if(e&&Af.has(n))break;t=r}return!n&&!this.atEnd?this.setNext("plain-scalar"):(yield cl.SCALAR,yield*this.pushToIndex(t+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){let r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(ay))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{let e=this.flowLevel>0,t=this.charAt(1);if(ci(t)||e&&Af.has(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,t=this.buffer[e];for(;!ci(t)&&t!==">";)t=this.buffer[++e];return yield*this.pushToIndex(t===">"?e+1:e,!1)}else{let e=this.pos+1,t=this.buffer[e];for(;t;)if(w9.has(t))t=this.buffer[++e];else if(t==="%"&&AI.has(this.buffer[e+1])&&AI.has(this.buffer[e+2]))t=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e==="\n"?yield*this.pushCount(1):e==="\r"&&this.charAt(1)==="\n"?yield*this.pushCount(2):0}*pushSpaces(e){let t=this.pos-1,r;do r=this.buffer[++t];while(r===" "||e&&r==="	");let n=t-this.pos;return n>0&&(yield this.buffer.substr(this.pos,n),this.pos=t),n}*pushUntil(e){let t=this.pos,r=this.buffer[t];for(;!e(r);)r=this.buffer[++t];return yield*this.pushToIndex(t,!1)}};EI.Lexer=ly});var fy=A(bI=>{"use strict";var uy=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,r=this.lineStarts.length;for(;t<r;){let s=t+r>>1;this.lineStarts[s]<e?t=s+1:r=s}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(t===0)return{line:0,col:e};let n=this.lineStarts[t-1];return{line:t,col:e-n+1}}}};bI.LineCounter=uy});var dy=A(TI=>{"use strict";var E9=require("process"),SI=wf(),b9=cy();function kr(i,e){for(let t=0;t<i.length;++t)if(i[t].type===e)return!0;return!1}function vI(i){for(let e=0;e<i.length;++e)switch(i[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function OI(i){switch(i?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Ef(i){switch(i.type){case"document":return i.start;case"block-map":{let e=i.items[i.items.length-1];return e.sep??e.start}case"block-seq":return i.items[i.items.length-1].start;default:return[]}}function Qs(i){if(i.length===0)return[];let e=i.length;e:for(;--e>=0;)switch(i[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;i[++e]?.type==="space";);return i.splice(e,i.length)}function _I(i){if(i.start.type==="flow-seq-start")for(let e of i.items)e.sep&&!e.value&&!kr(e.start,"explicit-key-ind")&&!kr(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,OI(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var hy=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new b9.Lexer,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let r of this.lexer.lex(e,t))yield*this.next(r);t||(yield*this.end())}*next(e){if(this.source=e,E9.env.LOG_TOKENS&&console.log("|",SI.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let t=SI.tokenType(e);if(t)if(t==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let r="Not a YAML token: ".concat(e);yield*this.pop({type:"error",offset:this.offset,message:r,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let t=e??this.stack.pop();if(!t)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield t;else{let r=this.peek(1);switch(t.type==="block-scalar"?t.indent="indent"in r?r.indent:0:t.type==="flow-collection"&&r.type==="document"&&(t.indent=0),t.type==="flow-collection"&&_I(t),r.type){case"document":r.value=t;break;case"block-scalar":r.props.push(t);break;case"block-map":{let n=r.items[r.items.length-1];if(n.value){r.items.push({start:[],key:t,sep:[]}),this.onKeyLine=!0;return}else if(n.sep)n.value=t;else{Object.assign(n,{key:t,sep:[]}),this.onKeyLine=!n.explicitKey;return}break}case"block-seq":{let n=r.items[r.items.length-1];n.value?r.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":{let n=r.items[r.items.length-1];!n||n.value?r.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]});return}default:yield*this.pop(),yield*this.pop(t)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(t.type==="block-map"||t.type==="block-seq")){let n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&vI(n.start)===-1&&(t.indent===0||n.start.every(s=>s.type!=="comment"||s.indent<t.indent))&&(r.type==="document"?r.end=n.start:r.items.push({start:n.start}),t.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:"Unexpected ".concat(this.type," token in YAML stream"),source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{vI(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:"Unexpected ".concat(this.type," token in YAML document"),source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let t=Ef(this.peek(2)),r=Qs(t),n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];let s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf("\n")+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){let t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){let r="end"in t.value?t.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){let n=e.items[e.items.length-2]?.value?.end;if(Array.isArray(n)){Array.prototype.push.apply(n,t.start),n.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let r=!this.onKeyLine&&this.indent===e.indent,n=r&&(t.sep||t.explicitKey)&&this.type!=="seq-item-ind",s=[];if(n&&t.sep&&!t.value){let o=[];for(let a=0;a<t.sep.length;++a){let l=t.sep[a];switch(l.type){case"newline":o.push(a);break;case"space":break;case"comment":l.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(s=t.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":n||t.value?(s.push(this.sourceToken),e.items.push({start:s}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"explicit-key-ind":!t.sep&&!t.explicitKey?(t.start.push(this.sourceToken),t.explicitKey=!0):n||t.value?(s.push(this.sourceToken),e.items.push({start:s,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(t.explicitKey)if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(kr(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(OI(t.key)&&!kr(t.sep,"newline")){let o=Qs(t.start),a=t.key,l=t.sep;l.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:l}]})}else s.length>0?t.sep=t.sep.concat(s,this.sourceToken):t.sep.push(this.sourceToken);else if(kr(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{let o=Qs(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||n?e.items.push({start:s,key:null,sep:[this.sourceToken]}):kr(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);n||t.value?(e.items.push({start:s,key:o,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(o):(Object.assign(t,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!t.explicitKey&&t.sep&&!kr(t.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else r&&e.items.push({start:s});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){let t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){let r="end"in t.value?t.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){let n=e.items[e.items.length-2]?.value?.end;if(Array.isArray(n)){Array.prototype.push.apply(n,t.start),n.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;t.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;t.value||kr(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return}if(this.indent>e.indent){let r=this.startBlockValue(e);if(r){this.stack.push(r);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let t=e.items[e.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return;case"map-value-ind":!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let n=this.flowScalar(this.type);!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{let r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===e.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){let n=Ef(r),s=Qs(n);_I(e);let o=e.end.splice(1,e.end.length);o.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let t=this.source.indexOf("\n")+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let t=Ef(e),r=Qs(t);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;let t=Ef(e),r=Qs(t);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return this.type!=="comment"||this.indent<=t?!1:e.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};TI.Parser=hy});var DI=A(fl=>{"use strict";var CI=Zg(),S9=il(),ul=sl(),v9=Xm(),_9=Q(),O9=fy(),NI=dy();function II(i){let e=i.prettyErrors!==!1;return{lineCounter:i.lineCounter||e&&new O9.LineCounter||null,prettyErrors:e}}function T9(i,e={}){let{lineCounter:t,prettyErrors:r}=II(e),n=new NI.Parser(t?.addNewLine),s=new CI.Composer(e),o=Array.from(s.compose(n.parse(i)));if(r&&t)for(let a of o)a.errors.forEach(ul.prettifyError(i,t)),a.warnings.forEach(ul.prettifyError(i,t));return o.length>0?o:Object.assign([],{empty:!0},s.streamInfo())}function RI(i,e={}){let{lineCounter:t,prettyErrors:r}=II(e),n=new NI.Parser(t?.addNewLine),s=new CI.Composer(e),o=null;for(let a of s.compose(n.parse(i),!0,i.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new ul.YAMLParseError(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&t&&(o.errors.forEach(ul.prettifyError(i,t)),o.warnings.forEach(ul.prettifyError(i,t))),o}function C9(i,e,t){let r;typeof e=="function"?r=e:t===void 0&&e&&typeof e=="object"&&(t=e);let n=RI(i,t);if(!n)return null;if(n.warnings.forEach(s=>v9.warn(n.options.logLevel,s)),n.errors.length>0){if(n.options.logLevel!=="silent")throw n.errors[0];n.errors=[]}return n.toJS(Object.assign({reviver:r},t))}function N9(i,e,t){let r=null;if(typeof e=="function"||Array.isArray(e)?r=e:t===void 0&&e&&(t=e),typeof t=="string"&&(t=t.length),typeof t=="number"){let n=Math.round(t);t=n<1?void 0:n>8?{indent:8}:{indent:n}}if(i===void 0){let{keepUndefined:n}=t??e??{};if(!n)return}return _9.isDocument(i)&&!r?i.toString(t):new S9.Document(i,r,t).toString(t)}fl.parse=C9;fl.parseAllDocuments=T9;fl.parseDocument=RI;fl.stringify=N9});var LI=A(te=>{"use strict";var I9=Zg(),R9=il(),D9=Lg(),py=sl(),P9=Ma(),Fr=Q(),L9=Dr(),x9=Ce(),k9=Lr(),F9=xr(),$9=wf(),q9=cy(),M9=fy(),U9=dy(),bf=DI(),PI=ka();te.Composer=I9.Composer;te.Document=R9.Document;te.Schema=D9.Schema;te.YAMLError=py.YAMLError;te.YAMLParseError=py.YAMLParseError;te.YAMLWarning=py.YAMLWarning;te.Alias=P9.Alias;te.isAlias=Fr.isAlias;te.isCollection=Fr.isCollection;te.isDocument=Fr.isDocument;te.isMap=Fr.isMap;te.isNode=Fr.isNode;te.isPair=Fr.isPair;te.isScalar=Fr.isScalar;te.isSeq=Fr.isSeq;te.Pair=L9.Pair;te.Scalar=x9.Scalar;te.YAMLMap=k9.YAMLMap;te.YAMLSeq=F9.YAMLSeq;te.CST=$9;te.Lexer=q9.Lexer;te.LineCounter=M9.LineCounter;te.Parser=U9.Parser;te.parse=bf.parse;te.parseAllDocuments=bf.parseAllDocuments;te.parseDocument=bf.parseDocument;te.stringify=bf.stringify;te.visit=PI.visit;te.visitAsync=PI.visitAsync});var qI=A((uQ,$I)=>{var{execSync:my,spawn:B9}=require("child_process"),{stringify:j9}=LI(),{shell:H9}=require("electron"),xI=require("crypto"),kI=require("path"),gy=require("os"),Xs=require("fs"),W9=hi(),Je=is(),G9=ko(),Js,Zs,eo,$r,FI;$I.exports=(FI=class extends W9{constructor(t){super(t);L(this,Js,null);L(this,Zs,null);L(this,eo,null);L(this,$r,null);_(this,"getOS",()=>{if(typeof p(this,$r)!="string")switch(process.platform){case Je.MACOS:V(this,$r,"macos");break;case Je.WINDOWS:V(this,$r,"windows");break;case Je.LINUX:V(this,$r,"linux");break}return p(this,$r)});_(this,"getName",()=>{if(typeof p(this,Zs)!="string"){let t=null;switch(process.platform){case Je.MACOS:t="echo $(scutil --get LocalHostName).local";break;case Je.WINDOWS:case Je.LINUX:t="hostname";break}if(t!==null)try{let r=my(t).toString();V(this,Zs,r.replace(/[\r\n\s]+/g,"").toLowerCase())}catch{}}return p(this,Zs)});_(this,"getUUID",()=>{if(typeof p(this,Js)!="string"){let t=null,r=process.arch==="ia32"&&process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?"%windir%\\sysnative\\cmd.exe /c %windir%\\System32":"%windir%\\System32";switch(process.platform){case Je.MACOS:t="ioreg -rd1 -c IOPlatformExpertDevice";break;case Je.WINDOWS:t="".concat(r,"\\REG.exe")+" QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid";break;case Je.LINUX:t="( cat /var/lib/dbus/machine-id /etc/machine-id 2> /dev/null || hostname ) | head -n 1 || :";break}if(t!==null)try{let n=my(t).toString();switch(process.platform){case Je.MACOS:n=n.replace(/^.*?\bIOPlatformUUID"\s*=\s*"(.*?)".*$/gs,"$1");break;case Je.WINDOWS:n=n.split("REG_SZ")[1];break}n=n.replace(/[\r\n\s]+/g,"");let s=xI.createHash("md5").update([n,n,n].join("::")).digest("hex");V(this,Js,[s.slice(0,8),s.slice(8,12),s.slice(12,16),s.slice(16,20),s.slice(20)].join("-"))}catch{}}return p(this,Js)});_(this,"getSerialNumber",()=>{if(typeof p(this,eo)!="string"){let t=null;switch(process.platform){case Je.MACOS:t="ioreg -l | grep IOPlatformSerialNumber";break;case Je.WINDOWS:t='powershell -Command "(Get-CimInstance -ClassName Win32_BIOS).SerialNumber"';break;case Je.LINUX:t='lsblk -o UUID -n /dev/sda* | grep -v "^$" | grep -vE "^.{,20}$" | sed -n 1p';break}if(t!==null)try{let r=my(t).toString();switch(process.platform){case Je.MACOS:r=r.replace(/^.*?\bIOPlatformSerialNumber"\s*=\s*"(.*?)".*$/gs,"$1");break}r=r.replace(/[\r\n\s]+/g,"");let n=xI.createHash("md5").update([r,r,r].join("::")).digest("hex");V(this,eo,[n.slice(0,8),n.slice(8,12),n.slice(12,16),n.slice(16,20),n.slice(20)].join("-"))}catch{}}return p(this,eo)});_(this,"getRam",()=>Math.ceil(gy.totalmem()/1024**3));_(this,"getCpuArch",()=>gy.arch());_(this,"getCpuName",()=>{let t="",r=gy.cpus();return Array.isArray(r)&&r.length&&(t=r[0].model),t});_(this,"getFileSize",t=>{if(typeof t!="string"||!Xs.existsSync(t))return null;let r=Xs.statSync(t);if(!r.isFile())return null;let n=s=>{if(!Number.isInteger(s)||s<=0)return"0B";let o=Math.floor(Math.log(s)/Math.log(1024)),a=s/Math.pow(1024,o);return"".concat(a.toFixed(s<1024?0:1)," ").concat(["B","KiB","MiB","GiB","TiB"][o])};return{int:r.size,string:n(r.size)}});_(this,"setPostAuth",t=>this._oglama.setPostAuth(!!t));_(this,"getPostAuth",()=>this._oglama.getPostAuth());_(this,"errorLog",(t,r="")=>{let n=!1,s=kI.join(G9.getPathConfig(),"agents");Xs.existsSync(s)||Xs.mkdirSync(s,{recursive:!0});let o=kI.join(s,"errors.yaml");try{let a={[new Date]:"".concat(t?.stack??t).concat(r?"\n".concat(r):"").trim()};Xs.writeFileSync(o,j9(a)+"\n",{flag:"a",encoding:"utf8"}),n=!0}catch{}return n});_(this,"showFileInFolder",t=>{let r=!1;do{if(typeof t!="string"||!t.length)break;t=decodeURIComponent(t),Je.WINDOWS===process.platform&&(t=t.replace(/^[\/\\]+/,""));try{if(!Xs.existsSync(t))break;H9.showItemInFolder(t),r=!0}catch{}}while(!1);return r});_(this,"request",async(t,r="GET",n={},s={},o=!0,a=60,l=!0)=>{r=typeof r=="string"?r.replace(/[^a-z]+/i,"").toUpperCase():"",["GET","HEAD","POST","PUT","DELETE","CONNECT","OPTIONS","TRACE","PATCH"].includes(r)||(r="GET"),(typeof n!="object"||n===null)&&(n={}),(typeof s!="object"||s===null)&&(s={});let c=new AbortController,u=setTimeout(()=>c.abort("Request timed out after ".concat(a,"s")),a*1e3);try{let f={method:r,headers:{...o?{"content-type":"application/json"}:{},...s},signal:c.signal,priority:"high",redirect:"follow"};Object.keys(n).length&&(f.body=JSON.stringify(n));let h=await fetch(t,f);return!l&&h.body?.cancel?.(),{ok:h.ok,status:h.status,headers:Object.fromEntries(h.headers.entries()),data:l?o?await h.json():await h.text():null}}catch(f){throw new Error("".concat(f.message??f))}finally{clearTimeout(u)}});this._register("device")}async shellExec(t,r={}){let n=Array.isArray(t)?t.join(";"):t;(typeof r!="object"||r===null)&&(r={});let s={...r,stdio:"pipe",cwd:process.cwd()},{platform:o}=process;try{let c=B9(o==="win32"?"cmd":"sh",[o==="win32"?"/C":"-c",n],s);return new Promise(u=>{let f=[],h=[];c.stdout&&c.stdout.on("data",y=>{if(Buffer.isBuffer(y))return f.push(y.toString());f.push(y)}),c.stderr&&c.stderr.on("data",y=>{if(Buffer.isBuffer(y))return h.push(y.toString());h.push(JSON.stringify(y))});let d=()=>{let y=h.join("\n");return{stdout:f.join("\n"),stderr:y,cmd:n}};c.on("error",y=>u({...d(),error:y})),c.on("close",y=>u({...d(),code:y}))})}catch(a){return Promise.reject(a)}}async killPort(t,r="tcp"){return t=parseInt(t,10),!Number.isInteger(t)||t<0||t>65535?!1:(["tcp","udp"].includes(r)||(r="tcp"),process.platform==="win32"?this.shellExec("netstat -nao").then(n=>{if(!n?.stdout)return!1;let s=new RegExp("^ *".concat(r.toUpperCase()," *[^ ]*:").concat(t,"[^d]"),"gm"),o=n.stdout.split("\n").filter(a=>a.match(s)).reduce((a,l)=>{let c=l.match(/(\d*)\w*(\n|$)/gm);return c&&c[0]&&!a.includes(c[0])?a.concat(c[0]):a},[]);return o.length?this.shellExec("TaskKill /F /PID ".concat(o.join(" /PID "))):!1}):this.shellExec("lsof -i -P").then(n=>{if(!n?.stdout)return!1;let s=new RegExp(":".concat(t,"[^d]"),"g");return n.stdout.split("\n").filter(o=>o.match(s)).length===0?!1:this.shellExec("lsof -i ".concat(r==="udp"?"udp":"tcp",":").concat(t," | grep ").concat(r==="udp"?"UDP":"LISTEN"," | awk '{print $2}' | xargs kill -9"))}))}},Js=new WeakMap,Zs=new WeakMap,eo=new WeakMap,$r=new WeakMap,FI)});var WI=A((dQ,HI)=>{var{ipcMain:MI,session:V9,BrowserWindow:UI}=require("electron"),BI=require("path"),z9=jt(),Y9=hi(),ye,ji,jI;HI.exports=(jI=class extends Y9{constructor(t){super(t);L(this,ye,{});L(this,ji,{});_(this,"list",()=>Object.keys(p(this,ye)));_(this,"closeAll",()=>{let t=Object.keys(p(this,ye)).length>0;for(let r of Object.keys(p(this,ye)))this.close(r);return t});_(this,"open",t=>{let r=!1;do{if(typeof t!="string"||!t.length)break;if(typeof p(this,ye)[t]<"u"){typeof p(this,ye)[t]?.webContents?.focus=="function"&&p(this,ye)[t].webContents.focus();break}p(this,ye)[t]=new UI({show:!1,minWidth:this._oglama.config.getSourceMinWidth(),minHeight:this._oglama.config.getSourceMinHeight(),width:this._oglama.config.getSourceMinWidth(),height:this._oglama.config.getSourceMinHeight(),icon:BI.join(this._oglama.rootPath,"res/icons/icon.png"),resizable:!0,fullscreenable:!1,titleBarStyle:"default",title:"Agent source code",useContentSize:!0,autoHideMenuBar:!0,backgroundColor:"#000",webPreferences:{backgroundThrottling:!1,imageAnimationPolicy:"noAnimation",spellcheck:!1,preload:BI.join(this._oglama.rootPath,"lib/preloader/entry/source.js"),nodeIntegration:!0,devTools:!1,session:V9.defaultSession,cache:!1,webSecurity:!1,allowRunningInsecureContent:!0,additionalArguments:["--agent-id=".concat(t)]}}),p(this,ye)[t].webContents.setBackgroundThrottling(!1);let n=z9.getSourceChannelName(t);p(this,ji)[t]={channel:n,listener:(s,...o)=>{o.length>=3&&p(this,ye)[t].webContents.send(n,o)}},MI.on(p(this,ji)[t].channel,p(this,ji)[t].listener),p(this,ye)[t].setMenu(null),p(this,ye)[t].on("closed",()=>{MI.off(p(this,ji)[t].channel,p(this,ji)[t].listener),delete p(this,ji)[t],delete p(this,ye)[t]}),p(this,ye)[t].webContents.on("did-finish-load",()=>{p(this,ye)[t].show(),p(this,ye)[t].webContents.focus()}),p(this,ye)[t].loadURL("http://localhost:".concat(this._oglama.config.getSsgPort(),"/source-code/")),r=!0}while(!1);return r});_(this,"close",t=>{let r=!1;return typeof p(this,ye)[t]?.destroy=="function"&&(p(this,ye)[t].destroy(),r=!0),r});_(this,"webContents",async(t,r,n)=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");if(!(p(this,ye)[t]instanceof UI))throw new Error("Invalid agent ID");if(typeof r!="string"||typeof p(this,ye)[t].webContents[r]!="function")throw new Error("Invalid source webContents method: ".concat(r));return Array.isArray(n)||(n=[]),await p(this,ye)[t].webContents[r](...n)});this._register("source")}},ye=new WeakMap,ji=new WeakMap,jI)});var zI=A((gQ,VI)=>{var{ipcMain:Sf,WebContentsView:K,BrowserWindow:K9,session:Q9,nativeImage:X9}=require("electron"),GI=require("fs/promises"),yy=require("path"),kt=jt(),J9=hi(),xn,to,io,ro,G,qr,Ve,Ei,kn,no,Se,Fn,wy,hl,vf,$n,Hi;VI.exports=(xn=class extends J9{constructor(t){super(t);L(this,to);L(this,io);L(this,ro,{});L(this,G,{});L(this,qr,{});L(this,Ve,{});L(this,Ei,"");L(this,kn,[]);L(this,no,{});L(this,Se,{});L(this,Fn,()=>{if(!Object.keys(p(this,G)).length)return;let t=p(this,to)-this.constructor.MARGIN_LEFT,r=p(this,io)-(this.constructor.MARGIN_TOP+this.constructor.MARGIN_BOTTOM);for(let n of Object.keys(p(this,G))){let s=n===p(this,Ei)?this.constructor.MARGIN_LEFT:100-t,o=n===p(this,Ei)?this.constructor.MARGIN_TOP:50-r,a=p(this,G)[n];a instanceof K&&a.setBounds({x:s,y:o,width:t,height:r})}});L(this,wy,async t=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");if(p(this,kn).reduce((n,s)=>s.agentId===t?s:n,null)!==null)throw new Error("Previous focus request pending");return new Promise((n,s)=>{p(this,kn).push({agentId:t,resolve:n,reject:s})})});L(this,hl,t=>{t="".concat(t);let r=null,n=!1;do{if(t.match(/^[a-z\d]$/gi)){r=t,n=t!==t.toLowerCase();break}if('~!@#$%^&*()_+{}:"|<>?'.indexOf(t)!==-1&&t.length===1){r=t,n=!0;break}if(" `-=[];'\\,./".indexOf(t)!==-1&&t.length===1){r=t,n=!1;break}let s={backspace:"Backspace",capslock:"CapsLock",pagedown:"PageDown",pageup:"PageUp",insert:"Insert",delete:"Delete",escape:"Escape",space:"Space",enter:"Enter",right:"Right",home:"Home",down:"Down",left:"Left",end:"End",tab:"Tab",up:"Up",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12"};typeof s[t]<"u"&&(r=s[t])}while(!1);return{keyCode:r,shift:n}});L(this,vf,async(t,r,n)=>{if(typeof t!="string"||!t.length)return!1;let s=p(this,G)[t];if(!(s instanceof K)||typeof r!="string"||r.length!==1)return!1;if(!s.metadata.controlled)throw new Error("Typing aborted");let{keyCode:o,shift:a}=p(this,hl).call(this,r);if(o!==null){let c=a?["shift"]:[];a&&s.webContents.sendInputEvent({type:"keyDown",keyCode:"Shift",modifiers:c}),s.webContents.sendInputEvent({type:"keyDown",keyCode:o,modifiers:c}),s.webContents.sendInputEvent({type:"char",keyCode:r,modifiers:c}),s.webContents.sendInputEvent({type:"keyUp",keyCode:o,modifiers:c}),a&&s.webContents.sendInputEvent({type:"keyUp",keyCode:"Shift",modifiers:[]})}else s.webContents.sendInputEvent({type:"char",keyCode:r});let l=Math.round(1e3/n-2)+Math.floor(Math.random()*5);return await new Promise(c=>setTimeout(c,l)),!0});L(this,$n,(t,r=!0)=>{if(typeof t=="string"){let n=["http://localhost:".concat(this._oglama.config.getSsgPort(),"/home"),"about:home"],s=n[r?0:1],o=n[r?1:0];if(t.indexOf(s)===0)return"".concat(o).concat(t.substring(s.length))}return t});L(this,Hi,t=>{let r=p(this,G)[t];r instanceof K&&(r.metadata.statusCode=null,r.metadata.domReady=!1,r.metadata.domError=null)});_(this,"setControlled",(t,r=!0)=>{let n=p(this,G)[t];if(!(n instanceof K))return!1;let s=!!r!==n.metadata.controlled;return n.metadata.controlled=!!r,s});_(this,"setWindowSize",(t,r)=>{V(this,to,t),V(this,io,r),p(this,Fn).call(this)});_(this,"list",()=>Object.keys(p(this,G)));_(this,"removeAll",()=>{let t=Object.keys(p(this,G)).length>0;for(let r of Object.keys(p(this,G)))this.remove(r);return t});_(this,"add",async(t,r,n=!1)=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");if(p(this,G)[t]instanceof K&&this.remove(t),r=p(this,$n).call(this,r,!1),typeof r!="string")throw new Error("Invalid URL");let s=new K({width:this._oglama.config.getMainMinWidth()-this.constructor.MARGIN_LEFT,height:this._oglama.config.getMainMinHeight()-(this.constructor.MARGIN_TOP+this.constructor.MARGIN_BOTTOM),resizable:!1,backgroundColor:"#333",webPreferences:{transparent:!0,preload:yy.join(this._oglama.rootPath,"lib/preloader/entry/target.js"),additionalArguments:["--agent-id=".concat(t)],partition:"persist:target-".concat(t),imageAnimationPolicy:"noAnimation",allowRunningInsecureContent:!0,backgroundThrottling:!1,contextIsolation:!0,nodeIntegration:!0,spellcheck:!1,devTools:!0}});s.webContents.setBackgroundThrottling(!1),s.metadata={agentId:t,controlled:!1,homeUrl:r,statusCode:null,domReady:!1,domError:null,downloads:{pending:[],files:{}}},s.webContents.on("ready-to-show",()=>{s.webContents.setZoomFactor(1)}),s.webContents.setZoomLevel(0),s.webContents.setVisualZoomLevelLimits(1,1),s.webContents.setAudioMuted(!0),s.webContents.on("will-prevent-unload",u=>{u.preventDefault()}),s.webContents.on("context-menu",(u,f)=>{u.preventDefault()});let o=u=>{this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:nav:start",[t,p(this,$n).call(this,u)],{type:"req"}])},a=(u=!0)=>{u&&this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:cancel-promises",t,s.metadata.domError]),this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:nav:end",[t,s.metadata.domError,s.webContents?.navigationHistory.canGoBack()??!1,s.webContents?.navigationHistory.canGoForward()??!1],{type:"req"}])};s.webContents.on("did-navigate-in-page",(u,f,h)=>{h&&(o(f),a(!1))}),s.webContents.on("did-start-navigation",u=>{u.isMainFrame&&!u.isSameDocument&&(p(this,Hi).call(this,t),o(u.url))}),s.webContents.on("did-finish-load",()=>{if(Number.isInteger(s.metadata.statusCode)&&s.metadata.statusCode>=400){s.metadata.domReady||(s.metadata.domError="Status code ".concat(s.metadata.statusCode),s.metadata.domReady=!0,a());return}s.webContents.executeJavaScript('new Promise(resolve => {\n                        const a = window.alert;\n                        const c = window.confirm;\n                        const s = JSON.stringify;\n\n                        window.alert = (m) => a("::"+s({t:"alert",a:"'.concat(t,'",m:m??""}));\n                        Object.defineProperty(window.alert, "name", { value: "alert", configurable: true });\n                        Object.defineProperty(window.alert, "length", { value: 0, configurable: true });\n\n                        window.confirm = (m) => c("::"+s({t:"confirm",a:"').concat(t,'",m:m??""}));\n                        Object.defineProperty(window.confirm, "name", { value: "confirm", configurable: true });\n                        Object.defineProperty(window.confirm, "length", { value: 0, configurable: true });\n\n                        window.prompt = (m, d) => (a("::"+s({t:"prompt",a:"').concat(t,'",m:m??"",d:d??""})),d??"");\n                        Object.defineProperty(window.prompt, "name", { value: "prompt", configurable: true });\n                        Object.defineProperty(window.prompt, "length", { value: 0, configurable: true });\n\n                        const originalToString = Function.prototype.toString;\n                        Function.prototype.toString = function (...args) {\n                            if (this === window.alert) {\n                                return "function alert() { [native code] }";\n                            }\n                            if (this === window.confirm) {\n                                return "function confirm() { [native code] }";\n                            }\n                            if (this === window.prompt) {\n                                return "function prompt() { [native code] }";\n                            }\n                            if (this === Function.prototype.toString) {\n                                return "function toString() { [native code] }";\n                            }\n                            return originalToString.apply(this, args);\n                        };\n\n                        "complete" === document.readyState \n                            ? resolve() \n                            : window.addEventListener("load", () => resolve());\n                    });').replace(/[\n\s]{2,}/g," ")).then(()=>{setTimeout(()=>{s.metadata.domReady||(s.metadata.domReady=!0,a())},500)})}),s.webContents.session.webRequest.onCompleted({urls:["*://*/*"]},u=>{u.resourceType==="mainFrame"&&(s.metadata.statusCode=u.statusCode)}),s.webContents.on("did-fail-load",(u,f,h,d,y)=>{y&&f!==-3&&(s.metadata.domError=h,s.metadata.domReady=!0,a())}),s.webContents.on("did-stop-loading",()=>{setTimeout(()=>{s.metadata.domReady||(s.metadata.domReady=!0,a())},1e3)});let l=Q9.fromPartition("persist:target-".concat(t));l.setPermissionCheckHandler((u,f,h,d)=>!0),l.setPermissionRequestHandler((u,f,h,d)=>{h(!0)}),l.removeAllListeners("will-download"),l.on("will-download",(u,f)=>{let h=performance.now(),d=s.metadata.downloads.pending.shift();if(typeof d!="string"){s.metadata.controlled&&(this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:download:skipped",[t,f.getFilename()],{type:"req"}]),u.preventDefault()),f.once("done",(D,B)=>{a()});return}let y=f.getTotalBytes(),{runId:g,outputKey:w,timeout:S,extension:v}=s.metadata.downloads.files[d],{fileName:T,filePath:N,minSize:P,maxSize:R}=this._oglama.diskStorage.outputFilesInit(t,g,w,typeof v=="string"&&v.length?v:yy.extname(f.getFilename()).substring(1)),x=(D=null)=>{typeof s.metadata.downloads.files[d]=="object"&&!s.metadata.downloads.files[d].done&&(s.metadata.downloads.files[d].done=!0,s.metadata.downloads.files[d].error=D,this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:download:info",[t,d,{fileName:T,totalBytes:y,progress:"100",done:!0,error:D}],{type:"req"}]),D!==null&&(f.cancel(),this._oglama.diskStorage.outputFilesDelete(t,g,T)))};if(y>0){if(Number.isInteger(P)&&y<P*1048576){x('Minimum file size not met for "'.concat(T,'" (').concat((y/1048576).toFixed(3),"MB)"));return}if(Number.isInteger(R)&&y>R*1048576){x('Maximum file size exceeded for "'.concat(T,'" (').concat((y/1048576).toFixed(3),"MB)"));return}}if(!s.metadata.controlled){x('Download cancelled for "'.concat(T,'"'));return}f.setSavePath(N),s.metadata.downloads.files[d].filePath=N;let b=!1;f.on("updated",(D,B)=>{if(performance.now()-h>=S*1e3){D.preventDefault(),x('Download timed out for "'.concat(T,'" after ').concat(S,"s"));return}if(!s.metadata.controlled){D.preventDefault(),x('Download cancelled for "'.concat(T,'"'));return}if(B==="progressing"&&(!b||y>0)){b=!0;let k=f.getReceivedBytes(),U=y>0?(k/y*100).toFixed(2):"0";this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:download:info",[t,d,{fileName:T,totalBytes:y,progress:U,done:!1,error:null}],{type:"req"}])}}),f.once("done",(D,B)=>{x()})}),this._oglama.mainWindow().contentView.addChildView(s),this._oglama.main.view instanceof K&&(this._oglama.mainWindow().contentView.removeChildView(this._oglama.main.view),this._oglama.mainWindow().contentView.addChildView(this._oglama.main.view));let c=kt.getTargetChannelName(t);return p(this,Ve)[t]={channelTarget:c,listenerTarget:(u,...f)=>{f.length>=3&&s.webContents.send(c,f)}},Sf.on(p(this,Ve)[t].channelTarget,p(this,Ve)[t].listenerTarget),p(this,G)[t]=s,await s.webContents.loadURL(r),n?this.select(t):p(this,Fn).call(this),!0});_(this,"initWorker",async t=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");if(p(this,qr)[t]instanceof K)return!1;let r=new K({show:!1,width:100,height:100,resizable:!1,webPreferences:{preload:yy.join(this._oglama.rootPath,"lib/preloader/entry/worker.js"),additionalArguments:["--agent-id=".concat(t)],partition:"target-workers",imageAnimationPolicy:"noAnimation",allowRunningInsecureContent:!0,backgroundThrottling:!1,contextIsolation:!0,nodeIntegration:!0,spellcheck:!1,offscreen:!0}});p(this,qr)[t]=r,r.webContents.setBackgroundThrottling(!1);let n=kt.getWorkerChannelName(t);return p(this,Ve)[t].channelWorker=n,p(this,Ve)[t].listenerWorker=(s,...o)=>{o.length>=3&&r.webContents.send(n,o)},Sf.on(p(this,Ve)[t].channelWorker,p(this,Ve)[t].listenerWorker),await r.webContents.loadURL("http://localhost:".concat(this._oglama.config.getSsgPort(),"/manifest.json")),!0});_(this,"remove",t=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");if(!(p(this,G)[t]instanceof K)||typeof p(this,Ve)[t]>"u")return!1;Sf.off(p(this,Ve)[t].channelTarget,p(this,Ve)[t].listenerTarget),typeof p(this,Ve)[t].channelWorker=="string"&&Sf.off(p(this,Ve)[t].channelWorker,p(this,Ve)[t].listenerWorker),delete p(this,Ve)[t];try{this._oglama.mainWindow().contentView.removeChildView(p(this,G)[t])}catch{}try{p(this,G)[t].webContents?.destroy()}catch{}finally{delete p(this,G)[t]}try{p(this,qr)[t]instanceof K&&p(this,qr)[t].webContents?.destroy()}catch{}finally{delete p(this,qr)[t]}return t===p(this,Ei)&&V(this,Ei,""),p(this,Fn).call(this),!0});_(this,"select",t=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");let r=p(this,G)[t];if(r instanceof K&&p(this,Ei)!==t){V(this,Ei,t);let n={};for(let s of Object.keys(p(this,G)).filter(o=>o!==t))n[s]=p(this,G)[s];return n[t]=r,V(this,G,n),this._oglama.mainWindow().contentView.removeChildView(r),this._oglama.mainWindow().contentView.removeChildView(this._oglama.main.view),this._oglama.main.onTop?(this._oglama.mainWindow().contentView.addChildView(r),this._oglama.mainWindow().contentView.addChildView(this._oglama.main.view)):(this._oglama.mainWindow().contentView.addChildView(this._oglama.main.view),this._oglama.mainWindow().contentView.addChildView(r)),p(this,Fn).call(this),!0}return!1});_(this,"getSelected",()=>p(this,Ei));_(this,"openDevTools",(t,r=null)=>{let n=!1;do{if(typeof t!="string"||!t.length)break;let s=p(this,G)[t];if(!(s instanceof K)||p(this,ro)[t])break;s.webContents?.openDevTools({mode:"detach",title:"Developer Tools ".concat(typeof r=="string"?"- ".concat(r," "):"","- Oglama")}),n=!0}while(!1);return n});_(this,"setDevToolsTitle",(t,r=null)=>{let n=!1;do{if(typeof t!="string"||!t.length)break;let s=p(this,G)[t];if(!(s instanceof K))break;s.webContents?.setDevToolsTitle("Developer Tools ".concat(typeof r=="string"?"- ".concat(r," "):"","- Oglama")),n=!0}while(!1);return n});_(this,"getBounds",t=>{let r=null;do{if(typeof t!="string"||!t.length)break;let n=p(this,G)[t];if(!(n instanceof K))break;r=n.getBounds()}while(!1);return r});_(this,"getTargets",()=>p(this,G));_(this,"webContents",async(t,r,n=[],s=null,o=[])=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");let a=p(this,G)[t];if(!(a instanceof K))throw new Error("Missing agent ".concat(t));if(typeof r!="string"||typeof a.webContents[r]!="function")throw new Error("Invalid target method: webContents.".concat(r,"()"));Array.isArray(n)||(n=[]),Array.isArray(o)||(o=[]);let l=await a.webContents[r](...n)??null;return typeof s=="string"?l!==null&&typeof l[s]=="function"?await l[s](...o):null:l});_(this,"sendKeys",async(t,r,n={})=>{if(typeof t!="string"||!t.length)return!1;let s=p(this,G)[t];if(!(s instanceof K))return!1;if(!s.metadata.controlled)throw new Error("Keyboard input aborted");(typeof n!="object"||n===null)&&(n={});let{keyCode:o,shift:a}=p(this,hl).call(this,r);if(o===null)return!1;n.shift=a;let l=[n.ctrl?process.platform==="darwin"?"meta":"control":null,n.shift?"shift":null,n.alt?"alt":null].filter(u=>u!==null),c=[...l.map(u=>u.charAt(0).toUpperCase()+u.slice(1)),o].join(" + ");return s.webContents.sendInputEvent({type:"keyDown",keyCode:o,modifiers:l}),o.length===1&&s.webContents.sendInputEvent({type:"char",keyCode:o,modifiers:l}),s.webContents.sendInputEvent({type:"keyUp",keyCode:o,modifiers:l}),await new Promise(u=>setTimeout(u,150+Math.floor(Math.random()*51))),!0});_(this,"getMouse",t=>{let r={x:0,y:0,name:null};do{if(typeof t!="string"||!t.length||!(p(this,G)[t]instanceof K)||typeof p(this,Se)[t]!="object"||p(this,Se)[t]===null)break;r=p(this,Se)[t]}while(!1);return r});_(this,"moveMouse",async(t,r,n,s=null,o=!1,a=[])=>{if(typeof t!="string"||!t.length)return!1;let l=p(this,G)[t];if(!(l instanceof K)||p(this,no)[t])return!1;if(!l.metadata.controlled)throw new Error("Mouse move aborted");if(r=parseInt(r,10),n=parseInt(n,10),!Number.isInteger(r)||!Number.isInteger(n))return!1;a=(Array.isArray(a)?a:[]).map(f=>{if(typeof f!="object"||f===null)return null;let h={};for(let d of["x","y","w","h"]){if(!Number.isInteger(f[d]))return null;h[d]=f[d]}return h}).filter(Boolean),r<0&&(r=0),n<0&&(n=0);let c=this.getBounds(t);if(typeof c=="object"&&c!==null){let{width:f,height:h}=c;r>f&&(r=f),n>h&&(n=h)}p(this,no)[t]=!0,typeof p(this,Se)[t]!="object"&&(p(this,Se)[t]={x:0,y:0,name:null});let u=(f,h)=>{for(let d of a)if(f>=d.x&&f<=d.x+d.w&&h>=d.y&&h<=d.y+d.h)return!1;return!0};return new Promise(f=>{let h=(o?25:150)+Math.floor(Math.random()*(o?25:150)),d=(o?10:14)+Math.floor(Math.random()*3);this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:mouse:move",[t,r,n,h],{type:"req"}]);let y=p(this,Se)[t].x,g=p(this,Se)[t].y,w=r,S=n;p(this,Se)[t]={x:r,y:n,name:s};let v={x:null,y:null},T=!1,N=x=>x<.5?2*x*x:-1+(4-2*x)*x,P=0,R=setInterval(async()=>{let x=Date.now();P===0&&(P=x);let D=(x-P)/h;(D>1||!l.metadata.controlled)&&(D=1);let B=N(D),k=Math.round(y+(w-y)*B),U=Math.round(g+(S-g)*B);if(v.x!==k||v.y!==U){let ce=v.x!==null?k-v.x:0,ie=v.y!==null?U-v.y:0;v={x:k,y:U},u(k,U)&&l.webContents?.sendInputEvent({type:"mouseMove",x:k,y:U,movementX:ce,movementY:ie})}if(D===1&&!T){if(clearInterval(R),T=!0,l.metadata.controlled&&["click","double-click"].includes(s)){await new Promise(X=>setTimeout(X,50)),this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:mouse:click",[t,k,U,s],{type:"req"}]),await new Promise(X=>setTimeout(X,50));let ie={x:w,y:S,button:0,clickCount:1};if(l.webContents?.sendInputEvent({type:"mouseDown",...ie}),l.webContents?.sendInputEvent({type:"mouseUp",...ie}),s==="double-click"){let X={x:w,y:S,button:0,clickCount:2};l.webContents?.sendInputEvent({type:"mouseDown",...X}),l.webContents?.sendInputEvent({type:"mouseUp",...X})}}let ce=(["click","double-click"].includes(s)?450:100)+Math.floor(Math.random()*150);setTimeout(async()=>{p(this,no)[t]=!1,f(!0)},o?10:ce)}},d)})});_(this,"jiggleMouse",async(t,r=50,n=[])=>{if(typeof t!="string"||!t.length||!(p(this,G)[t]instanceof K)||!Number.isInteger(r))return!1;r=r<10?10:r>500?500:r,typeof p(this,Se)[t]!="object"&&(p(this,Se)[t]={x:0,y:0,name:null});let o=Math.floor(Math.random()*3)+5,a=[];for(let l=1;l<=o;l++){let c=Math.floor(Math.random()*(r/2))+Math.round(r/2),u=Math.floor(Math.random()*360)*(Math.PI/180),f=p(this,Se)[t].x+c*Math.cos(u),h=p(this,Se)[t].y+c*Math.sin(u);a.push({x:f,y:h})}a.push(p(this,Se)[t]);for(let l of a)await this.moveMouse(t,l.x,l.y,null,!0,n),p(this,Se)[t]={...l,name:null};return await new Promise(l=>setTimeout(l,150)),!0});_(this,"typeAt",async(t,r,n,s,o=!1,a=5,l=250)=>{if(typeof t!="string"||!t.length)return!1;let c=p(this,G)[t];if(!(c instanceof K)||!c.metadata.controlled)return!1;s=typeof s=="string"?s.replace(/\r\n|\n/g,"\r\n"):"",a=parseInt(a,10),a=Number.isInteger(a)?a>250?250:a<1?1:a:5,l=parseInt(l,10),l=Number.isInteger(l)?l>1e3?1e3:l<1?1:l:250,await this.moveMouse(t,r,n,"click");let u=r+10+Math.floor(Math.random()*90),f=Math.abs(n-50+Math.floor(Math.random()*100));await this.moveMouse(t,u,f),c.webContents.selectAll(),await new Promise(h=>setTimeout(h,250)),await this.sendKeys(t,o?"backspace":"right"),await new Promise(h=>setTimeout(h,150)),s.length>l&&(c.webContents.insertText(s.substring(0,s.length-l)),s=s.substring(s.length-l),await new Promise(h=>setTimeout(h,150)));for(let h of s)await p(this,vf).call(this,t,h,a);return!0});_(this,"loadUrl",async(t,r,n=60)=>{let s=performance.now();if(typeof t!="string"||!t.length)return!1;let o=p(this,G)[t];if(!(o instanceof K))return!1;if(r=p(this,$n).call(this,r,!1),typeof r!="string")throw new Error("Invalid URL");r=new URL(r).href,n=parseInt(n,10),n=Number.isInteger(n)?n<0?0:n:60,p(this,Hi).call(this,t);let a=setTimeout(()=>{o.webContents?.stop(),o.metadata.domError="Page load timed out after ".concat(n,"s")},n*1e3+750);try{await o.webContents.loadURL(r)}catch(c){do{if(c?.errno===-3){await new Promise(u=>setTimeout(u,1e3));break}if(typeof o.metadata.domError!="string"&&(o.metadata.domError="".concat(c?.message||c)),c?.errno===-2)break;throw c}while(!1)}finally{clearTimeout(a)}let l=n-Math.floor((performance.now()-s)/1e3)+1;return await this.waitForDomReady(t,l<0?0:l)});_(this,"getUrl",async t=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");let r=p(this,G)[t];if(!(r instanceof K))throw new Error("Missing agent ".concat(t));return p(this,$n).call(this,r.webContents.getURL())});_(this,"getTitle",async t=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");let r=p(this,G)[t];if(!(r instanceof K))throw new Error("Missing agent ".concat(t));return r.webContents.getTitle()});_(this,"reload",async(t,r=!1,n=60)=>{if(typeof t!="string"||!t.length)return!1;let s=p(this,G)[t];return s instanceof K?(p(this,Hi).call(this,t),r?s.webContents.reloadIgnoringCache():s.webContents.reload(),await this.waitForDomReady(t,n)):!1});_(this,"goHome",async t=>{if(typeof t!="string"||!t.length)return!1;let r=p(this,G)[t];return r instanceof K?(p(this,Hi).call(this,t),await r.webContents.loadURL(r.metadata.homeUrl),await this.waitForDomReady(t)):!1});_(this,"goBack",async(t,r=60)=>{if(typeof t!="string"||!t.length)return!1;let n=p(this,G)[t];return!(n instanceof K)||!n.webContents?.navigationHistory.canGoBack()?!1:(p(this,Hi).call(this,t),n.webContents.navigationHistory.goBack(),await this.waitForDomReady(t,r))});_(this,"goForward",async(t,r=60)=>{if(typeof t!="string"||!t.length)return!1;let n=p(this,G)[t];return!(n instanceof K)||!n.webContents?.navigationHistory.canGoForward()?!1:(p(this,Hi).call(this,t),n.webContents.navigationHistory.goForward(),await this.waitForDomReady(t,r))});_(this,"saveDownload",async(t,r,n,s=600,o=null)=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");let a=p(this,G)[t];if(!(a instanceof K))throw new Error("Missing agent ".concat(t));let l="".concat(r,"-").concat(n);if(typeof a.metadata.downloads.files[l]=="object")throw new Error("Download in progress for ".concat(n));return a.metadata.downloads.pending.push(l),a.metadata.downloads.files[l]={runId:r,outputKey:n,timeout:s,extension:o,filePath:null,done:!1,error:null},new Promise(c=>{let u=performance.now(),f=setInterval(()=>{if(!(a instanceof K)||!a.metadata.controlled||performance.now()-u>=s*1e3){clearInterval(f),c(null);return}if(a.metadata.downloads.files[l].done){clearInterval(f);let{filePath:h,error:d}=a.metadata.downloads.files[l];delete a.metadata.downloads.files[l];let y=typeof d=="string"?null:h;setTimeout(()=>c(y),250)}},750)})});_(this,"saveScreenshot",async(t,r,n,s="png",o=null,a=!1,l=100)=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");let c=p(this,G)[t];if(!(c instanceof K))throw new Error("Missing agent ".concat(t));let u="".concat(r,"-").concat(n),f={path:null,width:0,height:0,error:null},{fileName:h,filePath:d,minSize:y,maxSize:g}=await this._oglama.diskStorage.outputFilesInit(t,r,n,["png","jpg","jpeg"].includes(s)?s:"png");this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:download:info",[t,u,{fileName:"\u{1F4F8} ".concat(h),totalBytes:0,progress:0,done:!1,error:null}],{type:"req"}]);let w=null,S=null,v=this.getBounds(t);if(Number.isInteger(o)&&o>v.height&&c.setBounds({...v,height:o}),!a){let x=this.getBounds(t);w=x.width,S=x.height}l=!Number.isInteger(l)||l<100?100:l>1e4?1e4:l,await new Promise(x=>setTimeout(x,l));let{imgData:T,imgSize:N}=await this.captureFrame(t,w,S);if(Number.isInteger(o)&&c.setBounds(v),T!==null){f.width=N.width,f.height=N.height,f.path=d;let x=X9.createFromBitmap(Buffer.from(T.buffer),{width:N.width,height:N.height});await GI.writeFile(d,h.match(/\.jpe?g$/g)?x.toJPEG(80):x.toPNG())}let P=(await GI.stat(d)).size,R=async x=>{this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:download:info",[t,u,{fileName:"\u{1F4F8} ".concat(h),totalBytes:P,progress:"100",done:!0,error:x}],{type:"req"}]),this._oglama.diskStorage.outputFilesDelete(t,r,h),f.path=null,f.error=x};do{if(P<=0){await R('Failed to capture screenshot as "'.concat(h,'"'));break}if(Number.isInteger(y)&&P<y*1048576){await R('Minimum file size not met for "'.concat(h,'" (').concat((P/1048576).toFixed(3),"MB)"));break}if(Number.isInteger(g)&&P>g*1048576){await R('Maximum file size exceeded for "'.concat(h,'" (').concat((P/1048576).toFixed(3),"MB)"));break}this._oglama.main?.view.webContents?.send(kt.WINDOW_MAIN,["irc-target:download:info",[t,u,{fileName:"\u{1F4F8} ".concat(h),totalBytes:P,progress:100,done:!0,error:null}],{type:"req"}])}while(!1);return f});_(this,"captureFrame",async(t,r=null,n=null,s=!1,o=void 0)=>{if(typeof t!="string"||!t.length)throw new Error("Invalid agent ID");let l=p(this,G)[t];if(!(l instanceof K))throw new Error("Missing agent ".concat(t));(typeof o!="object"||o===null||!Number.isInteger(o.x)||!Number.isInteger(o.y)||!Number.isInteger(o.width)||!Number.isInteger(o.height))&&(o=void 0);let c=await l.webContents.capturePage(o),u=new Uint8ClampedArray(c.toBitmap().buffer),f=c.getSize();if(!Number.isInteger(r)||!Number.isInteger(n)||r===f.width&&n===f.height){if(!s||f.width%2===0&&f.height%2===0)return{imgData:u,imgSize:f};r=f.width-f.width%2,n=f.height-f.height%2;let w=!!(f.width%2),S=new Uint8ClampedArray(r*n*4);for(let v=0;v<n;v++)for(let T=0;T<r;T++){let N=(v*r+T)*4,P=w?N+4*v:N;for(let R=0;R<4;R++)S[N+R]=u[P+R]}return{imgData:S,imgSize:{width:r,height:n}}}s&&(r-=r%2,n-=n%2);let h={x:{},y:{}},d=w=>(typeof h.y[w]>"u"&&(h.y[w]=Math.floor(w/n*f.height)),h.y[w]),y=w=>(typeof h.x[w]>"u"&&(h.x[w]=Math.floor(w/r*f.width)),h.x[w]),g=new Uint8ClampedArray(r*n*4);for(let w=0;w<n;w++)for(let S=0;S<r;S++){let v=(d(w)*f.width+y(S))*4,T=(w*r+S)*4;for(let N=0;N<4;N++)g[T+N]=u[v+N]}return{imgData:g,imgSize:{width:r,height:n}}});_(this,"getPreview",async t=>{let r=p(this,to)-this.constructor.MARGIN_LEFT,n=p(this,io)-(this.constructor.MARGIN_TOP+this.constructor.MARGIN_BOTTOM),{imgData:s,imgSize:o}=await this.captureFrame(t,240,135,!1,{x:0,y:0,width:r,height:n}),a=new Uint8ClampedArray(o.width*o.height*4);for(let l=0;l<s.length;l+=4)a[l]=s[l+2],a[l+1]=s[l+1],a[l+2]=s[l],a[l+3]=s[l+3];return{imgData:a,imgSize:o}});_(this,"smoothScroll",async(t,r,n=100,s=!0)=>{if(typeof t!="string"||!t.length)return!1;let o=p(this,G)[t];if(!(o instanceof K)||!o.metadata.controlled||(r=parseInt(r,10),!Number.isInteger(r)))return!1;n=parseInt(n,10),Number.isInteger(n)||(n=100),n=n<1?1:n>5e3?5e3:n,s=!!s;let a=30,l=Math.round(1e3/a*100)/100,c=Math.round(n/a*100)/100,u=Math.sign(r),f=0,h=0;typeof p(this,Se)[t]=="object"&&p(this,Se)[t]!==null&&(f=p(this,Se)[t].x,h=p(this,Se)[t].y);let d=0;return new Promise(y=>{let g=setInterval(()=>{let w=Math.abs(r)-Math.abs(d);if(w<=.1||!o.metadata.controlled){clearInterval(g),y(o.metadata.controlled);return}let S=Math.min(w,c)*u,v={type:"mouseWheel",x:f,y:h,deltaX:0,deltaY:0};v[s?"deltaY":"deltaX"]=-S,d+=S,o.webContents.sendInputEvent(v)},l)})});_(this,"setFileInput",async(t,r,n)=>{if(typeof t!="string"||!t.length)return!1;let s=p(this,G)[t];if(!(s instanceof K)||!s.metadata.controlled)return!1;let o=!1;p(this,ro)[t]=!0,s.webContents.isDevToolsOpened()&&s.webContents.closeDevTools();try{s.webContents.debugger.isAttached()||s.webContents.debugger.attach("1.3");let{root:a}=await s.webContents.debugger.sendCommand("DOM.getDocument",{});if(typeof a?.nodeId<"u"){let{nodeId:l}=await s.webContents.debugger.sendCommand("DOM.querySelector",{nodeId:a.nodeId,selector:r});typeof l<"u"&&(await s.webContents.debugger.sendCommand("DOM.setFileInputFiles",{nodeId:l,files:n}),o=!0)}}finally{s.webContents.debugger.detach(),p(this,ro)[t]=!1}return o});_(this,"openInNewWindow",async(t,r)=>{if(r="".concat(r??"").trim(),!r.length||!(p(this,G)[t]instanceof K))return!1;let s=new K9({minWidth:this._oglama.config.getSourceMinWidth(),minHeight:this._oglama.config.getSourceMinHeight(),width:this._oglama.config.getSourceMinWidth(),height:this._oglama.config.getSourceMinHeight(),webPreferences:{partition:"persist:target-".concat(t),contextIsolation:!0,nodeIntegration:!1,devTools:!0}});s.on("close",()=>{s.destroy(),s=null});try{s.loadURL(r)}catch{}});_(this,"waitForDomReady",async(t,r=60)=>{if(r=parseInt(r,10),r=Number.isInteger(r)?r<0?0:r:60,typeof t!="string"||!t.length)return!1;let n=p(this,G)[t];if(!(n instanceof K)||!n.metadata.controlled)return!1;if(n.metadata.domReady){if(n.metadata.domError!==null)throw new Error(n.metadata.domError);return n.metadata.domError===null}return new Promise((s,o)=>{let a=performance.now(),l=setInterval(()=>{if(!n.metadata.controlled){clearInterval(l),n.webContents?.stop(),o(new Error("Page load aborted"));return}if(n.metadata.domReady||typeof n.metadata.domError=="string"){clearInterval(l),typeof n.metadata.domError=="string"?o(new Error(n.metadata.domError)):setTimeout(()=>s(!0),100);return}performance.now()-a>=r*1e3+750&&(clearInterval(l),n.webContents?.stop(),o(new Error("DOM load timed out after ".concat(r,"s"))))},250)})});let r=async()=>{do{if(!p(this,kn).length)break;let{agentId:n,resolve:s,reject:o}=p(this,kn).shift();if(typeof n!="string"||!n.length){o(new Error("Invalid agent ID"));break}let a=p(this,G)[n];if(!(a instanceof K)){o(new Error("Missing agent ".concat(n)));break}if(typeof s!="function"||typeof o!="function")break;a.webContents.isFocused()||(a.webContents.focus(),await new Promise(l=>setTimeout(l,100))),await new Promise(l=>{let c=setTimeout(()=>{o(new Error("Focused action has timed out")),l(!1)},this.constructor.FOCUS_TIMEOUT*1e3);s(async()=>{clearTimeout(c),l(!0),await new Promise(u=>setTimeout(u,100))})})}while(!1);await new Promise(n=>setTimeout(n,500)),r()};this.constructor.FOCUS_ENABLED&&r(),this._register("target")}},to=new WeakMap,io=new WeakMap,ro=new WeakMap,G=new WeakMap,qr=new WeakMap,Ve=new WeakMap,Ei=new WeakMap,kn=new WeakMap,no=new WeakMap,Se=new WeakMap,Fn=new WeakMap,wy=new WeakMap,hl=new WeakMap,vf=new WeakMap,$n=new WeakMap,Hi=new WeakMap,_(xn,"MARGIN_LEFT",250),_(xn,"MARGIN_TOP",50),_(xn,"MARGIN_BOTTOM",50),_(xn,"FOCUS_ENABLED",!1),_(xn,"FOCUS_TIMEOUT",60),xn)});var XI=A((AQ,QI)=>{var{session:Z9,shell:ez,ipcMain:tz,WebContentsView:Ay}=require("electron"),iz=require("path"),YI=jt(),rz=hi(),_f,KI;QI.exports=(KI=class extends rz{constructor(t){super(t);_(this,"windowWidth");_(this,"windowHeight");_(this,"view",null);_(this,"darkMode",!0);L(this,_f,()=>this.view instanceof Ay?(this.view.setBounds({x:0,y:0,width:this.windowWidth,height:this.windowHeight}),!0):!1);_(this,"init",()=>this.view instanceof Ay?!1:(this.windowWidth=this._oglama.config.getMainLoginWidth(),this.windowHeight=this._oglama.config.getMainLoginHeight(),this.view=new Ay({width:this.windowWidth,height:this.windowHeight,backgroundColor:"#00000000",resizable:!1,webPreferences:{transparent:!0,backgroundThrottling:!1,imageAnimationPolicy:"noAnimation",spellcheck:!1,preload:iz.join(this._oglama.rootPath,"lib/preloader/entry/main.js"),nodeIntegration:!0,devTools:!1,session:Z9.defaultSession,cache:!1,webSecurity:!1,allowRunningInsecureContent:!0,additionalArguments:["--win-type=main/login"]}}),this.view.webContents.setBackgroundThrottling(!1),this.view.webContents.on("ready-to-show",()=>this.view.webContents.setZoomFactor(1)),this.view.webContents.setZoomLevel(0),this.view.webContents.setAudioMuted(!1),this.view.webContents.loadURL("http://localhost:".concat(this._oglama.config.getSsgPort(),"/login/")),this.view.webContents.on("dom-ready",()=>this.view.webContents.focus()),tz.on(YI.WINDOW_MAIN_LOGIN,(t,...r)=>{r.length>=3&&this.view.webContents.send(YI.WINDOW_MAIN_LOGIN,r)}),this._oglama.mainLoginWindow().contentView.addChildView(this.view),p(this,_f).call(this),!0));_(this,"openExternal",t=>{typeof t=="string"&&ez.openExternal(t)});this._register("main/login")}},_f=new WeakMap,KI)});var r1=A((SQ,i1)=>{var{app:nz,session:sz,shell:oz,ipcMain:az,WebContentsView:Of,nativeTheme:lz,dialog:cz}=require("electron"),JI=require("path"),ZI=require("fs"),e1=jt(),uz=XI(),fz=hi(),so,t1;i1.exports=(t1=class extends fz{constructor(t){super(t);_(this,"windowWidth");_(this,"windowHeight");_(this,"view",null);_(this,"onTop",!1);_(this,"darkMode",null);_(this,"login",null);L(this,so,()=>this.view instanceof Of?(this.view.setBounds({x:0,y:0,width:this.windowWidth,height:this.windowHeight}),!0):!1);_(this,"init",()=>this.view instanceof Of?!1:(this.windowWidth=this._oglama.config.getMainMinWidth(),this.windowHeight=this._oglama.config.getMainMinHeight(),this.view=new Of({width:this.windowWidth,height:this.windowHeight,resizable:!1,backgroundColor:"#00000000",webPreferences:{transparent:!0,preload:JI.join(this._oglama.rootPath,"lib/preloader/entry/main.js"),imageAnimationPolicy:"noAnimation",allowRunningInsecureContent:!0,session:sz.defaultSession,devTools:!1,backgroundThrottling:!1,nodeIntegration:!0,webSecurity:!1,spellcheck:!1,cache:!1}}),this.view.webContents.setBackgroundThrottling(!1),this.view.webContents.on("ready-to-show",()=>{this.view.webContents.setZoomFactor(1),this.view.webContents.setVisualZoomLevelLimits(1,1)}),this.view.webContents.setZoomLevel(0),this.view.webContents.setAudioMuted(!1),this.view.webContents.loadURL("http://localhost:".concat(this._oglama.config.getSsgPort(),"/")),this.view.webContents.on("dom-ready",()=>this.view.webContents.focus()),this.view.webContents.on("page-title-updated",(t,r)=>{this._oglama.mainWindow().setTitle(r)}),az.on(e1.WINDOW_MAIN,(t,...r)=>{r.length>=3&&this.view.webContents.send(e1.WINDOW_MAIN,r)}),this._oglama.mainWindow().contentView.addChildView(this.view),p(this,so).call(this),!0));_(this,"setWindowSize",(t,r)=>{this.windowWidth=t,this.windowHeight=r,p(this,so).call(this)});_(this,"focus",()=>{let t=typeof this.view?.webContents?.focus=="function";return t&&!this.view?.webContents?.isFocused()&&this.view?.webContents?.focus(),t});_(this,"setOnTop",(t=!0)=>{let r=!1;if(t=!!t,this.getOnTop()!==t){if(this.onTop=t,this.onTop)this._oglama.mainWindow().contentView.removeChildView(this.view),this._oglama.mainWindow().contentView.addChildView(this.view);else{let n=this._oglama.target.getSelected();if(typeof n=="string"&&n.length){let s=this._oglama.target.getTargets()[n];s instanceof Of&&(this._oglama.mainWindow().contentView.removeChildView(s),this._oglama.mainWindow().contentView.removeChildView(this.view),this._oglama.mainWindow().contentView.addChildView(this.view),this._oglama.mainWindow().contentView.addChildView(s))}}p(this,so).call(this),r=!0}return r});_(this,"getOnTop",()=>this.onTop);_(this,"setDarkMode",t=>{let r=!1;return t=!!t,this.getDarkMode()!==t&&(this.darkMode=t,lz.themeSource=t?"dark":"light",this._oglama.mainWindow().setBackgroundColor(t?"#333":"#fff"),r=!0),r});_(this,"quit",()=>nz.quit());_(this,"getProcessVersions",()=>process.versions);_(this,"getDarkMode",()=>this.darkMode);_(this,"openExternal",t=>{typeof t=="string"&&oz.openExternal(t)});_(this,"showOpenDialog",async(t,r=[],n=!1)=>{let s=[];r=(Array.isArray(r)?r:[]).map(a=>"".concat(a).replace(/^\.+/g,"").trim()).filter(Boolean);let o=await cz.showOpenDialog({properties:["openFile",...n?["multiSelections"]:[]],filters:[{name:typeof t=="string"&&t.length?t:n?"Select files":"Select file",extensions:r}]});return o.canceled||(s=(Array.isArray(o.filePaths)?o.filePaths:[]).map(a=>{if(ZI.existsSync(a))try{return{path:a,name:JI.basename(a),size:ZI.statSync(a).size}}catch{}return null}).filter(a=>a!==null)),s});this._register("main"),this.login=new uz(t)}},so=new WeakMap,t1)});var oo=A((_Q,s1)=>{"use strict";var n1=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);s1.exports=i=>i?Object.keys(i).map(e=>[n1.has(e)?n1.get(e):e,i[e]]).reduce((e,t)=>(e[t[0]]=t[1],e),Object.create(null)):{}});var Pf=A(m1=>{"use strict";var o1=typeof process=="object"&&process?process:{stdout:null,stderr:null},hz=require("events"),a1=require("stream"),dz=require("string_decoder"),l1=dz.StringDecoder,Wi=Symbol("EOF"),Gi=Symbol("maybeEmitEnd"),Mr=Symbol("emittedEnd"),Tf=Symbol("emittingEnd"),dl=Symbol("emittedError"),Cf=Symbol("closed"),c1=Symbol("read"),Nf=Symbol("flush"),u1=Symbol("flushChunk"),vt=Symbol("encoding"),Vi=Symbol("decoder"),If=Symbol("flowing"),pl=Symbol("paused"),ao=Symbol("resume"),ve=Symbol("buffer"),bi=Symbol("pipes"),$e=Symbol("bufferLength"),Ey=Symbol("bufferPush"),by=Symbol("bufferShift"),ze=Symbol("objectMode"),_e=Symbol("destroyed"),Sy=Symbol("error"),vy=Symbol("emitData"),f1=Symbol("emitEnd"),_y=Symbol("emitEnd2"),zi=Symbol("async"),Oy=Symbol("abort"),Rf=Symbol("aborted"),qn=Symbol("signal"),ml=i=>Promise.resolve().then(i),p1=global._MP_NO_ITERATOR_SYMBOLS_!=="1",h1=p1&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),d1=p1&&Symbol.iterator||Symbol("iterator not implemented"),pz=i=>i==="end"||i==="finish"||i==="prefinish",mz=i=>i instanceof ArrayBuffer||typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,gz=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),Df=class{constructor(e,t,r){this.src=e,this.dest=t,this.opts=r,this.ondrain=()=>e[ao](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Ty=class extends Df{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,r){super(e,t,r),this.proxyErrors=n=>t.emit("error",n),e.on("error",this.proxyErrors)}},Cy=class i extends a1{constructor(e){super(),this[If]=!1,this[pl]=!1,this[bi]=[],this[ve]=[],this[ze]=e&&e.objectMode||!1,this[ze]?this[vt]=null:this[vt]=e&&e.encoding||null,this[vt]==="buffer"&&(this[vt]=null),this[zi]=e&&!!e.async||!1,this[Vi]=this[vt]?new l1(this[vt]):null,this[Wi]=!1,this[Mr]=!1,this[Tf]=!1,this[Cf]=!1,this[dl]=null,this.writable=!0,this.readable=!0,this[$e]=0,this[_e]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[ve]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[bi]}),this[qn]=e&&e.signal,this[Rf]=!1,this[qn]&&(this[qn].addEventListener("abort",()=>this[Oy]()),this[qn].aborted&&this[Oy]())}get bufferLength(){return this[$e]}get encoding(){return this[vt]}set encoding(e){if(this[ze])throw new Error("cannot set encoding in objectMode");if(this[vt]&&e!==this[vt]&&(this[Vi]&&this[Vi].lastNeed||this[$e]))throw new Error("cannot change encoding");this[vt]!==e&&(this[Vi]=e?new l1(e):null,this[ve].length&&(this[ve]=this[ve].map(t=>this[Vi].write(t)))),this[vt]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[ze]}set objectMode(e){this[ze]=this[ze]||!!e}get async(){return this[zi]}set async(e){this[zi]=this[zi]||!!e}[Oy](){this[Rf]=!0,this.emit("abort",this[qn].reason),this.destroy(this[qn].reason)}get aborted(){return this[Rf]}set aborted(e){}write(e,t,r){if(this[Rf])return!1;if(this[Wi])throw new Error("write after end");if(this[_e])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(r=t,t="utf8"),t||(t="utf8");let n=this[zi]?ml:s=>s();return!this[ze]&&!Buffer.isBuffer(e)&&(gz(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):mz(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[ze]?(this.flowing&&this[$e]!==0&&this[Nf](!0),this.flowing?this.emit("data",e):this[Ey](e),this[$e]!==0&&this.emit("readable"),r&&n(r),this.flowing):e.length?(typeof e=="string"&&!(t===this[vt]&&!this[Vi].lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[vt]&&(e=this[Vi].write(e)),this.flowing&&this[$e]!==0&&this[Nf](!0),this.flowing?this.emit("data",e):this[Ey](e),this[$e]!==0&&this.emit("readable"),r&&n(r),this.flowing):(this[$e]!==0&&this.emit("readable"),r&&n(r),this.flowing)}read(e){if(this[_e])return null;if(this[$e]===0||e===0||e>this[$e])return this[Gi](),null;this[ze]&&(e=null),this[ve].length>1&&!this[ze]&&(this.encoding?this[ve]=[this[ve].join("")]:this[ve]=[Buffer.concat(this[ve],this[$e])]);let t=this[c1](e||null,this[ve][0]);return this[Gi](),t}[c1](e,t){return e===t.length||e===null?this[by]():(this[ve][0]=t.slice(e),t=t.slice(0,e),this[$e]-=e),this.emit("data",t),!this[ve].length&&!this[Wi]&&this.emit("drain"),t}end(e,t,r){return typeof e=="function"&&(r=e,e=null),typeof t=="function"&&(r=t,t="utf8"),e&&this.write(e,t),r&&this.once("end",r),this[Wi]=!0,this.writable=!1,(this.flowing||!this[pl])&&this[Gi](),this}[ao](){this[_e]||(this[pl]=!1,this[If]=!0,this.emit("resume"),this[ve].length?this[Nf]():this[Wi]?this[Gi]():this.emit("drain"))}resume(){return this[ao]()}pause(){this[If]=!1,this[pl]=!0}get destroyed(){return this[_e]}get flowing(){return this[If]}get paused(){return this[pl]}[Ey](e){this[ze]?this[$e]+=1:this[$e]+=e.length,this[ve].push(e)}[by](){return this[ze]?this[$e]-=1:this[$e]-=this[ve][0].length,this[ve].shift()}[Nf](e){do;while(this[u1](this[by]())&&this[ve].length);!e&&!this[ve].length&&!this[Wi]&&this.emit("drain")}[u1](e){return this.emit("data",e),this.flowing}pipe(e,t){if(this[_e])return;let r=this[Mr];return t=t||{},e===o1.stdout||e===o1.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,r?t.end&&e.end():(this[bi].push(t.proxyErrors?new Ty(this,e,t):new Df(this,e,t)),this[zi]?ml(()=>this[ao]()):this[ao]()),e}unpipe(e){let t=this[bi].find(r=>r.dest===e);t&&(this[bi].splice(this[bi].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let r=super.on(e,t);return e==="data"&&!this[bi].length&&!this.flowing?this[ao]():e==="readable"&&this[$e]!==0?super.emit("readable"):pz(e)&&this[Mr]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[dl]&&(this[zi]?ml(()=>t.call(this,this[dl])):t.call(this,this[dl])),r}get emittedEnd(){return this[Mr]}[Gi](){!this[Tf]&&!this[Mr]&&!this[_e]&&this[ve].length===0&&this[Wi]&&(this[Tf]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Cf]&&this.emit("close"),this[Tf]=!1)}emit(e,t,...r){if(e!=="error"&&e!=="close"&&e!==_e&&this[_e])return;if(e==="data")return!this[ze]&&!t?!1:this[zi]?ml(()=>this[vy](t)):this[vy](t);if(e==="end")return this[f1]();if(e==="close"){if(this[Cf]=!0,!this[Mr]&&!this[_e])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[dl]=t,super.emit(Sy,t);let s=!this[qn]||this.listeners("error").length?super.emit("error",t):!1;return this[Gi](),s}else if(e==="resume"){let s=super.emit("resume");return this[Gi](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,t,...r);return this[Gi](),n}[vy](e){for(let r of this[bi])r.dest.write(e)===!1&&this.pause();let t=super.emit("data",e);return this[Gi](),t}[f1](){this[Mr]||(this[Mr]=!0,this.readable=!1,this[zi]?ml(()=>this[_y]()):this[_y]())}[_y](){if(this[Vi]){let t=this[Vi].end();if(t){for(let r of this[bi])r.dest.write(t);super.emit("data",t)}}for(let t of this[bi])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[ze]||(e.dataLength=0);let t=this.promise();return this.on("data",r=>{e.push(r),this[ze]||(e.dataLength+=r.length)}),t.then(()=>e)}concat(){return this[ze]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[ze]?Promise.reject(new Error("cannot concat in objectMode")):this[vt]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(_e,()=>t(new Error("stream destroyed"))),this.on("error",r=>t(r)),this.on("end",()=>e())})}[h1](){let e=!1,t=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return t();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Wi])return t();let s=null,o=null,a=f=>{this.removeListener("data",l),this.removeListener("end",c),this.removeListener(_e,u),t(),o(f)},l=f=>{this.removeListener("error",a),this.removeListener("end",c),this.removeListener(_e,u),this.pause(),s({value:f,done:!!this[Wi]})},c=()=>{this.removeListener("error",a),this.removeListener("data",l),this.removeListener(_e,u),t(),s({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((f,h)=>{o=h,s=f,this.once(_e,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:t,return:t,[h1](){return this}}}[d1](){let e=!1,t=()=>(this.pause(),this.removeListener(Sy,t),this.removeListener(_e,t),this.removeListener("end",t),e=!0,{done:!0}),r=()=>{if(e)return t();let n=this.read();return n===null?t():{value:n}};return this.once("end",t),this.once(Sy,t),this.once(_e,t),{next:r,throw:t,return:t,[d1](){return this}}}destroy(e){return this[_e]?(e?this.emit("error",e):this.emit(_e),this):(this[_e]=!0,this[ve].length=0,this[$e]=0,typeof this.close=="function"&&!this[Cf]&&this.close(),e?this.emit("error",e):this.emit(_e),this)}static isStream(e){return!!e&&(e instanceof i||e instanceof a1||e instanceof hz&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};m1.Minipass=Cy});var y1=A((TQ,g1)=>{var yz=require("zlib").constants||{ZLIB_VERNUM:4736};g1.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},yz))});var C1=A((CQ,T1)=>{"use strict";var w1=typeof process=="object"&&process?process:{stdout:null,stderr:null},wz=require("events"),A1=require("stream"),E1=require("string_decoder").StringDecoder,Yi=Symbol("EOF"),Ki=Symbol("maybeEmitEnd"),Ur=Symbol("emittedEnd"),Lf=Symbol("emittingEnd"),gl=Symbol("emittedError"),xf=Symbol("closed"),b1=Symbol("read"),kf=Symbol("flush"),S1=Symbol("flushChunk"),_t=Symbol("encoding"),Qi=Symbol("decoder"),Ff=Symbol("flowing"),yl=Symbol("paused"),lo=Symbol("resume"),qe=Symbol("bufferLength"),Ny=Symbol("bufferPush"),Iy=Symbol("bufferShift"),Ze=Symbol("objectMode"),et=Symbol("destroyed"),Ry=Symbol("emitData"),v1=Symbol("emitEnd"),Dy=Symbol("emitEnd2"),Xi=Symbol("async"),wl=i=>Promise.resolve().then(i),_1=global._MP_NO_ITERATOR_SYMBOLS_!=="1",Az=_1&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Ez=_1&&Symbol.iterator||Symbol("iterator not implemented"),bz=i=>i==="end"||i==="finish"||i==="prefinish",Sz=i=>i instanceof ArrayBuffer||typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,vz=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),$f=class{constructor(e,t,r){this.src=e,this.dest=t,this.opts=r,this.ondrain=()=>e[lo](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Py=class extends $f{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,r){super(e,t,r),this.proxyErrors=n=>t.emit("error",n),e.on("error",this.proxyErrors)}};T1.exports=class O1 extends A1{constructor(e){super(),this[Ff]=!1,this[yl]=!1,this.pipes=[],this.buffer=[],this[Ze]=e&&e.objectMode||!1,this[Ze]?this[_t]=null:this[_t]=e&&e.encoding||null,this[_t]==="buffer"&&(this[_t]=null),this[Xi]=e&&!!e.async||!1,this[Qi]=this[_t]?new E1(this[_t]):null,this[Yi]=!1,this[Ur]=!1,this[Lf]=!1,this[xf]=!1,this[gl]=null,this.writable=!0,this.readable=!0,this[qe]=0,this[et]=!1}get bufferLength(){return this[qe]}get encoding(){return this[_t]}set encoding(e){if(this[Ze])throw new Error("cannot set encoding in objectMode");if(this[_t]&&e!==this[_t]&&(this[Qi]&&this[Qi].lastNeed||this[qe]))throw new Error("cannot change encoding");this[_t]!==e&&(this[Qi]=e?new E1(e):null,this.buffer.length&&(this.buffer=this.buffer.map(t=>this[Qi].write(t)))),this[_t]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Ze]}set objectMode(e){this[Ze]=this[Ze]||!!e}get async(){return this[Xi]}set async(e){this[Xi]=this[Xi]||!!e}write(e,t,r){if(this[Yi])throw new Error("write after end");if(this[et])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(r=t,t="utf8"),t||(t="utf8");let n=this[Xi]?wl:s=>s();return!this[Ze]&&!Buffer.isBuffer(e)&&(vz(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Sz(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Ze]?(this.flowing&&this[qe]!==0&&this[kf](!0),this.flowing?this.emit("data",e):this[Ny](e),this[qe]!==0&&this.emit("readable"),r&&n(r),this.flowing):e.length?(typeof e=="string"&&!(t===this[_t]&&!this[Qi].lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[_t]&&(e=this[Qi].write(e)),this.flowing&&this[qe]!==0&&this[kf](!0),this.flowing?this.emit("data",e):this[Ny](e),this[qe]!==0&&this.emit("readable"),r&&n(r),this.flowing):(this[qe]!==0&&this.emit("readable"),r&&n(r),this.flowing)}read(e){if(this[et])return null;if(this[qe]===0||e===0||e>this[qe])return this[Ki](),null;this[Ze]&&(e=null),this.buffer.length>1&&!this[Ze]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[qe])]);let t=this[b1](e||null,this.buffer[0]);return this[Ki](),t}[b1](e,t){return e===t.length||e===null?this[Iy]():(this.buffer[0]=t.slice(e),t=t.slice(0,e),this[qe]-=e),this.emit("data",t),!this.buffer.length&&!this[Yi]&&this.emit("drain"),t}end(e,t,r){return typeof e=="function"&&(r=e,e=null),typeof t=="function"&&(r=t,t="utf8"),e&&this.write(e,t),r&&this.once("end",r),this[Yi]=!0,this.writable=!1,(this.flowing||!this[yl])&&this[Ki](),this}[lo](){this[et]||(this[yl]=!1,this[Ff]=!0,this.emit("resume"),this.buffer.length?this[kf]():this[Yi]?this[Ki]():this.emit("drain"))}resume(){return this[lo]()}pause(){this[Ff]=!1,this[yl]=!0}get destroyed(){return this[et]}get flowing(){return this[Ff]}get paused(){return this[yl]}[Ny](e){this[Ze]?this[qe]+=1:this[qe]+=e.length,this.buffer.push(e)}[Iy](){return this.buffer.length&&(this[Ze]?this[qe]-=1:this[qe]-=this.buffer[0].length),this.buffer.shift()}[kf](e){do;while(this[S1](this[Iy]()));!e&&!this.buffer.length&&!this[Yi]&&this.emit("drain")}[S1](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,t){if(this[et])return;let r=this[Ur];return t=t||{},e===w1.stdout||e===w1.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,r?t.end&&e.end():(this.pipes.push(t.proxyErrors?new Py(this,e,t):new $f(this,e,t)),this[Xi]?wl(()=>this[lo]()):this[lo]()),e}unpipe(e){let t=this.pipes.find(r=>r.dest===e);t&&(this.pipes.splice(this.pipes.indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let r=super.on(e,t);return e==="data"&&!this.pipes.length&&!this.flowing?this[lo]():e==="readable"&&this[qe]!==0?super.emit("readable"):bz(e)&&this[Ur]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[gl]&&(this[Xi]?wl(()=>t.call(this,this[gl])):t.call(this,this[gl])),r}get emittedEnd(){return this[Ur]}[Ki](){!this[Lf]&&!this[Ur]&&!this[et]&&this.buffer.length===0&&this[Yi]&&(this[Lf]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[xf]&&this.emit("close"),this[Lf]=!1)}emit(e,t,...r){if(e!=="error"&&e!=="close"&&e!==et&&this[et])return;if(e==="data")return t?this[Xi]?wl(()=>this[Ry](t)):this[Ry](t):!1;if(e==="end")return this[v1]();if(e==="close"){if(this[xf]=!0,!this[Ur]&&!this[et])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[gl]=t;let s=super.emit("error",t);return this[Ki](),s}else if(e==="resume"){let s=super.emit("resume");return this[Ki](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,t,...r);return this[Ki](),n}[Ry](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let t=super.emit("data",e);return this[Ki](),t}[v1](){this[Ur]||(this[Ur]=!0,this.readable=!1,this[Xi]?wl(()=>this[Dy]()):this[Dy]())}[Dy](){if(this[Qi]){let t=this[Qi].end();if(t){for(let r of this.pipes)r.dest.write(t);super.emit("data",t)}}for(let t of this.pipes)t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Ze]||(e.dataLength=0);let t=this.promise();return this.on("data",r=>{e.push(r),this[Ze]||(e.dataLength+=r.length)}),t.then(()=>e)}concat(){return this[Ze]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Ze]?Promise.reject(new Error("cannot concat in objectMode")):this[_t]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(et,()=>t(new Error("stream destroyed"))),this.on("error",r=>t(r)),this.on("end",()=>e())})}[Az](){return{next:()=>{let t=this.read();if(t!==null)return Promise.resolve({done:!1,value:t});if(this[Yi])return Promise.resolve({done:!0});let r=null,n=null,s=c=>{this.removeListener("data",o),this.removeListener("end",a),n(c)},o=c=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),r({value:c,done:!!this[Yi]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),r({done:!0})},l=()=>s(new Error("stream destroyed"));return new Promise((c,u)=>{n=u,r=c,this.once(et,l),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[Ez](){return{next:()=>{let t=this.read();return{value:t,done:t===null}}}}destroy(e){return this[et]?(e?this.emit("error",e):this.emit(et),this):(this[et]=!0,this.buffer.length=0,this[qe]=0,typeof this.close=="function"&&!this[xf]&&this.close(),e?this.emit("error",e):this.emit(et),this)}static isStream(e){return!!e&&(e instanceof O1||e instanceof A1||e instanceof wz&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Yy=A(Ft=>{"use strict";var $y=require("assert"),Br=require("buffer").Buffer,R1=require("zlib"),Mn=Ft.constants=y1(),_z=C1(),N1=Br.concat,Un=Symbol("_superWrite"),uo=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},Oz=Symbol("opts"),Al=Symbol("flushFlag"),I1=Symbol("finishFlushFlag"),zy=Symbol("fullFlushFlag"),fe=Symbol("handle"),qf=Symbol("onError"),co=Symbol("sawError"),Ly=Symbol("level"),xy=Symbol("strategy"),ky=Symbol("ended"),NQ=Symbol("_defaultFullFlush"),Mf=class extends _z{constructor(e,t){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[co]=!1,this[ky]=!1,this[Oz]=e,this[Al]=e.flush,this[I1]=e.finishFlush;try{this[fe]=new R1[t](e)}catch(r){throw new uo(r)}this[qf]=r=>{this[co]||(this[co]=!0,this.close(),this.emit("error",r))},this[fe].on("error",r=>this[qf](new uo(r))),this.once("end",()=>this.close)}close(){this[fe]&&(this[fe].close(),this[fe]=null,this.emit("close"))}reset(){if(!this[co])return $y(this[fe],"zlib binding closed"),this[fe].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[zy]),this.write(Object.assign(Br.alloc(0),{[Al]:e})))}end(e,t,r){return e&&this.write(e,t),this.flush(this[I1]),this[ky]=!0,super.end(null,null,r)}get ended(){return this[ky]}write(e,t,r){if(typeof t=="function"&&(r=t,t="utf8"),typeof e=="string"&&(e=Br.from(e,t)),this[co])return;$y(this[fe],"zlib binding closed");let n=this[fe]._handle,s=n.close;n.close=()=>{};let o=this[fe].close;this[fe].close=()=>{},Br.concat=c=>c;let a;try{let c=typeof e[Al]=="number"?e[Al]:this[Al];a=this[fe]._processChunk(e,c),Br.concat=N1}catch(c){Br.concat=N1,this[qf](new uo(c))}finally{this[fe]&&(this[fe]._handle=n,n.close=s,this[fe].close=o,this[fe].removeAllListeners("error"))}this[fe]&&this[fe].on("error",c=>this[qf](new uo(c)));let l;if(a)if(Array.isArray(a)&&a.length>0){l=this[Un](Br.from(a[0]));for(let c=1;c<a.length;c++)l=this[Un](a[c])}else l=this[Un](Br.from(a));return r&&r(),l}[Un](e){return super.write(e)}},Ji=class extends Mf{constructor(e,t){e=e||{},e.flush=e.flush||Mn.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Mn.Z_FINISH,super(e,t),this[zy]=Mn.Z_FULL_FLUSH,this[Ly]=e.level,this[xy]=e.strategy}params(e,t){if(!this[co]){if(!this[fe])throw new Error("cannot switch params when binding is closed");if(!this[fe].params)throw new Error("not supported in this implementation");if(this[Ly]!==e||this[xy]!==t){this.flush(Mn.Z_SYNC_FLUSH),$y(this[fe],"zlib binding closed");let r=this[fe].flush;this[fe].flush=(n,s)=>{this.flush(n),s()};try{this[fe].params(e,t)}finally{this[fe].flush=r}this[fe]&&(this[Ly]=e,this[xy]=t)}}}},qy=class extends Ji{constructor(e){super(e,"Deflate")}},My=class extends Ji{constructor(e){super(e,"Inflate")}},Fy=Symbol("_portable"),Uy=class extends Ji{constructor(e){super(e,"Gzip"),this[Fy]=e&&!!e.portable}[Un](e){return this[Fy]?(this[Fy]=!1,e[9]=255,super[Un](e)):super[Un](e)}},By=class extends Ji{constructor(e){super(e,"Gunzip")}},jy=class extends Ji{constructor(e){super(e,"DeflateRaw")}},Hy=class extends Ji{constructor(e){super(e,"InflateRaw")}},Wy=class extends Ji{constructor(e){super(e,"Unzip")}},Uf=class extends Mf{constructor(e,t){e=e||{},e.flush=e.flush||Mn.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Mn.BROTLI_OPERATION_FINISH,super(e,t),this[zy]=Mn.BROTLI_OPERATION_FLUSH}},Gy=class extends Uf{constructor(e){super(e,"BrotliCompress")}},Vy=class extends Uf{constructor(e){super(e,"BrotliDecompress")}};Ft.Deflate=qy;Ft.Inflate=My;Ft.Gzip=Uy;Ft.Gunzip=By;Ft.DeflateRaw=jy;Ft.InflateRaw=Hy;Ft.Unzip=Wy;typeof R1.BrotliCompress=="function"?(Ft.BrotliCompress=Gy,Ft.BrotliDecompress=Vy):Ft.BrotliCompress=Ft.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var fo=A((DQ,D1)=>{var Tz=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;D1.exports=Tz!=="win32"?i=>i:i=>i&&i.replace(/\\/g,"/")});var Bf=A((LQ,P1)=>{"use strict";var{Minipass:Cz}=Pf(),Ky=fo(),Qy=Symbol("slurp");P1.exports=class extends Cz{constructor(e,t,r){switch(super(),this.pause(),this.extended=t,this.globalExtended=r,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Ky(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Ky(e.linkpath),this.uname=e.uname,this.gname=e.gname,t&&this[Qy](t),r&&this[Qy](r,!0)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");let r=this.remain,n=this.blockRemain;return this.remain=Math.max(0,r-t),this.blockRemain=Math.max(0,n-t),this.ignore?!0:r>=t?super.write(e):super.write(e.slice(0,r))}[Qy](e,t){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(t&&r==="path")&&(this[r]=r==="path"||r==="linkpath"?Ky(e[r]):e[r])}}});var Xy=A(jf=>{"use strict";jf.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);jf.code=new Map(Array.from(jf.name).map(i=>[i[1],i[0]]))});var F1=A((kQ,k1)=>{"use strict";var Nz=(i,e)=>{if(Number.isSafeInteger(i))i<0?Rz(i,e):Iz(i,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},Iz=(i,e)=>{e[0]=128;for(var t=e.length;t>1;t--)e[t-1]=i&255,i=Math.floor(i/256)},Rz=(i,e)=>{e[0]=255;var t=!1;i=i*-1;for(var r=e.length;r>1;r--){var n=i&255;i=Math.floor(i/256),t?e[r-1]=L1(n):n===0?e[r-1]=0:(t=!0,e[r-1]=x1(n))}},Dz=i=>{let e=i[0],t=e===128?Lz(i.slice(1,i.length)):e===255?Pz(i):null;if(t===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(t))throw Error("parsed number outside of javascript safe integer range");return t},Pz=i=>{for(var e=i.length,t=0,r=!1,n=e-1;n>-1;n--){var s=i[n],o;r?o=L1(s):s===0?o=s:(r=!0,o=x1(s)),o!==0&&(t-=o*Math.pow(256,e-n-1))}return t},Lz=i=>{for(var e=i.length,t=0,r=e-1;r>-1;r--){var n=i[r];n!==0&&(t+=n*Math.pow(256,e-r-1))}return t},L1=i=>(255^i)&255,x1=i=>(255^i)+1&255;k1.exports={encode:Nz,parse:Dz}});var po=A((FQ,q1)=>{"use strict";var Jy=Xy(),ho=require("path").posix,$1=F1(),Zy=Symbol("slurp"),$t=Symbol("type"),iw=class{constructor(e,t,r,n){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[$t]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,t||0,r,n):e&&this.set(e)}decode(e,t,r,n){if(t||(t=0),!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");if(this.path=Bn(e,t,100),this.mode=jr(e,t+100,8),this.uid=jr(e,t+108,8),this.gid=jr(e,t+116,8),this.size=jr(e,t+124,12),this.mtime=ew(e,t+136,12),this.cksum=jr(e,t+148,12),this[Zy](r),this[Zy](n,!0),this[$t]=Bn(e,t+156,1),this[$t]===""&&(this[$t]="0"),this[$t]==="0"&&this.path.slice(-1)==="/"&&(this[$t]="5"),this[$t]==="5"&&(this.size=0),this.linkpath=Bn(e,t+157,100),e.slice(t+257,t+265).toString()==="ustar\x0000")if(this.uname=Bn(e,t+265,32),this.gname=Bn(e,t+297,32),this.devmaj=jr(e,t+329,8),this.devmin=jr(e,t+337,8),e[t+475]!==0){let o=Bn(e,t+345,155);this.path=o+"/"+this.path}else{let o=Bn(e,t+345,130);o&&(this.path=o+"/"+this.path),this.atime=ew(e,t+476,12),this.ctime=ew(e,t+488,12)}let s=256;for(let o=t;o<t+148;o++)s+=e[o];for(let o=t+156;o<t+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===256&&(this.nullBlock=!0)}[Zy](e,t){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(t&&r==="path")&&(this[r]=e[r])}encode(e,t){if(e||(e=this.block=Buffer.alloc(512),t=0),t||(t=0),!(e.length>=t+512))throw new Error("need 512 bytes for header");let r=this.ctime||this.atime?130:155,n=xz(this.path||"",r),s=n[0],o=n[1];this.needPax=n[2],this.needPax=jn(e,t,100,s)||this.needPax,this.needPax=Hr(e,t+100,8,this.mode)||this.needPax,this.needPax=Hr(e,t+108,8,this.uid)||this.needPax,this.needPax=Hr(e,t+116,8,this.gid)||this.needPax,this.needPax=Hr(e,t+124,12,this.size)||this.needPax,this.needPax=tw(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this[$t].charCodeAt(0),this.needPax=jn(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=jn(e,t+265,32,this.uname)||this.needPax,this.needPax=jn(e,t+297,32,this.gname)||this.needPax,this.needPax=Hr(e,t+329,8,this.devmaj)||this.needPax,this.needPax=Hr(e,t+337,8,this.devmin)||this.needPax,this.needPax=jn(e,t+345,r,o)||this.needPax,e[t+475]!==0?this.needPax=jn(e,t+345,155,o)||this.needPax:(this.needPax=jn(e,t+345,130,o)||this.needPax,this.needPax=tw(e,t+476,12,this.atime)||this.needPax,this.needPax=tw(e,t+488,12,this.ctime)||this.needPax);let a=256;for(let l=t;l<t+148;l++)a+=e[l];for(let l=t+156;l<t+512;l++)a+=e[l];return this.cksum=a,Hr(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let t in e)e[t]!==null&&e[t]!==void 0&&(this[t]=e[t])}get type(){return Jy.name.get(this[$t])||this[$t]}get typeKey(){return this[$t]}set type(e){Jy.code.has(e)?this[$t]=Jy.code.get(e):this[$t]=e}},xz=(i,e)=>{let r=i,n="",s,o=ho.parse(i).root||".";if(Buffer.byteLength(r)<100)s=[r,n,!1];else{n=ho.dirname(r),r=ho.basename(r);do Buffer.byteLength(r)<=100&&Buffer.byteLength(n)<=e?s=[r,n,!1]:Buffer.byteLength(r)>100&&Buffer.byteLength(n)<=e?s=[r.slice(0,99),n,!0]:(r=ho.join(ho.basename(n),r),n=ho.dirname(n));while(n!==o&&!s);s||(s=[i.slice(0,99),"",!0])}return s},Bn=(i,e,t)=>i.slice(e,e+t).toString("utf8").replace(/\0.*/,""),ew=(i,e,t)=>kz(jr(i,e,t)),kz=i=>i===null?null:new Date(i*1e3),jr=(i,e,t)=>i[e]&128?$1.parse(i.slice(e,e+t)):$z(i,e,t),Fz=i=>isNaN(i)?null:i,$z=(i,e,t)=>Fz(parseInt(i.slice(e,e+t).toString("utf8").replace(/\0.*$/,"").trim(),8)),qz={12:8589934591,8:2097151},Hr=(i,e,t,r)=>r===null?!1:r>qz[t]||r<0?($1.encode(r,i.slice(e,e+t)),!0):(Mz(i,e,t,r),!1),Mz=(i,e,t,r)=>i.write(Uz(r,t),e,t,"ascii"),Uz=(i,e)=>Bz(Math.floor(i).toString(8),e),Bz=(i,e)=>(i.length===e-1?i:new Array(e-i.length-1).join("0")+i+" ")+"\0",tw=(i,e,t,r)=>r===null?!1:Hr(i,e,t,r.getTime()/1e3),jz=new Array(156).join("\0"),jn=(i,e,t,r)=>r===null?!1:(i.write(r+jz,e,t,"utf8"),r.length!==Buffer.byteLength(r)||r.length>t);q1.exports=iw});var Hf=A(($Q,M1)=>{"use strict";var Hz=po(),Wz=require("path"),El=class{constructor(e,t){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=t||!1}encode(){let e=this.encodeBody();if(e==="")return null;let t=Buffer.byteLength(e),r=512*Math.ceil(1+t/512),n=Buffer.allocUnsafe(r);for(let s=0;s<512;s++)n[s]=0;new Hz({path:("PaxHeader/"+Wz.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:t,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(n),n.write(e,512,t,"utf8");for(let s=t+512;s<n.length;s++)n[s]=0;return n}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let t=this[e]instanceof Date?this[e].getTime()/1e3:this[e],r=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+t+"\n",n=Buffer.byteLength(r),s=Math.floor(Math.log(n)/Math.log(10))+1;return n+s>=Math.pow(10,s)&&(s+=1),s+n+r}};El.parse=(i,e,t)=>new El(Gz(Vz(i),e),t);var Gz=(i,e)=>e?Object.keys(i).reduce((t,r)=>(t[r]=i[r],t),e):i,Vz=i=>i.replace(/\n$/,"").split("\n").reduce(zz,Object.create(null)),zz=(i,e)=>{let t=parseInt(e,10);if(t!==Buffer.byteLength(e)+1)return i;e=e.slice((t+" ").length);let r=e.split("="),n=r.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!n)return i;let s=r.join("=");return i[n]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(n)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,i};M1.exports=El});var mo=A((qQ,U1)=>{U1.exports=i=>{let e=i.length-1,t=-1;for(;e>-1&&i.charAt(e)==="/";)t=e,e--;return t===-1?i:i.slice(0,t)}});var Wf=A((MQ,B1)=>{"use strict";B1.exports=i=>class extends i{warn(e,t,r={}){this.file&&(r.file=this.file),this.cwd&&(r.cwd=this.cwd),r.code=t instanceof Error&&t.code||e,r.tarCode=e,!this.strict&&r.recoverable!==!1?(t instanceof Error&&(r=Object.assign(t,r),t=t.message),this.emit("warn",r.tarCode,t,r)):t instanceof Error?this.emit("error",Object.assign(t,r)):this.emit("error",Object.assign(new Error("".concat(e,": ").concat(t)),r))}}});var nw=A((BQ,j1)=>{"use strict";var Gf=["|","<",">","?",":"],rw=Gf.map(i=>String.fromCharCode(61440+i.charCodeAt(0))),Yz=new Map(Gf.map((i,e)=>[i,rw[e]])),Kz=new Map(rw.map((i,e)=>[i,Gf[e]]));j1.exports={encode:i=>Gf.reduce((e,t)=>e.split(t).join(Yz.get(t)),i),decode:i=>rw.reduce((e,t)=>e.split(t).join(Kz.get(t)),i)}});var sw=A((jQ,W1)=>{var{isAbsolute:Qz,parse:H1}=require("path").win32;W1.exports=i=>{let e="",t=H1(i);for(;Qz(i)||t.root;){let r=i.charAt(0)==="/"&&i.slice(0,4)!=="//?/"?"/":t.root;i=i.slice(r.length),e+=r,t=H1(i)}return[e,i]}});var V1=A((HQ,G1)=>{"use strict";G1.exports=(i,e,t)=>(i&=4095,t&&(i=(i|384)&-19),e&&(i&256&&(i|=64),i&32&&(i|=8),i&4&&(i|=1)),i)});var mw=A((VQ,oR)=>{"use strict";var{Minipass:Z1}=Pf(),eR=Hf(),tR=po(),vi=require("fs"),z1=require("path"),Si=fo(),Xz=mo(),iR=(i,e)=>e?(i=Si(i).replace(/^\.(\/|$)/,""),Xz(e)+"/"+i):Si(i),Jz=16*1024*1024,Y1=Symbol("process"),K1=Symbol("file"),Q1=Symbol("directory"),aw=Symbol("symlink"),X1=Symbol("hardlink"),bl=Symbol("header"),Vf=Symbol("read"),lw=Symbol("lstat"),zf=Symbol("onlstat"),cw=Symbol("onread"),uw=Symbol("onreadlink"),fw=Symbol("openfile"),hw=Symbol("onopenfile"),Wr=Symbol("close"),Yf=Symbol("mode"),dw=Symbol("awaitDrain"),ow=Symbol("ondrain"),_i=Symbol("prefix"),J1=Symbol("hadError"),rR=Wf(),Zz=nw(),nR=sw(),sR=V1(),Kf=rR(class extends Z1{constructor(e,t){if(t=t||{},super(t),typeof e!="string")throw new TypeError("path is required");this.path=Si(e),this.portable=!!t.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=t.maxReadSize||Jz,this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.preservePaths=!!t.preservePaths,this.cwd=Si(t.cwd||process.cwd()),this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.prefix=t.prefix?Si(t.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let r=!1;if(!this.preservePaths){let[n,s]=nR(this.path);n&&(this.path=s,r=n)}this.win32=!!t.win32||process.platform==="win32",this.win32&&(this.path=Zz.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=Si(t.absolute||z1.resolve(this.cwd,e)),this.path===""&&(this.path="./"),r&&this.warn("TAR_ENTRY_INFO","stripping ".concat(r," from absolute path"),{entry:this,path:r+this.path}),this.statCache.has(this.absolute)?this[zf](this.statCache.get(this.absolute)):this[lw]()}emit(e,...t){return e==="error"&&(this[J1]=!0),super.emit(e,...t)}[lw](){vi.lstat(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[zf](t)})}[zf](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=t8(e),this.emit("stat",e),this[Y1]()}[Y1](){switch(this.type){case"File":return this[K1]();case"Directory":return this[Q1]();case"SymbolicLink":return this[aw]();default:return this.end()}}[Yf](e){return sR(e,this.type==="Directory",this.portable)}[_i](e){return iR(e,this.prefix)}[bl](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new tR({path:this[_i](this.path),linkpath:this.type==="Link"?this[_i](this.linkpath):this.linkpath,mode:this[Yf](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new eR({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[_i](this.path),linkpath:this.type==="Link"?this[_i](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[Q1](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[bl](),this.end()}[aw](){vi.readlink(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[uw](t)})}[uw](e){this.linkpath=Si(e),this[bl](),this.end()}[X1](e){this.type="Link",this.linkpath=Si(z1.relative(this.cwd,e)),this.stat.size=0,this[bl](),this.end()}[K1](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let t=this.linkCache.get(e);if(t.indexOf(this.cwd)===0)return this[X1](t)}this.linkCache.set(e,this.absolute)}if(this[bl](),this.stat.size===0)return this.end();this[fw]()}[fw](){vi.open(this.absolute,"r",(e,t)=>{if(e)return this.emit("error",e);this[hw](t)})}[hw](e){if(this.fd=e,this[J1])return this[Wr]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Vf]()}[Vf](){let{fd:e,buf:t,offset:r,length:n,pos:s}=this;vi.read(e,t,r,n,s,(o,a)=>{if(o)return this[Wr](()=>this.emit("error",o));this[cw](a)})}[Wr](e){vi.close(this.fd,e)}[cw](e){if(e<=0&&this.remain>0){let n=new Error("encountered unexpected EOF");return n.path=this.absolute,n.syscall="read",n.code="EOF",this[Wr](()=>this.emit("error",n))}if(e>this.remain){let n=new Error("did not encounter expected EOF");return n.path=this.absolute,n.syscall="read",n.code="EOF",this[Wr](()=>this.emit("error",n))}if(e===this.remain)for(let n=e;n<this.length&&e<this.blockRemain;n++)this.buf[n+this.offset]=0,e++,this.remain++;let t=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(t)?this[ow]():this[dw](()=>this[ow]())}[dw](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let t=new Error("writing more data than expected");return t.path=this.absolute,this.emit("error",t)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[ow](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Wr](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Vf]()}}),pw=class extends Kf{[lw](){this[zf](vi.lstatSync(this.absolute))}[aw](){this[uw](vi.readlinkSync(this.absolute))}[fw](){this[hw](vi.openSync(this.absolute,"r"))}[Vf](){let e=!0;try{let{fd:t,buf:r,offset:n,length:s,pos:o}=this,a=vi.readSync(t,r,n,s,o);this[cw](a),e=!1}finally{if(e)try{this[Wr](()=>{})}catch{}}}[dw](e){e()}[Wr](e){vi.closeSync(this.fd),e()}},e8=rR(class extends Z1{constructor(e,t){t=t||{},super(t),this.preservePaths=!!t.preservePaths,this.portable=!!t.portable,this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=t.prefix||null,this.path=Si(e.path),this.mode=this[Yf](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:t.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=Si(e.linkpath),typeof t.onwarn=="function"&&this.on("warn",t.onwarn);let r=!1;if(!this.preservePaths){let[n,s]=nR(this.path);n&&(this.path=s,r=n)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new tR({path:this[_i](this.path),linkpath:this.type==="Link"?this[_i](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),r&&this.warn("TAR_ENTRY_INFO","stripping ".concat(r," from absolute path"),{entry:this,path:r+this.path}),this.header.encode()&&!this.noPax&&super.write(new eR({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[_i](this.path),linkpath:this.type==="Link"?this[_i](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[_i](e){return iR(e,this.prefix)}[Yf](e){return sR(e,this.type==="Directory",this.portable)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=t,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Kf.Sync=pw;Kf.Tar=e8;var t8=i=>i.isFile()?"File":i.isDirectory()?"Directory":i.isSymbolicLink()?"SymbolicLink":"Unsupported";oR.exports=Kf});var lR=A((zQ,aR)=>{"use strict";aR.exports=function(i){i.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var gw=A((YQ,cR)=>{"use strict";cR.exports=Z;Z.Node=Hn;Z.create=Z;function Z(i){var e=this;if(e instanceof Z||(e=new Z),e.tail=null,e.head=null,e.length=0,i&&typeof i.forEach=="function")i.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var t=0,r=arguments.length;t<r;t++)e.push(arguments[t]);return e}Z.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var e=i.next,t=i.prev;return e&&(e.prev=t),t&&(t.next=e),i===this.head&&(this.head=e),i===this.tail&&(this.tail=t),i.list.length--,i.next=null,i.prev=null,i.list=null,e};Z.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var e=this.head;i.list=this,i.next=e,e&&(e.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}};Z.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var e=this.tail;i.list=this,i.prev=e,e&&(e.next=i),this.tail=i,this.head||(this.head=i),this.length++}};Z.prototype.push=function(){for(var i=0,e=arguments.length;i<e;i++)r8(this,arguments[i]);return this.length};Z.prototype.unshift=function(){for(var i=0,e=arguments.length;i<e;i++)n8(this,arguments[i]);return this.length};Z.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}};Z.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}};Z.prototype.forEach=function(i,e){e=e||this;for(var t=this.head,r=0;t!==null;r++)i.call(e,t.value,r,this),t=t.next};Z.prototype.forEachReverse=function(i,e){e=e||this;for(var t=this.tail,r=this.length-1;t!==null;r--)i.call(e,t.value,r,this),t=t.prev};Z.prototype.get=function(i){for(var e=0,t=this.head;t!==null&&e<i;e++)t=t.next;if(e===i&&t!==null)return t.value};Z.prototype.getReverse=function(i){for(var e=0,t=this.tail;t!==null&&e<i;e++)t=t.prev;if(e===i&&t!==null)return t.value};Z.prototype.map=function(i,e){e=e||this;for(var t=new Z,r=this.head;r!==null;)t.push(i.call(e,r.value,this)),r=r.next;return t};Z.prototype.mapReverse=function(i,e){e=e||this;for(var t=new Z,r=this.tail;r!==null;)t.push(i.call(e,r.value,this)),r=r.prev;return t};Z.prototype.reduce=function(i,e){var t,r=this.head;if(arguments.length>1)t=e;else if(this.head)r=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;r!==null;n++)t=i(t,r.value,n),r=r.next;return t};Z.prototype.reduceReverse=function(i,e){var t,r=this.tail;if(arguments.length>1)t=e;else if(this.tail)r=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;r!==null;n--)t=i(t,r.value,n),r=r.prev;return t};Z.prototype.toArray=function(){for(var i=new Array(this.length),e=0,t=this.head;t!==null;e++)i[e]=t.value,t=t.next;return i};Z.prototype.toArrayReverse=function(){for(var i=new Array(this.length),e=0,t=this.tail;t!==null;e++)i[e]=t.value,t=t.prev;return i};Z.prototype.slice=function(i,e){e=e||this.length,e<0&&(e+=this.length),i=i||0,i<0&&(i+=this.length);var t=new Z;if(e<i||e<0)return t;i<0&&(i=0),e>this.length&&(e=this.length);for(var r=0,n=this.head;n!==null&&r<i;r++)n=n.next;for(;n!==null&&r<e;r++,n=n.next)t.push(n.value);return t};Z.prototype.sliceReverse=function(i,e){e=e||this.length,e<0&&(e+=this.length),i=i||0,i<0&&(i+=this.length);var t=new Z;if(e<i||e<0)return t;i<0&&(i=0),e>this.length&&(e=this.length);for(var r=this.length,n=this.tail;n!==null&&r>e;r--)n=n.prev;for(;n!==null&&r>i;r--,n=n.prev)t.push(n.value);return t};Z.prototype.splice=function(i,e,...t){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var r=0,n=this.head;n!==null&&r<i;r++)n=n.next;for(var s=[],r=0;n&&r<e;r++)s.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var r=0;r<t.length;r++)n=i8(this,n,t[r]);return s};Z.prototype.reverse=function(){for(var i=this.head,e=this.tail,t=i;t!==null;t=t.prev){var r=t.prev;t.prev=t.next,t.next=r}return this.head=e,this.tail=i,this};function i8(i,e,t){var r=e===i.head?new Hn(t,null,e,i):new Hn(t,e,e.next,i);return r.next===null&&(i.tail=r),r.prev===null&&(i.head=r),i.length++,r}function r8(i,e){i.tail=new Hn(e,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function n8(i,e){i.head=new Hn(e,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function Hn(i,e,t,r){if(!(this instanceof Hn))return new Hn(i,e,t,r);this.list=r,this.value=i,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{lR()(Z)}catch{}});var nh=A((QQ,yR)=>{"use strict";var ih=class{constructor(e,t){this.path=e||"./",this.absolute=t,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},{Minipass:s8}=Pf(),uR=Yy(),o8=Bf(),Ow=mw(),a8=Ow.Sync,l8=Ow.Tar,c8=gw(),fR=Buffer.alloc(1024),Jf=Symbol("onStat"),Qf=Symbol("ended"),Oi=Symbol("queue"),go=Symbol("current"),Wn=Symbol("process"),Xf=Symbol("processing"),hR=Symbol("processJob"),Ti=Symbol("jobs"),yw=Symbol("jobDone"),Zf=Symbol("addFSEntry"),dR=Symbol("addTarEntry"),bw=Symbol("stat"),Sw=Symbol("readdir"),eh=Symbol("onreaddir"),th=Symbol("pipe"),pR=Symbol("entry"),ww=Symbol("entryOpt"),vw=Symbol("writeEntryClass"),gR=Symbol("write"),Aw=Symbol("ondrain"),rh=require("fs"),mR=require("path"),u8=Wf(),Ew=fo(),Tw=u8(class extends s8{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Ew(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[vw]=Ow,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new uR.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new uR.BrotliCompress(e.brotli)),this.zip.on("data",t=>super.write(t)),this.zip.on("end",t=>super.end()),this.zip.on("drain",t=>this[Aw]()),this.on("resume",t=>this.zip.resume())}else this.on("drain",this[Aw]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:t=>!0,this[Oi]=new c8,this[Ti]=0,this.jobs=+e.jobs||4,this[Xf]=!1,this[Qf]=!1}[gR](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Qf]=!0,this[Wn](),this}write(e){if(this[Qf])throw new Error("write after end");return e instanceof o8?this[dR](e):this[Zf](e),this.flowing}[dR](e){let t=Ew(mR.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let r=new ih(e.path,t,!1);r.entry=new l8(e,this[ww](r)),r.entry.on("end",n=>this[yw](r)),this[Ti]+=1,this[Oi].push(r)}this[Wn]()}[Zf](e){let t=Ew(mR.resolve(this.cwd,e));this[Oi].push(new ih(e,t)),this[Wn]()}[bw](e){e.pending=!0,this[Ti]+=1;let t=this.follow?"stat":"lstat";rh[t](e.absolute,(r,n)=>{e.pending=!1,this[Ti]-=1,r?this.emit("error",r):this[Jf](e,n)})}[Jf](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[Wn]()}[Sw](e){e.pending=!0,this[Ti]+=1,rh.readdir(e.absolute,(t,r)=>{if(e.pending=!1,this[Ti]-=1,t)return this.emit("error",t);this[eh](e,r)})}[eh](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[Wn]()}[Wn](){if(!this[Xf]){this[Xf]=!0;for(let e=this[Oi].head;e!==null&&this[Ti]<this.jobs;e=e.next)if(this[hR](e.value),e.value.ignore){let t=e.next;this[Oi].removeNode(e),e.next=t}this[Xf]=!1,this[Qf]&&!this[Oi].length&&this[Ti]===0&&(this.zip?this.zip.end(fR):(super.write(fR),super.end()))}}get[go](){return this[Oi]&&this[Oi].head&&this[Oi].head.value}[yw](e){this[Oi].shift(),this[Ti]-=1,this[Wn]()}[hR](e){if(!e.pending){if(e.entry){e===this[go]&&!e.piped&&this[th](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Jf](e,this.statCache.get(e.absolute)):this[bw](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[eh](e,this.readdirCache.get(e.absolute)):this[Sw](e),!e.readdir))){if(e.entry=this[pR](e),!e.entry){e.ignore=!0;return}e===this[go]&&!e.piped&&this[th](e)}}}[ww](e){return{onwarn:(t,r,n)=>this.warn(t,r,n),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[pR](e){this[Ti]+=1;try{return new this[vw](e.path,this[ww](e)).on("end",()=>this[yw](e)).on("error",t=>this.emit("error",t))}catch(t){this.emit("error",t)}}[Aw](){this[go]&&this[go].entry&&this[go].entry.resume()}[th](e){e.piped=!0,e.readdir&&e.readdir.forEach(n=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[Zf](o+n)});let t=e.entry,r=this.zip;r?t.on("data",n=>{r.write(n)||t.pause()}):t.on("data",n=>{super.write(n)||t.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),_w=class extends Tw{constructor(e){super(e),this[vw]=a8}pause(){}resume(){}[bw](e){let t=this.follow?"statSync":"lstatSync";this[Jf](e,rh[t](e.absolute))}[Sw](e,t){this[eh](e,rh.readdirSync(e.absolute))}[th](e){let t=e.entry,r=this.zip;e.readdir&&e.readdir.forEach(n=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[Zf](o+n)}),r?t.on("data",n=>{r.write(n)}):t.on("data",n=>{super[gR](n)})}};Tw.Sync=_w;yR.exports=Tw});var CR=A((XQ,TR)=>{"use strict";var wR=typeof process=="object"&&process?process:{stdout:null,stderr:null},f8=require("events"),AR=require("stream"),ER=require("string_decoder").StringDecoder,Zi=Symbol("EOF"),er=Symbol("maybeEmitEnd"),Gr=Symbol("emittedEnd"),sh=Symbol("emittingEnd"),Sl=Symbol("emittedError"),oh=Symbol("closed"),bR=Symbol("read"),ah=Symbol("flush"),SR=Symbol("flushChunk"),Ot=Symbol("encoding"),tr=Symbol("decoder"),lh=Symbol("flowing"),vl=Symbol("paused"),yo=Symbol("resume"),Me=Symbol("bufferLength"),Cw=Symbol("bufferPush"),Nw=Symbol("bufferShift"),tt=Symbol("objectMode"),it=Symbol("destroyed"),Iw=Symbol("emitData"),vR=Symbol("emitEnd"),Rw=Symbol("emitEnd2"),ir=Symbol("async"),_l=i=>Promise.resolve().then(i),_R=global._MP_NO_ITERATOR_SYMBOLS_!=="1",h8=_R&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),d8=_R&&Symbol.iterator||Symbol("iterator not implemented"),p8=i=>i==="end"||i==="finish"||i==="prefinish",m8=i=>i instanceof ArrayBuffer||typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,g8=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),ch=class{constructor(e,t,r){this.src=e,this.dest=t,this.opts=r,this.ondrain=()=>e[yo](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Dw=class extends ch{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,r){super(e,t,r),this.proxyErrors=n=>t.emit("error",n),e.on("error",this.proxyErrors)}};TR.exports=class OR extends AR{constructor(e){super(),this[lh]=!1,this[vl]=!1,this.pipes=[],this.buffer=[],this[tt]=e&&e.objectMode||!1,this[tt]?this[Ot]=null:this[Ot]=e&&e.encoding||null,this[Ot]==="buffer"&&(this[Ot]=null),this[ir]=e&&!!e.async||!1,this[tr]=this[Ot]?new ER(this[Ot]):null,this[Zi]=!1,this[Gr]=!1,this[sh]=!1,this[oh]=!1,this[Sl]=null,this.writable=!0,this.readable=!0,this[Me]=0,this[it]=!1}get bufferLength(){return this[Me]}get encoding(){return this[Ot]}set encoding(e){if(this[tt])throw new Error("cannot set encoding in objectMode");if(this[Ot]&&e!==this[Ot]&&(this[tr]&&this[tr].lastNeed||this[Me]))throw new Error("cannot change encoding");this[Ot]!==e&&(this[tr]=e?new ER(e):null,this.buffer.length&&(this.buffer=this.buffer.map(t=>this[tr].write(t)))),this[Ot]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[tt]}set objectMode(e){this[tt]=this[tt]||!!e}get async(){return this[ir]}set async(e){this[ir]=this[ir]||!!e}write(e,t,r){if(this[Zi])throw new Error("write after end");if(this[it])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(r=t,t="utf8"),t||(t="utf8");let n=this[ir]?_l:s=>s();return!this[tt]&&!Buffer.isBuffer(e)&&(g8(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):m8(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[tt]?(this.flowing&&this[Me]!==0&&this[ah](!0),this.flowing?this.emit("data",e):this[Cw](e),this[Me]!==0&&this.emit("readable"),r&&n(r),this.flowing):e.length?(typeof e=="string"&&!(t===this[Ot]&&!this[tr].lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[Ot]&&(e=this[tr].write(e)),this.flowing&&this[Me]!==0&&this[ah](!0),this.flowing?this.emit("data",e):this[Cw](e),this[Me]!==0&&this.emit("readable"),r&&n(r),this.flowing):(this[Me]!==0&&this.emit("readable"),r&&n(r),this.flowing)}read(e){if(this[it])return null;if(this[Me]===0||e===0||e>this[Me])return this[er](),null;this[tt]&&(e=null),this.buffer.length>1&&!this[tt]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[Me])]);let t=this[bR](e||null,this.buffer[0]);return this[er](),t}[bR](e,t){return e===t.length||e===null?this[Nw]():(this.buffer[0]=t.slice(e),t=t.slice(0,e),this[Me]-=e),this.emit("data",t),!this.buffer.length&&!this[Zi]&&this.emit("drain"),t}end(e,t,r){return typeof e=="function"&&(r=e,e=null),typeof t=="function"&&(r=t,t="utf8"),e&&this.write(e,t),r&&this.once("end",r),this[Zi]=!0,this.writable=!1,(this.flowing||!this[vl])&&this[er](),this}[yo](){this[it]||(this[vl]=!1,this[lh]=!0,this.emit("resume"),this.buffer.length?this[ah]():this[Zi]?this[er]():this.emit("drain"))}resume(){return this[yo]()}pause(){this[lh]=!1,this[vl]=!0}get destroyed(){return this[it]}get flowing(){return this[lh]}get paused(){return this[vl]}[Cw](e){this[tt]?this[Me]+=1:this[Me]+=e.length,this.buffer.push(e)}[Nw](){return this.buffer.length&&(this[tt]?this[Me]-=1:this[Me]-=this.buffer[0].length),this.buffer.shift()}[ah](e){do;while(this[SR](this[Nw]()));!e&&!this.buffer.length&&!this[Zi]&&this.emit("drain")}[SR](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,t){if(this[it])return;let r=this[Gr];return t=t||{},e===wR.stdout||e===wR.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,r?t.end&&e.end():(this.pipes.push(t.proxyErrors?new Dw(this,e,t):new ch(this,e,t)),this[ir]?_l(()=>this[yo]()):this[yo]()),e}unpipe(e){let t=this.pipes.find(r=>r.dest===e);t&&(this.pipes.splice(this.pipes.indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let r=super.on(e,t);return e==="data"&&!this.pipes.length&&!this.flowing?this[yo]():e==="readable"&&this[Me]!==0?super.emit("readable"):p8(e)&&this[Gr]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Sl]&&(this[ir]?_l(()=>t.call(this,this[Sl])):t.call(this,this[Sl])),r}get emittedEnd(){return this[Gr]}[er](){!this[sh]&&!this[Gr]&&!this[it]&&this.buffer.length===0&&this[Zi]&&(this[sh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[oh]&&this.emit("close"),this[sh]=!1)}emit(e,t,...r){if(e!=="error"&&e!=="close"&&e!==it&&this[it])return;if(e==="data")return t?this[ir]?_l(()=>this[Iw](t)):this[Iw](t):!1;if(e==="end")return this[vR]();if(e==="close"){if(this[oh]=!0,!this[Gr]&&!this[it])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Sl]=t;let s=super.emit("error",t);return this[er](),s}else if(e==="resume"){let s=super.emit("resume");return this[er](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,t,...r);return this[er](),n}[Iw](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let t=super.emit("data",e);return this[er](),t}[vR](){this[Gr]||(this[Gr]=!0,this.readable=!1,this[ir]?_l(()=>this[Rw]()):this[Rw]())}[Rw](){if(this[tr]){let t=this[tr].end();if(t){for(let r of this.pipes)r.dest.write(t);super.emit("data",t)}}for(let t of this.pipes)t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[tt]||(e.dataLength=0);let t=this.promise();return this.on("data",r=>{e.push(r),this[tt]||(e.dataLength+=r.length)}),t.then(()=>e)}concat(){return this[tt]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[tt]?Promise.reject(new Error("cannot concat in objectMode")):this[Ot]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(it,()=>t(new Error("stream destroyed"))),this.on("error",r=>t(r)),this.on("end",()=>e())})}[h8](){return{next:()=>{let t=this.read();if(t!==null)return Promise.resolve({done:!1,value:t});if(this[Zi])return Promise.resolve({done:!0});let r=null,n=null,s=c=>{this.removeListener("data",o),this.removeListener("end",a),n(c)},o=c=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),r({value:c,done:!!this[Zi]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),r({done:!0})},l=()=>s(new Error("stream destroyed"));return new Promise((c,u)=>{n=u,r=c,this.once(it,l),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[d8](){return{next:()=>{let t=this.read();return{value:t,done:t===null}}}}destroy(e){return this[it]?(e?this.emit("error",e):this.emit(it),this):(this[it]=!0,this.buffer.length=0,this[Me]=0,typeof this.close=="function"&&!this[oh]&&this.close(),e?this.emit("error",e):this.emit(it),this)}static isStream(e){return!!e&&(e instanceof OR||e instanceof AR||e instanceof f8&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Oo=A(Tl=>{"use strict";var y8=CR(),w8=require("events").EventEmitter,Tt=require("fs"),xw=Tt.writev;if(!xw){let i=process.binding("fs"),e=i.FSReqWrap||i.FSReqCallback;xw=(t,r,n,s)=>{let o=(l,c)=>s(l,c,r),a=new e;a.oncomplete=o,i.writeBuffers(t,r,n,a)}}var vo=Symbol("_autoClose"),ui=Symbol("_close"),Ol=Symbol("_ended"),le=Symbol("_fd"),NR=Symbol("_finished"),zr=Symbol("_flags"),Pw=Symbol("_flush"),kw=Symbol("_handleChunk"),Fw=Symbol("_makeBuf"),ph=Symbol("_mode"),uh=Symbol("_needDrain"),bo=Symbol("_onerror"),_o=Symbol("_onopen"),Lw=Symbol("_onread"),Ao=Symbol("_onwrite"),Yr=Symbol("_open"),rr=Symbol("_path"),Gn=Symbol("_pos"),Ci=Symbol("_queue"),Eo=Symbol("_read"),IR=Symbol("_readSize"),Vr=Symbol("_reading"),fh=Symbol("_remain"),RR=Symbol("_size"),hh=Symbol("_write"),wo=Symbol("_writing"),dh=Symbol("_defaultFlag"),So=Symbol("_errored"),mh=class extends y8{constructor(e,t){if(t=t||{},super(t),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[So]=!1,this[le]=typeof t.fd=="number"?t.fd:null,this[rr]=e,this[IR]=t.readSize||16*1024*1024,this[Vr]=!1,this[RR]=typeof t.size=="number"?t.size:1/0,this[fh]=this[RR],this[vo]=typeof t.autoClose=="boolean"?t.autoClose:!0,typeof this[le]=="number"?this[Eo]():this[Yr]()}get fd(){return this[le]}get path(){return this[rr]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Yr](){Tt.open(this[rr],"r",(e,t)=>this[_o](e,t))}[_o](e,t){e?this[bo](e):(this[le]=t,this.emit("open",t),this[Eo]())}[Fw](){return Buffer.allocUnsafe(Math.min(this[IR],this[fh]))}[Eo](){if(!this[Vr]){this[Vr]=!0;let e=this[Fw]();if(e.length===0)return process.nextTick(()=>this[Lw](null,0,e));Tt.read(this[le],e,0,e.length,null,(t,r,n)=>this[Lw](t,r,n))}}[Lw](e,t,r){this[Vr]=!1,e?this[bo](e):this[kw](t,r)&&this[Eo]()}[ui](){if(this[vo]&&typeof this[le]=="number"){let e=this[le];this[le]=null,Tt.close(e,t=>t?this.emit("error",t):this.emit("close"))}}[bo](e){this[Vr]=!0,this[ui](),this.emit("error",e)}[kw](e,t){let r=!1;return this[fh]-=e,e>0&&(r=super.write(e<t.length?t.slice(0,e):t)),(e===0||this[fh]<=0)&&(r=!1,this[ui](),super.end()),r}emit(e,t){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[le]=="number"&&this[Eo]();break;case"error":return this[So]?void 0:(this[So]=!0,super.emit(e,t));default:return super.emit(e,t)}}},$w=class extends mh{[Yr](){let e=!0;try{this[_o](null,Tt.openSync(this[rr],"r")),e=!1}finally{e&&this[ui]()}}[Eo](){let e=!0;try{if(!this[Vr]){this[Vr]=!0;do{let t=this[Fw](),r=t.length===0?0:Tt.readSync(this[le],t,0,t.length,null);if(!this[kw](r,t))break}while(!0);this[Vr]=!1}e=!1}finally{e&&this[ui]()}}[ui](){if(this[vo]&&typeof this[le]=="number"){let e=this[le];this[le]=null,Tt.closeSync(e),this.emit("close")}}},gh=class extends w8{constructor(e,t){t=t||{},super(t),this.readable=!1,this.writable=!0,this[So]=!1,this[wo]=!1,this[Ol]=!1,this[uh]=!1,this[Ci]=[],this[rr]=e,this[le]=typeof t.fd=="number"?t.fd:null,this[ph]=t.mode===void 0?438:t.mode,this[Gn]=typeof t.start=="number"?t.start:null,this[vo]=typeof t.autoClose=="boolean"?t.autoClose:!0;let r=this[Gn]!==null?"r+":"w";this[dh]=t.flags===void 0,this[zr]=this[dh]?r:t.flags,this[le]===null&&this[Yr]()}emit(e,t){if(e==="error"){if(this[So])return;this[So]=!0}return super.emit(e,t)}get fd(){return this[le]}get path(){return this[rr]}[bo](e){this[ui](),this[wo]=!0,this.emit("error",e)}[Yr](){Tt.open(this[rr],this[zr],this[ph],(e,t)=>this[_o](e,t))}[_o](e,t){this[dh]&&this[zr]==="r+"&&e&&e.code==="ENOENT"?(this[zr]="w",this[Yr]()):e?this[bo](e):(this[le]=t,this.emit("open",t),this[Pw]())}end(e,t){return e&&this.write(e,t),this[Ol]=!0,!this[wo]&&!this[Ci].length&&typeof this[le]=="number"&&this[Ao](null,0),this}write(e,t){return typeof e=="string"&&(e=Buffer.from(e,t)),this[Ol]?(this.emit("error",new Error("write() after end()")),!1):this[le]===null||this[wo]||this[Ci].length?(this[Ci].push(e),this[uh]=!0,!1):(this[wo]=!0,this[hh](e),!0)}[hh](e){Tt.write(this[le],e,0,e.length,this[Gn],(t,r)=>this[Ao](t,r))}[Ao](e,t){e?this[bo](e):(this[Gn]!==null&&(this[Gn]+=t),this[Ci].length?this[Pw]():(this[wo]=!1,this[Ol]&&!this[NR]?(this[NR]=!0,this[ui](),this.emit("finish")):this[uh]&&(this[uh]=!1,this.emit("drain"))))}[Pw](){if(this[Ci].length===0)this[Ol]&&this[Ao](null,0);else if(this[Ci].length===1)this[hh](this[Ci].pop());else{let e=this[Ci];this[Ci]=[],xw(this[le],e,this[Gn],(t,r)=>this[Ao](t,r))}}[ui](){if(this[vo]&&typeof this[le]=="number"){let e=this[le];this[le]=null,Tt.close(e,t=>t?this.emit("error",t):this.emit("close"))}}},qw=class extends gh{[Yr](){let e;if(this[dh]&&this[zr]==="r+")try{e=Tt.openSync(this[rr],this[zr],this[ph])}catch(t){if(t.code==="ENOENT")return this[zr]="w",this[Yr]();throw t}else e=Tt.openSync(this[rr],this[zr],this[ph]);this[_o](null,e)}[ui](){if(this[vo]&&typeof this[le]=="number"){let e=this[le];this[le]=null,Tt.closeSync(e),this.emit("close")}}[hh](e){let t=!0;try{this[Ao](null,Tt.writeSync(this[le],e,0,e.length,this[Gn])),t=!1}finally{if(t)try{this[ui]()}catch{}}}};Tl.ReadStream=mh;Tl.ReadStreamSync=$w;Tl.WriteStream=gh;Tl.WriteStreamSync=qw});var vh=A((eX,UR)=>{"use strict";var A8=Wf(),DR=po(),E8=require("events"),b8=gw(),S8=1024*1024,v8=Bf(),PR=Hf(),LR=Yy(),{nextTick:_8}=require("process"),Mw=Buffer.from([31,139]),Qt=Symbol("state"),Vn=Symbol("writeEntry"),nr=Symbol("readEntry"),Uw=Symbol("nextEntry"),xR=Symbol("processEntry"),Xt=Symbol("extendedHeader"),Cl=Symbol("globalExtendedHeader"),Kr=Symbol("meta"),kR=Symbol("emitMeta"),he=Symbol("buffer"),sr=Symbol("queue"),Qr=Symbol("ended"),FR=Symbol("emittedEnd"),zn=Symbol("emit"),Ue=Symbol("unzip"),yh=Symbol("consumeChunk"),wh=Symbol("consumeChunkSub"),Bw=Symbol("consumeBody"),$R=Symbol("consumeMeta"),qR=Symbol("consumeHeader"),Ah=Symbol("consuming"),jw=Symbol("bufferConcat"),Hw=Symbol("maybeEnd"),Nl=Symbol("writing"),Xr=Symbol("aborted"),Eh=Symbol("onDone"),Yn=Symbol("sawValidEntry"),bh=Symbol("sawNullBlock"),Sh=Symbol("sawEOF"),MR=Symbol("closeStream"),O8=i=>!0;UR.exports=A8(class extends E8{constructor(e){e=e||{},super(e),this.file=e.file||"",this[Yn]=null,this.on(Eh,r=>{(this[Qt]==="begin"||this[Yn]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Eh,e.ondone):this.on(Eh,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||S8,this.filter=typeof e.filter=="function"?e.filter:O8;let t=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:t?void 0:!1,this.writable=!0,this.readable=!1,this[sr]=new b8,this[he]=null,this[nr]=null,this[Vn]=null,this[Qt]="begin",this[Kr]="",this[Xt]=null,this[Cl]=null,this[Qr]=!1,this[Ue]=null,this[Xr]=!1,this[bh]=!1,this[Sh]=!1,this.on("end",()=>this[MR]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[qR](e,t){this[Yn]===null&&(this[Yn]=!1);let r;try{r=new DR(e,t,this[Xt],this[Cl])}catch(n){return this.warn("TAR_ENTRY_INVALID",n)}if(r.nullBlock)this[bh]?(this[Sh]=!0,this[Qt]==="begin"&&(this[Qt]="header"),this[zn]("eof")):(this[bh]=!0,this[zn]("nullBlock"));else if(this[bh]=!1,!r.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:r});else if(!r.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:r});else{let n=r.type;if(/^(Symbolic)?Link$/.test(n)&&!r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:r});else if(!/^(Symbolic)?Link$/.test(n)&&r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:r});else{let s=this[Vn]=new v8(r,this[Xt],this[Cl]);if(!this[Yn])if(s.remain){let o=()=>{s.invalid||(this[Yn]=!0)};s.on("end",o)}else this[Yn]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[zn]("ignoredEntry",s),this[Qt]="ignore",s.resume()):s.size>0&&(this[Kr]="",s.on("data",o=>this[Kr]+=o),this[Qt]="meta"):(this[Xt]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[zn]("ignoredEntry",s),this[Qt]=s.remain?"ignore":"header",s.resume()):(s.remain?this[Qt]="body":(this[Qt]="header",s.end()),this[nr]?this[sr].push(s):(this[sr].push(s),this[Uw]())))}}}[MR](){_8(()=>this.emit("close"))}[xR](e){let t=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[nr]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",r=>this[Uw]()),t=!1)):(this[nr]=null,t=!1),t}[Uw](){do;while(this[xR](this[sr].shift()));if(!this[sr].length){let e=this[nr];!e||e.flowing||e.size===e.remain?this[Nl]||this.emit("drain"):e.once("drain",r=>this.emit("drain"))}}[Bw](e,t){let r=this[Vn],n=r.blockRemain,s=n>=e.length&&t===0?e:e.slice(t,t+n);return r.write(s),r.blockRemain||(this[Qt]="header",this[Vn]=null,r.end()),s.length}[$R](e,t){let r=this[Vn],n=this[Bw](e,t);return this[Vn]||this[kR](r),n}[zn](e,t,r){!this[sr].length&&!this[nr]?this.emit(e,t,r):this[sr].push([e,t,r])}[kR](e){switch(this[zn]("meta",this[Kr]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Xt]=PR.parse(this[Kr],this[Xt],!1);break;case"GlobalExtendedHeader":this[Cl]=PR.parse(this[Kr],this[Cl],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Xt]=this[Xt]||Object.create(null),this[Xt].path=this[Kr].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Xt]=this[Xt]||Object.create(null),this[Xt].linkpath=this[Kr].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[Xr]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[Xr])return;if((this[Ue]===null||this.brotli===void 0&&this[Ue]===!1)&&e){if(this[he]&&(e=Buffer.concat([this[he],e]),this[he]=null),e.length<Mw.length)return this[he]=e,!0;for(let s=0;this[Ue]===null&&s<Mw.length;s++)e[s]!==Mw[s]&&(this[Ue]=!1);let n=this.brotli===void 0;if(this[Ue]===!1&&n)if(e.length<512)if(this[Qr])this.brotli=!0;else return this[he]=e,!0;else try{new DR(e.slice(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[Ue]===null||this[Ue]===!1&&this.brotli){let s=this[Qr];this[Qr]=!1,this[Ue]=this[Ue]===null?new LR.Unzip:new LR.BrotliDecompress,this[Ue].on("data",a=>this[yh](a)),this[Ue].on("error",a=>this.abort(a)),this[Ue].on("end",a=>{this[Qr]=!0,this[yh]()}),this[Nl]=!0;let o=this[Ue][s?"end":"write"](e);return this[Nl]=!1,o}}this[Nl]=!0,this[Ue]?this[Ue].write(e):this[yh](e),this[Nl]=!1;let r=this[sr].length?!1:this[nr]?this[nr].flowing:!0;return!r&&!this[sr].length&&this[nr].once("drain",n=>this.emit("drain")),r}[jw](e){e&&!this[Xr]&&(this[he]=this[he]?Buffer.concat([this[he],e]):e)}[Hw](){if(this[Qr]&&!this[FR]&&!this[Xr]&&!this[Ah]){this[FR]=!0;let e=this[Vn];if(e&&e.blockRemain){let t=this[he]?this[he].length:0;this.warn("TAR_BAD_ARCHIVE","Truncated input (needed ".concat(e.blockRemain," more bytes, only ").concat(t," available)"),{entry:e}),this[he]&&e.write(this[he]),e.end()}this[zn](Eh)}}[yh](e){if(this[Ah])this[jw](e);else if(!e&&!this[he])this[Hw]();else{if(this[Ah]=!0,this[he]){this[jw](e);let t=this[he];this[he]=null,this[wh](t)}else this[wh](e);for(;this[he]&&this[he].length>=512&&!this[Xr]&&!this[Sh];){let t=this[he];this[he]=null,this[wh](t)}this[Ah]=!1}(!this[he]||this[Qr])&&this[Hw]()}[wh](e){let t=0,r=e.length;for(;t+512<=r&&!this[Xr]&&!this[Sh];)switch(this[Qt]){case"begin":case"header":this[qR](e,t),t+=512;break;case"ignore":case"body":t+=this[Bw](e,t);break;case"meta":t+=this[$R](e,t);break;default:throw new Error("invalid state: "+this[Qt])}t<r&&(this[he]?this[he]=Buffer.concat([e.slice(t),this[he]]):this[he]=e.slice(t))}end(e){this[Xr]||(this[Ue]?this[Ue].end(e):(this[Qr]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),this.write(e)))}})});var _h=A((tX,WR)=>{"use strict";var T8=oo(),jR=vh(),To=require("fs"),C8=Oo(),BR=require("path"),Ww=mo();WR.exports=(i,e,t)=>{typeof i=="function"?(t=i,e=null,i={}):Array.isArray(i)&&(e=i,i={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let r=T8(i);if(r.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&I8(r,e),r.noResume||N8(r),r.file&&r.sync?R8(r):r.file?D8(r,t):HR(r)};var N8=i=>{let e=i.onentry;i.onentry=e?t=>{e(t),t.resume()}:t=>t.resume()},I8=(i,e)=>{let t=new Map(e.map(s=>[Ww(s),!0])),r=i.filter,n=(s,o)=>{let a=o||BR.parse(s).root||".",l=s===a?!1:t.has(s)?t.get(s):n(BR.dirname(s),a);return t.set(s,l),l};i.filter=r?(s,o)=>r(s,o)&&n(Ww(s)):s=>n(Ww(s))},R8=i=>{let e=HR(i),t=i.file,r=!0,n;try{let s=To.statSync(t),o=i.maxReadSize||16*1024*1024;if(s.size<o)e.end(To.readFileSync(t));else{let a=0,l=Buffer.allocUnsafe(o);for(n=To.openSync(t,"r");a<s.size;){let c=To.readSync(n,l,0,o,a);a+=c,e.write(l.slice(0,c))}e.end()}r=!1}finally{if(r&&n)try{To.closeSync(n)}catch{}}},D8=(i,e)=>{let t=new jR(i),r=i.maxReadSize||16*1024*1024,n=i.file,s=new Promise((o,a)=>{t.on("error",a),t.on("end",o),To.stat(n,(l,c)=>{if(l)a(l);else{let u=new C8.ReadStream(n,{readSize:r,size:c.size});u.on("error",a),u.pipe(t)}})});return e?s.then(e,e):s},HR=i=>new jR(i)});var QR=A((iX,KR)=>{"use strict";var P8=oo(),Oh=nh(),GR=Oo(),VR=_h(),zR=require("path");KR.exports=(i,e,t)=>{if(typeof e=="function"&&(t=e),Array.isArray(i)&&(e=i,i={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let r=P8(i);if(r.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return r.file&&r.sync?L8(r,e):r.file?x8(r,e,t):r.sync?k8(r,e):F8(r,e)};var L8=(i,e)=>{let t=new Oh.Sync(i),r=new GR.WriteStreamSync(i.file,{mode:i.mode||438});t.pipe(r),YR(t,e)},x8=(i,e,t)=>{let r=new Oh(i),n=new GR.WriteStream(i.file,{mode:i.mode||438});r.pipe(n);let s=new Promise((o,a)=>{n.on("error",a),n.on("close",o),r.on("error",a)});return Gw(r,e),t?s.then(t,t):s},YR=(i,e)=>{e.forEach(t=>{t.charAt(0)==="@"?VR({file:zR.resolve(i.cwd,t.slice(1)),sync:!0,noResume:!0,onentry:r=>i.add(r)}):i.add(t)}),i.end()},Gw=(i,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return VR({file:zR.resolve(i.cwd,t.slice(1)),noResume:!0,onentry:r=>i.add(r)}).then(r=>Gw(i,e));i.add(t)}i.end()},k8=(i,e)=>{let t=new Oh.Sync(i);return YR(t,e),t},F8=(i,e)=>{let t=new Oh(i);return Gw(t,e),t}});var Vw=A((rX,rD)=>{"use strict";var $8=oo(),XR=nh(),qt=require("fs"),JR=Oo(),ZR=_h(),eD=require("path"),tD=po();rD.exports=(i,e,t)=>{let r=$8(i);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),r.sync?q8(r,e):U8(r,e,t)};var q8=(i,e)=>{let t=new XR.Sync(i),r=!0,n,s;try{try{n=qt.openSync(i.file,"r+")}catch(l){if(l.code==="ENOENT")n=qt.openSync(i.file,"w+");else throw l}let o=qt.fstatSync(n),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,f=0;u<512;u+=f){if(f=qt.readSync(n,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let l=new tD(a);if(!l.cksumValid)break;let c=512*Math.ceil(l.size/512);if(s+c+512>o.size)break;s+=c,i.mtimeCache&&i.mtimeCache.set(l.path,l.mtime)}r=!1,M8(i,t,s,n,e)}finally{if(r)try{qt.closeSync(n)}catch{}}},M8=(i,e,t,r,n)=>{let s=new JR.WriteStreamSync(i.file,{fd:r,start:t});e.pipe(s),B8(e,n)},U8=(i,e,t)=>{e=Array.from(e);let r=new XR(i),n=(o,a,l)=>{let c=(y,g)=>{y?qt.close(o,w=>l(y)):l(null,g)},u=0;if(a===0)return c(null,0);let f=0,h=Buffer.alloc(512),d=(y,g)=>{if(y)return c(y);if(f+=g,f<512&&g)return qt.read(o,h,f,h.length-f,u+f,d);if(u===0&&h[0]===31&&h[1]===139)return c(new Error("cannot append to compressed archives"));if(f<512)return c(null,u);let w=new tD(h);if(!w.cksumValid)return c(null,u);let S=512*Math.ceil(w.size/512);if(u+S+512>a||(u+=S+512,u>=a))return c(null,u);i.mtimeCache&&i.mtimeCache.set(w.path,w.mtime),f=0,qt.read(o,h,0,512,u,d)};qt.read(o,h,0,512,u,d)},s=new Promise((o,a)=>{r.on("error",a);let l="r+",c=(u,f)=>{if(u&&u.code==="ENOENT"&&l==="r+")return l="w+",qt.open(i.file,l,c);if(u)return a(u);qt.fstat(f,(h,d)=>{if(h)return qt.close(f,()=>a(h));n(f,d.size,(y,g)=>{if(y)return a(y);let w=new JR.WriteStream(i.file,{fd:f,start:g});r.pipe(w),w.on("error",a),w.on("close",o),iD(r,e)})})};qt.open(i.file,l,c)});return t?s.then(t,t):s},B8=(i,e)=>{e.forEach(t=>{t.charAt(0)==="@"?ZR({file:eD.resolve(i.cwd,t.slice(1)),sync:!0,noResume:!0,onentry:r=>i.add(r)}):i.add(t)}),i.end()},iD=(i,e)=>{for(;e.length;){let t=e.shift();if(t.charAt(0)==="@")return ZR({file:eD.resolve(i.cwd,t.slice(1)),noResume:!0,onentry:r=>i.add(r)}).then(r=>iD(i,e));i.add(t)}i.end()}});var sD=A((nX,nD)=>{"use strict";var j8=oo(),H8=Vw();nD.exports=(i,e,t)=>{let r=j8(i);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),W8(r),H8(r,e,t)};var W8=i=>{let e=i.filter;i.mtimeCache||(i.mtimeCache=new Map),i.filter=e?(t,r)=>e(t,r)&&!(i.mtimeCache.get(t)>r.mtime):(t,r)=>!(i.mtimeCache.get(t)>r.mtime)}});var lD=A((sX,aD)=>{var{promisify:oD}=require("util"),Jr=require("fs"),G8=i=>{if(!i)i={mode:511,fs:Jr};else if(typeof i=="object")i={mode:511,fs:Jr,...i};else if(typeof i=="number")i={mode:i,fs:Jr};else if(typeof i=="string")i={mode:parseInt(i,8),fs:Jr};else throw new TypeError("invalid options argument");return i.mkdir=i.mkdir||i.fs.mkdir||Jr.mkdir,i.mkdirAsync=oD(i.mkdir),i.stat=i.stat||i.fs.stat||Jr.stat,i.statAsync=oD(i.stat),i.statSync=i.statSync||i.fs.statSync||Jr.statSync,i.mkdirSync=i.mkdirSync||i.fs.mkdirSync||Jr.mkdirSync,i};aD.exports=G8});var uD=A((oX,cD)=>{var V8=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:z8,parse:Y8}=require("path"),K8=i=>{if(/\0/.test(i))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:i,code:"ERR_INVALID_ARG_VALUE"});if(i=z8(i),V8==="win32"){let e=/[*|"<>?:]/,{root:t}=Y8(i);if(e.test(i.substr(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:i,code:"EINVAL"})}return i};cD.exports=K8});var mD=A((aX,pD)=>{var{dirname:fD}=require("path"),hD=(i,e,t=void 0)=>t===e?Promise.resolve():i.statAsync(e).then(r=>r.isDirectory()?t:void 0,r=>r.code==="ENOENT"?hD(i,fD(e),e):void 0),dD=(i,e,t=void 0)=>{if(t!==e)try{return i.statSync(e).isDirectory()?t:void 0}catch(r){return r.code==="ENOENT"?dD(i,fD(e),e):void 0}};pD.exports={findMade:hD,findMadeSync:dD}});var Kw=A((lX,yD)=>{var{dirname:gD}=require("path"),zw=(i,e,t)=>{e.recursive=!1;let r=gD(i);return r===i?e.mkdirAsync(i,e).catch(n=>{if(n.code!=="EISDIR")throw n}):e.mkdirAsync(i,e).then(()=>t||i,n=>{if(n.code==="ENOENT")return zw(r,e).then(s=>zw(i,e,s));if(n.code!=="EEXIST"&&n.code!=="EROFS")throw n;return e.statAsync(i).then(s=>{if(s.isDirectory())return t;throw n},()=>{throw n})})},Yw=(i,e,t)=>{let r=gD(i);if(e.recursive=!1,r===i)try{return e.mkdirSync(i,e)}catch(n){if(n.code!=="EISDIR")throw n;return}try{return e.mkdirSync(i,e),t||i}catch(n){if(n.code==="ENOENT")return Yw(i,e,Yw(r,e,t));if(n.code!=="EEXIST"&&n.code!=="EROFS")throw n;try{if(!e.statSync(i).isDirectory())throw n}catch{throw n}}};yD.exports={mkdirpManual:zw,mkdirpManualSync:Yw}});var ED=A((cX,AD)=>{var{dirname:wD}=require("path"),{findMade:Q8,findMadeSync:X8}=mD(),{mkdirpManual:J8,mkdirpManualSync:Z8}=Kw(),e5=(i,e)=>(e.recursive=!0,wD(i)===i?e.mkdirAsync(i,e):Q8(e,i).then(r=>e.mkdirAsync(i,e).then(()=>r).catch(n=>{if(n.code==="ENOENT")return J8(i,e);throw n}))),t5=(i,e)=>{if(e.recursive=!0,wD(i)===i)return e.mkdirSync(i,e);let r=X8(e,i);try{return e.mkdirSync(i,e),r}catch(n){if(n.code==="ENOENT")return Z8(i,e);throw n}};AD.exports={mkdirpNative:e5,mkdirpNativeSync:t5}});var _D=A((uX,vD)=>{var bD=require("fs"),i5=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Qw=i5.replace(/^v/,"").split("."),SD=+Qw[0]>10||+Qw[0]==10&&+Qw[1]>=12,r5=SD?i=>i.mkdir===bD.mkdir:()=>!1,n5=SD?i=>i.mkdirSync===bD.mkdirSync:()=>!1;vD.exports={useNative:r5,useNativeSync:n5}});var RD=A((fX,ID)=>{var Co=lD(),No=uD(),{mkdirpNative:OD,mkdirpNativeSync:TD}=ED(),{mkdirpManual:CD,mkdirpManualSync:ND}=Kw(),{useNative:s5,useNativeSync:o5}=_D(),Io=(i,e)=>(i=No(i),e=Co(e),s5(e)?OD(i,e):CD(i,e)),a5=(i,e)=>(i=No(i),e=Co(e),o5(e)?TD(i,e):ND(i,e));Io.sync=a5;Io.native=(i,e)=>OD(No(i),Co(e));Io.manual=(i,e)=>CD(No(i),Co(e));Io.nativeSync=(i,e)=>TD(No(i),Co(e));Io.manualSync=(i,e)=>ND(No(i),Co(e));ID.exports=Io});var $D=A((hX,FD)=>{"use strict";var Jt=require("fs"),Kn=require("path"),l5=Jt.lchown?"lchown":"chown",c5=Jt.lchownSync?"lchownSync":"chownSync",PD=Jt.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),DD=(i,e,t)=>{try{return Jt[c5](i,e,t)}catch(r){if(r.code!=="ENOENT")throw r}},u5=(i,e,t)=>{try{return Jt.chownSync(i,e,t)}catch(r){if(r.code!=="ENOENT")throw r}},f5=PD?(i,e,t,r)=>n=>{!n||n.code!=="EISDIR"?r(n):Jt.chown(i,e,t,r)}:(i,e,t,r)=>r,Xw=PD?(i,e,t)=>{try{return DD(i,e,t)}catch(r){if(r.code!=="EISDIR")throw r;u5(i,e,t)}}:(i,e,t)=>DD(i,e,t),h5=process.version,LD=(i,e,t)=>Jt.readdir(i,e,t),d5=(i,e)=>Jt.readdirSync(i,e);/^v4\./.test(h5)&&(LD=(i,e,t)=>Jt.readdir(i,t));var Th=(i,e,t,r)=>{Jt[l5](i,e,t,f5(i,e,t,n=>{r(n&&n.code!=="ENOENT"?n:null)}))},xD=(i,e,t,r,n)=>{if(typeof e=="string")return Jt.lstat(Kn.resolve(i,e),(s,o)=>{if(s)return n(s.code!=="ENOENT"?s:null);o.name=e,xD(i,o,t,r,n)});if(e.isDirectory())Jw(Kn.resolve(i,e.name),t,r,s=>{if(s)return n(s);let o=Kn.resolve(i,e.name);Th(o,t,r,n)});else{let s=Kn.resolve(i,e.name);Th(s,t,r,n)}},Jw=(i,e,t,r)=>{LD(i,{withFileTypes:!0},(n,s)=>{if(n){if(n.code==="ENOENT")return r();if(n.code!=="ENOTDIR"&&n.code!=="ENOTSUP")return r(n)}if(n||!s.length)return Th(i,e,t,r);let o=s.length,a=null,l=c=>{if(!a){if(c)return r(a=c);if(--o===0)return Th(i,e,t,r)}};s.forEach(c=>xD(i,c,e,t,l))})},p5=(i,e,t,r)=>{if(typeof e=="string")try{let n=Jt.lstatSync(Kn.resolve(i,e));n.name=e,e=n}catch(n){if(n.code==="ENOENT")return;throw n}e.isDirectory()&&kD(Kn.resolve(i,e.name),t,r),Xw(Kn.resolve(i,e.name),t,r)},kD=(i,e,t)=>{let r;try{r=d5(i,{withFileTypes:!0})}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR"||n.code==="ENOTSUP")return Xw(i,e,t);throw n}return r&&r.length&&r.forEach(n=>p5(i,n,e,t)),Xw(i,e,t)};FD.exports=Jw;Jw.sync=kD});var BD=A((dX,Zw)=>{"use strict";var qD=RD(),Zt=require("fs"),Ch=require("path"),MD=$D(),fi=fo(),Nh=class extends Error{constructor(e,t){super("Cannot extract through symbolic link"),this.path=t,this.symlink=e}get name(){return"SylinkError"}},Ih=class extends Error{constructor(e,t){super(t+": Cannot cd into '"+e+"'"),this.path=e,this.code=t}get name(){return"CwdError"}},Rh=(i,e)=>i.get(fi(e)),Il=(i,e,t)=>i.set(fi(e),t),m5=(i,e)=>{Zt.stat(i,(t,r)=>{(t||!r.isDirectory())&&(t=new Ih(i,t&&t.code||"ENOTDIR")),e(t)})};Zw.exports=(i,e,t)=>{i=fi(i);let r=e.umask,n=e.mode|448,s=(n&r)!==0,o=e.uid,a=e.gid,l=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),c=e.preserve,u=e.unlink,f=e.cache,h=fi(e.cwd),d=(w,S)=>{w?t(w):(Il(f,i,!0),S&&l?MD(S,o,a,v=>d(v)):s?Zt.chmod(i,n,t):t())};if(f&&Rh(f,i)===!0)return d();if(i===h)return m5(i,d);if(c)return qD(i,{mode:n}).then(w=>d(null,w),d);let g=fi(Ch.relative(h,i)).split("/");Dh(h,g,n,f,u,h,null,d)};var Dh=(i,e,t,r,n,s,o,a)=>{if(!e.length)return a(null,o);let l=e.shift(),c=fi(Ch.resolve(i+"/"+l));if(Rh(r,c))return Dh(c,e,t,r,n,s,o,a);Zt.mkdir(c,t,UD(c,e,t,r,n,s,o,a))},UD=(i,e,t,r,n,s,o,a)=>l=>{l?Zt.lstat(i,(c,u)=>{if(c)c.path=c.path&&fi(c.path),a(c);else if(u.isDirectory())Dh(i,e,t,r,n,s,o,a);else if(n)Zt.unlink(i,f=>{if(f)return a(f);Zt.mkdir(i,t,UD(i,e,t,r,n,s,o,a))});else{if(u.isSymbolicLink())return a(new Nh(i,i+"/"+e.join("/")));a(l)}}):(o=o||i,Dh(i,e,t,r,n,s,o,a))},g5=i=>{let e=!1,t="ENOTDIR";try{e=Zt.statSync(i).isDirectory()}catch(r){t=r.code}finally{if(!e)throw new Ih(i,t)}};Zw.exports.sync=(i,e)=>{i=fi(i);let t=e.umask,r=e.mode|448,n=(r&t)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),l=e.preserve,c=e.unlink,u=e.cache,f=fi(e.cwd),h=w=>{Il(u,i,!0),w&&a&&MD.sync(w,s,o),n&&Zt.chmodSync(i,r)};if(u&&Rh(u,i)===!0)return h();if(i===f)return g5(f),h();if(l)return h(qD.sync(i,r));let y=fi(Ch.relative(f,i)).split("/"),g=null;for(let w=y.shift(),S=f;w&&(S+="/"+w);w=y.shift())if(S=fi(Ch.resolve(S)),!Rh(u,S))try{Zt.mkdirSync(S,r),g=g||S,Il(u,S,!0)}catch{let T=Zt.lstatSync(S);if(T.isDirectory()){Il(u,S,!0);continue}else if(c){Zt.unlinkSync(S),Zt.mkdirSync(S,r),g=g||S,Il(u,S,!0);continue}else if(T.isSymbolicLink())return new Nh(S,S+"/"+y.join("/"))}return h(g)}});var t0=A((pX,jD)=>{var e0=Object.create(null),{hasOwnProperty:y5}=Object.prototype;jD.exports=i=>(y5.call(e0,i)||(e0[i]=i.normalize("NFD")),e0[i])});var VD=A((mX,GD)=>{var HD=require("assert"),w5=t0(),A5=mo(),{join:WD}=require("path"),E5=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,b5=E5==="win32";GD.exports=()=>{let i=new Map,e=new Map,t=c=>c.split("/").slice(0,-1).reduce((f,h)=>(f.length&&(h=WD(f[f.length-1],h)),f.push(h||"/"),f),[]),r=new Set,n=c=>{let u=e.get(c);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>i.get(f)),dirs:[...u.dirs].map(f=>i.get(f))}},s=c=>{let{paths:u,dirs:f}=n(c);return u.every(h=>h[0]===c)&&f.every(h=>h[0]instanceof Set&&h[0].has(c))},o=c=>r.has(c)||!s(c)?!1:(r.add(c),c(()=>a(c)),!0),a=c=>{if(!r.has(c))return!1;let{paths:u,dirs:f}=e.get(c),h=new Set;return u.forEach(d=>{let y=i.get(d);HD.equal(y[0],c),y.length===1?i.delete(d):(y.shift(),typeof y[0]=="function"?h.add(y[0]):y[0].forEach(g=>h.add(g)))}),f.forEach(d=>{let y=i.get(d);HD(y[0]instanceof Set),y[0].size===1&&y.length===1?i.delete(d):y[0].size===1?(y.shift(),h.add(y[0])):y[0].delete(c)}),r.delete(c),h.forEach(d=>o(d)),!0};return{check:s,reserve:(c,u)=>{c=b5?["win32 parallelization disabled"]:c.map(h=>A5(WD(w5(h))).toLowerCase());let f=new Set(c.map(h=>t(h)).reduce((h,d)=>h.concat(d)));return e.set(u,{dirs:f,paths:c}),c.forEach(h=>{let d=i.get(h);d?d.push(u):i.set(h,[u])}),f.forEach(h=>{let d=i.get(h);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):i.set(h,[new Set([u])])}),o(u)}}}});var KD=A((gX,YD)=>{var S5=process.env.__FAKE_PLATFORM__||process.platform,v5=S5==="win32",_5=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:O5,O_TRUNC:T5,O_WRONLY:C5,UV_FS_O_FILEMAP:zD=0}=_5.constants,N5=v5&&!!zD,I5=512*1024,R5=zD|T5|O5|C5;YD.exports=N5?i=>i<I5?R5:"w":()=>"w"});var u0=A((yX,cP)=>{"use strict";var D5=require("assert"),P5=vh(),ee=require("fs"),L5=Oo(),or=require("path"),oP=BD(),QD=nw(),x5=VD(),k5=sw(),ei=fo(),F5=mo(),$5=t0(),XD=Symbol("onEntry"),n0=Symbol("checkFs"),JD=Symbol("checkFs2"),xh=Symbol("pruneCache"),s0=Symbol("isReusable"),ti=Symbol("makeFs"),o0=Symbol("file"),a0=Symbol("directory"),kh=Symbol("link"),ZD=Symbol("symlink"),eP=Symbol("hardlink"),tP=Symbol("unsupported"),iP=Symbol("checkPath"),Zr=Symbol("mkdir"),rt=Symbol("onError"),Ph=Symbol("pending"),rP=Symbol("pend"),Ro=Symbol("unpend"),i0=Symbol("ended"),r0=Symbol("maybeClose"),l0=Symbol("skip"),Rl=Symbol("doChown"),Dl=Symbol("uid"),Pl=Symbol("gid"),Ll=Symbol("checkedCwd"),aP=require("crypto"),lP=KD(),q5=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,xl=q5==="win32",M5=1024,U5=(i,e)=>{if(!xl)return ee.unlink(i,e);let t=i+".DELETE."+aP.randomBytes(16).toString("hex");ee.rename(i,t,r=>{if(r)return e(r);ee.unlink(t,e)})},B5=i=>{if(!xl)return ee.unlinkSync(i);let e=i+".DELETE."+aP.randomBytes(16).toString("hex");ee.renameSync(i,e),ee.unlinkSync(e)},nP=(i,e,t)=>i===i>>>0?i:e===e>>>0?e:t,sP=i=>F5(ei($5(i))).toLowerCase(),j5=(i,e)=>{e=sP(e);for(let t of i.keys()){let r=sP(t);(r===e||r.indexOf(e+"/")===0)&&i.delete(t)}},H5=i=>{for(let e of i.keys())i.delete(e)},kl=class extends P5{constructor(e){if(e||(e={}),e.ondone=t=>{this[i0]=!0,this[r0]()},super(e),this[Ll]=!1,this.reservations=x5(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[Ph]=0,this[i0]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:M5,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||xl,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=ei(or.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",t=>this[XD](t))}warn(e,t,r={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(r.recoverable=!1),super.warn(e,t,r)}[r0](){this[i0]&&this[Ph]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[iP](e){let t=ei(e.path),r=t.split("/");if(this.strip){if(r.length<this.strip)return!1;if(e.type==="Link"){let n=ei(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}r.splice(0,this.strip),e.path=r.join("/")}if(isFinite(this.maxDepth)&&r.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:t,depth:r.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(r.includes("..")||xl&&/^[a-z]:\.\.$/i.test(r[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;let[n,s]=k5(t);n&&(e.path=s,this.warn("TAR_ENTRY_INFO","stripping ".concat(n," from absolute path"),{entry:e,path:t}))}if(or.isAbsolute(e.path)?e.absolute=ei(or.resolve(e.path)):e.absolute=ei(or.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:ei(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:n}=or.win32.parse(e.absolute);e.absolute=n+QD.encode(e.absolute.slice(n.length));let{root:s}=or.win32.parse(e.path);e.path=s+QD.encode(e.path.slice(s.length))}return!0}[XD](e){if(!this[iP](e))return e.resume();switch(D5.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[n0](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[tP](e)}}[rt](e,t){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[Ro](),t.resume())}[Zr](e,t,r){oP(ei(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t,noChmod:this.noChmod},r)}[Rl](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Dl](e){return nP(this.uid,e.uid,this.processUid)}[Pl](e){return nP(this.gid,e.gid,this.processGid)}[o0](e,t){let r=e.mode&4095||this.fmode,n=new L5.WriteStream(e.absolute,{flags:lP(e.size),mode:r,autoClose:!1});n.on("error",l=>{n.fd&&ee.close(n.fd,()=>{}),n.write=()=>!0,this[rt](l,e),t()});let s=1,o=l=>{if(l){n.fd&&ee.close(n.fd,()=>{}),this[rt](l,e),t();return}--s===0&&ee.close(n.fd,c=>{c?this[rt](c,e):this[Ro](),t()})};n.on("finish",l=>{let c=e.absolute,u=n.fd;if(e.mtime&&!this.noMtime){s++;let f=e.atime||new Date,h=e.mtime;ee.futimes(u,f,h,d=>d?ee.utimes(c,f,h,y=>o(y&&d)):o())}if(this[Rl](e)){s++;let f=this[Dl](e),h=this[Pl](e);ee.fchown(u,f,h,d=>d?ee.chown(c,f,h,y=>o(y&&d)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",l=>{this[rt](l,e),t()}),e.pipe(a)),a.pipe(n)}[a0](e,t){let r=e.mode&4095||this.dmode;this[Zr](e.absolute,r,n=>{if(n){this[rt](n,e),t();return}let s=1,o=a=>{--s===0&&(t(),this[Ro](),e.resume())};e.mtime&&!this.noMtime&&(s++,ee.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[Rl](e)&&(s++,ee.chown(e.absolute,this[Dl](e),this[Pl](e),o)),o()})}[tP](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED","unsupported entry type: ".concat(e.type),{entry:e}),e.resume()}[ZD](e,t){this[kh](e,e.linkpath,"symlink",t)}[eP](e,t){let r=ei(or.resolve(this.cwd,e.linkpath));this[kh](e,r,"link",t)}[rP](){this[Ph]++}[Ro](){this[Ph]--,this[r0]()}[l0](e){this[Ro](),e.resume()}[s0](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!xl}[n0](e){this[rP]();let t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,r=>this[JD](e,r))}[xh](e){e.type==="SymbolicLink"?H5(this.dirCache):e.type!=="Directory"&&j5(this.dirCache,e.absolute)}[JD](e,t){this[xh](e);let r=a=>{this[xh](e),t(a)},n=()=>{this[Zr](this.cwd,this.dmode,a=>{if(a){this[rt](a,e),r();return}this[Ll]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=ei(or.dirname(e.absolute));if(a!==this.cwd)return this[Zr](a,this.dmode,l=>{if(l){this[rt](l,e),r();return}o()})}o()},o=()=>{ee.lstat(e.absolute,(a,l)=>{if(l&&(this.keep||this.newer&&l.mtime>e.mtime)){this[l0](e),r();return}if(a||this[s0](e,l))return this[ti](null,e,r);if(l.isDirectory()){if(e.type==="Directory"){let c=!this.noChmod&&e.mode&&(l.mode&4095)!==e.mode,u=f=>this[ti](f,e,r);return c?ee.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return ee.rmdir(e.absolute,c=>this[ti](c,e,r))}if(e.absolute===this.cwd)return this[ti](null,e,r);U5(e.absolute,c=>this[ti](c,e,r))})};this[Ll]?s():n()}[ti](e,t,r){if(e){this[rt](e,t),r();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[o0](t,r);case"Link":return this[eP](t,r);case"SymbolicLink":return this[ZD](t,r);case"Directory":case"GNUDumpDir":return this[a0](t,r)}}[kh](e,t,r,n){ee[r](t,e.absolute,s=>{s?this[rt](s,e):(this[Ro](),e.resume()),n()})}},Lh=i=>{try{return[null,i()]}catch(e){return[e,null]}},c0=class extends kl{[ti](e,t){return super[ti](e,t,()=>{})}[n0](e){if(this[xh](e),!this[Ll]){let s=this[Zr](this.cwd,this.dmode);if(s)return this[rt](s,e);this[Ll]=!0}if(e.absolute!==this.cwd){let s=ei(or.dirname(e.absolute));if(s!==this.cwd){let o=this[Zr](s,this.dmode);if(o)return this[rt](o,e)}}let[t,r]=Lh(()=>ee.lstatSync(e.absolute));if(r&&(this.keep||this.newer&&r.mtime>e.mtime))return this[l0](e);if(t||this[s0](e,r))return this[ti](null,e);if(r.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(r.mode&4095)!==e.mode,[a]=o?Lh(()=>{ee.chmodSync(e.absolute,e.mode)}):[];return this[ti](a,e)}let[s]=Lh(()=>ee.rmdirSync(e.absolute));this[ti](s,e)}let[n]=e.absolute===this.cwd?[]:Lh(()=>B5(e.absolute));this[ti](n,e)}[o0](e,t){let r=e.mode&4095||this.fmode,n=a=>{let l;try{ee.closeSync(s)}catch(c){l=c}(a||l)&&this[rt](a||l,e),t()},s;try{s=ee.openSync(e.absolute,lP(e.size),r)}catch(a){return n(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[rt](a,e)),e.pipe(o)),o.on("data",a=>{try{ee.writeSync(s,a,0,a.length)}catch(l){n(l)}}),o.on("end",a=>{let l=null;if(e.mtime&&!this.noMtime){let c=e.atime||new Date,u=e.mtime;try{ee.futimesSync(s,c,u)}catch(f){try{ee.utimesSync(e.absolute,c,u)}catch{l=f}}}if(this[Rl](e)){let c=this[Dl](e),u=this[Pl](e);try{ee.fchownSync(s,c,u)}catch(f){try{ee.chownSync(e.absolute,c,u)}catch{l=l||f}}}n(l)})}[a0](e,t){let r=e.mode&4095||this.dmode,n=this[Zr](e.absolute,r);if(n){this[rt](n,e),t();return}if(e.mtime&&!this.noMtime)try{ee.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Rl](e))try{ee.chownSync(e.absolute,this[Dl](e),this[Pl](e))}catch{}t(),e.resume()}[Zr](e,t){try{return oP.sync(ei(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(r){return r}}[kh](e,t,r,n){try{ee[r+"Sync"](t,e.absolute),n(),e.resume()}catch(s){return this[rt](s,e)}}};kl.Sync=c0;cP.exports=kl});var pP=A((wX,dP)=>{"use strict";var W5=oo(),Fh=u0(),fP=require("fs"),hP=Oo(),uP=require("path"),f0=mo();dP.exports=(i,e,t)=>{typeof i=="function"?(t=i,e=null,i={}):Array.isArray(i)&&(e=i,i={}),typeof e=="function"&&(t=e,e=null),e?e=Array.from(e):e=[];let r=W5(i);if(r.sync&&typeof t=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof t=="function")throw new TypeError("callback only supported with file option");return e.length&&G5(r,e),r.file&&r.sync?V5(r):r.file?z5(r,t):r.sync?Y5(r):K5(r)};var G5=(i,e)=>{let t=new Map(e.map(s=>[f0(s),!0])),r=i.filter,n=(s,o)=>{let a=o||uP.parse(s).root||".",l=s===a?!1:t.has(s)?t.get(s):n(uP.dirname(s),a);return t.set(s,l),l};i.filter=r?(s,o)=>r(s,o)&&n(f0(s)):s=>n(f0(s))},V5=i=>{let e=new Fh.Sync(i),t=i.file,r=fP.statSync(t),n=i.maxReadSize||16*1024*1024;new hP.ReadStreamSync(t,{readSize:n,size:r.size}).pipe(e)},z5=(i,e)=>{let t=new Fh(i),r=i.maxReadSize||16*1024*1024,n=i.file,s=new Promise((o,a)=>{t.on("error",a),t.on("close",o),fP.stat(n,(l,c)=>{if(l)a(l);else{let u=new hP.ReadStream(n,{readSize:r,size:c.size});u.on("error",a),u.pipe(t)}})});return e?s.then(e,e):s},Y5=i=>new Fh.Sync(i),K5=i=>new Fh(i)});var mP=A(Pe=>{"use strict";Pe.c=Pe.create=QR();Pe.r=Pe.replace=Vw();Pe.t=Pe.list=_h();Pe.u=Pe.update=sD();Pe.x=Pe.extract=pP();Pe.Pack=nh();Pe.Unpack=u0();Pe.Parse=vh();Pe.ReadEntry=Bf();Pe.WriteEntry=mw();Pe.Header=po();Pe.Pax=Hf();Pe.types=Xy()});var bP=A((EX,EP)=>{var{spawn:h0}=require("child_process"),{session:gP}=require("electron"),Qn=require("path"),Q5=mP(),Ct=require("fs"),X5=require("os"),J5=jt(),Z5=hi(),Xn=is(),e6=ko(),ge,ii,ri,Jn,Ni,Oe,Mt,yP,wP,AP;EP.exports=(ge=class extends Z5{constructor(t){super(t);L(this,Oe);L(this,ii,null);L(this,ri,null);L(this,Jn,!1);L(this,Ni,{code:ge.CODE_OLLAMA_DOWNLOAD,success:!0,progressBar:!1,message:""});_(this,"init",async(t=!1)=>{if(p(this,Jn))return j(this,Oe,Mt).call(this,p(this,Ni).code,p(this,Ni).success,p(this,Ni).progressBar,p(this,Ni).message),!1;if(V(this,Jn,!0),p(this,ii)!==null)return j(this,Oe,Mt).call(this,ge.CODE_OLLAMA_FINISH),V(this,Jn,!1),!0;try{await this._oglama.device.killPort(this._oglama.config.getOllamaPort())}catch{}return t&&(j(this,Oe,Mt).call(this,ge.CODE_OLLAMA_DOWNLOAD,!0,!0),Ct.existsSync(p(this,ri))&&Ct.rmSync(p(this,ri),{recursive:!0,force:!0}),Ct.mkdirSync(p(this,ri),{recursive:!0})),(async()=>{let r=["arm","arm64"].includes(X5.arch()),n=Qn.join(p(this,ri),"ollama"),s=Qn.join(p(this,ri),"models");try{let o=Qn.join(n,Xn.MACOS===process.platform?"ollama":Xn.WINDOWS===process.platform?"ollama.exe":"bin/ollama"),a=Ct.existsSync(o),l=[{codeDownload:ge.CODE_OLLAMA_DOWNLOAD,codeUnpack:ge.CODE_OLLAMA_UNPACK,outputPath:n,archiveName:Xn.MACOS===process.platform?"ollama-darwin.tgz":Xn.WINDOWS===process.platform?"ollama-windows-".concat(r?"arm64":"amd64",".zip"):"ollama-linux-".concat(r?"arm64":"amd64",".tgz")},{codeDownload:ge.CODE_MODELS_DOWNLOAD,codeUnpack:ge.CODE_MODELS_UNPACK,outputPath:s,archiveName:"models.tgz"}];for(let c of l){let u="".concat(ge.DOWNLOAD_URL,"/").concat(c.archiveName),f=await j(this,Oe,yP).call(this,c.codeDownload,u,c.archiveName);await j(this,Oe,wP).call(this,c.codeUnpack,f,c.outputPath),!a&&Ct.existsSync(o)&&ge.CODE_OLLAMA_DOWNLOAD===c.codeDownload&&Xn.WINDOWS!==process.platform&&Ct.chmodSync(o,493)}p(this,ii)===null&&(j(this,Oe,Mt).call(this,ge.CODE_OLLAMA_SERVE,!0,!0),V(this,ii,h0(o,["serve"],{env:{...process.env,OLLAMA_HOST:"0.0.0.0:".concat(this._oglama.config.getOllamaPort()),OLLAMA_MODELS:s},detached:!1,stdio:"ignore"})),p(this,ii).unref(),p(this,ii).on("error",c=>{this.stop(),j(this,Oe,Mt).call(this,ge.CODE_OLLAMA_SERVE,!1,!1,"Ollama server offline")})),j(this,Oe,Mt).call(this,ge.CODE_OLLAMA_FINISH)}catch(o){j(this,Oe,Mt).call(this,p(this,Ni).code||ge.CODE_OLLAMA_DOWNLOAD,!1,!1,"".concat(o.message??o))}V(this,Jn,!1)})(),!0});_(this,"getPort",()=>this._oglama.config.getOllamaPort());this._register("llm"),V(this,ri,Qn.join(e6.getPathConfig(),"llm")),Ct.existsSync(p(this,ri))||Ct.mkdirSync(p(this,ri),{recursive:!0})}stop(){if(p(this,ii)!==null){try{process.platform==="win32"?h0("taskkill",["/PID",p(this,ii).pid,"/T","/F"],{shell:!0,windowsHide:!0}):p(this,ii).kill("SIGTERM")}catch{}V(this,ii,null)}}},ii=new WeakMap,ri=new WeakMap,Jn=new WeakMap,Ni=new WeakMap,Oe=new WeakSet,Mt=async function(t,r=!0,n=!1,s=""){if(V(this,Ni,{code:t,success:r,progressBar:n,message:s}),typeof this._oglama.main?.view.webContents?.send=="function"){let o=["ipc:llm:install",[p(this,Ni)],{type:"req"}];this._oglama.main?.view.webContents?.send(J5.WINDOW_MAIN,o)}},yP=async function(t,r,n){let s=Qn.join(p(this,ri),n);return Ct.existsSync(s)?s:new Promise((o,a)=>{let l=(c,u)=>{u.setSavePath(s),j(this,Oe,Mt).call(this,t,!0,0),u.on("updated",(f,h)=>{if(h==="progressing"){let d=Math.floor(u.getReceivedBytes()/u.getTotalBytes()*100);j(this,Oe,Mt).call(this,t,!0,d)}}),u.once("done",(f,h)=>{if(gP.defaultSession.removeListener("will-download",l),h==="completed"){j(this,Oe,Mt).call(this,t,!0,100),o(u.getSavePath());return}a(new Error("".concat(t," download failed: ").concat(h)))})};gP.defaultSession.once("will-download",l),this._oglama.main?.view.webContents.downloadURL(r)})},wP=async function(t,r,n){let s=Qn.join(n,"meta.json");if(Ct.existsSync(s))return;j(this,Oe,Mt).call(this,t,!0,!0),Ct.existsSync(n)&&Ct.rmSync(n,{recursive:!0,force:!0}),Ct.mkdirSync(n,{recursive:!0});let o=Math.floor(new Date().getTime()/1e3);try{Qn.extname(r)===".zip"?await j(this,Oe,AP).call(this,r,n):await Q5.extract({file:r,cwd:n,strict:!0});let a=Math.floor(new Date().getTime()/1e3);Ct.writeFileSync(s,JSON.stringify({t:a,d:a-o})),j(this,Oe,Mt).call(this,t,!0,100)}catch(a){throw new Error("".concat(t," extraction failed: ").concat(a.message??a))}},AP=async function(t,r){return new Promise((n,s)=>{let o=Xn.WINDOWS===process.platform?"powershell":"unzip",a=Xn.WINDOWS===process.platform?["-Command","Expand-Archive -Path '".concat(t,"' -DestinationPath '").concat(r,"' -Force")]:["-o",t,"-d",r];h0(o,a,{shell:!0}).on("close",c=>{if(c===0){n();return}s(new Error("Extraction failed with code ".concat(c)))})})},_(ge,"DOWNLOAD_URL","https://dl.oglama.com"),_(ge,"CODE_OLLAMA_DOWNLOAD","download:ollama"),_(ge,"CODE_OLLAMA_UNPACK","unpack:ollama"),_(ge,"CODE_MODELS_DOWNLOAD","download:models"),_(ge,"CODE_MODELS_UNPACK","unpack:models"),_(ge,"CODE_OLLAMA_SERVE","serve"),_(ge,"CODE_OLLAMA_FINISH","finish"),ge)});var CP=A((vX,TP)=>{var{app:d0,session:$h,BrowserWindow:SP,powerSaveBlocker:vP}=require("electron"),_P=require("path"),Fl=jt(),t6=_0(),i6=T0(),r6=N0(),n6=R0(),p0=is(),s6=j0(),o6=G0(),a6=GT(),l6=qI(),c6=WI(),u6=zI(),f6=r1(),h6=bP(),Ae,Do,$l,Ut,OP;TP.exports=(OP=class{constructor(){L(this,Ae,null);L(this,Do,null);L(this,$l,!1);L(this,Ut,null);_(this,"rootPath",d0.getAppPath());_(this,"devMode",!1);_(this,"log",new r6(this));_(this,"webserver",new t6(this));_(this,"activity",new i6(this));_(this,"diskStorage",new s6(this));_(this,"session",new o6(this));_(this,"llm",new h6(this));_(this,"updater",new a6(this));_(this,"device",new l6(this));_(this,"source",new c6(this));_(this,"target",new u6(this));_(this,"main",new f6(this));_(this,"config",new n6(this))}mainWindow(){let e=this;if($h.defaultSession.setPermissionCheckHandler((t,r,n,s)=>!0),$h.defaultSession.setPermissionRequestHandler((t,r,n,s)=>{n(!0)}),p(e,Ae)===null){V(e,Ae,new SP({icon:_P.join(e.rootPath,"res/icons/icon.png"),minHeight:e.config.getMainMinHeight(),minWidth:e.config.getMainMinWidth(),height:e.config.getMainMinHeight(),width:e.config.getMainMinWidth(),titleBarStyle:"default",backgroundColor:"#000",fullscreenable:!1,useContentSize:!0,resizable:!0,title:"Oglama",show:!1,webPreferences:{session:$h.defaultSession,backgroundThrottling:!1,nodeIntegration:!0,spellcheck:!1}})),p(e,Ae).setMenu(null),p(e,Ae).webContents.setBackgroundThrottling(!1),p(e,Ae).on("minimize",r=>{if(r.preventDefault(),!e.updater.isInstalling()){let n=["ipc:oglama:restored",[],{type:"req",fromWin:Fl.WINDOW_MAIN_LOGIN}];e.main?.view.webContents?.send(Fl.WINDOW_MAIN,n)}setTimeout(()=>{p(e,Ae).restore(),p(e,Ae).webContents.invalidate()},250)}),p(e,Ae).setMaxListeners(0),p(e,Ae).on("closed",()=>{e.llm.stop(),V(e,Ae,null),p(e,Do)!==null&&vP.stop(p(e,Do)),d0.quit()});let t=()=>{let r=p(e,Ae).getSize(),n=[p0.WINDOWS,p0.MACOS].includes(process.platform)?Math.abs(p(e,Ae).getSize()[1]-p(e,Ae).getContentSize()[1]):0,s=[p0.WINDOWS].includes(process.platform)?Math.abs(p(e,Ae).getSize()[0]-p(e,Ae).getContentSize()[0]):0;e.main.setWindowSize(r[0]-s,r[1]-n),e.target.setWindowSize(r[0]-s,r[1]-n)};p(e,Ae).on("resize",()=>t()),p(e,Ae).once("ready-to-show",()=>t()),e.main.init(),e.main.view.webContents.on("did-finish-load",()=>{e.getPostAuth()&&p(e,Ae).show(),t()}),p(e,Ae).setMenu(null),V(e,Do,vP.start("prevent-app-suspension"))}return p(e,Ae)}mainLoginWindow(){let e=this;return p(e,Ut)===null&&(V(e,Ut,new SP({width:e.config.getMainLoginWidth(),height:e.config.getMainLoginHeight(),icon:_P.join(e.rootPath,"res/icons/icon.png"),resizable:!1,fullscreenable:!1,transparent:!0,titleBarStyle:"hidden",title:"Oglama",backgroundColor:"#00000000",webPreferences:{backgroundThrottling:!1,spellcheck:!1,nodeIntegration:!0,session:$h.defaultSession}})),p(e,Ut).setMenu(null),p(e,Ut).webContents.setBackgroundThrottling(!1),p(e,Ut).setMaxListeners(0),p(e,Ut).on("closed",()=>{V(e,Ut,null),d0.quit()}),e.main?.login?.init(),e.main?.login?.view.webContents.on("did-finish-load",()=>{e.getPostAuth()||p(e,Ut).show()}),p(e,Ut).setMenu(null)),p(e,Ut)}getPostAuth(){return p(this,$l)}setPostAuth(e){let t=!1;if(e=!!e,e!==this.getPostAuth()){V(this,$l,e);let r=["ipc:oglama:auth",[e],{type:"req",fromWin:Fl.WINDOW_MAIN_LOGIN}];this.main?.login?.view.webContents.send(Fl.WINDOW_MAIN_LOGIN,r),setTimeout(()=>{this.main?.view.webContents.send(Fl.WINDOW_MAIN,r)},750),e?(this.mainWindow().show(),this.mainLoginWindow().hide()):(this.mainWindow().hide(),this.mainLoginWindow().show()),t=!0}return t}},Ae=new WeakMap,Do=new WeakMap,$l=new WeakMap,Ut=new WeakMap,OP)});var{app:ft,BrowserWindow:d6}=require("electron"),p6=CP();ft.userAgentFallback=ft.userAgentFallback.replace(/\s*Electron\/\d+(\.\d+)+\s*/g," ").replace(/\boglama\b/g,"Oglama");ft.commandLine.appendSwitch("disable-features","UserAgentClientHint");ft.commandLine.appendSwitch("disable-backgrounding-occluded-windows");ft.commandLine.appendSwitch("disable-background-timer-throttling");ft.commandLine.appendSwitch("disable-renderer-backgrounding");ft.commandLine.appendSwitch("allow-insecure-localhost");ft.commandLine.appendSwitch("disable-raf-throttling");process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";var Bt=null;do{if(!ft.requestSingleInstanceLock()){ft.quit();break}ft.on("second-instance",()=>{if(Bt!==null){let i=Bt.getPostAuth()?Bt.mainWindow():Bt.mainLoginWindow();i.isMinimized()&&(i.restore(),i.webContents?.invalidate()),i.show()}}),ft.on("ready",async()=>{Bt=new p6,process.on("uncaughtException",i=>{Bt.devMode&&console.error(i),Bt.device.errorLog(i)}),process.on("unhandledRejection",i=>{Bt.devMode&&console.error(i),Bt.device.errorLog(i)}),ft.on("activate",()=>{d6.getAllWindows().length===0&&Bt.activity.start()}),await Bt.webserver.start(),await Bt.activity.start(),await Bt.updater.start()}),ft.on("window-all-closed",()=>{process.platform!=="darwin"&&ft.quit()})}while(!1);

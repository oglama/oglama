/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright Â© 2024-2025 Oglama (https://oglama.com)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var GT=Object.defineProperty;var bm=t=>{throw TypeError(t)};var zT=(t,e,r)=>e in t?GT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var _=(t,e,r)=>zT(t,typeof e!="symbol"?e+"":e,r),bc=(t,e,r)=>e.has(t)||bm("Cannot "+r);var p=(t,e,r)=>(bc(t,e,"read from private field"),r?r.call(t):e.get(t)),R=(t,e,r)=>e.has(t)?bm("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),U=(t,e,r,i)=>(bc(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),k=(t,e,r)=>(bc(t,e,"access private method"),r);var Gt=w((J2,_m)=>{var Wt;_m.exports=(Wt=class{static getSourceChannelName(e){return"".concat(Wt.WINDOW_SOURCE,"/").concat(e)}static getTargetChannelName(e){return"".concat(Wt.WINDOW_TARGET,"/").concat(e)}static generateKey(){return"".concat(Date.now().toString(36)).concat(Math.random().toString(36).substring(2,13))}},_(Wt,"WINDOW_MAIN_LOGIN","@main/login"),_(Wt,"WINDOW_MAIN","@main"),_(Wt,"WINDOW_SOURCE","@source"),_(Wt,"WINDOW_TARGET","@target"),Wt)});var vn=w((tB,vm)=>{vm.exports=class{constructor(e){_(this,"_oglama");this._oglama=e}}});var Tm=w((nB,Om)=>{var Us=require("path"),VT=require("http"),_c=require("fs"),YT=vn(),vc;Om.exports=(vc=class extends YT{start(){if(this.constructor._instance===null){let e=Us.join(this._oglama.rootPath,"ssg"),r=this._oglama.config.getServerPort();this.constructor._instance=new Promise((i,n)=>{try{let s=VT.createServer((o,a)=>{let l=".empty";try{let u=new URL(o.url,"http://0.0.0.0");l=decodeURIComponent(u.pathname).replace(/^\/+|\/+$/g,"")}catch{}let c=Us.join(e,l);_c.statSync(c,{throwIfNoEntry:!1})?.isDirectory()&&(c=Us.join(c,"index.html")),_c.stat(c,(u,h)=>{let f=u?Us.join(e,"404/index.html"):c;a.writeHead(u?404:200,{"Content-Length":h.size,"Content-Type":{".js":"application/javascript",".json":"application/json",".woff2":"font/woff2",".html":"text/html",".txt":"text/plain",".css":"text/css",".ico":"image/x-icon",".jpeg":"image/jpeg",".jpg":"image/jpeg",".png":"image/png",".gif":"image/gif",".svg":"image/svg+xml"}[Us.extname(f)]||"application/octet-stream"}),_c.createReadStream(f).pipe(a)})});s.listen(r,()=>{this._oglama.log.info("webserver:start","Listening on port ".concat(r)),i(s)})}catch(s){this._oglama.log.error("webserver:start",s),n(s)}})}return this.constructor._instance}},_(vc,"_instance",null),vc)});var Rm=w((aB,Cm)=>{var{dialog:Oc}=require("electron"),QT=require("path"),XT=Gt(),KT=vn();Cm.exports=class extends KT{constructor(){super(...arguments);_(this,"_showMessageBox",null)}async start(){let r=QT.join(this._oglama.rootPath,"res","index.html"),i={extraHeaders:"pragma: no-cache"};if(this._oglama.mainWindow().loadFile(r,i),this._oglama.mainLoginWindow().loadFile(r,i),this._oglama.mainWindow().hide(),this._oglama.mainLoginWindow().show(),this._showMessageBox===null){let n=this;this._showMessageBox=Oc.showMessageBox,Oc.showMessageBox=async function(s,o){if(Array.isArray(o.buttons)&&o.buttons.length){let a=o.buttons.map(l=>l.toLowerCase()).indexOf("ok");if(a!==-1){let l={agentId:null,type:o.buttons.length>1?"confirm":"alert",message:"".concat(o.message??"").trim(),result:o.buttons.length>1?!0:void 0};if(l.message.indexOf("::{")===0)try{let u=JSON.parse(l.message.substring(2));typeof u=="object"&&u!==null&&(l.agentId=u.a??null,l.type=u.t??"alert",l.message=u.m??"",l.result=u.t==="prompt"?u.d??"":u.t==="confirm"?!0:void 0)}catch{}let c=["ipc:oglama:dialog",[l],{type:"req"}];return n._oglama.main?.view.webContents.send(XT.WINDOW_MAIN,c),{response:a}}}return n._showMessageBox.call(Oc,s,o)}}}}});var Nm=w((cB,Im)=>{var JT=vn();Im.exports=class extends JT{error(){console.error("%coglama-error","color:red",...arguments)}info(){console.info("%coglama-info","color:lightblue",...arguments)}}});var Dm=w((fB,xm)=>{var ZT=vn();xm.exports=class extends ZT{getMainMinWidth(){return 1200}getMainMinHeight(){return 650}getMainLoginWidth(){return 512}getMainLoginHeight(){return 512}getSourceMinWidth(){return 1100}getSourceMinHeight(){return 600}getServerPort(){return 7199}getOllamaPort(){return 7299}}});var On=w((pB,Pm)=>{var Bs;Pm.exports=(Bs=class{},_(Bs,"WINDOWS","win32"),_(Bs,"MACOS","darwin"),_(Bs,"LINUX","linux"),Bs)});var Jt=w((yB,Fm)=>{var{ipcMain:eC}=require("electron"),tC=vn();Fm.exports=class extends tC{constructor(e){super(e)}_register(e){if(typeof e=="string")for(let r of Object.getOwnPropertyNames(this)){if(["_","#"].includes(r[0]||typeof this[r]!="function"))continue;let i=this[r];eC.handle("ipc:".concat(e,":").concat(r),async(n,...s)=>{let o=null;try{o=typeof i=="function"?await i(...s):null}catch(a){o=a}return o})}}}});var $m=w((AB,Lm)=>{var Tc;Lm.exports=(Tc=class{},_(Tc,"max",{computersCount:5,agentsCount:9,logsPerAgent:250,logsOnRender:15,sourceCode:{smCodeLength:5120,smCount:64,smEnvSize:256,fnCodeLength:5120,fnCount:128,ioCount:20,ioInputFileCount:500,ioOutputFileCount:50,ioFieldNameLength:32,ioFieldDescLength:512,ioFieldStringLength:1024,ioFieldOptionLength:32,ioFieldOptionCount:25,ioFieldExtensionLength:24,ioFieldExtensionCount:10,ioFieldTableCount:3,ioFieldTableSize:20,ioFieldColumnLength:24,ioFieldColumnCount:6},diskStorage:{outputRunsCount:10}}),Tc)});var qm=w((bB,km)=>{var Cc;km.exports=(Cc=class{},_(Cc,"ModuleSrc",{K_SRC_STATE_MACHINE:"srcStateMachine",K_SRC_FUNCTIONS:"srcFunctions",K_SRC_INPUTS:"srcInputs",K_SRC_OUTPUTS:"srcOutputs"}),Cc)});var ya=w((vB,Bm)=>{var{app:Mm}=require("electron"),js=require("path"),Rc=require("os"),Um=On(),At,Tn,Cn;Bm.exports=(At=class{static getPathCache(){if(p(At,Tn)===null){let e=process.env.XDG_CACHE_HOME||js.join(Rc.homedir(),".cache");switch(process.platform){case Um.WINDOWS:e=process.env.LOCALAPPDATA||js.join(Rc.homedir(),"AppData","Local");break;case Um.MACOS:e=js.join(Rc.homedir(),"Library","Caches");break}U(At,Tn,js.join(e,"".concat(Mm.name.toLowerCase(),"-updater")))}return p(At,Tn)}static getPathConfig(){return p(At,Cn)===null&&U(At,Cn,js.join(Mm.getPath("appData"),"oglama")),p(At,Cn)}},Tn=new WeakMap,Cn=new WeakMap,R(At,Tn,null),R(At,Cn,null),At)});var Gm=w((CB,Wm)=>{var j=require("path"),T=require("fs"),rC=Gt(),iC=Jt(),Zt=$m(),{ModuleSrc:Te}=qm(),nC=ya(),{shell:sC}=require("electron"),jm=150,Ic="default",wa="local",oC="metadata.json",aC="environment.json",lC="source.json",Nc="input.json",Aa="input",xc="output.json",uC="output",Rn="files",zt,Ii,It,Ni,Et,Hs,xi,mr,gr,Di,In,Pi,Nn,Ws,Gs,Dc,Fi,zs,xn,ee,Nt,St,Vs,at,Ys,Qs,ke,Xs,Hm;Wm.exports=(Hm=class extends iC{constructor(r){super(r);R(this,zt,{});R(this,Ii,{});R(this,It,{});R(this,Ni,{});R(this,Et,null);R(this,Hs,r=>j.join(p(this,Et),"agents",r,aC));R(this,xi,r=>j.join(p(this,Et),"agents",r,lC));R(this,mr,(r,i="session",n=null)=>i==="run"?p(this,ke).call(this,r,n,Nc):p(this,Xs).call(this,r,n,Nc));R(this,gr,(r,i,n="session",s=null)=>{let o="".concat(Aa,"-").concat(i,".jsonl");return n==="run"?p(this,ke).call(this,r,s,o):p(this,Xs).call(this,r,s,o)});R(this,Di,async(r,i=[],n={},s="session",o=null)=>{do{if(typeof r!="string"||!Array.isArray(i)||typeof n!="object"||n===null)break;for(let a of i)if(a?.type==="table"){let l=0,c=p(this,gr).call(this,r,a.key,s,o);T.existsSync(c)&&(l=await p(this,Pi).call(this,c)),n[a.key]=l}}while(!1)});R(this,In,(r,i,n)=>p(this,ke).call(this,r,n,"".concat(uC,"-").concat(i,".jsonl")));R(this,Pi,async r=>new Promise(i=>{if(!T.existsSync(r)||!T.statSync(r).isFile()){i(0);return}let n=0,s="",o=T.createReadStream(r,{encoding:"utf8"});o.on("error",()=>i(0)),o.on("data",a=>{let l=a.split(/\r\n|\n/);n+=l.length-1,s=l.pop()}),o.on("end",()=>{s.length&&n++,i(n)})}));R(this,Nn,async(r,i,n=null)=>new Promise((s,o)=>{let a=[];if(!T.existsSync(r)||!T.statSync(r).isFile()){s(a);return}let l=0,c="",u=T.createReadStream(r,{encoding:"utf8"});u.on("error",o),u.on("data",h=>{let f=h.split(/\r\n|\n/);c=f.pop();for(let d of f){if(l>=i&&(n===null||a.length<n))try{a.push(JSON.parse(d))}catch{}l++}}),u.on("end",()=>{if(c.length){if(l>=i&&(n===null||a.length<n))try{a.push(JSON.parse(c))}catch{}l++}s(a)})}));R(this,Ws,async(r,i,n,s=!1)=>new Promise(o=>{let a=0;if(!T.existsSync(r)||!T.statSync(r).isFile()){o(a);return}let l=0,c="",u="".concat(r,".temp");T.existsSync(u)&&T.rmSync(u,{force:!0,recursive:!0});let h=T.createReadStream(r,{encoding:"utf8"});h.on("data",f=>{let d=f.split(/\r\n|\n/);c=d.pop();for(let y of d){if(i>=0&&(l!==i||!s)){let A=l!==i?y:JSON.stringify(n);T.writeFileSync(u,"".concat(A,"\n"),{flag:"a",encoding:"utf8"}),a++}l++}}),h.on("close",()=>{if(c.length&&i>=0&&(l!==i||!s)){let f=l!==i?c:JSON.stringify(n);T.writeFileSync(u,"".concat(f,"\n"),{flag:"a",encoding:"utf8"}),a++}T.rmSync(r),T.existsSync(u)&&T.renameSync(u,r),o(a)})}));R(this,Gs,async(r,i)=>new Promise(n=>{let s=-1;if(!T.existsSync(r)||!T.statSync(r).isFile()){n(s);return}let o=0,a="",l=T.createReadStream(r,{encoding:"utf8"});l.on("data",c=>{let u=c.split(/\r\n|\n/);a=u.pop();for(let h of u){if(s===-1)try{let f=JSON.parse(h);if(typeof f=="object"&&f!==null&&f._id===i){s=o;break}}catch{}o++}}),l.on("end",()=>{if(a.length&&s===-1)try{let c=JSON.parse(a);typeof c=="object"&&c!==null&&c._id===i&&(s=o)}catch{}n(s)})}));R(this,Dc,r=>{let i=n=>{let s="";if(typeof n<"u"&&n!==null)try{s=typeof n=="string"?n:JSON.stringify(n),s.includes('"')&&(s=s.replace(/"/g,'""')),(s.includes(",")||s.includes("\n")||s.includes('"'))&&(s='"'.concat(s,'"'))}catch{}return s};return(Array.isArray(r)?r.map(n=>i(n)):[]).join(",")});R(this,Fi,(r,i)=>{if(typeof r!="object"||r===null||typeof i!="object"||i===null||i.type!=="table"||!Array.isArray(i.columns)||!i.columns.length)return null;let n={},s=!1;for(let o of i.columns)typeof r[o]<"u"&&(s=!0),n[o]=typeof r[o]=="string"?r[o]:"";return s&&typeof n._id!="string"&&(n={_id:rC.generateKey(),...n}),s?n:null});R(this,zs,r=>{let i=null;if(typeof r=="object"&&r!==null){i={};for(let n of Object.values(Te))i[n]=(Array.isArray(r[n])?r[n]:[]).filter(s=>typeof s=="object"&&s!==null).map(s=>{for(let o of Object.keys(s))(typeof s[o]>"u"||s[o]===null)&&delete s[o];return s})}return i});R(this,xn,(r,i)=>{if(typeof i!="object"||i===null)return null;let n=i.default??null;if(["int","string"].includes(i.type)){let s=o=>{switch(i.type){case"int":o=parseInt(o,10),Number.isInteger(o)?(Number.isInteger(i.min)&&o<i.min&&(o=n),Number.isInteger(i.max)&&o>i.max&&(o=n)):o=n;break;case"string":o="".concat(o||""),(!o.length||i.min!==null&&o.length<i.min)&&(o=n),i.max!==null&&o!==null&&o.length>i.max&&(o=o.substring(0,i.max));break}return Array.isArray(i.options)&&i.options.length&&!i.options.includes(o)&&(o=n),o};r=i.isList?(o=>(o=[...new Set((Array.isArray(o)?o:[o]).map(a=>s(a)).filter(a=>a!==null))],o.length?o:n!==null?[n]:null))(r):s(r)}return i.type==="boolean"&&(r=!!(typeof r>"u"?n:r)),r});R(this,ee,r=>"".concat(r??"").replace(/\W+/g,""));R(this,Nt,r=>"".concat(r??"").replace(/[^\w\-]+/gi,""));R(this,St,r=>(r="".concat(r??"").replace(/[^\w\-]+/gi,""),r.length?r:null));R(this,Vs,r=>"".concat(r??"").replace(/[^\w\-\.]+/gi,"").replace(/\.{2,}/g,"."));R(this,at,(r,i=32)=>"".concat(r).trim().toLowerCase().replace(/\s+/g,"-").replace(/\.{2,}/g,".").replace(/\-{2,}/g,"-").replace(/\_{2,}/g,"_").replace(/[^\w\.\-]+|^[\-\._]+|[\-\._]+$/gi,"").substring(0,i));R(this,Ys,(r,i)=>{if(typeof r!="object"||r===null||typeof i!="string"||!i.length||!Array.isArray(r.extensions)||!r.extensions.includes(j.extname(i).replace(/^\./g,"").toLowerCase())||!T.existsSync(i)||!T.statSync(i).isFile())return!1;let n=T.statSync(i).size;return!(Number.isInteger(r.min)&&r.min>0&&n<r.min*1048576||Number.isInteger(r.max)&&r.max>0&&n>r.max*1048576)});R(this,Qs,(r,{agentId:i,runId:n,scalarData:s,srcOutputs:o})=>{let a={};do{if(typeof r!="object"||r===null||typeof i!="string"||typeof n!="string"||typeof s!="object"||s===null||!Array.isArray(o)||!o.length||typeof o[0]!="object"||o[0]===null||typeof o[0].type!="string")break;let l=j.join(p(this,ke).call(this,i,n),Rn);if(T.existsSync(l)&&T.lstatSync(l).isDirectory()){for(let c of T.readdirSync(l,{withFileTypes:!0}))if(c.isFile()){let u=c.name.replace(/^(.*?)\-\d+\..*$/gi,"$1");typeof a[u]>"u"&&(a[u]=[]),a[u].push(j.join(l,c.name))}}for(let c of o){if(c.type==="files"){r[c.key]=(Array.isArray(a[c.key])?a[c.key]:[]).filter(u=>p(this,Ys).call(this,c,u)).slice(0,Zt.max.sourceCode.ioOutputFileCount);continue}r[c.key]=s[c.key],typeof r[c.key]>"u"&&(r[c.key]=c.default??null)}}while(!1);return a});R(this,ke,(r,i=null,n=null)=>{let s=[];return typeof i=="string"&&i.length&&(s.push(i),typeof n=="string"&&n.length&&s.push(n)),j.join(p(this,Et),"agents",r,"runs",...s)});R(this,Xs,(r,i=null,n=null)=>{let s=[typeof i=="string"&&i.length?i:Ic];return typeof n=="string"&&n.length&&s.push(n),j.join(p(this,Et),"agents",r,"sessions",...s)});_(this,"openAgentFiles",async r=>{let i=!1;if(r=p(this,ee).call(this,r),r.length){let n=j.dirname(p(this,xi).call(this,r));T.existsSync(n)&&(sC.openPath(n),i=n)}return i});_(this,"purge",async r=>{let i=!1;if(r=p(this,ee).call(this,r),r.length){let n=j.dirname(p(this,xi).call(this,r));T.existsSync(n)&&(T.rmSync(n,{recursive:!0,force:!0}),i=!0)}return i});_(this,"runInit",(r,i=null,n=null,s=null)=>{if(r=p(this,ee).call(this,r),!r.length)throw new Error("Invalid agent ID");i="".concat(i??wa).toLowerCase().replace(/\W+/gi,""),i.length||(i=wa),n=p(this,St).call(this,n);let o="".concat(n??Ic).toLowerCase().replace(/\W+/gi,"");o.length||(o=Ic),(!Number.isInteger(s)||s<=0)&&(s=Math.floor(new Date().getTime()/1e3));let a="".concat(i,"-").concat(o,"-").concat(s),l=null;do{let c=this.sourceGet(r);if(typeof c!="object"||c===null)break;let u=c[Te.K_SRC_INPUTS],h=c[Te.K_SRC_OUTPUTS];if((!Array.isArray(u)||!u.length)&&(!Array.isArray(h)||!h.length))break;if(l=p(this,ke).call(this,r,a),!T.existsSync(l)){T.mkdirSync(l,{recursive:!0}),T.mkdirSync(j.join(l,Rn),{recursive:!0});let f=j.dirname(p(this,mr).call(this,r,"session",n));if(typeof f=="string"&&T.existsSync(f)&&T.statSync(f).isDirectory())for(let d of T.readdirSync(f,{withFileTypes:!0}))d.isFile()&&(Nc===d.name||d.name.indexOf("".concat(Aa,"-"))===0&&j.extname(d.name)===".jsonl")&&T.copyFileSync(j.join(f,d.name),j.join(l,d.name))}}while(!1);return typeof n=="string"&&this._oglama.session.incrementRuns(r,n),{runId:a,runPath:l}});_(this,"runDelete",(r,i)=>{let n=!1;do{if(r=p(this,ee).call(this,r),!r.length||(i=p(this,Nt).call(this,i),!i.length))break;let s=p(this,ke).call(this,r,i);T.existsSync(s)&&(T.rmSync(s,{recursive:!0}),n=!0)}while(!1);return n});_(this,"envGet",r=>{if(r=p(this,ee).call(this,r),!r.length)return{};if(typeof p(this,zt)[r]>"u"){try{let i=p(this,Hs).call(this,r);T.existsSync(i)&&T.statSync(i).isFile()&&(p(this,zt)[r]=JSON.parse(T.readFileSync(i).toString()))}catch{}(typeof p(this,zt)[r]!="object"||p(this,zt)[r]===null)&&(p(this,zt)[r]={})}return p(this,zt)[r]});_(this,"envSet",(r,i)=>(r=p(this,ee).call(this,r),!r.length||typeof i!="object"?!1:(i!==null?p(this,zt)[r]=i:delete p(this,zt)[r],typeof p(this,Ii)[r]<"u"&&clearTimeout(p(this,Ii)[r]),p(this,Ii)[r]=setTimeout(()=>{delete p(this,Ii)[r];let n=p(this,Hs).call(this,r);i!==null?T.writeFileSync(n,JSON.stringify(i,null,2)):T.existsSync(n)&&T.rmSync(n)},jm),!0)));_(this,"sourceGet",r=>{if(r=p(this,ee).call(this,r),!r.length)return null;if(typeof p(this,It)[r]!="object"||p(this,It)[r]===null){p(this,It)[r]=null;try{let i=p(this,xi).call(this,r);if(!T.existsSync(i)||!T.statSync(i).isFile())throw new Error('"'.concat(j.basename(i),'" file not found'));p(this,It)[r]=p(this,zs).call(this,JSON.parse(T.readFileSync(i).toString()))}catch{}}return p(this,It)[r]});_(this,"sourceSet",(r,i)=>{let n=!1;r=p(this,ee).call(this,r);do{if(!r.length||(i=p(this,zs).call(this,i),JSON.stringify(this.sourceGet(r))===JSON.stringify(i)))break;p(this,It)[r]=i,typeof p(this,Ni)[r]<"u"&&clearTimeout(p(this,Ni)[r]),p(this,Ni)[r]=setTimeout(()=>{delete p(this,Ni)[r];let s=p(this,xi).call(this,r);if(T.existsSync(j.dirname(s))||T.mkdirSync(j.dirname(s),{recursive:!0}),p(this,It)[r]!==null){let o=p(this,It)[r][Te.K_SRC_INPUTS],a=[];if(Array.isArray(o)&&o.length)for(let u of o)typeof u=="object"&&u!==null&&u.type==="table"&&typeof u.key=="string"&&a.push("".concat(Aa,"-").concat(u.key,".jsonl"));let l=j.join(p(this,Et),"agents",r,"sessions");T.existsSync(l)||T.mkdirSync(l,{recursive:!0});let c=T.readdirSync(l,{withFileTypes:!0}).filter(u=>u.isDirectory()).map(u=>u.name);for(let u of c){let h=j.dirname(p(this,mr).call(this,r,"session",u));if(T.existsSync(h)&&T.lstatSync(h).isDirectory())for(let f of T.readdirSync(h,{withFileTypes:!0}))!f.isFile()||f.name.indexOf("".concat(Aa,"-"))!==0||a.includes(f.name)||T.rmSync(j.join(h,f.name))}T.writeFileSync(s,JSON.stringify(p(this,It)[r],null,2))}else T.existsSync(s)&&T.rmSync(s)},jm),n=!0}while(!1);return n});_(this,"inputsGet",async(r,i="session",n=null)=>{let s={};r=p(this,ee).call(this,r),n=i==="run"?p(this,Nt).call(this,n):p(this,St).call(this,n);do{if(!r.length||typeof n=="string"&&!n.length)break;let o=this.sourceGet(r);if(typeof o!="object"||o===null)break;let a=o[Te.K_SRC_INPUTS];if(!Array.isArray(a)||!a.length)break;let l=p(this,mr).call(this,r,i,n),c={};if(T.existsSync(l)&&T.statSync(l).isFile())try{if(c=JSON.parse(T.readFileSync(l).toString()),typeof c!="object"||c===null)throw c={},new Error("Corrupted data")}catch{}for(let u of a)["int","string","boolean"].includes(u.type)&&(s[u.key]=p(this,xn).call(this,c[u.key],u)),u.type==="files"&&(s[u.key]=(Array.isArray(c[u.key])?c[u.key]:[]).slice(0,Zt.max.sourceCode.ioInputFileCount));i==="session"&&await p(this,Di).call(this,r,a,s,i,n)}while(!1);return s});_(this,"inputScalarsSet",async(r,i,n=null)=>{let s={};r=p(this,ee).call(this,r),n=p(this,St).call(this,n);do{if(!r.length)break;let o=this.sourceGet(r);if(typeof o!="object"||o===null)break;let a=o[Te.K_SRC_INPUTS];if(!Array.isArray(a)||!a.length)break;let l=p(this,mr).call(this,r,"session",n),c={};try{T.existsSync(l)&&T.statSync(l).isFile()&&(c=JSON.parse(T.readFileSync(l).toString()),(typeof c!="object"||c===null)&&(c={}))}catch{}for(let u of a)if(u.type!=="table"){if(s[u.key]=c[u.key],u.type==="files"){s[u.key]=(Array.isArray(s[u.key])?s[u.key]:[]).slice(0,Zt.max.sourceCode.ioInputFileCount);continue}(typeof s[u.key]>"u"||s[u.key]===null)&&(s[u.key]=u.default??null),typeof i=="object"&&i!==null&&typeof i[u.key]<"u"&&(s[u.key]=p(this,xn).call(this,i[u.key],u),s[u.key]===null&&delete s[u.key])}T.existsSync(j.dirname(l))||T.mkdirSync(j.dirname(l),{recursive:!0}),T.writeFileSync(l,JSON.stringify(s,null,2)),await p(this,Di).call(this,r,a,s,"session",n)}while(!1);return s});_(this,"inputFilesAdd",async(r,i,n,s=null)=>{let o={},a=[];r=p(this,ee).call(this,r),i=p(this,at).call(this,i),s=p(this,St).call(this,s);do{if(!r.length||!i.length)break;let l=this.sourceGet(r);if(typeof l!="object"||l===null)break;let c=l[Te.K_SRC_INPUTS];if(!Array.isArray(c)||!c.length)break;let u=p(this,mr).call(this,r,"session",s),h={};try{T.existsSync(u)&&T.statSync(u).isFile()&&(h=JSON.parse(T.readFileSync(u).toString()),(typeof h!="object"||h===null)&&(h={}))}catch{}for(let f of c)if(f.type!=="table"){if(o[f.key]=h[f.key],f.type!=="files"){typeof o[f.key]>"u"&&(o[f.key]=f.default??null);continue}(typeof o[f.key]>"u"||!Array.isArray(o[f.key]))&&(o[f.key]=[]),f.key===i&&(a=(Array.isArray(n)?n:[]).map(d=>j.normalize("".concat(d).trim())).filter(d=>p(this,Ys).call(this,f,d,"")),o[f.key]=[...new Set([...o[f.key],...a])].slice(0,Zt.max.sourceCode.ioInputFileCount))}T.existsSync(j.dirname(u))||T.mkdirSync(j.dirname(u),{recursive:!0}),T.writeFileSync(u,JSON.stringify(o,null,2)),await p(this,Di).call(this,r,c,o,"session",s)}while(!1);return o});_(this,"inputFilesDelete",async(r,i,n,s=null)=>{let o={};r=p(this,ee).call(this,r),i=p(this,at).call(this,i),s=p(this,St).call(this,s);let a=j.basename("".concat(n));do{if(!r.length||!i.length)break;let l=this.sourceGet(r);if(typeof l!="object"||l===null)break;let c=l[Te.K_SRC_INPUTS];if(!Array.isArray(c)||!c.length)break;let u=p(this,mr).call(this,r,"session",s),h={};try{T.existsSync(u)&&T.statSync(u).isFile()&&(h=JSON.parse(T.readFileSync(u).toString()),(typeof h!="object"||h===null)&&(h={}))}catch{}for(let f of c)if(f.type!=="table"){if(o[f.key]=h[f.key],f.type!=="files"){typeof o[f.key]>"u"&&(o[f.key]=f.default??null);continue}(typeof o[f.key]>"u"||!Array.isArray(o[f.key]))&&(o[f.key]=[]),f.key===i&&(o[f.key]=(Array.isArray(o[f.key])?o[f.key]:[]).filter(d=>d!==j.normalize("".concat(n))).slice(0,Zt.max.sourceCode.ioInputFileCount))}T.existsSync(j.dirname(u))||T.mkdirSync(j.dirname(u),{recursive:!0}),T.writeFileSync(u,JSON.stringify(o,null,2)),await p(this,Di).call(this,r,c,o,"session",s)}while(!1);return o});_(this,"inputTableQuery",async(r,i,n=1,s=5e3,o=null)=>{let a=[],l=0;n=parseInt(n,10),(!Number.isInteger(n)||n<1)&&(n=1),s=parseInt(s,10),(!Number.isInteger(s)||s<1)&&(s=1);do{if(r=p(this,ee).call(this,r),i=p(this,at).call(this,i),o=p(this,St).call(this,o),!r.length||!i.length)break;let c=this.sourceGet(r);if(typeof c!="object"||c===null)break;let u=c[Te.K_SRC_INPUTS];if(!Array.isArray(u)||!u.length||u.reduce((d,y)=>y.type==="table"&&y.key===i?y:d,null)===null)break;let f=p(this,gr).call(this,r,i,"session",o);if(!T.existsSync(f))break;if(l=await p(this,Pi).call(this,f),l>0)try{a=await p(this,Nn).call(this,f,(n-1)*s,s)}catch{}}while(!1);return{rows:a,total:l,pageNumber:n,pageSize:s}});_(this,"inputTableAdd",async(r,i,n=[],s=null)=>{let o=!1;do{if(r=p(this,ee).call(this,r),i=p(this,at).call(this,i),s=p(this,St).call(this,s),!r.length||!i.length)break;let a=this.sourceGet(r);if(typeof a!="object"||a===null)break;let l=a[Te.K_SRC_INPUTS];if(!Array.isArray(l)||!l.length)break;let c=l.reduce((h,f)=>f.type==="table"&&f.key===i?f:h,null);if(c===null||(n=Array.isArray(n)?n.map(h=>p(this,Fi).call(this,h,c)).filter(h=>h!==null):[],!n.length))break;let u=p(this,gr).call(this,r,i,"session",s);if(T.existsSync(u)&&T.statSync(u).size/1048576>=Zt.max.sourceCode.ioFieldTableSize)break;T.existsSync(j.dirname(u))||T.mkdirSync(j.dirname(u),{recursive:!0}),T.writeFileSync(u,"".concat(n.map(h=>JSON.stringify(h)).join("\n"),"\n"),{flag:"a",encoding:"utf8"}),o=!0}while(!1);return o});_(this,"inputTableGet",async(r,i,n,s="session",o=null)=>{let a=null,l=null;r=p(this,ee).call(this,r),o=s==="run"?p(this,Nt).call(this,o):p(this,St).call(this,o);do{if(!r.length||(i=p(this,at).call(this,i),!i.length)||typeof o=="string"&&!o.length)break;let c=this.sourceGet(r);if(typeof c!="object"||c===null)break;let u=c[Te.K_SRC_INPUTS];if(!Array.isArray(u)||!u.length)break;let h=u.reduce((y,A)=>A.type==="table"&&A.key===i?A:y,null);if(h===null)break;let f=p(this,gr).call(this,r,i,s,o);if(!T.existsSync(f))break;let d=await p(this,Pi).call(this,f);if(n<d)try{let y=await p(this,Nn).call(this,f,n,1);y.length&&(a=p(this,Fi).call(this,y[0],h))}catch{}n<d-1&&(l=n+1)}while(!1);return{row:a,nextIndex:l}});_(this,"inputTableUpdate",async(r,i,n,s,o=null)=>{let a=!1;do{if(r=p(this,ee).call(this,r),i=p(this,at).call(this,i),o=p(this,St).call(this,o),!r.length||!i.length)break;let l=this.sourceGet(r);if(typeof l!="object"||l===null)break;let c=l[Te.K_SRC_INPUTS];if(!Array.isArray(c)||!c.length)break;let u=c.reduce((d,y)=>y.type==="table"&&y.key===i?y:d,null);if(u===null||(s=p(this,Fi).call(this,s,u),s===null))break;let h=p(this,gr).call(this,r,i,"session",o),f=await p(this,Gs).call(this,h,n);f>=0&&(await p(this,Ws).call(this,h,f,s),a=!0)}while(!1);return a});_(this,"inputTableDelete",async(r,i,n=null,s=null)=>{let o=!1;do{if(r=p(this,ee).call(this,r),i=p(this,at).call(this,i),s=p(this,St).call(this,s),!r.length||!i.length)break;let a=this.sourceGet(r);if(typeof a!="object"||a===null)break;let l=a[Te.K_SRC_INPUTS];if(!Array.isArray(l)||!l.length||l.reduce((h,f)=>f.type==="table"&&f.key===i?f:h,null)===null)break;let u=p(this,gr).call(this,r,i,"session",s);if(typeof n=="string"){let h=await p(this,Gs).call(this,u,n);h>=0&&await p(this,Ws).call(this,u,h,null,!0),o=!0;break}T.existsSync(u)&&(T.rmSync(u),o=!0)}while(!1);return o});_(this,"outputTableQuery",async(r,i,n,s=1,o=5e3)=>{let a=[],l=0;s=parseInt(s,10),(!Number.isInteger(s)||s<1)&&(s=1),o=parseInt(o,10),(!Number.isInteger(o)||o<1)&&(o=1);do{if(r=p(this,ee).call(this,r),n=p(this,at).call(this,n),i=Array.isArray(i)?[...new Set(i)].slice(-Zt.max.diskStorage.outputRunsCount):[],!r.length||!n.length||!i.length)break;let c=this.sourceGet(r);if(typeof c!="object"||c===null)break;let u=c[Te.K_SRC_OUTPUTS];if(!Array.isArray(u)||!u.length||u.reduce((O,I)=>I.type==="table"&&I.key===n?I:O,null)===null)break;let f={};for(let O of i){let I=p(this,In).call(this,r,n,O);if(!T.existsSync(I))continue;let L=await p(this,Pi).call(this,I);L>0&&(l+=L,f[O]=L)}let d=[],y=(s-1)*o,A=0,E=0,v=0;for(let O of Object.keys(f)){if(A>=o)break;v+=f[O]-1;let I=y>=E&&y<=v,L=y+o-1>=E&&y+o-1<=v,oe=y<=E&&y+o-1>=v;if(I||oe||L){let B=y-E,z=Math.min(v-y+1,o-A);A+=z,d.push({runId:O,startIndex:B,count:z})}E+=f[O],v=E}if(!d.length)break;for(let O of d){let{runId:I,startIndex:L,count:oe}=O,B=p(this,In).call(this,r,n,I),z=parseInt(I.replace(/^.*\-(\d+)$/g,"$1"),10),S=I.split("-")[1]??"default";try{a=a.concat((await p(this,Nn).call(this,B,L,oe)).map(D=>(D._time=z,D._sid=S,D)))}catch{}}}while(!1);return{rows:a,total:l,pageNumber:s,pageSize:o}});_(this,"outputTableAdd",(r,i,n,s)=>{let o=!1;do{if(r=p(this,ee).call(this,r),!r.length||(n=p(this,at).call(this,n),!n.length)||(i=p(this,Nt).call(this,i),!i.length))break;let a=this.sourceGet(r);if(typeof a!="object"||a===null)break;let l=a[Te.K_SRC_OUTPUTS];if(!Array.isArray(l)||!l.length)break;let c=l.reduce((h,f)=>f.type==="table"&&f.key===n?f:h,null);if(c===null||(s=p(this,Fi).call(this,s,c),s===null))break;let u=p(this,In).call(this,r,n,i);if(T.existsSync(u)&&T.statSync(u).size/1048576>=Zt.max.sourceCode.ioFieldTableSize)break;T.existsSync(j.dirname(u))||T.mkdirSync(j.dirname(u),{recursive:!0}),T.writeFileSync(u,"".concat(JSON.stringify(s),"\n"),{flag:"a",encoding:"utf8"}),o=!0}while(!1);return o});_(this,"outputsGet",(r,i,n=null)=>{let s={},o={};do{if(r=p(this,ee).call(this,r),!r.length||(i=p(this,Nt).call(this,i),!i.length))break;let a=p(this,ke).call(this,r,i);if(!T.existsSync(a)||!T.statSync(a).isDirectory())break;let l=p(this,ke).call(this,r,i,xc),c={};try{T.existsSync(l)&&T.statSync(l).isFile()&&(c=JSON.parse(T.readFileSync(l).toString()),(typeof c!="object"||c===null)&&(c={}))}catch{}if(!Array.isArray(n)||!n.length){let u=this.sourceGet(r);if(typeof u!="object"||u===null||(n=u[Te.K_SRC_OUTPUTS],!Array.isArray(n)||!n.length))break}o=p(this,Qs).call(this,s,{agentId:r,runId:i,scalarData:c,srcOutputs:n})}while(!1);return s});_(this,"outputsQuery",(r,i,n=null,s=null)=>{let o=[],a=0,l={};do{if(r=p(this,ee).call(this,r),!r.length)break;let c=p(this,ke).call(this,r);if(!T.existsSync(c)||!T.statSync(c).isDirectory())break;i="".concat(i??wa).toLowerCase().replace(/\W+/gi,""),i.length||(i=wa);let u=this.sourceGet(r);if(typeof u!="object"||u===null)break;let h=u[Te.K_SRC_OUTPUTS];if(!Array.isArray(h)||!h.length)break;for(let f of h)l[f.key]=[];(!Number.isInteger(n)||n<=0)&&(n=Math.floor(new Date().setHours(0,0,0,0)/1e3)),(!Number.isInteger(s)||s<=0)&&(s=Math.floor(new Date().getTime()/1e3));for(let f of T.readdirSync(c,{withFileTypes:!0})){let d=f.name;if(!f.isDirectory()||d.indexOf("".concat(i,"-"))!==0)continue;let y=d.match(/\-(\d+)$/);if(!y)continue;let A=parseInt(y[1],10);!Number.isInteger(A)||A<n||A>s||(o.push(d),a++)}o.sort((f,d)=>{let y="".concat(f).trim().split("-").pop(),A="".concat(d).trim().split("-").pop();return y>A?1:y<A?-1:0}),o.length>Zt.max.diskStorage.outputRunsCount&&(o=o.slice(-Zt.max.diskStorage.outputRunsCount));for(let f of o){let d=p(this,ke).call(this,r,f,xc),y={};try{T.existsSync(d)&&T.statSync(d).isFile()&&(y=JSON.parse(T.readFileSync(d).toString()),(typeof y!="object"||y===null)&&(y={}))}catch{}let A={};p(this,Qs).call(this,A,{agentId:r,runId:f,scalarData:y,srcOutputs:h});for(let E of h)typeof A[E.key]<"u"&&l[E.key].push({runId:f,runData:A[E.key]})}}while(!1);return{runIds:o,runIdsTotal:a,fields:l}});_(this,"outputScalarSet",async(r,i,n,s)=>{let o=!1;do{if(r=p(this,ee).call(this,r),!r.length||(i=p(this,Nt).call(this,i),!i.length))break;let a=this.sourceGet(r);if(typeof a!="object"||a===null)break;let l=a[Te.K_SRC_OUTPUTS];if(!Array.isArray(l)||!l.length)break;let c=l.reduce((d,y)=>["int","string","boolean"].includes(y.type)&&y.key===n?y:d,null);if(c===null)break;let u=await this.outputsGet(r,i,l);u[n]=p(this,xn).call(this,s,c);let h={};for(let d of l)["int","string","boolean"].includes(d.type)&&typeof u[d.key]<"u"&&(h[d.key]=u[d.key]);let f=p(this,ke).call(this,r,i,xc);T.existsSync(j.dirname(f))||T.mkdirSync(j.dirname(f),{recursive:!0}),T.writeFileSync(f,JSON.stringify(h,null,2)),o=!0}while(!1);return o});_(this,"outputFilesInit",(r,i,n,s=null)=>{if(r=p(this,ee).call(this,r),!r.length)throw new Error("Invalid agent ID");if(i=p(this,Nt).call(this,i),!i.length)throw new Error("Invalid run ID");if(n=p(this,at).call(this,n),!n.length)throw new Error("Invalid output key");let o=p(this,ke).call(this,r,i);if(!T.existsSync(o)||!T.statSync(o).isDirectory())throw new Error("Run not initialized");let a=j.join(o,Rn);T.existsSync(a)||T.mkdirSync(a,{recursive:!0});let l=this.sourceGet(r);if(typeof l!="object"||l===null)throw new Error("Source code not defined for this agent");let c=l[Te.K_SRC_OUTPUTS];if(!Array.isArray(c)||!c.length)throw new Error("Outputs not defined for this agent");let u=c.reduce((v,O)=>O.type==="files"&&O.key===n?O:v,null);if(u===null)throw new Error('Field "'.concat(n,'" is not of type file'));Array.isArray(u.extensions)||(u.extensions=["txt"]),s=typeof s=="string"?p(this,at).call(this,s):null,u.extensions.includes(s)||(s=u.extensions[0]);let h=0,f="".concat(n,"-"),[d,y]=i.split("-");for(let v of T.readdirSync(j.dirname(o),{withFileTypes:!0})){if(!v.isDirectory())continue;let[O,I]=v.name.split("-");if(O!==d||I!==y)continue;let L=j.join(j.dirname(o),v.name,Rn);if(T.existsSync(L)){for(let oe of T.readdirSync(L,{withFileTypes:!0}))if(oe.isFile()&&oe.name.indexOf(f)===0){let B=parseInt(oe.name.substring(f.length).replace(/^(\d+).*/,"$1"),10);Number.isInteger(B)&&B>0&&B>h&&(h=B)}}}let A="".concat(n,"-").concat(h+1,".").concat(s),E=j.join(a,A);return T.writeFileSync(E,"",{flag:"a"}),{fileName:A,filePath:E,minSize:Number.isInteger(u.min)&&u.min>0?u.min:null,maxSize:Number.isInteger(u.max)&&u.max>0?u.max:null}});_(this,"outputFilesAppend",async(r,i,n,s,o=null)=>{let a=!1;if(r=p(this,ee).call(this,r),i=p(this,Nt).call(this,i),n=p(this,Vs).call(this,n),r.length&&i.length&&n.length){let l=j.join(p(this,ke).call(this,r,i),Rn,n);if(T.existsSync(l)){if(Number.isInteger(o)&&T.statSync(l).size+s.length>o*1048576)throw T.rmSync(l),new Error("Maximum file size exceeded for ".concat(n," (").concat(o,"MB)"));T.writeFileSync(l,s,{flag:"a"}),a=!0}}return a});_(this,"outputFilesDelete",async(r,i,n)=>{let s=!1;if(r=p(this,ee).call(this,r),i=p(this,Nt).call(this,i),n=p(this,Vs).call(this,n),r.length&&i.length&&n.length){let o=j.join(p(this,ke).call(this,r,i),Rn,n);T.existsSync(o)&&(T.rmSync(o,{force:!0}),s=!0)}return s});this._register("diskStorage"),U(this,Et,nC.getPathConfig()),T.existsSync(p(this,Et))||T.mkdirSync(p(this,Et),{recursive:!0})}getSessionMetaPath(r){return r=p(this,ee).call(this,r),r.length?j.join(p(this,Et),"agents",r,"sessions",oC):null}getStorePath(){return p(this,Et)}},zt=new WeakMap,Ii=new WeakMap,It=new WeakMap,Ni=new WeakMap,Et=new WeakMap,Hs=new WeakMap,xi=new WeakMap,mr=new WeakMap,gr=new WeakMap,Di=new WeakMap,In=new WeakMap,Pi=new WeakMap,Nn=new WeakMap,Ws=new WeakMap,Gs=new WeakMap,Dc=new WeakMap,Fi=new WeakMap,zs=new WeakMap,xn=new WeakMap,ee=new WeakMap,Nt=new WeakMap,St=new WeakMap,Vs=new WeakMap,at=new WeakMap,Ys=new WeakMap,Qs=new WeakMap,ke=new WeakMap,Xs=new WeakMap,Hm)});var Ym=w((NB,Vm)=>{var Ea=require("path"),bt=require("fs"),cC=Gt(),hC=Jt(),Ae,Vt,Vr,zm;Vm.exports=(zm=class extends hC{constructor(r){super(r);R(this,Ae);_(this,"getAt",(r,i)=>{let n=k(this,Ae,Vt).call(this,r);if(!Array.isArray(n)||!Number.isInteger(i)||i<=0)return null;let s=null,o=new Date(i*1e3),a=o.getFullYear(),l=o.getMonth()+1,c=o.getDate(),u=o.getHours(),h=o.getMinutes();for(let d of n)if(d.sessionType==="schedule"&&!(!d.sessionReady||!d.sessionEnabled)&&d.sessionInfo.year===a&&d.sessionInfo.month===l&&d.sessionInfo.day===c&&d.sessionInfo.hour===u&&d.sessionInfo.minute===h){s=d;break}if(s!==null)return s;let f=(d,y=!1)=>{if(d="".concat(d??"").trim(),d==="*")return()=>!0;if(d[0]==="%"){let A=Math.abs(parseInt(d.substring(1),10));if(Number.isInteger(A)&&A>=2&&A<=1e3)return E=>E%A===0}if(d.match(/^\d+(?:,\d+)*?$/)){let A=d.split(",").map(E=>Math.abs(parseInt(E.trim(),10))).filter(E=>Number.isInteger(E));if(A.length)return E=>A.includes(E)}if(y&&d.match(/^\d+(?:,\d+)*?$/)){let A=d.substring(1).split(",").map(E=>Math.abs(parseInt(E.trim(),10))).filter(E=>Number.isInteger(E)&&E>=1&&E<=7);if(A.length)return E=>A.includes(E)}return()=>!1};for(let d of n)if(d.sessionType==="cron"&&!(!d.sessionReady||!d.sessionEnabled)&&f(d.sessionInfo.day,!0)(c)&&f(d.sessionInfo.hour)(u)&&f(d.sessionInfo.minute)(h)){s=d;break}return s});_(this,"create",(r,i,n)=>{let s=k(this,Ae,Vt).call(this,r);if(!Array.isArray(s))return null;let o=n[0]+cC.generateKey().substring(1);do{if(typeof i=="string"&&(i=i.toLowerCase().trim(),i.length))break;i=null}while(!1);["schedule","cron"].includes(n)||(n="schedule");let a=!0,l=!1,c=0,u="[ ".concat(n==="schedule"?"scheduled":"recurring"," ]"),h=new Date(new Date().getTime()+864e5),f=n==="schedule"?{year:h.getFullYear(),month:h.getMonth()+1,day:h.getDate(),hour:h.getHours(),minute:h.getMinutes()}:{day:"*",hour:"*",minute:"0"};return s.push({sessionId:o,moduleId:i,sessionEnabled:a,sessionReady:l,sessionName:u,sessionType:n,sessionInfo:f,sessionRuns:c}),k(this,Ae,Vr).call(this,r,s),o});_(this,"readAll",(r,i)=>{let n=k(this,Ae,Vt).call(this,r,i);return Array.isArray(n)?n:[]});_(this,"read",(r,i)=>{let n=k(this,Ae,Vt).call(this,r);return(Array.isArray(n)?n:[]).reduce((s,o)=>o.sessionId===i?o:s,null)});_(this,"updateName",(r,i,n)=>{let s=k(this,Ae,Vt).call(this,r);if(!Array.isArray(s))return"";let o=s.reduce((a,l)=>l.sessionId===i?l.sessionType:a,null);return["schedule","cron"].includes(o)?(n="".concat(n??"").replace(/\s+/g," ").substring(0,32).trim(),k(this,Ae,Vr).call(this,r,s.map(a=>a.sessionId===i?{...a,sessionName:n}:a)),n):""});_(this,"updateInfo",(r,i,n)=>{let s=k(this,Ae,Vt).call(this,r);if(!Array.isArray(s))return!1;let o=s.reduce((l,c)=>c.sessionId===i?c.sessionType:l,null);if(!["schedule","cron"].includes(o)||typeof n!="object"||n===null)return!1;let a={};if(o==="schedule")for(let l of["year","month","day","hour","minute"]){if(!Number.isInteger(n[l])||n[l]<0||n[l]>1e4)return!1;a[l]=n[l]}else for(let l of["day","hour","minute"]){if(typeof n[l]!="string"||!n[l].length)return!1;a[l]=n[l]}return n=a,k(this,Ae,Vr).call(this,r,s.map(l=>l.sessionId===i?{...l,sessionInfo:n}:l)),!0});_(this,"updateReady",(r,i,n)=>{let s=k(this,Ae,Vt).call(this,r);return Array.isArray(s)?(n=!!n,s.reduce((a,l)=>l.sessionId===i?l.sessionReady:a,!1)!==n?(k(this,Ae,Vr).call(this,r,s.map(a=>a.sessionId===i?{...a,sessionReady:n}:a)),!0):!1):!1});_(this,"updateEnabled",(r,i,n)=>{let s=k(this,Ae,Vt).call(this,r);return Array.isArray(s)?(n=!!n,s.reduce((a,l)=>l.sessionId===i?l.sessionEnabled:a,!1)!==n?(k(this,Ae,Vr).call(this,r,s.map(a=>a.sessionId===i?{...a,sessionEnabled:n}:a)),!0):!1):!1});_(this,"delete",(r,i=null,n=null)=>{let s=k(this,Ae,Vt).call(this,r);return Array.isArray(s)?(s=s.filter(o=>typeof i=="string"&&o.sessionType!==i||typeof n=="string"&&o.sessionId!==n),k(this,Ae,Vr).call(this,r,s),!0):!1});this._register("session")}incrementRuns(r,i){let n=k(this,Ae,Vt).call(this,r);if(!Array.isArray(n))return!1;let s=n.reduce((c,u)=>u.sessionId===i?u.sessionType:c,null);if(!["schedule","cron"].includes(s))return!1;let o=n.reduce((c,u)=>u.sessionId===i?u.sessionReady:c,!1),a=n.reduce((c,u)=>u.sessionId===i?u.sessionEnabled:c,!1);if(!o||!a)return!1;let l=n.reduce((c,u)=>u.sessionId===i?u.sessionRuns:c,0);return Number.isInteger(l)&&l>0?l++:l=1,k(this,Ae,Vr).call(this,r,n.map(c=>c.sessionId===i?{...c,sessionRuns:l}:c)),!0}},Ae=new WeakSet,Vt=function(r,i=null){if(typeof r!="string")return null;let n=this._oglama.diskStorage.getSessionMetaPath(r);if(typeof n!="string")return null;let s=Ea.dirname(n);bt.existsSync(s)||bt.mkdirSync(s,{recursive:!0});let o=[];if(!bt.existsSync(n))bt.writeFileSync(n,"[]");else try{let l=JSON.parse(bt.readFileSync(n).toString());Array.isArray(l)&&(o=l)}catch{}let a=bt.readdirSync(s,{withFileTypes:!0}).filter(l=>l.isDirectory()&&l.name!=="default").map(l=>l.name);return o=o.filter(l=>typeof l=="object"&&typeof l?.sessionId=="string"&&(i===null||l?.sessionType===i)&&a.includes(l.sessionId)),o},Vr=function(r,i){if(typeof r!="string"||!Array.isArray(i))return!1;let n=this._oglama.diskStorage.getSessionMetaPath(r);if(typeof n!="string")return!1;let s=Ea.dirname(n);bt.existsSync(s)||bt.mkdirSync(s,{recursive:!0}),bt.writeFileSync(n,JSON.stringify(i,null,2));let o=i.map(l=>l.sessionId),a=bt.readdirSync(s,{withFileTypes:!0}).filter(l=>l.isDirectory()&&l.name!=="default").map(l=>l.name);for(let l of o){let c=Ea.join(s,l);bt.existsSync(c)||bt.mkdirSync(c,{recursive:!0})}for(let l of a)if(!o.includes(l)){let c=Ea.join(s,l);bt.rmSync(c,{recursive:!0})}return!0},zm)});var lt=w(Pc=>{"use strict";Pc.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,i)=>{e.push((n,s)=>n!=null?i(n):r(s)),t.apply(this,e)})},"name",{value:t.name})};Pc.fromPromise=function(t){return Object.defineProperty(function(...e){let r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);e.pop(),t.apply(this,e).then(i=>r(null,i),r)},"name",{value:t.name})}});var Xm=w((PB,Qm)=>{var Yr=require("constants"),fC=process.cwd,Sa=null,dC=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Sa||(Sa=fC.call(process)),Sa};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Fc=process.chdir,process.chdir=function(t){Sa=null,Fc.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Fc));var Fc;Qm.exports=pC;function pC(t){Yr.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=i(t.chmod),t.fchmod=i(t.fchmod),t.lchmod=i(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=n(t.chmodSync),t.fchmodSync=n(t.fchmodSync),t.lchmodSync=n(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=l(t.statSync),t.fstatSync=l(t.fstatSync),t.lstatSync=l(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(u,h,f){f&&process.nextTick(f)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(u,h,f,d){d&&process.nextTick(d)},t.lchownSync=function(){}),dC==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:(function(u){function h(f,d,y){var A=Date.now(),E=0;u(f,d,function v(O){if(O&&(O.code==="EACCES"||O.code==="EPERM"||O.code==="EBUSY")&&Date.now()-A<6e4){setTimeout(function(){t.stat(d,function(I,L){I&&I.code==="ENOENT"?u(f,d,v):y(O)})},E),E<100&&(E+=10);return}y&&y(O)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,u),h})(t.rename)),t.read=typeof t.read!="function"?t.read:(function(u){function h(f,d,y,A,E,v){var O;if(v&&typeof v=="function"){var I=0;O=function(L,oe,B){if(L&&L.code==="EAGAIN"&&I<10)return I++,u.call(t,f,d,y,A,E,O);v.apply(this,arguments)}}return u.call(t,f,d,y,A,E,O)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,u),h})(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:(function(u){return function(h,f,d,y,A){for(var E=0;;)try{return u.call(t,h,f,d,y,A)}catch(v){if(v.code==="EAGAIN"&&E<10){E++;continue}throw v}}})(t.readSync);function e(u){u.lchmod=function(h,f,d){u.open(h,Yr.O_WRONLY|Yr.O_SYMLINK,f,function(y,A){if(y){d&&d(y);return}u.fchmod(A,f,function(E){u.close(A,function(v){d&&d(E||v)})})})},u.lchmodSync=function(h,f){var d=u.openSync(h,Yr.O_WRONLY|Yr.O_SYMLINK,f),y=!0,A;try{A=u.fchmodSync(d,f),y=!1}finally{if(y)try{u.closeSync(d)}catch{}else u.closeSync(d)}return A}}function r(u){Yr.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(h,f,d,y){u.open(h,Yr.O_SYMLINK,function(A,E){if(A){y&&y(A);return}u.futimes(E,f,d,function(v){u.close(E,function(O){y&&y(v||O)})})})},u.lutimesSync=function(h,f,d){var y=u.openSync(h,Yr.O_SYMLINK),A,E=!0;try{A=u.futimesSync(y,f,d),E=!1}finally{if(E)try{u.closeSync(y)}catch{}else u.closeSync(y)}return A}):u.futimes&&(u.lutimes=function(h,f,d,y){y&&process.nextTick(y)},u.lutimesSync=function(){})}function i(u){return u&&function(h,f,d){return u.call(t,h,f,function(y){c(y)&&(y=null),d&&d.apply(this,arguments)})}}function n(u){return u&&function(h,f){try{return u.call(t,h,f)}catch(d){if(!c(d))throw d}}}function s(u){return u&&function(h,f,d,y){return u.call(t,h,f,d,function(A){c(A)&&(A=null),y&&y.apply(this,arguments)})}}function o(u){return u&&function(h,f,d){try{return u.call(t,h,f,d)}catch(y){if(!c(y))throw y}}}function a(u){return u&&function(h,f,d){typeof f=="function"&&(d=f,f=null);function y(A,E){E&&(E.uid<0&&(E.uid+=4294967296),E.gid<0&&(E.gid+=4294967296)),d&&d.apply(this,arguments)}return f?u.call(t,h,f,y):u.call(t,h,y)}}function l(u){return u&&function(h,f){var d=f?u.call(t,h,f):u.call(t,h);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function c(u){if(!u||u.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var Zm=w((FB,Jm)=>{var Km=require("stream").Stream;Jm.exports=mC;function mC(t){return{ReadStream:e,WriteStream:r};function e(i,n){if(!(this instanceof e))return new e(i,n);Km.call(this);var s=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var o=Object.keys(n),a=0,l=o.length;a<l;a++){var c=o[a];this[c]=n[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}t.open(this.path,this.flags,this.mode,function(u,h){if(u){s.emit("error",u),s.readable=!1;return}s.fd=h,s.emit("open",h),s._read()})}function r(i,n){if(!(this instanceof r))return new r(i,n);Km.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),o=0,a=s.length;o<a;o++){var l=s[o];this[l]=n[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var tg=w((LB,eg)=>{"use strict";eg.exports=yC;var gC=Object.getPrototypeOf||function(t){return t.__proto__};function yC(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:gC(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var Xe=w(($B,kc)=>{var me=require("fs"),wC=Xm(),AC=Zm(),EC=tg(),ba=require("util"),qe,va;typeof Symbol=="function"&&typeof Symbol.for=="function"?(qe=Symbol.for("graceful-fs.queue"),va=Symbol.for("graceful-fs.previous")):(qe="___graceful-fs.queue",va="___graceful-fs.previous");function SC(){}function ng(t,e){Object.defineProperty(t,qe,{get:function(){return e}})}var Li=SC;ba.debuglog?Li=ba.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Li=function(){var t=ba.format.apply(ba,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)});me[qe]||(rg=global[qe]||[],ng(me,rg),me.close=(function(t){function e(r,i){return t.call(me,r,function(n){n||ig(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(e,va,{value:t}),e})(me.close),me.closeSync=(function(t){function e(r){t.apply(me,arguments),ig()}return Object.defineProperty(e,va,{value:t}),e})(me.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Li(me[qe]),require("assert").equal(me[qe].length,0)}));var rg;global[qe]||ng(global,me[qe]);kc.exports=Lc(EC(me));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!me.__patched&&(kc.exports=Lc(me),me.__patched=!0);function Lc(t){wC(t),t.gracefulify=Lc,t.createReadStream=oe,t.createWriteStream=B;var e=t.readFile;t.readFile=r;function r(D,G,P){return typeof G=="function"&&(P=G,G=null),K(D,G,P);function K(pe,J,V,M){return e(pe,J,function(te){te&&(te.code==="EMFILE"||te.code==="ENFILE")?Dn([K,[pe,J,V],te,M||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}var i=t.writeFile;t.writeFile=n;function n(D,G,P,K){return typeof P=="function"&&(K=P,P=null),pe(D,G,P,K);function pe(J,V,M,te,we){return i(J,V,M,function(re){re&&(re.code==="EMFILE"||re.code==="ENFILE")?Dn([pe,[J,V,M,te],re,we||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}var s=t.appendFile;s&&(t.appendFile=o);function o(D,G,P,K){return typeof P=="function"&&(K=P,P=null),pe(D,G,P,K);function pe(J,V,M,te,we){return s(J,V,M,function(re){re&&(re.code==="EMFILE"||re.code==="ENFILE")?Dn([pe,[J,V,M,te],re,we||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=l);function l(D,G,P,K){return typeof P=="function"&&(K=P,P=0),pe(D,G,P,K);function pe(J,V,M,te,we){return a(J,V,M,function(re){re&&(re.code==="EMFILE"||re.code==="ENFILE")?Dn([pe,[J,V,M,te],re,we||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}var c=t.readdir;t.readdir=h;var u=/^v[0-5]\./;function h(D,G,P){typeof G=="function"&&(P=G,G=null);var K=u.test(process.version)?function(V,M,te,we){return c(V,pe(V,M,te,we))}:function(V,M,te,we){return c(V,M,pe(V,M,te,we))};return K(D,G,P);function pe(J,V,M,te){return function(we,re){we&&(we.code==="EMFILE"||we.code==="ENFILE")?Dn([K,[J,V,M],we,te||Date.now(),Date.now()]):(re&&re.sort&&re.sort(),typeof M=="function"&&M.call(this,we,re))}}}if(process.version.substr(0,4)==="v0.8"){var f=AC(t);v=f.ReadStream,I=f.WriteStream}var d=t.ReadStream;d&&(v.prototype=Object.create(d.prototype),v.prototype.open=O);var y=t.WriteStream;y&&(I.prototype=Object.create(y.prototype),I.prototype.open=L),Object.defineProperty(t,"ReadStream",{get:function(){return v},set:function(D){v=D},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return I},set:function(D){I=D},enumerable:!0,configurable:!0});var A=v;Object.defineProperty(t,"FileReadStream",{get:function(){return A},set:function(D){A=D},enumerable:!0,configurable:!0});var E=I;Object.defineProperty(t,"FileWriteStream",{get:function(){return E},set:function(D){E=D},enumerable:!0,configurable:!0});function v(D,G){return this instanceof v?(d.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}function O(){var D=this;S(D.path,D.flags,D.mode,function(G,P){G?(D.autoClose&&D.destroy(),D.emit("error",G)):(D.fd=P,D.emit("open",P),D.read())})}function I(D,G){return this instanceof I?(y.apply(this,arguments),this):I.apply(Object.create(I.prototype),arguments)}function L(){var D=this;S(D.path,D.flags,D.mode,function(G,P){G?(D.destroy(),D.emit("error",G)):(D.fd=P,D.emit("open",P))})}function oe(D,G){return new t.ReadStream(D,G)}function B(D,G){return new t.WriteStream(D,G)}var z=t.open;t.open=S;function S(D,G,P,K){return typeof P=="function"&&(K=P,P=null),pe(D,G,P,K);function pe(J,V,M,te,we){return z(J,V,M,function(re,zr){re&&(re.code==="EMFILE"||re.code==="ENFILE")?Dn([pe,[J,V,M,te],re,we||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}return t}function Dn(t){Li("ENQUEUE",t[0].name,t[1]),me[qe].push(t),$c()}var _a;function ig(){for(var t=Date.now(),e=0;e<me[qe].length;++e)me[qe][e].length>2&&(me[qe][e][3]=t,me[qe][e][4]=t);$c()}function $c(){if(clearTimeout(_a),_a=void 0,me[qe].length!==0){var t=me[qe].shift(),e=t[0],r=t[1],i=t[2],n=t[3],s=t[4];if(n===void 0)Li("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-n>=6e4){Li("TIMEOUT",e.name,r);var o=r.pop();typeof o=="function"&&o.call(null,i)}else{var a=Date.now()-s,l=Math.max(s-n,1),c=Math.min(l*1.2,100);a>=c?(Li("RETRY",e.name,r),e.apply(null,r.concat([n]))):me[qe].push(t)}_a===void 0&&(_a=setTimeout($c,0))}}});var $i=w(Qr=>{"use strict";var sg=lt().fromCallback,ut=Xe(),bC=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof ut[t]=="function");Object.assign(Qr,ut);bC.forEach(t=>{Qr[t]=sg(ut[t])});Qr.exists=function(t,e){return typeof e=="function"?ut.exists(t,e):new Promise(r=>ut.exists(t,r))};Qr.read=function(t,e,r,i,n,s){return typeof s=="function"?ut.read(t,e,r,i,n,s):new Promise((o,a)=>{ut.read(t,e,r,i,n,(l,c,u)=>{if(l)return a(l);o({bytesRead:c,buffer:u})})})};Qr.write=function(t,e,...r){return typeof r[r.length-1]=="function"?ut.write(t,e,...r):new Promise((i,n)=>{ut.write(t,e,...r,(s,o,a)=>{if(s)return n(s);i({bytesWritten:o,buffer:a})})})};typeof ut.writev=="function"&&(Qr.writev=function(t,e,...r){return typeof r[r.length-1]=="function"?ut.writev(t,e,...r):new Promise((i,n)=>{ut.writev(t,e,...r,(s,o,a)=>{if(s)return n(s);i({bytesWritten:o,buffers:a})})})});typeof ut.realpath.native=="function"?Qr.realpath.native=sg(ut.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var ag=w((qB,og)=>{"use strict";var _C=require("path");og.exports.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(_C.parse(e).root,""))){let i=new Error("Path contains invalid characters: ".concat(e));throw i.code="EINVAL",i}}});var hg=w((MB,qc)=>{"use strict";var lg=$i(),{checkPath:ug}=ag(),cg=t=>{let e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};qc.exports.makeDir=async(t,e)=>(ug(t),lg.mkdir(t,{mode:cg(e),recursive:!0}));qc.exports.makeDirSync=(t,e)=>(ug(t),lg.mkdirSync(t,{mode:cg(e),recursive:!0}))});var Yt=w((UB,fg)=>{"use strict";var vC=lt().fromPromise,{makeDir:OC,makeDirSync:Mc}=hg(),Uc=vC(OC);fg.exports={mkdirs:Uc,mkdirsSync:Mc,mkdirp:Uc,mkdirpSync:Mc,ensureDir:Uc,ensureDirSync:Mc}});var Xr=w((BB,pg)=>{"use strict";var TC=lt().fromPromise,dg=$i();function CC(t){return dg.access(t).then(()=>!0).catch(()=>!1)}pg.exports={pathExists:TC(CC),pathExistsSync:dg.existsSync}});var Bc=w((jB,mg)=>{"use strict";var Pn=Xe();function RC(t,e,r,i){Pn.open(t,"r+",(n,s)=>{if(n)return i(n);Pn.futimes(s,e,r,o=>{Pn.close(s,a=>{i&&i(o||a)})})})}function IC(t,e,r){let i=Pn.openSync(t,"r+");return Pn.futimesSync(i,e,r),Pn.closeSync(i)}mg.exports={utimesMillis:RC,utimesMillisSync:IC}});var ki=w((HB,wg)=>{"use strict";var Fn=$i(),Re=require("path"),NC=require("util");function xC(t,e,r){let i=r.dereference?n=>Fn.stat(n,{bigint:!0}):n=>Fn.lstat(n,{bigint:!0});return Promise.all([i(t),i(e).catch(n=>{if(n.code==="ENOENT")return null;throw n})]).then(([n,s])=>({srcStat:n,destStat:s}))}function DC(t,e,r){let i,n=r.dereference?o=>Fn.statSync(o,{bigint:!0}):o=>Fn.lstatSync(o,{bigint:!0}),s=n(t);try{i=n(e)}catch(o){if(o.code==="ENOENT")return{srcStat:s,destStat:null};throw o}return{srcStat:s,destStat:i}}function PC(t,e,r,i,n){NC.callbackify(xC)(t,e,i,(s,o)=>{if(s)return n(s);let{srcStat:a,destStat:l}=o;if(l){if(Ks(a,l)){let c=Re.basename(t),u=Re.basename(e);return r==="move"&&c!==u&&c.toLowerCase()===u.toLowerCase()?n(null,{srcStat:a,destStat:l,isChangingCase:!0}):n(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!l.isDirectory())return n(new Error("Cannot overwrite non-directory '".concat(e,"' with directory '").concat(t,"'.")));if(!a.isDirectory()&&l.isDirectory())return n(new Error("Cannot overwrite directory '".concat(e,"' with non-directory '").concat(t,"'.")))}return a.isDirectory()&&jc(t,e)?n(new Error(Oa(t,e,r))):n(null,{srcStat:a,destStat:l})})}function FC(t,e,r,i){let{srcStat:n,destStat:s}=DC(t,e,i);if(s){if(Ks(n,s)){let o=Re.basename(t),a=Re.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error("Cannot overwrite non-directory '".concat(e,"' with directory '").concat(t,"'."));if(!n.isDirectory()&&s.isDirectory())throw new Error("Cannot overwrite directory '".concat(e,"' with non-directory '").concat(t,"'."))}if(n.isDirectory()&&jc(t,e))throw new Error(Oa(t,e,r));return{srcStat:n,destStat:s}}function gg(t,e,r,i,n){let s=Re.resolve(Re.dirname(t)),o=Re.resolve(Re.dirname(r));if(o===s||o===Re.parse(o).root)return n();Fn.stat(o,{bigint:!0},(a,l)=>a?a.code==="ENOENT"?n():n(a):Ks(e,l)?n(new Error(Oa(t,r,i))):gg(t,e,o,i,n))}function yg(t,e,r,i){let n=Re.resolve(Re.dirname(t)),s=Re.resolve(Re.dirname(r));if(s===n||s===Re.parse(s).root)return;let o;try{o=Fn.statSync(s,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Ks(e,o))throw new Error(Oa(t,r,i));return yg(t,e,s,i)}function Ks(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function jc(t,e){let r=Re.resolve(t).split(Re.sep).filter(n=>n),i=Re.resolve(e).split(Re.sep).filter(n=>n);return r.reduce((n,s,o)=>n&&i[o]===s,!0)}function Oa(t,e,r){return"Cannot ".concat(r," '").concat(t,"' to a subdirectory of itself, '").concat(e,"'.")}wg.exports={checkPaths:PC,checkPathsSync:FC,checkParentPaths:gg,checkParentPathsSync:yg,isSrcSubdir:jc,areIdentical:Ks}});var Tg=w((WB,Og)=>{"use strict";var ct=Xe(),Js=require("path"),LC=Yt().mkdirs,$C=Xr().pathExists,kC=Bc().utimesMillis,Zs=ki();function qC(t,e,r,i){typeof r=="function"&&!i?(i=r,r={}):typeof r=="function"&&(r={filter:r}),i=i||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n	see https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001"),Zs.checkPaths(t,e,"copy",r,(n,s)=>{if(n)return i(n);let{srcStat:o,destStat:a}=s;Zs.checkParentPaths(t,o,e,"copy",l=>l?i(l):r.filter?Sg(Ag,a,t,e,r,i):Ag(a,t,e,r,i))})}function Ag(t,e,r,i,n){let s=Js.dirname(r);$C(s,(o,a)=>{if(o)return n(o);if(a)return Ta(t,e,r,i,n);LC(s,l=>l?n(l):Ta(t,e,r,i,n))})}function Sg(t,e,r,i,n,s){Promise.resolve(n.filter(r,i)).then(o=>o?t(e,r,i,n,s):s(),o=>s(o))}function MC(t,e,r,i,n){return i.filter?Sg(Ta,t,e,r,i,n):Ta(t,e,r,i,n)}function Ta(t,e,r,i,n){(i.dereference?ct.stat:ct.lstat)(e,(o,a)=>o?n(o):a.isDirectory()?zC(a,t,e,r,i,n):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?UC(a,t,e,r,i,n):a.isSymbolicLink()?QC(t,e,r,i,n):a.isSocket()?n(new Error("Cannot copy a socket file: ".concat(e))):a.isFIFO()?n(new Error("Cannot copy a FIFO pipe: ".concat(e))):n(new Error("Unknown file: ".concat(e))))}function UC(t,e,r,i,n,s){return e?BC(t,r,i,n,s):bg(t,r,i,n,s)}function BC(t,e,r,i,n){if(i.overwrite)ct.unlink(r,s=>s?n(s):bg(t,e,r,i,n));else return i.errorOnExist?n(new Error("'".concat(r,"' already exists"))):n()}function bg(t,e,r,i,n){ct.copyFile(e,r,s=>s?n(s):i.preserveTimestamps?jC(t.mode,e,r,n):Ca(r,t.mode,n))}function jC(t,e,r,i){return HC(t)?WC(r,t,n=>n?i(n):Eg(t,e,r,i)):Eg(t,e,r,i)}function HC(t){return(t&128)===0}function WC(t,e,r){return Ca(t,e|128,r)}function Eg(t,e,r,i){GC(e,r,n=>n?i(n):Ca(r,t,i))}function Ca(t,e,r){return ct.chmod(t,e,r)}function GC(t,e,r){ct.stat(t,(i,n)=>i?r(i):kC(e,n.atime,n.mtime,r))}function zC(t,e,r,i,n,s){return e?_g(r,i,n,s):VC(t.mode,r,i,n,s)}function VC(t,e,r,i,n){ct.mkdir(r,s=>{if(s)return n(s);_g(e,r,i,o=>o?n(o):Ca(r,t,n))})}function _g(t,e,r,i){ct.readdir(t,(n,s)=>n?i(n):vg(s,t,e,r,i))}function vg(t,e,r,i,n){let s=t.pop();return s?YC(t,s,e,r,i,n):n()}function YC(t,e,r,i,n,s){let o=Js.join(r,e),a=Js.join(i,e);Zs.checkPaths(o,a,"copy",n,(l,c)=>{if(l)return s(l);let{destStat:u}=c;MC(u,o,a,n,h=>h?s(h):vg(t,r,i,n,s))})}function QC(t,e,r,i,n){ct.readlink(e,(s,o)=>{if(s)return n(s);if(i.dereference&&(o=Js.resolve(process.cwd(),o)),t)ct.readlink(r,(a,l)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?ct.symlink(o,r,n):n(a):(i.dereference&&(l=Js.resolve(process.cwd(),l)),Zs.isSrcSubdir(o,l)?n(new Error("Cannot copy '".concat(o,"' to a subdirectory of itself, '").concat(l,"'."))):t.isDirectory()&&Zs.isSrcSubdir(l,o)?n(new Error("Cannot overwrite '".concat(l,"' with '").concat(o,"'."))):XC(o,r,n)));else return ct.symlink(o,r,n)})}function XC(t,e,r){ct.unlink(e,i=>i?r(i):ct.symlink(t,e,r))}Og.exports=qC});var xg=w((GB,Ng)=>{"use strict";var Be=Xe(),eo=require("path"),KC=Yt().mkdirsSync,JC=Bc().utimesMillisSync,to=ki();function ZC(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n	see https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");let{srcStat:i,destStat:n}=to.checkPathsSync(t,e,"copy",r);return to.checkParentPathsSync(t,i,e,"copy"),eR(n,t,e,r)}function eR(t,e,r,i){if(i.filter&&!i.filter(e,r))return;let n=eo.dirname(r);return Be.existsSync(n)||KC(n),Cg(t,e,r,i)}function tR(t,e,r,i){if(!(i.filter&&!i.filter(e,r)))return Cg(t,e,r,i)}function Cg(t,e,r,i){let s=(i.dereference?Be.statSync:Be.lstatSync)(e);if(s.isDirectory())return lR(s,t,e,r,i);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return rR(s,t,e,r,i);if(s.isSymbolicLink())return hR(t,e,r,i);throw s.isSocket()?new Error("Cannot copy a socket file: ".concat(e)):s.isFIFO()?new Error("Cannot copy a FIFO pipe: ".concat(e)):new Error("Unknown file: ".concat(e))}function rR(t,e,r,i,n){return e?iR(t,r,i,n):Rg(t,r,i,n)}function iR(t,e,r,i){if(i.overwrite)return Be.unlinkSync(r),Rg(t,e,r,i);if(i.errorOnExist)throw new Error("'".concat(r,"' already exists"))}function Rg(t,e,r,i){return Be.copyFileSync(e,r),i.preserveTimestamps&&nR(t.mode,e,r),Hc(r,t.mode)}function nR(t,e,r){return sR(t)&&oR(r,t),aR(e,r)}function sR(t){return(t&128)===0}function oR(t,e){return Hc(t,e|128)}function Hc(t,e){return Be.chmodSync(t,e)}function aR(t,e){let r=Be.statSync(t);return JC(e,r.atime,r.mtime)}function lR(t,e,r,i,n){return e?Ig(r,i,n):uR(t.mode,r,i,n)}function uR(t,e,r,i){return Be.mkdirSync(r),Ig(e,r,i),Hc(r,t)}function Ig(t,e,r){Be.readdirSync(t).forEach(i=>cR(i,t,e,r))}function cR(t,e,r,i){let n=eo.join(e,t),s=eo.join(r,t),{destStat:o}=to.checkPathsSync(n,s,"copy",i);return tR(o,n,s,i)}function hR(t,e,r,i){let n=Be.readlinkSync(e);if(i.dereference&&(n=eo.resolve(process.cwd(),n)),t){let s;try{s=Be.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return Be.symlinkSync(n,r);throw o}if(i.dereference&&(s=eo.resolve(process.cwd(),s)),to.isSrcSubdir(n,s))throw new Error("Cannot copy '".concat(n,"' to a subdirectory of itself, '").concat(s,"'."));if(Be.statSync(r).isDirectory()&&to.isSrcSubdir(s,n))throw new Error("Cannot overwrite '".concat(s,"' with '").concat(n,"'."));return fR(n,r)}else return Be.symlinkSync(n,r)}function fR(t,e){return Be.unlinkSync(e),Be.symlinkSync(t,e)}Ng.exports=ZC});var Ra=w((zB,Dg)=>{"use strict";var dR=lt().fromCallback;Dg.exports={copy:dR(Tg()),copySync:xg()}});var Bg=w((VB,Ug)=>{"use strict";var Pg=Xe(),kg=require("path"),ae=require("assert"),ro=process.platform==="win32";function qg(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{t[r]=t[r]||Pg[r],r=r+"Sync",t[r]=t[r]||Pg[r]}),t.maxBusyTries=t.maxBusyTries||3}function Wc(t,e,r){let i=0;typeof e=="function"&&(r=e,e={}),ae(t,"rimraf: missing path"),ae.strictEqual(typeof t,"string","rimraf: path should be a string"),ae.strictEqual(typeof r,"function","rimraf: callback function required"),ae(e,"rimraf: invalid options argument provided"),ae.strictEqual(typeof e,"object","rimraf: options should be object"),qg(e),Fg(t,e,function n(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&i<e.maxBusyTries){i++;let o=i*100;return setTimeout(()=>Fg(t,e,n),o)}s.code==="ENOENT"&&(s=null)}r(s)})}function Fg(t,e,r){ae(t),ae(e),ae(typeof r=="function"),e.lstat(t,(i,n)=>{if(i&&i.code==="ENOENT")return r(null);if(i&&i.code==="EPERM"&&ro)return Lg(t,e,i,r);if(n&&n.isDirectory())return Ia(t,e,i,r);e.unlink(t,s=>{if(s){if(s.code==="ENOENT")return r(null);if(s.code==="EPERM")return ro?Lg(t,e,s,r):Ia(t,e,s,r);if(s.code==="EISDIR")return Ia(t,e,s,r)}return r(s)})})}function Lg(t,e,r,i){ae(t),ae(e),ae(typeof i=="function"),e.chmod(t,438,n=>{n?i(n.code==="ENOENT"?null:r):e.stat(t,(s,o)=>{s?i(s.code==="ENOENT"?null:r):o.isDirectory()?Ia(t,e,r,i):e.unlink(t,i)})})}function $g(t,e,r){let i;ae(t),ae(e);try{e.chmodSync(t,438)}catch(n){if(n.code==="ENOENT")return;throw r}try{i=e.statSync(t)}catch(n){if(n.code==="ENOENT")return;throw r}i.isDirectory()?Na(t,e,r):e.unlinkSync(t)}function Ia(t,e,r,i){ae(t),ae(e),ae(typeof i=="function"),e.rmdir(t,n=>{n&&(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")?pR(t,e,i):n&&n.code==="ENOTDIR"?i(r):i(n)})}function pR(t,e,r){ae(t),ae(e),ae(typeof r=="function"),e.readdir(t,(i,n)=>{if(i)return r(i);let s=n.length,o;if(s===0)return e.rmdir(t,r);n.forEach(a=>{Wc(kg.join(t,a),e,l=>{if(!o){if(l)return r(o=l);--s===0&&e.rmdir(t,r)}})})})}function Mg(t,e){let r;e=e||{},qg(e),ae(t,"rimraf: missing path"),ae.strictEqual(typeof t,"string","rimraf: path should be a string"),ae(e,"rimraf: missing options"),ae.strictEqual(typeof e,"object","rimraf: options should be object");try{r=e.lstatSync(t)}catch(i){if(i.code==="ENOENT")return;i.code==="EPERM"&&ro&&$g(t,e,i)}try{r&&r.isDirectory()?Na(t,e,null):e.unlinkSync(t)}catch(i){if(i.code==="ENOENT")return;if(i.code==="EPERM")return ro?$g(t,e,i):Na(t,e,i);if(i.code!=="EISDIR")throw i;Na(t,e,i)}}function Na(t,e,r){ae(t),ae(e);try{e.rmdirSync(t)}catch(i){if(i.code==="ENOTDIR")throw r;if(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")mR(t,e);else if(i.code!=="ENOENT")throw i}}function mR(t,e){if(ae(t),ae(e),e.readdirSync(t).forEach(r=>Mg(kg.join(t,r),e)),ro){let r=Date.now();do try{return e.rmdirSync(t,e)}catch{}while(Date.now()-r<500)}else return e.rmdirSync(t,e)}Ug.exports=Wc;Wc.sync=Mg});var io=w((YB,Hg)=>{"use strict";var xa=Xe(),gR=lt().fromCallback,jg=Bg();function yR(t,e){if(xa.rm)return xa.rm(t,{recursive:!0,force:!0},e);jg(t,e)}function wR(t){if(xa.rmSync)return xa.rmSync(t,{recursive:!0,force:!0});jg.sync(t)}Hg.exports={remove:gR(yR),removeSync:wR}});var Kg=w((QB,Xg)=>{"use strict";var AR=lt().fromPromise,zg=$i(),Vg=require("path"),Yg=Yt(),Qg=io(),Wg=AR(async function(e){let r;try{r=await zg.readdir(e)}catch{return Yg.mkdirs(e)}return Promise.all(r.map(i=>Qg.remove(Vg.join(e,i))))});function Gg(t){let e;try{e=zg.readdirSync(t)}catch{return Yg.mkdirsSync(t)}e.forEach(r=>{r=Vg.join(t,r),Qg.removeSync(r)})}Xg.exports={emptyDirSync:Gg,emptydirSync:Gg,emptyDir:Wg,emptydir:Wg}});var ty=w((XB,ey)=>{"use strict";var ER=lt().fromCallback,Jg=require("path"),Kr=Xe(),Zg=Yt();function SR(t,e){function r(){Kr.writeFile(t,"",i=>{if(i)return e(i);e()})}Kr.stat(t,(i,n)=>{if(!i&&n.isFile())return e();let s=Jg.dirname(t);Kr.stat(s,(o,a)=>{if(o)return o.code==="ENOENT"?Zg.mkdirs(s,l=>{if(l)return e(l);r()}):e(o);a.isDirectory()?r():Kr.readdir(s,l=>{if(l)return e(l)})})})}function bR(t){let e;try{e=Kr.statSync(t)}catch{}if(e&&e.isFile())return;let r=Jg.dirname(t);try{Kr.statSync(r).isDirectory()||Kr.readdirSync(r)}catch(i){if(i&&i.code==="ENOENT")Zg.mkdirsSync(r);else throw i}Kr.writeFileSync(t,"")}ey.exports={createFile:ER(SR),createFileSync:bR}});var oy=w((KB,sy)=>{"use strict";var _R=lt().fromCallback,ry=require("path"),Jr=Xe(),iy=Yt(),vR=Xr().pathExists,{areIdentical:ny}=ki();function OR(t,e,r){function i(n,s){Jr.link(n,s,o=>{if(o)return r(o);r(null)})}Jr.lstat(e,(n,s)=>{Jr.lstat(t,(o,a)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),r(o);if(s&&ny(a,s))return r(null);let l=ry.dirname(e);vR(l,(c,u)=>{if(c)return r(c);if(u)return i(t,e);iy.mkdirs(l,h=>{if(h)return r(h);i(t,e)})})})})}function TR(t,e){let r;try{r=Jr.lstatSync(e)}catch{}try{let s=Jr.lstatSync(t);if(r&&ny(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let i=ry.dirname(e);return Jr.existsSync(i)||iy.mkdirsSync(i),Jr.linkSync(t,e)}sy.exports={createLink:_R(OR),createLinkSync:TR}});var ly=w((JB,ay)=>{"use strict";var Zr=require("path"),no=Xe(),CR=Xr().pathExists;function RR(t,e,r){if(Zr.isAbsolute(t))return no.lstat(t,i=>i?(i.message=i.message.replace("lstat","ensureSymlink"),r(i)):r(null,{toCwd:t,toDst:t}));{let i=Zr.dirname(e),n=Zr.join(i,t);return CR(n,(s,o)=>s?r(s):o?r(null,{toCwd:n,toDst:t}):no.lstat(t,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:t,toDst:Zr.relative(i,t)})))}}function IR(t,e){let r;if(Zr.isAbsolute(t)){if(r=no.existsSync(t),!r)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}else{let i=Zr.dirname(e),n=Zr.join(i,t);if(r=no.existsSync(n),r)return{toCwd:n,toDst:t};if(r=no.existsSync(t),!r)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:Zr.relative(i,t)}}}ay.exports={symlinkPaths:RR,symlinkPathsSync:IR}});var hy=w((ZB,cy)=>{"use strict";var uy=Xe();function NR(t,e,r){if(r=typeof e=="function"?e:r,e=typeof e=="function"?!1:e,e)return r(null,e);uy.lstat(t,(i,n)=>{if(i)return r(null,"file");e=n&&n.isDirectory()?"dir":"file",r(null,e)})}function xR(t,e){let r;if(e)return e;try{r=uy.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}cy.exports={symlinkType:NR,symlinkTypeSync:xR}});var Ay=w((ej,wy)=>{"use strict";var DR=lt().fromCallback,dy=require("path"),Qt=$i(),py=Yt(),PR=py.mkdirs,FR=py.mkdirsSync,my=ly(),LR=my.symlinkPaths,$R=my.symlinkPathsSync,gy=hy(),kR=gy.symlinkType,qR=gy.symlinkTypeSync,MR=Xr().pathExists,{areIdentical:yy}=ki();function UR(t,e,r,i){i=typeof r=="function"?r:i,r=typeof r=="function"?!1:r,Qt.lstat(e,(n,s)=>{!n&&s.isSymbolicLink()?Promise.all([Qt.stat(t),Qt.stat(e)]).then(([o,a])=>{if(yy(o,a))return i(null);fy(t,e,r,i)}):fy(t,e,r,i)})}function fy(t,e,r,i){LR(t,e,(n,s)=>{if(n)return i(n);t=s.toDst,kR(s.toCwd,r,(o,a)=>{if(o)return i(o);let l=dy.dirname(e);MR(l,(c,u)=>{if(c)return i(c);if(u)return Qt.symlink(t,e,a,i);PR(l,h=>{if(h)return i(h);Qt.symlink(t,e,a,i)})})})})}function BR(t,e,r){let i;try{i=Qt.lstatSync(e)}catch{}if(i&&i.isSymbolicLink()){let a=Qt.statSync(t),l=Qt.statSync(e);if(yy(a,l))return}let n=$R(t,e);t=n.toDst,r=qR(n.toCwd,r);let s=dy.dirname(e);return Qt.existsSync(s)||FR(s),Qt.symlinkSync(t,e,r)}wy.exports={createSymlink:DR(UR),createSymlinkSync:BR}});var Cy=w((tj,Ty)=>{"use strict";var{createFile:Ey,createFileSync:Sy}=ty(),{createLink:by,createLinkSync:_y}=oy(),{createSymlink:vy,createSymlinkSync:Oy}=Ay();Ty.exports={createFile:Ey,createFileSync:Sy,ensureFile:Ey,ensureFileSync:Sy,createLink:by,createLinkSync:_y,ensureLink:by,ensureLinkSync:_y,createSymlink:vy,createSymlinkSync:Oy,ensureSymlink:vy,ensureSymlinkSync:Oy}});var Da=w((rj,Ry)=>{function jR(t,{EOL:e="\n",finalEOL:r=!0,replacer:i=null,spaces:n}={}){let s=r?e:"";return JSON.stringify(t,i,n).replace(/\n/g,e)+s}function HR(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}Ry.exports={stringify:jR,stripBom:HR}});var Dy=w((ij,xy)=>{var Ln;try{Ln=Xe()}catch{Ln=require("fs")}var Pa=lt(),{stringify:Iy,stripBom:Ny}=Da();async function WR(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||Ln,i="throws"in e?e.throws:!0,n=await Pa.fromCallback(r.readFile)(t,e);n=Ny(n);let s;try{s=JSON.parse(n,e?e.reviver:null)}catch(o){if(i)throw o.message="".concat(t,": ").concat(o.message),o;return null}return s}var GR=Pa.fromPromise(WR);function zR(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||Ln,i="throws"in e?e.throws:!0;try{let n=r.readFileSync(t,e);return n=Ny(n),JSON.parse(n,e.reviver)}catch(n){if(i)throw n.message="".concat(t,": ").concat(n.message),n;return null}}async function VR(t,e,r={}){let i=r.fs||Ln,n=Iy(e,r);await Pa.fromCallback(i.writeFile)(t,n,r)}var YR=Pa.fromPromise(VR);function QR(t,e,r={}){let i=r.fs||Ln,n=Iy(e,r);return i.writeFileSync(t,n,r)}var XR={readFile:GR,readFileSync:zR,writeFile:YR,writeFileSync:QR};xy.exports=XR});var Fy=w((nj,Py)=>{"use strict";var Fa=Dy();Py.exports={readJson:Fa.readFile,readJsonSync:Fa.readFileSync,writeJson:Fa.writeFile,writeJsonSync:Fa.writeFileSync}});var La=w((sj,ky)=>{"use strict";var KR=lt().fromCallback,so=Xe(),Ly=require("path"),$y=Yt(),JR=Xr().pathExists;function ZR(t,e,r,i){typeof r=="function"&&(i=r,r="utf8");let n=Ly.dirname(t);JR(n,(s,o)=>{if(s)return i(s);if(o)return so.writeFile(t,e,r,i);$y.mkdirs(n,a=>{if(a)return i(a);so.writeFile(t,e,r,i)})})}function eI(t,...e){let r=Ly.dirname(t);if(so.existsSync(r))return so.writeFileSync(t,...e);$y.mkdirsSync(r),so.writeFileSync(t,...e)}ky.exports={outputFile:KR(ZR),outputFileSync:eI}});var My=w((oj,qy)=>{"use strict";var{stringify:tI}=Da(),{outputFile:rI}=La();async function iI(t,e,r={}){let i=tI(e,r);await rI(t,i,r)}qy.exports=iI});var By=w((aj,Uy)=>{"use strict";var{stringify:nI}=Da(),{outputFileSync:sI}=La();function oI(t,e,r){let i=nI(e,r);sI(t,i,r)}Uy.exports=oI});var Hy=w((lj,jy)=>{"use strict";var aI=lt().fromPromise,Ke=Fy();Ke.outputJson=aI(My());Ke.outputJsonSync=By();Ke.outputJSON=Ke.outputJson;Ke.outputJSONSync=Ke.outputJsonSync;Ke.writeJSON=Ke.writeJson;Ke.writeJSONSync=Ke.writeJsonSync;Ke.readJSON=Ke.readJson;Ke.readJSONSync=Ke.readJsonSync;jy.exports=Ke});var Yy=w((uj,Vy)=>{"use strict";var lI=Xe(),zc=require("path"),uI=Ra().copy,zy=io().remove,cI=Yt().mkdirp,hI=Xr().pathExists,Wy=ki();function fI(t,e,r,i){typeof r=="function"&&(i=r,r={}),r=r||{};let n=r.overwrite||r.clobber||!1;Wy.checkPaths(t,e,"move",r,(s,o)=>{if(s)return i(s);let{srcStat:a,isChangingCase:l=!1}=o;Wy.checkParentPaths(t,a,e,"move",c=>{if(c)return i(c);if(dI(e))return Gy(t,e,n,l,i);cI(zc.dirname(e),u=>u?i(u):Gy(t,e,n,l,i))})})}function dI(t){let e=zc.dirname(t);return zc.parse(e).root===e}function Gy(t,e,r,i,n){if(i)return Gc(t,e,r,n);if(r)return zy(e,s=>s?n(s):Gc(t,e,r,n));hI(e,(s,o)=>s?n(s):o?n(new Error("dest already exists.")):Gc(t,e,r,n))}function Gc(t,e,r,i){lI.rename(t,e,n=>n?n.code!=="EXDEV"?i(n):pI(t,e,r,i):i())}function pI(t,e,r,i){uI(t,e,{overwrite:r,errorOnExist:!0},s=>s?i(s):zy(t,i))}Vy.exports=fI});var Zy=w((cj,Jy)=>{"use strict";var Xy=Xe(),Yc=require("path"),mI=Ra().copySync,Ky=io().removeSync,gI=Yt().mkdirpSync,Qy=ki();function yI(t,e,r){r=r||{};let i=r.overwrite||r.clobber||!1,{srcStat:n,isChangingCase:s=!1}=Qy.checkPathsSync(t,e,"move",r);return Qy.checkParentPathsSync(t,n,e,"move"),wI(e)||gI(Yc.dirname(e)),AI(t,e,i,s)}function wI(t){let e=Yc.dirname(t);return Yc.parse(e).root===e}function AI(t,e,r,i){if(i)return Vc(t,e,r);if(r)return Ky(e),Vc(t,e,r);if(Xy.existsSync(e))throw new Error("dest already exists.");return Vc(t,e,r)}function Vc(t,e,r){try{Xy.renameSync(t,e)}catch(i){if(i.code!=="EXDEV")throw i;return EI(t,e,r)}}function EI(t,e,r){return mI(t,e,{overwrite:r,errorOnExist:!0}),Ky(t)}Jy.exports=yI});var tw=w((hj,ew)=>{"use strict";var SI=lt().fromCallback;ew.exports={move:SI(Yy()),moveSync:Zy()}});var yr=w((fj,rw)=>{"use strict";rw.exports={...$i(),...Ra(),...Kg(),...Cy(),...Hy(),...Yt(),...tw(),...La(),...Xr(),...io()}});var $a=w($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.CancellationError=$n.CancellationToken=void 0;var bI=require("events"),Qc=class extends bI.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(e){this.removeParentCancelHandler(),this._parent=e,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(e){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,e!=null&&(this.parent=e)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(e){this.cancelled?e():this.once("cancel",e)}createPromise(e){if(this.cancelled)return Promise.reject(new oo);let r=()=>{if(i!=null)try{this.removeListener("cancel",i),i=null}catch{}},i=null;return new Promise((n,s)=>{let o=null;if(i=()=>{try{o!=null&&(o(),o=null)}finally{s(new oo)}},this.cancelled){i();return}this.onCancel(i),e(n,s,a=>{o=a})}).then(n=>(r(),n)).catch(n=>{throw r(),n})}removeParentCancelHandler(){let e=this._parent;e!=null&&this.parentCancelHandler!=null&&(e.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};$n.CancellationToken=Qc;var oo=class extends Error{constructor(){super("cancelled")}};$n.CancellationError=oo});var ao=w(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.newError=_I;function _I(t,e){let r=new Error(t);return r.code=e,r}});var nw=w((mj,iw)=>{var kn=1e3,qn=kn*60,Mn=qn*60,qi=Mn*24,vI=qi*7,OI=qi*365.25;iw.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return TI(t);if(r==="number"&&isFinite(t))return e.long?RI(t):CI(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function TI(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*OI;case"weeks":case"week":case"w":return r*vI;case"days":case"day":case"d":return r*qi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Mn;case"minutes":case"minute":case"mins":case"min":case"m":return r*qn;case"seconds":case"second":case"secs":case"sec":case"s":return r*kn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function CI(t){var e=Math.abs(t);return e>=qi?Math.round(t/qi)+"d":e>=Mn?Math.round(t/Mn)+"h":e>=qn?Math.round(t/qn)+"m":e>=kn?Math.round(t/kn)+"s":t+"ms"}function RI(t){var e=Math.abs(t);return e>=qi?ka(t,e,qi,"day"):e>=Mn?ka(t,e,Mn,"hour"):e>=qn?ka(t,e,qn,"minute"):e>=kn?ka(t,e,kn,"second"):t+" ms"}function ka(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var Kc=w((gj,sw)=>{function II(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=n,r.enabled=a,r.humanize=nw(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let h=0;for(let f=0;f<u.length;f++)h=(h<<5)-h+u.charCodeAt(f),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(u){let h,f=null,d,y;function A(...E){if(!A.enabled)return;let v=A,O=Number(new Date),I=O-(h||O);v.diff=I,v.prev=h,v.curr=O,h=O,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let L=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(B,z)=>{if(B==="%%")return"%";L++;let S=r.formatters[z];if(typeof S=="function"){let D=E[L];B=S.call(v,D),E.splice(L,1),L--}return B}),r.formatArgs.call(v,E),(v.log||r.log).apply(v,E)}return A.namespace=u,A.useColors=r.useColors(),A.color=r.selectColor(u),A.extend=i,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(d!==r.namespaces&&(d=r.namespaces,y=r.enabled(u)),y),set:E=>{f=E}}),typeof r.init=="function"&&r.init(A),A}function i(u,h){let f=r(this.namespace+(typeof h>"u"?":":h)+u);return f.log=this.log,f}function n(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let h=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let f of h)f[0]==="-"?r.skips.push(f.slice(1)):r.names.push(f)}function s(u,h){let f=0,d=0,y=-1,A=0;for(;f<u.length;)if(d<h.length&&(h[d]===u[f]||h[d]==="*"))h[d]==="*"?(y=d,A=f,d++):(f++,d++);else if(y!==-1)d=y+1,A++,f=A;else return!1;for(;d<h.length&&h[d]==="*";)d++;return d===h.length}function o(){let u=[...r.names,...r.skips.map(h=>"-"+h)].join(",");return r.enable(""),u}function a(u){for(let h of r.skips)if(s(u,h))return!1;for(let h of r.names)if(s(u,h))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}sw.exports=II});var ow=w((ht,qa)=>{ht.formatArgs=xI;ht.save=DI;ht.load=PI;ht.useColors=NI;ht.storage=FI();ht.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ht.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function NI(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function xI(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+qa.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}ht.log=console.debug||console.log||(()=>{});function DI(t){try{t?ht.storage.setItem("debug",t):ht.storage.removeItem("debug")}catch{}}function PI(){let t;try{t=ht.storage.getItem("debug")||ht.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function FI(){try{return localStorage}catch{}}qa.exports=Kc()(ht);var{formatters:LI}=qa.exports;LI.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var lw=w((yj,aw)=>{"use strict";aw.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",i=e.indexOf(r+t),n=e.indexOf("--");return i!==-1&&(n===-1||i<n)}});var hw=w((wj,cw)=>{"use strict";var $I=require("os"),uw=require("tty"),xt=lw(),{env:Ie}=process,ei;xt("no-color")||xt("no-colors")||xt("color=false")||xt("color=never")?ei=0:(xt("color")||xt("colors")||xt("color=true")||xt("color=always"))&&(ei=1);"FORCE_COLOR"in Ie&&(Ie.FORCE_COLOR==="true"?ei=1:Ie.FORCE_COLOR==="false"?ei=0:ei=Ie.FORCE_COLOR.length===0?1:Math.min(parseInt(Ie.FORCE_COLOR,10),3));function Jc(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Zc(t,e){if(ei===0)return 0;if(xt("color=16m")||xt("color=full")||xt("color=truecolor"))return 3;if(xt("color=256"))return 2;if(t&&!e&&ei===void 0)return 0;let r=ei||0;if(Ie.TERM==="dumb")return r;if(process.platform==="win32"){let i=$I.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in Ie)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(i=>i in Ie)||Ie.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Ie)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ie.TEAMCITY_VERSION)?1:0;if(Ie.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ie){let i=parseInt((Ie.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ie.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ie.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ie.TERM)||"COLORTERM"in Ie?1:r}function kI(t){let e=Zc(t,t&&t.isTTY);return Jc(e)}cw.exports={supportsColor:kI,stdout:Jc(Zc(!0,uw.isatty(1))),stderr:Jc(Zc(!0,uw.isatty(2)))}});var dw=w((Ne,Ua)=>{var qI=require("tty"),Ma=require("util");Ne.init=GI;Ne.log=jI;Ne.formatArgs=UI;Ne.save=HI;Ne.load=WI;Ne.useColors=MI;Ne.destroy=Ma.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ne.colors=[6,2,3,4,5,1];try{let t=hw();t&&(t.stderr||t).level>=2&&(Ne.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ne.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[e];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),t[r]=i,t},{});function MI(){return"colors"in Ne.inspectOpts?!!Ne.inspectOpts.colors:qI.isatty(process.stderr.fd)}function UI(t){let{namespace:e,useColors:r}=this;if(r){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),s="  ".concat(n,";1m").concat(e," \x1B[0m");t[0]=s+t[0].split("\n").join("\n"+s),t.push(n+"m+"+Ua.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=BI()+e+" "+t[0]}function BI(){return Ne.inspectOpts.hideDate?"":new Date().toISOString()+" "}function jI(...t){return process.stderr.write(Ma.formatWithOptions(Ne.inspectOpts,...t)+"\n")}function HI(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function WI(){return process.env.DEBUG}function GI(t){t.inspectOpts={};let e=Object.keys(Ne.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ne.inspectOpts[e[r]]}Ua.exports=Kc()(Ne);var{formatters:fw}=Ua.exports;fw.o=function(t){return this.inspectOpts.colors=this.useColors,Ma.inspect(t,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")};fw.O=function(t){return this.inspectOpts.colors=this.useColors,Ma.inspect(t,this.inspectOpts)}});var pw=w((Aj,eh)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?eh.exports=ow():eh.exports=dw()});var rh=w(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.ProgressCallbackTransform=void 0;var zI=require("stream"),th=class extends zI.Transform{constructor(e,r,i){super(),this.total=e,this.cancellationToken=r,this.onProgress=i,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(e,r,i){if(this.cancellationToken.cancelled){i(new Error("cancelled"),null);return}this.transferred+=e.length,this.delta+=e.length;let n=Date.now();n>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=n+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((n-this.start)/1e3))}),this.delta=0),i(null,e)}_flush(e){if(this.cancellationToken.cancelled){e(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,e(null)}};Ba.ProgressCallbackTransform=th});var ww=w(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.DigestTransform=Je.HttpExecutor=Je.HttpError=void 0;Je.createHttpError=ih;Je.parseJson=eN;Je.configureRequestOptionsFromUrl=yw;Je.configureRequestUrl=sh;Je.safeGetHeader=Un;Je.configureRequestOptions=ja;Je.safeStringifyJson=Ha;var VI=require("crypto"),YI=pw(),QI=require("fs"),XI=require("stream"),gw=require("url"),KI=$a(),mw=ao(),JI=rh(),lo=(0,YI.default)("electron-builder");function ih(t,e=null){return new uo(t.statusCode||-1,"".concat(t.statusCode," ").concat(t.statusMessage)+(e==null?"":"\n"+JSON.stringify(e,null,"  "))+"\nHeaders: "+Ha(t.headers),e)}var ZI=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]),uo=class extends Error{constructor(e,r="HTTP error: ".concat(ZI.get(e)||e),i=null){super(r),this.statusCode=e,this.description=i,this.name="HttpError",this.code="HTTP_ERROR_".concat(e)}isServerError(){return this.statusCode>=500&&this.statusCode<=599}};Je.HttpError=uo;function eN(t){return t.then(e=>e==null||e.length===0?null:JSON.parse(e))}var nh=class t{constructor(){this.maxRedirects=10}request(e,r=new KI.CancellationToken,i){ja(e);let n=i==null?void 0:JSON.stringify(i),s=n?Buffer.from(n):void 0;if(s!=null){lo(n);let{headers:o,...a}=e;e={method:"post",headers:{"Content-Type":"application/json","Content-Length":s.length,...o},...a}}return this.doApiRequest(e,r,o=>o.end(s))}doApiRequest(e,r,i,n=0){return lo.enabled&&lo("Request: ".concat(Ha(e))),r.createPromise((s,o,a)=>{let l=this.createRequest(e,c=>{try{this.handleResponse(c,e,r,s,o,n,i)}catch(u){o(u)}});this.addErrorAndTimeoutHandlers(l,o,e.timeout),this.addRedirectHandlers(l,e,o,n,c=>{this.doApiRequest(c,r,i,n).then(s).catch(o)}),i(l,o),a(()=>l.abort())})}addRedirectHandlers(e,r,i,n,s){}addErrorAndTimeoutHandlers(e,r,i=60*1e3){this.addTimeOutHandler(e,r,i),e.on("error",r),e.on("aborted",()=>{r(new Error("Request has been aborted by the server"))})}handleResponse(e,r,i,n,s,o,a){var l;if(lo.enabled&&lo("Response: ".concat(e.statusCode," ").concat(e.statusMessage,", request options: ").concat(Ha(r))),e.statusCode===404){s(ih(e,"method: ".concat(r.method||"GET"," url: ").concat(r.protocol||"https:","//").concat(r.hostname).concat(r.port?":".concat(r.port):"").concat(r.path,"\n\nPlease double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.\n")));return}else if(e.statusCode===204){n();return}let c=(l=e.statusCode)!==null&&l!==void 0?l:0,u=c>=300&&c<400,h=Un(e,"location");if(u&&h!=null){if(o>this.maxRedirects){s(this.createMaxRedirectError());return}this.doApiRequest(t.prepareRedirectUrlOptions(h,r),i,a,o).then(n).catch(s);return}e.setEncoding("utf8");let f="";e.on("error",s),e.on("data",d=>f+=d),e.on("end",()=>{try{if(e.statusCode!=null&&e.statusCode>=400){let d=Un(e,"content-type"),y=d!=null&&(Array.isArray(d)?d.find(A=>A.includes("json"))!=null:d.includes("json"));s(ih(e,"method: ".concat(r.method||"GET"," url: ").concat(r.protocol||"https:","//").concat(r.hostname).concat(r.port?":".concat(r.port):"").concat(r.path,"\n\n          Data:\n          ").concat(y?JSON.stringify(JSON.parse(f)):f,"\n          ")))}else n(f.length===0?null:f)}catch(d){s(d)}})}async downloadToBuffer(e,r){return await r.cancellationToken.createPromise((i,n,s)=>{let o=[],a={headers:r.headers||void 0,redirect:"manual"};sh(e,a),ja(a),this.doDownload(a,{destination:null,options:r,onCancel:s,callback:l=>{l==null?i(Buffer.concat(o)):n(l)},responseHandler:(l,c)=>{let u=0;l.on("data",h=>{if(u+=h.length,u>524288e3){c(new Error("Maximum allowed size is 500 MB"));return}o.push(h)}),l.on("end",()=>{c(null)})}},0)})}doDownload(e,r,i){let n=this.createRequest(e,s=>{if(s.statusCode>=400){r.callback(new Error('Cannot download "'.concat(e.protocol||"https:","//").concat(e.hostname).concat(e.path,'", status ').concat(s.statusCode,": ").concat(s.statusMessage)));return}s.on("error",r.callback);let o=Un(s,"location");if(o!=null){i<this.maxRedirects?this.doDownload(t.prepareRedirectUrlOptions(o,e),r,i++):r.callback(this.createMaxRedirectError());return}r.responseHandler==null?rN(r,s):r.responseHandler(s,r.callback)});this.addErrorAndTimeoutHandlers(n,r.callback,e.timeout),this.addRedirectHandlers(n,e,r.callback,i,s=>{this.doDownload(s,r,i++)}),n.end()}createMaxRedirectError(){return new Error("Too many redirects (> ".concat(this.maxRedirects,")"))}addTimeOutHandler(e,r,i){e.on("socket",n=>{n.setTimeout(i,()=>{e.abort(),r(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(e,r){let i=yw(e,{...r}),n=i.headers;if(n?.authorization){let s=new gw.URL(e);(s.hostname.endsWith(".amazonaws.com")||s.searchParams.has("X-Amz-Credential"))&&delete n.authorization}return i}static retryOnServerError(e,r=3){for(let i=0;;i++)try{return e()}catch(n){if(i<r&&(n instanceof uo&&n.isServerError()||n.code==="EPIPE"))continue;throw n}}};Je.HttpExecutor=nh;function yw(t,e){let r=ja(e);return sh(new gw.URL(t),r),r}function sh(t,e){e.protocol=t.protocol,e.hostname=t.hostname,t.port?e.port=t.port:e.port&&delete e.port,e.path=t.pathname+t.search}var co=class extends XI.Transform{get actual(){return this._actual}constructor(e,r="sha512",i="base64"){super(),this.expected=e,this.algorithm=r,this.encoding=i,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,VI.createHash)(r)}_transform(e,r,i){this.digester.update(e),i(null,e)}_flush(e){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(r){e(r);return}e(null)}validate(){if(this._actual==null)throw(0,mw.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,mw.newError)("".concat(this.algorithm," checksum mismatch, expected ").concat(this.expected,", got ").concat(this._actual),"ERR_CHECKSUM_MISMATCH");return null}};Je.DigestTransform=co;function tN(t,e,r){return t!=null&&e!=null&&t!==e?(r(new Error("checksum mismatch: expected ".concat(e," but got ").concat(t," (X-Checksum-Sha2 header)"))),!1):!0}function Un(t,e){let r=t.headers[e];return r==null?null:Array.isArray(r)?r.length===0?null:r[r.length-1]:r}function rN(t,e){if(!tN(Un(e,"X-Checksum-Sha2"),t.options.sha2,t.callback))return;let r=[];if(t.options.onProgress!=null){let o=Un(e,"content-length");o!=null&&r.push(new JI.ProgressCallbackTransform(parseInt(o,10),t.options.cancellationToken,t.options.onProgress))}let i=t.options.sha512;i!=null?r.push(new co(i,"sha512",i.length===128&&!i.includes("+")&&!i.includes("Z")&&!i.includes("=")?"hex":"base64")):t.options.sha2!=null&&r.push(new co(t.options.sha2,"sha256","hex"));let n=(0,QI.createWriteStream)(t.destination);r.push(n);let s=e;for(let o of r)o.on("error",a=>{n.close(),t.options.cancellationToken.cancelled||t.callback(a)}),s=s.pipe(o);n.on("finish",()=>{n.close(t.callback)})}function ja(t,e,r){r!=null&&(t.method=r),t.headers={...t.headers};let i=t.headers;return e!=null&&(i.authorization=e.startsWith("Basic")||e.startsWith("Bearer")?e:"token ".concat(e)),i["User-Agent"]==null&&(i["User-Agent"]="electron-builder"),(r==null||r==="GET"||i["Cache-Control"]==null)&&(i["Cache-Control"]="no-cache"),t.protocol==null&&process.versions.electron!=null&&(t.protocol="https:"),t}function Ha(t,e){return JSON.stringify(t,(r,i)=>r.endsWith("Authorization")||r.endsWith("authorization")||r.endsWith("Password")||r.endsWith("PASSWORD")||r.endsWith("Token")||r.includes("password")||r.includes("token")||e!=null&&e.has(r)?"<stripped sensitive data>":i,2)}});var Ew=w(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.MemoLazy=void 0;var oh=class{constructor(e,r){this.selector=e,this.creator=r,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){let e=this.selector();if(this._value!==void 0&&Aw(this.selected,e))return this._value;this.selected=e;let r=this.creator(e);return this.value=r,r}set value(e){this._value=e}};Wa.MemoLazy=oh;function Aw(t,e){if(typeof t=="object"&&t!==null&&(typeof e=="object"&&e!==null)){let n=Object.keys(t),s=Object.keys(e);return n.length===s.length&&n.every(o=>Aw(t[o],e[o]))}return t===e}});var bw=w(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.githubUrl=iN;Ga.getS3LikeProviderBaseUrl=nN;function iN(t,e="github.com"){return"".concat(t.protocol||"https","://").concat(t.host||e)}function nN(t){let e=t.provider;if(e==="s3")return sN(t);if(e==="spaces")return oN(t);throw new Error("Not supported provider: ".concat(e))}function sN(t){let e;if(t.accelerate==!0)e="https://".concat(t.bucket,".s3-accelerate.amazonaws.com");else if(t.endpoint!=null)e="".concat(t.endpoint,"/").concat(t.bucket);else if(t.bucket.includes(".")){if(t.region==null)throw new Error('Bucket name "'.concat(t.bucket,'" includes a dot, but S3 region is missing'));t.region==="us-east-1"?e="https://s3.amazonaws.com/".concat(t.bucket):e="https://s3-".concat(t.region,".amazonaws.com/").concat(t.bucket)}else t.region==="cn-north-1"?e="https://".concat(t.bucket,".s3.").concat(t.region,".amazonaws.com.cn"):e="https://".concat(t.bucket,".s3.amazonaws.com");return Sw(e,t.path)}function Sw(t,e){return e!=null&&e.length>0&&(e.startsWith("/")||(t+="/"),t+=e),t}function oN(t){if(t.name==null)throw new Error("name is missing");if(t.region==null)throw new Error("region is missing");return Sw("https://".concat(t.name,".").concat(t.region,".digitaloceanspaces.com"),t.path)}});var vw=w(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.retry=_w;var aN=$a();async function _w(t,e,r,i=0,n=0,s){var o;let a=new aN.CancellationToken;try{return await t()}catch(l){if((!((o=s?.(l))!==null&&o!==void 0)||o)&&e>0&&!a.cancelled)return await new Promise(c=>setTimeout(c,r+i*n)),await _w(t,e-1,r,i,n+1,s);throw l}}});var Ow=w(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.parseDn=lN;function lN(t){let e=!1,r=null,i="",n=0;t=t.trim();let s=new Map;for(let o=0;o<=t.length;o++){if(o===t.length){r!==null&&s.set(r,i);break}let a=t[o];if(e){if(a==='"'){e=!1;continue}}else{if(a==='"'){e=!0;continue}if(a==="\\"){o++;let l=parseInt(t.slice(o,o+2),16);Number.isNaN(l)?i+=t[o]:(o++,i+=String.fromCharCode(l));continue}if(r===null&&a==="="){r=i,i="";continue}if(a===","||a===";"||a==="+"){r!==null&&s.set(r,i),r=null,i="";continue}}if(a===" "&&!e){if(i.length===0)continue;if(o>n){let l=o;for(;t[l]===" ";)l++;n=l}if(n>=t.length||t[n]===","||t[n]===";"||r===null&&t[n]==="="||r!==null&&t[n]==="+"){o=n-1;continue}}i+=a}return s}});var Nw=w(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.nil=Bn.UUID=void 0;var Rw=require("crypto"),Iw=ao(),uN="options.name must be either a string or a Buffer",Tw=(0,Rw.randomBytes)(16);Tw[0]=Tw[0]|1;var za={},Y=[];for(let t=0;t<256;t++){let e=(t+256).toString(16).substr(1);za[e]=t,Y[t]=e}var Mi=class t{constructor(e){this.ascii=null,this.binary=null;let r=t.check(e);if(!r)throw new Error("not a UUID");this.version=r.version,r.format==="ascii"?this.ascii=e:this.binary=e}static v5(e,r){return cN(e,"sha1",80,r)}toString(){return this.ascii==null&&(this.ascii=hN(this.binary)),this.ascii}inspect(){return"UUID v".concat(this.version," ").concat(this.toString())}static check(e,r=0){if(typeof e=="string")return e=e.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(e)?e==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(za[e[14]+e[15]]&240)>>4,variant:Cw((za[e[19]+e[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(e)){if(e.length<r+16)return!1;let i=0;for(;i<16&&e[r+i]===0;i++);return i===16?{version:void 0,variant:"nil",format:"binary"}:{version:(e[r+6]&240)>>4,variant:Cw((e[r+8]&224)>>5),format:"binary"}}throw(0,Iw.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(e){let r=Buffer.allocUnsafe(16),i=0;for(let n=0;n<16;n++)r[n]=za[e[i++]+e[i++]],(n===3||n===5||n===7||n===9)&&(i+=1);return r}};Bn.UUID=Mi;Mi.OID=Mi.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function Cw(t){switch(t){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var ho;(function(t){t[t.ASCII=0]="ASCII",t[t.BINARY=1]="BINARY",t[t.OBJECT=2]="OBJECT"})(ho||(ho={}));function cN(t,e,r,i,n=ho.ASCII){let s=(0,Rw.createHash)(e);if(typeof t!="string"&&!Buffer.isBuffer(t))throw(0,Iw.newError)(uN,"ERR_INVALID_UUID_NAME");s.update(i),s.update(t);let a=s.digest(),l;switch(n){case ho.BINARY:a[6]=a[6]&15|r,a[8]=a[8]&63|128,l=a;break;case ho.OBJECT:a[6]=a[6]&15|r,a[8]=a[8]&63|128,l=new Mi(a);break;default:l=Y[a[0]]+Y[a[1]]+Y[a[2]]+Y[a[3]]+"-"+Y[a[4]]+Y[a[5]]+"-"+Y[a[6]&15|r]+Y[a[7]]+"-"+Y[a[8]&63|128]+Y[a[9]]+"-"+Y[a[10]]+Y[a[11]]+Y[a[12]]+Y[a[13]]+Y[a[14]]+Y[a[15]];break}return l}function hN(t){return Y[t[0]]+Y[t[1]]+Y[t[2]]+Y[t[3]]+"-"+Y[t[4]]+Y[t[5]]+"-"+Y[t[6]]+Y[t[7]]+"-"+Y[t[8]]+Y[t[9]]+"-"+Y[t[10]]+Y[t[11]]+Y[t[12]]+Y[t[13]]+Y[t[14]]+Y[t[15]]}Bn.nil=new Mi("00000000-0000-0000-0000-000000000000")});var xw=w(Va=>{(function(t){t.parser=function(g,m){return new r(g,m)},t.SAXParser=r,t.SAXStream=c,t.createStream=l,t.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(g,m){if(!(this instanceof r))return new r(g,m);var C=this;n(C),C.q=C.c="",C.bufferCheckPosition=t.MAX_BUFFER_LENGTH,C.opt=m||{},C.opt.lowercase=C.opt.lowercase||C.opt.lowercasetags,C.looseCase=C.opt.lowercase?"toLowerCase":"toUpperCase",C.tags=[],C.closed=C.closedRoot=C.sawRoot=!1,C.tag=C.error=null,C.strict=!!g,C.noscript=!!(g||C.opt.noscript),C.state=S.BEGIN,C.strictEntities=C.opt.strictEntities,C.ENTITIES=C.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),C.attribList=[],C.opt.xmlns&&(C.ns=Object.create(y)),C.opt.unquotedAttributeValues===void 0&&(C.opt.unquotedAttributeValues=!g),C.trackPosition=C.opt.position!==!1,C.trackPosition&&(C.position=C.line=C.column=0),G(C,"onready")}Object.create||(Object.create=function(g){function m(){}m.prototype=g;var C=new m;return C}),Object.keys||(Object.keys=function(g){var m=[];for(var C in g)g.hasOwnProperty(C)&&m.push(C);return m});function i(g){for(var m=Math.max(t.MAX_BUFFER_LENGTH,10),C=0,b=0,Z=e.length;b<Z;b++){var ve=g[e[b]].length;if(ve>m)switch(e[b]){case"textNode":K(g);break;case"cdata":P(g,"oncdata",g.cdata),g.cdata="";break;case"script":P(g,"onscript",g.script),g.script="";break;default:J(g,"Max buffer length exceeded: "+e[b])}C=Math.max(C,ve)}var Oe=t.MAX_BUFFER_LENGTH-C;g.bufferCheckPosition=Oe+g.position}function n(g){for(var m=0,C=e.length;m<C;m++)g[e[m]]=""}function s(g){K(g),g.cdata!==""&&(P(g,"oncdata",g.cdata),g.cdata=""),g.script!==""&&(P(g,"onscript",g.script),g.script="")}r.prototype={end:function(){V(this)},write:HT,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var o;try{o=require("stream").Stream}catch{o=function(){}}o||(o=function(){});var a=t.EVENTS.filter(function(g){return g!=="error"&&g!=="end"});function l(g,m){return new c(g,m)}function c(g,m){if(!(this instanceof c))return new c(g,m);o.apply(this),this._parser=new r(g,m),this.writable=!0,this.readable=!0;var C=this;this._parser.onend=function(){C.emit("end")},this._parser.onerror=function(b){C.emit("error",b),C._parser.error=null},this._decoder=null,a.forEach(function(b){Object.defineProperty(C,"on"+b,{get:function(){return C._parser["on"+b]},set:function(Z){if(!Z)return C.removeAllListeners(b),C._parser["on"+b]=Z,Z;C.on(b,Z)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(o.prototype,{constructor:{value:c}}),c.prototype.write=function(g){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(g)){if(!this._decoder){var m=require("string_decoder").StringDecoder;this._decoder=new m("utf8")}g=this._decoder.write(g)}return this._parser.write(g.toString()),this.emit("data",g),!0},c.prototype.end=function(g){return g&&g.length&&this.write(g),this._parser.end(),!0},c.prototype.on=function(g,m){var C=this;return!C._parser["on"+g]&&a.indexOf(g)!==-1&&(C._parser["on"+g]=function(){var b=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,g),C.emit.apply(C,b)}),o.prototype.on.call(C,g,m)};var u="[CDATA[",h="DOCTYPE",f="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/2000/xmlns/",y={xml:f,xmlns:d},A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function I(g){return g===" "||g==="\n"||g==="\r"||g==="	"}function L(g){return g==='"'||g==="'"}function oe(g){return g===">"||I(g)}function B(g,m){return g.test(m)}function z(g,m){return!B(g,m)}var S=0;t.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(g){var m=t.ENTITIES[g],C=typeof m=="number"?String.fromCharCode(m):m;t.ENTITIES[g]=C});for(var D in t.STATE)t.STATE[t.STATE[D]]=D;S=t.STATE;function G(g,m,C){g[m]&&g[m](C)}function P(g,m,C){g.textNode&&K(g),G(g,m,C)}function K(g){g.textNode=pe(g.opt,g.textNode),g.textNode&&G(g,"ontext",g.textNode),g.textNode=""}function pe(g,m){return g.trim&&(m=m.trim()),g.normalize&&(m=m.replace(/\s+/g," ")),m}function J(g,m){return K(g),g.trackPosition&&(m+="\nLine: "+g.line+"\nColumn: "+g.column+"\nChar: "+g.c),m=new Error(m),g.error=m,G(g,"onerror",m),g}function V(g){return g.sawRoot&&!g.closedRoot&&M(g,"Unclosed root tag"),g.state!==S.BEGIN&&g.state!==S.BEGIN_WHITESPACE&&g.state!==S.TEXT&&J(g,"Unexpected end"),K(g),g.c="",g.closed=!0,G(g,"onend"),r.call(g,g.strict,g.opt),g}function M(g,m){if(typeof g!="object"||!(g instanceof r))throw new Error("bad call to strictFail");g.strict&&J(g,m)}function te(g){g.strict||(g.tagName=g.tagName[g.looseCase]());var m=g.tags[g.tags.length-1]||g,C=g.tag={name:g.tagName,attributes:{}};g.opt.xmlns&&(C.ns=m.ns),g.attribList.length=0,P(g,"onopentagstart",C)}function we(g,m){var C=g.indexOf(":"),b=C<0?["",g]:g.split(":"),Z=b[0],ve=b[1];return m&&g==="xmlns"&&(Z="xmlns",ve=""),{prefix:Z,local:ve}}function re(g){if(g.strict||(g.attribName=g.attribName[g.looseCase]()),g.attribList.indexOf(g.attribName)!==-1||g.tag.attributes.hasOwnProperty(g.attribName)){g.attribName=g.attribValue="";return}if(g.opt.xmlns){var m=we(g.attribName,!0),C=m.prefix,b=m.local;if(C==="xmlns")if(b==="xml"&&g.attribValue!==f)M(g,"xml: prefix must be bound to "+f+"\nActual: "+g.attribValue);else if(b==="xmlns"&&g.attribValue!==d)M(g,"xmlns: prefix must be bound to "+d+"\nActual: "+g.attribValue);else{var Z=g.tag,ve=g.tags[g.tags.length-1]||g;Z.ns===ve.ns&&(Z.ns=Object.create(ve.ns)),Z.ns[b]=g.attribValue}g.attribList.push([g.attribName,g.attribValue])}else g.tag.attributes[g.attribName]=g.attribValue,P(g,"onattribute",{name:g.attribName,value:g.attribValue});g.attribName=g.attribValue=""}function zr(g,m){if(g.opt.xmlns){var C=g.tag,b=we(g.tagName);C.prefix=b.prefix,C.local=b.local,C.uri=C.ns[b.prefix]||"",C.prefix&&!C.uri&&(M(g,"Unbound namespace prefix: "+JSON.stringify(g.tagName)),C.uri=b.prefix);var Z=g.tags[g.tags.length-1]||g;C.ns&&Z.ns!==C.ns&&Object.keys(C.ns).forEach(function(Sm){P(g,"onopennamespace",{prefix:Sm,uri:C.ns[Sm]})});for(var ve=0,Oe=g.attribList.length;ve<Oe;ve++){var st=g.attribList[ve],ot=st[0],_n=st[1],$e=we(ot,!0),pr=$e.prefix,WT=$e.local,Em=pr===""?"":C.ns[pr]||"",Sc={name:ot,value:_n,prefix:pr,local:WT,uri:Em};pr&&pr!=="xmlns"&&!Em&&(M(g,"Unbound namespace prefix: "+JSON.stringify(pr)),Sc.uri=pr),g.tag.attributes[ot]=Sc,P(g,"onattribute",Sc)}g.attribList.length=0}g.tag.isSelfClosing=!!m,g.sawRoot=!0,g.tags.push(g.tag),P(g,"onopentag",g.tag),m||(!g.noscript&&g.tagName.toLowerCase()==="script"?g.state=S.SCRIPT:g.state=S.TEXT,g.tag=null,g.tagName=""),g.attribName=g.attribValue="",g.attribList.length=0}function Ec(g){if(!g.tagName){M(g,"Weird empty close tag."),g.textNode+="</>",g.state=S.TEXT;return}if(g.script){if(g.tagName!=="script"){g.script+="</"+g.tagName+">",g.tagName="",g.state=S.SCRIPT;return}P(g,"onscript",g.script),g.script=""}var m=g.tags.length,C=g.tagName;g.strict||(C=C[g.looseCase]());for(var b=C;m--;){var Z=g.tags[m];if(Z.name!==b)M(g,"Unexpected close tag");else break}if(m<0){M(g,"Unmatched closing tag: "+g.tagName),g.textNode+="</"+g.tagName+">",g.state=S.TEXT;return}g.tagName=C;for(var ve=g.tags.length;ve-- >m;){var Oe=g.tag=g.tags.pop();g.tagName=g.tag.name,P(g,"onclosetag",g.tagName);var st={};for(var ot in Oe.ns)st[ot]=Oe.ns[ot];var _n=g.tags[g.tags.length-1]||g;g.opt.xmlns&&Oe.ns!==_n.ns&&Object.keys(Oe.ns).forEach(function($e){var pr=Oe.ns[$e];P(g,"onclosenamespace",{prefix:$e,uri:pr})})}m===0&&(g.closedRoot=!0),g.tagName=g.attribValue=g.attribName="",g.attribList.length=0,g.state=S.TEXT}function jT(g){var m=g.entity,C=m.toLowerCase(),b,Z="";return g.ENTITIES[m]?g.ENTITIES[m]:g.ENTITIES[C]?g.ENTITIES[C]:(m=C,m.charAt(0)==="#"&&(m.charAt(1)==="x"?(m=m.slice(2),b=parseInt(m,16),Z=b.toString(16)):(m=m.slice(1),b=parseInt(m,10),Z=b.toString(10))),m=m.replace(/^0+/,""),isNaN(b)||Z.toLowerCase()!==m?(M(g,"Invalid character entity"),"&"+g.entity+";"):String.fromCodePoint(b))}function wm(g,m){m==="<"?(g.state=S.OPEN_WAKA,g.startTagPosition=g.position):I(m)||(M(g,"Non-whitespace before first tag."),g.textNode=m,g.state=S.TEXT)}function Am(g,m){var C="";return m<g.length&&(C=g.charAt(m)),C}function HT(g){var m=this;if(this.error)throw this.error;if(m.closed)return J(m,"Cannot write after close. Assign an onready handler.");if(g===null)return V(m);typeof g=="object"&&(g=g.toString());for(var C=0,b="";b=Am(g,C++),m.c=b,!!b;)switch(m.trackPosition&&(m.position++,b==="\n"?(m.line++,m.column=0):m.column++),m.state){case S.BEGIN:if(m.state=S.BEGIN_WHITESPACE,b==="\uFEFF")continue;wm(m,b);continue;case S.BEGIN_WHITESPACE:wm(m,b);continue;case S.TEXT:if(m.sawRoot&&!m.closedRoot){for(var Z=C-1;b&&b!=="<"&&b!=="&";)b=Am(g,C++),b&&m.trackPosition&&(m.position++,b==="\n"?(m.line++,m.column=0):m.column++);m.textNode+=g.substring(Z,C-1)}b==="<"&&!(m.sawRoot&&m.closedRoot&&!m.strict)?(m.state=S.OPEN_WAKA,m.startTagPosition=m.position):(!I(b)&&(!m.sawRoot||m.closedRoot)&&M(m,"Text data outside of root node."),b==="&"?m.state=S.TEXT_ENTITY:m.textNode+=b);continue;case S.SCRIPT:b==="<"?m.state=S.SCRIPT_ENDING:m.script+=b;continue;case S.SCRIPT_ENDING:b==="/"?m.state=S.CLOSE_TAG:(m.script+="<"+b,m.state=S.SCRIPT);continue;case S.OPEN_WAKA:if(b==="!")m.state=S.SGML_DECL,m.sgmlDecl="";else if(!I(b))if(B(A,b))m.state=S.OPEN_TAG,m.tagName=b;else if(b==="/")m.state=S.CLOSE_TAG,m.tagName="";else if(b==="?")m.state=S.PROC_INST,m.procInstName=m.procInstBody="";else{if(M(m,"Unencoded <"),m.startTagPosition+1<m.position){var ve=m.position-m.startTagPosition;b=new Array(ve).join(" ")+b}m.textNode+="<"+b,m.state=S.TEXT}continue;case S.SGML_DECL:if(m.sgmlDecl+b==="--"){m.state=S.COMMENT,m.comment="",m.sgmlDecl="";continue}m.doctype&&m.doctype!==!0&&m.sgmlDecl?(m.state=S.DOCTYPE_DTD,m.doctype+="<!"+m.sgmlDecl+b,m.sgmlDecl=""):(m.sgmlDecl+b).toUpperCase()===u?(P(m,"onopencdata"),m.state=S.CDATA,m.sgmlDecl="",m.cdata=""):(m.sgmlDecl+b).toUpperCase()===h?(m.state=S.DOCTYPE,(m.doctype||m.sawRoot)&&M(m,"Inappropriately located doctype declaration"),m.doctype="",m.sgmlDecl=""):b===">"?(P(m,"onsgmldeclaration",m.sgmlDecl),m.sgmlDecl="",m.state=S.TEXT):(L(b)&&(m.state=S.SGML_DECL_QUOTED),m.sgmlDecl+=b);continue;case S.SGML_DECL_QUOTED:b===m.q&&(m.state=S.SGML_DECL,m.q=""),m.sgmlDecl+=b;continue;case S.DOCTYPE:b===">"?(m.state=S.TEXT,P(m,"ondoctype",m.doctype),m.doctype=!0):(m.doctype+=b,b==="["?m.state=S.DOCTYPE_DTD:L(b)&&(m.state=S.DOCTYPE_QUOTED,m.q=b));continue;case S.DOCTYPE_QUOTED:m.doctype+=b,b===m.q&&(m.q="",m.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:b==="]"?(m.doctype+=b,m.state=S.DOCTYPE):b==="<"?(m.state=S.OPEN_WAKA,m.startTagPosition=m.position):L(b)?(m.doctype+=b,m.state=S.DOCTYPE_DTD_QUOTED,m.q=b):m.doctype+=b;continue;case S.DOCTYPE_DTD_QUOTED:m.doctype+=b,b===m.q&&(m.state=S.DOCTYPE_DTD,m.q="");continue;case S.COMMENT:b==="-"?m.state=S.COMMENT_ENDING:m.comment+=b;continue;case S.COMMENT_ENDING:b==="-"?(m.state=S.COMMENT_ENDED,m.comment=pe(m.opt,m.comment),m.comment&&P(m,"oncomment",m.comment),m.comment=""):(m.comment+="-"+b,m.state=S.COMMENT);continue;case S.COMMENT_ENDED:b!==">"?(M(m,"Malformed comment"),m.comment+="--"+b,m.state=S.COMMENT):m.doctype&&m.doctype!==!0?m.state=S.DOCTYPE_DTD:m.state=S.TEXT;continue;case S.CDATA:b==="]"?m.state=S.CDATA_ENDING:m.cdata+=b;continue;case S.CDATA_ENDING:b==="]"?m.state=S.CDATA_ENDING_2:(m.cdata+="]"+b,m.state=S.CDATA);continue;case S.CDATA_ENDING_2:b===">"?(m.cdata&&P(m,"oncdata",m.cdata),P(m,"onclosecdata"),m.cdata="",m.state=S.TEXT):b==="]"?m.cdata+="]":(m.cdata+="]]"+b,m.state=S.CDATA);continue;case S.PROC_INST:b==="?"?m.state=S.PROC_INST_ENDING:I(b)?m.state=S.PROC_INST_BODY:m.procInstName+=b;continue;case S.PROC_INST_BODY:if(!m.procInstBody&&I(b))continue;b==="?"?m.state=S.PROC_INST_ENDING:m.procInstBody+=b;continue;case S.PROC_INST_ENDING:b===">"?(P(m,"onprocessinginstruction",{name:m.procInstName,body:m.procInstBody}),m.procInstName=m.procInstBody="",m.state=S.TEXT):(m.procInstBody+="?"+b,m.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:B(E,b)?m.tagName+=b:(te(m),b===">"?zr(m):b==="/"?m.state=S.OPEN_TAG_SLASH:(I(b)||M(m,"Invalid character in tag name"),m.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:b===">"?(zr(m,!0),Ec(m)):(M(m,"Forward-slash in opening tag not followed by >"),m.state=S.ATTRIB);continue;case S.ATTRIB:if(I(b))continue;b===">"?zr(m):b==="/"?m.state=S.OPEN_TAG_SLASH:B(A,b)?(m.attribName=b,m.attribValue="",m.state=S.ATTRIB_NAME):M(m,"Invalid attribute name");continue;case S.ATTRIB_NAME:b==="="?m.state=S.ATTRIB_VALUE:b===">"?(M(m,"Attribute without value"),m.attribValue=m.attribName,re(m),zr(m)):I(b)?m.state=S.ATTRIB_NAME_SAW_WHITE:B(E,b)?m.attribName+=b:M(m,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if(b==="=")m.state=S.ATTRIB_VALUE;else{if(I(b))continue;M(m,"Attribute without value"),m.tag.attributes[m.attribName]="",m.attribValue="",P(m,"onattribute",{name:m.attribName,value:""}),m.attribName="",b===">"?zr(m):B(A,b)?(m.attribName=b,m.state=S.ATTRIB_NAME):(M(m,"Invalid attribute name"),m.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(I(b))continue;L(b)?(m.q=b,m.state=S.ATTRIB_VALUE_QUOTED):(m.opt.unquotedAttributeValues||J(m,"Unquoted attribute value"),m.state=S.ATTRIB_VALUE_UNQUOTED,m.attribValue=b);continue;case S.ATTRIB_VALUE_QUOTED:if(b!==m.q){b==="&"?m.state=S.ATTRIB_VALUE_ENTITY_Q:m.attribValue+=b;continue}re(m),m.q="",m.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:I(b)?m.state=S.ATTRIB:b===">"?zr(m):b==="/"?m.state=S.OPEN_TAG_SLASH:B(A,b)?(M(m,"No whitespace between attributes"),m.attribName=b,m.attribValue="",m.state=S.ATTRIB_NAME):M(m,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!oe(b)){b==="&"?m.state=S.ATTRIB_VALUE_ENTITY_U:m.attribValue+=b;continue}re(m),b===">"?zr(m):m.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(m.tagName)b===">"?Ec(m):B(E,b)?m.tagName+=b:m.script?(m.script+="</"+m.tagName,m.tagName="",m.state=S.SCRIPT):(I(b)||M(m,"Invalid tagname in closing tag"),m.state=S.CLOSE_TAG_SAW_WHITE);else{if(I(b))continue;z(A,b)?m.script?(m.script+="</"+b,m.state=S.SCRIPT):M(m,"Invalid tagname in closing tag."):m.tagName=b}continue;case S.CLOSE_TAG_SAW_WHITE:if(I(b))continue;b===">"?Ec(m):M(m,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var Oe,st;switch(m.state){case S.TEXT_ENTITY:Oe=S.TEXT,st="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:Oe=S.ATTRIB_VALUE_QUOTED,st="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:Oe=S.ATTRIB_VALUE_UNQUOTED,st="attribValue";break}if(b===";"){var ot=jT(m);m.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(ot)?(m.entity="",m.state=Oe,m.write(ot)):(m[st]+=ot,m.entity="",m.state=Oe)}else B(m.entity.length?O:v,b)?m.entity+=b:(M(m,"Invalid character in entity name"),m[st]+="&"+m.entity+b,m.entity="",m.state=Oe);continue;default:throw new Error(m,"Unknown state: "+m.state)}return m.position>=m.bufferCheckPosition&&i(m),m}String.fromCodePoint||(function(){var g=String.fromCharCode,m=Math.floor,C=function(){var b=16384,Z=[],ve,Oe,st=-1,ot=arguments.length;if(!ot)return"";for(var _n="";++st<ot;){var $e=Number(arguments[st]);if(!isFinite($e)||$e<0||$e>1114111||m($e)!==$e)throw RangeError("Invalid code point: "+$e);$e<=65535?Z.push($e):($e-=65536,ve=($e>>10)+55296,Oe=$e%1024+56320,Z.push(ve,Oe)),(st+1===ot||Z.length>b)&&(_n+=g.apply(null,Z),Z.length=0)}return _n};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:C,configurable:!0,writable:!0}):String.fromCodePoint=C})()})(typeof Va>"u"?Va.sax={}:Va)});var Pw=w(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.XElement=void 0;fo.parseXml=mN;var fN=xw(),Ya=ao(),Qa=class{constructor(e){if(this.name=e,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!e)throw(0,Ya.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!pN(e))throw(0,Ya.newError)("Invalid element name: ".concat(e),"ERR_XML_ELEMENT_INVALID_NAME")}attribute(e){let r=this.attributes===null?null:this.attributes[e];if(r==null)throw(0,Ya.newError)('No attribute "'.concat(e,'"'),"ERR_XML_MISSED_ATTRIBUTE");return r}removeAttribute(e){this.attributes!==null&&delete this.attributes[e]}element(e,r=!1,i=null){let n=this.elementOrNull(e,r);if(n===null)throw(0,Ya.newError)(i||'No element "'.concat(e,'"'),"ERR_XML_MISSED_ELEMENT");return n}elementOrNull(e,r=!1){if(this.elements===null)return null;for(let i of this.elements)if(Dw(i,e,r))return i;return null}getElements(e,r=!1){return this.elements===null?[]:this.elements.filter(i=>Dw(i,e,r))}elementValueOrEmpty(e,r=!1){let i=this.elementOrNull(e,r);return i===null?"":i.value}};fo.XElement=Qa;var dN=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function pN(t){return dN.test(t)}function Dw(t,e,r){let i=t.name;return i===e||r===!0&&i.length===e.length&&i.toLowerCase()===e.toLowerCase()}function mN(t){let e=null,r=fN.parser(!0,{}),i=[];return r.onopentag=n=>{let s=new Qa(n.name);if(s.attributes=n.attributes,e===null)e=s;else{let o=i[i.length-1];o.elements==null&&(o.elements=[]),o.elements.push(s)}i.push(s)},r.onclosetag=()=>{i.pop()},r.ontext=n=>{i.length>0&&(i[i.length-1].value=n)},r.oncdata=n=>{let s=i[i.length-1];s.value=n,s.isCData=!0},r.onerror=n=>{throw n},r.write(t),e}});var xe=w(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.CURRENT_APP_PACKAGE_FILE_NAME=q.CURRENT_APP_INSTALLER_FILE_NAME=q.XElement=q.parseXml=q.UUID=q.parseDn=q.retry=q.githubUrl=q.getS3LikeProviderBaseUrl=q.ProgressCallbackTransform=q.MemoLazy=q.safeStringifyJson=q.safeGetHeader=q.parseJson=q.HttpExecutor=q.HttpError=q.DigestTransform=q.createHttpError=q.configureRequestUrl=q.configureRequestOptionsFromUrl=q.configureRequestOptions=q.newError=q.CancellationToken=q.CancellationError=void 0;q.asArray=bN;var Fw=$a();Object.defineProperty(q,"CancellationError",{enumerable:!0,get:function(){return Fw.CancellationError}});Object.defineProperty(q,"CancellationToken",{enumerable:!0,get:function(){return Fw.CancellationToken}});var gN=ao();Object.defineProperty(q,"newError",{enumerable:!0,get:function(){return gN.newError}});var er=ww();Object.defineProperty(q,"configureRequestOptions",{enumerable:!0,get:function(){return er.configureRequestOptions}});Object.defineProperty(q,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return er.configureRequestOptionsFromUrl}});Object.defineProperty(q,"configureRequestUrl",{enumerable:!0,get:function(){return er.configureRequestUrl}});Object.defineProperty(q,"createHttpError",{enumerable:!0,get:function(){return er.createHttpError}});Object.defineProperty(q,"DigestTransform",{enumerable:!0,get:function(){return er.DigestTransform}});Object.defineProperty(q,"HttpError",{enumerable:!0,get:function(){return er.HttpError}});Object.defineProperty(q,"HttpExecutor",{enumerable:!0,get:function(){return er.HttpExecutor}});Object.defineProperty(q,"parseJson",{enumerable:!0,get:function(){return er.parseJson}});Object.defineProperty(q,"safeGetHeader",{enumerable:!0,get:function(){return er.safeGetHeader}});Object.defineProperty(q,"safeStringifyJson",{enumerable:!0,get:function(){return er.safeStringifyJson}});var yN=Ew();Object.defineProperty(q,"MemoLazy",{enumerable:!0,get:function(){return yN.MemoLazy}});var wN=rh();Object.defineProperty(q,"ProgressCallbackTransform",{enumerable:!0,get:function(){return wN.ProgressCallbackTransform}});var Lw=bw();Object.defineProperty(q,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return Lw.getS3LikeProviderBaseUrl}});Object.defineProperty(q,"githubUrl",{enumerable:!0,get:function(){return Lw.githubUrl}});var AN=vw();Object.defineProperty(q,"retry",{enumerable:!0,get:function(){return AN.retry}});var EN=Ow();Object.defineProperty(q,"parseDn",{enumerable:!0,get:function(){return EN.parseDn}});var SN=Nw();Object.defineProperty(q,"UUID",{enumerable:!0,get:function(){return SN.UUID}});var $w=Pw();Object.defineProperty(q,"parseXml",{enumerable:!0,get:function(){return $w.parseXml}});Object.defineProperty(q,"XElement",{enumerable:!0,get:function(){return $w.XElement}});q.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe";q.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function bN(t){return t==null?[]:Array.isArray(t)?t:[t]}});var jn=w((Nj,Ui)=>{"use strict";function kw(t){return typeof t>"u"||t===null}function _N(t){return typeof t=="object"&&t!==null}function vN(t){return Array.isArray(t)?t:kw(t)?[]:[t]}function ON(t,e){var r,i,n,s;if(e)for(s=Object.keys(e),r=0,i=s.length;r<i;r+=1)n=s[r],t[n]=e[n];return t}function TN(t,e){var r="",i;for(i=0;i<e;i+=1)r+=t;return r}function CN(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}Ui.exports.isNothing=kw;Ui.exports.isObject=_N;Ui.exports.toArray=vN;Ui.exports.repeat=TN;Ui.exports.isNegativeZero=CN;Ui.exports.extend=ON});var Hn=w((xj,Mw)=>{"use strict";function qw(t,e){var r="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+="\n\n"+t.mark.snippet),i+" "+r):i}function po(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=qw(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}po.prototype=Object.create(Error.prototype);po.prototype.constructor=po;po.prototype.toString=function(e){return this.name+": "+qw(this,e)};Mw.exports=po});var Bw=w((Dj,Uw)=>{"use strict";var mo=jn();function uh(t,e,r,i,n){var s="",o="",a=Math.floor(n/2)-1;return i-e>a&&(s=" ... ",e=i-a+s.length),r-i>a&&(o=" ...",r=i+a-o.length),{str:s+t.slice(e,r).replace(/\t/g,"\u2192")+o,pos:i-e+s.length}}function ch(t,e){return mo.repeat(" ",e-t.length)+t}function RN(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],n=[],s,o=-1;s=r.exec(t.buffer);)n.push(s.index),i.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var a="",l,c,u=Math.min(t.line+e.linesAfter,n.length).toString().length,h=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=uh(t.buffer,i[o-l],n[o-l],t.position-(i[o]-i[o-l]),h),a=mo.repeat(" ",e.indent)+ch((t.line-l+1).toString(),u)+" | "+c.str+"\n"+a;for(c=uh(t.buffer,i[o],n[o],t.position,h),a+=mo.repeat(" ",e.indent)+ch((t.line+1).toString(),u)+" | "+c.str+"\n",a+=mo.repeat("-",e.indent+u+3+c.pos)+"^\n",l=1;l<=e.linesAfter&&!(o+l>=n.length);l++)c=uh(t.buffer,i[o+l],n[o+l],t.position-(i[o]-i[o+l]),h),a+=mo.repeat(" ",e.indent)+ch((t.line+l+1).toString(),u)+" | "+c.str+"\n";return a.replace(/\n$/,"")}Uw.exports=RN});var je=w((Pj,Hw)=>{"use strict";var jw=Hn(),IN=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],NN=["scalar","sequence","mapping"];function xN(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(i){e[String(i)]=r})}),e}function DN(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(IN.indexOf(r)===-1)throw new jw('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=xN(e.styleAliases||null),NN.indexOf(this.kind)===-1)throw new jw('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}Hw.exports=DN});var dh=w((Fj,Gw)=>{"use strict";var go=Hn(),hh=je();function Ww(t,e){var r=[];return t[e].forEach(function(i){var n=r.length;r.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(n=o)}),r[n]=i}),r}function PN(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function i(n){n.multi?(t.multi[n.kind].push(n),t.multi.fallback.push(n)):t[n.kind][n.tag]=t.fallback[n.tag]=n}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(i);return t}function fh(t){return this.extend(t)}fh.prototype.extend=function(e){var r=[],i=[];if(e instanceof hh)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new go("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof hh))throw new go("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new go("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new go("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof hh))throw new go("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(fh.prototype);return n.implicit=(this.implicit||[]).concat(r),n.explicit=(this.explicit||[]).concat(i),n.compiledImplicit=Ww(n,"implicit"),n.compiledExplicit=Ww(n,"explicit"),n.compiledTypeMap=PN(n.compiledImplicit,n.compiledExplicit),n};Gw.exports=fh});var ph=w((Lj,zw)=>{"use strict";var FN=je();zw.exports=new FN("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}})});var mh=w(($j,Vw)=>{"use strict";var LN=je();Vw.exports=new LN("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}})});var gh=w((kj,Yw)=>{"use strict";var $N=je();Yw.exports=new $N("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}})});var yh=w((qj,Qw)=>{"use strict";var kN=dh();Qw.exports=new kN({explicit:[ph(),mh(),gh()]})});var wh=w((Mj,Xw)=>{"use strict";var qN=je();function MN(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function UN(){return null}function BN(t){return t===null}Xw.exports=new qN("tag:yaml.org,2002:null",{kind:"scalar",resolve:MN,construct:UN,predicate:BN,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})});var Ah=w((Uj,Kw)=>{"use strict";var jN=je();function HN(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function WN(t){return t==="true"||t==="True"||t==="TRUE"}function GN(t){return Object.prototype.toString.call(t)==="[object Boolean]"}Kw.exports=new jN("tag:yaml.org,2002:bool",{kind:"scalar",resolve:HN,construct:WN,predicate:GN,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"})});var Eh=w((Bj,Jw)=>{"use strict";var zN=jn(),VN=je();function YN(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function QN(t){return 48<=t&&t<=55}function XN(t){return 48<=t&&t<=57}function KN(t){if(t===null)return!1;var e=t.length,r=0,i=!1,n;if(!e)return!1;if(n=t[r],(n==="-"||n==="+")&&(n=t[++r]),n==="0"){if(r+1===e)return!0;if(n=t[++r],n==="b"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(!YN(t.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}if(n==="o"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(!QN(t.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}}if(n==="_")return!1;for(;r<e;r++)if(n=t[r],n!=="_"){if(!XN(t.charCodeAt(r)))return!1;i=!0}return!(!i||n==="_")}function JN(t){var e=t,r=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function ZN(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!zN.isNegativeZero(t)}Jw.exports=new VN("tag:yaml.org,2002:int",{kind:"scalar",resolve:KN,construct:JN,predicate:ZN,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var Sh=w((jj,e0)=>{"use strict";var Zw=jn(),ex=je(),tx=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function rx(t){return!(t===null||!tx.test(t)||t[t.length-1]==="_")}function ix(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var nx=/^[-+]?[0-9]+e/;function sx(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Zw.isNegativeZero(t))return"-0.0";return r=t.toString(10),nx.test(r)?r.replace("e",".e"):r}function ox(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Zw.isNegativeZero(t))}e0.exports=new ex("tag:yaml.org,2002:float",{kind:"scalar",resolve:rx,construct:ix,predicate:ox,represent:sx,defaultStyle:"lowercase"})});var bh=w((Hj,t0)=>{"use strict";t0.exports=yh().extend({implicit:[wh(),Ah(),Eh(),Sh()]})});var _h=w((Wj,r0)=>{"use strict";r0.exports=bh()});var vh=w((Gj,s0)=>{"use strict";var ax=je(),i0=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),n0=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function lx(t){return t===null?!1:i0.exec(t)!==null||n0.exec(t)!==null}function ux(t){var e,r,i,n,s,o,a,l=0,c=null,u,h,f;if(e=i0.exec(t),e===null&&(e=n0.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],i=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(r,i,n));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],h=+(e[11]||0),c=(u*60+h)*6e4,e[9]==="-"&&(c=-c)),f=new Date(Date.UTC(r,i,n,s,o,a,l)),c&&f.setTime(f.getTime()-c),f}function cx(t){return t.toISOString()}s0.exports=new ax("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:lx,construct:ux,instanceOf:Date,represent:cx})});var Oh=w((zj,o0)=>{"use strict";var hx=je();function fx(t){return t==="<<"||t===null}o0.exports=new hx("tag:yaml.org,2002:merge",{kind:"scalar",resolve:fx})});var Ch=w((Vj,a0)=>{"use strict";var dx=je(),Th="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function px(t){if(t===null)return!1;var e,r,i=0,n=t.length,s=Th;for(r=0;r<n;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function mx(t){var e,r,i=t.replace(/[\r\n=]/g,""),n=i.length,s=Th,o=0,a=[];for(e=0;e<n;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(i.charAt(e));return r=n%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function gx(t){var e="",r=0,i,n,s=t.length,o=Th;for(i=0;i<s;i++)i%3===0&&i&&(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]),r=(r<<8)+t[i];return n=s%3,n===0?(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]):n===2?(e+=o[r>>10&63],e+=o[r>>4&63],e+=o[r<<2&63],e+=o[64]):n===1&&(e+=o[r>>2&63],e+=o[r<<4&63],e+=o[64],e+=o[64]),e}function yx(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}a0.exports=new dx("tag:yaml.org,2002:binary",{kind:"scalar",resolve:px,construct:mx,predicate:yx,represent:gx})});var Rh=w((Yj,l0)=>{"use strict";var wx=je(),Ax=Object.prototype.hasOwnProperty,Ex=Object.prototype.toString;function Sx(t){if(t===null)return!0;var e=[],r,i,n,s,o,a=t;for(r=0,i=a.length;r<i;r+=1){if(n=a[r],o=!1,Ex.call(n)!=="[object Object]")return!1;for(s in n)if(Ax.call(n,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function bx(t){return t!==null?t:[]}l0.exports=new wx("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Sx,construct:bx})});var Ih=w((Qj,u0)=>{"use strict";var _x=je(),vx=Object.prototype.toString;function Ox(t){if(t===null)return!0;var e,r,i,n,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1){if(i=o[e],vx.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;s[e]=[n[0],i[n[0]]]}return!0}function Tx(t){if(t===null)return[];var e,r,i,n,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1)i=o[e],n=Object.keys(i),s[e]=[n[0],i[n[0]]];return s}u0.exports=new _x("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Ox,construct:Tx})});var Nh=w((Xj,c0)=>{"use strict";var Cx=je(),Rx=Object.prototype.hasOwnProperty;function Ix(t){if(t===null)return!0;var e,r=t;for(e in r)if(Rx.call(r,e)&&r[e]!==null)return!1;return!0}function Nx(t){return t!==null?t:{}}c0.exports=new Cx("tag:yaml.org,2002:set",{kind:"mapping",resolve:Ix,construct:Nx})});var Xa=w((Kj,h0)=>{"use strict";h0.exports=_h().extend({implicit:[vh(),Oh()],explicit:[Ch(),Rh(),Ih(),Nh()]})});var C0=w((Jj,Fh)=>{"use strict";var ji=jn(),w0=Hn(),xx=Bw(),Dx=Xa(),ri=Object.prototype.hasOwnProperty,Ka=1,A0=2,E0=3,Ja=4,xh=1,Px=2,f0=3,Fx=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Lx=/[\x85\u2028\u2029]/,$x=/[,\[\]\{\}]/,S0=/^(?:!|!!|![a-z\-]+!)$/i,b0=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function d0(t){return Object.prototype.toString.call(t)}function tr(t){return t===10||t===13}function Hi(t){return t===9||t===32}function ft(t){return t===9||t===32||t===10||t===13}function Wn(t){return t===44||t===91||t===93||t===123||t===125}function kx(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function qx(t){return t===120?2:t===117?4:t===85?8:0}function Mx(t){return 48<=t&&t<=57?t-48:-1}function p0(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?"\n":t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Ux(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var _0=new Array(256),v0=new Array(256);for(Bi=0;Bi<256;Bi++)_0[Bi]=p0(Bi)?1:0,v0[Bi]=p0(Bi);var Bi;function Bx(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Dx,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function O0(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=xx(r),new w0(e,r)}function $(t,e){throw O0(t,e)}function Za(t,e){t.onWarning&&t.onWarning.call(null,O0(t,e))}var m0={YAML:function(e,r,i){var n,s,o;e.version!==null&&$(e,"duplication of %YAML directive"),i.length!==1&&$(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&$(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),o=parseInt(n[2],10),s!==1&&$(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&Za(e,"unsupported YAML version of the document")},TAG:function(e,r,i){var n,s;i.length!==2&&$(e,"TAG directive accepts exactly two arguments"),n=i[0],s=i[1],S0.test(n)||$(e,"ill-formed tag handle (first argument) of the TAG directive"),ri.call(e.tagMap,n)&&$(e,'there is a previously declared suffix for "'+n+'" tag handle'),b0.test(s)||$(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{$(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s}};function ti(t,e,r,i){var n,s,o,a;if(e<r){if(a=t.input.slice(e,r),i)for(n=0,s=a.length;n<s;n+=1)o=a.charCodeAt(n),o===9||32<=o&&o<=1114111||$(t,"expected valid JSON character");else Fx.test(a)&&$(t,"the stream contains non-printable characters");t.result+=a}}function g0(t,e,r,i){var n,s,o,a;for(ji.isObject(r)||$(t,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(r),o=0,a=n.length;o<a;o+=1)s=n[o],ri.call(e,s)||(e[s]=r[s],i[s]=!0)}function Gn(t,e,r,i,n,s,o,a,l){var c,u;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),c=0,u=n.length;c<u;c+=1)Array.isArray(n[c])&&$(t,"nested arrays are not supported inside keys"),typeof n=="object"&&d0(n[c])==="[object Object]"&&(n[c]="[object Object]");if(typeof n=="object"&&d0(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)g0(t,e,s[c],r);else g0(t,e,s,r);else!t.json&&!ri.call(r,n)&&ri.call(e,n)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,$(t,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete r[n];return e}function Dh(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):$(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function _e(t,e,r){for(var i=0,n=t.input.charCodeAt(t.position);n!==0;){for(;Hi(n);)n===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(e&&n===35)do n=t.input.charCodeAt(++t.position);while(n!==10&&n!==13&&n!==0);if(tr(n))for(Dh(t),n=t.input.charCodeAt(t.position),i++,t.lineIndent=0;n===32;)t.lineIndent++,n=t.input.charCodeAt(++t.position);else break}return r!==-1&&i!==0&&t.lineIndent<r&&Za(t,"deficient indentation"),i}function el(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||ft(r)))}function Ph(t,e){e===1?t.result+=" ":e>1&&(t.result+=ji.repeat("\n",e-1))}function jx(t,e,r){var i,n,s,o,a,l,c,u,h=t.kind,f=t.result,d;if(d=t.input.charCodeAt(t.position),ft(d)||Wn(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(n=t.input.charCodeAt(t.position+1),ft(n)||r&&Wn(n)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;d!==0;){if(d===58){if(n=t.input.charCodeAt(t.position+1),ft(n)||r&&Wn(n))break}else if(d===35){if(i=t.input.charCodeAt(t.position-1),ft(i))break}else{if(t.position===t.lineStart&&el(t)||r&&Wn(d))break;if(tr(d))if(l=t.line,c=t.lineStart,u=t.lineIndent,_e(t,!1,-1),t.lineIndent>=e){a=!0,d=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=l,t.lineStart=c,t.lineIndent=u;break}}a&&(ti(t,s,o,!1),Ph(t,t.line-l),s=o=t.position,a=!1),Hi(d)||(o=t.position+1),d=t.input.charCodeAt(++t.position)}return ti(t,s,o,!1),t.result?!0:(t.kind=h,t.result=f,!1)}function Hx(t,e){var r,i,n;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=n=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(ti(t,i,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)i=t.position,t.position++,n=t.position;else return!0;else tr(r)?(ti(t,i,n,!0),Ph(t,_e(t,!1,e)),i=n=t.position):t.position===t.lineStart&&el(t)?$(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);$(t,"unexpected end of the stream within a single quoted scalar")}function Wx(t,e){var r,i,n,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return ti(t,r,t.position,!0),t.position++,!0;if(a===92){if(ti(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),tr(a))_e(t,!1,e);else if(a<256&&_0[a])t.result+=v0[a],t.position++;else if((o=qx(a))>0){for(n=o,s=0;n>0;n--)a=t.input.charCodeAt(++t.position),(o=kx(a))>=0?s=(s<<4)+o:$(t,"expected hexadecimal character");t.result+=Ux(s),t.position++}else $(t,"unknown escape sequence");r=i=t.position}else tr(a)?(ti(t,r,i,!0),Ph(t,_e(t,!1,e)),r=i=t.position):t.position===t.lineStart&&el(t)?$(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}$(t,"unexpected end of the stream within a double quoted scalar")}function Gx(t,e){var r=!0,i,n,s,o=t.tag,a,l=t.anchor,c,u,h,f,d,y=Object.create(null),A,E,v,O;if(O=t.input.charCodeAt(t.position),O===91)u=93,d=!1,a=[];else if(O===123)u=125,d=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),O=t.input.charCodeAt(++t.position);O!==0;){if(_e(t,!0,e),O=t.input.charCodeAt(t.position),O===u)return t.position++,t.tag=o,t.anchor=l,t.kind=d?"mapping":"sequence",t.result=a,!0;r?O===44&&$(t,"expected the node content, but found ','"):$(t,"missed comma between flow collection entries"),E=A=v=null,h=f=!1,O===63&&(c=t.input.charCodeAt(t.position+1),ft(c)&&(h=f=!0,t.position++,_e(t,!0,e))),i=t.line,n=t.lineStart,s=t.position,zn(t,e,Ka,!1,!0),E=t.tag,A=t.result,_e(t,!0,e),O=t.input.charCodeAt(t.position),(f||t.line===i)&&O===58&&(h=!0,O=t.input.charCodeAt(++t.position),_e(t,!0,e),zn(t,e,Ka,!1,!0),v=t.result),d?Gn(t,a,y,E,A,v,i,n,s):h?a.push(Gn(t,null,y,E,A,v,i,n,s)):a.push(A),_e(t,!0,e),O=t.input.charCodeAt(t.position),O===44?(r=!0,O=t.input.charCodeAt(++t.position)):r=!1}$(t,"unexpected end of the stream within a flow collection")}function zx(t,e){var r,i,n=xh,s=!1,o=!1,a=e,l=0,c=!1,u,h;if(h=t.input.charCodeAt(t.position),h===124)i=!1;else if(h===62)i=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)xh===n?n=h===43?f0:Px:$(t,"repeat of a chomping mode identifier");else if((u=Mx(h))>=0)u===0?$(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?$(t,"repeat of an indentation width identifier"):(a=e+u-1,o=!0);else break;if(Hi(h)){do h=t.input.charCodeAt(++t.position);while(Hi(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!tr(h)&&h!==0)}for(;h!==0;){for(Dh(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),tr(h)){l++;continue}if(t.lineIndent<a){n===f0?t.result+=ji.repeat("\n",s?1+l:l):n===xh&&s&&(t.result+="\n");break}for(i?Hi(h)?(c=!0,t.result+=ji.repeat("\n",s?1+l:l)):c?(c=!1,t.result+=ji.repeat("\n",l+1)):l===0?s&&(t.result+=" "):t.result+=ji.repeat("\n",l):t.result+=ji.repeat("\n",s?1+l:l),s=!0,o=!0,l=0,r=t.position;!tr(h)&&h!==0;)h=t.input.charCodeAt(++t.position);ti(t,r,t.position,!1)}return!0}function y0(t,e){var r,i=t.tag,n=t.anchor,s=[],o,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$(t,"tab characters must not be used in indentation")),!(l!==45||(o=t.input.charCodeAt(t.position+1),!ft(o))));){if(a=!0,t.position++,_e(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,zn(t,e,E0,!1,!0),s.push(t.result),_e(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)$(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=i,t.anchor=n,t.kind="sequence",t.result=s,!0):!1}function Vx(t,e,r){var i,n,s,o,a,l,c=t.tag,u=t.anchor,h={},f=Object.create(null),d=null,y=null,A=null,E=!1,v=!1,O;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),O=t.input.charCodeAt(t.position);O!==0;){if(!E&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),s=t.line,(O===63||O===58)&&ft(i))O===63?(E&&(Gn(t,h,f,d,y,null,o,a,l),d=y=A=null),v=!0,E=!0,n=!0):E?(E=!1,n=!0):$(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,O=i;else{if(o=t.line,a=t.lineStart,l=t.position,!zn(t,r,A0,!1,!0))break;if(t.line===s){for(O=t.input.charCodeAt(t.position);Hi(O);)O=t.input.charCodeAt(++t.position);if(O===58)O=t.input.charCodeAt(++t.position),ft(O)||$(t,"a whitespace character is expected after the key-value separator within a block mapping"),E&&(Gn(t,h,f,d,y,null,o,a,l),d=y=A=null),v=!0,E=!1,n=!1,d=t.tag,y=t.result;else if(v)$(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(v)$(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===s||t.lineIndent>e)&&(E&&(o=t.line,a=t.lineStart,l=t.position),zn(t,e,Ja,!0,n)&&(E?y=t.result:A=t.result),E||(Gn(t,h,f,d,y,A,o,a,l),d=y=A=null),_e(t,!0,-1),O=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&O!==0)$(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return E&&Gn(t,h,f,d,y,null,o,a,l),v&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=h),v}function Yx(t){var e,r=!1,i=!1,n,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&$(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(r=!0,o=t.input.charCodeAt(++t.position)):o===33?(i=!0,n="!!",o=t.input.charCodeAt(++t.position)):n="!",e=t.position,r){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):$(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ft(o);)o===33&&(i?$(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),S0.test(n)||$(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),$x.test(s)&&$(t,"tag suffix cannot contain flow indicator characters")}s&&!b0.test(s)&&$(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{$(t,"tag name is malformed: "+s)}return r?t.tag=s:ri.call(t.tagMap,n)?t.tag=t.tagMap[n]+s:n==="!"?t.tag="!"+s:n==="!!"?t.tag="tag:yaml.org,2002:"+s:$(t,'undeclared tag handle "'+n+'"'),!0}function Qx(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&$(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!ft(r)&&!Wn(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&$(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Xx(t){var e,r,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!ft(i)&&!Wn(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&$(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),ri.call(t.anchorMap,r)||$(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],_e(t,!0,-1),!0}function zn(t,e,r,i,n){var s,o,a,l=1,c=!1,u=!1,h,f,d,y,A,E;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=Ja===r||E0===r,i&&_e(t,!0,-1)&&(c=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;Yx(t)||Qx(t);)_e(t,!0,-1)?(c=!0,a=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||n),(l===1||Ja===r)&&(Ka===r||A0===r?A=e:A=e+1,E=t.position-t.lineStart,l===1?a&&(y0(t,E)||Vx(t,E,A))||Gx(t,A)?u=!0:(o&&zx(t,A)||Hx(t,A)||Wx(t,A)?u=!0:Xx(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&$(t,"alias node should not have any properties")):jx(t,A,Ka===r)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=a&&y0(t,E))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&$(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,f=t.implicitTypes.length;h<f;h+=1)if(y=t.implicitTypes[h],y.resolve(t.result)){t.result=y.construct(t.result),t.tag=y.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(ri.call(t.typeMap[t.kind||"fallback"],t.tag))y=t.typeMap[t.kind||"fallback"][t.tag];else for(y=null,d=t.typeMap.multi[t.kind||"fallback"],h=0,f=d.length;h<f;h+=1)if(t.tag.slice(0,d[h].tag.length)===d[h].tag){y=d[h];break}y||$(t,"unknown tag !<"+t.tag+">"),t.result!==null&&y.kind!==t.kind&&$(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+y.kind+'", not "'+t.kind+'"'),y.resolve(t.result,t.tag)?(t.result=y.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):$(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function Kx(t){var e=t.position,r,i,n,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(_e(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),r=t.position;o!==0&&!ft(o);)o=t.input.charCodeAt(++t.position);for(i=t.input.slice(r,t.position),n=[],i.length<1&&$(t,"directive name must not be less than one character in length");o!==0;){for(;Hi(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!tr(o));break}if(tr(o))break;for(r=t.position;o!==0&&!ft(o);)o=t.input.charCodeAt(++t.position);n.push(t.input.slice(r,t.position))}o!==0&&Dh(t),ri.call(m0,i)?m0[i](t,i,n):Za(t,'unknown document directive "'+i+'"')}if(_e(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,_e(t,!0,-1)):s&&$(t,"directives end mark is expected"),zn(t,t.lineIndent-1,Ja,!1,!0),_e(t,!0,-1),t.checkLineBreaks&&Lx.test(t.input.slice(e,t.position))&&Za(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&el(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,_e(t,!0,-1));return}if(t.position<t.length-1)$(t,"end of the stream or a document separator is expected");else return}function T0(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+="\n"),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Bx(t,e),i=t.indexOf("\0");for(i!==-1&&(r.position=i,$(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Kx(r);return r.documents}function Jx(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var i=T0(t,r);if(typeof e!="function")return i;for(var n=0,s=i.length;n<s;n+=1)e(i[n])}function Zx(t,e){var r=T0(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new w0("expected a single document in the stream, but found more")}}Fh.exports.loadAll=Jx;Fh.exports.load=Zx});var Y0=w((Zj,V0)=>{"use strict";var il=jn(),So=Hn(),eD=Xa(),$0=Object.prototype.toString,k0=Object.prototype.hasOwnProperty,Mh=65279,tD=9,wo=10,rD=13,iD=32,nD=33,sD=34,Lh=35,oD=37,aD=38,lD=39,uD=42,q0=44,cD=45,tl=58,hD=61,fD=62,dD=63,pD=64,M0=91,U0=93,mD=96,B0=123,gD=124,j0=125,He={};He[0]="\\0";He[7]="\\a";He[8]="\\b";He[9]="\\t";He[10]="\\n";He[11]="\\v";He[12]="\\f";He[13]="\\r";He[27]="\\e";He[34]='\\"';He[92]="\\\\";He[133]="\\N";He[160]="\\_";He[8232]="\\L";He[8233]="\\P";var yD=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],wD=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function AD(t,e){var r,i,n,s,o,a,l;if(e===null)return{};for(r={},i=Object.keys(e),n=0,s=i.length;n<s;n+=1)o=i[n],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=t.compiledTypeMap.fallback[o],l&&k0.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[o]=a;return r}function ED(t){var e,r,i;if(e=t.toString(16).toUpperCase(),t<=255)r="x",i=2;else if(t<=65535)r="u",i=4;else if(t<=4294967295)r="U",i=8;else throw new So("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+il.repeat("0",i-e.length)+e}var SD=1,Ao=2;function bD(t){this.schema=t.schema||eD,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=il.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=AD(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Ao:SD,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function R0(t,e){for(var r=il.repeat(" ",e),i=0,n=-1,s="",o,a=t.length;i<a;)n=t.indexOf("\n",i),n===-1?(o=t.slice(i),i=a):(o=t.slice(i,n+1),i=n+1),o.length&&o!=="\n"&&(s+=r),s+=o;return s}function $h(t,e){return"\n"+il.repeat(" ",t.indent*e)}function _D(t,e){var r,i,n;for(r=0,i=t.implicitTypes.length;r<i;r+=1)if(n=t.implicitTypes[r],n.resolve(e))return!0;return!1}function rl(t){return t===iD||t===tD}function Eo(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Mh||65536<=t&&t<=1114111}function I0(t){return Eo(t)&&t!==Mh&&t!==rD&&t!==wo}function N0(t,e,r){var i=I0(t),n=i&&!rl(t);return(r?i:i&&t!==q0&&t!==M0&&t!==U0&&t!==B0&&t!==j0)&&t!==Lh&&!(e===tl&&!n)||I0(e)&&!rl(e)&&t===Lh||e===tl&&n}function vD(t){return Eo(t)&&t!==Mh&&!rl(t)&&t!==cD&&t!==dD&&t!==tl&&t!==q0&&t!==M0&&t!==U0&&t!==B0&&t!==j0&&t!==Lh&&t!==aD&&t!==uD&&t!==nD&&t!==gD&&t!==hD&&t!==fD&&t!==lD&&t!==sD&&t!==oD&&t!==pD&&t!==mD}function OD(t){return!rl(t)&&t!==tl}function yo(t,e){var r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function H0(t){var e=/^\n* /;return e.test(t)}var W0=1,kh=2,G0=3,z0=4,Vn=5;function TD(t,e,r,i,n,s,o,a){var l,c=0,u=null,h=!1,f=!1,d=i!==-1,y=-1,A=vD(yo(t,0))&&OD(yo(t,t.length-1));if(e||o)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=yo(t,l),!Eo(c))return Vn;A=A&&N0(c,u,a),u=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=yo(t,l),c===wo)h=!0,d&&(f=f||l-y-1>i&&t[y+1]!==" ",y=l);else if(!Eo(c))return Vn;A=A&&N0(c,u,a),u=c}f=f||d&&l-y-1>i&&t[y+1]!==" "}return!h&&!f?A&&!o&&!n(t)?W0:s===Ao?Vn:kh:r>9&&H0(t)?Vn:o?s===Ao?Vn:kh:f?z0:G0}function CD(t,e,r,i,n){t.dump=(function(){if(e.length===0)return t.quotingType===Ao?'""':"''";if(!t.noCompatMode&&(yD.indexOf(e)!==-1||wD.test(e)))return t.quotingType===Ao?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=i||t.flowLevel>-1&&r>=t.flowLevel;function l(c){return _D(t,c)}switch(TD(e,a,t.indent,o,l,t.quotingType,t.forceQuotes&&!i,n)){case W0:return e;case kh:return"'"+e.replace(/'/g,"''")+"'";case G0:return"|"+x0(e,t.indent)+D0(R0(e,s));case z0:return">"+x0(e,t.indent)+D0(R0(RD(e,o),s));case Vn:return'"'+ID(e,o)+'"';default:throw new So("impossible error: invalid scalar style")}})()}function x0(t,e){var r=H0(t)?String(e):"",i=t[t.length-1]==="\n",n=i&&(t[t.length-2]==="\n"||t==="\n"),s=n?"+":i?"":"-";return r+s+"\n"}function D0(t){return t[t.length-1]==="\n"?t.slice(0,-1):t}function RD(t,e){for(var r=/(\n+)([^\n]*)/g,i=(function(){var c=t.indexOf("\n");return c=c!==-1?c:t.length,r.lastIndex=c,P0(t.slice(0,c),e)})(),n=t[0]==="\n"||t[0]===" ",s,o;o=r.exec(t);){var a=o[1],l=o[2];s=l[0]===" ",i+=a+(!n&&!s&&l!==""?"\n":"")+P0(l,e),n=s}return i}function P0(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,i,n=0,s,o=0,a=0,l="";i=r.exec(t);)a=i.index,a-n>e&&(s=o>n?o:a,l+="\n"+t.slice(n,s),n=s+1),o=a;return l+="\n",t.length-n>e&&o>n?l+=t.slice(n,o)+"\n"+t.slice(o+1):l+=t.slice(n),l.slice(1)}function ID(t){for(var e="",r=0,i,n=0;n<t.length;r>=65536?n+=2:n++)r=yo(t,n),i=He[r],!i&&Eo(r)?(e+=t[n],r>=65536&&(e+=t[n+1])):e+=i||ED(r);return e}function ND(t,e,r){var i="",n=t.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],t.replacer&&(a=t.replacer.call(r,String(s),a)),(wr(t,e,a,!1,!1)||typeof a>"u"&&wr(t,e,null,!1,!1))&&(i!==""&&(i+=","+(t.condenseFlow?"":" ")),i+=t.dump);t.tag=n,t.dump="["+i+"]"}function F0(t,e,r,i){var n="",s=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(wr(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&wr(t,e+1,null,!0,!0,!1,!0))&&((!i||n!=="")&&(n+=$h(t,e)),t.dump&&wo===t.dump.charCodeAt(0)?n+="-":n+="- ",n+=t.dump);t.tag=s,t.dump=n||"[]"}function xD(t,e,r){var i="",n=t.tag,s=Object.keys(r),o,a,l,c,u;for(o=0,a=s.length;o<a;o+=1)u="",i!==""&&(u+=", "),t.condenseFlow&&(u+='"'),l=s[o],c=r[l],t.replacer&&(c=t.replacer.call(r,l,c)),wr(t,e,l,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),wr(t,e,c,!1,!1)&&(u+=t.dump,i+=u));t.tag=n,t.dump="{"+i+"}"}function DD(t,e,r,i){var n="",s=t.tag,o=Object.keys(r),a,l,c,u,h,f;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new So("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)f="",(!i||n!=="")&&(f+=$h(t,e)),c=o[a],u=r[c],t.replacer&&(u=t.replacer.call(r,c,u)),wr(t,e+1,c,!0,!0,!0)&&(h=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,h&&(t.dump&&wo===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,h&&(f+=$h(t,e)),wr(t,e+1,u,!0,h)&&(t.dump&&wo===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,n+=f));t.tag=s,t.dump=n||"{}"}function L0(t,e,r){var i,n,s,o,a,l;for(n=r?t.explicitTypes:t.implicitTypes,s=0,o=n.length;s<o;s+=1)if(a=n[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,$0.call(a.represent)==="[object Function]")i=a.represent(e,l);else if(k0.call(a.represent,l))i=a.represent[l](e,l);else throw new So("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=i}return!0}return!1}function wr(t,e,r,i,n,s,o){t.tag=null,t.dump=r,L0(t,r,!1)||L0(t,r,!0);var a=$0.call(t.dump),l=i,c;i&&(i=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",h,f;if(u&&(h=t.duplicates.indexOf(r),f=h!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(n=!1),f&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(u&&f&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),a==="[object Object]")i&&Object.keys(t.dump).length!==0?(DD(t,e,t.dump,n),f&&(t.dump="&ref_"+h+t.dump)):(xD(t,e,t.dump),f&&(t.dump="&ref_"+h+" "+t.dump));else if(a==="[object Array]")i&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?F0(t,e-1,t.dump,n):F0(t,e,t.dump,n),f&&(t.dump="&ref_"+h+t.dump)):(ND(t,e,t.dump),f&&(t.dump="&ref_"+h+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&CD(t,t.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new So("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function PD(t,e){var r=[],i=[],n,s;for(qh(t,r,i),n=0,s=i.length;n<s;n+=1)e.duplicates.push(r[i[n]]);e.usedDuplicates=new Array(s)}function qh(t,e,r){var i,n,s;if(t!==null&&typeof t=="object")if(n=e.indexOf(t),n!==-1)r.indexOf(n)===-1&&r.push(n);else if(e.push(t),Array.isArray(t))for(n=0,s=t.length;n<s;n+=1)qh(t[n],e,r);else for(i=Object.keys(t),n=0,s=i.length;n<s;n+=1)qh(t[i[n]],e,r)}function FD(t,e){e=e||{};var r=new bD(e);r.noRefs||PD(t,r);var i=t;return r.replacer&&(i=r.replacer.call({"":i},"",i)),wr(r,0,i,!0,!0)?r.dump+"\n":""}V0.exports.dump=FD});var nl=w((eH,Ze)=>{"use strict";var Q0=C0(),LD=Y0();function Uh(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}Ze.exports.Type=je();Ze.exports.Schema=dh();Ze.exports.FAILSAFE_SCHEMA=yh();Ze.exports.JSON_SCHEMA=bh();Ze.exports.CORE_SCHEMA=_h();Ze.exports.DEFAULT_SCHEMA=Xa();Ze.exports.load=Q0.load;Ze.exports.loadAll=Q0.loadAll;Ze.exports.dump=LD.dump;Ze.exports.YAMLException=Hn();Ze.exports.types={binary:Ch(),float:Sh(),map:gh(),null:wh(),pairs:Ih(),set:Nh(),timestamp:vh(),bool:Ah(),int:Eh(),merge:Oh(),omap:Rh(),seq:mh(),str:ph()};Ze.exports.safeLoad=Uh("safeLoad","load");Ze.exports.safeLoadAll=Uh("safeLoadAll","loadAll");Ze.exports.safeDump=Uh("safeDump","dump")});var X0=w(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.Lazy=void 0;var Bh=class{constructor(e){this._value=null,this.creator=e}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;let e=this.creator();return this.value=e,e}set value(e){this._value=e,this.creator=null}};sl.Lazy=Bh});var bo=w((rH,K0)=>{"use strict";var $D="2.0.0",kD=Number.MAX_SAFE_INTEGER||9007199254740991,qD=16,MD=250,UD=["major","premajor","minor","preminor","patch","prepatch","prerelease"];K0.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:qD,MAX_SAFE_BUILD_LENGTH:MD,MAX_SAFE_INTEGER:kD,RELEASE_TYPES:UD,SEMVER_SPEC_VERSION:$D,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var _o=w((iH,J0)=>{"use strict";var BD=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};J0.exports=BD});var Yn=w((rr,Z0)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:jh,MAX_SAFE_BUILD_LENGTH:jD,MAX_LENGTH:HD}=bo(),WD=_o();rr=Z0.exports={};var GD=rr.re=[],zD=rr.safeRe=[],N=rr.src=[],VD=rr.safeSrc=[],x=rr.t={},YD=0,Hh="[a-zA-Z0-9-]",QD=[["\\s",1],["\\d",HD],[Hh,jD]],XD=t=>{for(let[e,r]of QD)t=t.split("".concat(e,"*")).join("".concat(e,"{0,").concat(r,"}")).split("".concat(e,"+")).join("".concat(e,"{1,").concat(r,"}"));return t},H=(t,e,r)=>{let i=XD(e),n=YD++;WD(t,n,e),x[t]=n,N[n]=e,VD[n]=i,GD[n]=new RegExp(e,r?"g":void 0),zD[n]=new RegExp(i,r?"g":void 0)};H("NUMERICIDENTIFIER","0|[1-9]\\d*");H("NUMERICIDENTIFIERLOOSE","\\d+");H("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(Hh,"*"));H("MAINVERSION","(".concat(N[x.NUMERICIDENTIFIER],")\\.")+"(".concat(N[x.NUMERICIDENTIFIER],")\\.")+"(".concat(N[x.NUMERICIDENTIFIER],")"));H("MAINVERSIONLOOSE","(".concat(N[x.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(N[x.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(N[x.NUMERICIDENTIFIERLOOSE],")"));H("PRERELEASEIDENTIFIER","(?:".concat(N[x.NONNUMERICIDENTIFIER],"|").concat(N[x.NUMERICIDENTIFIER],")"));H("PRERELEASEIDENTIFIERLOOSE","(?:".concat(N[x.NONNUMERICIDENTIFIER],"|").concat(N[x.NUMERICIDENTIFIERLOOSE],")"));H("PRERELEASE","(?:-(".concat(N[x.PRERELEASEIDENTIFIER],"(?:\\.").concat(N[x.PRERELEASEIDENTIFIER],")*))"));H("PRERELEASELOOSE","(?:-?(".concat(N[x.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(N[x.PRERELEASEIDENTIFIERLOOSE],")*))"));H("BUILDIDENTIFIER","".concat(Hh,"+"));H("BUILD","(?:\\+(".concat(N[x.BUILDIDENTIFIER],"(?:\\.").concat(N[x.BUILDIDENTIFIER],")*))"));H("FULLPLAIN","v?".concat(N[x.MAINVERSION]).concat(N[x.PRERELEASE],"?").concat(N[x.BUILD],"?"));H("FULL","^".concat(N[x.FULLPLAIN],"$"));H("LOOSEPLAIN","[v=\\s]*".concat(N[x.MAINVERSIONLOOSE]).concat(N[x.PRERELEASELOOSE],"?").concat(N[x.BUILD],"?"));H("LOOSE","^".concat(N[x.LOOSEPLAIN],"$"));H("GTLT","((?:<|>)?=?)");H("XRANGEIDENTIFIERLOOSE","".concat(N[x.NUMERICIDENTIFIERLOOSE],"|x|X|\\*"));H("XRANGEIDENTIFIER","".concat(N[x.NUMERICIDENTIFIER],"|x|X|\\*"));H("XRANGEPLAIN","[v=\\s]*(".concat(N[x.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(N[x.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(N[x.XRANGEIDENTIFIER],")")+"(?:".concat(N[x.PRERELEASE],")?").concat(N[x.BUILD],"?")+")?)?");H("XRANGEPLAINLOOSE","[v=\\s]*(".concat(N[x.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(N[x.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(N[x.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(N[x.PRERELEASELOOSE],")?").concat(N[x.BUILD],"?")+")?)?");H("XRANGE","^".concat(N[x.GTLT],"\\s*").concat(N[x.XRANGEPLAIN],"$"));H("XRANGELOOSE","^".concat(N[x.GTLT],"\\s*").concat(N[x.XRANGEPLAINLOOSE],"$"));H("COERCEPLAIN","(^|[^\\d])(\\d{1,".concat(jh,"})")+"(?:\\.(\\d{1,".concat(jh,"}))?")+"(?:\\.(\\d{1,".concat(jh,"}))?"));H("COERCE","".concat(N[x.COERCEPLAIN],"(?:$|[^\\d])"));H("COERCEFULL",N[x.COERCEPLAIN]+"(?:".concat(N[x.PRERELEASE],")?")+"(?:".concat(N[x.BUILD],")?")+"(?:$|[^\\d])");H("COERCERTL",N[x.COERCE],!0);H("COERCERTLFULL",N[x.COERCEFULL],!0);H("LONETILDE","(?:~>?)");H("TILDETRIM","(\\s*)".concat(N[x.LONETILDE],"\\s+"),!0);rr.tildeTrimReplace="$1~";H("TILDE","^".concat(N[x.LONETILDE]).concat(N[x.XRANGEPLAIN],"$"));H("TILDELOOSE","^".concat(N[x.LONETILDE]).concat(N[x.XRANGEPLAINLOOSE],"$"));H("LONECARET","(?:\\^)");H("CARETTRIM","(\\s*)".concat(N[x.LONECARET],"\\s+"),!0);rr.caretTrimReplace="$1^";H("CARET","^".concat(N[x.LONECARET]).concat(N[x.XRANGEPLAIN],"$"));H("CARETLOOSE","^".concat(N[x.LONECARET]).concat(N[x.XRANGEPLAINLOOSE],"$"));H("COMPARATORLOOSE","^".concat(N[x.GTLT],"\\s*(").concat(N[x.LOOSEPLAIN],")$|^$"));H("COMPARATOR","^".concat(N[x.GTLT],"\\s*(").concat(N[x.FULLPLAIN],")$|^$"));H("COMPARATORTRIM","(\\s*)".concat(N[x.GTLT],"\\s*(").concat(N[x.LOOSEPLAIN],"|").concat(N[x.XRANGEPLAIN],")"),!0);rr.comparatorTrimReplace="$1$2$3";H("HYPHENRANGE","^\\s*(".concat(N[x.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(N[x.XRANGEPLAIN],")")+"\\s*$");H("HYPHENRANGELOOSE","^\\s*(".concat(N[x.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(N[x.XRANGEPLAINLOOSE],")")+"\\s*$");H("STAR","(<|>)?=?\\s*\\*");H("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");H("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ol=w((nH,eA)=>{"use strict";var KD=Object.freeze({loose:!0}),JD=Object.freeze({}),ZD=t=>t?typeof t!="object"?KD:t:JD;eA.exports=ZD});var Wh=w((sH,iA)=>{"use strict";var tA=/^[0-9]+$/,rA=(t,e)=>{let r=tA.test(t),i=tA.test(e);return r&&i&&(t=+t,e=+e),t===e?0:r&&!i?-1:i&&!r?1:t<e?-1:1},e1=(t,e)=>rA(e,t);iA.exports={compareIdentifiers:rA,rcompareIdentifiers:e1}});var We=w((oH,sA)=>{"use strict";var al=_o(),{MAX_LENGTH:nA,MAX_SAFE_INTEGER:ll}=bo(),{safeRe:ul,t:cl}=Yn(),t1=ol(),{compareIdentifiers:Qn}=Wh(),Gh=class t{constructor(e,r){if(r=t1(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError('Invalid version. Must be a string. Got type "'.concat(typeof e,'".'));if(e.length>nA)throw new TypeError("version is longer than ".concat(nA," characters"));al("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let i=e.trim().match(r.loose?ul[cl.LOOSE]:ul[cl.FULL]);if(!i)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>ll||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ll||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ll||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let s=+n;if(s>=0&&s<ll)return s}return n}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(e){if(al("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Qn(this.major,e.major)||Qn(this.minor,e.minor)||Qn(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let i=this.prerelease[r],n=e.prerelease[r];if(al("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return Qn(i,n)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let i=this.build[r],n=e.build[r];if(al("build compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return Qn(i,n)}while(++r)}inc(e,r,i){if(e.startsWith("pre")){if(!r&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let n="-".concat(r).match(this.options.loose?ul[cl.PRERELEASELOOSE]:ul[cl.PRERELEASE]);if(!n||n[1]!==r)throw new Error("invalid identifier: ".concat(r))}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,i),this.inc("pre",r,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,i),this.inc("pre",r,i);break;case"release":if(this.prerelease.length===0)throw new Error("version ".concat(this.raw," is not a prerelease"));this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(i)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let s=[r,n];i===!1&&(s=[r]),Qn(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error("invalid increment argument: ".concat(e))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}};sA.exports=Gh});var Wi=w((aH,aA)=>{"use strict";var oA=We(),r1=(t,e,r=!1)=>{if(t instanceof oA)return t;try{return new oA(t,e)}catch(i){if(!r)return null;throw i}};aA.exports=r1});var uA=w((lH,lA)=>{"use strict";var i1=Wi(),n1=(t,e)=>{let r=i1(t,e);return r?r.version:null};lA.exports=n1});var hA=w((uH,cA)=>{"use strict";var s1=Wi(),o1=(t,e)=>{let r=s1(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};cA.exports=o1});var pA=w((cH,dA)=>{"use strict";var fA=We(),a1=(t,e,r,i,n)=>{typeof r=="string"&&(n=i,i=r,r=void 0);try{return new fA(t instanceof fA?t.version:t,r).inc(e,i,n).version}catch{return null}};dA.exports=a1});var yA=w((hH,gA)=>{"use strict";var mA=Wi(),l1=(t,e)=>{let r=mA(t,null,!0),i=mA(e,null,!0),n=r.compare(i);if(n===0)return null;let s=n>0,o=s?r:i,a=s?i:r,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let u=l?"pre":"";return r.major!==i.major?u+"major":r.minor!==i.minor?u+"minor":r.patch!==i.patch?u+"patch":"prerelease"};gA.exports=l1});var AA=w((fH,wA)=>{"use strict";var u1=We(),c1=(t,e)=>new u1(t,e).major;wA.exports=c1});var SA=w((dH,EA)=>{"use strict";var h1=We(),f1=(t,e)=>new h1(t,e).minor;EA.exports=f1});var _A=w((pH,bA)=>{"use strict";var d1=We(),p1=(t,e)=>new d1(t,e).patch;bA.exports=p1});var OA=w((mH,vA)=>{"use strict";var m1=Wi(),g1=(t,e)=>{let r=m1(t,e);return r&&r.prerelease.length?r.prerelease:null};vA.exports=g1});var Dt=w((gH,CA)=>{"use strict";var TA=We(),y1=(t,e,r)=>new TA(t,r).compare(new TA(e,r));CA.exports=y1});var IA=w((yH,RA)=>{"use strict";var w1=Dt(),A1=(t,e,r)=>w1(e,t,r);RA.exports=A1});var xA=w((wH,NA)=>{"use strict";var E1=Dt(),S1=(t,e)=>E1(t,e,!0);NA.exports=S1});var hl=w((AH,PA)=>{"use strict";var DA=We(),b1=(t,e,r)=>{let i=new DA(t,r),n=new DA(e,r);return i.compare(n)||i.compareBuild(n)};PA.exports=b1});var LA=w((EH,FA)=>{"use strict";var _1=hl(),v1=(t,e)=>t.sort((r,i)=>_1(r,i,e));FA.exports=v1});var kA=w((SH,$A)=>{"use strict";var O1=hl(),T1=(t,e)=>t.sort((r,i)=>O1(i,r,e));$A.exports=T1});var vo=w((bH,qA)=>{"use strict";var C1=Dt(),R1=(t,e,r)=>C1(t,e,r)>0;qA.exports=R1});var fl=w((_H,MA)=>{"use strict";var I1=Dt(),N1=(t,e,r)=>I1(t,e,r)<0;MA.exports=N1});var zh=w((vH,UA)=>{"use strict";var x1=Dt(),D1=(t,e,r)=>x1(t,e,r)===0;UA.exports=D1});var Vh=w((OH,BA)=>{"use strict";var P1=Dt(),F1=(t,e,r)=>P1(t,e,r)!==0;BA.exports=F1});var dl=w((TH,jA)=>{"use strict";var L1=Dt(),$1=(t,e,r)=>L1(t,e,r)>=0;jA.exports=$1});var pl=w((CH,HA)=>{"use strict";var k1=Dt(),q1=(t,e,r)=>k1(t,e,r)<=0;HA.exports=q1});var Yh=w((RH,WA)=>{"use strict";var M1=zh(),U1=Vh(),B1=vo(),j1=dl(),H1=fl(),W1=pl(),G1=(t,e,r,i)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return M1(t,r,i);case"!=":return U1(t,r,i);case">":return B1(t,r,i);case">=":return j1(t,r,i);case"<":return H1(t,r,i);case"<=":return W1(t,r,i);default:throw new TypeError("Invalid operator: ".concat(e))}};WA.exports=G1});var zA=w((IH,GA)=>{"use strict";var z1=We(),V1=Wi(),{safeRe:ml,t:gl}=Yn(),Y1=(t,e)=>{if(t instanceof z1)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?ml[gl.COERCEFULL]:ml[gl.COERCE]);else{let l=e.includePrerelease?ml[gl.COERCERTLFULL]:ml[gl.COERCERTL],c;for(;(c=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(r===null)return null;let i=r[2],n=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?"-".concat(r[5]):"",a=e.includePrerelease&&r[6]?"+".concat(r[6]):"";return V1("".concat(i,".").concat(n,".").concat(s).concat(o).concat(a),e)};GA.exports=Y1});var YA=w((NH,VA)=>{"use strict";var Qh=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let n=this.map.keys().next().value;this.delete(n)}this.map.set(e,r)}return this}};VA.exports=Qh});var Pt=w((xH,JA)=>{"use strict";var Q1=/\s+/g,Xh=class t{constructor(e,r){if(r=K1(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Kh)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(Q1," "),this.set=this.raw.split("||").map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){let i=this.set[0];if(this.set=this.set.filter(n=>!XA(n[0])),this.set.length===0)this.set=[i];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&nP(n[0])){this.set=[n];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let i=0;i<r.length;i++)i>0&&(this.formatted+=" "),this.formatted+=r[i].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let i=((this.options.includePrerelease&&rP)|(this.options.loose&&iP))+":"+e,n=QA.get(i);if(n)return n;let s=this.options.loose,o=s?dt[et.HYPHENRANGELOOSE]:dt[et.HYPHENRANGE];e=e.replace(o,pP(this.options.includePrerelease)),ce("hyphen replace",e),e=e.replace(dt[et.COMPARATORTRIM],Z1),ce("comparator trim",e),e=e.replace(dt[et.TILDETRIM],eP),ce("tilde trim",e),e=e.replace(dt[et.CARETTRIM],tP),ce("caret trim",e);let a=e.split(" ").map(h=>sP(h,this.options)).join(" ").split(/\s+/).map(h=>dP(h,this.options));s&&(a=a.filter(h=>(ce("loose invalid filter",h,this.options),!!h.match(dt[et.COMPARATORLOOSE])))),ce("range list",a);let l=new Map,c=a.map(h=>new Kh(h,this.options));for(let h of c){if(XA(h))return[h];l.set(h.value,h)}l.size>1&&l.has("")&&l.delete("");let u=[...l.values()];return QA.set(i,u),u}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(i=>KA(i,r)&&e.set.some(n=>KA(n,r)&&i.every(s=>n.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new J1(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(mP(this.set[r],e,this.options))return!0;return!1}};JA.exports=Xh;var X1=YA(),QA=new X1,K1=ol(),Kh=Oo(),ce=_o(),J1=We(),{safeRe:dt,t:et,comparatorTrimReplace:Z1,tildeTrimReplace:eP,caretTrimReplace:tP}=Yn(),{FLAG_INCLUDE_PRERELEASE:rP,FLAG_LOOSE:iP}=bo(),XA=t=>t.value==="<0.0.0-0",nP=t=>t.value==="",KA=(t,e)=>{let r=!0,i=t.slice(),n=i.pop();for(;r&&i.length;)r=i.every(s=>n.intersects(s,e)),n=i.pop();return r},sP=(t,e)=>(ce("comp",t,e),t=lP(t,e),ce("caret",t),t=oP(t,e),ce("tildes",t),t=cP(t,e),ce("xrange",t),t=fP(t,e),ce("stars",t),t),tt=t=>!t||t.toLowerCase()==="x"||t==="*",oP=(t,e)=>t.trim().split(/\s+/).map(r=>aP(r,e)).join(" "),aP=(t,e)=>{let r=e.loose?dt[et.TILDELOOSE]:dt[et.TILDE];return t.replace(r,(i,n,s,o,a)=>{ce("tilde",t,i,n,s,o,a);let l;return tt(n)?l="":tt(s)?l=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):tt(o)?l=">=".concat(n,".").concat(s,".0 <").concat(n,".").concat(+s+1,".0-0"):a?(ce("replaceTilde pr",a),l=">=".concat(n,".").concat(s,".").concat(o,"-").concat(a," <").concat(n,".").concat(+s+1,".0-0")):l=">=".concat(n,".").concat(s,".").concat(o," <").concat(n,".").concat(+s+1,".0-0"),ce("tilde return",l),l})},lP=(t,e)=>t.trim().split(/\s+/).map(r=>uP(r,e)).join(" "),uP=(t,e)=>{ce("caret",t,e);let r=e.loose?dt[et.CARETLOOSE]:dt[et.CARET],i=e.includePrerelease?"-0":"";return t.replace(r,(n,s,o,a,l)=>{ce("caret",t,n,s,o,a,l);let c;return tt(s)?c="":tt(o)?c=">=".concat(s,".0.0").concat(i," <").concat(+s+1,".0.0-0"):tt(a)?s==="0"?c=">=".concat(s,".").concat(o,".0").concat(i," <").concat(s,".").concat(+o+1,".0-0"):c=">=".concat(s,".").concat(o,".0").concat(i," <").concat(+s+1,".0.0-0"):l?(ce("replaceCaret pr",l),s==="0"?o==="0"?c=">=".concat(s,".").concat(o,".").concat(a,"-").concat(l," <").concat(s,".").concat(o,".").concat(+a+1,"-0"):c=">=".concat(s,".").concat(o,".").concat(a,"-").concat(l," <").concat(s,".").concat(+o+1,".0-0"):c=">=".concat(s,".").concat(o,".").concat(a,"-").concat(l," <").concat(+s+1,".0.0-0")):(ce("no pr"),s==="0"?o==="0"?c=">=".concat(s,".").concat(o,".").concat(a).concat(i," <").concat(s,".").concat(o,".").concat(+a+1,"-0"):c=">=".concat(s,".").concat(o,".").concat(a).concat(i," <").concat(s,".").concat(+o+1,".0-0"):c=">=".concat(s,".").concat(o,".").concat(a," <").concat(+s+1,".0.0-0")),ce("caret return",c),c})},cP=(t,e)=>(ce("replaceXRanges",t,e),t.split(/\s+/).map(r=>hP(r,e)).join(" ")),hP=(t,e)=>{t=t.trim();let r=e.loose?dt[et.XRANGELOOSE]:dt[et.XRANGE];return t.replace(r,(i,n,s,o,a,l)=>{ce("xRange",t,i,n,s,o,a,l);let c=tt(s),u=c||tt(o),h=u||tt(a),f=h;return n==="="&&f&&(n=""),l=e.includePrerelease?"-0":"",c?n===">"||n==="<"?i="<0.0.0-0":i="*":n&&f?(u&&(o=0),a=0,n===">"?(n=">=",u?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):n==="<="&&(n="<",u?s=+s+1:o=+o+1),n==="<"&&(l="-0"),i="".concat(n+s,".").concat(o,".").concat(a).concat(l)):u?i=">=".concat(s,".0.0").concat(l," <").concat(+s+1,".0.0-0"):h&&(i=">=".concat(s,".").concat(o,".0").concat(l," <").concat(s,".").concat(+o+1,".0-0")),ce("xRange return",i),i})},fP=(t,e)=>(ce("replaceStars",t,e),t.trim().replace(dt[et.STAR],"")),dP=(t,e)=>(ce("replaceGTE0",t,e),t.trim().replace(dt[e.includePrerelease?et.GTE0PRE:et.GTE0],"")),pP=t=>(e,r,i,n,s,o,a,l,c,u,h,f)=>(tt(i)?r="":tt(n)?r=">=".concat(i,".0.0").concat(t?"-0":""):tt(s)?r=">=".concat(i,".").concat(n,".0").concat(t?"-0":""):o?r=">=".concat(r):r=">=".concat(r).concat(t?"-0":""),tt(c)?l="":tt(u)?l="<".concat(+c+1,".0.0-0"):tt(h)?l="<".concat(c,".").concat(+u+1,".0-0"):f?l="<=".concat(c,".").concat(u,".").concat(h,"-").concat(f):t?l="<".concat(c,".").concat(u,".").concat(+h+1,"-0"):l="<=".concat(l),"".concat(r," ").concat(l).trim()),mP=(t,e,r)=>{for(let i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let i=0;i<t.length;i++)if(ce(t[i].semver),t[i].semver!==Kh.ANY&&t[i].semver.prerelease.length>0){let n=t[i].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var Oo=w((DH,nE)=>{"use strict";var To=Symbol("SemVer ANY"),ef=class t{static get ANY(){return To}constructor(e,r){if(r=ZA(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Zh("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===To?this.value="":this.value=this.operator+this.semver.version,Zh("comp",this)}parse(e){let r=this.options.loose?eE[tE.COMPARATORLOOSE]:eE[tE.COMPARATOR],i=e.match(r);if(!i)throw new TypeError("Invalid comparator: ".concat(e));this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new rE(i[2],this.options.loose):this.semver=To}toString(){return this.value}test(e){if(Zh("Comparator.test",e,this.options.loose),this.semver===To||e===To)return!0;if(typeof e=="string")try{e=new rE(e,this.options)}catch{return!1}return Jh(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new iE(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new iE(this.value,r).test(e.semver):(r=ZA(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Jh(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Jh(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};nE.exports=ef;var ZA=ol(),{safeRe:eE,t:tE}=Yn(),Jh=Yh(),Zh=_o(),rE=We(),iE=Pt()});var Co=w((PH,sE)=>{"use strict";var gP=Pt(),yP=(t,e,r)=>{try{e=new gP(e,r)}catch{return!1}return e.test(t)};sE.exports=yP});var aE=w((FH,oE)=>{"use strict";var wP=Pt(),AP=(t,e)=>new wP(t,e).set.map(r=>r.map(i=>i.value).join(" ").trim().split(" "));oE.exports=AP});var uE=w((LH,lE)=>{"use strict";var EP=We(),SP=Pt(),bP=(t,e,r)=>{let i=null,n=null,s=null;try{s=new SP(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!i||n.compare(o)===-1)&&(i=o,n=new EP(i,r))}),i};lE.exports=bP});var hE=w(($H,cE)=>{"use strict";var _P=We(),vP=Pt(),OP=(t,e,r)=>{let i=null,n=null,s=null;try{s=new vP(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!i||n.compare(o)===1)&&(i=o,n=new _P(i,r))}),i};cE.exports=OP});var pE=w((kH,dE)=>{"use strict";var tf=We(),TP=Pt(),fE=vo(),CP=(t,e)=>{t=new TP(t,e);let r=new tf("0.0.0");if(t.test(r)||(r=new tf("0.0.0-0"),t.test(r)))return r;r=null;for(let i=0;i<t.set.length;++i){let n=t.set[i],s=null;n.forEach(o=>{let a=new tf(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||fE(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(o.operator))}}),s&&(!r||fE(r,s))&&(r=s)}return r&&t.test(r)?r:null};dE.exports=CP});var gE=w((qH,mE)=>{"use strict";var RP=Pt(),IP=(t,e)=>{try{return new RP(t,e).range||"*"}catch{return null}};mE.exports=IP});var yl=w((MH,EE)=>{"use strict";var NP=We(),AE=Oo(),{ANY:xP}=AE,DP=Pt(),PP=Co(),yE=vo(),wE=fl(),FP=pl(),LP=dl(),$P=(t,e,r,i)=>{t=new NP(t,i),e=new DP(e,i);let n,s,o,a,l;switch(r){case">":n=yE,s=FP,o=wE,a=">",l=">=";break;case"<":n=wE,s=LP,o=yE,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(PP(t,e,i))return!1;for(let c=0;c<e.set.length;++c){let u=e.set[c],h=null,f=null;if(u.forEach(d=>{d.semver===xP&&(d=new AE(">=0.0.0")),h=h||d,f=f||d,n(d.semver,h.semver,i)?h=d:o(d.semver,f.semver,i)&&(f=d)}),h.operator===a||h.operator===l||(!f.operator||f.operator===a)&&s(t,f.semver))return!1;if(f.operator===l&&o(t,f.semver))return!1}return!0};EE.exports=$P});var bE=w((UH,SE)=>{"use strict";var kP=yl(),qP=(t,e,r)=>kP(t,e,">",r);SE.exports=qP});var vE=w((BH,_E)=>{"use strict";var MP=yl(),UP=(t,e,r)=>MP(t,e,"<",r);_E.exports=UP});var CE=w((jH,TE)=>{"use strict";var OE=Pt(),BP=(t,e,r)=>(t=new OE(t,r),e=new OE(e,r),t.intersects(e,r));TE.exports=BP});var IE=w((HH,RE)=>{"use strict";var jP=Co(),HP=Dt();RE.exports=(t,e,r)=>{let i=[],n=null,s=null,o=t.sort((u,h)=>HP(u,h,r));for(let u of o)jP(u,e,r)?(s=u,n||(n=u)):(s&&i.push([n,s]),s=null,n=null);n&&i.push([n,null]);let a=[];for(let[u,h]of i)u===h?a.push(u):!h&&u===o[0]?a.push("*"):h?u===o[0]?a.push("<=".concat(h)):a.push("".concat(u," - ").concat(h)):a.push(">=".concat(u));let l=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return l.length<c.length?l:e}});var LE=w((WH,FE)=>{"use strict";var NE=Pt(),nf=Oo(),{ANY:rf}=nf,Ro=Co(),sf=Dt(),WP=(t,e,r={})=>{if(t===e)return!0;t=new NE(t,r),e=new NE(e,r);let i=!1;e:for(let n of t.set){for(let s of e.set){let o=zP(n,s,r);if(i=i||o!==null,o)continue e}if(i)return!1}return!0},GP=[new nf(">=0.0.0-0")],xE=[new nf(">=0.0.0")],zP=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===rf){if(e.length===1&&e[0].semver===rf)return!0;r.includePrerelease?t=GP:t=xE}if(e.length===1&&e[0].semver===rf){if(r.includePrerelease)return!0;e=xE}let i=new Set,n,s;for(let d of t)d.operator===">"||d.operator===">="?n=DE(n,d,r):d.operator==="<"||d.operator==="<="?s=PE(s,d,r):i.add(d.semver);if(i.size>1)return null;let o;if(n&&s){if(o=sf(n.semver,s.semver,r),o>0)return null;if(o===0&&(n.operator!==">="||s.operator!=="<="))return null}for(let d of i){if(n&&!Ro(d,String(n),r)||s&&!Ro(d,String(s),r))return null;for(let y of e)if(!Ro(d,String(y),r))return!1;return!0}let a,l,c,u,h=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,f=n&&!r.includePrerelease&&n.semver.prerelease.length?n.semver:!1;h&&h.prerelease.length===1&&s.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(let d of e){if(u=u||d.operator===">"||d.operator===">=",c=c||d.operator==="<"||d.operator==="<=",n){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator===">"||d.operator===">="){if(a=DE(n,d,r),a===d&&a!==n)return!1}else if(n.operator===">="&&!Ro(n.semver,String(d),r))return!1}if(s){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator==="<"||d.operator==="<="){if(l=PE(s,d,r),l===d&&l!==s)return!1}else if(s.operator==="<="&&!Ro(s.semver,String(d),r))return!1}if(!d.operator&&(s||n)&&o!==0)return!1}return!(n&&c&&!s&&o!==0||s&&u&&!n&&o!==0||f||h)},DE=(t,e,r)=>{if(!t)return e;let i=sf(t.semver,e.semver,r);return i>0?t:i<0||e.operator===">"&&t.operator===">="?e:t},PE=(t,e,r)=>{if(!t)return e;let i=sf(t.semver,e.semver,r);return i<0?t:i>0||e.operator==="<"&&t.operator==="<="?e:t};FE.exports=WP});var af=w((GH,qE)=>{"use strict";var of=Yn(),$E=bo(),VP=We(),kE=Wh(),YP=Wi(),QP=uA(),XP=hA(),KP=pA(),JP=yA(),ZP=AA(),eF=SA(),tF=_A(),rF=OA(),iF=Dt(),nF=IA(),sF=xA(),oF=hl(),aF=LA(),lF=kA(),uF=vo(),cF=fl(),hF=zh(),fF=Vh(),dF=dl(),pF=pl(),mF=Yh(),gF=zA(),yF=Oo(),wF=Pt(),AF=Co(),EF=aE(),SF=uE(),bF=hE(),_F=pE(),vF=gE(),OF=yl(),TF=bE(),CF=vE(),RF=CE(),IF=IE(),NF=LE();qE.exports={parse:YP,valid:QP,clean:XP,inc:KP,diff:JP,major:ZP,minor:eF,patch:tF,prerelease:rF,compare:iF,rcompare:nF,compareLoose:sF,compareBuild:oF,sort:aF,rsort:lF,gt:uF,lt:cF,eq:hF,neq:fF,gte:dF,lte:pF,cmp:mF,coerce:gF,Comparator:yF,Range:wF,satisfies:AF,toComparators:EF,maxSatisfying:SF,minSatisfying:bF,minVersion:_F,validRange:vF,outside:OF,gtr:TF,ltr:CF,intersects:RF,simplifyRange:IF,subset:NF,SemVer:VP,re:of.re,src:of.src,tokens:of.t,SEMVER_SPEC_VERSION:$E.SEMVER_SPEC_VERSION,RELEASE_TYPES:$E.RELEASE_TYPES,compareIdentifiers:kE.compareIdentifiers,rcompareIdentifiers:kE.rcompareIdentifiers}});var AS=w((Io,Kn)=>{var xF=200,wf="__lodash_hash_undefined__",Ol=1,XE=2,KE=9007199254740991,wl="[object Arguments]",hf="[object Array]",DF="[object AsyncFunction]",JE="[object Boolean]",ZE="[object Date]",eS="[object Error]",tS="[object Function]",PF="[object GeneratorFunction]",Al="[object Map]",rS="[object Number]",FF="[object Null]",Xn="[object Object]",ME="[object Promise]",LF="[object Proxy]",iS="[object RegExp]",El="[object Set]",nS="[object String]",$F="[object Symbol]",kF="[object Undefined]",ff="[object WeakMap]",sS="[object ArrayBuffer]",Sl="[object DataView]",qF="[object Float32Array]",MF="[object Float64Array]",UF="[object Int8Array]",BF="[object Int16Array]",jF="[object Int32Array]",HF="[object Uint8Array]",WF="[object Uint8ClampedArray]",GF="[object Uint16Array]",zF="[object Uint32Array]",VF=/[\\^$.*+?()[\]{}|]/g,YF=/^\[object .+?Constructor\]$/,QF=/^(?:0|[1-9]\d*)$/,he={};he[qF]=he[MF]=he[UF]=he[BF]=he[jF]=he[HF]=he[WF]=he[GF]=he[zF]=!0;he[wl]=he[hf]=he[sS]=he[JE]=he[Sl]=he[ZE]=he[eS]=he[tS]=he[Al]=he[rS]=he[Xn]=he[iS]=he[El]=he[nS]=he[ff]=!1;var oS=typeof global=="object"&&global&&global.Object===Object&&global,XF=typeof self=="object"&&self&&self.Object===Object&&self,Ar=oS||XF||Function("return this")(),aS=typeof Io=="object"&&Io&&!Io.nodeType&&Io,UE=aS&&typeof Kn=="object"&&Kn&&!Kn.nodeType&&Kn,lS=UE&&UE.exports===aS,lf=lS&&oS.process,BE=(function(){try{return lf&&lf.binding&&lf.binding("util")}catch{}})(),jE=BE&&BE.isTypedArray;function KF(t,e){for(var r=-1,i=t==null?0:t.length,n=0,s=[];++r<i;){var o=t[r];e(o,r,t)&&(s[n++]=o)}return s}function JF(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}function ZF(t,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}function eL(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}function tL(t){return function(e){return t(e)}}function rL(t,e){return t.has(e)}function iL(t,e){return t?.[e]}function nL(t){var e=-1,r=Array(t.size);return t.forEach(function(i,n){r[++e]=[n,i]}),r}function sL(t,e){return function(r){return t(e(r))}}function oL(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}var aL=Array.prototype,lL=Function.prototype,Tl=Object.prototype,uf=Ar["__core-js_shared__"],uS=lL.toString,ir=Tl.hasOwnProperty,HE=(function(){var t=/[^.]+$/.exec(uf&&uf.keys&&uf.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})(),cS=Tl.toString,uL=RegExp("^"+uS.call(ir).replace(VF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),WE=lS?Ar.Buffer:void 0,bl=Ar.Symbol,GE=Ar.Uint8Array,hS=Tl.propertyIsEnumerable,cL=aL.splice,Gi=bl?bl.toStringTag:void 0,zE=Object.getOwnPropertySymbols,hL=WE?WE.isBuffer:void 0,fL=sL(Object.keys,Object),df=Jn(Ar,"DataView"),No=Jn(Ar,"Map"),pf=Jn(Ar,"Promise"),mf=Jn(Ar,"Set"),gf=Jn(Ar,"WeakMap"),xo=Jn(Object,"create"),dL=Yi(df),pL=Yi(No),mL=Yi(pf),gL=Yi(mf),yL=Yi(gf),VE=bl?bl.prototype:void 0,cf=VE?VE.valueOf:void 0;function zi(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function wL(){this.__data__=xo?xo(null):{},this.size=0}function AL(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function EL(t){var e=this.__data__;if(xo){var r=e[t];return r===wf?void 0:r}return ir.call(e,t)?e[t]:void 0}function SL(t){var e=this.__data__;return xo?e[t]!==void 0:ir.call(e,t)}function bL(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=xo&&e===void 0?wf:e,this}zi.prototype.clear=wL;zi.prototype.delete=AL;zi.prototype.get=EL;zi.prototype.has=SL;zi.prototype.set=bL;function Er(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function _L(){this.__data__=[],this.size=0}function vL(t){var e=this.__data__,r=Cl(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():cL.call(e,r,1),--this.size,!0}function OL(t){var e=this.__data__,r=Cl(e,t);return r<0?void 0:e[r][1]}function TL(t){return Cl(this.__data__,t)>-1}function CL(t,e){var r=this.__data__,i=Cl(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}Er.prototype.clear=_L;Er.prototype.delete=vL;Er.prototype.get=OL;Er.prototype.has=TL;Er.prototype.set=CL;function Vi(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function RL(){this.size=0,this.__data__={hash:new zi,map:new(No||Er),string:new zi}}function IL(t){var e=Rl(this,t).delete(t);return this.size-=e?1:0,e}function NL(t){return Rl(this,t).get(t)}function xL(t){return Rl(this,t).has(t)}function DL(t,e){var r=Rl(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}Vi.prototype.clear=RL;Vi.prototype.delete=IL;Vi.prototype.get=NL;Vi.prototype.has=xL;Vi.prototype.set=DL;function _l(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Vi;++e<r;)this.add(t[e])}function PL(t){return this.__data__.set(t,wf),this}function FL(t){return this.__data__.has(t)}_l.prototype.add=_l.prototype.push=PL;_l.prototype.has=FL;function ni(t){var e=this.__data__=new Er(t);this.size=e.size}function LL(){this.__data__=new Er,this.size=0}function $L(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function kL(t){return this.__data__.get(t)}function qL(t){return this.__data__.has(t)}function ML(t,e){var r=this.__data__;if(r instanceof Er){var i=r.__data__;if(!No||i.length<xF-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Vi(i)}return r.set(t,e),this.size=r.size,this}ni.prototype.clear=LL;ni.prototype.delete=$L;ni.prototype.get=kL;ni.prototype.has=qL;ni.prototype.set=ML;function UL(t,e){var r=vl(t),i=!r&&t$(t),n=!r&&!i&&yf(t),s=!r&&!i&&!n&&wS(t),o=r||i||n||s,a=o?eL(t.length,String):[],l=a.length;for(var c in t)(e||ir.call(t,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||XL(c,l)))&&a.push(c);return a}function Cl(t,e){for(var r=t.length;r--;)if(pS(t[r][0],e))return r;return-1}function BL(t,e,r){var i=e(t);return vl(t)?i:JF(i,r(t))}function Po(t){return t==null?t===void 0?kF:FF:Gi&&Gi in Object(t)?YL(t):e$(t)}function YE(t){return Do(t)&&Po(t)==wl}function fS(t,e,r,i,n){return t===e?!0:t==null||e==null||!Do(t)&&!Do(e)?t!==t&&e!==e:jL(t,e,r,i,fS,n)}function jL(t,e,r,i,n,s){var o=vl(t),a=vl(e),l=o?hf:ii(t),c=a?hf:ii(e);l=l==wl?Xn:l,c=c==wl?Xn:c;var u=l==Xn,h=c==Xn,f=l==c;if(f&&yf(t)){if(!yf(e))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new ni),o||wS(t)?dS(t,e,r,i,n,s):zL(t,e,l,r,i,n,s);if(!(r&Ol)){var d=u&&ir.call(t,"__wrapped__"),y=h&&ir.call(e,"__wrapped__");if(d||y){var A=d?t.value():t,E=y?e.value():e;return s||(s=new ni),n(A,E,r,i,s)}}return f?(s||(s=new ni),VL(t,e,r,i,n,s)):!1}function HL(t){if(!yS(t)||JL(t))return!1;var e=mS(t)?uL:YF;return e.test(Yi(t))}function WL(t){return Do(t)&&gS(t.length)&&!!he[Po(t)]}function GL(t){if(!ZL(t))return fL(t);var e=[];for(var r in Object(t))ir.call(t,r)&&r!="constructor"&&e.push(r);return e}function dS(t,e,r,i,n,s){var o=r&Ol,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var u=-1,h=!0,f=r&XE?new _l:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var d=t[u],y=e[u];if(i)var A=o?i(y,d,u,e,t,s):i(d,y,u,t,e,s);if(A!==void 0){if(A)continue;h=!1;break}if(f){if(!ZF(e,function(E,v){if(!rL(f,v)&&(d===E||n(d,E,r,i,s)))return f.push(v)})){h=!1;break}}else if(!(d===y||n(d,y,r,i,s))){h=!1;break}}return s.delete(t),s.delete(e),h}function zL(t,e,r,i,n,s,o){switch(r){case Sl:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case sS:return!(t.byteLength!=e.byteLength||!s(new GE(t),new GE(e)));case JE:case ZE:case rS:return pS(+t,+e);case eS:return t.name==e.name&&t.message==e.message;case iS:case nS:return t==e+"";case Al:var a=nL;case El:var l=i&Ol;if(a||(a=oL),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=XE,o.set(t,e);var u=dS(a(t),a(e),i,n,s,o);return o.delete(t),u;case $F:if(cf)return cf.call(t)==cf.call(e)}return!1}function VL(t,e,r,i,n,s){var o=r&Ol,a=QE(t),l=a.length,c=QE(e),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in e:ir.call(e,f)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var y=!0;s.set(t,e),s.set(e,t);for(var A=o;++h<l;){f=a[h];var E=t[f],v=e[f];if(i)var O=o?i(v,E,f,e,t,s):i(E,v,f,t,e,s);if(!(O===void 0?E===v||n(E,v,r,i,s):O)){y=!1;break}A||(A=f=="constructor")}if(y&&!A){var I=t.constructor,L=e.constructor;I!=L&&"constructor"in t&&"constructor"in e&&!(typeof I=="function"&&I instanceof I&&typeof L=="function"&&L instanceof L)&&(y=!1)}return s.delete(t),s.delete(e),y}function QE(t){return BL(t,n$,QL)}function Rl(t,e){var r=t.__data__;return KL(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Jn(t,e){var r=iL(t,e);return HL(r)?r:void 0}function YL(t){var e=ir.call(t,Gi),r=t[Gi];try{t[Gi]=void 0;var i=!0}catch{}var n=cS.call(t);return i&&(e?t[Gi]=r:delete t[Gi]),n}var QL=zE?function(t){return t==null?[]:(t=Object(t),KF(zE(t),function(e){return hS.call(t,e)}))}:s$,ii=Po;(df&&ii(new df(new ArrayBuffer(1)))!=Sl||No&&ii(new No)!=Al||pf&&ii(pf.resolve())!=ME||mf&&ii(new mf)!=El||gf&&ii(new gf)!=ff)&&(ii=function(t){var e=Po(t),r=e==Xn?t.constructor:void 0,i=r?Yi(r):"";if(i)switch(i){case dL:return Sl;case pL:return Al;case mL:return ME;case gL:return El;case yL:return ff}return e});function XL(t,e){return e=e??KE,!!e&&(typeof t=="number"||QF.test(t))&&t>-1&&t%1==0&&t<e}function KL(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function JL(t){return!!HE&&HE in t}function ZL(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Tl;return t===r}function e$(t){return cS.call(t)}function Yi(t){if(t!=null){try{return uS.call(t)}catch{}try{return t+""}catch{}}return""}function pS(t,e){return t===e||t!==t&&e!==e}var t$=YE((function(){return arguments})())?YE:function(t){return Do(t)&&ir.call(t,"callee")&&!hS.call(t,"callee")},vl=Array.isArray;function r$(t){return t!=null&&gS(t.length)&&!mS(t)}var yf=hL||o$;function i$(t,e){return fS(t,e)}function mS(t){if(!yS(t))return!1;var e=Po(t);return e==tS||e==PF||e==DF||e==LF}function gS(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=KE}function yS(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Do(t){return t!=null&&typeof t=="object"}var wS=jE?tL(jE):WL;function n$(t){return r$(t)?UL(t):GL(t)}function s$(){return[]}function o$(){return!1}Kn.exports=i$});var SS=w(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.DownloadedUpdateHelper=void 0;Lo.createTempUpdateFile=c$;var a$=require("crypto"),l$=require("fs"),ES=AS(),Qi=yr(),Fo=require("path"),Af=class{constructor(e){this.cacheDir=e,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return Fo.join(this.cacheDir,"pending")}async validateDownloadedPath(e,r,i,n){if(this.versionInfo!=null&&this.file===e&&this.fileInfo!=null)return ES(this.versionInfo,r)&&ES(this.fileInfo.info,i.info)&&await(0,Qi.pathExists)(e)?e:null;let s=await this.getValidCachedUpdateFile(i,n);return s===null?null:(n.info("Update has already been downloaded to ".concat(e,").")),this._file=s,s)}async setDownloadedFile(e,r,i,n,s,o){this._file=e,this._packageFile=r,this.versionInfo=i,this.fileInfo=n,this._downloadedFileInfo={fileName:s,sha512:n.info.sha512,isAdminRightsRequired:n.info.isAdminRightsRequired===!0},o&&await(0,Qi.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,Qi.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(e,r){let i=this.getUpdateInfoFile();if(!await(0,Qi.pathExists)(i))return null;let s;try{s=await(0,Qi.readJson)(i)}catch(c){let u="No cached update info available";return c.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),u+=" (error on read: ".concat(c.message,")")),r.info(u),null}if(!(s?.fileName!==null))return r.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(e.info.sha512!==s.sha512)return r.info("Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ".concat(s.sha512,", expected: ").concat(e.info.sha512,". Directory for cached update will be cleaned")),await this.cleanCacheDirForPendingUpdate(),null;let a=Fo.join(this.cacheDirForPendingUpdate,s.fileName);if(!await(0,Qi.pathExists)(a))return r.info("Cached update file doesn't exist"),null;let l=await u$(a);return e.info.sha512!==l?(r.warn("Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ".concat(l,", expected: ").concat(e.info.sha512)),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=s,a)}getUpdateInfoFile(){return Fo.join(this.cacheDirForPendingUpdate,"update-info.json")}};Lo.DownloadedUpdateHelper=Af;function u$(t,e="sha512",r="base64",i){return new Promise((n,s)=>{let o=(0,a$.createHash)(e);o.on("error",s).setEncoding(r),(0,l$.createReadStream)(t,{...i,highWaterMark:1024*1024}).on("error",s).on("end",()=>{o.end(),n(o.read())}).pipe(o,{end:!1})})}async function c$(t,e,r){let i=0,n=Fo.join(e,t);for(let s=0;s<3;s++)try{return await(0,Qi.unlink)(n),n}catch(o){if(o.code==="ENOENT")return n;r.warn("Error on remove temp update file: ".concat(o)),n=Fo.join(e,"".concat(i++,"-").concat(t))}return n}});var bS=w(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.getAppCacheDir=f$;var Ef=require("path"),h$=require("os");function f$(){let t=(0,h$.homedir)(),e;return process.platform==="win32"?e=process.env.LOCALAPPDATA||Ef.join(t,"AppData","Local"):process.platform==="darwin"?e=Ef.join(t,"Library","Caches"):e=process.env.XDG_CACHE_HOME||Ef.join(t,".cache"),e}});var vS=w(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.ElectronAppAdapter=void 0;var _S=require("path"),d$=bS(),bf=class{constructor(e=require("electron").app){this.app=e}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?_S.join(process.resourcesPath,"app-update.yml"):_S.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,d$.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(e){this.app.once("quit",(r,i)=>e(i))}};Il.ElectronAppAdapter=bf});var TS=w(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.ElectronHttpExecutor=si.NET_SESSION_NAME=void 0;si.getNetSession=OS;var Nl=xe();si.NET_SESSION_NAME="electron-updater";function OS(){return require("electron").session.fromPartition(si.NET_SESSION_NAME,{cache:!1})}var _f=class extends Nl.HttpExecutor{constructor(e){super(),this.proxyLoginCallback=e,this.cachedSession=null}async download(e,r,i){return await i.cancellationToken.createPromise((n,s,o)=>{let a={headers:i.headers||void 0,redirect:"manual"};(0,Nl.configureRequestUrl)(e,a),(0,Nl.configureRequestOptions)(a),this.doDownload(a,{destination:r,options:i,onCancel:o,callback:l=>{l==null?n(r):s(l)},responseHandler:null},0)})}createRequest(e,r){e.headers&&e.headers.Host&&(e.host=e.headers.Host,delete e.headers.Host),this.cachedSession==null&&(this.cachedSession=OS());let i=require("electron").net.request({...e,session:this.cachedSession});return i.on("response",r),this.proxyLoginCallback!=null&&i.on("login",this.proxyLoginCallback),i}addRedirectHandlers(e,r,i,n,s){e.on("redirect",(o,a,l)=>{e.abort(),n>this.maxRedirects?i(this.createMaxRedirectError()):s(Nl.HttpExecutor.prepareRedirectUrlOptions(l,r))})}};si.ElectronHttpExecutor=_f});var DS=w((XH,xS)=>{var p$=1/0,m$="[object Symbol]",NS=/[\\^$.*+?()[\]{}|]/g,g$=RegExp(NS.source),y$=typeof global=="object"&&global&&global.Object===Object&&global,w$=typeof self=="object"&&self&&self.Object===Object&&self,A$=y$||w$||Function("return this")(),E$=Object.prototype,S$=E$.toString,CS=A$.Symbol,RS=CS?CS.prototype:void 0,IS=RS?RS.toString:void 0;function b$(t){if(typeof t=="string")return t;if(v$(t))return IS?IS.call(t):"";var e=t+"";return e=="0"&&1/t==-p$?"-0":e}function _$(t){return!!t&&typeof t=="object"}function v$(t){return typeof t=="symbol"||_$(t)&&S$.call(t)==m$}function O$(t){return t==null?"":b$(t)}function T$(t){return t=O$(t),t&&g$.test(t)?t.replace(NS,"\\$&"):t}xS.exports=T$});var oi=w(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.newBaseUrl=R$;Zn.newUrlFromBase=vf;Zn.getChannelFilename=I$;Zn.blockmapFiles=N$;var PS=require("url"),C$=DS();function R$(t){let e=new PS.URL(t);return e.pathname.endsWith("/")||(e.pathname+="/"),e}function vf(t,e,r=!1){let i=new PS.URL(t,e),n=e.search;return n!=null&&n.length!==0?i.search=n:r&&(i.search="noCache=".concat(Date.now().toString(32))),i}function I$(t){return"".concat(t,".yml")}function N$(t,e,r){let i=vf("".concat(t.pathname,".blockmap"),t);return[vf("".concat(t.pathname.replace(new RegExp(C$(r),"g"),e),".blockmap"),t),i]}});var _t=w(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.Provider=void 0;li.findFile=D$;li.parseUpdateInfo=P$;li.getFileList=LS;li.resolveFiles=F$;var ai=xe(),x$=nl(),FS=oi(),Of=class{constructor(e){this.runtimeOptions=e,this.requestHeaders=null,this.executor=e.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){let e=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(e==="x64"?"":"-".concat(e))}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(e){return"".concat(e).concat(this.getChannelFilePrefix())}get fileExtraDownloadHeaders(){return null}setRequestHeaders(e){this.requestHeaders=e}httpRequest(e,r,i){return this.executor.request(this.createRequestOptions(e,r),i)}createRequestOptions(e,r){let i={};return this.requestHeaders==null?r!=null&&(i.headers=r):i.headers=r==null?this.requestHeaders:{...this.requestHeaders,...r},(0,ai.configureRequestUrl)(e,i),i}};li.Provider=Of;function D$(t,e,r){if(t.length===0)throw(0,ai.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");let i=t.find(n=>n.url.pathname.toLowerCase().endsWith(".".concat(e)));return i??(r==null?t[0]:t.find(n=>!r.some(s=>n.url.pathname.toLowerCase().endsWith(".".concat(s)))))}function P$(t,e,r){if(t==null)throw(0,ai.newError)("Cannot parse update info from ".concat(e," in the latest release artifacts (").concat(r,"): rawData: null"),"ERR_UPDATER_INVALID_UPDATE_INFO");let i;try{i=(0,x$.load)(t)}catch(n){throw(0,ai.newError)("Cannot parse update info from ".concat(e," in the latest release artifacts (").concat(r,"): ").concat(n.stack||n.message,", rawData: ").concat(t),"ERR_UPDATER_INVALID_UPDATE_INFO")}return i}function LS(t){let e=t.files;if(e!=null&&e.length>0)return e;if(t.path!=null)return[{url:t.path,sha2:t.sha2,sha512:t.sha512}];throw(0,ai.newError)("No files provided: ".concat((0,ai.safeStringifyJson)(t)),"ERR_UPDATER_NO_FILES_PROVIDED")}function F$(t,e,r=i=>i){let n=LS(t).map(a=>{if(a.sha2==null&&a.sha512==null)throw(0,ai.newError)("Update info doesn't contain nor sha256 neither sha512 checksum: ".concat((0,ai.safeStringifyJson)(a)),"ERR_UPDATER_NO_CHECKSUM");return{url:(0,FS.newUrlFromBase)(r(a.url),e),info:a}}),s=t.packages,o=s==null?null:s[process.arch]||s.ia32;return o!=null&&(n[0].packageInfo={...o,path:(0,FS.newUrlFromBase)(r(o.path),e).href}),n}});var If=w(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.GenericProvider=void 0;var $S=xe(),Tf=oi(),Cf=_t(),Rf=class extends Cf.Provider{constructor(e,r,i){super(i),this.configuration=e,this.updater=r,this.baseUrl=(0,Tf.newBaseUrl)(this.configuration.url)}get channel(){let e=this.updater.channel||this.configuration.channel;return e==null?this.getDefaultChannelName():this.getCustomChannelName(e)}async getLatestVersion(){let e=(0,Tf.getChannelFilename)(this.channel),r=(0,Tf.newUrlFromBase)(e,this.baseUrl,this.updater.isAddNoCacheQuery);for(let i=0;;i++)try{return(0,Cf.parseUpdateInfo)(await this.httpRequest(r),e,r)}catch(n){if(n instanceof $S.HttpError&&n.statusCode===404)throw(0,$S.newError)('Cannot find channel "'.concat(e,'" update info: ').concat(n.stack||n.message),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(n.code==="ECONNREFUSED"&&i<3){await new Promise((s,o)=>{try{setTimeout(s,1e3*i)}catch(a){o(a)}});continue}throw n}}resolveFiles(e){return(0,Cf.resolveFiles)(e,this.baseUrl)}};xl.GenericProvider=Rf});var qS=w(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.BitbucketProvider=void 0;var kS=xe(),Nf=oi(),xf=_t(),Df=class extends xf.Provider{constructor(e,r,i){super({...i,isUseMultipleRangeRequest:!1}),this.configuration=e,this.updater=r;let{owner:n,slug:s}=e;this.baseUrl=(0,Nf.newBaseUrl)("https://api.bitbucket.org/2.0/repositories/".concat(n,"/").concat(s,"/downloads"))}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){let e=new kS.CancellationToken,r=(0,Nf.getChannelFilename)(this.getCustomChannelName(this.channel)),i=(0,Nf.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{let n=await this.httpRequest(i,void 0,e);return(0,xf.parseUpdateInfo)(n,r,i)}catch(n){throw(0,kS.newError)("Unable to find latest version on ".concat(this.toString(),", please ensure release exists: ").concat(n.stack||n.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(e){return(0,xf.resolveFiles)(e,this.baseUrl)}toString(){let{owner:e,slug:r}=this.configuration;return"Bitbucket (owner: ".concat(e,", slug: ").concat(r,", channel: ").concat(this.channel,")")}};Dl.BitbucketProvider=Df});var $f=w(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.GitHubProvider=Xi.BaseGitHubProvider=void 0;Xi.computeReleaseNotes=US;var Sr=xe(),es=af(),L$=require("url"),ts=oi(),Ff=_t(),Pf=/\/tag\/([^/]+)$/,Pl=class extends Ff.Provider{constructor(e,r,i){super({...i,isUseMultipleRangeRequest:!1}),this.options=e,this.baseUrl=(0,ts.newBaseUrl)((0,Sr.githubUrl)(e,r));let n=r==="github.com"?"api.github.com":r;this.baseApiUrl=(0,ts.newBaseUrl)((0,Sr.githubUrl)(e,n))}computeGithubBasePath(e){let r=this.options.host;return r&&!["github.com","api.github.com"].includes(r)?"/api/v3".concat(e):e}};Xi.BaseGitHubProvider=Pl;var Lf=class extends Pl{constructor(e,r,i){super(e,"github.com",i),this.options=e,this.updater=r}get channel(){let e=this.updater.channel||this.options.channel;return e==null?this.getDefaultChannelName():this.getCustomChannelName(e)}async getLatestVersion(){var e,r,i,n,s;let o=new Sr.CancellationToken,a=await this.httpRequest((0,ts.newUrlFromBase)("".concat(this.basePath,".atom"),this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},o),l=(0,Sr.parseXml)(a),c=l.element("entry",!1,"No published versions on GitHub"),u=null;try{if(this.updater.allowPrerelease){let E=((e=this.updater)===null||e===void 0?void 0:e.channel)||((r=es.prerelease(this.updater.currentVersion))===null||r===void 0?void 0:r[0])||null;if(E===null)u=Pf.exec(c.element("link").attribute("href"))[1];else for(let v of l.getElements("entry")){let O=Pf.exec(v.element("link").attribute("href"));if(O===null)continue;let I=O[1],L=((i=es.prerelease(I))===null||i===void 0?void 0:i[0])||null,oe=!E||["alpha","beta"].includes(E),B=L!==null&&!["alpha","beta"].includes(String(L));if(oe&&!B&&!(E==="beta"&&L==="alpha")){u=I;break}if(L&&L===E){u=I;break}}}else{u=await this.getLatestTagName(o);for(let E of l.getElements("entry"))if(Pf.exec(E.element("link").attribute("href"))[1]===u){c=E;break}}}catch(E){throw(0,Sr.newError)("Cannot parse releases feed: ".concat(E.stack||E.message,",\nXML:\n").concat(a),"ERR_UPDATER_INVALID_RELEASE_FEED")}if(u==null)throw(0,Sr.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let h,f="",d="",y=async E=>{f=(0,ts.getChannelFilename)(E),d=(0,ts.newUrlFromBase)(this.getBaseDownloadPath(String(u),f),this.baseUrl);let v=this.createRequestOptions(d);try{return await this.executor.request(v,o)}catch(O){throw O instanceof Sr.HttpError&&O.statusCode===404?(0,Sr.newError)("Cannot find ".concat(f," in the latest release artifacts (").concat(d,"): ").concat(O.stack||O.message),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):O}};try{let E=this.channel;this.updater.allowPrerelease&&(!((n=es.prerelease(u))===null||n===void 0)&&n[0])&&(E=this.getCustomChannelName(String((s=es.prerelease(u))===null||s===void 0?void 0:s[0]))),h=await y(E)}catch(E){if(this.updater.allowPrerelease)h=await y(this.getDefaultChannelName());else throw E}let A=(0,Ff.parseUpdateInfo)(h,f,d);return A.releaseName==null&&(A.releaseName=c.elementValueOrEmpty("title")),A.releaseNotes==null&&(A.releaseNotes=US(this.updater.currentVersion,this.updater.fullChangelog,l,c)),{tag:u,...A}}async getLatestTagName(e){let r=this.options,i=r.host==null||r.host==="github.com"?(0,ts.newUrlFromBase)("".concat(this.basePath,"/latest"),this.baseUrl):new L$.URL("".concat(this.computeGithubBasePath("/repos/".concat(r.owner,"/").concat(r.repo,"/releases")),"/latest"),this.baseApiUrl);try{let n=await this.httpRequest(i,{Accept:"application/json"},e);return n==null?null:JSON.parse(n).tag_name}catch(n){throw(0,Sr.newError)("Unable to find latest version on GitHub (".concat(i,"), please ensure a production release exists: ").concat(n.stack||n.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return"/".concat(this.options.owner,"/").concat(this.options.repo,"/releases")}resolveFiles(e){return(0,Ff.resolveFiles)(e,this.baseUrl,r=>this.getBaseDownloadPath(e.tag,r.replace(/ /g,"-")))}getBaseDownloadPath(e,r){return"".concat(this.basePath,"/download/").concat(e,"/").concat(r)}};Xi.GitHubProvider=Lf;function MS(t){let e=t.elementValueOrEmpty("content");return e==="No content."?"":e}function US(t,e,r,i){if(!e)return MS(i);let n=[];for(let s of r.getElements("entry")){let o=/\/tag\/v?([^/]+)$/.exec(s.element("link").attribute("href"))[1];es.lt(t,o)&&n.push({version:o,note:MS(s)})}return n.sort((s,o)=>es.rcompare(s.version,o.version))}});var jS=w(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.KeygenProvider=void 0;var BS=xe(),kf=oi(),qf=_t(),Mf=class extends qf.Provider{constructor(e,r,i){super({...i,isUseMultipleRangeRequest:!1}),this.configuration=e,this.updater=r,this.defaultHostname="api.keygen.sh";let n=this.configuration.host||this.defaultHostname;this.baseUrl=(0,kf.newBaseUrl)("https://".concat(n,"/v1/accounts/").concat(this.configuration.account,"/artifacts?product=").concat(this.configuration.product))}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){let e=new BS.CancellationToken,r=(0,kf.getChannelFilename)(this.getCustomChannelName(this.channel)),i=(0,kf.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{let n=await this.httpRequest(i,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},e);return(0,qf.parseUpdateInfo)(n,r,i)}catch(n){throw(0,BS.newError)("Unable to find latest version on ".concat(this.toString(),", please ensure release exists: ").concat(n.stack||n.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(e){return(0,qf.resolveFiles)(e,this.baseUrl)}toString(){let{account:e,product:r,platform:i}=this.configuration;return"Keygen (account: ".concat(e,", product: ").concat(r,", platform: ").concat(i,", channel: ").concat(this.channel,")")}};Fl.KeygenProvider=Mf});var GS=w(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.PrivateGitHubProvider=void 0;var rs=xe(),$$=nl(),k$=require("path"),HS=require("url"),WS=oi(),q$=$f(),M$=_t(),Uf=class extends q$.BaseGitHubProvider{constructor(e,r,i,n){super(e,"api.github.com",n),this.updater=r,this.token=i}createRequestOptions(e,r){let i=super.createRequestOptions(e,r);return i.redirect="manual",i}async getLatestVersion(){let e=new rs.CancellationToken,r=(0,WS.getChannelFilename)(this.getDefaultChannelName()),i=await this.getLatestVersionInfo(e),n=i.assets.find(a=>a.name===r);if(n==null)throw(0,rs.newError)("Cannot find ".concat(r," in the release ").concat(i.html_url||i.name),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");let s=new HS.URL(n.url),o;try{o=(0,$$.load)(await this.httpRequest(s,this.configureHeaders("application/octet-stream"),e))}catch(a){throw a instanceof rs.HttpError&&a.statusCode===404?(0,rs.newError)("Cannot find ".concat(r," in the latest release artifacts (").concat(s,"): ").concat(a.stack||a.message),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):a}return o.assets=i.assets,o}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(e){return{accept:e,authorization:"token ".concat(this.token)}}async getLatestVersionInfo(e){let r=this.updater.allowPrerelease,i=this.basePath;r||(i="".concat(i,"/latest"));let n=(0,WS.newUrlFromBase)(i,this.baseUrl);try{let s=JSON.parse(await this.httpRequest(n,this.configureHeaders("application/vnd.github.v3+json"),e));return r?s.find(o=>o.prerelease)||s[0]:s}catch(s){throw(0,rs.newError)("Unable to find latest version on GitHub (".concat(n,"), please ensure a production release exists: ").concat(s.stack||s.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath("/repos/".concat(this.options.owner,"/").concat(this.options.repo,"/releases"))}resolveFiles(e){return(0,M$.getFileList)(e).map(r=>{let i=k$.posix.basename(r.url).replace(/ /g,"-"),n=e.assets.find(s=>s!=null&&s.name===i);if(n==null)throw(0,rs.newError)('Cannot find asset "'.concat(i,'" in: ').concat(JSON.stringify(e.assets,null,2)),"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new HS.URL(n.url),info:r}})}};Ll.PrivateGitHubProvider=Uf});var YS=w(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.isUrlProbablySupportMultiRangeRequests=VS;kl.createClient=W$;var $l=xe(),U$=qS(),zS=If(),B$=$f(),j$=jS(),H$=GS();function VS(t){return!t.includes("s3.amazonaws.com")}function W$(t,e,r){if(typeof t=="string")throw(0,$l.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");let i=t.provider;switch(i){case"github":{let n=t,s=(n.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||n.token;return s==null?new B$.GitHubProvider(n,e,r):new H$.PrivateGitHubProvider(n,e,s,r)}case"bitbucket":return new U$.BitbucketProvider(t,e,r);case"keygen":return new j$.KeygenProvider(t,e,r);case"s3":case"spaces":return new zS.GenericProvider({provider:"generic",url:(0,$l.getS3LikeProviderBaseUrl)(t),channel:t.channel||null},e,{...r,isUseMultipleRangeRequest:!1});case"generic":{let n=t;return new zS.GenericProvider(n,e,{...r,isUseMultipleRangeRequest:n.useMultipleRangeRequest!==!1&&VS(n.url)})}case"custom":{let n=t,s=n.updateProvider;if(!s)throw(0,$l.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new s(n,e,r)}default:throw(0,$l.newError)("Unsupported provider: ".concat(i),"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}});var ql=w($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.OperationKind=void 0;$o.computeOperations=G$;var Ki;(function(t){t[t.COPY=0]="COPY",t[t.DOWNLOAD=1]="DOWNLOAD"})(Ki||($o.OperationKind=Ki={}));function G$(t,e,r){let i=XS(t.files),n=XS(e.files),s=null,o=e.files[0],a=[],l=o.name,c=i.get(l);if(c==null)throw new Error("no file ".concat(l," in old blockmap"));let u=n.get(l),h=0,{checksumToOffset:f,checksumToOldSize:d}=V$(i.get(l),c.offset,r),y=o.offset;for(let A=0;A<u.checksums.length;y+=u.sizes[A],A++){let E=u.sizes[A],v=u.checksums[A],O=f.get(v);O!=null&&d.get(v)!==E&&(r.warn('Checksum ("'.concat(v,'") matches, but size differs (old: ').concat(d.get(v),", new: ").concat(E,")")),O=void 0),O===void 0?(h++,s!=null&&s.kind===Ki.DOWNLOAD&&s.end===y?s.end+=E:(s={kind:Ki.DOWNLOAD,start:y,end:y+E},QS(s,a,v,A))):s!=null&&s.kind===Ki.COPY&&s.end===O?s.end+=E:(s={kind:Ki.COPY,start:O,end:O+E},QS(s,a,v,A))}return h>0&&r.info("File".concat(o.name==="file"?"":" "+o.name," has ").concat(h," changed blocks")),a}var z$=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function QS(t,e,r,i){if(z$&&e.length!==0){let n=e[e.length-1];if(n.kind===t.kind&&t.start<n.end&&t.start>n.start){let s=[n.start,n.end,t.start,t.end].reduce((o,a)=>o<a?o:a);throw new Error("operation (block index: ".concat(i,", checksum: ").concat(r,", kind: ").concat(Ki[t.kind],") overlaps previous operation (checksum: ").concat(r,"):\n")+"abs: ".concat(n.start," until ").concat(n.end," and ").concat(t.start," until ").concat(t.end,"\n")+"rel: ".concat(n.start-s," until ").concat(n.end-s," and ").concat(t.start-s," until ").concat(t.end-s))}}e.push(t)}function V$(t,e,r){let i=new Map,n=new Map,s=e;for(let o=0;o<t.checksums.length;o++){let a=t.checksums[o],l=t.sizes[o],c=n.get(a);if(c===void 0)i.set(a,s),n.set(a,l);else if(r.debug!=null){let u=c===l?"(same size)":"(size: ".concat(c,", this size: ").concat(l,")");r.debug("".concat(a," duplicated in blockmap ").concat(u,", it doesn't lead to broken differential downloader, just corresponding block will be skipped)"))}s+=l}return{checksumToOffset:i,checksumToOldSize:n}}function XS(t){let e=new Map;for(let r of t)e.set(r.name,r);return e}});var jf=w(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.DataSplitter=void 0;ko.copyData=JS;var Ml=xe(),Y$=require("fs"),Q$=require("stream"),X$=ql(),KS=Buffer.from("\r\n\r\n"),ui;(function(t){t[t.INIT=0]="INIT",t[t.HEADER=1]="HEADER",t[t.BODY=2]="BODY"})(ui||(ui={}));function JS(t,e,r,i,n){let s=(0,Y$.createReadStream)("",{fd:r,autoClose:!1,start:t.start,end:t.end-1});s.on("error",i),s.once("end",n),s.pipe(e,{end:!1})}var Bf=class extends Q$.Writable{constructor(e,r,i,n,s,o){super(),this.out=e,this.options=r,this.partIndexToTaskIndex=i,this.partIndexToLength=s,this.finishHandler=o,this.partIndex=-1,this.headerListBuffer=null,this.readState=ui.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=n.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(e,r,i){if(this.isFinished){console.error("Trailing ignored data: ".concat(e.length," bytes"));return}this.handleData(e).then(i).catch(i)}async handleData(e){let r=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,Ml.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){let i=Math.min(this.ignoreByteCount,e.length);this.ignoreByteCount-=i,r=i}else if(this.remainingPartDataCount>0){let i=Math.min(this.remainingPartDataCount,e.length);this.remainingPartDataCount-=i,await this.processPartData(e,0,i),r=i}if(r!==e.length){if(this.readState===ui.HEADER){let i=this.searchHeaderListEnd(e,r);if(i===-1)return;r=i,this.readState=ui.BODY,this.headerListBuffer=null}for(;;){if(this.readState===ui.BODY)this.readState=ui.INIT;else{this.partIndex++;let o=this.partIndexToTaskIndex.get(this.partIndex);if(o==null)if(this.isFinished)o=this.options.end;else throw(0,Ml.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");let a=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(a<o)await this.copyExistingData(a,o);else if(a>o)throw(0,Ml.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(r=this.searchHeaderListEnd(e,r),r===-1){this.readState=ui.HEADER;return}}let i=this.partIndexToLength[this.partIndex],n=r+i,s=Math.min(n,e.length);if(await this.processPartStarted(e,r,s),this.remainingPartDataCount=i-(s-r),this.remainingPartDataCount>0)return;if(r=n+this.boundaryLength,r>=e.length){this.ignoreByteCount=this.boundaryLength-(e.length-n);return}}}}copyExistingData(e,r){return new Promise((i,n)=>{let s=()=>{if(e===r){i();return}let o=this.options.tasks[e];if(o.kind!==X$.OperationKind.COPY){n(new Error("Task kind must be COPY"));return}JS(o,this.out,this.options.oldFileFd,n,()=>{e++,s()})};s()})}searchHeaderListEnd(e,r){let i=e.indexOf(KS,r);if(i!==-1)return i+KS.length;let n=r===0?e:e.slice(r);return this.headerListBuffer==null?this.headerListBuffer=n:this.headerListBuffer=Buffer.concat([this.headerListBuffer,n]),-1}onPartEnd(){let e=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==e)throw(0,Ml.newError)("Expected length: ".concat(e," differs from actual: ").concat(this.actualPartLength),"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(e,r,i){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(e,r,i)}processPartData(e,r,i){this.actualPartLength+=i-r;let n=this.out;return n.write(r===0&&e.length===i?e:e.slice(r,i))?Promise.resolve():new Promise((s,o)=>{n.on("error",o),n.once("drain",()=>{n.removeListener("error",o),s()})})}};ko.DataSplitter=Bf});var tb=w(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.executeTasksUsingMultipleRangeRequests=K$;Ul.checkIsRangesSupported=Wf;var Hf=xe(),ZS=jf(),eb=ql();function K$(t,e,r,i,n){let s=o=>{if(o>=e.length){t.fileMetadataBuffer!=null&&r.write(t.fileMetadataBuffer),r.end();return}let a=o+1e3;J$(t,{tasks:e,start:o,end:Math.min(e.length,a),oldFileFd:i},r,()=>s(a),n)};return s}function J$(t,e,r,i,n){let s="bytes=",o=0,a=new Map,l=[];for(let h=e.start;h<e.end;h++){let f=e.tasks[h];f.kind===eb.OperationKind.DOWNLOAD&&(s+="".concat(f.start,"-").concat(f.end-1,", "),a.set(o,h),o++,l.push(f.end-f.start))}if(o<=1){let h=f=>{if(f>=e.end){i();return}let d=e.tasks[f++];if(d.kind===eb.OperationKind.COPY)(0,ZS.copyData)(d,r,e.oldFileFd,n,()=>h(f));else{let y=t.createRequestOptions();y.headers.Range="bytes=".concat(d.start,"-").concat(d.end-1);let A=t.httpExecutor.createRequest(y,E=>{Wf(E,n)&&(E.pipe(r,{end:!1}),E.once("end",()=>h(f)))});t.httpExecutor.addErrorAndTimeoutHandlers(A,n),A.end()}};h(e.start);return}let c=t.createRequestOptions();c.headers.Range=s.substring(0,s.length-2);let u=t.httpExecutor.createRequest(c,h=>{if(!Wf(h,n))return;let f=(0,Hf.safeGetHeader)(h,"content-type"),d=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(f);if(d==null){n(new Error('Content-Type "multipart/byteranges" is expected, but got "'.concat(f,'"')));return}let y=new ZS.DataSplitter(r,e,a,d[1]||d[2],l,i);y.on("error",n),h.pipe(y),h.on("end",()=>{setTimeout(()=>{u.abort(),n(new Error("Response ends without calling any handlers"))},1e4)})});t.httpExecutor.addErrorAndTimeoutHandlers(u,n),u.end()}function Wf(t,e){if(t.statusCode>=400)return e((0,Hf.createHttpError)(t)),!1;if(t.statusCode!==206){let r=(0,Hf.safeGetHeader)(t,"accept-ranges");if(r==null||r==="none")return e(new Error("Server doesn't support Accept-Ranges (response code ".concat(t.statusCode,")"))),!1}return!0}});var rb=w(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.ProgressDifferentialDownloadCallbackTransform=void 0;var Z$=require("stream"),is;(function(t){t[t.COPY=0]="COPY",t[t.DOWNLOAD=1]="DOWNLOAD"})(is||(is={}));var Gf=class extends Z$.Transform{constructor(e,r,i){super(),this.progressDifferentialDownloadInfo=e,this.cancellationToken=r,this.onProgress=i,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=is.COPY,this.nextUpdate=this.start+1e3}_transform(e,r,i){if(this.cancellationToken.cancelled){i(new Error("cancelled"),null);return}if(this.operationType==is.COPY){i(null,e);return}this.transferred+=e.length,this.delta+=e.length;let n=Date.now();n>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=n+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((n-this.start)/1e3))}),this.delta=0),i(null,e)}beginFileCopy(){this.operationType=is.COPY}beginRangeDownload(){this.operationType=is.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(e){if(this.cancellationToken.cancelled){e(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,e(null)}};Bl.ProgressDifferentialDownloadCallbackTransform=Gf});var Yf=w(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.DifferentialDownloader=void 0;var qo=xe(),zf=yr(),ek=require("fs"),tk=jf(),rk=require("url"),jl=ql(),ib=tb(),ik=rb(),Vf=class{constructor(e,r,i){this.blockAwareFileInfo=e,this.httpExecutor=r,this.options=i,this.fileMetadataBuffer=null,this.logger=i.logger}createRequestOptions(){let e={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,qo.configureRequestUrl)(this.options.newUrl,e),(0,qo.configureRequestOptions)(e),e}doDownload(e,r){if(e.version!==r.version)throw new Error("version is different (".concat(e.version," - ").concat(r.version,"), full download is required"));let i=this.logger,n=(0,jl.computeOperations)(e,r,i);i.debug!=null&&i.debug(JSON.stringify(n,null,2));let s=0,o=0;for(let l of n){let c=l.end-l.start;l.kind===jl.OperationKind.DOWNLOAD?s+=c:o+=c}let a=this.blockAwareFileInfo.size;if(s+o+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==a)throw new Error("Internal error, size mismatch: downloadSize: ".concat(s,", copySize: ").concat(o,", newSize: ").concat(a));return i.info("Full: ".concat(nb(a),", To download: ").concat(nb(s)," (").concat(Math.round(s/(a/100)),"%)")),this.downloadFile(n)}downloadFile(e){let r=[],i=()=>Promise.all(r.map(n=>(0,zf.close)(n.descriptor).catch(s=>{this.logger.error('cannot close file "'.concat(n.path,'": ').concat(s))})));return this.doDownloadFile(e,r).then(i).catch(n=>i().catch(s=>{try{this.logger.error("cannot close files: ".concat(s))}catch(o){try{console.error(o)}catch{}}throw n}).then(()=>{throw n}))}async doDownloadFile(e,r){let i=await(0,zf.open)(this.options.oldFile,"r");r.push({descriptor:i,path:this.options.oldFile});let n=await(0,zf.open)(this.options.newFile,"w");r.push({descriptor:n,path:this.options.newFile});let s=(0,ek.createWriteStream)(this.options.newFile,{fd:n});await new Promise((o,a)=>{let l=[],c;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){let v=[],O=0;for(let L of e)L.kind===jl.OperationKind.DOWNLOAD&&(v.push(L.end-L.start),O+=L.end-L.start);let I={expectedByteCounts:v,grandTotal:O};c=new ik.ProgressDifferentialDownloadCallbackTransform(I,this.options.cancellationToken,this.options.onProgress),l.push(c)}let u=new qo.DigestTransform(this.blockAwareFileInfo.sha512);u.isValidateOnEnd=!1,l.push(u),s.on("finish",()=>{s.close(()=>{r.splice(1,1);try{u.validate()}catch(v){a(v);return}o(void 0)})}),l.push(s);let h=null;for(let v of l)v.on("error",a),h==null?h=v:h=h.pipe(v);let f=l[0],d;if(this.options.isUseMultipleRangeRequest){d=(0,ib.executeTasksUsingMultipleRangeRequests)(this,e,f,i,a),d(0);return}let y=0,A=null;this.logger.info("Differential download: ".concat(this.options.newUrl));let E=this.createRequestOptions();E.redirect="manual",d=v=>{var O,I;if(v>=e.length){this.fileMetadataBuffer!=null&&f.write(this.fileMetadataBuffer),f.end();return}let L=e[v++];if(L.kind===jl.OperationKind.COPY){c&&c.beginFileCopy(),(0,tk.copyData)(L,f,i,a,()=>d(v));return}let oe="bytes=".concat(L.start,"-").concat(L.end-1);E.headers.range=oe,(I=(O=this.logger)===null||O===void 0?void 0:O.debug)===null||I===void 0||I.call(O,"download range: ".concat(oe)),c&&c.beginRangeDownload();let B=this.httpExecutor.createRequest(E,z=>{z.on("error",a),z.on("aborted",()=>{a(new Error("response has been aborted by the server"))}),z.statusCode>=400&&a((0,qo.createHttpError)(z)),z.pipe(f,{end:!1}),z.once("end",()=>{c&&c.endRangeDownload(),++y===100?(y=0,setTimeout(()=>d(v),1e3)):d(v)})});B.on("redirect",(z,S,D)=>{this.logger.info("Redirect to ".concat(nk(D))),A=D,(0,qo.configureRequestUrl)(new rk.URL(A),E),B.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(B,a),B.end()},d(0)})}async readRemoteBytes(e,r){let i=Buffer.allocUnsafe(r+1-e),n=this.createRequestOptions();n.headers.range="bytes=".concat(e,"-").concat(r);let s=0;if(await this.request(n,o=>{o.copy(i,s),s+=o.length}),s!==i.length)throw new Error("Received data length ".concat(s," is not equal to expected ").concat(i.length));return i}request(e,r){return new Promise((i,n)=>{let s=this.httpExecutor.createRequest(e,o=>{(0,ib.checkIsRangesSupported)(o,n)&&(o.on("error",n),o.on("aborted",()=>{n(new Error("response has been aborted by the server"))}),o.on("data",r),o.on("end",()=>i()))});this.httpExecutor.addErrorAndTimeoutHandlers(s,n),s.end()})}};Hl.DifferentialDownloader=Vf;function nb(t,e=" KB"){return new Intl.NumberFormat("en").format((t/1024).toFixed(2))+e}function nk(t){let e=t.indexOf("?");return e<0?t:t.substring(0,e)}});var sb=w(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.GenericDifferentialDownloader=void 0;var sk=Yf(),Qf=class extends sk.DifferentialDownloader{download(e,r){return this.doDownload(e,r)}};Wl.GenericDifferentialDownloader=Qf});var ci=w(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.UpdaterSignal=vt.UPDATE_DOWNLOADED=vt.DOWNLOAD_PROGRESS=vt.CancellationToken=void 0;vt.addHandler=Mo;var ok=xe();Object.defineProperty(vt,"CancellationToken",{enumerable:!0,get:function(){return ok.CancellationToken}});vt.DOWNLOAD_PROGRESS="download-progress";vt.UPDATE_DOWNLOADED="update-downloaded";var Xf=class{constructor(e){this.emitter=e}login(e){Mo(this.emitter,"login",e)}progress(e){Mo(this.emitter,vt.DOWNLOAD_PROGRESS,e)}updateDownloaded(e){Mo(this.emitter,vt.UPDATE_DOWNLOADED,e)}updateCancelled(e){Mo(this.emitter,"update-cancelled",e)}};vt.UpdaterSignal=Xf;var ak=!1;function Mo(t,e,r){ak?t.on(e,(...i)=>{console.log("%s %s",e,i),r(...i)}):t.on(e,r)}});var zl=w(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.NoOpLogger=os.AppUpdater=void 0;var rt=xe(),lk=require("crypto"),uk=require("os"),ck=require("events"),ns=yr(),hk=nl(),Kf=X0(),Ji=require("path"),Zi=af(),ob=SS(),fk=vS(),ab=TS(),dk=If(),Jf=YS(),pk=require("zlib"),mk=oi(),gk=sb(),ss=ci(),Zf=class t extends ck.EventEmitter{get channel(){return this._channel}set channel(e){if(this._channel!=null){if(typeof e!="string")throw(0,rt.newError)("Channel must be a string, but got: ".concat(e),"ERR_UPDATER_INVALID_CHANNEL");if(e.length===0)throw(0,rt.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=e,this.allowDowngrade=!0}addAuthHeader(e){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:e})}get netSession(){return(0,ab.getNetSession)()}get logger(){return this._logger}set logger(e){this._logger=e??new Gl}set updateConfigPath(e){this.clientPromise=null,this._appUpdateConfigPath=e,this.configOnDisk=new Kf.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(e){e&&(this._isUpdateSupported=e)}constructor(e,r){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new ss.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=s=>this.checkIfUpdateSupported(s),this.clientPromise=null,this.stagingUserIdPromise=new Kf.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new Kf.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",s=>{this._logger.error("Error: ".concat(s.stack||s.message))}),r==null?(this.app=new fk.ElectronAppAdapter,this.httpExecutor=new ab.ElectronHttpExecutor((s,o)=>this.emit("login",s,o))):(this.app=r,this.httpExecutor=null);let i=this.app.version,n=(0,Zi.parse)(i);if(n==null)throw(0,rt.newError)('App version is not a valid semver version: "'.concat(i,'"'),"ERR_UPDATER_INVALID_VERSION");this.currentVersion=n,this.allowPrerelease=yk(n),e!=null&&(this.setFeedURL(e),typeof e!="string"&&e.requestHeaders&&(this.requestHeaders=e.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(e){let r=this.createProviderRuntimeOptions(),i;typeof e=="string"?i=new dk.GenericProvider({provider:"generic",url:e},this,{...r,isUseMultipleRangeRequest:(0,Jf.isUrlProbablySupportMultiRangeRequests)(e)}):i=(0,Jf.createClient)(e,this,r),this.clientPromise=Promise.resolve(i)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let e=this.checkForUpdatesPromise;if(e!=null)return this._logger.info("Checking for update (already in progress)"),e;let r=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),e=this.doCheckForUpdates().then(i=>(r(),i)).catch(i=>{throw r(),this.emit("error",i,"Cannot check for updates: ".concat((i.stack||i).toString())),i}),this.checkForUpdatesPromise=e,e}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(e){return this.checkForUpdates().then(r=>r?.downloadPromise?(r.downloadPromise.then(()=>{let i=t.formatDownloadNotification(r.updateInfo.version,this.app.name,e);new(require("electron")).Notification(i).show()}),r):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),r))}static formatDownloadNotification(e,r,i){return i==null&&(i={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),i={title:i.title.replace("{appName}",r).replace("{version}",e),body:i.body.replace("{appName}",r).replace("{version}",e)},i}async isStagingMatch(e){let r=e.stagingPercentage,i=r;if(i==null)return!0;if(i=parseInt(i,10),isNaN(i))return this._logger.warn("Staging percentage is NaN: ".concat(r)),!0;i=i/100;let n=await this.stagingUserIdPromise.value,o=rt.UUID.parse(n).readUInt32BE(12)/4294967295;return this._logger.info("Staging percentage: ".concat(i,", percentage: ").concat(o,", user id: ").concat(n)),o<i}computeFinalHeaders(e){return this.requestHeaders!=null&&Object.assign(e,this.requestHeaders),e}async isUpdateAvailable(e){let r=(0,Zi.parse)(e.version);if(r==null)throw(0,rt.newError)('This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "'.concat(e.version,'"'),"ERR_UPDATER_INVALID_VERSION");let i=this.currentVersion;if((0,Zi.eq)(r,i)||!await Promise.resolve(this.isUpdateSupported(e))||!await this.isStagingMatch(e))return!1;let s=(0,Zi.gt)(r,i),o=(0,Zi.lt)(r,i);return s?!0:this.allowDowngrade&&o}checkIfUpdateSupported(e){let r=e?.minimumSystemVersion,i=(0,uk.release)();if(r)try{if((0,Zi.lt)(i,r))return this._logger.info("Current OS version ".concat(i," is less than the minimum OS version required ").concat(r," for version ").concat(i)),!1}catch(n){this._logger.warn("Failed to compare current OS version(".concat(i,") with minimum OS version(").concat(r,"): ").concat((n.message||n).toString()))}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(i=>(0,Jf.createClient)(i,this,this.createProviderRuntimeOptions())));let e=await this.clientPromise,r=await this.stagingUserIdPromise.value;return e.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":r})),{info:await e.getLatestVersion(),provider:e}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");let e=await this.getUpdateInfoAndProvider(),r=e.info;if(!await this.isUpdateAvailable(r))return this._logger.info("Update for version ".concat(this.currentVersion.format()," is not available (latest version: ").concat(r.version,", downgrade is ").concat(this.allowDowngrade?"allowed":"disallowed",").")),this.emit("update-not-available",r),{isUpdateAvailable:!1,versionInfo:r,updateInfo:r};this.updateInfoAndProvider=e,this.onUpdateAvailable(r);let i=new rt.CancellationToken;return{isUpdateAvailable:!0,versionInfo:r,updateInfo:r,cancellationToken:i,downloadPromise:this.autoDownload?this.downloadUpdate(i):null}}onUpdateAvailable(e){this._logger.info("Found version ".concat(e.version," (url: ").concat((0,rt.asArray)(e.files).map(r=>r.url).join(", "),")")),this.emit("update-available",e)}downloadUpdate(e=new rt.CancellationToken){let r=this.updateInfoAndProvider;if(r==null){let n=new Error("Please check update first");return this.dispatchError(n),Promise.reject(n)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info("Downloading update from ".concat((0,rt.asArray)(r.info.files).map(n=>n.url).join(", ")));let i=n=>{if(!(n instanceof rt.CancellationError))try{this.dispatchError(n)}catch(s){this._logger.warn("Cannot dispatch error event: ".concat(s.stack||s))}return n};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:r,requestHeaders:this.computeRequestHeaders(r.provider),cancellationToken:e,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(n=>{throw i(n)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(e){this.emit("error",e,(e.stack||e).toString())}dispatchUpdateDownloaded(e){this.emit(ss.UPDATE_DOWNLOADED,e)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,hk.load)(await(0,ns.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(e){let r=e.fileExtraDownloadHeaders;if(r!=null){let i=this.requestHeaders;return i==null?r:{...r,...i}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){let e=Ji.join(this.app.userDataPath,".updaterId");try{let i=await(0,ns.readFile)(e,"utf-8");if(rt.UUID.check(i))return i;this._logger.warn("Staging user id file exists, but content was invalid: ".concat(i))}catch(i){i.code!=="ENOENT"&&this._logger.warn("Couldn't read staging user ID, creating a blank one: ".concat(i))}let r=rt.UUID.v5((0,lk.randomBytes)(4096),rt.UUID.OID);this._logger.info("Generated new staging user ID: ".concat(r));try{await(0,ns.outputFile)(e,r)}catch(i){this._logger.warn("Couldn't write out staging user ID: ".concat(i))}return r}get isAddNoCacheQuery(){let e=this.requestHeaders;if(e==null)return!0;for(let r of Object.keys(e)){let i=r.toLowerCase();if(i==="authorization"||i==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let e=this.downloadedUpdateHelper;if(e==null){let r=(await this.configOnDisk.value).updaterCacheDirName,i=this._logger;r==null&&i.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");let n=Ji.join(this.app.baseCachePath,r||this.app.name);i.debug!=null&&i.debug("updater cache dir: ".concat(n)),e=new ob.DownloadedUpdateHelper(n),this.downloadedUpdateHelper=e}return e}async executeDownload(e){let r=e.fileInfo,i={headers:e.downloadUpdateOptions.requestHeaders,cancellationToken:e.downloadUpdateOptions.cancellationToken,sha2:r.info.sha2,sha512:r.info.sha512};this.listenerCount(ss.DOWNLOAD_PROGRESS)>0&&(i.onProgress=O=>this.emit(ss.DOWNLOAD_PROGRESS,O));let n=e.downloadUpdateOptions.updateInfoAndProvider.info,s=n.version,o=r.packageInfo;function a(){let O=decodeURIComponent(e.fileInfo.url.pathname);return O.endsWith(".".concat(e.fileExtension))?Ji.basename(O):e.fileInfo.info.url}let l=await this.getOrCreateDownloadHelper(),c=l.cacheDirForPendingUpdate;await(0,ns.mkdir)(c,{recursive:!0});let u=a(),h=Ji.join(c,u),f=o==null?null:Ji.join(c,"package-".concat(s).concat(Ji.extname(o.path)||".7z")),d=async O=>(await l.setDownloadedFile(h,f,n,r,u,O),await e.done({...n,downloadedFile:h}),f==null?[h]:[h,f]),y=this._logger,A=await l.validateDownloadedPath(h,n,r,y);if(A!=null)return h=A,await d(!1);let E=async()=>(await l.clear().catch(()=>{}),await(0,ns.unlink)(h).catch(()=>{})),v=await(0,ob.createTempUpdateFile)("temp-".concat(u),c,y);try{await e.task(v,i,f,E),await(0,rt.retry)(()=>(0,ns.rename)(v,h),60,500,0,0,O=>O instanceof Error&&/^EBUSY:/.test(O.message))}catch(O){throw await E(),O instanceof rt.CancellationError&&(y.info("cancelled"),this.emit("update-cancelled",n)),O}return y.info("New version ".concat(s," has been downloaded to ").concat(h)),await d(!0)}async differentialDownloadInstaller(e,r,i,n,s){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;let o=(0,mk.blockmapFiles)(e.url,this.app.version,r.updateInfoAndProvider.info.version);this._logger.info('Download block maps (old: "'.concat(o[0],'", new: ').concat(o[1],")"));let a=async u=>{let h=await this.httpExecutor.downloadToBuffer(u,{headers:r.requestHeaders,cancellationToken:r.cancellationToken});if(h==null||h.length===0)throw new Error('Blockmap "'.concat(u.href,'" is empty'));try{return JSON.parse((0,pk.gunzipSync)(h).toString())}catch(f){throw new Error('Cannot parse blockmap "'.concat(u.href,'", error: ').concat(f))}},l={newUrl:e.url,oldFile:Ji.join(this.downloadedUpdateHelper.cacheDir,s),logger:this._logger,newFile:i,isUseMultipleRangeRequest:n.isUseMultipleRangeRequest,requestHeaders:r.requestHeaders,cancellationToken:r.cancellationToken};this.listenerCount(ss.DOWNLOAD_PROGRESS)>0&&(l.onProgress=u=>this.emit(ss.DOWNLOAD_PROGRESS,u));let c=await Promise.all(o.map(u=>a(u)));return await new gk.GenericDifferentialDownloader(e.info,this.httpExecutor,l).download(c[0],c[1]),!1}catch(o){if(this._logger.error("Cannot download differentially, fallback to full download: ".concat(o.stack||o)),this._testOnlyOptions!=null)throw o;return!0}}};os.AppUpdater=Zf;function yk(t){let e=(0,Zi.prerelease)(t);return e!=null&&e.length>0}var Gl=class{info(e){}warn(e){}error(e){}};os.NoOpLogger=Gl});var en=w(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.BaseUpdater=void 0;var lb=require("child_process"),wk=zl(),ed=class extends wk.AppUpdater{constructor(e,r){super(e,r),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(e=!1,r=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(e,e?r:this.autoRunAppAfterInstall)?setImmediate(()=>{require("electron").autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(e){return super.executeDownload({...e,done:r=>(this.dispatchUpdateDownloaded(r),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(e=!1,r=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;let i=this.downloadedUpdateHelper,n=this.installerPath,s=i==null?null:i.downloadedFileInfo;if(n==null||s==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info("Install: isSilent: ".concat(e,", isForceRunAfter: ").concat(r)),this.doInstall({isSilent:e,isForceRunAfter:r,isAdminRightsRequired:s.isAdminRightsRequired})}catch(o){return this.dispatchError(o),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(e=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(e!==0){this._logger.info("Update will be not installed on quit because application is quitting with exit code ".concat(e));return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){let{name:e}=this.app,r='"'.concat(e,' would like to update"'),i=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),n=[i];return/kdesudo/i.test(i)?(n.push("--comment",r),n.push("-c")):/gksudo/i.test(i)?n.push("--message",r):/pkexec/i.test(i)&&n.push("--disable-internal-agent"),n.join(" ")}spawnSyncLog(e,r=[],i={}){this._logger.info("Executing: ".concat(e," with args: ").concat(r));let n=(0,lb.spawnSync)(e,r,{env:{...process.env,...i},encoding:"utf-8",shell:!0}),{error:s,status:o,stdout:a,stderr:l}=n;if(s!=null)throw this._logger.error(l),s;if(o!=null&&o!==0)throw this._logger.error(l),new Error("Command ".concat(e," exited with code ").concat(o));return a.trim()}async spawnLog(e,r=[],i=void 0,n="ignore"){return this._logger.info("Executing: ".concat(e," with args: ").concat(r)),new Promise((s,o)=>{try{let a={stdio:n,env:i,detached:!0},l=(0,lb.spawn)(e,r,a);l.on("error",c=>{o(c)}),l.unref(),l.pid!==void 0&&s(!0)}catch(a){o(a)}})}};Vl.BaseUpdater=ed});var rd=w(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;var as=yr(),Ak=Yf(),Ek=require("zlib"),td=class extends Ak.DifferentialDownloader{async download(){let e=this.blockAwareFileInfo,r=e.size,i=r-(e.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(i,r-1);let n=ub(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await Sk(this.options.oldFile),n)}};Yl.FileWithEmbeddedBlockMapDifferentialDownloader=td;function ub(t){return JSON.parse((0,Ek.inflateRawSync)(t).toString())}async function Sk(t){let e=await(0,as.open)(t,"r");try{let r=(await(0,as.fstat)(e)).size,i=Buffer.allocUnsafe(4);await(0,as.read)(e,i,0,i.length,r-i.length);let n=Buffer.allocUnsafe(i.readUInt32BE(0));return await(0,as.read)(e,n,0,n.length,r-i.length-n.length),await(0,as.close)(e),ub(n)}catch(r){throw await(0,as.close)(e),r}}});var nd=w(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.AppImageUpdater=void 0;var cb=xe(),hb=require("child_process"),bk=yr(),_k=require("fs"),Uo=require("path"),vk=en(),Ok=rd(),Tk=_t(),fb=ci(),id=class extends vk.BaseUpdater{constructor(e,r){super(e,r)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider,i=(0,Tk.findFile)(r.resolveFiles(e.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:i,downloadUpdateOptions:e,task:async(n,s)=>{let o=process.env.APPIMAGE;if(o==null)throw(0,cb.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(e.disableDifferentialDownload||await this.downloadDifferential(i,o,n,r,e))&&await this.httpExecutor.download(i.url,n,s),await(0,bk.chmod)(n,493)}})}async downloadDifferential(e,r,i,n,s){try{let o={newUrl:e.url,oldFile:r,logger:this._logger,newFile:i,isUseMultipleRangeRequest:n.isUseMultipleRangeRequest,requestHeaders:s.requestHeaders,cancellationToken:s.cancellationToken};return this.listenerCount(fb.DOWNLOAD_PROGRESS)>0&&(o.onProgress=a=>this.emit(fb.DOWNLOAD_PROGRESS,a)),await new Ok.FileWithEmbeddedBlockMapDifferentialDownloader(e.info,this.httpExecutor,o).download(),!1}catch(o){return this._logger.error("Cannot download differentially, fallback to full download: ".concat(o.stack||o)),process.platform==="linux"}}doInstall(e){let r=process.env.APPIMAGE;if(r==null)throw(0,cb.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,_k.unlinkSync)(r);let i,n=Uo.basename(r),s=this.installerPath;if(s==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;Uo.basename(s)===n||!/\d+\.\d+\.\d+/.test(n)?i=r:i=Uo.join(Uo.dirname(r),Uo.basename(s)),(0,hb.execFileSync)("mv",["-f",s,i]),i!==r&&this.emit("appimage-filename-updated",i);let o={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return e.isForceRunAfter?this.spawnLog(i,[],o):(o.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,hb.execFileSync)(i,[],{env:o})),!0}};Ql.AppImageUpdater=id});var od=w(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.DebUpdater=void 0;var Ck=en(),Rk=_t(),db=ci(),sd=class extends Ck.BaseUpdater{constructor(e,r){super(e,r)}doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider,i=(0,Rk.findFile)(r.resolveFiles(e.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:i,downloadUpdateOptions:e,task:async(n,s)=>{this.listenerCount(db.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(db.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(i.url,n,s)}})}get installerPath(){var e,r;return(r=(e=super.installerPath)===null||e===void 0?void 0:e.replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}doInstall(e){let r=this.wrapSudo(),i=/pkexec/i.test(r)?"":'"',n=this.installerPath;if(n==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let s=["dpkg","-i",n,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(r,["".concat(i,"/bin/bash"),"-c","'".concat(s.join(" "),"'").concat(i)]),e.isForceRunAfter&&this.app.relaunch(),!0}};Xl.DebUpdater=sd});var ld=w(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.PacmanUpdater=void 0;var Ik=en(),pb=ci(),Nk=_t(),ad=class extends Ik.BaseUpdater{constructor(e,r){super(e,r)}doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider,i=(0,Nk.findFile)(r.resolveFiles(e.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:i,downloadUpdateOptions:e,task:async(n,s)=>{this.listenerCount(pb.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(pb.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(i.url,n,s)}})}get installerPath(){var e,r;return(r=(e=super.installerPath)===null||e===void 0?void 0:e.replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}doInstall(e){let r=this.wrapSudo(),i=/pkexec/i.test(r)?"":'"',n=this.installerPath;if(n==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let s=["pacman","-U","--noconfirm",n];return this.spawnSyncLog(r,["".concat(i,"/bin/bash"),"-c","'".concat(s.join(" "),"'").concat(i)]),e.isForceRunAfter&&this.app.relaunch(),!0}};Kl.PacmanUpdater=ad});var cd=w(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.RpmUpdater=void 0;var xk=en(),mb=ci(),Dk=_t(),ud=class extends xk.BaseUpdater{constructor(e,r){super(e,r)}doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider,i=(0,Dk.findFile)(r.resolveFiles(e.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:i,downloadUpdateOptions:e,task:async(n,s)=>{this.listenerCount(mb.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(mb.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(i.url,n,s)}})}get installerPath(){var e,r;return(r=(e=super.installerPath)===null||e===void 0?void 0:e.replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}doInstall(e){let r=this.wrapSudo(),i=/pkexec/i.test(r)?"":'"',n=this.spawnSyncLog("which zypper"),s=this.installerPath;if(s==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let o;return n?o=[n,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",s]:o=[this.spawnSyncLog("which dnf || which yum"),"-y","install",s],this.spawnSyncLog(r,["".concat(i,"/bin/bash"),"-c","'".concat(o.join(" "),"'").concat(i)]),e.isForceRunAfter&&this.app.relaunch(),!0}};Jl.RpmUpdater=ud});var dd=w(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.MacUpdater=void 0;var gb=xe(),hd=yr(),Pk=require("fs"),yb=require("path"),Fk=require("http"),Lk=zl(),$k=_t(),wb=require("child_process"),Ab=require("crypto"),fd=class extends Lk.AppUpdater{constructor(e,r){super(e,r),this.nativeUpdater=require("electron").autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",i=>{this._logger.warn(i),this.emit("error",i)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(e){this._logger.debug!=null&&this._logger.debug(e)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(e=>{e&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider.resolveFiles(e.updateInfoAndProvider.info),i=this._logger,n="sysctl.proc_translated",s=!1;try{this.debug("Checking for macOS Rosetta environment"),s=(0,wb.execFileSync)("sysctl",[n],{encoding:"utf8"}).includes("".concat(n,": 1")),i.info("Checked for macOS Rosetta environment (isRosetta=".concat(s,")"))}catch(h){i.warn("sysctl shell command to check for macOS Rosetta environment failed: ".concat(h))}let o=!1;try{this.debug("Checking for arm64 in uname");let f=(0,wb.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");i.info("Checked 'uname -a': arm64=".concat(f)),o=o||f}catch(h){i.warn("uname shell command to check for arm64 failed: ".concat(h))}o=o||process.arch==="arm64"||s;let a=h=>{var f;return h.url.pathname.includes("arm64")||((f=h.info.url)===null||f===void 0?void 0:f.includes("arm64"))};o&&r.some(a)?r=r.filter(h=>o===a(h)):r=r.filter(h=>!a(h));let l=(0,$k.findFile)(r,"zip",["pkg","dmg"]);if(l==null)throw(0,gb.newError)("ZIP file not provided: ".concat((0,gb.safeStringifyJson)(r)),"ERR_UPDATER_ZIP_FILE_NOT_FOUND");let c=e.updateInfoAndProvider.provider,u="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:l,downloadUpdateOptions:e,task:async(h,f)=>{let d=yb.join(this.downloadedUpdateHelper.cacheDir,u),y=()=>(0,hd.pathExistsSync)(d)?!e.disableDifferentialDownload:(i.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1),A=!0;y()&&(A=await this.differentialDownloadInstaller(l,e,h,c,u)),A&&await this.httpExecutor.download(l.url,h,f)},done:async h=>{if(!e.disableDifferentialDownload)try{let f=yb.join(this.downloadedUpdateHelper.cacheDir,u);await(0,hd.copyFile)(h.downloadedFile,f)}catch(f){this._logger.warn("Unable to copy file for caching for future differential downloads: ".concat(f.message))}return this.updateDownloaded(l,h)}})}async updateDownloaded(e,r){var i;let n=r.downloadedFile,s=(i=e.info.size)!==null&&i!==void 0?i:(await(0,hd.stat)(n)).size,o=this._logger,a="fileToProxy=".concat(e.url.href);this.closeServerIfExists(),this.debug("Creating proxy server for native Squirrel.Mac (".concat(a,")")),this.server=(0,Fk.createServer)(),this.debug("Proxy server for native Squirrel.Mac is created (".concat(a,")")),this.server.on("close",()=>{o.info("Proxy server for native Squirrel.Mac is closed (".concat(a,")"))});let l=c=>{let u=c.address();return typeof u=="string"?u:"http://127.0.0.1:".concat(u?.port)};return await new Promise((c,u)=>{let h=(0,Ab.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),f=Buffer.from("autoupdater:".concat(h),"ascii"),d="/".concat((0,Ab.randomBytes)(64).toString("hex"),".zip");this.server.on("request",(y,A)=>{let E=y.url;if(o.info("".concat(E," requested")),E==="/"){if(!y.headers.authorization||y.headers.authorization.indexOf("Basic ")===-1){A.statusCode=401,A.statusMessage="Invalid Authentication Credentials",A.end(),o.warn("No authenthication info");return}let I=y.headers.authorization.split(" ")[1],L=Buffer.from(I,"base64").toString("ascii"),[oe,B]=L.split(":");if(oe!=="autoupdater"||B!==h){A.statusCode=401,A.statusMessage="Invalid Authentication Credentials",A.end(),o.warn("Invalid authenthication credentials");return}let z=Buffer.from('{ "url": "'.concat(l(this.server)).concat(d,'" }'));A.writeHead(200,{"Content-Type":"application/json","Content-Length":z.length}),A.end(z);return}if(!E.startsWith(d)){o.warn("".concat(E," requested, but not supported")),A.writeHead(404),A.end();return}o.info("".concat(d," requested by Squirrel.Mac, pipe ").concat(n));let v=!1;A.on("finish",()=>{v||(this.nativeUpdater.removeListener("error",u),c([]))});let O=(0,Pk.createReadStream)(n);O.on("error",I=>{try{A.end()}catch(L){o.warn("cannot end response: ".concat(L))}v=!0,this.nativeUpdater.removeListener("error",u),u(new Error('Cannot pipe "'.concat(n,'": ').concat(I)))}),A.writeHead(200,{"Content-Type":"application/zip","Content-Length":s}),O.pipe(A)}),this.debug("Proxy server for native Squirrel.Mac is starting to listen (".concat(a,")")),this.server.listen(0,"127.0.0.1",()=>{this.debug("Proxy server for native Squirrel.Mac is listening (address=".concat(l(this.server),", ").concat(a,")")),this.nativeUpdater.setFeedURL({url:l(this.server),headers:{"Cache-Control":"no-cache",Authorization:"Basic ".concat(f.toString("base64"))}}),this.dispatchUpdateDownloaded(r),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",u),this.nativeUpdater.checkForUpdates()):c([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};Zl.MacUpdater=fd});var _b=w(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.verifySignature=qk;var Eb=xe(),bb=require("child_process"),kk=require("os"),Sb=require("path");function qk(t,e,r){return new Promise((i,n)=>{let s=e.replace(/'/g,"''");r.info("Verifying signature ".concat(s)),(0,bb.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command","\"Get-AuthenticodeSignature -LiteralPath '".concat(s,"' | ConvertTo-Json -Compress\"")],{shell:!0,timeout:20*1e3},(o,a,l)=>{var c;try{if(o!=null||l){pd(r,o,l,n),i(null);return}let u=Mk(a);if(u.Status===0){try{let y=Sb.normalize(u.Path),A=Sb.normalize(e);if(r.info("LiteralPath: ".concat(y,". Update Path: ").concat(A)),y!==A){pd(r,new Error("LiteralPath of ".concat(y," is different than ").concat(A)),l,n),i(null);return}}catch(y){r.warn("Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ".concat((c=y.message)!==null&&c!==void 0?c:y.stack))}let f=(0,Eb.parseDn)(u.SignerCertificate.Subject),d=!1;for(let y of t){let A=(0,Eb.parseDn)(y);if(A.size?d=Array.from(A.keys()).every(v=>A.get(v)===f.get(v)):y===f.get("CN")&&(r.warn("Signature validated using only CN ".concat(y,". Please add your full Distinguished Name (DN) to publisherNames configuration")),d=!0),d){i(null);return}}}let h="publisherNames: ".concat(t.join(" | "),", raw info: ")+JSON.stringify(u,(f,d)=>f==="RawData"?void 0:d,2);r.warn("Sign verification failed, installer signed with incorrect certificate: ".concat(h)),i(h)}catch(u){pd(r,u,null,n),i(null);return}})})}function Mk(t){let e=JSON.parse(t);delete e.PrivateKey,delete e.IsOSBinary,delete e.SignatureType;let r=e.SignerCertificate;return r!=null&&(delete r.Archived,delete r.Extensions,delete r.Handle,delete r.HasPrivateKey,delete r.SubjectName),e}function pd(t,e,r,i){if(Uk()){t.warn("Cannot execute Get-AuthenticodeSignature: ".concat(e||r,". Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher."));return}try{(0,bb.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(n){t.warn("Cannot execute ConvertTo-Json: ".concat(n.message,". Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher."));return}e!=null&&i(e),r&&i(new Error("Cannot execute Get-AuthenticodeSignature, stderr: ".concat(r,". Failing signature validation due to unknown stderr.")))}function Uk(){let t=kk.release();return t.startsWith("6.")&&!t.startsWith("6.3")}});var yd=w(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.NsisUpdater=void 0;var eu=xe(),vb=require("path"),Bk=en(),jk=rd(),Ob=ci(),Hk=_t(),Wk=yr(),Gk=_b(),Tb=require("url"),gd=class extends Bk.BaseUpdater{constructor(e,r){super(e,r),this._verifyUpdateCodeSignature=(i,n)=>(0,Gk.verifySignature)(i,n,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(e){e&&(this._verifyUpdateCodeSignature=e)}doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider,i=(0,Hk.findFile)(r.resolveFiles(e.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:e,fileInfo:i,task:async(n,s,o,a)=>{let l=i.packageInfo,c=l!=null&&o!=null;if(c&&e.disableWebInstaller)throw(0,eu.newError)("Unable to download new version ".concat(e.updateInfoAndProvider.info.version,". Web Installers are disabled"),"ERR_UPDATER_WEB_INSTALLER_DISABLED");!c&&!e.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(c||e.disableDifferentialDownload||await this.differentialDownloadInstaller(i,e,n,r,eu.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(i.url,n,s);let u=await this.verifySignature(n);if(u!=null)throw await a(),(0,eu.newError)("New version ".concat(e.updateInfoAndProvider.info.version," is not signed by the application owner: ").concat(u),"ERR_UPDATER_INVALID_SIGNATURE");if(c&&await this.differentialDownloadWebPackage(e,l,o,r))try{await this.httpExecutor.download(new Tb.URL(l.path),o,{headers:e.requestHeaders,cancellationToken:e.cancellationToken,sha512:l.sha512})}catch(h){try{await(0,Wk.unlink)(o)}catch{}throw h}}})}async verifySignature(e){let r;try{if(r=(await this.configOnDisk.value).publisherName,r==null)return null}catch(i){if(i.code==="ENOENT")return null;throw i}return await this._verifyUpdateCodeSignature(Array.isArray(r)?r:[r],e)}doInstall(e){let r=this.installerPath;if(r==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let i=["--updated"];e.isSilent&&i.push("/S"),e.isForceRunAfter&&i.push("--force-run"),this.installDirectory&&i.push("/D=".concat(this.installDirectory));let n=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;n!=null&&i.push("--package-file=".concat(n));let s=()=>{this.spawnLog(vb.join(process.resourcesPath,"elevate.exe"),[r].concat(i)).catch(o=>this.dispatchError(o))};return e.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),s(),!0):(this.spawnLog(r,i).catch(o=>{let a=o.code;this._logger.info("Cannot run installer: error code: ".concat(a,', error message: "').concat(o.message,'", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT')),a==="UNKNOWN"||a==="EACCES"?s():a==="ENOENT"?require("electron").shell.openPath(r).catch(l=>this.dispatchError(l)):this.dispatchError(o)}),!0)}async differentialDownloadWebPackage(e,r,i,n){if(r.blockMapSize==null)return!0;try{let s={newUrl:new Tb.URL(r.path),oldFile:vb.join(this.downloadedUpdateHelper.cacheDir,eu.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:i,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:n.isUseMultipleRangeRequest,cancellationToken:e.cancellationToken};this.listenerCount(Ob.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(Ob.DOWNLOAD_PROGRESS,o)),await new jk.FileWithEmbeddedBlockMapDifferentialDownloader(r,this.httpExecutor,s).download()}catch(s){return this._logger.error("Cannot download differentially, fallback to full download: ".concat(s.stack||s)),process.platform==="win32"}return!1}};tu.NsisUpdater=gd});var Ib=w(ie=>{"use strict";var zk=ie&&ie.__createBinding||(Object.create?(function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}):(function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]})),Vk=ie&&ie.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&zk(e,t,r)};Object.defineProperty(ie,"__esModule",{value:!0});ie.NsisUpdater=ie.MacUpdater=ie.RpmUpdater=ie.PacmanUpdater=ie.DebUpdater=ie.AppImageUpdater=ie.Provider=ie.NoOpLogger=ie.AppUpdater=ie.BaseUpdater=void 0;var Cb=yr(),Yk=require("path"),Qk=en();Object.defineProperty(ie,"BaseUpdater",{enumerable:!0,get:function(){return Qk.BaseUpdater}});var Rb=zl();Object.defineProperty(ie,"AppUpdater",{enumerable:!0,get:function(){return Rb.AppUpdater}});Object.defineProperty(ie,"NoOpLogger",{enumerable:!0,get:function(){return Rb.NoOpLogger}});var Xk=_t();Object.defineProperty(ie,"Provider",{enumerable:!0,get:function(){return Xk.Provider}});var Kk=nd();Object.defineProperty(ie,"AppImageUpdater",{enumerable:!0,get:function(){return Kk.AppImageUpdater}});var Jk=od();Object.defineProperty(ie,"DebUpdater",{enumerable:!0,get:function(){return Jk.DebUpdater}});var Zk=ld();Object.defineProperty(ie,"PacmanUpdater",{enumerable:!0,get:function(){return Zk.PacmanUpdater}});var eq=cd();Object.defineProperty(ie,"RpmUpdater",{enumerable:!0,get:function(){return eq.RpmUpdater}});var tq=dd();Object.defineProperty(ie,"MacUpdater",{enumerable:!0,get:function(){return tq.MacUpdater}});var rq=yd();Object.defineProperty(ie,"NsisUpdater",{enumerable:!0,get:function(){return rq.NsisUpdater}});Vk(ci(),ie);var br;function iq(){if(process.platform==="win32")br=new(yd()).NsisUpdater;else if(process.platform==="darwin")br=new(dd()).MacUpdater;else{br=new(nd()).AppImageUpdater;try{let t=Yk.join(process.resourcesPath,"package-type");if(!(0,Cb.existsSync)(t))return br;console.info("Checking for beta autoupdate feature for deb/rpm distributions");let e=(0,Cb.readFileSync)(t).toString().trim();switch(console.info("Found package-type:",e),e){case"deb":br=new(od()).DebUpdater;break;case"rpm":br=new(cd()).RpmUpdater;break;case"pacman":br=new(ld()).PacmanUpdater;break;default:break}}catch(t){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",t.message)}}return br}Object.defineProperty(ie,"autoUpdater",{enumerable:!0,get:()=>br||iq()})});var Lb=w((_W,Fb)=>{var F={child:require("child_process"),crypto:require("crypto"),fs:require("fs"),os:require("os"),path:require("path"),process,util:require("util")};function nq(t,e){var r=F.process.platform;if(r==="darwin")return lq(t,e);if(r==="linux")return oq(t,e);if(r==="win32")return mq(t,e);e(new Error("Platform not yet supported."))}function Ft(t){if(typeof t!="string")throw new Error("Expected a string.");return t.replace(/"/g,'\\"')}function sq(){if(arguments.length<1||arguments.length>3)throw new Error("Wrong number of arguments.");var t=arguments[0],e={},r=function(){};if(typeof t!="string")throw new Error("Command should be a string.");if(arguments.length===2)if(F.util.isObject(arguments[1]))e=arguments[1];else if(F.util.isFunction(arguments[1]))r=arguments[1];else throw new Error("Expected options or callback.");else if(arguments.length===3){if(F.util.isObject(arguments[1]))e=arguments[1];else throw new Error("Expected options to be an object.");if(F.util.isFunction(arguments[2]))r=arguments[2];else throw new Error("Expected callback to be a function.")}if(/^sudo/i.test(t))return r(new Error('Command should not be prefixed with "sudo".'));if(typeof e.name>"u"){var i=F.process.title;if(Nb(i))e.name=i;else return r(new Error("process.title cannot be used as a valid name."))}else if(!Nb(e.name)){var n="";return n+="options.name must be alphanumeric only ",n+="(spaces are allowed) and <= 70 characters.",r(new Error(n))}if(typeof e.icns<"u"){if(typeof e.icns!="string")return r(new Error("options.icns must be a string if provided."));if(e.icns.trim().length===0)return r(new Error("options.icns must not be empty if provided."))}if(typeof e.env<"u"){if(typeof e.env!="object")return r(new Error("options.env must be an object if provided."));if(Object.keys(e.env).length===0)return r(new Error("options.env must not be empty if provided."));for(var s in e.env){var o=e.env[s];if(typeof s!="string"||typeof o!="string")return r(new Error("options.env environment variables must be strings."));if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(s))return r(new Error("options.env has an invalid environment variable name: "+JSON.stringify(s)));if(/[\r\n]/.test(o))return r(new Error("options.env has an invalid environment variable value: "+JSON.stringify(o)))}}var a=F.process.platform;if(a!=="darwin"&&a!=="linux"&&a!=="win32")return r(new Error("Platform not yet supported."));var l={command:t,options:e,uuid:void 0,path:void 0};nq(l,r)}function oq(t,e){aq(t,function(r,i){if(r)return e(r);var n=[];n.push('cd "'+Ft(F.process.cwd())+'";');for(var s in t.options.env){var o=t.options.env[s];n.push("export "+s+'="'+Ft(o)+'";')}n.push('"'+Ft(i)+'"'),/kdesudo/i.test(i)?(n.push("--comment",'"'+t.options.name+' wants to make changes. Enter your password to allow this."'),n.push("-d"),n.push("--")):/pkexec/i.test(i)&&n.push("--disable-internal-agent");var a="SUDOPROMPT\n";n.push('/bin/bash -c "echo '+Ft(a.trim())+"; "+Ft(t.command)+'"'),n=n.join(" "),F.child.exec(n,{encoding:"utf-8",maxBuffer:bq},function(l,c,u){var h=c&&c.slice(0,a.length)===a;h&&(c=c.slice(a.length)),l&&!h&&(/No authentication agent found/.test(u)?l.message=Sq:l.message=ru),e(l,c,u)})})}function aq(t,e){var r=0,i=["/usr/bin/kdesudo","/usr/bin/pkexec"];function n(){if(r===i.length)return e(new Error("Unable to find pkexec or kdesudo."));var s=i[r++];F.fs.stat(s,function(o){if(o){if(o.code==="ENOTDIR"||o.code==="ENOENT")return n();e(o)}else e(void 0,s)})}n()}function lq(t,e){var r=F.os.tmpdir();if(!r)return e(new Error("os.tmpdir() not defined."));var i=F.process.env.USER;if(!i)return e(new Error("env['USER'] not defined."));Db(t,function(n,s){if(n)return e(n);t.uuid=s,t.path=F.path.join(r,t.uuid,t.options.name+".app");function o(a,l,c){xb(F.path.dirname(t.path),function(u){if(a)return e(a);if(u)return e(u);e(void 0,l,c)})}uq(t,function(a,l,c){if(a)return o(a,l,c);hq(t,function(u){if(u)return o(u);dq(t,function(h,f,d){if(h)return o(h,f,d);cq(t,function(y){if(y)return o(y);fq(t,function(A,E,v){if(A)return o(A,E,v);pq(t,o)})})})})})})}function uq(t,e){var r=F.path.dirname(t.path);F.fs.mkdir(r,function(i){if(i)return e(i);var n=F.path.join(r,"sudo-prompt-applet.zip");F.fs.writeFile(n,Eq,"base64",function(s){if(s)return e(s);var o=[];o.push("/usr/bin/unzip"),o.push("-o"),o.push('"'+Ft(n)+'"'),o.push('-d "'+Ft(t.path)+'"'),o=o.join(" "),F.child.exec(o,{encoding:"utf-8"},e)})})}function cq(t,e){var r=F.path.join(t.path,"Contents","MacOS","sudo-prompt-command"),i=[];i.push('cd "'+Ft(F.process.cwd())+'"');for(var n in t.options.env){var s=t.options.env[n];i.push("export "+n+'="'+Ft(s)+'"')}i.push(t.command),i=i.join("\n"),F.fs.writeFile(r,i,"utf-8",e)}function hq(t,e){if(!t.options.icns)return e();F.fs.readFile(t.options.icns,function(r,i){if(r)return e(r);var n=F.path.join(t.path,"Contents","Resources","applet.icns");F.fs.writeFile(n,i,e)})}function fq(t,e){var r=F.path.join(t.path,"Contents","MacOS","applet"),i={cwd:F.path.dirname(r),encoding:"utf-8"};F.child.exec("./"+F.path.basename(r),i,e)}function dq(t,e){var r=F.path.join(t.path,"Contents","Info.plist"),i=Ft(r),n=Ft("CFBundleName"),s=t.options.name+" Password Prompt";if(/'/.test(s))return e(new Error("Value should not contain single quotes."));var o=[];o.push("/usr/bin/defaults"),o.push("write"),o.push('"'+i+'"'),o.push('"'+n+'"'),o.push("'"+s+"'"),o=o.join(" "),F.child.exec(o,{encoding:"utf-8"},e)}function pq(t,e){var r=F.path.join(t.path,"Contents","MacOS");F.fs.readFile(F.path.join(r,"code"),"utf-8",function(i,n){if(i){if(i.code==="ENOENT")return e(new Error(ru));e(i)}else F.fs.readFile(F.path.join(r,"stdout"),"utf-8",function(s,o){if(s)return e(s);F.fs.readFile(F.path.join(r,"stderr"),"utf-8",function(a,l){if(a)return e(a);n=parseInt(n.trim(),10),n===0?e(void 0,o,l):(a=new Error("Command failed: "+t.command+"\n"+l),a.code=n,e(a,o,l))})})})}function xb(t,e){if(typeof t!="string"||!t.trim())return e(new Error("Argument path not defined."));var r=[];if(F.process.platform==="win32"){if(/"/.test(t))return e(new Error("Argument path cannot contain double-quotes."));r.push('rmdir /s /q "'+t+'"')}else r.push("/bin/rm"),r.push("-rf"),r.push('"'+Ft(F.path.normalize(t))+'"');r=r.join(" "),F.child.exec(r,{encoding:"utf-8"},e)}function Db(t,e){F.crypto.randomBytes(256,function(r,i){r&&(i=Date.now()+""+Math.random());var n=F.crypto.createHash("SHA256");n.update("sudo-prompt-3"),n.update(t.options.name),n.update(t.command),n.update(i);var s=n.digest("hex").slice(-32);if(!s||typeof s!="string"||s.length!==32)return e(new Error("Expected a valid UUID."));e(void 0,s)})}function Nb(t){return!(!/^[a-z0-9 ]+$/i.test(t)||t.trim().length===0||t.length>70)}function mq(t,e){var r=F.os.tmpdir();if(!r)return e(new Error("os.tmpdir() not defined."));Db(t,function(i,n){if(i)return e(i);if(t.uuid=n,t.path=F.path.join(r,t.uuid),/"/.test(t.path))return e(new Error("instance.path cannot contain double-quotes."));t.pathElevate=F.path.join(t.path,"elevate.vbs"),t.pathExecute=F.path.join(t.path,"execute.bat"),t.pathCommand=F.path.join(t.path,"command.bat"),t.pathStdout=F.path.join(t.path,"stdout"),t.pathStderr=F.path.join(t.path,"stderr"),t.pathStatus=F.path.join(t.path,"status"),F.fs.mkdir(t.path,function(s){if(s)return e(s);function o(a,l,c){xb(t.path,function(u){if(a)return e(a);if(u)return e(u);e(void 0,l,c)})}Aq(t,function(a){if(a)return o(a);wq(t,function(l){if(l)return o(l);gq(t,function(c,u,h){if(c)return o(c,u,h);Pb(t,function(f){if(f)return o(f);yq(t,o)})})})})})})}function gq(t,e){var r=[];r.push("powershell.exe"),r.push("Start-Process"),r.push("-FilePath"),r.push("\"'"+t.pathExecute.replace(/'/g,"`'")+"'\""),r.push("-WindowStyle hidden"),r.push("-Verb runAs"),r=r.join(" ");var i=F.child.exec(r,{encoding:"utf-8"},function(n,s,o){if(n)return e(new Error(ru),s,o);e()});i.stdin.end()}function yq(t,e){F.fs.readFile(t.pathStatus,"utf-8",function(r,i){if(r)return e(r);F.fs.readFile(t.pathStdout,"utf-8",function(n,s){if(n)return e(n);F.fs.readFile(t.pathStderr,"utf-8",function(o,a){if(o)return e(o);i=parseInt(i.trim(),10),i===0?e(void 0,s,a):(o=new Error("Command failed: "+t.command+"\r\n"+a),o.code=i,e(o,s,a))})})})}function Pb(t,e){F.fs.stat(t.pathStatus,function(r,i){r&&r.code==="ENOENT"||i.size<2?setTimeout(function(){F.fs.stat(t.pathStdout,function(n){if(n)return e(new Error(ru));Pb(t,e)})},1e3):r?e(r):e()})}function wq(t,e){var r=F.process.cwd();if(/"/.test(r))return e(new Error("process.cwd() cannot contain double-quotes."));var i=[];i.push("@echo off"),i.push("chcp 65001>nul"),i.push('cd /d "'+r+'"');for(var n in t.options.env){var s=t.options.env[n];i.push("set "+n+"="+s.replace(/([<>\\|&^])/g,"^$1"))}i.push(t.command),i=i.join("\r\n"),F.fs.writeFile(t.pathCommand,i,"utf-8",e)}function Aq(t,e){var r=[];r.push("@echo off"),r.push('call "'+t.pathCommand+'" > "'+t.pathStdout+'" 2> "'+t.pathStderr+'"'),r.push('(echo %ERRORLEVEL%) > "'+t.pathStatus+'"'),r=r.join("\r\n"),F.fs.writeFile(t.pathExecute,r,"utf-8",e)}Fb.exports.exec=sq;var Eq="UEsDBAoAAAAAAO1YcEcAAAAAAAAAAAAAAAAJABwAQ29udGVudHMvVVQJAAPNnElWLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACACgeXBHlHaGqKEBAAC+AwAAEwAcAENvbnRlbnRzL0luZm8ucGxpc3RVVAkAA1zWSVYtkRBXdXgLAAEE9QEAAAQUAAAAfZNRb5swFIWfl1/BeA9OpSmqJkqVBCJFop1VyKQ9Ta59S6wa27NNCfv1M0naJWTsEXO+c8+9vo7v97UI3sBYruRdeBPNwgAkVYzL6i7cluvpbXifTOLP6bdV+QNngRbcugBvl/lmFYRThBZaC0AoLdMA55uiDLwHQtljGIQ75/RXhNq2jUiviqiqe6FF2CgNxnW5N5t6IGKOhb7M0f0ijj9lnLpk8il+hS5ZrZeNZAIWQqj2ge+B5YoSwX8T5xEbo17ktc40gIZQCm8glK5BuieovP5Dbp3xHSeZrHyCXYxO3wM+2wNtHHkWMAQP/bkxbkOVXPMxKuK0Dz6CMh+Wv3AwQ9gPM7INU1NtVK3Ha8sXlfoB+m6J6b4fRzv0mkezMf6R1Fe5MbG2VYYF+L+lMaGvpIKy01cOC4zzMazYKeNOQYuDYkjfjMcteCWJa8w/Zi2ugubFA5e8buqisw7qU81ltzB0xx3QC5/TFh7J/e385/zL+7+/wWbR/LwIOl/dvHiCXw03YFfEPJ9dwsWu5sV2kwnod3QoeLeL0eGdJJM/UEsDBAoAAAAAAHSBjkgAAAAAAAAAAAAAAAAPABwAQ29udGVudHMvTWFjT1MvVVQJAAMbpQ9XLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACABVHBdH7Dk4KTIIAADIYQAAFQAcAENvbnRlbnRzL01hY09TL2FwcGxldFVUCQADMiPZVVOlD1d1eAsAAQT1AQAABBQAAADtnG9sHEcVwGfti7M1/rONLNVtXHqpzsipis+pHOSWFOzEm25at3XrJI2ozbK+W/suuds79vaSuCKSpaOIxRy1+NSPRPAhlWj7AVRaQCWpTRz+CEo+RSKCCho4K67kVhUyAeV4b3fWt17fXZqKFgHvp8zO3/dmdmfPmtl5L7+8/uPXGWMNELZCaGRMgmjHIlxaBCibdcoGsewCljGCIAiCIAiCIAiCIP7r+M21d67zjb/zEaAdwr1bGHuWMQH2/2wAgqqODj0kf0F+8nGfoFRbJ8p9U0C5g/KRgwEZqZLGfrfwwJx+LP2kVWkelD9zJ2NfBr1nWt2xrhNisxWZ3Ex6MpNSc1Z+soqOO+5i7JMYt7vj9BC5jiZXBwirCT2V1c0qOgZAxwMYt9cbRyxnmUljusa9mKBjGON2tgG/PlXNGyeSRlxNGlOZKjpeBR0KxsFx+MB7VJy5GB46OOSrCLPKfEjrH3/gFry+4zOpuH8sm+VF5srW6ltVjZQ3HVnL3KRDDLsflMSADpyDyjuR0urp6AAdHRgHdOD9iOs6Ypl0OmPUupeecOW19OsQAmn3tzBy4LFH5OED3jz0MbYouM8D460BOdTXCaEF6tsgLkF8GeJPQBj16Rb4PTf5xl2NH4J8a5Vy1N3F3OcZzefMaCo5GeVTuJ2P4cUf/aH5qbbP73/utpfeevdbLzwfYfy+Q80woGan/1E+ljo/703g77IaOJY479t5rqFLDag9OjaTs/R0dCQ5aWrmTHS/qaX1ExnzWC66L2PqY7p5PBnTc71TXnn0sG7mkhkjFx3a0IL30e/rQxB+EXL68J4BBLe73r298DySk5tlGPtJY1BmOhZTc727PBH2Ke+ZhF35nTyP80oQBEEQBPFRcJTZVwpvrxZWpLmJkN0VKT4q2iORUGFBOPfnBuFX9nhELOG67f1D9pWxpw4XVrrmTklz+ZY5Wfwurm/t3ffi9cE+uM41vYbbj2fP5kNXt9sXiopwVRj6xhPlr160mttfuVi4Fs2vXv2rfc5u7UeZfxQ+y4pPh/JrpyUUBjmrofzmadGXKf0eui7KK/ZwJLQUiuRAe+mLUFQ+tFKUV3npd7AU9ytz8iqIiXYoUnoBsqdxDbXk3CXcRov9lYhoW5EQjBxb4NoSY9iQsvn5+QSuusrduAybL3eHIIIbLqyIS9CHlY3loB8rldVKuLfyOsE1+a6zhUVxYsFp3Amqz8tr7Lz8dza1JF8TmC3/syivYVtcfxcWOycWQDvuLcrdnc61y7mGnWsErgmsXDbK5TKkscnypJvGhsuH3TQ2X37YTaPQ8ucw7W6t1LR2TFfjekqb0SGTiedTOmz0klZSSyWf0U01pqVSufXGmThsjs20OpU3Yrjuxbnu4u+GP8b1LO6PcX2L4Q6+v8Q07u9aQFLy71Ckt54TIfjfNdzfDkMYhTAOIXHXh39vCYIgCIIgCIIgCIL4z3Nm+84/Ci1Nn8b0ryHsgbBX1rbgOXD7LZJzNtrC0/gFqYOn8csQ/GONguQchPXzcvy+9CBzvk84HxkO+tJH3bRz5Fb0pb/nS3/fl/6BL/2aL43faLzz3Wbmju8W5p6pttaoR9THjgyZ0zEeH2eqqmbNzLShpXVIpxOqflKP5S1dTehaXDeZqhvHk2bGYOo+LZXal0lnM4ZuWMPJXFazYgmmPp7VjWF9SsunrPVa1HpMn0lPm2r8hGZO3aea+nQyZ+mmmtNjFp5i4oG0lTChE+eDj2pm8lbSgDFoln4yCRp00zQyEDmZtBZLbGxnanHzgWh092d29e/uv+/f+DIQBEEQBEEQBEEQ/7P81rX/FxoZm/Xs/5UmtP8PO/W3M9fGvKoPAEfYXLQJ1HOpmk+AJx80OOb5m/URGG9z9c378rVs9F15tPXP1dS3wvVtC+Q9/H4DFX21fQcY9zvo9eXrj6++D0Af1zfqy9eyx3f16QnVMayufr+zXN+sL99YRx/O69er+RdIgXkNxJv9DfBTDIxLPa6Zudr6enz5euO6ke9Bj7TRzr0noK+JbczfyA9hgOvr9OX98t57XNFX3ydhlOsL+2T8+oK/ucrvNOCfEHbbXhAqeebLB/0V7oYp7+Pt8PsZWnl1+urRpAn7SUCcYBX/hkth95kd2cFYllX3bxB4+xCrzcCO6v4PbXzo1fwbEM/H4ds/f/nCgZH+8k+j0vNPv7Jlz7qPQ1PFx+FVPoZ76ozj42K87YP9/cT7xuf9UfpSeP0MsJvzp0A8/4g3w+78ef4R+F4QBEEQBPH/w1Gm2FeUwturytwpUSnmJfta4Q3h3J8aFeE9xf7d1ZBSOCcqhftZ/m+YKuG6wV4qaQzdGED0Z2jJ/zpa9ZcegjIF7fkVaIBrt11nJxYOOepXpPPyKjsvvytOLcnvCWxJfh87V+xTa0rx1Kpj0a8UFqWJhXL3fgHt9xXn+rCz7Bop3rkTEkNj5e7bIZ7HNRZb/ku5XE6g58HyZUzdj6mLjh1/Pbt7XMt5dvfvtLl1Fbv7BtbhrtyEPW6V038H1yE88yQTTkqC1LJVnIeaCNe7dr3sEPEe6lCb9LWGfa3efvNG8pe5fF8NeW8g3n7jCI+/xOOEVH19KvF9oudHH2n/YOtYgiAIgiAIgiAIgiA+fm69mx3aO8bYtkHn/xlwDq8nkwaavz9h9swzc+DWwRrm71A5CJVVjeChTtk26Fqwu0fxQjUL+9vqHVV/KC53OUd+bJxVfBkw7/gzCO5pr3dOK/g+WUQDeZlV/A2QRwJ5THjn1/xcd9BfhlT1KbgpVwLn+W2amGr2//8CUEsDBBQAAAAIAAVHj0ga7FYjfQEAAKoCAAAhABwAQ29udGVudHMvTWFjT1Mvc3Vkby1wcm9tcHQtc2NyaXB0VVQJAAOJkBBXipAQV3V4CwABBPUBAAAEFAAAAI1SO08cMRDu91cMHIKGxUB5xSGEUqTlFKWMvPYca+EXnjGXy6/PeNcg0qVay+PvObs5U5OLatI0DxvYIwNVm4BdQGIdMhxSkauJ8K1i7FOjvSdwB2A+/WJnXpEJdEGwjvTk0W6HhTW8WldgzKDedVF2Ug2tLn7svz3DDpTFdxWr93C/u7wbVKWyoDhVM/8XZAOPOXvcm+IyXxGcizeaUca0XJ1D0CfQnlEysE2VwbuII0br4gvdCMF37m9IoC39+oxTO2EpS8oZJdtRS0aIKY5/sCQoyLVEMMki6Ghl0BGN9SeuICkPIctXDHDDSB9oGEQi1yZWUAda8EZnIcR/eIOOVao+9TrbkpYFjLmkkHk0KYSGvdt12/e71cP6Hs2c4OJBemtsYusplVX+GLHQ7DKkQ098/ZF38dLEpRCeNUMlMW90BIseeQkWtuu2qKmIyDHCuqFuo1N11Ud/1Cf6CHb7Sfxld2ATklQoUGEDActfZ5326WU74G/HcDv8BVBLAwQKAAAAAADtWHBHqiAGewgAAAAIAAAAEAAcAENvbnRlbnRzL1BrZ0luZm9VVAkAA82cSVYqkRBXdXgLAAEE9QEAAAQUAAAAQVBQTGFwbHRQSwMECgAAAAAAm3lwRwAAAAAAAAAAAAAAABMAHABDb250ZW50cy9SZXNvdXJjZXMvVVQJAANW1klWLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACACAeXBHfrnysfYGAAAf3AAAHgAcAENvbnRlbnRzL1Jlc291cmNlcy9hcHBsZXQuaWNuc1VUCQADH9ZJVnGlD1d1eAsAAQT1AQAABBQAAADt3Xk81Hkcx/Hvb5yVo5bGsVlKbcpRRqFlGZGS5JikRBIdI0OZttMZloqiYwrVjD1UqJaUokTRubG72bZVjqR1VZNjp2XEGo9H+9gt+9h/9tHx8H7N4/fw5MHjYeaPz+P7+P7x/bL9griEPNBm+001J0S+ZbvL/NmKwzWHE0IUHebYuRFCEckjL9v/xSvk2EpCpBXZtrYuDra2Oi4hwSvZgSsIMU9MdPdePcZd1aqQu0p3fDkrcFrs+mPWihMU9y6clp5XEFFdbRrEczCtGtfkL3pWfvBGublJ4ct051kuocYtaaqll/IjdfR+V75vlTdl//AJVZU6elZ5f0S7NO3MaE2xMElhF+TUrHgW2nFYeGTrs/OrhDJN5zMX8ZJVKXrqSUM1Rj03bnf85/pJMXECNdl0D1ctfe/j82imziM2nllSa3t5q8+vP1f38k/k22uN1lmnvfz0b8dGxO+mnh91v7WB2tKdrG3d4vmJaHlTvjGzdMqWcw/9frnCtQpPZK9sMKi/Ey/jzgqIPzBy9/dlf9griI2/u+sjcApozWx6/NXytC+qBTlrhb69fE7J6tgOzpWjFSl8qxihr5dYf/qExoeupY6Ze/j2PfL1azhhZ8fU3eelJY+ylk16UJN6KmOU0M4r+75cZhH/mxNndowNb4wx7TCoN4yvMGu8ySq5l5W5t+xQyYbS/Ome7e0W0sXbC5aktl0LEXNYR9obH7dMT721dbNdT/eFzXNEYSH8GU+bQ5s6YniGcj3fHtgXPbo0Oj4i3d5G1Fjfm/Ng7kgpjQDNxw4RRnu+Vloy5ZE3J6OpwlFBzaxS25He2h3lJuizO70zJPLUYtks14RE5yrD8y2tXa5l5Wqh/NBY06yoiCLF08Nk9A5Ojbs43GmR1Ch/PaZsLf3e6uPRSrIM1ROqGjt80leqfdxYbNn+WV7K7ZKiy/t6r1/3ie46V5432T/Oahs9V7NnVzb9zoq2rFgvPxXrcAMzmvWnGjof/RpdsZThIEpex6DGbd5h6STaOyZXxV/YfW9u4KyllmZ3X15IMHHLSJtVPSOvULCsz2TyPC/WL9kGSme/1L01SSzjfbHnqk+OV7OBmevZeo3DBR7lXT5drT0MkX5PwDd1EQ0ebfkh1zy/L8ydd+VJ4CLuRndNjuwj+vMfU8q2l2l1rGtr8FC2D+fdSGk81eltuTjYSMk++4BMd0DXQo35iXbZndGdcXkGFyeG6b28evF22M2w22HlYSXetGSLW4cfFT00WqvN9bkqCujQ9KzdSt+snr+qmbcme+5Y3cDRn9BDLps+dPVltE9UkPeb6XovineiVUznTznyuZaSn/ZvR8VeRUYLqe3iHFqnU6+7+4LmtfsmaS0MdjIvslFJGG/rn7DPdMGLcx4d6eP2Oz92Y49kWbBUjudU2ijHnc7YIODQxD1aPx8PynVr+cmvJoy2+M5nQa2Kt0dvdPxp73LNU6aTeaktTfHH1L+8Pm/XalZcFcfzYxlhTefuzjRGobLKEqPZh8QKxUXWbU/ERvW78ghvTGTUNd0g9YqbcjUy5h0xVbn3S7SS54SOqKt88UR0qZuxKfxlZfODUm52o2HkGTOLw5dqhevvWjH7ssiqxAhKwA91d1nWG9w/GJIc7GwWbKKe/mAsGRqXBb87P10jH8/0LY6kpGQV1KcuAwAAeCt4LiVFWRJKs4DJ6p9GxGHWfLuTM5dt61/pzCCE7vLmSodGJM/ASqdzU2U3VjpY6WClg5XOICudUaI3VjocuWCsdAAAAAAAAAAAAAAAAD5o1Gmr054TSoqWxPvnfrLxVEIc29/cT5YmkmdgPzlCSz8a+8nYT8Z+MvaTB9lPZpJX+8lRktFyRdDF0m6IdcF2MgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC8ddD8G5oJkUuQnAXwnvxLAAAAADDkEFURRckVE6rIv+Tb1078MiZEetubJ34RHckzcOIXd8uWTpz4hRO/cOIXTvwa5MQvoidZ5S8a9h8nfl1QVhipQ6jyyWeuvTaBGP3D5fwgE4gpeQYmUCZ7XQ0mECYQJhAm0GATyOfVmYOU4sAdNi+cOUpm/9cdNv2Di8kkFN3mYOtrg8sE14xicGFwYXDhmlEAAD5w/Os1o8bTcM0oVjpY6WClg2tGAQAAAAAAAAAAAAAAgL/wb9eMBpow+r817yN/fwnJf33P5g78nWofEZNXD3u95GdSkh3o135/aL2i3vl/gHf/7t59oDlnDSHS8gQhNGQL8uWs6P+iwPYLDuIOzARqyM+E9QOfA3PIfw4IIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhND70J9QSwMEFAAAAAgA7VhwR/dYplZAAAAAagEAAB4AHABDb250ZW50cy9SZXNvdXJjZXMvYXBwbGV0LnJzcmNVVAkAA82cSVZTpQ9XdXgLAAEE9QEAAAQUAAAAY2BgZGBgYFQBEiDsxjDygJQDPlkmEIEaRpJAQg8kLAMML8bi5OIqIFuouKA4A0jLMTD8/w+S5AdrB7PlBIAEAFBLAwQKAAAAAADtWHBHAAAAAAAAAAAAAAAAJAAcAENvbnRlbnRzL1Jlc291cmNlcy9kZXNjcmlwdGlvbi5ydGZkL1VUCQADzZxJVi2REFd1eAsAAQT1AQAABBQAAABQSwMEFAAAAAgA7VhwRzPLNU9TAAAAZgAAACsAHABDb250ZW50cy9SZXNvdXJjZXMvZGVzY3JpcHRpb24ucnRmZC9UWFQucnRmVVQJAAPNnElWU6UPV3V4CwABBPUBAAAEFAAAACWJOw6AIBAFe08DCBVX2QbWhZgQ1vCpCHcXtHkzkzegtCDB5Xp/g0+UyihARnb70kL/UbvffYpjQODcmk9zKXListxCoUsZA7EQ5S0+dVq085gvUEsDBAoAAAAAAIeBjkgAAAAAAAAAAAAAAAAbABwAQ29udGVudHMvUmVzb3VyY2VzL1NjcmlwdHMvVVQJAAM9pQ9XLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACAAJgI5ICl5liTUBAADMAQAAJAAcAENvbnRlbnRzL1Jlc291cmNlcy9TY3JpcHRzL21haW4uc2NwdFVUCQADcaIPV1OlD1d1eAsAAQT1AQAABBQAAAB9UMtOAkEQrNldd9dhH3Dz6NGYiPIJHjTxLCZeF9iDcXEJC0RvfoI/4sEfIvoHPEQEhbIHvOok01U16emu7vOkaF2dXu7XqrUTcyMATkxCwYKthCAUbmciAQ8O11yFcGBfbF/4jR24WmCvWjwUeXqfNutn13XyEeYYHkqKam+kghdJGfUCvwIfB6jiGAX6aCHHETroCrYFe6IKNEXfGOXChc0v7HKpBRzdSFrtELvbumKVC80F/FIjzwe9bj91uZRuXJuwAiLjNi7DlsxPaJSUAMrCFOeac3GfpINennQ6d/0sA4z7JxzKiVCCV+YHAs74LuuIONUi//4RIoC63czrIbYQS3PFicWJcTMTv1JHmocmROLJ45gjzfHvXJqjf7ZZ4RT+61uaBbDipGh2ZanBcjh8/gFQSwECHgMKAAAAAADtWHBHAAAAAAAAAAAAAAAACQAYAAAAAAAAABAA7UEAAAAAQ29udGVudHMvVVQFAAPNnElWdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAoHlwR5R2hqihAQAAvgMAABMAGAAAAAAAAQAAAKSBQwAAAENvbnRlbnRzL0luZm8ucGxpc3RVVAUAA1zWSVZ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAAB0gY5IAAAAAAAAAAAAAAAADwAYAAAAAAAAABAA7UExAgAAQ29udGVudHMvTWFjT1MvVVQFAAMbpQ9XdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAVRwXR+w5OCkyCAAAyGEAABUAGAAAAAAAAAAAAO2BegIAAENvbnRlbnRzL01hY09TL2FwcGxldFVUBQADMiPZVXV4CwABBPUBAAAEFAAAAFBLAQIeAxQAAAAIAAVHj0ga7FYjfQEAAKoCAAAhABgAAAAAAAEAAADtgfsKAABDb250ZW50cy9NYWNPUy9zdWRvLXByb21wdC1zY3JpcHRVVAUAA4mQEFd1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAADtWHBHqiAGewgAAAAIAAAAEAAYAAAAAAABAAAApIHTDAAAQ29udGVudHMvUGtnSW5mb1VUBQADzZxJVnV4CwABBPUBAAAEFAAAAFBLAQIeAwoAAAAAAJt5cEcAAAAAAAAAAAAAAAATABgAAAAAAAAAEADtQSUNAABDb250ZW50cy9SZXNvdXJjZXMvVVQFAANW1klWdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAgHlwR3658rH2BgAAH9wAAB4AGAAAAAAAAAAAAKSBcg0AAENvbnRlbnRzL1Jlc291cmNlcy9hcHBsZXQuaWNuc1VUBQADH9ZJVnV4CwABBPUBAAAEFAAAAFBLAQIeAxQAAAAIAO1YcEf3WKZWQAAAAGoBAAAeABgAAAAAAAAAAACkgcAUAABDb250ZW50cy9SZXNvdXJjZXMvYXBwbGV0LnJzcmNVVAUAA82cSVZ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAADtWHBHAAAAAAAAAAAAAAAAJAAYAAAAAAAAABAA7UFYFQAAQ29udGVudHMvUmVzb3VyY2VzL2Rlc2NyaXB0aW9uLnJ0ZmQvVVQFAAPNnElWdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgA7VhwRzPLNU9TAAAAZgAAACsAGAAAAAAAAQAAAKSBthUAAENvbnRlbnRzL1Jlc291cmNlcy9kZXNjcmlwdGlvbi5ydGZkL1RYVC5ydGZVVAUAA82cSVZ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAACHgY5IAAAAAAAAAAAAAAAAGwAYAAAAAAAAABAA7UFuFgAAQ29udGVudHMvUmVzb3VyY2VzL1NjcmlwdHMvVVQFAAM9pQ9XdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgACYCOSApeZYk1AQAAzAEAACQAGAAAAAAAAAAAAKSBwxYAAENvbnRlbnRzL1Jlc291cmNlcy9TY3JpcHRzL21haW4uc2NwdFVUBQADcaIPV3V4CwABBPUBAAAEFAAAAFBLBQYAAAAADQANANwEAABWGAAAAAA=",ru="User did not grant permission.",Sq="No polkit authentication agent found.",bq=134217728});var Vb=w((OW,zb)=>{var{autoUpdater:ls}=Ib(),{app:wd,session:$b}=require("electron"),_q=Lb(),kb=require("path"),iu=require("fs"),qb=Gt(),vq=Jt(),Mb=On(),Oq=ya(),Tq=(t,e)=>{let r="".concat(typeof t=="string"?t:"0").split(".").map(Number),i="".concat(typeof e=="string"?e:"0").split(".").map(Number),n=Math.max(r.length,i.length);for(let s=0;s<n;s++){let o=r[s]||0,a=i[s]||0;if(o>a)return!0;if(o<a)return!1}return!1},tn,Bo,vr,rn,jo,Me,hi,fe,_r,nu,Bb,jb,Hb,Wb,Gb,Ub;zb.exports=(Ub=class extends vq{constructor(r){super(r);R(this,fe);R(this,tn,!0);R(this,Bo,!1);R(this,vr,!1);R(this,rn,!1);R(this,jo,!1);R(this,Me,{version:null,filePath:null,progress:0});R(this,hi,null);_(this,"check",()=>{if(!p(this,tn)||p(this,vr))return!1;U(this,vr,!0);try{U(this,Me,{version:null,filePath:null,progress:0}),k(this,fe,_r).call(this),Mb.LINUX===process.platform?k(this,fe,Bb).call(this):k(this,fe,jb).call(this)}catch{}return!0});_(this,"install",async()=>{if(!p(this,tn)||typeof p(this,Me).version!="string"||typeof p(this,Me).filePath!="string"||p(this,rn))return!1;U(this,rn,!0);try{if(typeof p(this,Me).filePath!="string")throw new Error("Nothing to install");k(this,fe,nu).call(this),Mb.LINUX===process.platform?await k(this,fe,Hb).call(this):k(this,fe,Wb).call(this),k(this,fe,nu).call(this,!1)}catch(r){k(this,fe,nu).call(this,!1,"".concat(r.message??r))}return!0});U(this,tn,!0),this._register("updater"),U(this,hi,kb.join(Oq.getPathCache(),"pending"))}async start(){if(!p(this,Bo)&&(U(this,Bo,!0),!!p(this,tn)))try{iu.existsSync(p(this,hi))&&iu.rmSync(p(this,hi),{recursive:!0,force:!0}),iu.mkdirSync(p(this,hi),{recursive:!0})}catch{}}isChecking(){return p(this,vr)}isInstalling(){return p(this,rn)}},tn=new WeakMap,Bo=new WeakMap,vr=new WeakMap,rn=new WeakMap,jo=new WeakMap,Me=new WeakMap,hi=new WeakMap,fe=new WeakSet,_r=function(){if(typeof this._oglama.main?.view.webContents?.send=="function"){let r=["ipc:updater:check",[p(this,Me)],{type:"req"}];this._oglama.main?.view.webContents?.send(qb.WINDOW_MAIN,r)}},nu=function(r=!0,i=null){if(r||U(this,rn,!1),typeof this._oglama.main?.view.webContents?.send=="function"){let n=["ipc:updater:install",[{working:r,error:i}],{type:"req"}];this._oglama.main?.view.webContents?.send(qb.WINDOW_MAIN,n)}},Bb=async function(){try{let r=await(await fetch("https://api.github.com/repos/oglama/oglama/releases/latest")).json(),i=(Array.isArray(r?.assets)?r.assets:[]).find(s=>typeof s?.name=="string"&&s.name.endsWith(".deb")&&typeof s.browser_download_url=="string");if(!i)throw new Error("No assets released");let n=i.browser_download_url.replace(/^.*?\-(\d+\.\d+\.\d+)\.deb$/,"$1");if(!Tq(n,wd.getVersion()))throw new Error("No update available");p(this,Me).version=n,k(this,fe,_r).call(this),p(this,Me).filePath=await k(this,fe,Gb).call(this,i.browser_download_url,i.name)}catch{}k(this,fe,_r).call(this),U(this,vr,!1)},jb=async function(){p(this,jo)||(U(this,jo,!0),ls.on("update-not-available",r=>{k(this,fe,_r).call(this),U(this,vr,!1)}),ls.on("update-available",r=>{p(this,Me).version=r?.version??null,k(this,fe,_r).call(this)}),ls.on("download-progress",r=>{p(this,Me).progress=parseInt(r.percent,10),k(this,fe,_r).call(this)}),ls.on("update-downloaded",r=>{p(this,Me).filePath=r.downloadedFile,p(this,Me).progress=100,k(this,fe,_r).call(this),U(this,vr,!1)})),ls.checkForUpdates()},Hb=async function(){return new Promise((r,i)=>{let n='"'.concat(p(this,Me).filePath.replace(/(["\\$`])/g,"\\$1"),'"');_q.exec("dpkg -i ".concat(n),{name:"Oglama"},s=>{if(s){i(s);return}r(),setTimeout(()=>wd.relaunch(),wd.quit(),250)})})},Wb=function(){ls.quitAndInstall()},Gb=async function(r,i){let n=kb.join(p(this,hi),i);return iu.existsSync(n)?(p(this,Me).progress=100,n):new Promise((s,o)=>{let a=(l,c)=>{c.setSavePath(n),c.on("updated",(u,h)=>{h==="progressing"&&(p(this,Me).progress=Math.floor(c.getReceivedBytes()/c.getTotalBytes()*100),k(this,fe,_r).call(this))}),c.once("done",(u,h)=>{if($b.defaultSession.removeListener("will-download",a),h==="completed"){s(c.getSavePath());return}o(new Error("Download failed: ".concat(h)))})};$b.defaultSession.once("will-download",a),this._oglama.main?.view.webContents.downloadURL(r)})},Ub)});var Kb=w((RW,Xb)=>{var{execSync:Ad}=require("child_process"),{shell:Cq}=require("electron"),Yb=require("crypto"),Ed=require("os"),Rq=Jt(),it=On(),us,cs,hs,fi,Qb;Xb.exports=(Qb=class extends Rq{constructor(r){super(r);R(this,us,null);R(this,cs,null);R(this,hs,null);R(this,fi,null);_(this,"getOS",()=>{if(typeof p(this,fi)!="string")switch(process.platform){case it.MACOS:U(this,fi,"macos");break;case it.WINDOWS:U(this,fi,"windows");break;case it.LINUX:U(this,fi,"linux");break}return p(this,fi)});_(this,"getName",()=>{if(typeof p(this,cs)!="string"){let r=null;switch(process.platform){case it.MACOS:r="echo $(scutil --get LocalHostName).local";break;case it.WINDOWS:case it.LINUX:r="hostname";break}if(r!==null)try{let i=Ad(r).toString();U(this,cs,i.replace(/[\r\n\s]+/g,"").toLowerCase())}catch{}}return p(this,cs)});_(this,"getUUID",()=>{if(typeof p(this,us)!="string"){let r=null,i=process.arch==="ia32"&&process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?"%windir%\\sysnative\\cmd.exe /c %windir%\\System32":"%windir%\\System32";switch(process.platform){case it.MACOS:r="ioreg -rd1 -c IOPlatformExpertDevice";break;case it.WINDOWS:r="".concat(i,"\\REG.exe")+" QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid";break;case it.LINUX:r="( cat /var/lib/dbus/machine-id /etc/machine-id 2> /dev/null || hostname ) | head -n 1 || :";break}if(r!==null)try{let n=Ad(r).toString();switch(process.platform){case it.MACOS:n=n.replace(/^.*?\bIOPlatformUUID"\s*=\s*"(.*?)".*$/gs,"$1");break;case it.WINDOWS:n=n.split("REG_SZ")[1];break}n=n.replace(/[\r\n\s]+/g,"");let s=Yb.createHash("md5").update([n,n,n].join("::")).digest("hex");U(this,us,[s.slice(0,8),s.slice(8,12),s.slice(12,16),s.slice(16,20),s.slice(20)].join("-"))}catch{}}return p(this,us)});_(this,"getSerialNumber",()=>{if(typeof p(this,hs)!="string"){let r=null;switch(process.platform){case it.MACOS:r="ioreg -l | grep IOPlatformSerialNumber";break;case it.WINDOWS:r='powershell -Command "(Get-CimInstance -ClassName Win32_BIOS).SerialNumber"';break;case it.LINUX:r='lsblk -o UUID -n /dev/sda* | grep -v "^$" | grep -vE "^.{,20}$" | sed -n 1p';break}if(r!==null)try{let i=Ad(r).toString();switch(process.platform){case it.MACOS:i=i.replace(/^.*?\bIOPlatformSerialNumber"\s*=\s*"(.*?)".*$/gs,"$1");break}i=i.replace(/[\r\n\s]+/g,"");let n=Yb.createHash("md5").update([i,i,i].join("::")).digest("hex");U(this,hs,[n.slice(0,8),n.slice(8,12),n.slice(12,16),n.slice(16,20),n.slice(20)].join("-"))}catch{}}return p(this,hs)});_(this,"getRam",()=>Math.ceil(Ed.totalmem()/1024**3));_(this,"getCpuArch",()=>Ed.arch());_(this,"getCpuName",()=>{let r="",i=Ed.cpus();return Array.isArray(i)&&i.length&&(r=i[0].model),r});_(this,"setPostAuth",r=>this._oglama.setPostAuth(!!r));_(this,"getPostAuth",()=>this._oglama.getPostAuth());_(this,"showFileInFolder",r=>{let i=!1;try{Cq.showItemInFolder(r),i=!0}catch{}return i});this._register("device")}},us=new WeakMap,cs=new WeakMap,hs=new WeakMap,fi=new WeakMap,Qb)});var i_=w((xW,r_)=>{var{ipcMain:Jb,session:Iq,BrowserWindow:Zb}=require("electron"),e_=require("path"),Nq=Gt(),xq=Jt(),ge,Or,t_;r_.exports=(t_=class extends xq{constructor(r){super(r);R(this,ge,{});R(this,Or,{});_(this,"list",()=>Object.keys(p(this,ge)));_(this,"closeAll",()=>{let r=Object.keys(p(this,ge)).length>0;for(let i of Object.keys(p(this,ge)))this.close(i);return r});_(this,"open",r=>{let i=!1;do{if(typeof r!="string"||!r.length)break;if(typeof p(this,ge)[r]<"u"){typeof p(this,ge)[r]?.webContents?.focus=="function"&&p(this,ge)[r].webContents.focus();break}p(this,ge)[r]=new Zb({show:!1,minWidth:this._oglama.config.getSourceMinWidth(),minHeight:this._oglama.config.getSourceMinHeight(),width:this._oglama.config.getSourceMinWidth(),height:this._oglama.config.getSourceMinHeight(),icon:e_.join(this._oglama.rootPath,"res/icons/icon.png"),resizable:!0,fullscreenable:!1,titleBarStyle:"default",title:"Agent source code",useContentSize:!0,autoHideMenuBar:!0,backgroundColor:"#000",webPreferences:{backgroundThrottling:!1,imageAnimationPolicy:"noAnimation",spellcheck:!1,preload:e_.join(this._oglama.rootPath,"lib/preloader/entry/source.js"),nodeIntegration:!0,devTools:!1,session:Iq.defaultSession,cache:!1,webSecurity:!1,allowRunningInsecureContent:!0,additionalArguments:["--agent-id=".concat(r)]}});let n=Nq.getSourceChannelName(r);p(this,Or)[r]={channel:n,listener:(s,...o)=>{o.length>=3&&p(this,ge)[r].webContents.send(n,o)}},Jb.on(p(this,Or)[r].channel,p(this,Or)[r].listener),p(this,ge)[r].setMenu(null),p(this,ge)[r].on("closed",()=>{Jb.off(p(this,Or)[r].channel,p(this,Or)[r].listener),delete p(this,Or)[r],delete p(this,ge)[r]}),p(this,ge)[r].webContents.on("did-finish-load",()=>{p(this,ge)[r].show(),p(this,ge)[r].webContents.focus()}),p(this,ge)[r].loadURL("http://localhost:".concat(this._oglama.config.getServerPort(),"/source-code/")),i=!0}while(!1);return i});_(this,"close",r=>{let i=!1;return typeof p(this,ge)[r]?.destroy=="function"&&(p(this,ge)[r].destroy(),i=!0),i});_(this,"webContents",async(r,i,n)=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");if(!(p(this,ge)[r]instanceof Zb))throw new Error("Invalid agent ID");if(typeof i!="string"||typeof p(this,ge)[r].webContents[i]!="function")throw new Error("Invalid source webContents method: ".concat(i));return Array.isArray(n)||(n=[]),await p(this,ge)[r].webContents[i](...n)});this._register("source")}},ge=new WeakMap,Or=new WeakMap,t_)});var a_=w((FW,o_)=>{var{ipcMain:n_,WebContentsView:ne,BrowserWindow:Dq,session:Pq}=require("electron"),s_=require("path"),Tr=Gt(),Fq=Jt(),nn,Ho,Wo,fs,W,nr,sr,sn,ds,di,on,Sd,Go,su,an,Cr;o_.exports=(nn=class extends Fq{constructor(r){super(r);R(this,Ho);R(this,Wo);R(this,fs,{});R(this,W,{});R(this,nr,{});R(this,sr,"");R(this,sn,[]);R(this,ds,{});R(this,di,{});R(this,on,()=>{if(!Object.keys(p(this,W)).length)return;let r=p(this,Ho)-this.constructor.MARGIN_LEFT,i=p(this,Wo)-(this.constructor.MARGIN_TOP+this.constructor.MARGIN_BOTTOM);for(let n of Object.keys(p(this,W))){let s=n===p(this,sr)?this.constructor.MARGIN_LEFT:100-r,o=n===p(this,sr)?this.constructor.MARGIN_TOP:50-i,a=p(this,W)[n];a instanceof ne&&a.setBounds({x:s,y:o,width:r,height:i})}});R(this,Sd,async r=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");if(p(this,sn).reduce((n,s)=>s.agentId===r?s:n,null)!==null)throw new Error("Previous focus request pending");return new Promise((n,s)=>{p(this,sn).push({agentId:r,resolve:n,reject:s})})});R(this,Go,r=>{r="".concat(r);let i=null,n=!1;do{if(r.match(/^[a-z\d]$/gi)){i=r,n=r!==r.toLowerCase();break}if('~!@#$%^&*()_+{}:"|<>?'.indexOf(r)!==-1&&r.length===1){i=r,n=!0;break}if(" `-=[];'\\,./".indexOf(r)!==-1&&r.length===1){i=r,n=!1;break}let s={backspace:"Backspace",capslock:"CapsLock",pagedown:"PageDown",pageup:"PageUp",insert:"Insert",delete:"Delete",escape:"Escape",space:"Space",enter:"Enter",right:"Right",home:"Home",down:"Down",left:"Left",end:"End",tab:"Tab",up:"Up",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12"};typeof s[r]<"u"&&(i=s[r])}while(!1);return{keyCode:i,shift:n}});R(this,su,async(r,i,n)=>{if(typeof r!="string"||!r.length)return!1;let s=p(this,W)[r];if(!(s instanceof ne)||typeof i!="string"||i.length!==1)return!1;if(!s.metadata.controlled)throw new Error("Typing aborted");let{keyCode:o,shift:a}=p(this,Go).call(this,i);if(o!==null){let c=a?["shift"]:[];a&&s.webContents.sendInputEvent({type:"keyDown",keyCode:"Shift",modifiers:c}),s.webContents.sendInputEvent({type:"keyDown",keyCode:o,modifiers:c}),s.webContents.sendInputEvent({type:"char",keyCode:i,modifiers:c}),s.webContents.sendInputEvent({type:"keyUp",keyCode:o,modifiers:c}),a&&s.webContents.sendInputEvent({type:"keyUp",keyCode:"Shift",modifiers:[]})}else s.webContents.sendInputEvent({type:"char",keyCode:i});let l=Math.round(1e3/n-2)+Math.floor(Math.random()*5);return await new Promise(c=>setTimeout(c,l)),!0});R(this,an,(r,i=!0)=>{if(typeof r=="string"){let n=["http://localhost:".concat(this._oglama.config.getServerPort(),"/home"),"about:home"],s=n[i?0:1],o=n[i?1:0];if(r.indexOf(s)===0)return"".concat(o).concat(r.substring(s.length))}return r});R(this,Cr,r=>{let i=p(this,W)[r];i instanceof ne&&(i.metadata.statusCode=null,i.metadata.domReady=!1,i.metadata.domError=null)});_(this,"setControlled",(r,i=!0)=>{let n=p(this,W)[r];if(!(n instanceof ne))return!1;let s=!!i!==n.metadata.controlled;return n.metadata.controlled=!!i,s});_(this,"setWindowSize",(r,i)=>{U(this,Ho,r),U(this,Wo,i),p(this,on).call(this)});_(this,"list",()=>Object.keys(p(this,W)));_(this,"removeAll",()=>{let r=Object.keys(p(this,W)).length>0;for(let i of Object.keys(p(this,W)))this.remove(i);return r});_(this,"add",(r,i,n=!1)=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");if(p(this,W)[r]instanceof ne)return!1;if(i=p(this,an).call(this,i,!1),typeof i!="string"||!i.match(/^https?:\/\//gi))throw new Error("Invalid URL");let s=new ne({width:this._oglama.config.getMainMinWidth()-this.constructor.MARGIN_LEFT,height:this._oglama.config.getMainMinHeight()-(this.constructor.MARGIN_TOP+this.constructor.MARGIN_BOTTOM),resizable:!1,backgroundColor:"#333",webPreferences:{transparent:!0,disableBlinkFeatures:["FreezeFramesOnVisibility","DispatchHiddenVisibilityTransitions"].join(","),preload:s_.join(this._oglama.rootPath,"lib/preloader/entry/target.js"),additionalArguments:["--agent-id=".concat(r)],partition:"persist:target-".concat(r),imageAnimationPolicy:"noAnimation",allowRunningInsecureContent:!0,backgroundThrottling:!1,contextIsolation:!0,nodeIntegration:!0,spellcheck:!1,devTools:!0}});s.metadata={agentId:r,controlled:!1,homeUrl:i,statusCode:null,domReady:!1,domError:null,downloads:{pending:[],files:{}}},s.webContents.on("ready-to-show",()=>{s.webContents.setZoomFactor(1),s.webContents.setVisualZoomLevelLimits(1,1)}),s.webContents.setZoomLevel(0),s.webContents.setAudioMuted(!0),s.webContents.on("will-prevent-unload",u=>{u.preventDefault()});let o=u=>{this._oglama.main?.view.webContents?.send(Tr.WINDOW_MAIN,["ibc-target:nav:start",[r,p(this,an).call(this,u)],{type:"req"}])},a=(u=!0)=>{u&&this._oglama.main?.view.webContents?.send(Tr.WINDOW_MAIN,["ibc-target:cancel-promises",r,s.metadata.domError]),this._oglama.main?.view.webContents?.send(Tr.WINDOW_MAIN,["ibc-target:nav:end",[r,s.metadata.domError===null?1:0,s.webContents?.navigationHistory.canGoBack()??!1,s.webContents?.navigationHistory.canGoForward()??!1],{type:"req"}])};s.webContents.on("did-navigate-in-page",(u,h,f)=>{f&&(o(h),a(!1))}),s.webContents.on("did-start-navigation",u=>{u.isMainFrame&&!u.isSameDocument&&(p(this,Cr).call(this,r),o(u.url))}),s.webContents.on("did-finish-load",()=>{if(Number.isInteger(s.metadata.statusCode)&&s.metadata.statusCode>=400){s.metadata.domReady||(s.metadata.domError="Status code ".concat(s.metadata.statusCode),s.metadata.domReady=!0,a());return}s.webContents.executeJavaScript('new Promise(resolve => {\n                        const a = window.alert;\n                        const c = window.confirm;\n                        const s = JSON.stringify;\n\n                        window.alert = (m) => a("::"+s({t:"alert",a:"'.concat(r,'",m:m??""}));\n                        Object.defineProperty(window.alert, "name", { value: "alert", configurable: true });\n                        Object.defineProperty(window.alert, "length", { value: 0, configurable: true });\n\n                        window.confirm = (m) => c("::"+s({t:"confirm",a:"').concat(r,'",m:m??""}));\n                        Object.defineProperty(window.confirm, "name", { value: "confirm", configurable: true });\n                        Object.defineProperty(window.confirm, "length", { value: 0, configurable: true });\n\n                        window.prompt = (m, d) => (a("::"+s({t:"prompt",a:"').concat(r,'",m:m??"",d:d??""})),d??"");\n                        Object.defineProperty(window.prompt, "name", { value: "prompt", configurable: true });\n                        Object.defineProperty(window.prompt, "length", { value: 0, configurable: true });\n\n                        const originalToString = Function.prototype.toString;\n                        Function.prototype.toString = function (...args) {\n                            if (this === window.alert) {\n                                return "function alert() { [native code] }";\n                            }\n                            if (this === window.confirm) {\n                                return "function confirm() { [native code] }";\n                            }\n                            if (this === window.prompt) {\n                                return "function prompt() { [native code] }";\n                            }\n                            if (this === Function.prototype.toString) {\n                                return "function toString() { [native code] }";\n                            }\n                            return originalToString.apply(this, args);\n                        };\n\n                        "complete" === document.readyState \n                            ? resolve() \n                            : window.addEventListener("load", () => resolve());\n                    });').replace(/[\n\s]{2,}/g," ")).then(()=>{setTimeout(()=>{s.metadata.domReady||(s.metadata.domReady=!0,a())},1e3)})}),s.webContents.session.webRequest.onCompleted({urls:["*://*/*"]},u=>{u.resourceType==="mainFrame"&&(s.metadata.statusCode=u.statusCode)}),s.webContents.on("did-fail-load",(u,h,f,d,y)=>{y&&(s.metadata.domError=f,s.metadata.domReady=!0,a())});let l=Pq.fromPartition("persist:target-".concat(r));l.setPermissionCheckHandler((u,h,f,d)=>!0),l.setPermissionRequestHandler((u,h,f,d)=>{f(!0)}),l.removeAllListeners("will-download"),l.on("will-download",(u,h)=>{let f=new Date().getTime(),d=s.metadata.downloads.pending.shift();if(typeof d!="string"){s.metadata.controlled&&(this._oglama.main?.view.webContents?.send(Tr.WINDOW_MAIN,["ibc-target:download:skipped",[r,h.getFilename()],{type:"req"}]),u.preventDefault());return}let y=h.getTotalBytes(),{runId:A,outputKey:E,timeout:v}=s.metadata.downloads.files[d],{fileName:O,filePath:I,minSize:L,maxSize:oe}=this._oglama.diskStorage.outputFilesInit(r,A,E,s_.extname(h.getFilename()).substring(1)),B=(S=null)=>{typeof s.metadata.downloads.files[d]=="object"&&!s.metadata.downloads.files[d].done&&(s.metadata.downloads.files[d].done=!0,s.metadata.downloads.files[d].error=S,this._oglama.main?.view.webContents?.send(Tr.WINDOW_MAIN,["ibc-target:download:info",[r,d,{fileName:O,totalBytes:y,progress:"100",done:!0,error:S}],{type:"req"}]),S!==null&&(h.cancel(),this._oglama.diskStorage.outputFilesDelete(r,A,O)))};if(y>0){if(Number.isInteger(L)&&y<L*1048576){B('Minimum file size not met for "'.concat(O,'" (').concat((y/1048576).toFixed(3),"MB)"));return}if(Number.isInteger(oe)&&y>oe*1048576){B('Maximum file size exceeded for "'.concat(O,'" (').concat((y/1048576).toFixed(3),"MB)"));return}}if(!s.metadata.controlled){B('Download cancelled for "'.concat(O,'"'));return}h.setSavePath(I),s.metadata.downloads.files[d].filePath=I;let z=!1;h.on("updated",(S,D)=>{if(new Date().getTime()-f>=v*1e3){S.preventDefault(),B('Download timed out for "'.concat(O,'" after ').concat(v,"s"));return}if(!s.metadata.controlled){S.preventDefault(),B('Download cancelled for "'.concat(O,'"'));return}if(D==="progressing"&&(!z||y>0)){z=!0;let G=h.getReceivedBytes(),P=y>0?(G/y*100).toFixed(2):"0";this._oglama.main?.view.webContents?.send(Tr.WINDOW_MAIN,["ibc-target:download:info",[r,d,{fileName:O,totalBytes:y,progress:P,done:!1,error:null}],{type:"req"}])}}),h.once("done",(S,D)=>{B()})}),this._oglama.mainWindow().contentView.addChildView(s),this._oglama.main.view instanceof ne&&(this._oglama.mainWindow().contentView.removeChildView(this._oglama.main.view),this._oglama.mainWindow().contentView.addChildView(this._oglama.main.view));let c=Tr.getTargetChannelName(r);return p(this,nr)[r]={channel:c,listener:(u,...h)=>{h.length>=3&&s.webContents.send(c,h)}},n_.on(p(this,nr)[r].channel,p(this,nr)[r].listener),s.webContents.loadURL(s.metadata.homeUrl),p(this,W)[r]=s,n?this.select(r):p(this,on).call(this),!0});_(this,"remove",r=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");if(!(p(this,W)[r]instanceof ne)||typeof p(this,nr)[r]>"u")return!1;n_.off(p(this,nr)[r].channel,p(this,nr)[r].listener),delete p(this,nr)[r];try{this._oglama.mainWindow().contentView.removeChildView(p(this,W)[r])}catch{}try{p(this,W)[r].webContents.destroy()}catch{}return delete p(this,W)[r],r===p(this,sr)&&U(this,sr,""),p(this,on).call(this),!0});_(this,"select",r=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");let i=p(this,W)[r];if(i instanceof ne&&p(this,sr)!==r){U(this,sr,r);let n={};for(let s of Object.keys(p(this,W)).filter(o=>o!==r))n[s]=p(this,W)[s];return n[r]=i,U(this,W,n),this._oglama.mainWindow().contentView.removeChildView(i),this._oglama.mainWindow().contentView.removeChildView(this._oglama.main.view),this._oglama.main.onTop?(this._oglama.mainWindow().contentView.addChildView(i),this._oglama.mainWindow().contentView.addChildView(this._oglama.main.view)):(this._oglama.mainWindow().contentView.addChildView(this._oglama.main.view),this._oglama.mainWindow().contentView.addChildView(i)),p(this,on).call(this),!0}return!1});_(this,"getSelected",()=>p(this,sr));_(this,"openDevTools",(r,i=null)=>{let n=!1;do{if(typeof r!="string"||!r.length)break;let s=p(this,W)[r];if(!(s instanceof ne)||p(this,fs)[r])break;s.webContents?.openDevTools({mode:"detach",title:"Developer Tools ".concat(typeof i=="string"?"- ".concat(i," "):"","- Oglama")}),n=!0}while(!1);return n});_(this,"getBounds",r=>{let i=null;do{if(typeof r!="string"||!r.length)break;let n=p(this,W)[r];if(!(n instanceof ne))break;i=n.getBounds()}while(!1);return i});_(this,"getTargets",()=>p(this,W));_(this,"webContents",async(r,i,n)=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");let s=p(this,W)[r];if(!(s instanceof ne))throw new Error("Missing target ".concat(r));if(typeof i!="string"||typeof s.webContents[i]!="function")throw new Error("Invalid target method: webContents.".concat(i,"()"));return Array.isArray(n)||(n=[]),await s.webContents[i](...n)??null});_(this,"sendKeys",async(r,i,n={})=>{if(typeof r!="string"||!r.length)return!1;let s=p(this,W)[r];if(!(s instanceof ne))return!1;if(!s.metadata.controlled)throw new Error("Keyboard input aborted");(typeof n!="object"||n===null)&&(n={});let{keyCode:o,shift:a}=p(this,Go).call(this,i);if(o===null)return!1;n.shift=a;let l=[n.ctrl?process.platform==="darwin"?"meta":"control":null,n.shift?"shift":null,n.alt?"alt":null].filter(u=>u!==null),c=[...l.map(u=>u.charAt(0).toUpperCase()+u.slice(1)),o].join(" + ");return s.webContents.sendInputEvent({type:"keyDown",keyCode:o,modifiers:l}),o.length===1&&s.webContents.sendInputEvent({type:"char",keyCode:o,modifiers:l}),s.webContents.sendInputEvent({type:"keyUp",keyCode:o,modifiers:l}),await new Promise(u=>setTimeout(u,150+Math.floor(Math.random()*51))),!0});_(this,"mouse",async(r,i,n,s=null,o=!1,a=[])=>{if(typeof r!="string"||!r.length)return!1;let l=p(this,W)[r];if(!(l instanceof ne)||p(this,ds)[r])return!1;if(!l.metadata.controlled)throw new Error("Mouse move aborted");if(i=parseInt(i,10),n=parseInt(n,10),!Number.isInteger(i)||!Number.isInteger(n))return!1;a=(Array.isArray(a)?a:[]).map(h=>{if(typeof h!="object"||h===null)return null;let f={};for(let d of["x","y","w","h"]){if(!Number.isInteger(h[d]))return null;f[d]=h[d]}return f}).filter(Boolean),i<0&&(i=0),n<0&&(n=0);let c=this.getBounds(r);if(typeof c=="object"&&c!==null){let{width:h,height:f}=c;i>h&&(i=h),n>f&&(n=f)}p(this,ds)[r]=!0,typeof p(this,di)[r]!="object"&&(p(this,di)[r]={x:0,y:0,name:null});let u=(h,f)=>{for(let d of a)if(h>=d.x&&h<=d.x+d.w&&f>=d.y&&f<=d.y+d.h)return!1;return!0};return new Promise(h=>{let f=(o?25:150)+Math.floor(Math.random()*(o?25:150)),d=(o?10:14)+Math.floor(Math.random()*3);this._oglama.main?.view.webContents?.send(Tr.WINDOW_MAIN,["ibc-target:mouse:move",[r,i,n,f],{type:"req"}]);let y=p(this,di)[r].x,A=p(this,di)[r].y,E=i,v=n;p(this,di)[r]={x:i,y:n,name:s};let O={x:null,y:null},I=!1,L=z=>z<.5?2*z*z:-1+(4-2*z)*z,oe=0,B=setInterval(async()=>{let z=Date.now();oe===0&&(oe=z);let D=(z-oe)/f;(D>1||!l.metadata.controlled)&&(D=1);let G=L(D),P=Math.round(y+(E-y)*G),K=Math.round(A+(v-A)*G);if(O.x!==P||O.y!==K){let pe=O.x!==null?P-O.x:0,J=O.y!==null?K-O.y:0;O={x:P,y:K},u(P,K)&&l.webContents?.sendInputEvent({type:"mouseMove",x:P,y:K,movementX:pe,movementY:J})}if(D===1&&!I){if(clearInterval(B),I=!0,l.metadata.controlled&&["click","double-click"].includes(s)){await new Promise(V=>setTimeout(V,50)),this._oglama.main?.view.webContents?.send(Tr.WINDOW_MAIN,["ibc-target:mouse:click",[r,P,K,s],{type:"req"}]),await new Promise(V=>setTimeout(V,50));let J={x:E,y:v,button:0,clickCount:1};if(l.webContents?.sendInputEvent({type:"mouseDown",...J}),l.webContents?.sendInputEvent({type:"mouseUp",...J}),s==="double-click"){let V={x:E,y:v,button:0,clickCount:2};l.webContents?.sendInputEvent({type:"mouseDown",...V}),l.webContents?.sendInputEvent({type:"mouseUp",...V})}}let pe=(["click","double-click"].includes(s)?450:100)+Math.floor(Math.random()*150);setTimeout(async()=>{p(this,ds)[r]=!1,h(!0)},o?10:pe)}},d)})});_(this,"typeAt",async(r,i,n,s,o=!1,a=5,l=250)=>{if(typeof r!="string"||!r.length)return!1;let c=p(this,W)[r];if(!(c instanceof ne)||!c.metadata.controlled)return!1;s=typeof s=="string"?s.replace(/\r\n|\n/g,"\r\n"):"",a=parseInt(a,10),a=Number.isInteger(a)?a>250?250:a<1?1:a:5,l=parseInt(l,10),l=Number.isInteger(l)?l>1e3?1e3:l<10?10:l:250,await this.mouse(r,i,n,"click");let u=i+10+Math.floor(Math.random()*90),h=Math.abs(n-50+Math.floor(Math.random()*100));await this.mouse(r,u,h),c.webContents.selectAll(),await new Promise(f=>setTimeout(f,250)),await this.sendKeys(r,o?"backspace":"right"),await new Promise(f=>setTimeout(f,150)),s.length>l&&(c.webContents.insertText(s.substring(0,s.length-l)),s=s.substring(s.length-l),await new Promise(f=>setTimeout(f,150)));for(let f of s)await p(this,su).call(this,r,f,a);return!0});_(this,"loadUrl",async(r,i)=>{if(typeof r!="string"||!r.length)return!1;let n=p(this,W)[r];if(!(n instanceof ne))return!1;if(i=p(this,an).call(this,i,!1),typeof i!="string"||!i.match(/^https?:\/\//gi))throw new Error("Invalid URL");return p(this,Cr).call(this,r),await n.webContents.loadURL(i),await this.waitForDomReady(r)});_(this,"getUrl",async r=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");let i=p(this,W)[r];if(!(i instanceof ne))throw new Error("Missing target ".concat(r));return p(this,an).call(this,i.webContents.getURL())});_(this,"getTitle",async r=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");let i=p(this,W)[r];if(!(i instanceof ne))throw new Error("Missing target ".concat(r));return i.webContents.getTitle()});_(this,"reload",async(r,i=!1)=>{if(typeof r!="string"||!r.length)return!1;let n=p(this,W)[r];return n instanceof ne?(p(this,Cr).call(this,r),i?n.webContents.reloadIgnoringCache():n.webContents.reload(),await this.waitForDomReady(r)):!1});_(this,"goHome",async r=>{if(typeof r!="string"||!r.length)return!1;let i=p(this,W)[r];return i instanceof ne?(p(this,Cr).call(this,r),await i.webContents.loadURL(i.metadata.homeUrl),await this.waitForDomReady(r)):!1});_(this,"goBack",async r=>{if(typeof r!="string"||!r.length)return!1;let i=p(this,W)[r];return!(i instanceof ne)||!i.webContents?.navigationHistory.canGoBack()?!1:(p(this,Cr).call(this,r),i.webContents.navigationHistory.goBack(),await this.waitForDomReady(r))});_(this,"goForward",async r=>{if(typeof r!="string"||!r.length)return!1;let i=p(this,W)[r];return!(i instanceof ne)||!i.webContents?.navigationHistory.canGoForward()?!1:(p(this,Cr).call(this,r),i.webContents.navigationHistory.goForward(),await this.waitForDomReady(r))});_(this,"saveDownload",async(r,i,n,s=600)=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");let o=p(this,W)[r];if(!(o instanceof ne))throw new Error("Missing target ".concat(r));let a="".concat(i,"-").concat(n);if(typeof o.metadata.downloads.files[a]=="object")throw new Error("Download in progress for ".concat(n));return o.metadata.downloads.pending.push(a),o.metadata.downloads.files[a]={runId:i,outputKey:n,timeout:s,filePath:null,done:!1,error:null},new Promise(l=>{let c=new Date().getTime(),u=setInterval(()=>{if(!(o instanceof ne)||!o.metadata.controlled||new Date().getTime()-c>=s*1e3){clearInterval(u),l(null);return}if(o.metadata.downloads.files[a].done){clearInterval(u);let{filePath:h,error:f}=o.metadata.downloads.files[a];delete o.metadata.downloads.files[a];let d=typeof f=="string"?null:h;setTimeout(()=>l(d),250)}},750)})});_(this,"setFileInput",async(r,i,n)=>{if(typeof r!="string"||!r.length)return!1;let s=p(this,W)[r];if(!(s instanceof ne)||!s.metadata.controlled)return!1;let o=!1;p(this,fs)[r]=!0,s.webContents.isDevToolsOpened()&&s.webContents.closeDevTools();try{s.webContents.debugger.attach("1.1");let{root:a}=await s.webContents.debugger.sendCommand("DOM.getDocument",{});if(typeof a?.nodeId<"u"){let{nodeId:l}=await s.webContents.debugger.sendCommand("DOM.querySelector",{nodeId:a.nodeId,selector:i});typeof l<"u"&&(await s.webContents.debugger.sendCommand("DOM.setFileInputFiles",{nodeId:l,files:n}),o=!0)}}finally{s.webContents.debugger.detach(),p(this,fs)[r]=!1}return o});_(this,"openInNewWindow",async(r,i)=>{if(i="".concat(i??"").trim(),!i.length||!(p(this,W)[r]instanceof ne))return!1;let s=new Dq({minWidth:this._oglama.config.getSourceMinWidth(),minHeight:this._oglama.config.getSourceMinHeight(),width:this._oglama.config.getSourceMinWidth(),height:this._oglama.config.getSourceMinHeight(),webPreferences:{partition:"persist:target-".concat(r),contextIsolation:!0,nodeIntegration:!1,devTools:!0}});s.loadURL(i),s.on("closed",()=>{s=null})});_(this,"waitForDomReady",async(r,i=120)=>{if(typeof r!="string"||!r.length)return!1;let n=p(this,W)[r];if(!(n instanceof ne)||!n.metadata.controlled)return!1;if(n.metadata.domReady){if(n.metadata.domError!==null)throw new Error(n.metadata.domError);return n.metadata.domError===null}return new Promise((s,o)=>{let a=new Date().getTime(),l=setInterval(()=>{if(n.metadata.controlled||(clearInterval(l),o(new Error("Page load aborted"))),n.metadata.domReady){clearInterval(l),typeof n.metadata.domError=="string"?o(new Error(n.metadata.domError)):setTimeout(()=>s(!0),250);return}new Date().getTime()-a>=i*1e3&&(clearInterval(l),o(new Error("Page load timed out")))},500)})});let i=async()=>{do{if(!p(this,sn).length)break;let{agentId:n,resolve:s,reject:o}=p(this,sn).shift();if(typeof n!="string"||!n.length){o(new Error("Invalid agent ID"));break}let a=p(this,W)[n];if(!(a instanceof ne)){o(new Error("Missing target ".concat(n)));break}if(typeof s!="function"||typeof o!="function")break;a.webContents.isFocused()||(a.webContents.focus(),await new Promise(l=>setTimeout(l,100))),await new Promise(l=>{let c=setTimeout(()=>{o(new Error("Focused action has timed out")),l(!1)},this.constructor.FOCUS_TIMEOUT*1e3);s(async()=>{clearTimeout(c),l(!0),await new Promise(u=>setTimeout(u,100))})})}while(!1);await new Promise(n=>setTimeout(n,500)),i()};this.constructor.FOCUS_ENABLED&&i(),this._register("target")}},Ho=new WeakMap,Wo=new WeakMap,fs=new WeakMap,W=new WeakMap,nr=new WeakMap,sr=new WeakMap,sn=new WeakMap,ds=new WeakMap,di=new WeakMap,on=new WeakMap,Sd=new WeakMap,Go=new WeakMap,su=new WeakMap,an=new WeakMap,Cr=new WeakMap,_(nn,"MARGIN_LEFT",250),_(nn,"MARGIN_TOP",50),_(nn,"MARGIN_BOTTOM",50),_(nn,"FOCUS_ENABLED",!1),_(nn,"FOCUS_TIMEOUT",60),nn)});var h_=w((kW,c_)=>{var{session:Lq,shell:$q,ipcMain:kq,WebContentsView:bd}=require("electron"),qq=require("path"),l_=Gt(),Mq=Jt(),ou,u_;c_.exports=(u_=class extends Mq{constructor(r){super(r);_(this,"windowWidth");_(this,"windowHeight");_(this,"view",null);_(this,"darkMode",!0);R(this,ou,()=>this.view instanceof bd?(this.view.setBounds({x:0,y:0,width:this.windowWidth,height:this.windowHeight}),!0):!1);_(this,"init",()=>this.view instanceof bd?!1:(this.windowWidth=this._oglama.config.getMainLoginWidth(),this.windowHeight=this._oglama.config.getMainLoginHeight(),this.view=new bd({width:this.windowWidth,height:this.windowHeight,backgroundColor:"#00000000",resizable:!1,webPreferences:{transparent:!0,backgroundThrottling:!1,imageAnimationPolicy:"noAnimation",spellcheck:!1,preload:qq.join(this._oglama.rootPath,"lib/preloader/entry/main.js"),nodeIntegration:!0,devTools:!1,session:Lq.defaultSession,cache:!1,webSecurity:!1,allowRunningInsecureContent:!0,additionalArguments:["--win-type=main/login"]}}),this.view.webContents.on("ready-to-show",()=>this.view.webContents.setZoomFactor(1)),this.view.webContents.setZoomLevel(0),this.view.webContents.setAudioMuted(!1),this.view.webContents.loadURL("http://localhost:".concat(this._oglama.config.getServerPort(),"/login/")),this.view.webContents.on("dom-ready",()=>this.view.webContents.focus()),kq.on(l_.WINDOW_MAIN_LOGIN,(r,...i)=>{i.length>=3&&this.view.webContents.send(l_.WINDOW_MAIN_LOGIN,i)}),this._oglama.mainLoginWindow().contentView.addChildView(this.view),p(this,ou).call(this),!0));_(this,"openExternal",r=>{typeof r=="string"&&$q.openExternal(r)});this._register("main/login")}},ou=new WeakMap,u_)});var y_=w((UW,g_)=>{var{app:Uq,session:Bq,shell:jq,ipcMain:Hq,WebContentsView:au,nativeTheme:Wq,dialog:Gq}=require("electron"),f_=require("path"),d_=require("fs"),p_=Gt(),zq=h_(),Vq=Jt(),ps,m_;g_.exports=(m_=class extends Vq{constructor(r){super(r);_(this,"windowWidth");_(this,"windowHeight");_(this,"view",null);_(this,"onTop",!1);_(this,"darkMode",null);_(this,"login",null);R(this,ps,()=>this.view instanceof au?(this.view.setBounds({x:0,y:0,width:this.windowWidth,height:this.windowHeight}),!0):!1);_(this,"init",()=>this.view instanceof au?!1:(this.windowWidth=this._oglama.config.getMainMinWidth(),this.windowHeight=this._oglama.config.getMainMinHeight(),this.view=new au({width:this.windowWidth,height:this.windowHeight,resizable:!1,backgroundColor:"#00000000",webPreferences:{transparent:!0,preload:f_.join(this._oglama.rootPath,"lib/preloader/entry/main.js"),imageAnimationPolicy:"noAnimation",allowRunningInsecureContent:!0,session:Bq.defaultSession,devTools:!1,backgroundThrottling:!1,nodeIntegration:!0,webSecurity:!1,spellcheck:!1,cache:!1}}),this.view.webContents.on("ready-to-show",()=>{this.view.webContents.setZoomFactor(1),this.view.webContents.setVisualZoomLevelLimits(1,1)}),this.view.webContents.setZoomLevel(0),this.view.webContents.setAudioMuted(!1),this.view.webContents.loadURL("http://localhost:".concat(this._oglama.config.getServerPort(),"/")),this.view.webContents.on("dom-ready",()=>this.view.webContents.focus()),this.view.webContents.on("page-title-updated",(r,i)=>{this._oglama.mainWindow().setTitle(i)}),Hq.on(p_.WINDOW_MAIN,(r,...i)=>{i.length>=3&&this.view.webContents.send(p_.WINDOW_MAIN,i)}),this._oglama.mainWindow().contentView.addChildView(this.view),p(this,ps).call(this),!0));_(this,"setWindowSize",(r,i)=>{this.windowWidth=r,this.windowHeight=i,p(this,ps).call(this)});_(this,"focus",()=>{let r=typeof this.view?.webContents?.focus=="function";return r&&!this.view?.webContents?.isFocused()&&this.view?.webContents?.focus(),r});_(this,"setOnTop",(r=!0)=>{let i=!1;if(r=!!r,this.getOnTop()!==r){if(this.onTop=r,this.onTop)this._oglama.mainWindow().contentView.removeChildView(this.view),this._oglama.mainWindow().contentView.addChildView(this.view);else{let n=this._oglama.target.getSelected();if(typeof n=="string"&&n.length){let s=this._oglama.target.getTargets()[n];s instanceof au&&(this._oglama.mainWindow().contentView.removeChildView(s),this._oglama.mainWindow().contentView.removeChildView(this.view),this._oglama.mainWindow().contentView.addChildView(this.view),this._oglama.mainWindow().contentView.addChildView(s))}}p(this,ps).call(this),i=!0}return i});_(this,"getOnTop",()=>this.onTop);_(this,"setDarkMode",r=>{let i=!1;return r=!!r,this.getDarkMode()!==r&&(this.darkMode=r,Wq.themeSource=r?"dark":"light",this._oglama.mainWindow().setBackgroundColor(r?"#333":"#fff"),i=!0),i});_(this,"quit",()=>Uq.quit());_(this,"getProcessVersions",()=>process.versions);_(this,"getDarkMode",()=>this.darkMode);_(this,"openExternal",r=>{typeof r=="string"&&jq.openExternal(r)});_(this,"showOpenDialog",async(r,i=[],n=!1)=>{let s=[];i=(Array.isArray(i)?i:[]).map(a=>"".concat(a).replace(/^\.+/g,"").trim()).filter(Boolean);let o=await Gq.showOpenDialog({properties:["openFile",...n?["multiSelections"]:[]],filters:[{name:typeof r=="string"&&r.length?r:n?"Select files":"Select file",extensions:i}]});return o.canceled||(s=(Array.isArray(o.filePaths)?o.filePaths:[]).map(a=>{if(d_.existsSync(a))try{return{path:a,name:f_.basename(a),size:d_.statSync(a).size}}catch{}return null}).filter(a=>a!==null)),s});this._register("main"),this.login=new zq(r)}},ps=new WeakMap,m_)});var ms=w((jW,A_)=>{"use strict";var w_=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);A_.exports=t=>t?Object.keys(t).map(e=>[w_.has(e)?w_.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var pu=w(I_=>{"use strict";var E_=typeof process=="object"&&process?process:{stdout:null,stderr:null},Yq=require("events"),S_=require("stream"),Qq=require("string_decoder"),b_=Qq.StringDecoder,Rr=Symbol("EOF"),Ir=Symbol("maybeEmitEnd"),pi=Symbol("emittedEnd"),lu=Symbol("emittingEnd"),zo=Symbol("emittedError"),uu=Symbol("closed"),__=Symbol("read"),cu=Symbol("flush"),v_=Symbol("flushChunk"),pt=Symbol("encoding"),Nr=Symbol("decoder"),hu=Symbol("flowing"),Vo=Symbol("paused"),gs=Symbol("resume"),Ee=Symbol("buffer"),or=Symbol("pipes"),De=Symbol("bufferLength"),_d=Symbol("bufferPush"),vd=Symbol("bufferShift"),Ue=Symbol("objectMode"),Se=Symbol("destroyed"),Od=Symbol("error"),Td=Symbol("emitData"),O_=Symbol("emitEnd"),Cd=Symbol("emitEnd2"),xr=Symbol("async"),Rd=Symbol("abort"),fu=Symbol("aborted"),ln=Symbol("signal"),Yo=t=>Promise.resolve().then(t),R_=global._MP_NO_ITERATOR_SYMBOLS_!=="1",T_=R_&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),C_=R_&&Symbol.iterator||Symbol("iterator not implemented"),Xq=t=>t==="end"||t==="finish"||t==="prefinish",Kq=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Jq=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),du=class{constructor(e,r,i){this.src=e,this.dest=r,this.opts=i,this.ondrain=()=>e[gs](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Id=class extends du{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,i){super(e,r,i),this.proxyErrors=n=>r.emit("error",n),e.on("error",this.proxyErrors)}},Nd=class t extends S_{constructor(e){super(),this[hu]=!1,this[Vo]=!1,this[or]=[],this[Ee]=[],this[Ue]=e&&e.objectMode||!1,this[Ue]?this[pt]=null:this[pt]=e&&e.encoding||null,this[pt]==="buffer"&&(this[pt]=null),this[xr]=e&&!!e.async||!1,this[Nr]=this[pt]?new b_(this[pt]):null,this[Rr]=!1,this[pi]=!1,this[lu]=!1,this[uu]=!1,this[zo]=null,this.writable=!0,this.readable=!0,this[De]=0,this[Se]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Ee]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[or]}),this[ln]=e&&e.signal,this[fu]=!1,this[ln]&&(this[ln].addEventListener("abort",()=>this[Rd]()),this[ln].aborted&&this[Rd]())}get bufferLength(){return this[De]}get encoding(){return this[pt]}set encoding(e){if(this[Ue])throw new Error("cannot set encoding in objectMode");if(this[pt]&&e!==this[pt]&&(this[Nr]&&this[Nr].lastNeed||this[De]))throw new Error("cannot change encoding");this[pt]!==e&&(this[Nr]=e?new b_(e):null,this[Ee].length&&(this[Ee]=this[Ee].map(r=>this[Nr].write(r)))),this[pt]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Ue]}set objectMode(e){this[Ue]=this[Ue]||!!e}get async(){return this[xr]}set async(e){this[xr]=this[xr]||!!e}[Rd](){this[fu]=!0,this.emit("abort",this[ln].reason),this.destroy(this[ln].reason)}get aborted(){return this[fu]}set aborted(e){}write(e,r,i){if(this[fu])return!1;if(this[Rr])throw new Error("write after end");if(this[Se])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(i=r,r="utf8"),r||(r="utf8");let n=this[xr]?Yo:s=>s();return!this[Ue]&&!Buffer.isBuffer(e)&&(Jq(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Kq(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Ue]?(this.flowing&&this[De]!==0&&this[cu](!0),this.flowing?this.emit("data",e):this[_d](e),this[De]!==0&&this.emit("readable"),i&&n(i),this.flowing):e.length?(typeof e=="string"&&!(r===this[pt]&&!this[Nr].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[pt]&&(e=this[Nr].write(e)),this.flowing&&this[De]!==0&&this[cu](!0),this.flowing?this.emit("data",e):this[_d](e),this[De]!==0&&this.emit("readable"),i&&n(i),this.flowing):(this[De]!==0&&this.emit("readable"),i&&n(i),this.flowing)}read(e){if(this[Se])return null;if(this[De]===0||e===0||e>this[De])return this[Ir](),null;this[Ue]&&(e=null),this[Ee].length>1&&!this[Ue]&&(this.encoding?this[Ee]=[this[Ee].join("")]:this[Ee]=[Buffer.concat(this[Ee],this[De])]);let r=this[__](e||null,this[Ee][0]);return this[Ir](),r}[__](e,r){return e===r.length||e===null?this[vd]():(this[Ee][0]=r.slice(e),r=r.slice(0,e),this[De]-=e),this.emit("data",r),!this[Ee].length&&!this[Rr]&&this.emit("drain"),r}end(e,r,i){return typeof e=="function"&&(i=e,e=null),typeof r=="function"&&(i=r,r="utf8"),e&&this.write(e,r),i&&this.once("end",i),this[Rr]=!0,this.writable=!1,(this.flowing||!this[Vo])&&this[Ir](),this}[gs](){this[Se]||(this[Vo]=!1,this[hu]=!0,this.emit("resume"),this[Ee].length?this[cu]():this[Rr]?this[Ir]():this.emit("drain"))}resume(){return this[gs]()}pause(){this[hu]=!1,this[Vo]=!0}get destroyed(){return this[Se]}get flowing(){return this[hu]}get paused(){return this[Vo]}[_d](e){this[Ue]?this[De]+=1:this[De]+=e.length,this[Ee].push(e)}[vd](){return this[Ue]?this[De]-=1:this[De]-=this[Ee][0].length,this[Ee].shift()}[cu](e){do;while(this[v_](this[vd]())&&this[Ee].length);!e&&!this[Ee].length&&!this[Rr]&&this.emit("drain")}[v_](e){return this.emit("data",e),this.flowing}pipe(e,r){if(this[Se])return;let i=this[pi];return r=r||{},e===E_.stdout||e===E_.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,i?r.end&&e.end():(this[or].push(r.proxyErrors?new Id(this,e,r):new du(this,e,r)),this[xr]?Yo(()=>this[gs]()):this[gs]()),e}unpipe(e){let r=this[or].find(i=>i.dest===e);r&&(this[or].splice(this[or].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let i=super.on(e,r);return e==="data"&&!this[or].length&&!this.flowing?this[gs]():e==="readable"&&this[De]!==0?super.emit("readable"):Xq(e)&&this[pi]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[zo]&&(this[xr]?Yo(()=>r.call(this,this[zo])):r.call(this,this[zo])),i}get emittedEnd(){return this[pi]}[Ir](){!this[lu]&&!this[pi]&&!this[Se]&&this[Ee].length===0&&this[Rr]&&(this[lu]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[uu]&&this.emit("close"),this[lu]=!1)}emit(e,r,...i){if(e!=="error"&&e!=="close"&&e!==Se&&this[Se])return;if(e==="data")return!this[Ue]&&!r?!1:this[xr]?Yo(()=>this[Td](r)):this[Td](r);if(e==="end")return this[O_]();if(e==="close"){if(this[uu]=!0,!this[pi]&&!this[Se])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[zo]=r,super.emit(Od,r);let s=!this[ln]||this.listeners("error").length?super.emit("error",r):!1;return this[Ir](),s}else if(e==="resume"){let s=super.emit("resume");return this[Ir](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,r,...i);return this[Ir](),n}[Td](e){for(let i of this[or])i.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[Ir](),r}[O_](){this[pi]||(this[pi]=!0,this.readable=!1,this[xr]?Yo(()=>this[Cd]()):this[Cd]())}[Cd](){if(this[Nr]){let r=this[Nr].end();if(r){for(let i of this[or])i.dest.write(r);super.emit("data",r)}}for(let r of this[or])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Ue]||(e.dataLength=0);let r=this.promise();return this.on("data",i=>{e.push(i),this[Ue]||(e.dataLength+=i.length)}),r.then(()=>e)}concat(){return this[Ue]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Ue]?Promise.reject(new Error("cannot concat in objectMode")):this[pt]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Se,()=>r(new Error("stream destroyed"))),this.on("error",i=>r(i)),this.on("end",()=>e())})}[T_](){let e=!1,r=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return r();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Rr])return r();let s=null,o=null,a=h=>{this.removeListener("data",l),this.removeListener("end",c),this.removeListener(Se,u),r(),o(h)},l=h=>{this.removeListener("error",a),this.removeListener("end",c),this.removeListener(Se,u),this.pause(),s({value:h,done:!!this[Rr]})},c=()=>{this.removeListener("error",a),this.removeListener("data",l),this.removeListener(Se,u),r(),s({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((h,f)=>{o=f,s=h,this.once(Se,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:r,return:r,[T_](){return this}}}[C_](){let e=!1,r=()=>(this.pause(),this.removeListener(Od,r),this.removeListener(Se,r),this.removeListener("end",r),e=!0,{done:!0}),i=()=>{if(e)return r();let n=this.read();return n===null?r():{value:n}};return this.once("end",r),this.once(Od,r),this.once(Se,r),{next:i,throw:r,return:r,[C_](){return this}}}destroy(e){return this[Se]?(e?this.emit("error",e):this.emit(Se),this):(this[Se]=!0,this[Ee].length=0,this[De]=0,typeof this.close=="function"&&!this[uu]&&this.close(),e?this.emit("error",e):this.emit(Se),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof S_||e instanceof Yq&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};I_.Minipass=Nd});var x_=w((WW,N_)=>{var Zq=require("zlib").constants||{ZLIB_VERNUM:4736};N_.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},Zq))});var B_=w((GW,U_)=>{"use strict";var D_=typeof process=="object"&&process?process:{stdout:null,stderr:null},eM=require("events"),P_=require("stream"),F_=require("string_decoder").StringDecoder,Dr=Symbol("EOF"),Pr=Symbol("maybeEmitEnd"),mi=Symbol("emittedEnd"),mu=Symbol("emittingEnd"),Qo=Symbol("emittedError"),gu=Symbol("closed"),L_=Symbol("read"),yu=Symbol("flush"),$_=Symbol("flushChunk"),mt=Symbol("encoding"),Fr=Symbol("decoder"),wu=Symbol("flowing"),Xo=Symbol("paused"),ys=Symbol("resume"),Pe=Symbol("bufferLength"),xd=Symbol("bufferPush"),Dd=Symbol("bufferShift"),Ge=Symbol("objectMode"),ze=Symbol("destroyed"),Pd=Symbol("emitData"),k_=Symbol("emitEnd"),Fd=Symbol("emitEnd2"),Lr=Symbol("async"),Ko=t=>Promise.resolve().then(t),q_=global._MP_NO_ITERATOR_SYMBOLS_!=="1",tM=q_&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),rM=q_&&Symbol.iterator||Symbol("iterator not implemented"),iM=t=>t==="end"||t==="finish"||t==="prefinish",nM=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,sM=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Au=class{constructor(e,r,i){this.src=e,this.dest=r,this.opts=i,this.ondrain=()=>e[ys](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Ld=class extends Au{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,i){super(e,r,i),this.proxyErrors=n=>r.emit("error",n),e.on("error",this.proxyErrors)}};U_.exports=class M_ extends P_{constructor(e){super(),this[wu]=!1,this[Xo]=!1,this.pipes=[],this.buffer=[],this[Ge]=e&&e.objectMode||!1,this[Ge]?this[mt]=null:this[mt]=e&&e.encoding||null,this[mt]==="buffer"&&(this[mt]=null),this[Lr]=e&&!!e.async||!1,this[Fr]=this[mt]?new F_(this[mt]):null,this[Dr]=!1,this[mi]=!1,this[mu]=!1,this[gu]=!1,this[Qo]=null,this.writable=!0,this.readable=!0,this[Pe]=0,this[ze]=!1}get bufferLength(){return this[Pe]}get encoding(){return this[mt]}set encoding(e){if(this[Ge])throw new Error("cannot set encoding in objectMode");if(this[mt]&&e!==this[mt]&&(this[Fr]&&this[Fr].lastNeed||this[Pe]))throw new Error("cannot change encoding");this[mt]!==e&&(this[Fr]=e?new F_(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Fr].write(r)))),this[mt]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Ge]}set objectMode(e){this[Ge]=this[Ge]||!!e}get async(){return this[Lr]}set async(e){this[Lr]=this[Lr]||!!e}write(e,r,i){if(this[Dr])throw new Error("write after end");if(this[ze])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(i=r,r="utf8"),r||(r="utf8");let n=this[Lr]?Ko:s=>s();return!this[Ge]&&!Buffer.isBuffer(e)&&(sM(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):nM(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Ge]?(this.flowing&&this[Pe]!==0&&this[yu](!0),this.flowing?this.emit("data",e):this[xd](e),this[Pe]!==0&&this.emit("readable"),i&&n(i),this.flowing):e.length?(typeof e=="string"&&!(r===this[mt]&&!this[Fr].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[mt]&&(e=this[Fr].write(e)),this.flowing&&this[Pe]!==0&&this[yu](!0),this.flowing?this.emit("data",e):this[xd](e),this[Pe]!==0&&this.emit("readable"),i&&n(i),this.flowing):(this[Pe]!==0&&this.emit("readable"),i&&n(i),this.flowing)}read(e){if(this[ze])return null;if(this[Pe]===0||e===0||e>this[Pe])return this[Pr](),null;this[Ge]&&(e=null),this.buffer.length>1&&!this[Ge]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[Pe])]);let r=this[L_](e||null,this.buffer[0]);return this[Pr](),r}[L_](e,r){return e===r.length||e===null?this[Dd]():(this.buffer[0]=r.slice(e),r=r.slice(0,e),this[Pe]-=e),this.emit("data",r),!this.buffer.length&&!this[Dr]&&this.emit("drain"),r}end(e,r,i){return typeof e=="function"&&(i=e,e=null),typeof r=="function"&&(i=r,r="utf8"),e&&this.write(e,r),i&&this.once("end",i),this[Dr]=!0,this.writable=!1,(this.flowing||!this[Xo])&&this[Pr](),this}[ys](){this[ze]||(this[Xo]=!1,this[wu]=!0,this.emit("resume"),this.buffer.length?this[yu]():this[Dr]?this[Pr]():this.emit("drain"))}resume(){return this[ys]()}pause(){this[wu]=!1,this[Xo]=!0}get destroyed(){return this[ze]}get flowing(){return this[wu]}get paused(){return this[Xo]}[xd](e){this[Ge]?this[Pe]+=1:this[Pe]+=e.length,this.buffer.push(e)}[Dd](){return this.buffer.length&&(this[Ge]?this[Pe]-=1:this[Pe]-=this.buffer[0].length),this.buffer.shift()}[yu](e){do;while(this[$_](this[Dd]()));!e&&!this.buffer.length&&!this[Dr]&&this.emit("drain")}[$_](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[ze])return;let i=this[mi];return r=r||{},e===D_.stdout||e===D_.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,i?r.end&&e.end():(this.pipes.push(r.proxyErrors?new Ld(this,e,r):new Au(this,e,r)),this[Lr]?Ko(()=>this[ys]()):this[ys]()),e}unpipe(e){let r=this.pipes.find(i=>i.dest===e);r&&(this.pipes.splice(this.pipes.indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let i=super.on(e,r);return e==="data"&&!this.pipes.length&&!this.flowing?this[ys]():e==="readable"&&this[Pe]!==0?super.emit("readable"):iM(e)&&this[mi]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Qo]&&(this[Lr]?Ko(()=>r.call(this,this[Qo])):r.call(this,this[Qo])),i}get emittedEnd(){return this[mi]}[Pr](){!this[mu]&&!this[mi]&&!this[ze]&&this.buffer.length===0&&this[Dr]&&(this[mu]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[gu]&&this.emit("close"),this[mu]=!1)}emit(e,r,...i){if(e!=="error"&&e!=="close"&&e!==ze&&this[ze])return;if(e==="data")return r?this[Lr]?Ko(()=>this[Pd](r)):this[Pd](r):!1;if(e==="end")return this[k_]();if(e==="close"){if(this[gu]=!0,!this[mi]&&!this[ze])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Qo]=r;let s=super.emit("error",r);return this[Pr](),s}else if(e==="resume"){let s=super.emit("resume");return this[Pr](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,r,...i);return this[Pr](),n}[Pd](e){for(let i of this.pipes)i.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[Pr](),r}[k_](){this[mi]||(this[mi]=!0,this.readable=!1,this[Lr]?Ko(()=>this[Fd]()):this[Fd]())}[Fd](){if(this[Fr]){let r=this[Fr].end();if(r){for(let i of this.pipes)i.dest.write(r);super.emit("data",r)}}for(let r of this.pipes)r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Ge]||(e.dataLength=0);let r=this.promise();return this.on("data",i=>{e.push(i),this[Ge]||(e.dataLength+=i.length)}),r.then(()=>e)}concat(){return this[Ge]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Ge]?Promise.reject(new Error("cannot concat in objectMode")):this[mt]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(ze,()=>r(new Error("stream destroyed"))),this.on("error",i=>r(i)),this.on("end",()=>e())})}[tM](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Dr])return Promise.resolve({done:!0});let i=null,n=null,s=c=>{this.removeListener("data",o),this.removeListener("end",a),n(c)},o=c=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),i({value:c,done:!!this[Dr]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),i({done:!0})},l=()=>s(new Error("stream destroyed"));return new Promise((c,u)=>{n=u,i=c,this.once(ze,l),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[rM](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[ze]?(e?this.emit("error",e):this.emit(ze),this):(this[ze]=!0,this.buffer.length=0,this[Pe]=0,typeof this.close=="function"&&!this[gu]&&this.close(),e?this.emit("error",e):this.emit(ze),this)}static isStream(e){return!!e&&(e instanceof M_||e instanceof P_||e instanceof eM&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Kd=w(Ot=>{"use strict";var Ud=require("assert"),gi=require("buffer").Buffer,W_=require("zlib"),un=Ot.constants=x_(),oM=B_(),j_=gi.concat,cn=Symbol("_superWrite"),As=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},aM=Symbol("opts"),Jo=Symbol("flushFlag"),H_=Symbol("finishFlushFlag"),Xd=Symbol("fullFlushFlag"),le=Symbol("handle"),Eu=Symbol("onError"),ws=Symbol("sawError"),$d=Symbol("level"),kd=Symbol("strategy"),qd=Symbol("ended"),zW=Symbol("_defaultFullFlush"),Su=class extends oM{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[ws]=!1,this[qd]=!1,this[aM]=e,this[Jo]=e.flush,this[H_]=e.finishFlush;try{this[le]=new W_[r](e)}catch(i){throw new As(i)}this[Eu]=i=>{this[ws]||(this[ws]=!0,this.close(),this.emit("error",i))},this[le].on("error",i=>this[Eu](new As(i))),this.once("end",()=>this.close)}close(){this[le]&&(this[le].close(),this[le]=null,this.emit("close"))}reset(){if(!this[ws])return Ud(this[le],"zlib binding closed"),this[le].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Xd]),this.write(Object.assign(gi.alloc(0),{[Jo]:e})))}end(e,r,i){return e&&this.write(e,r),this.flush(this[H_]),this[qd]=!0,super.end(null,null,i)}get ended(){return this[qd]}write(e,r,i){if(typeof r=="function"&&(i=r,r="utf8"),typeof e=="string"&&(e=gi.from(e,r)),this[ws])return;Ud(this[le],"zlib binding closed");let n=this[le]._handle,s=n.close;n.close=()=>{};let o=this[le].close;this[le].close=()=>{},gi.concat=c=>c;let a;try{let c=typeof e[Jo]=="number"?e[Jo]:this[Jo];a=this[le]._processChunk(e,c),gi.concat=j_}catch(c){gi.concat=j_,this[Eu](new As(c))}finally{this[le]&&(this[le]._handle=n,n.close=s,this[le].close=o,this[le].removeAllListeners("error"))}this[le]&&this[le].on("error",c=>this[Eu](new As(c)));let l;if(a)if(Array.isArray(a)&&a.length>0){l=this[cn](gi.from(a[0]));for(let c=1;c<a.length;c++)l=this[cn](a[c])}else l=this[cn](gi.from(a));return i&&i(),l}[cn](e){return super.write(e)}},$r=class extends Su{constructor(e,r){e=e||{},e.flush=e.flush||un.Z_NO_FLUSH,e.finishFlush=e.finishFlush||un.Z_FINISH,super(e,r),this[Xd]=un.Z_FULL_FLUSH,this[$d]=e.level,this[kd]=e.strategy}params(e,r){if(!this[ws]){if(!this[le])throw new Error("cannot switch params when binding is closed");if(!this[le].params)throw new Error("not supported in this implementation");if(this[$d]!==e||this[kd]!==r){this.flush(un.Z_SYNC_FLUSH),Ud(this[le],"zlib binding closed");let i=this[le].flush;this[le].flush=(n,s)=>{this.flush(n),s()};try{this[le].params(e,r)}finally{this[le].flush=i}this[le]&&(this[$d]=e,this[kd]=r)}}}},Bd=class extends $r{constructor(e){super(e,"Deflate")}},jd=class extends $r{constructor(e){super(e,"Inflate")}},Md=Symbol("_portable"),Hd=class extends $r{constructor(e){super(e,"Gzip"),this[Md]=e&&!!e.portable}[cn](e){return this[Md]?(this[Md]=!1,e[9]=255,super[cn](e)):super[cn](e)}},Wd=class extends $r{constructor(e){super(e,"Gunzip")}},Gd=class extends $r{constructor(e){super(e,"DeflateRaw")}},zd=class extends $r{constructor(e){super(e,"InflateRaw")}},Vd=class extends $r{constructor(e){super(e,"Unzip")}},bu=class extends Su{constructor(e,r){e=e||{},e.flush=e.flush||un.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||un.BROTLI_OPERATION_FINISH,super(e,r),this[Xd]=un.BROTLI_OPERATION_FLUSH}},Yd=class extends bu{constructor(e){super(e,"BrotliCompress")}},Qd=class extends bu{constructor(e){super(e,"BrotliDecompress")}};Ot.Deflate=Bd;Ot.Inflate=jd;Ot.Gzip=Hd;Ot.Gunzip=Wd;Ot.DeflateRaw=Gd;Ot.InflateRaw=zd;Ot.Unzip=Vd;typeof W_.BrotliCompress=="function"?(Ot.BrotliCompress=Yd,Ot.BrotliDecompress=Qd):Ot.BrotliCompress=Ot.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Es=w((QW,G_)=>{var lM=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;G_.exports=lM!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var _u=w((KW,z_)=>{"use strict";var{Minipass:uM}=pu(),Jd=Es(),Zd=Symbol("slurp");z_.exports=class extends uM{constructor(e,r,i){switch(super(),this.pause(),this.extended=r,this.globalExtended=i,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Jd(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Jd(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[Zd](r),i&&this[Zd](i,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let i=this.remain,n=this.blockRemain;return this.remain=Math.max(0,i-r),this.blockRemain=Math.max(0,n-r),this.ignore?!0:i>=r?super.write(e):super.write(e.slice(0,i))}[Zd](e,r){for(let i in e)e[i]!==null&&e[i]!==void 0&&!(r&&i==="path")&&(this[i]=i==="path"||i==="linkpath"?Jd(e[i]):e[i])}}});var ep=w(vu=>{"use strict";vu.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);vu.code=new Map(Array.from(vu.name).map(t=>[t[1],t[0]]))});var X_=w((ZW,Q_)=>{"use strict";var cM=(t,e)=>{if(Number.isSafeInteger(t))t<0?fM(t,e):hM(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},hM=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},fM=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var i=e.length;i>1;i--){var n=t&255;t=Math.floor(t/256),r?e[i-1]=V_(n):n===0?e[i-1]=0:(r=!0,e[i-1]=Y_(n))}},dM=t=>{let e=t[0],r=e===128?mM(t.slice(1,t.length)):e===255?pM(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},pM=t=>{for(var e=t.length,r=0,i=!1,n=e-1;n>-1;n--){var s=t[n],o;i?o=V_(s):s===0?o=s:(i=!0,o=Y_(s)),o!==0&&(r-=o*Math.pow(256,e-n-1))}return r},mM=t=>{for(var e=t.length,r=0,i=e-1;i>-1;i--){var n=t[i];n!==0&&(r+=n*Math.pow(256,e-i-1))}return r},V_=t=>(255^t)&255,Y_=t=>(255^t)+1&255;Q_.exports={encode:cM,parse:dM}});var bs=w((e3,J_)=>{"use strict";var tp=ep(),Ss=require("path").posix,K_=X_(),rp=Symbol("slurp"),Tt=Symbol("type"),sp=class{constructor(e,r,i,n){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Tt]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,i,n):e&&this.set(e)}decode(e,r,i,n){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=hn(e,r,100),this.mode=yi(e,r+100,8),this.uid=yi(e,r+108,8),this.gid=yi(e,r+116,8),this.size=yi(e,r+124,12),this.mtime=ip(e,r+136,12),this.cksum=yi(e,r+148,12),this[rp](i),this[rp](n,!0),this[Tt]=hn(e,r+156,1),this[Tt]===""&&(this[Tt]="0"),this[Tt]==="0"&&this.path.slice(-1)==="/"&&(this[Tt]="5"),this[Tt]==="5"&&(this.size=0),this.linkpath=hn(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=hn(e,r+265,32),this.gname=hn(e,r+297,32),this.devmaj=yi(e,r+329,8),this.devmin=yi(e,r+337,8),e[r+475]!==0){let o=hn(e,r+345,155);this.path=o+"/"+this.path}else{let o=hn(e,r+345,130);o&&(this.path=o+"/"+this.path),this.atime=ip(e,r+476,12),this.ctime=ip(e,r+488,12)}let s=256;for(let o=r;o<r+148;o++)s+=e[o];for(let o=r+156;o<r+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===256&&(this.nullBlock=!0)}[rp](e,r){for(let i in e)e[i]!==null&&e[i]!==void 0&&!(r&&i==="path")&&(this[i]=e[i])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let i=this.ctime||this.atime?130:155,n=gM(this.path||"",i),s=n[0],o=n[1];this.needPax=n[2],this.needPax=fn(e,r,100,s)||this.needPax,this.needPax=wi(e,r+100,8,this.mode)||this.needPax,this.needPax=wi(e,r+108,8,this.uid)||this.needPax,this.needPax=wi(e,r+116,8,this.gid)||this.needPax,this.needPax=wi(e,r+124,12,this.size)||this.needPax,this.needPax=np(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[Tt].charCodeAt(0),this.needPax=fn(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=fn(e,r+265,32,this.uname)||this.needPax,this.needPax=fn(e,r+297,32,this.gname)||this.needPax,this.needPax=wi(e,r+329,8,this.devmaj)||this.needPax,this.needPax=wi(e,r+337,8,this.devmin)||this.needPax,this.needPax=fn(e,r+345,i,o)||this.needPax,e[r+475]!==0?this.needPax=fn(e,r+345,155,o)||this.needPax:(this.needPax=fn(e,r+345,130,o)||this.needPax,this.needPax=np(e,r+476,12,this.atime)||this.needPax,this.needPax=np(e,r+488,12,this.ctime)||this.needPax);let a=256;for(let l=r;l<r+148;l++)a+=e[l];for(let l=r+156;l<r+512;l++)a+=e[l];return this.cksum=a,wi(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return tp.name.get(this[Tt])||this[Tt]}get typeKey(){return this[Tt]}set type(e){tp.code.has(e)?this[Tt]=tp.code.get(e):this[Tt]=e}},gM=(t,e)=>{let i=t,n="",s,o=Ss.parse(t).root||".";if(Buffer.byteLength(i)<100)s=[i,n,!1];else{n=Ss.dirname(i),i=Ss.basename(i);do Buffer.byteLength(i)<=100&&Buffer.byteLength(n)<=e?s=[i,n,!1]:Buffer.byteLength(i)>100&&Buffer.byteLength(n)<=e?s=[i.slice(0,99),n,!0]:(i=Ss.join(Ss.basename(n),i),n=Ss.dirname(n));while(n!==o&&!s);s||(s=[t.slice(0,99),"",!0])}return s},hn=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),ip=(t,e,r)=>yM(yi(t,e,r)),yM=t=>t===null?null:new Date(t*1e3),yi=(t,e,r)=>t[e]&128?K_.parse(t.slice(e,e+r)):AM(t,e,r),wM=t=>isNaN(t)?null:t,AM=(t,e,r)=>wM(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),EM={12:8589934591,8:2097151},wi=(t,e,r,i)=>i===null?!1:i>EM[r]||i<0?(K_.encode(i,t.slice(e,e+r)),!0):(SM(t,e,r,i),!1),SM=(t,e,r,i)=>t.write(bM(i,r),e,r,"ascii"),bM=(t,e)=>_M(Math.floor(t).toString(8),e),_M=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",np=(t,e,r,i)=>i===null?!1:wi(t,e,r,i.getTime()/1e3),vM=new Array(156).join("\0"),fn=(t,e,r,i)=>i===null?!1:(t.write(i+vM,e,r,"utf8"),i.length!==Buffer.byteLength(i)||i.length>r);J_.exports=sp});var Ou=w((t3,Z_)=>{"use strict";var OM=bs(),TM=require("path"),Zo=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),i=512*Math.ceil(1+r/512),n=Buffer.allocUnsafe(i);for(let s=0;s<512;s++)n[s]=0;new OM({path:("PaxHeader/"+TM.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(n),n.write(e,512,r,"utf8");for(let s=r+512;s<n.length;s++)n[s]=0;return n}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],i=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+"\n",n=Buffer.byteLength(i),s=Math.floor(Math.log(n)/Math.log(10))+1;return n+s>=Math.pow(10,s)&&(s+=1),s+n+i}};Zo.parse=(t,e,r)=>new Zo(CM(RM(t),e),r);var CM=(t,e)=>e?Object.keys(t).reduce((r,i)=>(r[i]=t[i],r),e):t,RM=t=>t.replace(/\n$/,"").split("\n").reduce(IM,Object.create(null)),IM=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.slice((r+" ").length);let i=e.split("="),n=i.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!n)return t;let s=i.join("=");return t[n]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(n)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,t};Z_.exports=Zo});var _s=w((r3,ev)=>{ev.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var Tu=w((i3,tv)=>{"use strict";tv.exports=t=>class extends t{warn(e,r,i={}){this.file&&(i.file=this.file),this.cwd&&(i.cwd=this.cwd),i.code=r instanceof Error&&r.code||e,i.tarCode=e,!this.strict&&i.recoverable!==!1?(r instanceof Error&&(i=Object.assign(r,i),r=r.message),this.emit("warn",i.tarCode,r,i)):r instanceof Error?this.emit("error",Object.assign(r,i)):this.emit("error",Object.assign(new Error("".concat(e,": ").concat(r)),i))}}});var ap=w((s3,rv)=>{"use strict";var Cu=["|","<",">","?",":"],op=Cu.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),NM=new Map(Cu.map((t,e)=>[t,op[e]])),xM=new Map(op.map((t,e)=>[t,Cu[e]]));rv.exports={encode:t=>Cu.reduce((e,r)=>e.split(r).join(NM.get(r)),t),decode:t=>op.reduce((e,r)=>e.split(r).join(xM.get(r)),t)}});var lp=w((o3,nv)=>{var{isAbsolute:DM,parse:iv}=require("path").win32;nv.exports=t=>{let e="",r=iv(t);for(;DM(t)||r.root;){let i=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.slice(i.length),e+=i,r=iv(t)}return[e,t]}});var ov=w((a3,sv)=>{"use strict";sv.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var wp=w((c3,Ev)=>{"use strict";var{Minipass:dv}=pu(),pv=Ou(),mv=bs(),lr=require("fs"),av=require("path"),ar=Es(),PM=_s(),gv=(t,e)=>e?(t=ar(t).replace(/^\.(\/|$)/,""),PM(e)+"/"+t):ar(t),FM=16*1024*1024,lv=Symbol("process"),uv=Symbol("file"),cv=Symbol("directory"),cp=Symbol("symlink"),hv=Symbol("hardlink"),ea=Symbol("header"),Ru=Symbol("read"),hp=Symbol("lstat"),Iu=Symbol("onlstat"),fp=Symbol("onread"),dp=Symbol("onreadlink"),pp=Symbol("openfile"),mp=Symbol("onopenfile"),Ai=Symbol("close"),Nu=Symbol("mode"),gp=Symbol("awaitDrain"),up=Symbol("ondrain"),ur=Symbol("prefix"),fv=Symbol("hadError"),yv=Tu(),LM=ap(),wv=lp(),Av=ov(),xu=yv(class extends dv{constructor(e,r){if(r=r||{},super(r),typeof e!="string")throw new TypeError("path is required");this.path=ar(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||FM,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=ar(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?ar(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let i=!1;if(!this.preservePaths){let[n,s]=wv(this.path);n&&(this.path=s,i=n)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=LM.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=ar(r.absolute||av.resolve(this.cwd,e)),this.path===""&&(this.path="./"),i&&this.warn("TAR_ENTRY_INFO","stripping ".concat(i," from absolute path"),{entry:this,path:i+this.path}),this.statCache.has(this.absolute)?this[Iu](this.statCache.get(this.absolute)):this[hp]()}emit(e,...r){return e==="error"&&(this[fv]=!0),super.emit(e,...r)}[hp](){lr.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[Iu](r)})}[Iu](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=kM(e),this.emit("stat",e),this[lv]()}[lv](){switch(this.type){case"File":return this[uv]();case"Directory":return this[cv]();case"SymbolicLink":return this[cp]();default:return this.end()}}[Nu](e){return Av(e,this.type==="Directory",this.portable)}[ur](e){return gv(e,this.prefix)}[ea](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new mv({path:this[ur](this.path),linkpath:this.type==="Link"?this[ur](this.linkpath):this.linkpath,mode:this[Nu](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new pv({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[ur](this.path),linkpath:this.type==="Link"?this[ur](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[cv](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[ea](),this.end()}[cp](){lr.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[dp](r)})}[dp](e){this.linkpath=ar(e),this[ea](),this.end()}[hv](e){this.type="Link",this.linkpath=ar(av.relative(this.cwd,e)),this.stat.size=0,this[ea](),this.end()}[uv](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[hv](r)}this.linkCache.set(e,this.absolute)}if(this[ea](),this.stat.size===0)return this.end();this[pp]()}[pp](){lr.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[mp](r)})}[mp](e){if(this.fd=e,this[fv])return this[Ai]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Ru]()}[Ru](){let{fd:e,buf:r,offset:i,length:n,pos:s}=this;lr.read(e,r,i,n,s,(o,a)=>{if(o)return this[Ai](()=>this.emit("error",o));this[fp](a)})}[Ai](e){lr.close(this.fd,e)}[fp](e){if(e<=0&&this.remain>0){let n=new Error("encountered unexpected EOF");return n.path=this.absolute,n.syscall="read",n.code="EOF",this[Ai](()=>this.emit("error",n))}if(e>this.remain){let n=new Error("did not encounter expected EOF");return n.path=this.absolute,n.syscall="read",n.code="EOF",this[Ai](()=>this.emit("error",n))}if(e===this.remain)for(let n=e;n<this.length&&e<this.blockRemain;n++)this.buf[n+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[up]():this[gp](()=>this[up]())}[gp](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[up](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Ai](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Ru]()}}),yp=class extends xu{[hp](){this[Iu](lr.lstatSync(this.absolute))}[cp](){this[dp](lr.readlinkSync(this.absolute))}[pp](){this[mp](lr.openSync(this.absolute,"r"))}[Ru](){let e=!0;try{let{fd:r,buf:i,offset:n,length:s,pos:o}=this,a=lr.readSync(r,i,n,s,o);this[fp](a),e=!1}finally{if(e)try{this[Ai](()=>{})}catch{}}}[gp](e){e()}[Ai](e){lr.closeSync(this.fd),e()}},$M=yv(class extends dv{constructor(e,r){r=r||{},super(r),this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=ar(e.path),this.mode=this[Nu](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=ar(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let i=!1;if(!this.preservePaths){let[n,s]=wv(this.path);n&&(this.path=s,i=n)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new mv({path:this[ur](this.path),linkpath:this.type==="Link"?this[ur](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),i&&this.warn("TAR_ENTRY_INFO","stripping ".concat(i," from absolute path"),{entry:this,path:i+this.path}),this.header.encode()&&!this.noPax&&super.write(new pv({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[ur](this.path),linkpath:this.type==="Link"?this[ur](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[ur](e){return gv(e,this.prefix)}[Nu](e){return Av(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});xu.Sync=yp;xu.Tar=$M;var kM=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";Ev.exports=xu});var bv=w((h3,Sv)=>{"use strict";Sv.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Ap=w((f3,_v)=>{"use strict";_v.exports=Q;Q.Node=dn;Q.create=Q;function Q(t){var e=this;if(e instanceof Q||(e=new Q),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)e.push(arguments[r]);return e}Q.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Q.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Q.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Q.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)MM(this,arguments[t]);return this.length};Q.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)UM(this,arguments[t]);return this.length};Q.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Q.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Q.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,i=0;r!==null;i++)t.call(e,r.value,i,this),r=r.next};Q.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,i=this.length-1;r!==null;i--)t.call(e,r.value,i,this),r=r.prev};Q.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Q.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Q.prototype.map=function(t,e){e=e||this;for(var r=new Q,i=this.head;i!==null;)r.push(t.call(e,i.value,this)),i=i.next;return r};Q.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Q,i=this.tail;i!==null;)r.push(t.call(e,i.value,this)),i=i.prev;return r};Q.prototype.reduce=function(t,e){var r,i=this.head;if(arguments.length>1)r=e;else if(this.head)i=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;i!==null;n++)r=t(r,i.value,n),i=i.next;return r};Q.prototype.reduceReverse=function(t,e){var r,i=this.tail;if(arguments.length>1)r=e;else if(this.tail)i=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;i!==null;n--)r=t(r,i.value,n),i=i.prev;return r};Q.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Q.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Q.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Q;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,n=this.head;n!==null&&i<t;i++)n=n.next;for(;n!==null&&i<e;i++,n=n.next)r.push(n.value);return r};Q.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Q;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,n=this.tail;n!==null&&i>e;i--)n=n.prev;for(;n!==null&&i>t;i--,n=n.prev)r.push(n.value);return r};Q.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,n=this.head;n!==null&&i<t;i++)n=n.next;for(var s=[],i=0;n&&i<e;i++)s.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var i=0;i<r.length;i++)n=qM(this,n,r[i]);return s};Q.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i}return this.head=e,this.tail=t,this};function qM(t,e,r){var i=e===t.head?new dn(r,null,e,t):new dn(r,e,e.next,t);return i.next===null&&(t.tail=i),i.prev===null&&(t.head=i),t.length++,i}function MM(t,e){t.tail=new dn(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function UM(t,e){t.head=new dn(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function dn(t,e,r,i){if(!(this instanceof dn))return new dn(t,e,r,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{bv()(Q)}catch{}});var Uu=w((p3,xv)=>{"use strict";var qu=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},{Minipass:BM}=pu(),vv=Kd(),jM=_u(),Rp=wp(),HM=Rp.Sync,WM=Rp.Tar,GM=Ap(),Ov=Buffer.alloc(1024),Fu=Symbol("onStat"),Du=Symbol("ended"),cr=Symbol("queue"),vs=Symbol("current"),pn=Symbol("process"),Pu=Symbol("processing"),Tv=Symbol("processJob"),hr=Symbol("jobs"),Ep=Symbol("jobDone"),Lu=Symbol("addFSEntry"),Cv=Symbol("addTarEntry"),vp=Symbol("stat"),Op=Symbol("readdir"),$u=Symbol("onreaddir"),ku=Symbol("pipe"),Rv=Symbol("entry"),Sp=Symbol("entryOpt"),Tp=Symbol("writeEntryClass"),Nv=Symbol("write"),bp=Symbol("ondrain"),Mu=require("fs"),Iv=require("path"),zM=Tu(),_p=Es(),Ip=zM(class extends BM{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=_p(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Tp]=Rp,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new vv.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new vv.BrotliCompress(e.brotli)),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[bp]()),this.on("resume",r=>this.zip.resume())}else this.on("drain",this[bp]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[cr]=new GM,this[hr]=0,this.jobs=+e.jobs||4,this[Pu]=!1,this[Du]=!1}[Nv](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Du]=!0,this[pn](),this}write(e){if(this[Du])throw new Error("write after end");return e instanceof jM?this[Cv](e):this[Lu](e),this.flowing}[Cv](e){let r=_p(Iv.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let i=new qu(e.path,r,!1);i.entry=new WM(e,this[Sp](i)),i.entry.on("end",n=>this[Ep](i)),this[hr]+=1,this[cr].push(i)}this[pn]()}[Lu](e){let r=_p(Iv.resolve(this.cwd,e));this[cr].push(new qu(e,r)),this[pn]()}[vp](e){e.pending=!0,this[hr]+=1;let r=this.follow?"stat":"lstat";Mu[r](e.absolute,(i,n)=>{e.pending=!1,this[hr]-=1,i?this.emit("error",i):this[Fu](e,n)})}[Fu](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[pn]()}[Op](e){e.pending=!0,this[hr]+=1,Mu.readdir(e.absolute,(r,i)=>{if(e.pending=!1,this[hr]-=1,r)return this.emit("error",r);this[$u](e,i)})}[$u](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[pn]()}[pn](){if(!this[Pu]){this[Pu]=!0;for(let e=this[cr].head;e!==null&&this[hr]<this.jobs;e=e.next)if(this[Tv](e.value),e.value.ignore){let r=e.next;this[cr].removeNode(e),e.next=r}this[Pu]=!1,this[Du]&&!this[cr].length&&this[hr]===0&&(this.zip?this.zip.end(Ov):(super.write(Ov),super.end()))}}get[vs](){return this[cr]&&this[cr].head&&this[cr].head.value}[Ep](e){this[cr].shift(),this[hr]-=1,this[pn]()}[Tv](e){if(!e.pending){if(e.entry){e===this[vs]&&!e.piped&&this[ku](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Fu](e,this.statCache.get(e.absolute)):this[vp](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[$u](e,this.readdirCache.get(e.absolute)):this[Op](e),!e.readdir))){if(e.entry=this[Rv](e),!e.entry){e.ignore=!0;return}e===this[vs]&&!e.piped&&this[ku](e)}}}[Sp](e){return{onwarn:(r,i,n)=>this.warn(r,i,n),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[Rv](e){this[hr]+=1;try{return new this[Tp](e.path,this[Sp](e)).on("end",()=>this[Ep](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[bp](){this[vs]&&this[vs].entry&&this[vs].entry.resume()}[ku](e){e.piped=!0,e.readdir&&e.readdir.forEach(n=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[Lu](o+n)});let r=e.entry,i=this.zip;i?r.on("data",n=>{i.write(n)||r.pause()}):r.on("data",n=>{super.write(n)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),Cp=class extends Ip{constructor(e){super(e),this[Tp]=HM}pause(){}resume(){}[vp](e){let r=this.follow?"statSync":"lstatSync";this[Fu](e,Mu[r](e.absolute))}[Op](e,r){this[$u](e,Mu.readdirSync(e.absolute))}[ku](e){let r=e.entry,i=this.zip;e.readdir&&e.readdir.forEach(n=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[Lu](o+n)}),i?r.on("data",n=>{i.write(n)}):r.on("data",n=>{super[Nv](n)})}};Ip.Sync=Cp;xv.exports=Ip});var Bv=w((m3,Uv)=>{"use strict";var Dv=typeof process=="object"&&process?process:{stdout:null,stderr:null},VM=require("events"),Pv=require("stream"),Fv=require("string_decoder").StringDecoder,kr=Symbol("EOF"),qr=Symbol("maybeEmitEnd"),Ei=Symbol("emittedEnd"),Bu=Symbol("emittingEnd"),ta=Symbol("emittedError"),ju=Symbol("closed"),Lv=Symbol("read"),Hu=Symbol("flush"),$v=Symbol("flushChunk"),gt=Symbol("encoding"),Mr=Symbol("decoder"),Wu=Symbol("flowing"),ra=Symbol("paused"),Os=Symbol("resume"),Fe=Symbol("bufferLength"),Np=Symbol("bufferPush"),xp=Symbol("bufferShift"),Ve=Symbol("objectMode"),Ye=Symbol("destroyed"),Dp=Symbol("emitData"),kv=Symbol("emitEnd"),Pp=Symbol("emitEnd2"),Ur=Symbol("async"),ia=t=>Promise.resolve().then(t),qv=global._MP_NO_ITERATOR_SYMBOLS_!=="1",YM=qv&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),QM=qv&&Symbol.iterator||Symbol("iterator not implemented"),XM=t=>t==="end"||t==="finish"||t==="prefinish",KM=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,JM=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Gu=class{constructor(e,r,i){this.src=e,this.dest=r,this.opts=i,this.ondrain=()=>e[Os](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Fp=class extends Gu{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,i){super(e,r,i),this.proxyErrors=n=>r.emit("error",n),e.on("error",this.proxyErrors)}};Uv.exports=class Mv extends Pv{constructor(e){super(),this[Wu]=!1,this[ra]=!1,this.pipes=[],this.buffer=[],this[Ve]=e&&e.objectMode||!1,this[Ve]?this[gt]=null:this[gt]=e&&e.encoding||null,this[gt]==="buffer"&&(this[gt]=null),this[Ur]=e&&!!e.async||!1,this[Mr]=this[gt]?new Fv(this[gt]):null,this[kr]=!1,this[Ei]=!1,this[Bu]=!1,this[ju]=!1,this[ta]=null,this.writable=!0,this.readable=!0,this[Fe]=0,this[Ye]=!1}get bufferLength(){return this[Fe]}get encoding(){return this[gt]}set encoding(e){if(this[Ve])throw new Error("cannot set encoding in objectMode");if(this[gt]&&e!==this[gt]&&(this[Mr]&&this[Mr].lastNeed||this[Fe]))throw new Error("cannot change encoding");this[gt]!==e&&(this[Mr]=e?new Fv(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Mr].write(r)))),this[gt]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Ve]}set objectMode(e){this[Ve]=this[Ve]||!!e}get async(){return this[Ur]}set async(e){this[Ur]=this[Ur]||!!e}write(e,r,i){if(this[kr])throw new Error("write after end");if(this[Ye])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(i=r,r="utf8"),r||(r="utf8");let n=this[Ur]?ia:s=>s();return!this[Ve]&&!Buffer.isBuffer(e)&&(JM(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):KM(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Ve]?(this.flowing&&this[Fe]!==0&&this[Hu](!0),this.flowing?this.emit("data",e):this[Np](e),this[Fe]!==0&&this.emit("readable"),i&&n(i),this.flowing):e.length?(typeof e=="string"&&!(r===this[gt]&&!this[Mr].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[gt]&&(e=this[Mr].write(e)),this.flowing&&this[Fe]!==0&&this[Hu](!0),this.flowing?this.emit("data",e):this[Np](e),this[Fe]!==0&&this.emit("readable"),i&&n(i),this.flowing):(this[Fe]!==0&&this.emit("readable"),i&&n(i),this.flowing)}read(e){if(this[Ye])return null;if(this[Fe]===0||e===0||e>this[Fe])return this[qr](),null;this[Ve]&&(e=null),this.buffer.length>1&&!this[Ve]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[Fe])]);let r=this[Lv](e||null,this.buffer[0]);return this[qr](),r}[Lv](e,r){return e===r.length||e===null?this[xp]():(this.buffer[0]=r.slice(e),r=r.slice(0,e),this[Fe]-=e),this.emit("data",r),!this.buffer.length&&!this[kr]&&this.emit("drain"),r}end(e,r,i){return typeof e=="function"&&(i=e,e=null),typeof r=="function"&&(i=r,r="utf8"),e&&this.write(e,r),i&&this.once("end",i),this[kr]=!0,this.writable=!1,(this.flowing||!this[ra])&&this[qr](),this}[Os](){this[Ye]||(this[ra]=!1,this[Wu]=!0,this.emit("resume"),this.buffer.length?this[Hu]():this[kr]?this[qr]():this.emit("drain"))}resume(){return this[Os]()}pause(){this[Wu]=!1,this[ra]=!0}get destroyed(){return this[Ye]}get flowing(){return this[Wu]}get paused(){return this[ra]}[Np](e){this[Ve]?this[Fe]+=1:this[Fe]+=e.length,this.buffer.push(e)}[xp](){return this.buffer.length&&(this[Ve]?this[Fe]-=1:this[Fe]-=this.buffer[0].length),this.buffer.shift()}[Hu](e){do;while(this[$v](this[xp]()));!e&&!this.buffer.length&&!this[kr]&&this.emit("drain")}[$v](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[Ye])return;let i=this[Ei];return r=r||{},e===Dv.stdout||e===Dv.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,i?r.end&&e.end():(this.pipes.push(r.proxyErrors?new Fp(this,e,r):new Gu(this,e,r)),this[Ur]?ia(()=>this[Os]()):this[Os]()),e}unpipe(e){let r=this.pipes.find(i=>i.dest===e);r&&(this.pipes.splice(this.pipes.indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let i=super.on(e,r);return e==="data"&&!this.pipes.length&&!this.flowing?this[Os]():e==="readable"&&this[Fe]!==0?super.emit("readable"):XM(e)&&this[Ei]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[ta]&&(this[Ur]?ia(()=>r.call(this,this[ta])):r.call(this,this[ta])),i}get emittedEnd(){return this[Ei]}[qr](){!this[Bu]&&!this[Ei]&&!this[Ye]&&this.buffer.length===0&&this[kr]&&(this[Bu]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[ju]&&this.emit("close"),this[Bu]=!1)}emit(e,r,...i){if(e!=="error"&&e!=="close"&&e!==Ye&&this[Ye])return;if(e==="data")return r?this[Ur]?ia(()=>this[Dp](r)):this[Dp](r):!1;if(e==="end")return this[kv]();if(e==="close"){if(this[ju]=!0,!this[Ei]&&!this[Ye])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[ta]=r;let s=super.emit("error",r);return this[qr](),s}else if(e==="resume"){let s=super.emit("resume");return this[qr](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,r,...i);return this[qr](),n}[Dp](e){for(let i of this.pipes)i.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[qr](),r}[kv](){this[Ei]||(this[Ei]=!0,this.readable=!1,this[Ur]?ia(()=>this[Pp]()):this[Pp]())}[Pp](){if(this[Mr]){let r=this[Mr].end();if(r){for(let i of this.pipes)i.dest.write(r);super.emit("data",r)}}for(let r of this.pipes)r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Ve]||(e.dataLength=0);let r=this.promise();return this.on("data",i=>{e.push(i),this[Ve]||(e.dataLength+=i.length)}),r.then(()=>e)}concat(){return this[Ve]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Ve]?Promise.reject(new Error("cannot concat in objectMode")):this[gt]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Ye,()=>r(new Error("stream destroyed"))),this.on("error",i=>r(i)),this.on("end",()=>e())})}[YM](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[kr])return Promise.resolve({done:!0});let i=null,n=null,s=c=>{this.removeListener("data",o),this.removeListener("end",a),n(c)},o=c=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),i({value:c,done:!!this[kr]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),i({done:!0})},l=()=>s(new Error("stream destroyed"));return new Promise((c,u)=>{n=u,i=c,this.once(Ye,l),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[QM](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[Ye]?(e?this.emit("error",e):this.emit(Ye),this):(this[Ye]=!0,this.buffer.length=0,this[Fe]=0,typeof this.close=="function"&&!this[ju]&&this.close(),e?this.emit("error",e):this.emit(Ye),this)}static isStream(e){return!!e&&(e instanceof Mv||e instanceof Pv||e instanceof VM&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Ps=w(sa=>{"use strict";var ZM=Bv(),eU=require("events").EventEmitter,yt=require("fs"),kp=yt.writev;if(!kp){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;kp=(r,i,n,s)=>{let o=(l,c)=>s(l,c,i),a=new e;a.oncomplete=o,t.writeBuffers(r,i,n,a)}}var xs=Symbol("_autoClose"),Xt=Symbol("_close"),na=Symbol("_ended"),se=Symbol("_fd"),jv=Symbol("_finished"),bi=Symbol("_flags"),Lp=Symbol("_flush"),qp=Symbol("_handleChunk"),Mp=Symbol("_makeBuf"),Xu=Symbol("_mode"),zu=Symbol("_needDrain"),Is=Symbol("_onerror"),Ds=Symbol("_onopen"),$p=Symbol("_onread"),Cs=Symbol("_onwrite"),_i=Symbol("_open"),Br=Symbol("_path"),mn=Symbol("_pos"),fr=Symbol("_queue"),Rs=Symbol("_read"),Hv=Symbol("_readSize"),Si=Symbol("_reading"),Vu=Symbol("_remain"),Wv=Symbol("_size"),Yu=Symbol("_write"),Ts=Symbol("_writing"),Qu=Symbol("_defaultFlag"),Ns=Symbol("_errored"),Ku=class extends ZM{constructor(e,r){if(r=r||{},super(r),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Ns]=!1,this[se]=typeof r.fd=="number"?r.fd:null,this[Br]=e,this[Hv]=r.readSize||16*1024*1024,this[Si]=!1,this[Wv]=typeof r.size=="number"?r.size:1/0,this[Vu]=this[Wv],this[xs]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[se]=="number"?this[Rs]():this[_i]()}get fd(){return this[se]}get path(){return this[Br]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[_i](){yt.open(this[Br],"r",(e,r)=>this[Ds](e,r))}[Ds](e,r){e?this[Is](e):(this[se]=r,this.emit("open",r),this[Rs]())}[Mp](){return Buffer.allocUnsafe(Math.min(this[Hv],this[Vu]))}[Rs](){if(!this[Si]){this[Si]=!0;let e=this[Mp]();if(e.length===0)return process.nextTick(()=>this[$p](null,0,e));yt.read(this[se],e,0,e.length,null,(r,i,n)=>this[$p](r,i,n))}}[$p](e,r,i){this[Si]=!1,e?this[Is](e):this[qp](r,i)&&this[Rs]()}[Xt](){if(this[xs]&&typeof this[se]=="number"){let e=this[se];this[se]=null,yt.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Is](e){this[Si]=!0,this[Xt](),this.emit("error",e)}[qp](e,r){let i=!1;return this[Vu]-=e,e>0&&(i=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[Vu]<=0)&&(i=!1,this[Xt](),super.end()),i}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[se]=="number"&&this[Rs]();break;case"error":return this[Ns]?void 0:(this[Ns]=!0,super.emit(e,r));default:return super.emit(e,r)}}},Up=class extends Ku{[_i](){let e=!0;try{this[Ds](null,yt.openSync(this[Br],"r")),e=!1}finally{e&&this[Xt]()}}[Rs](){let e=!0;try{if(!this[Si]){this[Si]=!0;do{let r=this[Mp](),i=r.length===0?0:yt.readSync(this[se],r,0,r.length,null);if(!this[qp](i,r))break}while(!0);this[Si]=!1}e=!1}finally{e&&this[Xt]()}}[Xt](){if(this[xs]&&typeof this[se]=="number"){let e=this[se];this[se]=null,yt.closeSync(e),this.emit("close")}}},Ju=class extends eU{constructor(e,r){r=r||{},super(r),this.readable=!1,this.writable=!0,this[Ns]=!1,this[Ts]=!1,this[na]=!1,this[zu]=!1,this[fr]=[],this[Br]=e,this[se]=typeof r.fd=="number"?r.fd:null,this[Xu]=r.mode===void 0?438:r.mode,this[mn]=typeof r.start=="number"?r.start:null,this[xs]=typeof r.autoClose=="boolean"?r.autoClose:!0;let i=this[mn]!==null?"r+":"w";this[Qu]=r.flags===void 0,this[bi]=this[Qu]?i:r.flags,this[se]===null&&this[_i]()}emit(e,r){if(e==="error"){if(this[Ns])return;this[Ns]=!0}return super.emit(e,r)}get fd(){return this[se]}get path(){return this[Br]}[Is](e){this[Xt](),this[Ts]=!0,this.emit("error",e)}[_i](){yt.open(this[Br],this[bi],this[Xu],(e,r)=>this[Ds](e,r))}[Ds](e,r){this[Qu]&&this[bi]==="r+"&&e&&e.code==="ENOENT"?(this[bi]="w",this[_i]()):e?this[Is](e):(this[se]=r,this.emit("open",r),this[Lp]())}end(e,r){return e&&this.write(e,r),this[na]=!0,!this[Ts]&&!this[fr].length&&typeof this[se]=="number"&&this[Cs](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[na]?(this.emit("error",new Error("write() after end()")),!1):this[se]===null||this[Ts]||this[fr].length?(this[fr].push(e),this[zu]=!0,!1):(this[Ts]=!0,this[Yu](e),!0)}[Yu](e){yt.write(this[se],e,0,e.length,this[mn],(r,i)=>this[Cs](r,i))}[Cs](e,r){e?this[Is](e):(this[mn]!==null&&(this[mn]+=r),this[fr].length?this[Lp]():(this[Ts]=!1,this[na]&&!this[jv]?(this[jv]=!0,this[Xt](),this.emit("finish")):this[zu]&&(this[zu]=!1,this.emit("drain"))))}[Lp](){if(this[fr].length===0)this[na]&&this[Cs](null,0);else if(this[fr].length===1)this[Yu](this[fr].pop());else{let e=this[fr];this[fr]=[],kp(this[se],e,this[mn],(r,i)=>this[Cs](r,i))}}[Xt](){if(this[xs]&&typeof this[se]=="number"){let e=this[se];this[se]=null,yt.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},Bp=class extends Ju{[_i](){let e;if(this[Qu]&&this[bi]==="r+")try{e=yt.openSync(this[Br],this[bi],this[Xu])}catch(r){if(r.code==="ENOENT")return this[bi]="w",this[_i]();throw r}else e=yt.openSync(this[Br],this[bi],this[Xu]);this[Ds](null,e)}[Xt](){if(this[xs]&&typeof this[se]=="number"){let e=this[se];this[se]=null,yt.closeSync(e),this.emit("close")}}[Yu](e){let r=!0;try{this[Cs](null,yt.writeSync(this[se],e,0,e.length,this[mn])),r=!1}finally{if(r)try{this[Xt]()}catch{}}}};sa.ReadStream=Ku;sa.ReadStreamSync=Up;sa.WriteStream=Ju;sa.WriteStreamSync=Bp});var sc=w((w3,eO)=>{"use strict";var tU=Tu(),Gv=bs(),rU=require("events"),iU=Ap(),nU=1024*1024,sU=_u(),zv=Ou(),Vv=Kd(),{nextTick:oU}=require("process"),jp=Buffer.from([31,139]),Lt=Symbol("state"),gn=Symbol("writeEntry"),jr=Symbol("readEntry"),Hp=Symbol("nextEntry"),Yv=Symbol("processEntry"),$t=Symbol("extendedHeader"),oa=Symbol("globalExtendedHeader"),vi=Symbol("meta"),Qv=Symbol("emitMeta"),ue=Symbol("buffer"),Hr=Symbol("queue"),Oi=Symbol("ended"),Xv=Symbol("emittedEnd"),yn=Symbol("emit"),Le=Symbol("unzip"),Zu=Symbol("consumeChunk"),ec=Symbol("consumeChunkSub"),Wp=Symbol("consumeBody"),Kv=Symbol("consumeMeta"),Jv=Symbol("consumeHeader"),tc=Symbol("consuming"),Gp=Symbol("bufferConcat"),zp=Symbol("maybeEnd"),aa=Symbol("writing"),Ti=Symbol("aborted"),rc=Symbol("onDone"),wn=Symbol("sawValidEntry"),ic=Symbol("sawNullBlock"),nc=Symbol("sawEOF"),Zv=Symbol("closeStream"),aU=t=>!0;eO.exports=tU(class extends rU{constructor(e){e=e||{},super(e),this.file=e.file||"",this[wn]=null,this.on(rc,i=>{(this[Lt]==="begin"||this[wn]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(rc,e.ondone):this.on(rc,i=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||nU,this.filter=typeof e.filter=="function"?e.filter:aU;let r=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:r?void 0:!1,this.writable=!0,this.readable=!1,this[Hr]=new iU,this[ue]=null,this[jr]=null,this[gn]=null,this[Lt]="begin",this[vi]="",this[$t]=null,this[oa]=null,this[Oi]=!1,this[Le]=null,this[Ti]=!1,this[ic]=!1,this[nc]=!1,this.on("end",()=>this[Zv]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Jv](e,r){this[wn]===null&&(this[wn]=!1);let i;try{i=new Gv(e,r,this[$t],this[oa])}catch(n){return this.warn("TAR_ENTRY_INVALID",n)}if(i.nullBlock)this[ic]?(this[nc]=!0,this[Lt]==="begin"&&(this[Lt]="header"),this[yn]("eof")):(this[ic]=!0,this[yn]("nullBlock"));else if(this[ic]=!1,!i.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:i});else if(!i.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:i});else{let n=i.type;if(/^(Symbolic)?Link$/.test(n)&&!i.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:i});else if(!/^(Symbolic)?Link$/.test(n)&&i.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:i});else{let s=this[gn]=new sU(i,this[$t],this[oa]);if(!this[wn])if(s.remain){let o=()=>{s.invalid||(this[wn]=!0)};s.on("end",o)}else this[wn]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[yn]("ignoredEntry",s),this[Lt]="ignore",s.resume()):s.size>0&&(this[vi]="",s.on("data",o=>this[vi]+=o),this[Lt]="meta"):(this[$t]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[yn]("ignoredEntry",s),this[Lt]=s.remain?"ignore":"header",s.resume()):(s.remain?this[Lt]="body":(this[Lt]="header",s.end()),this[jr]?this[Hr].push(s):(this[Hr].push(s),this[Hp]())))}}}[Zv](){oU(()=>this.emit("close"))}[Yv](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[jr]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",i=>this[Hp]()),r=!1)):(this[jr]=null,r=!1),r}[Hp](){do;while(this[Yv](this[Hr].shift()));if(!this[Hr].length){let e=this[jr];!e||e.flowing||e.size===e.remain?this[aa]||this.emit("drain"):e.once("drain",i=>this.emit("drain"))}}[Wp](e,r){let i=this[gn],n=i.blockRemain,s=n>=e.length&&r===0?e:e.slice(r,r+n);return i.write(s),i.blockRemain||(this[Lt]="header",this[gn]=null,i.end()),s.length}[Kv](e,r){let i=this[gn],n=this[Wp](e,r);return this[gn]||this[Qv](i),n}[yn](e,r,i){!this[Hr].length&&!this[jr]?this.emit(e,r,i):this[Hr].push([e,r,i])}[Qv](e){switch(this[yn]("meta",this[vi]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[$t]=zv.parse(this[vi],this[$t],!1);break;case"GlobalExtendedHeader":this[oa]=zv.parse(this[vi],this[oa],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[$t]=this[$t]||Object.create(null),this[$t].path=this[vi].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[$t]=this[$t]||Object.create(null),this[$t].linkpath=this[vi].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[Ti]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[Ti])return;if((this[Le]===null||this.brotli===void 0&&this[Le]===!1)&&e){if(this[ue]&&(e=Buffer.concat([this[ue],e]),this[ue]=null),e.length<jp.length)return this[ue]=e,!0;for(let s=0;this[Le]===null&&s<jp.length;s++)e[s]!==jp[s]&&(this[Le]=!1);let n=this.brotli===void 0;if(this[Le]===!1&&n)if(e.length<512)if(this[Oi])this.brotli=!0;else return this[ue]=e,!0;else try{new Gv(e.slice(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[Le]===null||this[Le]===!1&&this.brotli){let s=this[Oi];this[Oi]=!1,this[Le]=this[Le]===null?new Vv.Unzip:new Vv.BrotliDecompress,this[Le].on("data",a=>this[Zu](a)),this[Le].on("error",a=>this.abort(a)),this[Le].on("end",a=>{this[Oi]=!0,this[Zu]()}),this[aa]=!0;let o=this[Le][s?"end":"write"](e);return this[aa]=!1,o}}this[aa]=!0,this[Le]?this[Le].write(e):this[Zu](e),this[aa]=!1;let i=this[Hr].length?!1:this[jr]?this[jr].flowing:!0;return!i&&!this[Hr].length&&this[jr].once("drain",n=>this.emit("drain")),i}[Gp](e){e&&!this[Ti]&&(this[ue]=this[ue]?Buffer.concat([this[ue],e]):e)}[zp](){if(this[Oi]&&!this[Xv]&&!this[Ti]&&!this[tc]){this[Xv]=!0;let e=this[gn];if(e&&e.blockRemain){let r=this[ue]?this[ue].length:0;this.warn("TAR_BAD_ARCHIVE","Truncated input (needed ".concat(e.blockRemain," more bytes, only ").concat(r," available)"),{entry:e}),this[ue]&&e.write(this[ue]),e.end()}this[yn](rc)}}[Zu](e){if(this[tc])this[Gp](e);else if(!e&&!this[ue])this[zp]();else{if(this[tc]=!0,this[ue]){this[Gp](e);let r=this[ue];this[ue]=null,this[ec](r)}else this[ec](e);for(;this[ue]&&this[ue].length>=512&&!this[Ti]&&!this[nc];){let r=this[ue];this[ue]=null,this[ec](r)}this[tc]=!1}(!this[ue]||this[Oi])&&this[zp]()}[ec](e){let r=0,i=e.length;for(;r+512<=i&&!this[Ti]&&!this[nc];)switch(this[Lt]){case"begin":case"header":this[Jv](e,r),r+=512;break;case"ignore":case"body":r+=this[Wp](e,r);break;case"meta":r+=this[Kv](e,r);break;default:throw new Error("invalid state: "+this[Lt])}r<i&&(this[ue]?this[ue]=Buffer.concat([e.slice(r),this[ue]]):this[ue]=e.slice(r))}end(e){this[Ti]||(this[Le]?this[Le].end(e):(this[Oi]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),this.write(e)))}})});var oc=w((A3,nO)=>{"use strict";var lU=ms(),rO=sc(),Fs=require("fs"),uU=Ps(),tO=require("path"),Vp=_s();nO.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let i=lU(t);if(i.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&hU(i,e),i.noResume||cU(i),i.file&&i.sync?fU(i):i.file?dU(i,r):iO(i)};var cU=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},hU=(t,e)=>{let r=new Map(e.map(s=>[Vp(s),!0])),i=t.filter,n=(s,o)=>{let a=o||tO.parse(s).root||".",l=s===a?!1:r.has(s)?r.get(s):n(tO.dirname(s),a);return r.set(s,l),l};t.filter=i?(s,o)=>i(s,o)&&n(Vp(s)):s=>n(Vp(s))},fU=t=>{let e=iO(t),r=t.file,i=!0,n;try{let s=Fs.statSync(r),o=t.maxReadSize||16*1024*1024;if(s.size<o)e.end(Fs.readFileSync(r));else{let a=0,l=Buffer.allocUnsafe(o);for(n=Fs.openSync(r,"r");a<s.size;){let c=Fs.readSync(n,l,0,o,a);a+=c,e.write(l.slice(0,c))}e.end()}i=!1}finally{if(i&&n)try{Fs.closeSync(n)}catch{}}},dU=(t,e)=>{let r=new rO(t),i=t.maxReadSize||16*1024*1024,n=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("end",o),Fs.stat(n,(l,c)=>{if(l)a(l);else{let u=new uU.ReadStream(n,{readSize:i,size:c.size});u.on("error",a),u.pipe(r)}})});return e?s.then(e,e):s},iO=t=>new rO(t)});var cO=w((E3,uO)=>{"use strict";var pU=ms(),ac=Uu(),sO=Ps(),oO=oc(),aO=require("path");uO.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let i=pU(t);if(i.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return i.file&&i.sync?mU(i,e):i.file?gU(i,e,r):i.sync?yU(i,e):wU(i,e)};var mU=(t,e)=>{let r=new ac.Sync(t),i=new sO.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(i),lO(r,e)},gU=(t,e,r)=>{let i=new ac(t),n=new sO.WriteStream(t.file,{mode:t.mode||438});i.pipe(n);let s=new Promise((o,a)=>{n.on("error",a),n.on("close",o),i.on("error",a)});return Yp(i,e),r?s.then(r,r):s},lO=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?oO({file:aO.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:i=>t.add(i)}):t.add(r)}),t.end()},Yp=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return oO({file:aO.resolve(t.cwd,r.slice(1)),noResume:!0,onentry:i=>t.add(i)}).then(i=>Yp(t,e));t.add(r)}t.end()},yU=(t,e)=>{let r=new ac.Sync(t);return lO(r,e),r},wU=(t,e)=>{let r=new ac(t);return Yp(r,e),r}});var Qp=w((S3,yO)=>{"use strict";var AU=ms(),hO=Uu(),Ct=require("fs"),fO=Ps(),dO=oc(),pO=require("path"),mO=bs();yO.exports=(t,e,r)=>{let i=AU(t);if(!i.file)throw new TypeError("file is required");if(i.gzip||i.brotli||i.file.endsWith(".br")||i.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),i.sync?EU(i,e):bU(i,e,r)};var EU=(t,e)=>{let r=new hO.Sync(t),i=!0,n,s;try{try{n=Ct.openSync(t.file,"r+")}catch(l){if(l.code==="ENOENT")n=Ct.openSync(t.file,"w+");else throw l}let o=Ct.fstatSync(n),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,h=0;u<512;u+=h){if(h=Ct.readSync(n,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!h)break e}let l=new mO(a);if(!l.cksumValid)break;let c=512*Math.ceil(l.size/512);if(s+c+512>o.size)break;s+=c,t.mtimeCache&&t.mtimeCache.set(l.path,l.mtime)}i=!1,SU(t,r,s,n,e)}finally{if(i)try{Ct.closeSync(n)}catch{}}},SU=(t,e,r,i,n)=>{let s=new fO.WriteStreamSync(t.file,{fd:i,start:r});e.pipe(s),_U(e,n)},bU=(t,e,r)=>{e=Array.from(e);let i=new hO(t),n=(o,a,l)=>{let c=(y,A)=>{y?Ct.close(o,E=>l(y)):l(null,A)},u=0;if(a===0)return c(null,0);let h=0,f=Buffer.alloc(512),d=(y,A)=>{if(y)return c(y);if(h+=A,h<512&&A)return Ct.read(o,f,h,f.length-h,u+h,d);if(u===0&&f[0]===31&&f[1]===139)return c(new Error("cannot append to compressed archives"));if(h<512)return c(null,u);let E=new mO(f);if(!E.cksumValid)return c(null,u);let v=512*Math.ceil(E.size/512);if(u+v+512>a||(u+=v+512,u>=a))return c(null,u);t.mtimeCache&&t.mtimeCache.set(E.path,E.mtime),h=0,Ct.read(o,f,0,512,u,d)};Ct.read(o,f,0,512,u,d)},s=new Promise((o,a)=>{i.on("error",a);let l="r+",c=(u,h)=>{if(u&&u.code==="ENOENT"&&l==="r+")return l="w+",Ct.open(t.file,l,c);if(u)return a(u);Ct.fstat(h,(f,d)=>{if(f)return Ct.close(h,()=>a(f));n(h,d.size,(y,A)=>{if(y)return a(y);let E=new fO.WriteStream(t.file,{fd:h,start:A});i.pipe(E),E.on("error",a),E.on("close",o),gO(i,e)})})};Ct.open(t.file,l,c)});return r?s.then(r,r):s},_U=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?dO({file:pO.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:i=>t.add(i)}):t.add(r)}),t.end()},gO=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return dO({file:pO.resolve(t.cwd,r.slice(1)),noResume:!0,onentry:i=>t.add(i)}).then(i=>gO(t,e));t.add(r)}t.end()}});var AO=w((b3,wO)=>{"use strict";var vU=ms(),OU=Qp();wO.exports=(t,e,r)=>{let i=vU(t);if(!i.file)throw new TypeError("file is required");if(i.gzip||i.brotli||i.file.endsWith(".br")||i.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),TU(i),OU(i,e,r)};var TU=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,i)=>e(r,i)&&!(t.mtimeCache.get(r)>i.mtime):(r,i)=>!(t.mtimeCache.get(r)>i.mtime)}});var bO=w((_3,SO)=>{var{promisify:EO}=require("util"),Ci=require("fs"),CU=t=>{if(!t)t={mode:511,fs:Ci};else if(typeof t=="object")t={mode:511,fs:Ci,...t};else if(typeof t=="number")t={mode:t,fs:Ci};else if(typeof t=="string")t={mode:parseInt(t,8),fs:Ci};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||Ci.mkdir,t.mkdirAsync=EO(t.mkdir),t.stat=t.stat||t.fs.stat||Ci.stat,t.statAsync=EO(t.stat),t.statSync=t.statSync||t.fs.statSync||Ci.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||Ci.mkdirSync,t};SO.exports=CU});var vO=w((v3,_O)=>{var RU=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:IU,parse:NU}=require("path"),xU=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=IU(t),RU==="win32"){let e=/[*|"<>?:]/,{root:r}=NU(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};_O.exports=xU});var IO=w((O3,RO)=>{var{dirname:OO}=require("path"),TO=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(i=>i.isDirectory()?r:void 0,i=>i.code==="ENOENT"?TO(t,OO(e),e):void 0),CO=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(i){return i.code==="ENOENT"?CO(t,OO(e),e):void 0}};RO.exports={findMade:TO,findMadeSync:CO}});var Jp=w((T3,xO)=>{var{dirname:NO}=require("path"),Xp=(t,e,r)=>{e.recursive=!1;let i=NO(t);return i===t?e.mkdirAsync(t,e).catch(n=>{if(n.code!=="EISDIR")throw n}):e.mkdirAsync(t,e).then(()=>r||t,n=>{if(n.code==="ENOENT")return Xp(i,e).then(s=>Xp(t,e,s));if(n.code!=="EEXIST"&&n.code!=="EROFS")throw n;return e.statAsync(t).then(s=>{if(s.isDirectory())return r;throw n},()=>{throw n})})},Kp=(t,e,r)=>{let i=NO(t);if(e.recursive=!1,i===t)try{return e.mkdirSync(t,e)}catch(n){if(n.code!=="EISDIR")throw n;return}try{return e.mkdirSync(t,e),r||t}catch(n){if(n.code==="ENOENT")return Kp(t,e,Kp(i,e,r));if(n.code!=="EEXIST"&&n.code!=="EROFS")throw n;try{if(!e.statSync(t).isDirectory())throw n}catch{throw n}}};xO.exports={mkdirpManual:Xp,mkdirpManualSync:Kp}});var FO=w((C3,PO)=>{var{dirname:DO}=require("path"),{findMade:DU,findMadeSync:PU}=IO(),{mkdirpManual:FU,mkdirpManualSync:LU}=Jp(),$U=(t,e)=>(e.recursive=!0,DO(t)===t?e.mkdirAsync(t,e):DU(e,t).then(i=>e.mkdirAsync(t,e).then(()=>i).catch(n=>{if(n.code==="ENOENT")return FU(t,e);throw n}))),kU=(t,e)=>{if(e.recursive=!0,DO(t)===t)return e.mkdirSync(t,e);let i=PU(e,t);try{return e.mkdirSync(t,e),i}catch(n){if(n.code==="ENOENT")return LU(t,e);throw n}};PO.exports={mkdirpNative:$U,mkdirpNativeSync:kU}});var qO=w((R3,kO)=>{var LO=require("fs"),qU=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Zp=qU.replace(/^v/,"").split("."),$O=+Zp[0]>10||+Zp[0]==10&&+Zp[1]>=12,MU=$O?t=>t.mkdir===LO.mkdir:()=>!1,UU=$O?t=>t.mkdirSync===LO.mkdirSync:()=>!1;kO.exports={useNative:MU,useNativeSync:UU}});var WO=w((I3,HO)=>{var Ls=bO(),$s=vO(),{mkdirpNative:MO,mkdirpNativeSync:UO}=FO(),{mkdirpManual:BO,mkdirpManualSync:jO}=Jp(),{useNative:BU,useNativeSync:jU}=qO(),ks=(t,e)=>(t=$s(t),e=Ls(e),BU(e)?MO(t,e):BO(t,e)),HU=(t,e)=>(t=$s(t),e=Ls(e),jU(e)?UO(t,e):jO(t,e));ks.sync=HU;ks.native=(t,e)=>MO($s(t),Ls(e));ks.manual=(t,e)=>BO($s(t),Ls(e));ks.nativeSync=(t,e)=>UO($s(t),Ls(e));ks.manualSync=(t,e)=>jO($s(t),Ls(e));HO.exports=ks});var KO=w((N3,XO)=>{"use strict";var kt=require("fs"),An=require("path"),WU=kt.lchown?"lchown":"chown",GU=kt.lchownSync?"lchownSync":"chownSync",zO=kt.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),GO=(t,e,r)=>{try{return kt[GU](t,e,r)}catch(i){if(i.code!=="ENOENT")throw i}},zU=(t,e,r)=>{try{return kt.chownSync(t,e,r)}catch(i){if(i.code!=="ENOENT")throw i}},VU=zO?(t,e,r,i)=>n=>{!n||n.code!=="EISDIR"?i(n):kt.chown(t,e,r,i)}:(t,e,r,i)=>i,em=zO?(t,e,r)=>{try{return GO(t,e,r)}catch(i){if(i.code!=="EISDIR")throw i;zU(t,e,r)}}:(t,e,r)=>GO(t,e,r),YU=process.version,VO=(t,e,r)=>kt.readdir(t,e,r),QU=(t,e)=>kt.readdirSync(t,e);/^v4\./.test(YU)&&(VO=(t,e,r)=>kt.readdir(t,r));var lc=(t,e,r,i)=>{kt[WU](t,e,r,VU(t,e,r,n=>{i(n&&n.code!=="ENOENT"?n:null)}))},YO=(t,e,r,i,n)=>{if(typeof e=="string")return kt.lstat(An.resolve(t,e),(s,o)=>{if(s)return n(s.code!=="ENOENT"?s:null);o.name=e,YO(t,o,r,i,n)});if(e.isDirectory())tm(An.resolve(t,e.name),r,i,s=>{if(s)return n(s);let o=An.resolve(t,e.name);lc(o,r,i,n)});else{let s=An.resolve(t,e.name);lc(s,r,i,n)}},tm=(t,e,r,i)=>{VO(t,{withFileTypes:!0},(n,s)=>{if(n){if(n.code==="ENOENT")return i();if(n.code!=="ENOTDIR"&&n.code!=="ENOTSUP")return i(n)}if(n||!s.length)return lc(t,e,r,i);let o=s.length,a=null,l=c=>{if(!a){if(c)return i(a=c);if(--o===0)return lc(t,e,r,i)}};s.forEach(c=>YO(t,c,e,r,l))})},XU=(t,e,r,i)=>{if(typeof e=="string")try{let n=kt.lstatSync(An.resolve(t,e));n.name=e,e=n}catch(n){if(n.code==="ENOENT")return;throw n}e.isDirectory()&&QO(An.resolve(t,e.name),r,i),em(An.resolve(t,e.name),r,i)},QO=(t,e,r)=>{let i;try{i=QU(t,{withFileTypes:!0})}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR"||n.code==="ENOTSUP")return em(t,e,r);throw n}return i&&i.length&&i.forEach(n=>XU(t,n,e,r)),em(t,e,r)};XO.exports=tm;tm.sync=QO});var tT=w((x3,rm)=>{"use strict";var JO=WO(),qt=require("fs"),uc=require("path"),ZO=KO(),Kt=Es(),cc=class extends Error{constructor(e,r){super("Cannot extract through symbolic link"),this.path=r,this.symlink=e}get name(){return"SylinkError"}},hc=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'"),this.path=e,this.code=r}get name(){return"CwdError"}},fc=(t,e)=>t.get(Kt(e)),la=(t,e,r)=>t.set(Kt(e),r),KU=(t,e)=>{qt.stat(t,(r,i)=>{(r||!i.isDirectory())&&(r=new hc(t,r&&r.code||"ENOTDIR")),e(r)})};rm.exports=(t,e,r)=>{t=Kt(t);let i=e.umask,n=e.mode|448,s=(n&i)!==0,o=e.uid,a=e.gid,l=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),c=e.preserve,u=e.unlink,h=e.cache,f=Kt(e.cwd),d=(E,v)=>{E?r(E):(la(h,t,!0),v&&l?ZO(v,o,a,O=>d(O)):s?qt.chmod(t,n,r):r())};if(h&&fc(h,t)===!0)return d();if(t===f)return KU(t,d);if(c)return JO(t,{mode:n}).then(E=>d(null,E),d);let A=Kt(uc.relative(f,t)).split("/");dc(f,A,n,h,u,f,null,d)};var dc=(t,e,r,i,n,s,o,a)=>{if(!e.length)return a(null,o);let l=e.shift(),c=Kt(uc.resolve(t+"/"+l));if(fc(i,c))return dc(c,e,r,i,n,s,o,a);qt.mkdir(c,r,eT(c,e,r,i,n,s,o,a))},eT=(t,e,r,i,n,s,o,a)=>l=>{l?qt.lstat(t,(c,u)=>{if(c)c.path=c.path&&Kt(c.path),a(c);else if(u.isDirectory())dc(t,e,r,i,n,s,o,a);else if(n)qt.unlink(t,h=>{if(h)return a(h);qt.mkdir(t,r,eT(t,e,r,i,n,s,o,a))});else{if(u.isSymbolicLink())return a(new cc(t,t+"/"+e.join("/")));a(l)}}):(o=o||t,dc(t,e,r,i,n,s,o,a))},JU=t=>{let e=!1,r="ENOTDIR";try{e=qt.statSync(t).isDirectory()}catch(i){r=i.code}finally{if(!e)throw new hc(t,r)}};rm.exports.sync=(t,e)=>{t=Kt(t);let r=e.umask,i=e.mode|448,n=(i&r)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),l=e.preserve,c=e.unlink,u=e.cache,h=Kt(e.cwd),f=E=>{la(u,t,!0),E&&a&&ZO.sync(E,s,o),n&&qt.chmodSync(t,i)};if(u&&fc(u,t)===!0)return f();if(t===h)return JU(h),f();if(l)return f(JO.sync(t,i));let y=Kt(uc.relative(h,t)).split("/"),A=null;for(let E=y.shift(),v=h;E&&(v+="/"+E);E=y.shift())if(v=Kt(uc.resolve(v)),!fc(u,v))try{qt.mkdirSync(v,i),A=A||v,la(u,v,!0)}catch{let I=qt.lstatSync(v);if(I.isDirectory()){la(u,v,!0);continue}else if(c){qt.unlinkSync(v),qt.mkdirSync(v,i),A=A||v,la(u,v,!0);continue}else if(I.isSymbolicLink())return new cc(v,v+"/"+y.join("/"))}return f(A)}});var nm=w((D3,rT)=>{var im=Object.create(null),{hasOwnProperty:ZU}=Object.prototype;rT.exports=t=>(ZU.call(im,t)||(im[t]=t.normalize("NFD")),im[t])});var oT=w((P3,sT)=>{var iT=require("assert"),e2=nm(),t2=_s(),{join:nT}=require("path"),r2=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,i2=r2==="win32";sT.exports=()=>{let t=new Map,e=new Map,r=c=>c.split("/").slice(0,-1).reduce((h,f)=>(h.length&&(f=nT(h[h.length-1],f)),h.push(f||"/"),h),[]),i=new Set,n=c=>{let u=e.get(c);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(h=>t.get(h)),dirs:[...u.dirs].map(h=>t.get(h))}},s=c=>{let{paths:u,dirs:h}=n(c);return u.every(f=>f[0]===c)&&h.every(f=>f[0]instanceof Set&&f[0].has(c))},o=c=>i.has(c)||!s(c)?!1:(i.add(c),c(()=>a(c)),!0),a=c=>{if(!i.has(c))return!1;let{paths:u,dirs:h}=e.get(c),f=new Set;return u.forEach(d=>{let y=t.get(d);iT.equal(y[0],c),y.length===1?t.delete(d):(y.shift(),typeof y[0]=="function"?f.add(y[0]):y[0].forEach(A=>f.add(A)))}),h.forEach(d=>{let y=t.get(d);iT(y[0]instanceof Set),y[0].size===1&&y.length===1?t.delete(d):y[0].size===1?(y.shift(),f.add(y[0])):y[0].delete(c)}),i.delete(c),f.forEach(d=>o(d)),!0};return{check:s,reserve:(c,u)=>{c=i2?["win32 parallelization disabled"]:c.map(f=>t2(nT(e2(f))).toLowerCase());let h=new Set(c.map(f=>r(f)).reduce((f,d)=>f.concat(d)));return e.set(u,{dirs:h,paths:c}),c.forEach(f=>{let d=t.get(f);d?d.push(u):t.set(f,[u])}),h.forEach(f=>{let d=t.get(f);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):t.set(f,[new Set([u])])}),o(u)}}}});var uT=w((F3,lT)=>{var n2=process.env.__FAKE_PLATFORM__||process.platform,s2=n2==="win32",o2=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:a2,O_TRUNC:l2,O_WRONLY:u2,UV_FS_O_FILEMAP:aT=0}=o2.constants,c2=s2&&!!aT,h2=512*1024,f2=aT|l2|a2|u2;lT.exports=c2?t=>t<h2?f2:"w":()=>"w"});var dm=w((L3,_T)=>{"use strict";var d2=require("assert"),p2=sc(),X=require("fs"),m2=Ps(),Wr=require("path"),ET=tT(),cT=ap(),g2=oT(),y2=lp(),Mt=Es(),w2=_s(),A2=nm(),hT=Symbol("onEntry"),am=Symbol("checkFs"),fT=Symbol("checkFs2"),gc=Symbol("pruneCache"),lm=Symbol("isReusable"),Ut=Symbol("makeFs"),um=Symbol("file"),cm=Symbol("directory"),yc=Symbol("link"),dT=Symbol("symlink"),pT=Symbol("hardlink"),mT=Symbol("unsupported"),gT=Symbol("checkPath"),Ri=Symbol("mkdir"),Qe=Symbol("onError"),pc=Symbol("pending"),yT=Symbol("pend"),qs=Symbol("unpend"),sm=Symbol("ended"),om=Symbol("maybeClose"),hm=Symbol("skip"),ua=Symbol("doChown"),ca=Symbol("uid"),ha=Symbol("gid"),fa=Symbol("checkedCwd"),ST=require("crypto"),bT=uT(),E2=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,da=E2==="win32",S2=1024,b2=(t,e)=>{if(!da)return X.unlink(t,e);let r=t+".DELETE."+ST.randomBytes(16).toString("hex");X.rename(t,r,i=>{if(i)return e(i);X.unlink(r,e)})},_2=t=>{if(!da)return X.unlinkSync(t);let e=t+".DELETE."+ST.randomBytes(16).toString("hex");X.renameSync(t,e),X.unlinkSync(e)},wT=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,AT=t=>w2(Mt(A2(t))).toLowerCase(),v2=(t,e)=>{e=AT(e);for(let r of t.keys()){let i=AT(r);(i===e||i.indexOf(e+"/")===0)&&t.delete(r)}},O2=t=>{for(let e of t.keys())t.delete(e)},pa=class extends p2{constructor(e){if(e||(e={}),e.ondone=r=>{this[sm]=!0,this[om]()},super(e),this[fa]=!1,this.reservations=g2(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[pc]=0,this[sm]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:S2,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||da,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Mt(Wr.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[hT](r))}warn(e,r,i={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(i.recoverable=!1),super.warn(e,r,i)}[om](){this[sm]&&this[pc]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[gT](e){let r=Mt(e.path),i=r.split("/");if(this.strip){if(i.length<this.strip)return!1;if(e.type==="Link"){let n=Mt(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}i.splice(0,this.strip),e.path=i.join("/")}if(isFinite(this.maxDepth)&&i.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:r,depth:i.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(i.includes("..")||da&&/^[a-z]:\.\.$/i.test(i[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[n,s]=y2(r);n&&(e.path=s,this.warn("TAR_ENTRY_INFO","stripping ".concat(n," from absolute path"),{entry:e,path:r}))}if(Wr.isAbsolute(e.path)?e.absolute=Mt(Wr.resolve(e.path)):e.absolute=Mt(Wr.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Mt(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:n}=Wr.win32.parse(e.absolute);e.absolute=n+cT.encode(e.absolute.slice(n.length));let{root:s}=Wr.win32.parse(e.path);e.path=s+cT.encode(e.path.slice(s.length))}return!0}[hT](e){if(!this[gT](e))return e.resume();switch(d2.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[am](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[mT](e)}}[Qe](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[qs](),r.resume())}[Ri](e,r,i){ET(Mt(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},i)}[ua](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[ca](e){return wT(this.uid,e.uid,this.processUid)}[ha](e){return wT(this.gid,e.gid,this.processGid)}[um](e,r){let i=e.mode&4095||this.fmode,n=new m2.WriteStream(e.absolute,{flags:bT(e.size),mode:i,autoClose:!1});n.on("error",l=>{n.fd&&X.close(n.fd,()=>{}),n.write=()=>!0,this[Qe](l,e),r()});let s=1,o=l=>{if(l){n.fd&&X.close(n.fd,()=>{}),this[Qe](l,e),r();return}--s===0&&X.close(n.fd,c=>{c?this[Qe](c,e):this[qs](),r()})};n.on("finish",l=>{let c=e.absolute,u=n.fd;if(e.mtime&&!this.noMtime){s++;let h=e.atime||new Date,f=e.mtime;X.futimes(u,h,f,d=>d?X.utimes(c,h,f,y=>o(y&&d)):o())}if(this[ua](e)){s++;let h=this[ca](e),f=this[ha](e);X.fchown(u,h,f,d=>d?X.chown(c,h,f,y=>o(y&&d)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",l=>{this[Qe](l,e),r()}),e.pipe(a)),a.pipe(n)}[cm](e,r){let i=e.mode&4095||this.dmode;this[Ri](e.absolute,i,n=>{if(n){this[Qe](n,e),r();return}let s=1,o=a=>{--s===0&&(r(),this[qs](),e.resume())};e.mtime&&!this.noMtime&&(s++,X.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[ua](e)&&(s++,X.chown(e.absolute,this[ca](e),this[ha](e),o)),o()})}[mT](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED","unsupported entry type: ".concat(e.type),{entry:e}),e.resume()}[dT](e,r){this[yc](e,e.linkpath,"symlink",r)}[pT](e,r){let i=Mt(Wr.resolve(this.cwd,e.linkpath));this[yc](e,i,"link",r)}[yT](){this[pc]++}[qs](){this[pc]--,this[om]()}[hm](e){this[qs](),e.resume()}[lm](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!da}[am](e){this[yT]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,i=>this[fT](e,i))}[gc](e){e.type==="SymbolicLink"?O2(this.dirCache):e.type!=="Directory"&&v2(this.dirCache,e.absolute)}[fT](e,r){this[gc](e);let i=a=>{this[gc](e),r(a)},n=()=>{this[Ri](this.cwd,this.dmode,a=>{if(a){this[Qe](a,e),i();return}this[fa]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=Mt(Wr.dirname(e.absolute));if(a!==this.cwd)return this[Ri](a,this.dmode,l=>{if(l){this[Qe](l,e),i();return}o()})}o()},o=()=>{X.lstat(e.absolute,(a,l)=>{if(l&&(this.keep||this.newer&&l.mtime>e.mtime)){this[hm](e),i();return}if(a||this[lm](e,l))return this[Ut](null,e,i);if(l.isDirectory()){if(e.type==="Directory"){let c=!this.noChmod&&e.mode&&(l.mode&4095)!==e.mode,u=h=>this[Ut](h,e,i);return c?X.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return X.rmdir(e.absolute,c=>this[Ut](c,e,i))}if(e.absolute===this.cwd)return this[Ut](null,e,i);b2(e.absolute,c=>this[Ut](c,e,i))})};this[fa]?s():n()}[Ut](e,r,i){if(e){this[Qe](e,r),i();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[um](r,i);case"Link":return this[pT](r,i);case"SymbolicLink":return this[dT](r,i);case"Directory":case"GNUDumpDir":return this[cm](r,i)}}[yc](e,r,i,n){X[i](r,e.absolute,s=>{s?this[Qe](s,e):(this[qs](),e.resume()),n()})}},mc=t=>{try{return[null,t()]}catch(e){return[e,null]}},fm=class extends pa{[Ut](e,r){return super[Ut](e,r,()=>{})}[am](e){if(this[gc](e),!this[fa]){let s=this[Ri](this.cwd,this.dmode);if(s)return this[Qe](s,e);this[fa]=!0}if(e.absolute!==this.cwd){let s=Mt(Wr.dirname(e.absolute));if(s!==this.cwd){let o=this[Ri](s,this.dmode);if(o)return this[Qe](o,e)}}let[r,i]=mc(()=>X.lstatSync(e.absolute));if(i&&(this.keep||this.newer&&i.mtime>e.mtime))return this[hm](e);if(r||this[lm](e,i))return this[Ut](null,e);if(i.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(i.mode&4095)!==e.mode,[a]=o?mc(()=>{X.chmodSync(e.absolute,e.mode)}):[];return this[Ut](a,e)}let[s]=mc(()=>X.rmdirSync(e.absolute));this[Ut](s,e)}let[n]=e.absolute===this.cwd?[]:mc(()=>_2(e.absolute));this[Ut](n,e)}[um](e,r){let i=e.mode&4095||this.fmode,n=a=>{let l;try{X.closeSync(s)}catch(c){l=c}(a||l)&&this[Qe](a||l,e),r()},s;try{s=X.openSync(e.absolute,bT(e.size),i)}catch(a){return n(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[Qe](a,e)),e.pipe(o)),o.on("data",a=>{try{X.writeSync(s,a,0,a.length)}catch(l){n(l)}}),o.on("end",a=>{let l=null;if(e.mtime&&!this.noMtime){let c=e.atime||new Date,u=e.mtime;try{X.futimesSync(s,c,u)}catch(h){try{X.utimesSync(e.absolute,c,u)}catch{l=h}}}if(this[ua](e)){let c=this[ca](e),u=this[ha](e);try{X.fchownSync(s,c,u)}catch(h){try{X.chownSync(e.absolute,c,u)}catch{l=l||h}}}n(l)})}[cm](e,r){let i=e.mode&4095||this.dmode,n=this[Ri](e.absolute,i);if(n){this[Qe](n,e),r();return}if(e.mtime&&!this.noMtime)try{X.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[ua](e))try{X.chownSync(e.absolute,this[ca](e),this[ha](e))}catch{}r(),e.resume()}[Ri](e,r){try{return ET.sync(Mt(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(i){return i}}[yc](e,r,i,n){try{X[i+"Sync"](r,e.absolute),n(),e.resume()}catch(s){return this[Qe](s,e)}}};pa.Sync=fm;_T.exports=pa});var RT=w(($3,CT)=>{"use strict";var T2=ms(),wc=dm(),OT=require("fs"),TT=Ps(),vT=require("path"),pm=_s();CT.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let i=T2(t);if(i.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&C2(i,e),i.file&&i.sync?R2(i):i.file?I2(i,r):i.sync?N2(i):x2(i)};var C2=(t,e)=>{let r=new Map(e.map(s=>[pm(s),!0])),i=t.filter,n=(s,o)=>{let a=o||vT.parse(s).root||".",l=s===a?!1:r.has(s)?r.get(s):n(vT.dirname(s),a);return r.set(s,l),l};t.filter=i?(s,o)=>i(s,o)&&n(pm(s)):s=>n(pm(s))},R2=t=>{let e=new wc.Sync(t),r=t.file,i=OT.statSync(r),n=t.maxReadSize||16*1024*1024;new TT.ReadStreamSync(r,{readSize:n,size:i.size}).pipe(e)},I2=(t,e)=>{let r=new wc(t),i=t.maxReadSize||16*1024*1024,n=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("close",o),OT.stat(n,(l,c)=>{if(l)a(l);else{let u=new TT.ReadStream(n,{readSize:i,size:c.size});u.on("error",a),u.pipe(r)}})});return e?s.then(e,e):s},N2=t=>new wc.Sync(t),x2=t=>new wc(t)});var IT=w(Ce=>{"use strict";Ce.c=Ce.create=cO();Ce.r=Ce.replace=Qp();Ce.t=Ce.list=oc();Ce.u=Ce.update=AO();Ce.x=Ce.extract=RT();Ce.Pack=Uu();Ce.Unpack=dm();Ce.Parse=sc();Ce.ReadEntry=_u();Ce.WriteEntry=wp();Ce.Header=bs();Ce.Pax=Ou();Ce.types=ep()});var LT=w((q3,FT)=>{var{spawn:mm}=require("child_process"),{session:NT}=require("electron"),En=require("path"),D2=IT(),wt=require("fs"),P2=require("os"),F2=Gt(),L2=Jt(),Sn=On(),$2=ya(),de,Bt,jt,bn,dr,be,Rt,xT,DT,PT;FT.exports=(de=class extends L2{constructor(r){super(r);R(this,be);R(this,Bt,null);R(this,jt,null);R(this,bn,!1);R(this,dr,{code:de.CODE_OLLAMA_DOWNLOAD,success:!0,progressBar:!1,message:""});_(this,"install",(r=!1)=>p(this,bn)?(k(this,be,Rt).call(this,p(this,dr).code,p(this,dr).success,p(this,dr).progressBar,p(this,dr).message),!1):(U(this,bn,!0),p(this,Bt)!==null?(k(this,be,Rt).call(this,de.CODE_OLLAMA_FINISH),U(this,bn,!1),!0):(r&&(k(this,be,Rt).call(this,de.CODE_OLLAMA_DOWNLOAD,!0,!0),wt.existsSync(p(this,jt))&&wt.rmSync(p(this,jt),{recursive:!0,force:!0}),wt.mkdirSync(p(this,jt),{recursive:!0})),(async()=>{let i=["arm","arm64"].includes(P2.arch()),n=En.join(p(this,jt),"ollama"),s=En.join(p(this,jt),"models");try{let o=En.join(n,Sn.MACOS===process.platform?"ollama":Sn.WINDOWS===process.platform?"ollama.exe":"bin/ollama"),a=wt.existsSync(o),l=[{codeDownload:de.CODE_OLLAMA_DOWNLOAD,codeUnpack:de.CODE_OLLAMA_UNPACK,outputPath:n,archiveName:Sn.MACOS===process.platform?"ollama-darwin.tgz":Sn.WINDOWS===process.platform?"ollama-windows-".concat(i?"arm64":"amd64",".zip"):"ollama-linux-".concat(i?"arm64":"amd64",".tgz")},{codeDownload:de.CODE_MODELS_DOWNLOAD,codeUnpack:de.CODE_MODELS_UNPACK,outputPath:s,archiveName:"models.tgz"}];for(let c of l){let u="".concat(de.DOWNLOAD_URL,"/").concat(c.archiveName),h=await k(this,be,xT).call(this,c.codeDownload,u,c.archiveName);await k(this,be,DT).call(this,c.codeUnpack,h,c.outputPath),!a&&wt.existsSync(o)&&de.CODE_OLLAMA_DOWNLOAD===c.codeDownload&&Sn.WINDOWS!==process.platform&&wt.chmodSync(o,493)}p(this,Bt)===null&&(k(this,be,Rt).call(this,de.CODE_OLLAMA_SERVE,!0,!0),U(this,Bt,mm(o,["serve"],{env:{...process.env,OLLAMA_HOST:"0.0.0.0:".concat(this._oglama.config.getOllamaPort()),OLLAMA_MODELS:s},detached:!1,stdio:"ignore"})),p(this,Bt).unref(),p(this,Bt).on("error",c=>{this.stop(),k(this,be,Rt).call(this,de.CODE_OLLAMA_SERVE,!1,!1,"Ollama server offline")})),k(this,be,Rt).call(this,de.CODE_OLLAMA_FINISH)}catch(o){k(this,be,Rt).call(this,p(this,dr).code||de.CODE_OLLAMA_DOWNLOAD,!1,!1,"".concat(o.message??o))}U(this,bn,!1)})(),!0)));_(this,"getPort",()=>this._oglama.config.getOllamaPort());this._register("llm"),U(this,jt,En.join($2.getPathConfig(),"llm")),wt.existsSync(p(this,jt))||wt.mkdirSync(p(this,jt),{recursive:!0})}stop(){if(p(this,Bt)!==null){try{process.platform==="win32"?mm("taskkill",["/PID",p(this,Bt).pid,"/T","/F"],{shell:!0,windowsHide:!0}):p(this,Bt).kill("SIGTERM")}catch{}U(this,Bt,null)}}},Bt=new WeakMap,jt=new WeakMap,bn=new WeakMap,dr=new WeakMap,be=new WeakSet,Rt=async function(r,i=!0,n=!1,s=""){if(U(this,dr,{code:r,success:i,progressBar:n,message:s}),typeof this._oglama.main?.view.webContents?.send=="function"){let o=["ipc:llm:install",[p(this,dr)],{type:"req"}];this._oglama.main?.view.webContents?.send(F2.WINDOW_MAIN,o)}},xT=async function(r,i,n){let s=En.join(p(this,jt),n);return wt.existsSync(s)?s:new Promise((o,a)=>{let l=(c,u)=>{u.setSavePath(s),k(this,be,Rt).call(this,r,!0,0),u.on("updated",(h,f)=>{if(f==="progressing"){let d=Math.floor(u.getReceivedBytes()/u.getTotalBytes()*100);k(this,be,Rt).call(this,r,!0,d)}}),u.once("done",(h,f)=>{if(NT.defaultSession.removeListener("will-download",l),f==="completed"){k(this,be,Rt).call(this,r,!0,100),o(u.getSavePath());return}a(new Error("".concat(r," download failed: ").concat(f)))})};NT.defaultSession.once("will-download",l),this._oglama.main?.view.webContents.downloadURL(i)})},DT=async function(r,i,n){let s=En.join(n,"meta.json");if(wt.existsSync(s))return;k(this,be,Rt).call(this,r,!0,!0),wt.existsSync(n)&&wt.rmSync(n,{recursive:!0,force:!0}),wt.mkdirSync(n,{recursive:!0});let o=Math.floor(new Date().getTime()/1e3);try{En.extname(i)===".zip"?await k(this,be,PT).call(this,i,n):await D2.extract({file:i,cwd:n,strict:!0});let a=Math.floor(new Date().getTime()/1e3);wt.writeFileSync(s,JSON.stringify({t:a,d:a-o})),k(this,be,Rt).call(this,r,!0,100)}catch(a){throw new Error("".concat(r," extraction failed: ").concat(a.message??a))}},PT=async function(r,i){return new Promise((n,s)=>{let o=Sn.WINDOWS===process.platform?"powershell":"unzip",a=Sn.WINDOWS===process.platform?["-Command","Expand-Archive -Path '".concat(r,"' -DestinationPath '").concat(i,"' -Force")]:["-o",r,"-d",i];mm(o,a,{shell:!0}).on("close",c=>{if(c===0){n();return}s(new Error("Extraction failed with code ".concat(c)))})})},_(de,"DOWNLOAD_URL","https://dl.oglama.com"),_(de,"CODE_OLLAMA_DOWNLOAD","download:ollama"),_(de,"CODE_OLLAMA_UNPACK","unpack:ollama"),_(de,"CODE_MODELS_DOWNLOAD","download:models"),_(de,"CODE_MODELS_UNPACK","unpack:models"),_(de,"CODE_OLLAMA_SERVE","serve"),_(de,"CODE_OLLAMA_FINISH","finish"),de)});var BT=w((B3,UT)=>{var{app:gm,session:Ac,BrowserWindow:$T,powerSaveBlocker:kT}=require("electron"),qT=require("path"),ma=Gt(),k2=Tm(),q2=Rm(),M2=Nm(),U2=Dm(),ym=On(),B2=Gm(),j2=Ym(),H2=Vb(),W2=Kb(),G2=i_(),z2=a_(),V2=y_(),Y2=LT(),ye,Ms,ga,Ht,MT;UT.exports=(MT=class{constructor(){R(this,ye,null);R(this,Ms,null);R(this,ga,!1);R(this,Ht,null);_(this,"rootPath",gm.getAppPath());_(this,"devMode",!1);_(this,"log",new M2(this));_(this,"webserver",new k2(this));_(this,"activity",new q2(this));_(this,"diskStorage",new B2(this));_(this,"session",new j2(this));_(this,"llm",new Y2(this));_(this,"updater",new H2(this));_(this,"device",new W2(this));_(this,"source",new G2(this));_(this,"target",new z2(this));_(this,"main",new V2(this));_(this,"config",new U2(this))}mainWindow(){let e=this;if(Ac.defaultSession.setPermissionCheckHandler((r,i,n,s)=>!0),Ac.defaultSession.setPermissionRequestHandler((r,i,n,s)=>{n(!0)}),p(e,ye)===null){U(e,ye,new $T({icon:qT.join(e.rootPath,"res/icons/icon.png"),minHeight:e.config.getMainMinHeight(),minWidth:e.config.getMainMinWidth(),height:e.config.getMainMinHeight(),width:e.config.getMainMinWidth(),titleBarStyle:"default",backgroundColor:"#000",fullscreenable:!1,useContentSize:!0,resizable:!0,title:"Oglama",show:!1,webPreferences:{session:Ac.defaultSession,backgroundThrottling:!1,nodeIntegration:!0,spellcheck:!1}})),p(e,ye).setMenu(null),p(e,ye).on("minimize",i=>{if(i.preventDefault(),!e.updater.isInstalling()){let n=["ipc:oglama:restored",[],{type:"req",fromWin:ma.WINDOW_MAIN_LOGIN}];e.main.view?.webContents.send(ma.WINDOW_MAIN,n)}setTimeout(()=>{p(e,ye).restore(),p(e,ye).webContents.invalidate()},250)}),p(e,ye).setMaxListeners(0),p(e,ye).on("closed",()=>{e.llm.stop(),U(e,ye,null),p(e,Ms)!==null&&kT.stop(p(e,Ms)),gm.quit()});let r=()=>{let i=p(e,ye).getSize(),n=[ym.WINDOWS,ym.MACOS].includes(process.platform)?Math.abs(p(e,ye).getSize()[1]-p(e,ye).getContentSize()[1]):0,s=[ym.WINDOWS].includes(process.platform)?Math.abs(p(e,ye).getSize()[0]-p(e,ye).getContentSize()[0]):0;e.main.setWindowSize(i[0]-s,i[1]-n),e.target.setWindowSize(i[0]-s,i[1]-n)};p(e,ye).on("resize",()=>r()),p(e,ye).once("ready-to-show",()=>r()),e.main.init(),e.main.view.webContents.on("did-finish-load",()=>{e.getPostAuth()&&p(e,ye).show(),r()}),p(e,ye).setMenu(null),U(e,Ms,kT.start("prevent-app-suspension"))}return p(e,ye)}mainLoginWindow(){let e=this;return p(e,Ht)===null&&(U(e,Ht,new $T({width:e.config.getMainLoginWidth(),height:e.config.getMainLoginHeight(),icon:qT.join(e.rootPath,"res/icons/icon.png"),resizable:!1,fullscreenable:!1,transparent:!0,titleBarStyle:"hidden",title:"Oglama",backgroundColor:"#00000000",webPreferences:{backgroundThrottling:!1,spellcheck:!1,nodeIntegration:!0,session:Ac.defaultSession}})),p(e,Ht).setMenu(null),p(e,Ht).setMaxListeners(0),p(e,Ht).on("closed",()=>{U(e,Ht,null),gm.quit()}),e.main?.login?.init(),e.main?.login?.view.webContents.on("did-finish-load",()=>{e.getPostAuth()||p(e,Ht).show()}),p(e,Ht).setMenu(null)),p(e,Ht)}getPostAuth(){return p(this,ga)}setPostAuth(e){let r=!1;if(e=!!e,e!==this.getPostAuth()){U(this,ga,e);let i=["ipc:oglama:auth",[e],{type:"req",fromWin:ma.WINDOW_MAIN_LOGIN}];this.main?.login?.view.webContents.send(ma.WINDOW_MAIN_LOGIN,i),setTimeout(()=>{this.main?.view.webContents.send(ma.WINDOW_MAIN,i)},750),e?(this.mainWindow().show(),this.mainLoginWindow().hide()):(this.mainWindow().hide(),this.mainLoginWindow().show()),r=!0}return r}},ye=new WeakMap,Ms=new WeakMap,ga=new WeakMap,Ht=new WeakMap,MT)});var{app:nt,BrowserWindow:Q2}=require("electron"),X2=BT();nt.userAgentFallback=nt.userAgentFallback.replace(/\s*Electron\/\d+(\.\d+)+\s*/g," ").replace(/\boglama\b/g,"Oglama");nt.commandLine.appendSwitch("allow-insecure-localhost");nt.commandLine.appendSwitch("disable-renderer-backgrounding");nt.commandLine.appendSwitch("disable-background-timer-throttling");nt.commandLine.appendSwitch("disable-backgrounding-occluded-windows");nt.commandLine.appendSwitch("disable-features","UserAgentClientHint");process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";process.on("uncaughtException",t=>{});var Gr=null;do{if(!nt.requestSingleInstanceLock()){nt.quit();break}nt.on("second-instance",()=>{if(Gr!==null){let t=Gr.getPostAuth()?Gr.mainWindow():Gr.mainLoginWindow();t.isMinimized()&&(t.restore(),t.webContents?.invalidate()),t.show()}}),nt.on("ready",async()=>{Gr=new X2,nt.on("activate",()=>{Q2.getAllWindows().length===0&&Gr.activity.start()}),await Gr.webserver.start(),await Gr.activity.start(),await Gr.updater.start()}),nt.on("before-quit",()=>{process.exit(0)}),nt.on("window-all-closed",()=>{process.platform!=="darwin"&&nt.quit()})}while(!1);

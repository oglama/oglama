/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright Â© 2024-2025 Oglama (https://oglama.com)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NT=Object.defineProperty;var um=t=>{throw TypeError(t)};var xT=(t,e,r)=>e in t?NT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var _=(t,e,r)=>xT(t,typeof e!="symbol"?e+"":e,r),hc=(t,e,r)=>e.has(t)||um("Cannot "+r);var m=(t,e,r)=>(hc(t,e,"read from private field"),r?r.call(t):e.get(t)),R=(t,e,r)=>e.has(t)?um("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),M=(t,e,r,i)=>(hc(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),V=(t,e,r)=>(hc(t,e,"access private method"),r);var Gt=w((v2,cm)=>{var Mt;cm.exports=(Mt=class{static getSourceChannelName(e){return"".concat(Mt.WINDOW_SOURCE,"/").concat(e)}static getTargetChannelName(e){return"".concat(Mt.WINDOW_TARGET,"/").concat(e)}static generateKey(){return"".concat(Date.now().toString(36)).concat(Math.random().toString(36).substring(2,13))}},_(Mt,"WINDOW_MAIN_LOGIN","@main/login"),_(Mt,"WINDOW_MAIN","@main"),_(Mt,"WINDOW_SOURCE","@source"),_(Mt,"WINDOW_TARGET","@target"),Mt)});var mn=w((C2,hm)=>{hm.exports=class{constructor(e){_(this,"_oglama");this._oglama=e}}});var dm=w((N2,fm)=>{var xs=require("path"),DT=require("http"),fc=require("fs"),PT=mn(),dc;fm.exports=(dc=class extends PT{start(){if(this.constructor._instance===null){let e=xs.join(this._oglama.rootPath,"ssg"),r=this._oglama.config.getServerPort();this.constructor._instance=new Promise((i,n)=>{try{let s=DT.createServer((o,a)=>{let l=".empty";try{let c=new URL(o.url,"http://0.0.0.0");l=decodeURIComponent(c.pathname).replace(/^\/+|\/+$/g,"")}catch{}let u=xs.join(e,l);fc.statSync(u,{throwIfNoEntry:!1})?.isDirectory()&&(u=xs.join(u,"index.html")),fc.stat(u,(c,h)=>{let f=c?xs.join(e,"404/index.html"):u;a.writeHead(c?404:200,{"Content-Length":h.size,"Content-Type":{".js":"application/javascript",".json":"application/json",".woff2":"font/woff2",".html":"text/html",".txt":"text/plain",".css":"text/css",".ico":"image/x-icon",".jpeg":"image/jpeg",".jpg":"image/jpeg",".png":"image/png",".gif":"image/gif",".svg":"image/svg+xml"}[xs.extname(f)]||"application/octet-stream"}),fc.createReadStream(f).pipe(a)})});s.listen(r,()=>{this._oglama.log.info("webserver:start","Listening on port ".concat(r)),i(s)})}catch(s){this._oglama.log.error("webserver:start",s),n(s)}})}return this.constructor._instance}},_(dc,"_instance",null),dc)});var mm=w((P2,pm)=>{var{dialog:pc}=require("electron"),FT=require("path"),LT=Gt(),$T=mn();pm.exports=class extends $T{constructor(){super(...arguments);_(this,"_showMessageBox",null)}async start(){let r=FT.join(this._oglama.rootPath,"res","index.html"),i={extraHeaders:"pragma: no-cache"};if(this._oglama.mainWindow().loadFile(r,i),this._oglama.mainLoginWindow().loadFile(r,i),this._oglama.mainWindow().hide(),this._oglama.mainLoginWindow().show(),this._showMessageBox===null){let n=this;this._showMessageBox=pc.showMessageBox,pc.showMessageBox=async function(s,o){if(Array.isArray(o.buttons)&&o.buttons.length){let a=o.buttons.map(l=>l.toLowerCase()).indexOf("ok");if(a!==-1){let l={agentId:null,type:o.buttons.length>1?"confirm":"alert",message:"".concat(o.message??"").trim(),result:o.buttons.length>1?!0:void 0};if(l.message.indexOf("::{")===0)try{let c=JSON.parse(l.message.substring(2));typeof c=="object"&&c!==null&&(l.agentId=c.a??null,l.type=c.t??"alert",l.message=c.m??"",l.result=c.t==="prompt"?c.d??"":c.t==="confirm"?!0:void 0)}catch{}let u=["ipc:oglama:dialog",[l],{type:"req"}];return n._oglama.main?.view.webContents.send(LT.WINDOW_MAIN,u),{response:a}}}return n._showMessageBox.call(pc,s,o)}}}}});var ym=w(($2,gm)=>{var kT=mn();gm.exports=class extends kT{error(){console.error("%coglama-error","color:red",...arguments)}info(){console.info("%coglama-info","color:lightblue",...arguments)}}});var Am=w((q2,wm)=>{var qT=mn();wm.exports=class extends qT{getMainMinWidth(){return 1200}getMainMinHeight(){return 650}getMainLoginWidth(){return 512}getMainLoginHeight(){return 512}getSourceMinWidth(){return 1200}getSourceMinHeight(){return 650}getServerPort(){return 7199}getOllamaPort(){return 7299}}});var Si=w((U2,Em)=>{var Ds;Em.exports=(Ds=class{},_(Ds,"WINDOWS","win32"),_(Ds,"MACOS","darwin"),_(Ds,"LINUX","linux"),Ds)});var lr=w((H2,Sm)=>{var{ipcMain:MT}=require("electron"),UT=mn();Sm.exports=class extends UT{constructor(e){super(e)}_register(e){if(typeof e=="string")for(let r of Object.getOwnPropertyNames(this)){if(["_","#"].includes(r[0]||typeof this[r]!="function"))continue;let i=this[r];MT.handle("ipc:".concat(e,":").concat(r),async(n,...s)=>{let o=null;try{o=typeof i=="function"?await i(...s):null}catch(a){o=a}return o})}}}});var _m=w((G2,bm)=>{var mc;bm.exports=(mc=class{},_(mc,"max",{computersCount:5,agentsCount:9,logsPerAgent:250,logsOnRender:15,sourceCode:{smCodeLength:5120,smCount:64,smEnvSize:256,fnCodeLength:5120,fnCount:128,ioCount:9,ioInputFileCount:500,ioOutputFileCount:50,ioFieldNameLength:32,ioFieldDescLength:128,ioFieldStringLength:1024,ioFieldOptionLength:32,ioFieldOptionCount:25,ioFieldExtensionLength:24,ioFieldExtensionCount:10,ioFieldTableCount:3,ioFieldTableSize:20,ioFieldColumnLength:24,ioFieldColumnCount:9},diskStorage:{outputRunsCount:10}}),mc)});var Om=w((Y2,vm)=>{var gc;vm.exports=(gc=class{},_(gc,"ModuleSrc",{K_SRC_STATE_MACHINE:"srcStateMachine",K_SRC_FUNCTIONS:"srcFunctions",K_SRC_INPUTS:"srcInputs",K_SRC_OUTPUTS:"srcOutputs"}),gc)});var aa=w((X2,Rm)=>{var{app:Tm}=require("electron"),Ps=require("path"),yc=require("os"),Cm=Si(),wt,gn,yn;Rm.exports=(wt=class{static getPathCache(){if(m(wt,gn)===null){let e=process.env.XDG_CACHE_HOME||Ps.join(yc.homedir(),".cache");switch(process.platform){case Cm.WINDOWS:e=process.env.LOCALAPPDATA||Ps.join(yc.homedir(),"AppData","Local");break;case Cm.MACOS:e=Ps.join(yc.homedir(),"Library","Caches");break}M(wt,gn,Ps.join(e,"".concat(Tm.name.toLowerCase(),"-updater")))}return m(wt,gn)}static getPathConfig(){return m(wt,yn)===null&&M(wt,yn,Ps.join(Tm.getPath("appData"),"oglama")),m(wt,yn)}},gn=new WeakMap,yn=new WeakMap,R(wt,gn,null),R(wt,yn,null),wt)});var Pm=w((Z2,Dm)=>{var j=require("path"),T=require("fs"),Im=Gt(),BT=lr(),zt=_m(),{ModuleSrc:Oe}=Om(),jT=aa(),Nm=10,HT=250,wc="default",la="local",WT="source.json",Ac="input.json",ua="input",Ec="output.json",GT="output",wn="files",_t,bi,Ut,_i,ur,cr,vi,An,Oi,En,Fs,Ls,Sc,Sn,$e,$s,ks,ue,vt,qs,st,Ms,Us,xm;Dm.exports=(xm=class extends BT{constructor(r){super(r);R(this,_t,{});R(this,bi,{});R(this,Ut,null);R(this,_i,r=>j.join(m(this,Ut),"agents",r,WT));R(this,ur,(r,i=null)=>typeof i=="string"?m(this,$e).call(this,r,i,Ac):j.join(m(this,Ut),"agents",r,"settings",Ac));R(this,cr,(r,i,n=null)=>{let s="".concat(ua,"-").concat(i,".jsonl");return typeof n=="string"?m(this,$e).call(this,r,n,s):j.join(m(this,Ut),"agents",r,"settings",s)});R(this,vi,async(r,i)=>{let n=0,s=m(this,cr).call(this,r,i);return T.existsSync(s)&&(n=await m(this,Oi).call(this,s)),n});R(this,An,(r,i,n)=>m(this,$e).call(this,r,n,"".concat(GT,"-").concat(i,".jsonl")));R(this,Oi,async r=>new Promise(i=>{if(!T.existsSync(r)||!T.statSync(r).isFile()){i(0);return}let n=0,s="",o=T.createReadStream(r,{encoding:"utf8"});o.on("error",()=>i(0)),o.on("data",a=>{let l=a.split(/\r\n|\n/);n+=l.length-1,s=l.pop()}),o.on("end",()=>{s.length&&n++,i(n)})}));R(this,En,async(r,i,n=null)=>new Promise((s,o)=>{let a=[];if(!T.existsSync(r)||!T.statSync(r).isFile()){s(a);return}let l=0,u="",c=T.createReadStream(r,{encoding:"utf8"});c.on("error",o),c.on("data",h=>{let f=h.split(/\r\n|\n/);u=f.pop();for(let p of f){if(l>=i&&(n===null||a.length<n))try{a.push(JSON.parse(p))}catch{}l++}}),c.on("end",()=>{if(u.length){if(l>=i&&(n===null||a.length<n))try{a.push(JSON.parse(u))}catch{}l++}s(a)})}));R(this,Fs,async(r,i,n,s=!1)=>new Promise(o=>{let a=0;if(!T.existsSync(r)||!T.statSync(r).isFile()){o(a);return}let l=0,u="",c="".concat(r,".temp");T.existsSync(c)&&T.rmSync(c,{force:!0,recursive:!0});let h=T.createReadStream(r,{encoding:"utf8"});h.on("data",f=>{let p=f.split(/\r\n|\n/);u=p.pop();for(let y of p){if(i>=0&&(l!==i||!s)){let A=l!==i?y:JSON.stringify(n);T.writeFileSync(c,"".concat(A,"\n"),{flag:"a",encoding:"utf8"}),a++}l++}}),h.on("end",()=>{if(u.length&&i>=0&&(l!==i||!s)){let f=l!==i?u:JSON.stringify(n);T.writeFileSync(c,"".concat(f,"\n"),{flag:"a",encoding:"utf8"}),a++}T.existsSync(c)?T.renameSync(c,r):T.rmSync(r),o(a)})}));R(this,Ls,async(r,i)=>new Promise(n=>{let s=-1;if(!T.existsSync(r)||!T.statSync(r).isFile()){n(s);return}let o=0,a="",l=T.createReadStream(r,{encoding:"utf8"});l.on("data",u=>{let c=u.split(/\r\n|\n/);a=c.pop();for(let h of c){if(s===-1)try{let f=JSON.parse(h);if(typeof f=="object"&&f!==null&&f._id===i){s=o;break}}catch{}o++}}),l.on("end",()=>{if(a.length&&s===-1)try{let u=JSON.parse(a);typeof u=="object"&&u!==null&&u._id===i&&(s=o)}catch{}n(s)})}));R(this,Sc,r=>{let i=n=>{let s="";if(typeof n<"u"&&n!==null)try{s=typeof n=="string"?n:JSON.stringify(n),s.includes('"')&&(s=s.replace(/"/g,'""')),(s.includes(",")||s.includes("\n")||s.includes('"'))&&(s='"'.concat(s,'"'))}catch{}return s};return(Array.isArray(r)?r.map(n=>i(n)):[]).join(",")});R(this,Sn,(r,i)=>{if(typeof r!="object"||r===null||typeof i!="object"||i===null||i.type!=="table"||!Array.isArray(i.columns)||!i.columns.length)return null;let n={},s=!1;for(let o of i.columns)typeof r[o]<"u"&&(s=!0),n[o]=typeof r[o]<"u"?r[o]:null;return s&&typeof n._id!="string"&&(n={_id:Im.generateKey(),...n}),s?n:null});R(this,$e,(r,i=null,n=null)=>{let s=[];return typeof i=="string"&&i.length&&(s.push(i),typeof n=="string"&&n.length&&s.push(n)),j.join(m(this,Ut),"agents",r,"runs",...s)});R(this,$s,r=>{let i=null;if(typeof r=="object"&&r!==null){i={};for(let n of Object.values(Oe))i[n]=(Array.isArray(r[n])?r[n]:[]).filter(s=>typeof s=="object"&&s!==null).map(s=>{for(let o of Object.keys(s))(typeof s[o]>"u"||s[o]===null)&&delete s[o];return s})}return i});R(this,ks,(r,i)=>{if(typeof i!="object"||i===null)return null;let n=i.default??null;return i.type==="int"&&(r=parseInt(r,10),Number.isInteger(r)?(Number.isInteger(i.min)&&r<i.min&&(r=n),Number.isInteger(i.max)&&r>i.max&&(r=n)):r=n),i.type==="string"&&(r="".concat(r||""),(!r.length||i.min!==null&&r.length<i.min)&&(r=n),i.max!==null&&r!==null&&r.length>i.max&&(r=r.substring(0,i.max))),i.type==="bool"&&(r=!!(typeof r>"u"?n:r)),r});R(this,ue,r=>"".concat(r).replace(/\W+/g,""));R(this,vt,r=>"".concat(r).replace(/[^\w\-]+/gi,""));R(this,qs,r=>"".concat(r).replace(/[^\w\-\.]+/gi,"").replace(/\.{2,}/g,"."));R(this,st,(r,i=32)=>"".concat(r).trim().toLowerCase().replace(/\s+/g,"-").replace(/\.{2,}/g,".").replace(/\-{2,}/g,"-").replace(/\_{2,}/g,"_").replace(/[^\w\.\-]+|^[\-\._]+|[\-\._]+$/gi,"").substring(0,i));R(this,Ms,(r,i)=>{if(typeof r!="object"||r===null||typeof i!="string"||!i.length||!Array.isArray(r.extensions)||!r.extensions.includes(j.extname(i).replace(/^\./g,"").toLowerCase())||!T.existsSync(i)||!T.statSync(i).isFile())return!1;let n=T.statSync(i).size;return!(Number.isInteger(r.min)&&r.min>0&&n<r.min*1048576||Number.isInteger(r.max)&&r.max>0&&n>r.max*1048576)});R(this,Us,(r,{agentId:i,runId:n,scalarData:s,srcOutputs:o})=>{let a={};do{if(typeof r!="object"||r===null||typeof i!="string"||typeof n!="string"||typeof s!="object"||s===null||!Array.isArray(o)||!o.length||typeof o[0]!="object"||o[0]===null||typeof o[0].type!="string")break;let l=j.join(m(this,$e).call(this,i,n),wn);if(T.existsSync(l)&&T.lstatSync(l).isDirectory()){for(let u of T.readdirSync(l,{withFileTypes:!0}))if(u.isFile()){let c=u.name.replace(/^(.*?)\-\d+\..*$/gi,"$1");typeof a[c]>"u"&&(a[c]=[]),a[c].push(j.join(l,u.name))}}for(let u of o){if(u.type==="files"){r[u.key]=(Array.isArray(a[u.key])?a[u.key]:[]).filter(c=>m(this,Ms).call(this,u,c)).slice(0,zt.max.sourceCode.ioOutputFileCount);continue}r[u.key]=s[u.key],typeof r[u.key]>"u"&&(r[u.key]=u.default??null)}}while(!1);return a});_(this,"purge",async r=>{let i=!1;if(r=m(this,ue).call(this,r),r.length){let n=j.dirname(m(this,_i).call(this,r));T.existsSync(n)&&(T.rmSync(n,{recursive:!0,force:!0}),i=!0)}return i});_(this,"runInit",(r,i=null,n=null,s=null)=>{if(r=m(this,ue).call(this,r),!r.length)throw new Error("Invalid agent ID");i="".concat(i??la).toLowerCase().replace(/\W+/gi,""),i.length||(i=la),n="".concat(n??wc).toLowerCase().replace(/\W+/gi,""),n.length||(n=wc),(!Number.isInteger(s)||s<=0)&&(s=Math.floor(new Date().getTime()/1e3));let o="".concat(i,"-").concat(n,"-").concat(s),a=null;do{let l=this.sourceGet(r);if(typeof l!="object"||l===null)break;let u=l[Oe.K_SRC_INPUTS],c=l[Oe.K_SRC_OUTPUTS];if((!Array.isArray(u)||!u.length)&&(!Array.isArray(c)||!c.length))break;if(a=m(this,$e).call(this,r,o),!T.existsSync(a)&&(T.mkdirSync(a,{recursive:!0}),T.mkdirSync(j.join(a,wn),{recursive:!0}),wc===n)){let h=j.dirname(m(this,ur).call(this,r));if(T.existsSync(h)&&T.statSync(h).isDirectory())for(let f of T.readdirSync(h,{withFileTypes:!0}))f.isFile()&&(Ac===f.name||f.name.indexOf("".concat(ua,"-"))===0&&j.extname(f.name)===".jsonl")&&T.copyFileSync(j.join(h,f.name),j.join(a,f.name))}}while(!1);return{runId:o,runPath:a}});_(this,"runDelete",(r,i)=>{let n=!1;do{if(r=m(this,ue).call(this,r),!r.length||(i=m(this,vt).call(this,i),!i.length))break;let s=m(this,$e).call(this,r,i);T.existsSync(s)&&(T.rmSync(s,{recursive:!0}),n=!0)}while(!1);return n});_(this,"sourceGet",r=>{if(r=m(this,ue).call(this,r),!r.length)return null;if(typeof m(this,_t)[r]!="object"||m(this,_t)[r]===null){m(this,_t)[r]=null;try{let i=m(this,_i).call(this,r);if(!T.existsSync(i)||!T.statSync(i).isFile())throw new Error('"'.concat(j.basename(i),'" file not found'));m(this,_t)[r]=m(this,$s).call(this,JSON.parse(T.readFileSync(i).toString()))}catch{}}return m(this,_t)[r]});_(this,"sourceSet",(r,i)=>{let n=!1;r=m(this,ue).call(this,r);do{if(!r.length||(i=m(this,$s).call(this,i),JSON.stringify(this.sourceGet(r))===JSON.stringify(i)))break;m(this,_t)[r]=i,typeof m(this,bi)[r]<"u"&&clearTimeout(m(this,bi)[r]),m(this,bi)[r]=setTimeout(()=>{delete m(this,bi)[r];let s=m(this,_i).call(this,r);if(T.existsSync(j.dirname(s))||T.mkdirSync(j.dirname(s),{recursive:!0}),m(this,_t)[r]!==null){let o=m(this,_t)[r][Oe.K_SRC_INPUTS],a=[];if(Array.isArray(o)&&o.length)for(let u of o)typeof u=="object"&&u!==null&&u.type==="table"&&typeof u.key=="string"&&a.push("".concat(ua,"-").concat(u.key,".jsonl"));let l=j.dirname(m(this,ur).call(this,r));if(T.existsSync(l)&&T.lstatSync(l).isDirectory())for(let u of T.readdirSync(l,{withFileTypes:!0}))!u.isFile()||u.name.indexOf("".concat(ua,"-"))!==0||a.includes(u.name)||T.rmSync(j.join(l,u.name));T.writeFileSync(s,JSON.stringify(m(this,_t)[r],null,2))}else T.existsSync(s)&&T.rmSync(s)},HT),n=!0}while(!1);return n});_(this,"inputsGet",async(r,i=null)=>{let n={};r=m(this,ue).call(this,r),typeof i=="string"&&(i=m(this,vt).call(this,i));do{if(!r.length||typeof i=="string"&&!i.length)break;let s=this.sourceGet(r);if(typeof s!="object"||s===null)break;let o=s[Oe.K_SRC_INPUTS];if(!Array.isArray(o)||!o.length)break;let a=m(this,ur).call(this,r,i);if(!T.existsSync(a)||!T.statSync(a).isFile())break;let l={};try{if(l=JSON.parse(T.readFileSync(a).toString()),typeof l!="object"||l===null)throw new Error("Corrupted data")}catch{break}for(let u of o)n[u.key]=l[u.key],["int","string"].includes(u.type)&&Array.isArray(u.options)&&u.options.length&&(u.options.includes(n[u.key])||delete n[u.key]),typeof n[u.key]>"u"&&(n[u.key]=u.type==="files"?[]:u.default??null),u.type==="files"&&(n[u.key]=(Array.isArray(n[u.key])?n[u.key]:[]).slice(0,zt.max.sourceCode.ioInputFileCount)),i===null&&u.type==="table"&&(n[u.key]=await m(this,vi).call(this,r,u.key))}while(!1);return n});_(this,"inputScalarsSet",async(r,i)=>{let n={};r=m(this,ue).call(this,r);do{if(!r.length)break;let s=this.sourceGet(r);if(typeof s!="object"||s===null)break;let o=s[Oe.K_SRC_INPUTS];if(!Array.isArray(o)||!o.length)break;let a=m(this,ur).call(this,r),l={};try{T.existsSync(a)&&T.statSync(a).isFile()&&(l=JSON.parse(T.readFileSync(a).toString()),(typeof l!="object"||l===null)&&(l={}))}catch{}for(let u of o){if(u.type==="table"){n[u.key]=await m(this,vi).call(this,r,u.key);continue}if(n[u.key]=l[u.key],u.type==="files"){n[u.key]=(Array.isArray(n[u.key])?n[u.key]:[]).slice(0,zt.max.sourceCode.ioInputFileCount);continue}(typeof n[u.key]>"u"||n[u.key]===null)&&(n[u.key]=u.default??null),typeof i=="object"&&i!==null&&typeof i[u.key]<"u"&&(n[u.key]=m(this,ks).call(this,i[u.key],u),n[u.key]===null&&delete n[u.key])}T.existsSync(j.dirname(a))||T.mkdirSync(j.dirname(a),{recursive:!0}),T.writeFileSync(a,JSON.stringify(n,null,2))}while(!1);return n});_(this,"inputFilesAdd",async(r,i,n)=>{let s={},o=[];r=m(this,ue).call(this,r),i=m(this,st).call(this,i);do{if(!r.length||!i.length)break;let a=this.sourceGet(r);if(typeof a!="object"||a===null)break;let l=a[Oe.K_SRC_INPUTS];if(!Array.isArray(l)||!l.length)break;let u=m(this,ur).call(this,r),c={};try{T.existsSync(u)&&T.statSync(u).isFile()&&(c=JSON.parse(T.readFileSync(u).toString()),(typeof c!="object"||c===null)&&(c={}))}catch{}for(let h of l){if(h.type==="table"){s[h.key]=await m(this,vi).call(this,r,h.key);continue}if(s[h.key]=c[h.key],h.type!=="files"){typeof s[h.key]>"u"&&(s[h.key]=h.default??null);continue}(typeof s[h.key]>"u"||!Array.isArray(s[h.key]))&&(s[h.key]=[]),h.key===i&&(o=(Array.isArray(n)?n:[]).map(f=>j.normalize("".concat(f).trim())).filter(f=>m(this,Ms).call(this,h,f,"")),s[h.key]=[...new Set([...s[h.key],...o])].slice(0,zt.max.sourceCode.ioInputFileCount))}T.existsSync(j.dirname(u))||T.mkdirSync(j.dirname(u),{recursive:!0}),T.writeFileSync(u,JSON.stringify(s,null,2))}while(!1);return s});_(this,"inputFilesDelete",async(r,i,n)=>{let s={};r=m(this,ue).call(this,r),i=m(this,st).call(this,i);let o=j.basename("".concat(n));do{if(!r.length||!i.length)break;let a=this.sourceGet(r);if(typeof a!="object"||a===null)break;let l=a[Oe.K_SRC_INPUTS];if(!Array.isArray(l)||!l.length)break;let u=m(this,ur).call(this,r),c={};try{T.existsSync(u)&&T.statSync(u).isFile()&&(c=JSON.parse(T.readFileSync(u).toString()),(typeof c!="object"||c===null)&&(c={}))}catch{}for(let h of l){if(h.type==="table"){s[h.key]=await m(this,vi).call(this,r,h.key);continue}if(s[h.key]=c[h.key],h.type!=="files"){typeof s[h.key]>"u"&&(s[h.key]=h.default??null);continue}(typeof s[h.key]>"u"||!Array.isArray(s[h.key]))&&(s[h.key]=[]),h.key===i&&(s[h.key]=(Array.isArray(s[h.key])?s[h.key]:[]).filter(f=>f!==j.normalize("".concat(n))).slice(0,zt.max.sourceCode.ioInputFileCount))}T.existsSync(j.dirname(u))||T.mkdirSync(j.dirname(u),{recursive:!0}),T.writeFileSync(u,JSON.stringify(s,null,2))}while(!1);return s});_(this,"inputTableQuery",async(r,i,n=1,s=5e3)=>{let o=[],a=0;n=parseInt(n,10),(!Number.isInteger(n)||n<1)&&(n=1),s=parseInt(s,10),(!Number.isInteger(s)||s<1)&&(s=1);do{if(r=m(this,ue).call(this,r),i=m(this,st).call(this,i),!r.length||!i.length)break;let l=this.sourceGet(r);if(typeof l!="object"||l===null)break;let u=l[Oe.K_SRC_INPUTS];if(!Array.isArray(u)||!u.length||u.reduce((f,p)=>p.type==="table"&&p.key===i?p:f,null)===null)break;let h=m(this,cr).call(this,r,i);if(!T.existsSync(h))break;if(a=await m(this,Oi).call(this,h),a>0)try{o=await m(this,En).call(this,h,(n-1)*s,s)}catch{}}while(!1);return{rows:o,total:a,pageNumber:n,pageSize:s}});_(this,"inputTableAdd",async(r,i,n=[])=>{let s=!1;do{if(r=m(this,ue).call(this,r),i=m(this,st).call(this,i),!r.length||!i.length)break;let o=this.sourceGet(r);if(typeof o!="object"||o===null)break;let a=o[Oe.K_SRC_INPUTS];if(!Array.isArray(a)||!a.length)break;let l=a.reduce((c,h)=>h.type==="table"&&h.key===i?h:c,null);if(l===null||(n=Array.isArray(n)?n.map(c=>m(this,Sn).call(this,c,l)).filter(c=>c!==null):[],!n.length))break;let u=m(this,cr).call(this,r,i);if(T.existsSync(u)&&T.statSync(u).size/1048576>=zt.max.sourceCode.ioFieldTableSize)break;T.existsSync(j.dirname(u))||T.mkdirSync(j.dirname(u),{recursive:!0}),T.writeFileSync(u,"".concat(n.map(c=>JSON.stringify(c)).join("\n"),"\n"),{flag:"a",encoding:"utf8"}),s=!0}while(!1);return s});_(this,"inputTableGet",async(r,i,n,s)=>{let o=null,a=null;do{if(r=m(this,ue).call(this,r),!r.length||(n=m(this,st).call(this,n),!n.length)||(i=m(this,vt).call(this,i),!i.length))break;let l=this.sourceGet(r);if(typeof l!="object"||l===null)break;let u=l[Oe.K_SRC_INPUTS];if(!Array.isArray(u)||!u.length||u.reduce((p,y)=>y.type==="table"&&y.key===n?y:p,null)===null)break;let h=m(this,cr).call(this,r,n,i);if(!T.existsSync(h))break;let f=await m(this,Oi).call(this,h);if(s<f)try{let p=await m(this,En).call(this,h,s,1);p.length&&(o=p[0])}catch{}s<f-1&&(a=s+1)}while(!1);return{row:o,nextIndex:a}});_(this,"inputTableUpdate",async(r,i,n,s)=>{let o=!1;do{if(r=m(this,ue).call(this,r),i=m(this,st).call(this,i),!r.length||!i.length)break;let a=this.sourceGet(r);if(typeof a!="object"||a===null)break;let l=a[Oe.K_SRC_INPUTS];if(!Array.isArray(l)||!l.length)break;let u=l.reduce((f,p)=>p.type==="table"&&p.key===i?p:f,null);if(u===null||(s=m(this,Sn).call(this,s,u),s===null))break;let c=m(this,cr).call(this,r,i),h=await m(this,Ls).call(this,c,n);h>=0&&(await m(this,Fs).call(this,c,h,s),o=!0)}while(!1);return o});_(this,"inputTableDelete",async(r,i,n=null)=>{let s=!1;do{if(r=m(this,ue).call(this,r),i=m(this,st).call(this,i),!r.length||!i.length)break;let o=this.sourceGet(r);if(typeof o!="object"||o===null)break;let a=o[Oe.K_SRC_INPUTS];if(!Array.isArray(a)||!a.length||a.reduce((c,h)=>h.type==="table"&&h.key===i?h:c,null)===null)break;let u=m(this,cr).call(this,r,i);if(typeof n=="string"){let c=await m(this,Ls).call(this,u,n);c>=0&&await m(this,Fs).call(this,u,c,null,!0),s=!0;break}T.existsSync(u)&&(T.rmSync(u),s=!0)}while(!1);return s});_(this,"outputTableQuery",async(r,i,n,s=1,o=5e3)=>{let a=[],l=0;s=parseInt(s,10),(!Number.isInteger(s)||s<1)&&(s=1),o=parseInt(o,10),(!Number.isInteger(o)||o<1)&&(o=1);do{if(r=m(this,ue).call(this,r),n=m(this,st).call(this,n),i=Array.isArray(i)?[...new Set(i)].slice(-zt.max.diskStorage.outputRunsCount):[],!r.length||!n.length||!i.length)break;let u=this.sourceGet(r);if(typeof u!="object"||u===null)break;let c=u[Oe.K_SRC_OUTPUTS];if(!Array.isArray(c)||!c.length||c.reduce((O,I)=>I.type==="table"&&I.key===n?I:O,null)===null)break;let f={};for(let O of i){let I=m(this,An).call(this,r,n,O);if(!T.existsSync(I))continue;let L=await m(this,Oi).call(this,I);L>0&&(l+=L,f[O]=L)}let p=[],y=(s-1)*o,A=0,b=0,v=0;for(let O of Object.keys(f)){if(A>=o)break;v+=f[O]-1;let I=y>=b&&y<=v,L=y+o-1>=b&&y+o-1<=v,ne=y<=b&&y+o-1>=v;if(I||ne||L){let U=y-b,G=Math.min(v-y+1,o-A);A+=G,p.push({runId:O,startIndex:U,count:G})}b+=f[O],v=b}if(!p.length)break;for(let O of p){let{runId:I,startIndex:L,count:ne}=O,U=m(this,An).call(this,r,n,I);try{a=a.concat(await m(this,En).call(this,U,L,ne))}catch{}}}while(!1);return{rows:a,total:l,pageNumber:s,pageSize:o}});_(this,"outputTableAdd",(r,i,n,s)=>{let o=!1;do{if(r=m(this,ue).call(this,r),!r.length||(n=m(this,st).call(this,n),!n.length)||(i=m(this,vt).call(this,i),!i.length))break;let a=this.sourceGet(r);if(typeof a!="object"||a===null)break;let l=a[Oe.K_SRC_OUTPUTS];if(!Array.isArray(l)||!l.length)break;let u=l.reduce((h,f)=>f.type==="table"&&f.key===n?f:h,null);if(u===null||(s=m(this,Sn).call(this,s,u),s===null))break;let c=m(this,An).call(this,r,n,i);if(T.existsSync(c)&&T.statSync(c).size/1048576>=zt.max.sourceCode.ioFieldTableSize)break;T.existsSync(j.dirname(c))||T.mkdirSync(j.dirname(c),{recursive:!0}),T.writeFileSync(c,"".concat(JSON.stringify(s),"\n"),{flag:"a",encoding:"utf8"}),o=!0}while(!1);return o});_(this,"outputsGet",(r,i,n=null)=>{let s={},o={};do{if(r=m(this,ue).call(this,r),!r.length||(i=m(this,vt).call(this,i),!i.length))break;let a=m(this,$e).call(this,r,i);if(!T.existsSync(a)||!T.statSync(a).isDirectory())break;let l=m(this,$e).call(this,r,i,Ec),u={};try{T.existsSync(l)&&T.statSync(l).isFile()&&(u=JSON.parse(T.readFileSync(l).toString()),(typeof u!="object"||u===null)&&(u={}))}catch{}if(!Array.isArray(n)||!n.length){let c=this.sourceGet(r);if(typeof c!="object"||c===null||(n=c[Oe.K_SRC_OUTPUTS],!Array.isArray(n)||!n.length))break}o=m(this,Us).call(this,s,{agentId:r,runId:i,scalarData:u,srcOutputs:n})}while(!1);return s});_(this,"outputsQuery",(r,i,n=null,s=null)=>{let o=[],a=0,l={};do{if(r=m(this,ue).call(this,r),!r.length)break;let u=m(this,$e).call(this,r);if(!T.existsSync(u)||!T.statSync(u).isDirectory())break;i="".concat(i??la).toLowerCase().replace(/\W+/gi,""),i.length||(i=la);let c=this.sourceGet(r);if(typeof c!="object"||c===null)break;let h=c[Oe.K_SRC_OUTPUTS];if(!Array.isArray(h)||!h.length)break;for(let f of h)l[f.key]=[];(!Number.isInteger(n)||n<=0)&&(n=Math.floor(new Date().setHours(0,0,0,0)/1e3)),(!Number.isInteger(s)||s<=0)&&(s=Math.floor(new Date().getTime()/1e3));for(let f of T.readdirSync(u,{withFileTypes:!0})){let p=f.name;if(!f.isDirectory()||p.indexOf("".concat(i,"-"))!==0)continue;let y=p.match(/\-(\d+)$/);if(!y)continue;let A=parseInt(y[1],10);!Number.isInteger(A)||A<n||A>s||(o.push(p),a++)}o.sort((f,p)=>{let y="".concat(f).trim().split("-").pop(),A="".concat(p).trim().split("-").pop();return y>A?1:y<A?-1:0}),o.length>zt.max.diskStorage.outputRunsCount&&(o=o.slice(-zt.max.diskStorage.outputRunsCount));for(let f of o){let p=m(this,$e).call(this,r,f,Ec),y={};try{T.existsSync(p)&&T.statSync(p).isFile()&&(y=JSON.parse(T.readFileSync(p).toString()),(typeof y!="object"||y===null)&&(y={}))}catch{}let A={};m(this,Us).call(this,A,{agentId:r,runId:f,scalarData:y,srcOutputs:h});for(let b of h)typeof A[b.key]<"u"&&l[b.key].push({runId:f,runData:A[b.key]})}}while(!1);return{runIds:o,runIdsTotal:a,fields:l}});_(this,"outputScalarSet",async(r,i,n,s)=>{let o=!1;do{if(r=m(this,ue).call(this,r),!r.length||(i=m(this,vt).call(this,i),!i.length))break;let a=this.sourceGet(r);if(typeof a!="object"||a===null)break;let l=a[Oe.K_SRC_OUTPUTS];if(!Array.isArray(l)||!l.length)break;let u=l.reduce((p,y)=>["int","string","bool"].includes(y.type)&&y.key===n?y:p,null);if(u===null)break;let c=await this.outputsGet(r,i,l);c[n]=m(this,ks).call(this,s,u);let h={};for(let p of l)["int","string","bool"].includes(p.type)&&typeof c[p.key]<"u"&&(h[p.key]=c[p.key]);let f=m(this,$e).call(this,r,i,Ec);T.existsSync(j.dirname(f))||T.mkdirSync(j.dirname(f),{recursive:!0}),T.writeFileSync(f,JSON.stringify(h,null,2)),o=!0}while(!1);return o});_(this,"outputFilesInit",(r,i,n,s=null)=>{if(r=m(this,ue).call(this,r),!r.length)throw new Error("Invalid agent ID");if(i=m(this,vt).call(this,i),!i.length)throw new Error("Invalid run ID");if(n=m(this,st).call(this,n),!n.length)throw new Error("Invalid output key");let o=m(this,$e).call(this,r,i);if(!T.existsSync(o)||!T.statSync(o).isDirectory())throw new Error("Run not initialized");let a=j.join(o,wn);T.existsSync(a)||T.mkdirSync(a,{recursive:!0});let l=this.sourceGet(r);if(typeof l!="object"||l===null)throw new Error("Source code not defined for this agent");let u=l[Oe.K_SRC_OUTPUTS];if(!Array.isArray(u)||!u.length)throw new Error("Outputs not defined for this agent");let c=u.reduce((v,O)=>O.type==="files"&&O.key===n?O:v,null);if(c===null)throw new Error('Field "'.concat(n,'" is not of type file'));Array.isArray(c.extensions)||(c.extensions=["txt"]),s=typeof s=="string"?m(this,st).call(this,s):null,c.extensions.includes(s)||(s=c.extensions[0]);let h=0,f="".concat(n,"-"),[p,y]=i.split("-");for(let v of T.readdirSync(j.dirname(o),{withFileTypes:!0})){if(!v.isDirectory())continue;let[O,I]=v.name.split("-");if(O!==p||I!==y)continue;let L=j.join(j.dirname(o),v.name,wn);if(T.existsSync(L)){for(let ne of T.readdirSync(L,{withFileTypes:!0}))if(ne.isFile()&&ne.name.indexOf(f)===0){let U=parseInt(ne.name.substring(f.length).replace(/^(\d+).*/,"$1"),10);Number.isInteger(U)&&U>0&&U>h&&(h=U)}}}let A="".concat(n,"-").concat(h+1,".").concat(s),b=j.join(a,A);return T.writeFileSync(b,"",{flag:"a"}),{fileName:A,filePath:b,minSize:Number.isInteger(c.min)&&c.min>0?c.min:null,maxSize:Number.isInteger(c.max)&&c.max>0?c.max:null}});_(this,"outputFilesAppend",async(r,i,n,s,o=null)=>{let a=!1;if(r=m(this,ue).call(this,r),i=m(this,vt).call(this,i),n=m(this,qs).call(this,n),r.length&&i.length&&n.length){let l=j.join(m(this,$e).call(this,r,i),wn,n);if(T.existsSync(l)){if(Number.isInteger(o)&&T.statSync(l).size+s.length>o*1048576)throw T.rmSync(l),new Error("Maximum file size exceeded for ".concat(n," (").concat(o,"MB)"));T.writeFileSync(l,s,{flag:"a"}),a=!0}}return a});_(this,"outputFilesDelete",async(r,i,n)=>{let s=!1;if(r=m(this,ue).call(this,r),i=m(this,vt).call(this,i),n=m(this,qs).call(this,n),r.length&&i.length&&n.length){let o=j.join(m(this,$e).call(this,r,i),wn,n);T.existsSync(o)&&(T.rmSync(o,{force:!0}),s=!0)}return s});this._register("diskStorage"),M(this,Ut,jT.getPathConfig()),T.existsSync(m(this,Ut))||T.mkdirSync(m(this,Ut),{recursive:!0}),setInterval(()=>{let i=Math.floor(new Date().getTime()/1e3),n=[],s=j.join(m(this,Ut),"agents");T.existsSync(s)&&T.lstatSync(s).isDirectory()&&T.readdirSync(s,{withFileTypes:!0}).filter(o=>o.isDirectory()).map(o=>{let a=o.name,l=m(this,_i).call(this,a);if(T.existsSync(l)){let u=Math.floor(T.statSync(l).mtime.getTime()/1e3);i-u<=Nm&&n.push(a)}}),n.length&&this._oglama.main?.view.webContents.send(Im.WINDOW_MAIN,["ipc:disk-storage:agents:commit",[n],{type:"req"}])},Nm*1e3)}},_t=new WeakMap,bi=new WeakMap,Ut=new WeakMap,_i=new WeakMap,ur=new WeakMap,cr=new WeakMap,vi=new WeakMap,An=new WeakMap,Oi=new WeakMap,En=new WeakMap,Fs=new WeakMap,Ls=new WeakMap,Sc=new WeakMap,Sn=new WeakMap,$e=new WeakMap,$s=new WeakMap,ks=new WeakMap,ue=new WeakMap,vt=new WeakMap,qs=new WeakMap,st=new WeakMap,Ms=new WeakMap,Us=new WeakMap,xm)});var ca=w(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.CancellationError=bn.CancellationToken=void 0;var zT=require("events"),bc=class extends zT.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(e){this.removeParentCancelHandler(),this._parent=e,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(e){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,e!=null&&(this.parent=e)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(e){this.cancelled?e():this.once("cancel",e)}createPromise(e){if(this.cancelled)return Promise.reject(new Bs);let r=()=>{if(i!=null)try{this.removeListener("cancel",i),i=null}catch{}},i=null;return new Promise((n,s)=>{let o=null;if(i=()=>{try{o!=null&&(o(),o=null)}finally{s(new Bs)}},this.cancelled){i();return}this.onCancel(i),e(n,s,a=>{o=a})}).then(n=>(r(),n)).catch(n=>{throw r(),n})}removeParentCancelHandler(){let e=this._parent;e!=null&&this.parentCancelHandler!=null&&(e.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};bn.CancellationToken=bc;var Bs=class extends Error{constructor(){super("cancelled")}};bn.CancellationError=Bs});var Lm=w((rB,Fm)=>{var _n=1e3,vn=_n*60,On=vn*60,Ti=On*24,VT=Ti*7,YT=Ti*365.25;Fm.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return QT(t);if(r==="number"&&isFinite(t))return e.long?KT(t):XT(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function QT(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*YT;case"weeks":case"week":case"w":return r*VT;case"days":case"day":case"d":return r*Ti;case"hours":case"hour":case"hrs":case"hr":case"h":return r*On;case"minutes":case"minute":case"mins":case"min":case"m":return r*vn;case"seconds":case"second":case"secs":case"sec":case"s":return r*_n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function XT(t){var e=Math.abs(t);return e>=Ti?Math.round(t/Ti)+"d":e>=On?Math.round(t/On)+"h":e>=vn?Math.round(t/vn)+"m":e>=_n?Math.round(t/_n)+"s":t+"ms"}function KT(t){var e=Math.abs(t);return e>=Ti?ha(t,e,Ti,"day"):e>=On?ha(t,e,On,"hour"):e>=vn?ha(t,e,vn,"minute"):e>=_n?ha(t,e,_n,"second"):t+" ms"}function ha(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var _c=w((iB,$m)=>{function JT(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=n,r.enabled=a,r.humanize=Lm(),r.destroy=u,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let h=0;for(let f=0;f<c.length;f++)h=(h<<5)-h+c.charCodeAt(f),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(c){let h,f=null,p,y;function A(...b){if(!A.enabled)return;let v=A,O=Number(new Date),I=O-(h||O);v.diff=I,v.prev=h,v.curr=O,h=O,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let L=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(U,G)=>{if(U==="%%")return"%";L++;let E=r.formatters[G];if(typeof E=="function"){let F=b[L];U=E.call(v,F),b.splice(L,1),L--}return U}),r.formatArgs.call(v,b),(v.log||r.log).apply(v,b)}return A.namespace=c,A.useColors=r.useColors(),A.color=r.selectColor(c),A.extend=i,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==r.namespaces&&(p=r.namespaces,y=r.enabled(c)),y),set:b=>{f=b}}),typeof r.init=="function"&&r.init(A),A}function i(c,h){let f=r(this.namespace+(typeof h>"u"?":":h)+c);return f.log=this.log,f}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let h=(typeof c=="string"?c:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let f of h)f[0]==="-"?r.skips.push(f.slice(1)):r.names.push(f)}function s(c,h){let f=0,p=0,y=-1,A=0;for(;f<c.length;)if(p<h.length&&(h[p]===c[f]||h[p]==="*"))h[p]==="*"?(y=p,A=f,p++):(f++,p++);else if(y!==-1)p=y+1,A++,f=A;else return!1;for(;p<h.length&&h[p]==="*";)p++;return p===h.length}function o(){let c=[...r.names,...r.skips.map(h=>"-"+h)].join(",");return r.enable(""),c}function a(c){for(let h of r.skips)if(s(c,h))return!1;for(let h of r.names)if(s(c,h))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}$m.exports=JT});var km=w((ot,fa)=>{ot.formatArgs=eC;ot.save=tC;ot.load=rC;ot.useColors=ZT;ot.storage=iC();ot.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ot.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ZT(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function eC(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+fa.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}ot.log=console.debug||console.log||(()=>{});function tC(t){try{t?ot.storage.setItem("debug",t):ot.storage.removeItem("debug")}catch{}}function rC(){let t;try{t=ot.storage.getItem("debug")||ot.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function iC(){try{return localStorage}catch{}}fa.exports=_c()(ot);var{formatters:nC}=fa.exports;nC.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Mm=w((nB,qm)=>{"use strict";qm.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",i=e.indexOf(r+t),n=e.indexOf("--");return i!==-1&&(n===-1||i<n)}});var jm=w((sB,Bm)=>{"use strict";var sC=require("os"),Um=require("tty"),Ot=Mm(),{env:Ce}=process,Ur;Ot("no-color")||Ot("no-colors")||Ot("color=false")||Ot("color=never")?Ur=0:(Ot("color")||Ot("colors")||Ot("color=true")||Ot("color=always"))&&(Ur=1);"FORCE_COLOR"in Ce&&(Ce.FORCE_COLOR==="true"?Ur=1:Ce.FORCE_COLOR==="false"?Ur=0:Ur=Ce.FORCE_COLOR.length===0?1:Math.min(parseInt(Ce.FORCE_COLOR,10),3));function vc(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Oc(t,e){if(Ur===0)return 0;if(Ot("color=16m")||Ot("color=full")||Ot("color=truecolor"))return 3;if(Ot("color=256"))return 2;if(t&&!e&&Ur===void 0)return 0;let r=Ur||0;if(Ce.TERM==="dumb")return r;if(process.platform==="win32"){let i=sC.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in Ce)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(i=>i in Ce)||Ce.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Ce)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ce.TEAMCITY_VERSION)?1:0;if(Ce.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ce){let i=parseInt((Ce.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ce.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ce.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ce.TERM)||"COLORTERM"in Ce?1:r}function oC(t){let e=Oc(t,t&&t.isTTY);return vc(e)}Bm.exports={supportsColor:oC,stdout:vc(Oc(!0,Um.isatty(1))),stderr:vc(Oc(!0,Um.isatty(2)))}});var Wm=w((Re,pa)=>{var aC=require("tty"),da=require("util");Re.init=pC;Re.log=hC;Re.formatArgs=uC;Re.save=fC;Re.load=dC;Re.useColors=lC;Re.destroy=da.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Re.colors=[6,2,3,4,5,1];try{let t=jm();t&&(t.stderr||t).level>=2&&(Re.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Re.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[e];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),t[r]=i,t},{});function lC(){return"colors"in Re.inspectOpts?!!Re.inspectOpts.colors:aC.isatty(process.stderr.fd)}function uC(t){let{namespace:e,useColors:r}=this;if(r){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),s="  ".concat(n,";1m").concat(e," \x1B[0m");t[0]=s+t[0].split("\n").join("\n"+s),t.push(n+"m+"+pa.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=cC()+e+" "+t[0]}function cC(){return Re.inspectOpts.hideDate?"":new Date().toISOString()+" "}function hC(...t){return process.stderr.write(da.formatWithOptions(Re.inspectOpts,...t)+"\n")}function fC(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function dC(){return process.env.DEBUG}function pC(t){t.inspectOpts={};let e=Object.keys(Re.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Re.inspectOpts[e[r]]}pa.exports=_c()(Re);var{formatters:Hm}=pa.exports;Hm.o=function(t){return this.inspectOpts.colors=this.useColors,da.inspect(t,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")};Hm.O=function(t){return this.inspectOpts.colors=this.useColors,da.inspect(t,this.inspectOpts)}});var Gm=w((oB,Tc)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Tc.exports=km():Tc.exports=Wm()});var js=w(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.newError=mC;function mC(t,e){let r=new Error(t);return r.code=e,r}});var Ic=w(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.ProgressCallbackTransform=void 0;var gC=require("stream"),Rc=class extends gC.Transform{constructor(e,r,i){super(),this.total=e,this.cancellationToken=r,this.onProgress=i,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(e,r,i){if(this.cancellationToken.cancelled){i(new Error("cancelled"),null);return}this.transferred+=e.length,this.delta+=e.length;let n=Date.now();n>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=n+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((n-this.start)/1e3))}),this.delta=0),i(null,e)}_flush(e){if(this.cancellationToken.cancelled){e(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,e(null)}};ma.ProgressCallbackTransform=Rc});var Qm=w(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.DigestTransform=Qe.HttpExecutor=Qe.HttpError=void 0;Qe.createHttpError=Nc;Qe.parseJson=vC;Qe.configureRequestOptionsFromUrl=Ym;Qe.configureRequestUrl=Dc;Qe.safeGetHeader=Tn;Qe.configureRequestOptions=ga;Qe.safeStringifyJson=ya;var yC=require("crypto"),wC=Gm(),AC=require("fs"),EC=require("stream"),Vm=require("url"),SC=ca(),zm=js(),bC=Ic(),Hs=(0,wC.default)("electron-builder");function Nc(t,e=null){return new Ws(t.statusCode||-1,"".concat(t.statusCode," ").concat(t.statusMessage)+(e==null?"":"\n"+JSON.stringify(e,null,"  "))+"\nHeaders: "+ya(t.headers),e)}var _C=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]),Ws=class extends Error{constructor(e,r="HTTP error: ".concat(_C.get(e)||e),i=null){super(r),this.statusCode=e,this.description=i,this.name="HttpError",this.code="HTTP_ERROR_".concat(e)}isServerError(){return this.statusCode>=500&&this.statusCode<=599}};Qe.HttpError=Ws;function vC(t){return t.then(e=>e==null||e.length===0?null:JSON.parse(e))}var xc=class t{constructor(){this.maxRedirects=10}request(e,r=new SC.CancellationToken,i){ga(e);let n=i==null?void 0:JSON.stringify(i),s=n?Buffer.from(n):void 0;if(s!=null){Hs(n);let{headers:o,...a}=e;e={method:"post",headers:{"Content-Type":"application/json","Content-Length":s.length,...o},...a}}return this.doApiRequest(e,r,o=>o.end(s))}doApiRequest(e,r,i,n=0){return Hs.enabled&&Hs("Request: ".concat(ya(e))),r.createPromise((s,o,a)=>{let l=this.createRequest(e,u=>{try{this.handleResponse(u,e,r,s,o,n,i)}catch(c){o(c)}});this.addErrorAndTimeoutHandlers(l,o,e.timeout),this.addRedirectHandlers(l,e,o,n,u=>{this.doApiRequest(u,r,i,n).then(s).catch(o)}),i(l,o),a(()=>l.abort())})}addRedirectHandlers(e,r,i,n,s){}addErrorAndTimeoutHandlers(e,r,i=60*1e3){this.addTimeOutHandler(e,r,i),e.on("error",r),e.on("aborted",()=>{r(new Error("Request has been aborted by the server"))})}handleResponse(e,r,i,n,s,o,a){var l;if(Hs.enabled&&Hs("Response: ".concat(e.statusCode," ").concat(e.statusMessage,", request options: ").concat(ya(r))),e.statusCode===404){s(Nc(e,"method: ".concat(r.method||"GET"," url: ").concat(r.protocol||"https:","//").concat(r.hostname).concat(r.port?":".concat(r.port):"").concat(r.path,"\n\nPlease double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.\n")));return}else if(e.statusCode===204){n();return}let u=(l=e.statusCode)!==null&&l!==void 0?l:0,c=u>=300&&u<400,h=Tn(e,"location");if(c&&h!=null){if(o>this.maxRedirects){s(this.createMaxRedirectError());return}this.doApiRequest(t.prepareRedirectUrlOptions(h,r),i,a,o).then(n).catch(s);return}e.setEncoding("utf8");let f="";e.on("error",s),e.on("data",p=>f+=p),e.on("end",()=>{try{if(e.statusCode!=null&&e.statusCode>=400){let p=Tn(e,"content-type"),y=p!=null&&(Array.isArray(p)?p.find(A=>A.includes("json"))!=null:p.includes("json"));s(Nc(e,"method: ".concat(r.method||"GET"," url: ").concat(r.protocol||"https:","//").concat(r.hostname).concat(r.port?":".concat(r.port):"").concat(r.path,"\n\n          Data:\n          ").concat(y?JSON.stringify(JSON.parse(f)):f,"\n          ")))}else n(f.length===0?null:f)}catch(p){s(p)}})}async downloadToBuffer(e,r){return await r.cancellationToken.createPromise((i,n,s)=>{let o=[],a={headers:r.headers||void 0,redirect:"manual"};Dc(e,a),ga(a),this.doDownload(a,{destination:null,options:r,onCancel:s,callback:l=>{l==null?i(Buffer.concat(o)):n(l)},responseHandler:(l,u)=>{let c=0;l.on("data",h=>{if(c+=h.length,c>524288e3){u(new Error("Maximum allowed size is 500 MB"));return}o.push(h)}),l.on("end",()=>{u(null)})}},0)})}doDownload(e,r,i){let n=this.createRequest(e,s=>{if(s.statusCode>=400){r.callback(new Error('Cannot download "'.concat(e.protocol||"https:","//").concat(e.hostname).concat(e.path,'", status ').concat(s.statusCode,": ").concat(s.statusMessage)));return}s.on("error",r.callback);let o=Tn(s,"location");if(o!=null){i<this.maxRedirects?this.doDownload(t.prepareRedirectUrlOptions(o,e),r,i++):r.callback(this.createMaxRedirectError());return}r.responseHandler==null?TC(r,s):r.responseHandler(s,r.callback)});this.addErrorAndTimeoutHandlers(n,r.callback,e.timeout),this.addRedirectHandlers(n,e,r.callback,i,s=>{this.doDownload(s,r,i++)}),n.end()}createMaxRedirectError(){return new Error("Too many redirects (> ".concat(this.maxRedirects,")"))}addTimeOutHandler(e,r,i){e.on("socket",n=>{n.setTimeout(i,()=>{e.abort(),r(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(e,r){let i=Ym(e,{...r}),n=i.headers;if(n?.authorization){let s=new Vm.URL(e);(s.hostname.endsWith(".amazonaws.com")||s.searchParams.has("X-Amz-Credential"))&&delete n.authorization}return i}static retryOnServerError(e,r=3){for(let i=0;;i++)try{return e()}catch(n){if(i<r&&(n instanceof Ws&&n.isServerError()||n.code==="EPIPE"))continue;throw n}}};Qe.HttpExecutor=xc;function Ym(t,e){let r=ga(e);return Dc(new Vm.URL(t),r),r}function Dc(t,e){e.protocol=t.protocol,e.hostname=t.hostname,t.port?e.port=t.port:e.port&&delete e.port,e.path=t.pathname+t.search}var Gs=class extends EC.Transform{get actual(){return this._actual}constructor(e,r="sha512",i="base64"){super(),this.expected=e,this.algorithm=r,this.encoding=i,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,yC.createHash)(r)}_transform(e,r,i){this.digester.update(e),i(null,e)}_flush(e){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(r){e(r);return}e(null)}validate(){if(this._actual==null)throw(0,zm.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,zm.newError)("".concat(this.algorithm," checksum mismatch, expected ").concat(this.expected,", got ").concat(this._actual),"ERR_CHECKSUM_MISMATCH");return null}};Qe.DigestTransform=Gs;function OC(t,e,r){return t!=null&&e!=null&&t!==e?(r(new Error("checksum mismatch: expected ".concat(e," but got ").concat(t," (X-Checksum-Sha2 header)"))),!1):!0}function Tn(t,e){let r=t.headers[e];return r==null?null:Array.isArray(r)?r.length===0?null:r[r.length-1]:r}function TC(t,e){if(!OC(Tn(e,"X-Checksum-Sha2"),t.options.sha2,t.callback))return;let r=[];if(t.options.onProgress!=null){let o=Tn(e,"content-length");o!=null&&r.push(new bC.ProgressCallbackTransform(parseInt(o,10),t.options.cancellationToken,t.options.onProgress))}let i=t.options.sha512;i!=null?r.push(new Gs(i,"sha512",i.length===128&&!i.includes("+")&&!i.includes("Z")&&!i.includes("=")?"hex":"base64")):t.options.sha2!=null&&r.push(new Gs(t.options.sha2,"sha256","hex"));let n=(0,AC.createWriteStream)(t.destination);r.push(n);let s=e;for(let o of r)o.on("error",a=>{n.close(),t.options.cancellationToken.cancelled||t.callback(a)}),s=s.pipe(o);n.on("finish",()=>{n.close(t.callback)})}function ga(t,e,r){r!=null&&(t.method=r),t.headers={...t.headers};let i=t.headers;return e!=null&&(i.authorization=e.startsWith("Basic")||e.startsWith("Bearer")?e:"token ".concat(e)),i["User-Agent"]==null&&(i["User-Agent"]="electron-builder"),(r==null||r==="GET"||i["Cache-Control"]==null)&&(i["Cache-Control"]="no-cache"),t.protocol==null&&process.versions.electron!=null&&(t.protocol="https:"),t}function ya(t,e){return JSON.stringify(t,(r,i)=>r.endsWith("Authorization")||r.endsWith("authorization")||r.endsWith("Password")||r.endsWith("PASSWORD")||r.endsWith("Token")||r.includes("password")||r.includes("token")||e!=null&&e.has(r)?"<stripped sensitive data>":i,2)}});var Km=w(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.githubUrl=CC;wa.getS3LikeProviderBaseUrl=RC;function CC(t,e="github.com"){return"".concat(t.protocol||"https","://").concat(t.host||e)}function RC(t){let e=t.provider;if(e==="s3")return IC(t);if(e==="spaces")return NC(t);throw new Error("Not supported provider: ".concat(e))}function IC(t){let e;if(t.accelerate==!0)e="https://".concat(t.bucket,".s3-accelerate.amazonaws.com");else if(t.endpoint!=null)e="".concat(t.endpoint,"/").concat(t.bucket);else if(t.bucket.includes(".")){if(t.region==null)throw new Error('Bucket name "'.concat(t.bucket,'" includes a dot, but S3 region is missing'));t.region==="us-east-1"?e="https://s3.amazonaws.com/".concat(t.bucket):e="https://s3-".concat(t.region,".amazonaws.com/").concat(t.bucket)}else t.region==="cn-north-1"?e="https://".concat(t.bucket,".s3.").concat(t.region,".amazonaws.com.cn"):e="https://".concat(t.bucket,".s3.amazonaws.com");return Xm(e,t.path)}function Xm(t,e){return e!=null&&e.length>0&&(e.startsWith("/")||(t+="/"),t+=e),t}function NC(t){if(t.name==null)throw new Error("name is missing");if(t.region==null)throw new Error("region is missing");return Xm("https://".concat(t.name,".").concat(t.region,".digitaloceanspaces.com"),t.path)}});var Jm=w(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.parseDn=xC;function xC(t){let e=!1,r=null,i="",n=0;t=t.trim();let s=new Map;for(let o=0;o<=t.length;o++){if(o===t.length){r!==null&&s.set(r,i);break}let a=t[o];if(e){if(a==='"'){e=!1;continue}}else{if(a==='"'){e=!0;continue}if(a==="\\"){o++;let l=parseInt(t.slice(o,o+2),16);Number.isNaN(l)?i+=t[o]:(o++,i+=String.fromCharCode(l));continue}if(r===null&&a==="="){r=i,i="";continue}if(a===","||a===";"||a==="+"){r!==null&&s.set(r,i),r=null,i="";continue}}if(a===" "&&!e){if(i.length===0)continue;if(o>n){let l=o;for(;t[l]===" ";)l++;n=l}if(n>=t.length||t[n]===","||t[n]===";"||r===null&&t[n]==="="||r!==null&&t[n]==="+"){o=n-1;continue}}i+=a}return s}});var ig=w(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.nil=Cn.UUID=void 0;var tg=require("crypto"),rg=js(),DC="options.name must be either a string or a Buffer",Zm=(0,tg.randomBytes)(16);Zm[0]=Zm[0]|1;var Aa={},Y=[];for(let t=0;t<256;t++){let e=(t+256).toString(16).substr(1);Aa[e]=t,Y[t]=e}var Ci=class t{constructor(e){this.ascii=null,this.binary=null;let r=t.check(e);if(!r)throw new Error("not a UUID");this.version=r.version,r.format==="ascii"?this.ascii=e:this.binary=e}static v5(e,r){return PC(e,"sha1",80,r)}toString(){return this.ascii==null&&(this.ascii=FC(this.binary)),this.ascii}inspect(){return"UUID v".concat(this.version," ").concat(this.toString())}static check(e,r=0){if(typeof e=="string")return e=e.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(e)?e==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(Aa[e[14]+e[15]]&240)>>4,variant:eg((Aa[e[19]+e[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(e)){if(e.length<r+16)return!1;let i=0;for(;i<16&&e[r+i]===0;i++);return i===16?{version:void 0,variant:"nil",format:"binary"}:{version:(e[r+6]&240)>>4,variant:eg((e[r+8]&224)>>5),format:"binary"}}throw(0,rg.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(e){let r=Buffer.allocUnsafe(16),i=0;for(let n=0;n<16;n++)r[n]=Aa[e[i++]+e[i++]],(n===3||n===5||n===7||n===9)&&(i+=1);return r}};Cn.UUID=Ci;Ci.OID=Ci.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function eg(t){switch(t){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var zs;(function(t){t[t.ASCII=0]="ASCII",t[t.BINARY=1]="BINARY",t[t.OBJECT=2]="OBJECT"})(zs||(zs={}));function PC(t,e,r,i,n=zs.ASCII){let s=(0,tg.createHash)(e);if(typeof t!="string"&&!Buffer.isBuffer(t))throw(0,rg.newError)(DC,"ERR_INVALID_UUID_NAME");s.update(i),s.update(t);let a=s.digest(),l;switch(n){case zs.BINARY:a[6]=a[6]&15|r,a[8]=a[8]&63|128,l=a;break;case zs.OBJECT:a[6]=a[6]&15|r,a[8]=a[8]&63|128,l=new Ci(a);break;default:l=Y[a[0]]+Y[a[1]]+Y[a[2]]+Y[a[3]]+"-"+Y[a[4]]+Y[a[5]]+"-"+Y[a[6]&15|r]+Y[a[7]]+"-"+Y[a[8]&63|128]+Y[a[9]]+"-"+Y[a[10]]+Y[a[11]]+Y[a[12]]+Y[a[13]]+Y[a[14]]+Y[a[15]];break}return l}function FC(t){return Y[t[0]]+Y[t[1]]+Y[t[2]]+Y[t[3]]+"-"+Y[t[4]]+Y[t[5]]+"-"+Y[t[6]]+Y[t[7]]+"-"+Y[t[8]]+Y[t[9]]+"-"+Y[t[10]]+Y[t[11]]+Y[t[12]]+Y[t[13]]+Y[t[14]]+Y[t[15]]}Cn.nil=new Ci("00000000-0000-0000-0000-000000000000")});var ng=w(Ea=>{(function(t){t.parser=function(g,d){return new r(g,d)},t.SAXParser=r,t.SAXStream=u,t.createStream=l,t.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(g,d){if(!(this instanceof r))return new r(g,d);var C=this;n(C),C.q=C.c="",C.bufferCheckPosition=t.MAX_BUFFER_LENGTH,C.opt=d||{},C.opt.lowercase=C.opt.lowercase||C.opt.lowercasetags,C.looseCase=C.opt.lowercase?"toLowerCase":"toUpperCase",C.tags=[],C.closed=C.closedRoot=C.sawRoot=!1,C.tag=C.error=null,C.strict=!!g,C.noscript=!!(g||C.opt.noscript),C.state=E.BEGIN,C.strictEntities=C.opt.strictEntities,C.ENTITIES=C.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),C.attribList=[],C.opt.xmlns&&(C.ns=Object.create(y)),C.opt.unquotedAttributeValues===void 0&&(C.opt.unquotedAttributeValues=!g),C.trackPosition=C.opt.position!==!1,C.trackPosition&&(C.position=C.line=C.column=0),H(C,"onready")}Object.create||(Object.create=function(g){function d(){}d.prototype=g;var C=new d;return C}),Object.keys||(Object.keys=function(g){var d=[];for(var C in g)g.hasOwnProperty(C)&&d.push(C);return d});function i(g){for(var d=Math.max(t.MAX_BUFFER_LENGTH,10),C=0,S=0,ee=e.length;S<ee;S++){var _e=g[e[S]].length;if(_e>d)switch(e[S]){case"textNode":J(g);break;case"cdata":D(g,"oncdata",g.cdata),g.cdata="";break;case"script":D(g,"onscript",g.script),g.script="";break;default:Z(g,"Max buffer length exceeded: "+e[S])}C=Math.max(C,_e)}var ve=t.MAX_BUFFER_LENGTH-C;g.bufferCheckPosition=ve+g.position}function n(g){for(var d=0,C=e.length;d<C;d++)g[e[d]]=""}function s(g){J(g),g.cdata!==""&&(D(g,"oncdata",g.cdata),g.cdata=""),g.script!==""&&(D(g,"onscript",g.script),g.script="")}r.prototype={end:function(){z(this)},write:RT,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var o;try{o=require("stream").Stream}catch{o=function(){}}o||(o=function(){});var a=t.EVENTS.filter(function(g){return g!=="error"&&g!=="end"});function l(g,d){return new u(g,d)}function u(g,d){if(!(this instanceof u))return new u(g,d);o.apply(this),this._parser=new r(g,d),this.writable=!0,this.readable=!0;var C=this;this._parser.onend=function(){C.emit("end")},this._parser.onerror=function(S){C.emit("error",S),C._parser.error=null},this._decoder=null,a.forEach(function(S){Object.defineProperty(C,"on"+S,{get:function(){return C._parser["on"+S]},set:function(ee){if(!ee)return C.removeAllListeners(S),C._parser["on"+S]=ee,ee;C.on(S,ee)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(o.prototype,{constructor:{value:u}}),u.prototype.write=function(g){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(g)){if(!this._decoder){var d=require("string_decoder").StringDecoder;this._decoder=new d("utf8")}g=this._decoder.write(g)}return this._parser.write(g.toString()),this.emit("data",g),!0},u.prototype.end=function(g){return g&&g.length&&this.write(g),this._parser.end(),!0},u.prototype.on=function(g,d){var C=this;return!C._parser["on"+g]&&a.indexOf(g)!==-1&&(C._parser["on"+g]=function(){var S=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);S.splice(0,0,g),C.emit.apply(C,S)}),o.prototype.on.call(C,g,d)};var c="[CDATA[",h="DOCTYPE",f="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",y={xml:f,xmlns:p},A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function I(g){return g===" "||g==="\n"||g==="\r"||g==="	"}function L(g){return g==='"'||g==="'"}function ne(g){return g===">"||I(g)}function U(g,d){return g.test(d)}function G(g,d){return!U(g,d)}var E=0;t.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(g){var d=t.ENTITIES[g],C=typeof d=="number"?String.fromCharCode(d):d;t.ENTITIES[g]=C});for(var F in t.STATE)t.STATE[t.STATE[F]]=F;E=t.STATE;function H(g,d,C){g[d]&&g[d](C)}function D(g,d,C){g.textNode&&J(g),H(g,d,C)}function J(g){g.textNode=pe(g.opt,g.textNode),g.textNode&&H(g,"ontext",g.textNode),g.textNode=""}function pe(g,d){return g.trim&&(d=d.trim()),g.normalize&&(d=d.replace(/\s+/g," ")),d}function Z(g,d){return J(g),g.trackPosition&&(d+="\nLine: "+g.line+"\nColumn: "+g.column+"\nChar: "+g.c),d=new Error(d),g.error=d,H(g,"onerror",d),g}function z(g){return g.sawRoot&&!g.closedRoot&&q(g,"Unclosed root tag"),g.state!==E.BEGIN&&g.state!==E.BEGIN_WHITESPACE&&g.state!==E.TEXT&&Z(g,"Unexpected end"),J(g),g.c="",g.closed=!0,H(g,"onend"),r.call(g,g.strict,g.opt),g}function q(g,d){if(typeof g!="object"||!(g instanceof r))throw new Error("bad call to strictFail");g.strict&&Z(g,d)}function te(g){g.strict||(g.tagName=g.tagName[g.looseCase]());var d=g.tags[g.tags.length-1]||g,C=g.tag={name:g.tagName,attributes:{}};g.opt.xmlns&&(C.ns=d.ns),g.attribList.length=0,D(g,"onopentagstart",C)}function we(g,d){var C=g.indexOf(":"),S=C<0?["",g]:g.split(":"),ee=S[0],_e=S[1];return d&&g==="xmlns"&&(ee="xmlns",_e=""),{prefix:ee,local:_e}}function re(g){if(g.strict||(g.attribName=g.attribName[g.looseCase]()),g.attribList.indexOf(g.attribName)!==-1||g.tag.attributes.hasOwnProperty(g.attribName)){g.attribName=g.attribValue="";return}if(g.opt.xmlns){var d=we(g.attribName,!0),C=d.prefix,S=d.local;if(C==="xmlns")if(S==="xml"&&g.attribValue!==f)q(g,"xml: prefix must be bound to "+f+"\nActual: "+g.attribValue);else if(S==="xmlns"&&g.attribValue!==p)q(g,"xmlns: prefix must be bound to "+p+"\nActual: "+g.attribValue);else{var ee=g.tag,_e=g.tags[g.tags.length-1]||g;ee.ns===_e.ns&&(ee.ns=Object.create(_e.ns)),ee.ns[S]=g.attribValue}g.attribList.push([g.attribName,g.attribValue])}else g.tag.attributes[g.attribName]=g.attribValue,D(g,"onattribute",{name:g.attribName,value:g.attribValue});g.attribName=g.attribValue=""}function Mr(g,d){if(g.opt.xmlns){var C=g.tag,S=we(g.tagName);C.prefix=S.prefix,C.local=S.local,C.uri=C.ns[S.prefix]||"",C.prefix&&!C.uri&&(q(g,"Unbound namespace prefix: "+JSON.stringify(g.tagName)),C.uri=S.prefix);var ee=g.tags[g.tags.length-1]||g;C.ns&&ee.ns!==C.ns&&Object.keys(C.ns).forEach(function(lm){D(g,"onopennamespace",{prefix:lm,uri:C.ns[lm]})});for(var _e=0,ve=g.attribList.length;_e<ve;_e++){var it=g.attribList[_e],nt=it[0],pn=it[1],Le=we(nt,!0),ar=Le.prefix,IT=Le.local,am=ar===""?"":C.ns[ar]||"",cc={name:nt,value:pn,prefix:ar,local:IT,uri:am};ar&&ar!=="xmlns"&&!am&&(q(g,"Unbound namespace prefix: "+JSON.stringify(ar)),cc.uri=ar),g.tag.attributes[nt]=cc,D(g,"onattribute",cc)}g.attribList.length=0}g.tag.isSelfClosing=!!d,g.sawRoot=!0,g.tags.push(g.tag),D(g,"onopentag",g.tag),d||(!g.noscript&&g.tagName.toLowerCase()==="script"?g.state=E.SCRIPT:g.state=E.TEXT,g.tag=null,g.tagName=""),g.attribName=g.attribValue="",g.attribList.length=0}function uc(g){if(!g.tagName){q(g,"Weird empty close tag."),g.textNode+="</>",g.state=E.TEXT;return}if(g.script){if(g.tagName!=="script"){g.script+="</"+g.tagName+">",g.tagName="",g.state=E.SCRIPT;return}D(g,"onscript",g.script),g.script=""}var d=g.tags.length,C=g.tagName;g.strict||(C=C[g.looseCase]());for(var S=C;d--;){var ee=g.tags[d];if(ee.name!==S)q(g,"Unexpected close tag");else break}if(d<0){q(g,"Unmatched closing tag: "+g.tagName),g.textNode+="</"+g.tagName+">",g.state=E.TEXT;return}g.tagName=C;for(var _e=g.tags.length;_e-- >d;){var ve=g.tag=g.tags.pop();g.tagName=g.tag.name,D(g,"onclosetag",g.tagName);var it={};for(var nt in ve.ns)it[nt]=ve.ns[nt];var pn=g.tags[g.tags.length-1]||g;g.opt.xmlns&&ve.ns!==pn.ns&&Object.keys(ve.ns).forEach(function(Le){var ar=ve.ns[Le];D(g,"onclosenamespace",{prefix:Le,uri:ar})})}d===0&&(g.closedRoot=!0),g.tagName=g.attribValue=g.attribName="",g.attribList.length=0,g.state=E.TEXT}function CT(g){var d=g.entity,C=d.toLowerCase(),S,ee="";return g.ENTITIES[d]?g.ENTITIES[d]:g.ENTITIES[C]?g.ENTITIES[C]:(d=C,d.charAt(0)==="#"&&(d.charAt(1)==="x"?(d=d.slice(2),S=parseInt(d,16),ee=S.toString(16)):(d=d.slice(1),S=parseInt(d,10),ee=S.toString(10))),d=d.replace(/^0+/,""),isNaN(S)||ee.toLowerCase()!==d?(q(g,"Invalid character entity"),"&"+g.entity+";"):String.fromCodePoint(S))}function sm(g,d){d==="<"?(g.state=E.OPEN_WAKA,g.startTagPosition=g.position):I(d)||(q(g,"Non-whitespace before first tag."),g.textNode=d,g.state=E.TEXT)}function om(g,d){var C="";return d<g.length&&(C=g.charAt(d)),C}function RT(g){var d=this;if(this.error)throw this.error;if(d.closed)return Z(d,"Cannot write after close. Assign an onready handler.");if(g===null)return z(d);typeof g=="object"&&(g=g.toString());for(var C=0,S="";S=om(g,C++),d.c=S,!!S;)switch(d.trackPosition&&(d.position++,S==="\n"?(d.line++,d.column=0):d.column++),d.state){case E.BEGIN:if(d.state=E.BEGIN_WHITESPACE,S==="\uFEFF")continue;sm(d,S);continue;case E.BEGIN_WHITESPACE:sm(d,S);continue;case E.TEXT:if(d.sawRoot&&!d.closedRoot){for(var ee=C-1;S&&S!=="<"&&S!=="&";)S=om(g,C++),S&&d.trackPosition&&(d.position++,S==="\n"?(d.line++,d.column=0):d.column++);d.textNode+=g.substring(ee,C-1)}S==="<"&&!(d.sawRoot&&d.closedRoot&&!d.strict)?(d.state=E.OPEN_WAKA,d.startTagPosition=d.position):(!I(S)&&(!d.sawRoot||d.closedRoot)&&q(d,"Text data outside of root node."),S==="&"?d.state=E.TEXT_ENTITY:d.textNode+=S);continue;case E.SCRIPT:S==="<"?d.state=E.SCRIPT_ENDING:d.script+=S;continue;case E.SCRIPT_ENDING:S==="/"?d.state=E.CLOSE_TAG:(d.script+="<"+S,d.state=E.SCRIPT);continue;case E.OPEN_WAKA:if(S==="!")d.state=E.SGML_DECL,d.sgmlDecl="";else if(!I(S))if(U(A,S))d.state=E.OPEN_TAG,d.tagName=S;else if(S==="/")d.state=E.CLOSE_TAG,d.tagName="";else if(S==="?")d.state=E.PROC_INST,d.procInstName=d.procInstBody="";else{if(q(d,"Unencoded <"),d.startTagPosition+1<d.position){var _e=d.position-d.startTagPosition;S=new Array(_e).join(" ")+S}d.textNode+="<"+S,d.state=E.TEXT}continue;case E.SGML_DECL:if(d.sgmlDecl+S==="--"){d.state=E.COMMENT,d.comment="",d.sgmlDecl="";continue}d.doctype&&d.doctype!==!0&&d.sgmlDecl?(d.state=E.DOCTYPE_DTD,d.doctype+="<!"+d.sgmlDecl+S,d.sgmlDecl=""):(d.sgmlDecl+S).toUpperCase()===c?(D(d,"onopencdata"),d.state=E.CDATA,d.sgmlDecl="",d.cdata=""):(d.sgmlDecl+S).toUpperCase()===h?(d.state=E.DOCTYPE,(d.doctype||d.sawRoot)&&q(d,"Inappropriately located doctype declaration"),d.doctype="",d.sgmlDecl=""):S===">"?(D(d,"onsgmldeclaration",d.sgmlDecl),d.sgmlDecl="",d.state=E.TEXT):(L(S)&&(d.state=E.SGML_DECL_QUOTED),d.sgmlDecl+=S);continue;case E.SGML_DECL_QUOTED:S===d.q&&(d.state=E.SGML_DECL,d.q=""),d.sgmlDecl+=S;continue;case E.DOCTYPE:S===">"?(d.state=E.TEXT,D(d,"ondoctype",d.doctype),d.doctype=!0):(d.doctype+=S,S==="["?d.state=E.DOCTYPE_DTD:L(S)&&(d.state=E.DOCTYPE_QUOTED,d.q=S));continue;case E.DOCTYPE_QUOTED:d.doctype+=S,S===d.q&&(d.q="",d.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:S==="]"?(d.doctype+=S,d.state=E.DOCTYPE):S==="<"?(d.state=E.OPEN_WAKA,d.startTagPosition=d.position):L(S)?(d.doctype+=S,d.state=E.DOCTYPE_DTD_QUOTED,d.q=S):d.doctype+=S;continue;case E.DOCTYPE_DTD_QUOTED:d.doctype+=S,S===d.q&&(d.state=E.DOCTYPE_DTD,d.q="");continue;case E.COMMENT:S==="-"?d.state=E.COMMENT_ENDING:d.comment+=S;continue;case E.COMMENT_ENDING:S==="-"?(d.state=E.COMMENT_ENDED,d.comment=pe(d.opt,d.comment),d.comment&&D(d,"oncomment",d.comment),d.comment=""):(d.comment+="-"+S,d.state=E.COMMENT);continue;case E.COMMENT_ENDED:S!==">"?(q(d,"Malformed comment"),d.comment+="--"+S,d.state=E.COMMENT):d.doctype&&d.doctype!==!0?d.state=E.DOCTYPE_DTD:d.state=E.TEXT;continue;case E.CDATA:S==="]"?d.state=E.CDATA_ENDING:d.cdata+=S;continue;case E.CDATA_ENDING:S==="]"?d.state=E.CDATA_ENDING_2:(d.cdata+="]"+S,d.state=E.CDATA);continue;case E.CDATA_ENDING_2:S===">"?(d.cdata&&D(d,"oncdata",d.cdata),D(d,"onclosecdata"),d.cdata="",d.state=E.TEXT):S==="]"?d.cdata+="]":(d.cdata+="]]"+S,d.state=E.CDATA);continue;case E.PROC_INST:S==="?"?d.state=E.PROC_INST_ENDING:I(S)?d.state=E.PROC_INST_BODY:d.procInstName+=S;continue;case E.PROC_INST_BODY:if(!d.procInstBody&&I(S))continue;S==="?"?d.state=E.PROC_INST_ENDING:d.procInstBody+=S;continue;case E.PROC_INST_ENDING:S===">"?(D(d,"onprocessinginstruction",{name:d.procInstName,body:d.procInstBody}),d.procInstName=d.procInstBody="",d.state=E.TEXT):(d.procInstBody+="?"+S,d.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:U(b,S)?d.tagName+=S:(te(d),S===">"?Mr(d):S==="/"?d.state=E.OPEN_TAG_SLASH:(I(S)||q(d,"Invalid character in tag name"),d.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:S===">"?(Mr(d,!0),uc(d)):(q(d,"Forward-slash in opening tag not followed by >"),d.state=E.ATTRIB);continue;case E.ATTRIB:if(I(S))continue;S===">"?Mr(d):S==="/"?d.state=E.OPEN_TAG_SLASH:U(A,S)?(d.attribName=S,d.attribValue="",d.state=E.ATTRIB_NAME):q(d,"Invalid attribute name");continue;case E.ATTRIB_NAME:S==="="?d.state=E.ATTRIB_VALUE:S===">"?(q(d,"Attribute without value"),d.attribValue=d.attribName,re(d),Mr(d)):I(S)?d.state=E.ATTRIB_NAME_SAW_WHITE:U(b,S)?d.attribName+=S:q(d,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if(S==="=")d.state=E.ATTRIB_VALUE;else{if(I(S))continue;q(d,"Attribute without value"),d.tag.attributes[d.attribName]="",d.attribValue="",D(d,"onattribute",{name:d.attribName,value:""}),d.attribName="",S===">"?Mr(d):U(A,S)?(d.attribName=S,d.state=E.ATTRIB_NAME):(q(d,"Invalid attribute name"),d.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(I(S))continue;L(S)?(d.q=S,d.state=E.ATTRIB_VALUE_QUOTED):(d.opt.unquotedAttributeValues||Z(d,"Unquoted attribute value"),d.state=E.ATTRIB_VALUE_UNQUOTED,d.attribValue=S);continue;case E.ATTRIB_VALUE_QUOTED:if(S!==d.q){S==="&"?d.state=E.ATTRIB_VALUE_ENTITY_Q:d.attribValue+=S;continue}re(d),d.q="",d.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:I(S)?d.state=E.ATTRIB:S===">"?Mr(d):S==="/"?d.state=E.OPEN_TAG_SLASH:U(A,S)?(q(d,"No whitespace between attributes"),d.attribName=S,d.attribValue="",d.state=E.ATTRIB_NAME):q(d,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!ne(S)){S==="&"?d.state=E.ATTRIB_VALUE_ENTITY_U:d.attribValue+=S;continue}re(d),S===">"?Mr(d):d.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(d.tagName)S===">"?uc(d):U(b,S)?d.tagName+=S:d.script?(d.script+="</"+d.tagName,d.tagName="",d.state=E.SCRIPT):(I(S)||q(d,"Invalid tagname in closing tag"),d.state=E.CLOSE_TAG_SAW_WHITE);else{if(I(S))continue;G(A,S)?d.script?(d.script+="</"+S,d.state=E.SCRIPT):q(d,"Invalid tagname in closing tag."):d.tagName=S}continue;case E.CLOSE_TAG_SAW_WHITE:if(I(S))continue;S===">"?uc(d):q(d,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var ve,it;switch(d.state){case E.TEXT_ENTITY:ve=E.TEXT,it="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:ve=E.ATTRIB_VALUE_QUOTED,it="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:ve=E.ATTRIB_VALUE_UNQUOTED,it="attribValue";break}if(S===";"){var nt=CT(d);d.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(nt)?(d.entity="",d.state=ve,d.write(nt)):(d[it]+=nt,d.entity="",d.state=ve)}else U(d.entity.length?O:v,S)?d.entity+=S:(q(d,"Invalid character in entity name"),d[it]+="&"+d.entity+S,d.entity="",d.state=ve);continue;default:throw new Error(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&i(d),d}String.fromCodePoint||function(){var g=String.fromCharCode,d=Math.floor,C=function(){var S=16384,ee=[],_e,ve,it=-1,nt=arguments.length;if(!nt)return"";for(var pn="";++it<nt;){var Le=Number(arguments[it]);if(!isFinite(Le)||Le<0||Le>1114111||d(Le)!==Le)throw RangeError("Invalid code point: "+Le);Le<=65535?ee.push(Le):(Le-=65536,_e=(Le>>10)+55296,ve=Le%1024+56320,ee.push(_e,ve)),(it+1===nt||ee.length>S)&&(pn+=g.apply(null,ee),ee.length=0)}return pn};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:C,configurable:!0,writable:!0}):String.fromCodePoint=C}()})(typeof Ea>"u"?Ea.sax={}:Ea)});var og=w(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.XElement=void 0;Vs.parseXml=qC;var LC=ng(),Sa=js(),ba=class{constructor(e){if(this.name=e,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!e)throw(0,Sa.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!kC(e))throw(0,Sa.newError)("Invalid element name: ".concat(e),"ERR_XML_ELEMENT_INVALID_NAME")}attribute(e){let r=this.attributes===null?null:this.attributes[e];if(r==null)throw(0,Sa.newError)('No attribute "'.concat(e,'"'),"ERR_XML_MISSED_ATTRIBUTE");return r}removeAttribute(e){this.attributes!==null&&delete this.attributes[e]}element(e,r=!1,i=null){let n=this.elementOrNull(e,r);if(n===null)throw(0,Sa.newError)(i||'No element "'.concat(e,'"'),"ERR_XML_MISSED_ELEMENT");return n}elementOrNull(e,r=!1){if(this.elements===null)return null;for(let i of this.elements)if(sg(i,e,r))return i;return null}getElements(e,r=!1){return this.elements===null?[]:this.elements.filter(i=>sg(i,e,r))}elementValueOrEmpty(e,r=!1){let i=this.elementOrNull(e,r);return i===null?"":i.value}};Vs.XElement=ba;var $C=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function kC(t){return $C.test(t)}function sg(t,e,r){let i=t.name;return i===e||r===!0&&i.length===e.length&&i.toLowerCase()===e.toLowerCase()}function qC(t){let e=null,r=LC.parser(!0,{}),i=[];return r.onopentag=n=>{let s=new ba(n.name);if(s.attributes=n.attributes,e===null)e=s;else{let o=i[i.length-1];o.elements==null&&(o.elements=[]),o.elements.push(s)}i.push(s)},r.onclosetag=()=>{i.pop()},r.ontext=n=>{i.length>0&&(i[i.length-1].value=n)},r.oncdata=n=>{let s=i[i.length-1];s.value=n,s.isCData=!0},r.onerror=n=>{throw n},r.write(t),e}});var lg=w(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.MemoLazy=void 0;var Fc=class{constructor(e,r){this.selector=e,this.creator=r,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){let e=this.selector();if(this._value!==void 0&&ag(this.selected,e))return this._value;this.selected=e;let r=this.creator(e);return this.value=r,r}set value(e){this._value=e}};_a.MemoLazy=Fc;function ag(t,e){if(typeof t=="object"&&t!==null&&(typeof e=="object"&&e!==null)){let n=Object.keys(t),s=Object.keys(e);return n.length===s.length&&n.every(o=>ag(t[o],e[o]))}return t===e}});var cg=w(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.retry=ug;var MC=ca();async function ug(t,e,r,i=0,n=0,s){var o;let a=new MC.CancellationToken;try{return await t()}catch(l){if((!((o=s?.(l))!==null&&o!==void 0)||o)&&e>0&&!a.cancelled)return await new Promise(u=>setTimeout(u,r+i*n)),await ug(t,e-1,r,i,n+1,s);throw l}}});var Ie=w(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.CURRENT_APP_PACKAGE_FILE_NAME=k.CURRENT_APP_INSTALLER_FILE_NAME=k.retry=k.MemoLazy=k.newError=k.XElement=k.parseXml=k.ProgressCallbackTransform=k.UUID=k.parseDn=k.githubUrl=k.getS3LikeProviderBaseUrl=k.configureRequestUrl=k.parseJson=k.safeStringifyJson=k.configureRequestOptionsFromUrl=k.configureRequestOptions=k.safeGetHeader=k.DigestTransform=k.HttpExecutor=k.createHttpError=k.HttpError=k.CancellationError=k.CancellationToken=void 0;k.asArray=zC;var hg=ca();Object.defineProperty(k,"CancellationToken",{enumerable:!0,get:function(){return hg.CancellationToken}});Object.defineProperty(k,"CancellationError",{enumerable:!0,get:function(){return hg.CancellationError}});var Vt=Qm();Object.defineProperty(k,"HttpError",{enumerable:!0,get:function(){return Vt.HttpError}});Object.defineProperty(k,"createHttpError",{enumerable:!0,get:function(){return Vt.createHttpError}});Object.defineProperty(k,"HttpExecutor",{enumerable:!0,get:function(){return Vt.HttpExecutor}});Object.defineProperty(k,"DigestTransform",{enumerable:!0,get:function(){return Vt.DigestTransform}});Object.defineProperty(k,"safeGetHeader",{enumerable:!0,get:function(){return Vt.safeGetHeader}});Object.defineProperty(k,"configureRequestOptions",{enumerable:!0,get:function(){return Vt.configureRequestOptions}});Object.defineProperty(k,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return Vt.configureRequestOptionsFromUrl}});Object.defineProperty(k,"safeStringifyJson",{enumerable:!0,get:function(){return Vt.safeStringifyJson}});Object.defineProperty(k,"parseJson",{enumerable:!0,get:function(){return Vt.parseJson}});Object.defineProperty(k,"configureRequestUrl",{enumerable:!0,get:function(){return Vt.configureRequestUrl}});var fg=Km();Object.defineProperty(k,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return fg.getS3LikeProviderBaseUrl}});Object.defineProperty(k,"githubUrl",{enumerable:!0,get:function(){return fg.githubUrl}});var UC=Jm();Object.defineProperty(k,"parseDn",{enumerable:!0,get:function(){return UC.parseDn}});var BC=ig();Object.defineProperty(k,"UUID",{enumerable:!0,get:function(){return BC.UUID}});var jC=Ic();Object.defineProperty(k,"ProgressCallbackTransform",{enumerable:!0,get:function(){return jC.ProgressCallbackTransform}});var dg=og();Object.defineProperty(k,"parseXml",{enumerable:!0,get:function(){return dg.parseXml}});Object.defineProperty(k,"XElement",{enumerable:!0,get:function(){return dg.XElement}});var HC=js();Object.defineProperty(k,"newError",{enumerable:!0,get:function(){return HC.newError}});var WC=lg();Object.defineProperty(k,"MemoLazy",{enumerable:!0,get:function(){return WC.MemoLazy}});var GC=cg();Object.defineProperty(k,"retry",{enumerable:!0,get:function(){return GC.retry}});k.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe";k.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function zC(t){return t==null?[]:Array.isArray(t)?t:[t]}});var at=w($c=>{"use strict";$c.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,i)=>{e.push((n,s)=>n!=null?i(n):r(s)),t.apply(this,e)})},"name",{value:t.name})};$c.fromPromise=function(t){return Object.defineProperty(function(...e){let r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);e.pop(),t.apply(this,e).then(i=>r(null,i),r)},"name",{value:t.name})}});var mg=w((AB,pg)=>{var Br=require("constants"),VC=process.cwd,va=null,YC=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return va||(va=VC.call(process)),va};try{process.cwd()}catch{}typeof process.chdir=="function"&&(kc=process.chdir,process.chdir=function(t){va=null,kc.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,kc));var kc;pg.exports=QC;function QC(t){Br.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=i(t.chmod),t.fchmod=i(t.fchmod),t.lchmod=i(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=n(t.chmodSync),t.fchmodSync=n(t.fchmodSync),t.lchmodSync=n(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=l(t.statSync),t.fstatSync=l(t.fstatSync),t.lstatSync=l(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(c,h,f){f&&process.nextTick(f)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(c,h,f,p){p&&process.nextTick(p)},t.lchownSync=function(){}),YC==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(c){function h(f,p,y){var A=Date.now(),b=0;c(f,p,function v(O){if(O&&(O.code==="EACCES"||O.code==="EPERM"||O.code==="EBUSY")&&Date.now()-A<6e4){setTimeout(function(){t.stat(p,function(I,L){I&&I.code==="ENOENT"?c(f,p,v):y(O)})},b),b<100&&(b+=10);return}y&&y(O)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,c),h}(t.rename)),t.read=typeof t.read!="function"?t.read:function(c){function h(f,p,y,A,b,v){var O;if(v&&typeof v=="function"){var I=0;O=function(L,ne,U){if(L&&L.code==="EAGAIN"&&I<10)return I++,c.call(t,f,p,y,A,b,O);v.apply(this,arguments)}}return c.call(t,f,p,y,A,b,O)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,c),h}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(c){return function(h,f,p,y,A){for(var b=0;;)try{return c.call(t,h,f,p,y,A)}catch(v){if(v.code==="EAGAIN"&&b<10){b++;continue}throw v}}}(t.readSync);function e(c){c.lchmod=function(h,f,p){c.open(h,Br.O_WRONLY|Br.O_SYMLINK,f,function(y,A){if(y){p&&p(y);return}c.fchmod(A,f,function(b){c.close(A,function(v){p&&p(b||v)})})})},c.lchmodSync=function(h,f){var p=c.openSync(h,Br.O_WRONLY|Br.O_SYMLINK,f),y=!0,A;try{A=c.fchmodSync(p,f),y=!1}finally{if(y)try{c.closeSync(p)}catch{}else c.closeSync(p)}return A}}function r(c){Br.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(h,f,p,y){c.open(h,Br.O_SYMLINK,function(A,b){if(A){y&&y(A);return}c.futimes(b,f,p,function(v){c.close(b,function(O){y&&y(v||O)})})})},c.lutimesSync=function(h,f,p){var y=c.openSync(h,Br.O_SYMLINK),A,b=!0;try{A=c.futimesSync(y,f,p),b=!1}finally{if(b)try{c.closeSync(y)}catch{}else c.closeSync(y)}return A}):c.futimes&&(c.lutimes=function(h,f,p,y){y&&process.nextTick(y)},c.lutimesSync=function(){})}function i(c){return c&&function(h,f,p){return c.call(t,h,f,function(y){u(y)&&(y=null),p&&p.apply(this,arguments)})}}function n(c){return c&&function(h,f){try{return c.call(t,h,f)}catch(p){if(!u(p))throw p}}}function s(c){return c&&function(h,f,p,y){return c.call(t,h,f,p,function(A){u(A)&&(A=null),y&&y.apply(this,arguments)})}}function o(c){return c&&function(h,f,p){try{return c.call(t,h,f,p)}catch(y){if(!u(y))throw y}}}function a(c){return c&&function(h,f,p){typeof f=="function"&&(p=f,f=null);function y(A,b){b&&(b.uid<0&&(b.uid+=4294967296),b.gid<0&&(b.gid+=4294967296)),p&&p.apply(this,arguments)}return f?c.call(t,h,f,y):c.call(t,h,y)}}function l(c){return c&&function(h,f){var p=f?c.call(t,h,f):c.call(t,h);return p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),p}}function u(c){if(!c||c.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var wg=w((EB,yg)=>{var gg=require("stream").Stream;yg.exports=XC;function XC(t){return{ReadStream:e,WriteStream:r};function e(i,n){if(!(this instanceof e))return new e(i,n);gg.call(this);var s=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var o=Object.keys(n),a=0,l=o.length;a<l;a++){var u=o[a];this[u]=n[u]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}t.open(this.path,this.flags,this.mode,function(c,h){if(c){s.emit("error",c),s.readable=!1;return}s.fd=h,s.emit("open",h),s._read()})}function r(i,n){if(!(this instanceof r))return new r(i,n);gg.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),o=0,a=s.length;o<a;o++){var l=s[o];this[l]=n[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Eg=w((SB,Ag)=>{"use strict";Ag.exports=JC;var KC=Object.getPrototypeOf||function(t){return t.__proto__};function JC(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:KC(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var Xe=w((bB,Uc)=>{var me=require("fs"),ZC=mg(),eR=wg(),tR=Eg(),Oa=require("util"),ke,Ca;typeof Symbol=="function"&&typeof Symbol.for=="function"?(ke=Symbol.for("graceful-fs.queue"),Ca=Symbol.for("graceful-fs.previous")):(ke="___graceful-fs.queue",Ca="___graceful-fs.previous");function rR(){}function _g(t,e){Object.defineProperty(t,ke,{get:function(){return e}})}var Ri=rR;Oa.debuglog?Ri=Oa.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Ri=function(){var t=Oa.format.apply(Oa,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)});me[ke]||(Sg=global[ke]||[],_g(me,Sg),me.close=function(t){function e(r,i){return t.call(me,r,function(n){n||bg(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(e,Ca,{value:t}),e}(me.close),me.closeSync=function(t){function e(r){t.apply(me,arguments),bg()}return Object.defineProperty(e,Ca,{value:t}),e}(me.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Ri(me[ke]),require("assert").equal(me[ke].length,0)}));var Sg;global[ke]||_g(global,me[ke]);Uc.exports=qc(tR(me));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!me.__patched&&(Uc.exports=qc(me),me.__patched=!0);function qc(t){ZC(t),t.gracefulify=qc,t.createReadStream=ne,t.createWriteStream=U;var e=t.readFile;t.readFile=r;function r(F,H,D){return typeof H=="function"&&(D=H,H=null),J(F,H,D);function J(pe,Z,z,q){return e(pe,Z,function(te){te&&(te.code==="EMFILE"||te.code==="ENFILE")?Rn([J,[pe,Z,z],te,q||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var i=t.writeFile;t.writeFile=n;function n(F,H,D,J){return typeof D=="function"&&(J=D,D=null),pe(F,H,D,J);function pe(Z,z,q,te,we){return i(Z,z,q,function(re){re&&(re.code==="EMFILE"||re.code==="ENFILE")?Rn([pe,[Z,z,q,te],re,we||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}var s=t.appendFile;s&&(t.appendFile=o);function o(F,H,D,J){return typeof D=="function"&&(J=D,D=null),pe(F,H,D,J);function pe(Z,z,q,te,we){return s(Z,z,q,function(re){re&&(re.code==="EMFILE"||re.code==="ENFILE")?Rn([pe,[Z,z,q,te],re,we||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=l);function l(F,H,D,J){return typeof D=="function"&&(J=D,D=0),pe(F,H,D,J);function pe(Z,z,q,te,we){return a(Z,z,q,function(re){re&&(re.code==="EMFILE"||re.code==="ENFILE")?Rn([pe,[Z,z,q,te],re,we||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}var u=t.readdir;t.readdir=h;var c=/^v[0-5]\./;function h(F,H,D){typeof H=="function"&&(D=H,H=null);var J=c.test(process.version)?function(z,q,te,we){return u(z,pe(z,q,te,we))}:function(z,q,te,we){return u(z,q,pe(z,q,te,we))};return J(F,H,D);function pe(Z,z,q,te){return function(we,re){we&&(we.code==="EMFILE"||we.code==="ENFILE")?Rn([J,[Z,z,q],we,te||Date.now(),Date.now()]):(re&&re.sort&&re.sort(),typeof q=="function"&&q.call(this,we,re))}}}if(process.version.substr(0,4)==="v0.8"){var f=eR(t);v=f.ReadStream,I=f.WriteStream}var p=t.ReadStream;p&&(v.prototype=Object.create(p.prototype),v.prototype.open=O);var y=t.WriteStream;y&&(I.prototype=Object.create(y.prototype),I.prototype.open=L),Object.defineProperty(t,"ReadStream",{get:function(){return v},set:function(F){v=F},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return I},set:function(F){I=F},enumerable:!0,configurable:!0});var A=v;Object.defineProperty(t,"FileReadStream",{get:function(){return A},set:function(F){A=F},enumerable:!0,configurable:!0});var b=I;Object.defineProperty(t,"FileWriteStream",{get:function(){return b},set:function(F){b=F},enumerable:!0,configurable:!0});function v(F,H){return this instanceof v?(p.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}function O(){var F=this;E(F.path,F.flags,F.mode,function(H,D){H?(F.autoClose&&F.destroy(),F.emit("error",H)):(F.fd=D,F.emit("open",D),F.read())})}function I(F,H){return this instanceof I?(y.apply(this,arguments),this):I.apply(Object.create(I.prototype),arguments)}function L(){var F=this;E(F.path,F.flags,F.mode,function(H,D){H?(F.destroy(),F.emit("error",H)):(F.fd=D,F.emit("open",D))})}function ne(F,H){return new t.ReadStream(F,H)}function U(F,H){return new t.WriteStream(F,H)}var G=t.open;t.open=E;function E(F,H,D,J){return typeof D=="function"&&(J=D,D=null),pe(F,H,D,J);function pe(Z,z,q,te,we){return G(Z,z,q,function(re,Mr){re&&(re.code==="EMFILE"||re.code==="ENFILE")?Rn([pe,[Z,z,q,te],re,we||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}return t}function Rn(t){Ri("ENQUEUE",t[0].name,t[1]),me[ke].push(t),Mc()}var Ta;function bg(){for(var t=Date.now(),e=0;e<me[ke].length;++e)me[ke][e].length>2&&(me[ke][e][3]=t,me[ke][e][4]=t);Mc()}function Mc(){if(clearTimeout(Ta),Ta=void 0,me[ke].length!==0){var t=me[ke].shift(),e=t[0],r=t[1],i=t[2],n=t[3],s=t[4];if(n===void 0)Ri("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-n>=6e4){Ri("TIMEOUT",e.name,r);var o=r.pop();typeof o=="function"&&o.call(null,i)}else{var a=Date.now()-s,l=Math.max(s-n,1),u=Math.min(l*1.2,100);a>=u?(Ri("RETRY",e.name,r),e.apply(null,r.concat([n]))):me[ke].push(t)}Ta===void 0&&(Ta=setTimeout(Mc,0))}}});var Ii=w(jr=>{"use strict";var vg=at().fromCallback,lt=Xe(),iR=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof lt[t]=="function");Object.assign(jr,lt);iR.forEach(t=>{jr[t]=vg(lt[t])});jr.exists=function(t,e){return typeof e=="function"?lt.exists(t,e):new Promise(r=>lt.exists(t,r))};jr.read=function(t,e,r,i,n,s){return typeof s=="function"?lt.read(t,e,r,i,n,s):new Promise((o,a)=>{lt.read(t,e,r,i,n,(l,u,c)=>{if(l)return a(l);o({bytesRead:u,buffer:c})})})};jr.write=function(t,e,...r){return typeof r[r.length-1]=="function"?lt.write(t,e,...r):new Promise((i,n)=>{lt.write(t,e,...r,(s,o,a)=>{if(s)return n(s);i({bytesWritten:o,buffer:a})})})};typeof lt.writev=="function"&&(jr.writev=function(t,e,...r){return typeof r[r.length-1]=="function"?lt.writev(t,e,...r):new Promise((i,n)=>{lt.writev(t,e,...r,(s,o,a)=>{if(s)return n(s);i({bytesWritten:o,buffers:a})})})});typeof lt.realpath.native=="function"?jr.realpath.native=vg(lt.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Tg=w((vB,Og)=>{"use strict";var nR=require("path");Og.exports.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(nR.parse(e).root,""))){let i=new Error("Path contains invalid characters: ".concat(e));throw i.code="EINVAL",i}}});var Ng=w((OB,Bc)=>{"use strict";var Cg=Ii(),{checkPath:Rg}=Tg(),Ig=t=>{let e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};Bc.exports.makeDir=async(t,e)=>(Rg(t),Cg.mkdir(t,{mode:Ig(e),recursive:!0}));Bc.exports.makeDirSync=(t,e)=>(Rg(t),Cg.mkdirSync(t,{mode:Ig(e),recursive:!0}))});var Bt=w((TB,xg)=>{"use strict";var sR=at().fromPromise,{makeDir:oR,makeDirSync:jc}=Ng(),Hc=sR(oR);xg.exports={mkdirs:Hc,mkdirsSync:jc,mkdirp:Hc,mkdirpSync:jc,ensureDir:Hc,ensureDirSync:jc}});var Hr=w((CB,Pg)=>{"use strict";var aR=at().fromPromise,Dg=Ii();function lR(t){return Dg.access(t).then(()=>!0).catch(()=>!1)}Pg.exports={pathExists:aR(lR),pathExistsSync:Dg.existsSync}});var Wc=w((RB,Fg)=>{"use strict";var In=Xe();function uR(t,e,r,i){In.open(t,"r+",(n,s)=>{if(n)return i(n);In.futimes(s,e,r,o=>{In.close(s,a=>{i&&i(o||a)})})})}function cR(t,e,r){let i=In.openSync(t,"r+");return In.futimesSync(i,e,r),In.closeSync(i)}Fg.exports={utimesMillis:uR,utimesMillisSync:cR}});var Ni=w((IB,kg)=>{"use strict";var Nn=Ii(),Ne=require("path"),hR=require("util");function fR(t,e,r){let i=r.dereference?n=>Nn.stat(n,{bigint:!0}):n=>Nn.lstat(n,{bigint:!0});return Promise.all([i(t),i(e).catch(n=>{if(n.code==="ENOENT")return null;throw n})]).then(([n,s])=>({srcStat:n,destStat:s}))}function dR(t,e,r){let i,n=r.dereference?o=>Nn.statSync(o,{bigint:!0}):o=>Nn.lstatSync(o,{bigint:!0}),s=n(t);try{i=n(e)}catch(o){if(o.code==="ENOENT")return{srcStat:s,destStat:null};throw o}return{srcStat:s,destStat:i}}function pR(t,e,r,i,n){hR.callbackify(fR)(t,e,i,(s,o)=>{if(s)return n(s);let{srcStat:a,destStat:l}=o;if(l){if(Ys(a,l)){let u=Ne.basename(t),c=Ne.basename(e);return r==="move"&&u!==c&&u.toLowerCase()===c.toLowerCase()?n(null,{srcStat:a,destStat:l,isChangingCase:!0}):n(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!l.isDirectory())return n(new Error("Cannot overwrite non-directory '".concat(e,"' with directory '").concat(t,"'.")));if(!a.isDirectory()&&l.isDirectory())return n(new Error("Cannot overwrite directory '".concat(e,"' with non-directory '").concat(t,"'.")))}return a.isDirectory()&&Gc(t,e)?n(new Error(Ra(t,e,r))):n(null,{srcStat:a,destStat:l})})}function mR(t,e,r,i){let{srcStat:n,destStat:s}=dR(t,e,i);if(s){if(Ys(n,s)){let o=Ne.basename(t),a=Ne.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error("Cannot overwrite non-directory '".concat(e,"' with directory '").concat(t,"'."));if(!n.isDirectory()&&s.isDirectory())throw new Error("Cannot overwrite directory '".concat(e,"' with non-directory '").concat(t,"'."))}if(n.isDirectory()&&Gc(t,e))throw new Error(Ra(t,e,r));return{srcStat:n,destStat:s}}function Lg(t,e,r,i,n){let s=Ne.resolve(Ne.dirname(t)),o=Ne.resolve(Ne.dirname(r));if(o===s||o===Ne.parse(o).root)return n();Nn.stat(o,{bigint:!0},(a,l)=>a?a.code==="ENOENT"?n():n(a):Ys(e,l)?n(new Error(Ra(t,r,i))):Lg(t,e,o,i,n))}function $g(t,e,r,i){let n=Ne.resolve(Ne.dirname(t)),s=Ne.resolve(Ne.dirname(r));if(s===n||s===Ne.parse(s).root)return;let o;try{o=Nn.statSync(s,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Ys(e,o))throw new Error(Ra(t,r,i));return $g(t,e,s,i)}function Ys(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function Gc(t,e){let r=Ne.resolve(t).split(Ne.sep).filter(n=>n),i=Ne.resolve(e).split(Ne.sep).filter(n=>n);return r.reduce((n,s,o)=>n&&i[o]===s,!0)}function Ra(t,e,r){return"Cannot ".concat(r," '").concat(t,"' to a subdirectory of itself, '").concat(e,"'.")}kg.exports={checkPaths:pR,checkPathsSync:mR,checkParentPaths:Lg,checkParentPathsSync:$g,isSrcSubdir:Gc,areIdentical:Ys}});var Gg=w((NB,Wg)=>{"use strict";var ut=Xe(),Qs=require("path"),gR=Bt().mkdirs,yR=Hr().pathExists,wR=Wc().utimesMillis,Xs=Ni();function AR(t,e,r,i){typeof r=="function"&&!i?(i=r,r={}):typeof r=="function"&&(r={filter:r}),i=i||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n	see https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001"),Xs.checkPaths(t,e,"copy",r,(n,s)=>{if(n)return i(n);let{srcStat:o,destStat:a}=s;Xs.checkParentPaths(t,o,e,"copy",l=>l?i(l):r.filter?Ug(qg,a,t,e,r,i):qg(a,t,e,r,i))})}function qg(t,e,r,i,n){let s=Qs.dirname(r);yR(s,(o,a)=>{if(o)return n(o);if(a)return Ia(t,e,r,i,n);gR(s,l=>l?n(l):Ia(t,e,r,i,n))})}function Ug(t,e,r,i,n,s){Promise.resolve(n.filter(r,i)).then(o=>o?t(e,r,i,n,s):s(),o=>s(o))}function ER(t,e,r,i,n){return i.filter?Ug(Ia,t,e,r,i,n):Ia(t,e,r,i,n)}function Ia(t,e,r,i,n){(i.dereference?ut.stat:ut.lstat)(e,(o,a)=>o?n(o):a.isDirectory()?CR(a,t,e,r,i,n):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?SR(a,t,e,r,i,n):a.isSymbolicLink()?NR(t,e,r,i,n):a.isSocket()?n(new Error("Cannot copy a socket file: ".concat(e))):a.isFIFO()?n(new Error("Cannot copy a FIFO pipe: ".concat(e))):n(new Error("Unknown file: ".concat(e))))}function SR(t,e,r,i,n,s){return e?bR(t,r,i,n,s):Bg(t,r,i,n,s)}function bR(t,e,r,i,n){if(i.overwrite)ut.unlink(r,s=>s?n(s):Bg(t,e,r,i,n));else return i.errorOnExist?n(new Error("'".concat(r,"' already exists"))):n()}function Bg(t,e,r,i,n){ut.copyFile(e,r,s=>s?n(s):i.preserveTimestamps?_R(t.mode,e,r,n):Na(r,t.mode,n))}function _R(t,e,r,i){return vR(t)?OR(r,t,n=>n?i(n):Mg(t,e,r,i)):Mg(t,e,r,i)}function vR(t){return(t&128)===0}function OR(t,e,r){return Na(t,e|128,r)}function Mg(t,e,r,i){TR(e,r,n=>n?i(n):Na(r,t,i))}function Na(t,e,r){return ut.chmod(t,e,r)}function TR(t,e,r){ut.stat(t,(i,n)=>i?r(i):wR(e,n.atime,n.mtime,r))}function CR(t,e,r,i,n,s){return e?jg(r,i,n,s):RR(t.mode,r,i,n,s)}function RR(t,e,r,i,n){ut.mkdir(r,s=>{if(s)return n(s);jg(e,r,i,o=>o?n(o):Na(r,t,n))})}function jg(t,e,r,i){ut.readdir(t,(n,s)=>n?i(n):Hg(s,t,e,r,i))}function Hg(t,e,r,i,n){let s=t.pop();return s?IR(t,s,e,r,i,n):n()}function IR(t,e,r,i,n,s){let o=Qs.join(r,e),a=Qs.join(i,e);Xs.checkPaths(o,a,"copy",n,(l,u)=>{if(l)return s(l);let{destStat:c}=u;ER(c,o,a,n,h=>h?s(h):Hg(t,r,i,n,s))})}function NR(t,e,r,i,n){ut.readlink(e,(s,o)=>{if(s)return n(s);if(i.dereference&&(o=Qs.resolve(process.cwd(),o)),t)ut.readlink(r,(a,l)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?ut.symlink(o,r,n):n(a):(i.dereference&&(l=Qs.resolve(process.cwd(),l)),Xs.isSrcSubdir(o,l)?n(new Error("Cannot copy '".concat(o,"' to a subdirectory of itself, '").concat(l,"'."))):t.isDirectory()&&Xs.isSrcSubdir(l,o)?n(new Error("Cannot overwrite '".concat(l,"' with '").concat(o,"'."))):xR(o,r,n)));else return ut.symlink(o,r,n)})}function xR(t,e,r){ut.unlink(e,i=>i?r(i):ut.symlink(t,e,r))}Wg.exports=AR});var Xg=w((xB,Qg)=>{"use strict";var Ue=Xe(),Ks=require("path"),DR=Bt().mkdirsSync,PR=Wc().utimesMillisSync,Js=Ni();function FR(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n	see https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");let{srcStat:i,destStat:n}=Js.checkPathsSync(t,e,"copy",r);return Js.checkParentPathsSync(t,i,e,"copy"),LR(n,t,e,r)}function LR(t,e,r,i){if(i.filter&&!i.filter(e,r))return;let n=Ks.dirname(r);return Ue.existsSync(n)||DR(n),zg(t,e,r,i)}function $R(t,e,r,i){if(!(i.filter&&!i.filter(e,r)))return zg(t,e,r,i)}function zg(t,e,r,i){let s=(i.dereference?Ue.statSync:Ue.lstatSync)(e);if(s.isDirectory())return HR(s,t,e,r,i);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return kR(s,t,e,r,i);if(s.isSymbolicLink())return zR(t,e,r,i);throw s.isSocket()?new Error("Cannot copy a socket file: ".concat(e)):s.isFIFO()?new Error("Cannot copy a FIFO pipe: ".concat(e)):new Error("Unknown file: ".concat(e))}function kR(t,e,r,i,n){return e?qR(t,r,i,n):Vg(t,r,i,n)}function qR(t,e,r,i){if(i.overwrite)return Ue.unlinkSync(r),Vg(t,e,r,i);if(i.errorOnExist)throw new Error("'".concat(r,"' already exists"))}function Vg(t,e,r,i){return Ue.copyFileSync(e,r),i.preserveTimestamps&&MR(t.mode,e,r),zc(r,t.mode)}function MR(t,e,r){return UR(t)&&BR(r,t),jR(e,r)}function UR(t){return(t&128)===0}function BR(t,e){return zc(t,e|128)}function zc(t,e){return Ue.chmodSync(t,e)}function jR(t,e){let r=Ue.statSync(t);return PR(e,r.atime,r.mtime)}function HR(t,e,r,i,n){return e?Yg(r,i,n):WR(t.mode,r,i,n)}function WR(t,e,r,i){return Ue.mkdirSync(r),Yg(e,r,i),zc(r,t)}function Yg(t,e,r){Ue.readdirSync(t).forEach(i=>GR(i,t,e,r))}function GR(t,e,r,i){let n=Ks.join(e,t),s=Ks.join(r,t),{destStat:o}=Js.checkPathsSync(n,s,"copy",i);return $R(o,n,s,i)}function zR(t,e,r,i){let n=Ue.readlinkSync(e);if(i.dereference&&(n=Ks.resolve(process.cwd(),n)),t){let s;try{s=Ue.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return Ue.symlinkSync(n,r);throw o}if(i.dereference&&(s=Ks.resolve(process.cwd(),s)),Js.isSrcSubdir(n,s))throw new Error("Cannot copy '".concat(n,"' to a subdirectory of itself, '").concat(s,"'."));if(Ue.statSync(r).isDirectory()&&Js.isSrcSubdir(s,n))throw new Error("Cannot overwrite '".concat(s,"' with '").concat(n,"'."));return VR(n,r)}else return Ue.symlinkSync(n,r)}function VR(t,e){return Ue.unlinkSync(e),Ue.symlinkSync(t,e)}Qg.exports=FR});var xa=w((DB,Kg)=>{"use strict";var YR=at().fromCallback;Kg.exports={copy:YR(Gg()),copySync:Xg()}});var oy=w((PB,sy)=>{"use strict";var Jg=Xe(),ry=require("path"),se=require("assert"),Zs=process.platform==="win32";function iy(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{t[r]=t[r]||Jg[r],r=r+"Sync",t[r]=t[r]||Jg[r]}),t.maxBusyTries=t.maxBusyTries||3}function Vc(t,e,r){let i=0;typeof e=="function"&&(r=e,e={}),se(t,"rimraf: missing path"),se.strictEqual(typeof t,"string","rimraf: path should be a string"),se.strictEqual(typeof r,"function","rimraf: callback function required"),se(e,"rimraf: invalid options argument provided"),se.strictEqual(typeof e,"object","rimraf: options should be object"),iy(e),Zg(t,e,function n(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&i<e.maxBusyTries){i++;let o=i*100;return setTimeout(()=>Zg(t,e,n),o)}s.code==="ENOENT"&&(s=null)}r(s)})}function Zg(t,e,r){se(t),se(e),se(typeof r=="function"),e.lstat(t,(i,n)=>{if(i&&i.code==="ENOENT")return r(null);if(i&&i.code==="EPERM"&&Zs)return ey(t,e,i,r);if(n&&n.isDirectory())return Da(t,e,i,r);e.unlink(t,s=>{if(s){if(s.code==="ENOENT")return r(null);if(s.code==="EPERM")return Zs?ey(t,e,s,r):Da(t,e,s,r);if(s.code==="EISDIR")return Da(t,e,s,r)}return r(s)})})}function ey(t,e,r,i){se(t),se(e),se(typeof i=="function"),e.chmod(t,438,n=>{n?i(n.code==="ENOENT"?null:r):e.stat(t,(s,o)=>{s?i(s.code==="ENOENT"?null:r):o.isDirectory()?Da(t,e,r,i):e.unlink(t,i)})})}function ty(t,e,r){let i;se(t),se(e);try{e.chmodSync(t,438)}catch(n){if(n.code==="ENOENT")return;throw r}try{i=e.statSync(t)}catch(n){if(n.code==="ENOENT")return;throw r}i.isDirectory()?Pa(t,e,r):e.unlinkSync(t)}function Da(t,e,r,i){se(t),se(e),se(typeof i=="function"),e.rmdir(t,n=>{n&&(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")?QR(t,e,i):n&&n.code==="ENOTDIR"?i(r):i(n)})}function QR(t,e,r){se(t),se(e),se(typeof r=="function"),e.readdir(t,(i,n)=>{if(i)return r(i);let s=n.length,o;if(s===0)return e.rmdir(t,r);n.forEach(a=>{Vc(ry.join(t,a),e,l=>{if(!o){if(l)return r(o=l);--s===0&&e.rmdir(t,r)}})})})}function ny(t,e){let r;e=e||{},iy(e),se(t,"rimraf: missing path"),se.strictEqual(typeof t,"string","rimraf: path should be a string"),se(e,"rimraf: missing options"),se.strictEqual(typeof e,"object","rimraf: options should be object");try{r=e.lstatSync(t)}catch(i){if(i.code==="ENOENT")return;i.code==="EPERM"&&Zs&&ty(t,e,i)}try{r&&r.isDirectory()?Pa(t,e,null):e.unlinkSync(t)}catch(i){if(i.code==="ENOENT")return;if(i.code==="EPERM")return Zs?ty(t,e,i):Pa(t,e,i);if(i.code!=="EISDIR")throw i;Pa(t,e,i)}}function Pa(t,e,r){se(t),se(e);try{e.rmdirSync(t)}catch(i){if(i.code==="ENOTDIR")throw r;if(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")XR(t,e);else if(i.code!=="ENOENT")throw i}}function XR(t,e){if(se(t),se(e),e.readdirSync(t).forEach(r=>ny(ry.join(t,r),e)),Zs){let r=Date.now();do try{return e.rmdirSync(t,e)}catch{}while(Date.now()-r<500)}else return e.rmdirSync(t,e)}sy.exports=Vc;Vc.sync=ny});var eo=w((FB,ly)=>{"use strict";var Fa=Xe(),KR=at().fromCallback,ay=oy();function JR(t,e){if(Fa.rm)return Fa.rm(t,{recursive:!0,force:!0},e);ay(t,e)}function ZR(t){if(Fa.rmSync)return Fa.rmSync(t,{recursive:!0,force:!0});ay.sync(t)}ly.exports={remove:KR(JR),removeSync:ZR}});var gy=w((LB,my)=>{"use strict";var eI=at().fromPromise,hy=Ii(),fy=require("path"),dy=Bt(),py=eo(),uy=eI(async function(e){let r;try{r=await hy.readdir(e)}catch{return dy.mkdirs(e)}return Promise.all(r.map(i=>py.remove(fy.join(e,i))))});function cy(t){let e;try{e=hy.readdirSync(t)}catch{return dy.mkdirsSync(t)}e.forEach(r=>{r=fy.join(t,r),py.removeSync(r)})}my.exports={emptyDirSync:cy,emptydirSync:cy,emptyDir:uy,emptydir:uy}});var Ey=w(($B,Ay)=>{"use strict";var tI=at().fromCallback,yy=require("path"),Wr=Xe(),wy=Bt();function rI(t,e){function r(){Wr.writeFile(t,"",i=>{if(i)return e(i);e()})}Wr.stat(t,(i,n)=>{if(!i&&n.isFile())return e();let s=yy.dirname(t);Wr.stat(s,(o,a)=>{if(o)return o.code==="ENOENT"?wy.mkdirs(s,l=>{if(l)return e(l);r()}):e(o);a.isDirectory()?r():Wr.readdir(s,l=>{if(l)return e(l)})})})}function iI(t){let e;try{e=Wr.statSync(t)}catch{}if(e&&e.isFile())return;let r=yy.dirname(t);try{Wr.statSync(r).isDirectory()||Wr.readdirSync(r)}catch(i){if(i&&i.code==="ENOENT")wy.mkdirsSync(r);else throw i}Wr.writeFileSync(t,"")}Ay.exports={createFile:tI(rI),createFileSync:iI}});var Oy=w((kB,vy)=>{"use strict";var nI=at().fromCallback,Sy=require("path"),Gr=Xe(),by=Bt(),sI=Hr().pathExists,{areIdentical:_y}=Ni();function oI(t,e,r){function i(n,s){Gr.link(n,s,o=>{if(o)return r(o);r(null)})}Gr.lstat(e,(n,s)=>{Gr.lstat(t,(o,a)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),r(o);if(s&&_y(a,s))return r(null);let l=Sy.dirname(e);sI(l,(u,c)=>{if(u)return r(u);if(c)return i(t,e);by.mkdirs(l,h=>{if(h)return r(h);i(t,e)})})})})}function aI(t,e){let r;try{r=Gr.lstatSync(e)}catch{}try{let s=Gr.lstatSync(t);if(r&&_y(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let i=Sy.dirname(e);return Gr.existsSync(i)||by.mkdirsSync(i),Gr.linkSync(t,e)}vy.exports={createLink:nI(oI),createLinkSync:aI}});var Cy=w((qB,Ty)=>{"use strict";var zr=require("path"),to=Xe(),lI=Hr().pathExists;function uI(t,e,r){if(zr.isAbsolute(t))return to.lstat(t,i=>i?(i.message=i.message.replace("lstat","ensureSymlink"),r(i)):r(null,{toCwd:t,toDst:t}));{let i=zr.dirname(e),n=zr.join(i,t);return lI(n,(s,o)=>s?r(s):o?r(null,{toCwd:n,toDst:t}):to.lstat(t,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:t,toDst:zr.relative(i,t)})))}}function cI(t,e){let r;if(zr.isAbsolute(t)){if(r=to.existsSync(t),!r)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}else{let i=zr.dirname(e),n=zr.join(i,t);if(r=to.existsSync(n),r)return{toCwd:n,toDst:t};if(r=to.existsSync(t),!r)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:zr.relative(i,t)}}}Ty.exports={symlinkPaths:uI,symlinkPathsSync:cI}});var Ny=w((MB,Iy)=>{"use strict";var Ry=Xe();function hI(t,e,r){if(r=typeof e=="function"?e:r,e=typeof e=="function"?!1:e,e)return r(null,e);Ry.lstat(t,(i,n)=>{if(i)return r(null,"file");e=n&&n.isDirectory()?"dir":"file",r(null,e)})}function fI(t,e){let r;if(e)return e;try{r=Ry.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}Iy.exports={symlinkType:hI,symlinkTypeSync:fI}});var qy=w((UB,ky)=>{"use strict";var dI=at().fromCallback,Dy=require("path"),jt=Ii(),Py=Bt(),pI=Py.mkdirs,mI=Py.mkdirsSync,Fy=Cy(),gI=Fy.symlinkPaths,yI=Fy.symlinkPathsSync,Ly=Ny(),wI=Ly.symlinkType,AI=Ly.symlinkTypeSync,EI=Hr().pathExists,{areIdentical:$y}=Ni();function SI(t,e,r,i){i=typeof r=="function"?r:i,r=typeof r=="function"?!1:r,jt.lstat(e,(n,s)=>{!n&&s.isSymbolicLink()?Promise.all([jt.stat(t),jt.stat(e)]).then(([o,a])=>{if($y(o,a))return i(null);xy(t,e,r,i)}):xy(t,e,r,i)})}function xy(t,e,r,i){gI(t,e,(n,s)=>{if(n)return i(n);t=s.toDst,wI(s.toCwd,r,(o,a)=>{if(o)return i(o);let l=Dy.dirname(e);EI(l,(u,c)=>{if(u)return i(u);if(c)return jt.symlink(t,e,a,i);pI(l,h=>{if(h)return i(h);jt.symlink(t,e,a,i)})})})})}function bI(t,e,r){let i;try{i=jt.lstatSync(e)}catch{}if(i&&i.isSymbolicLink()){let a=jt.statSync(t),l=jt.statSync(e);if($y(a,l))return}let n=yI(t,e);t=n.toDst,r=AI(n.toCwd,r);let s=Dy.dirname(e);return jt.existsSync(s)||mI(s),jt.symlinkSync(t,e,r)}ky.exports={createSymlink:dI(SI),createSymlinkSync:bI}});var zy=w((BB,Gy)=>{"use strict";var{createFile:My,createFileSync:Uy}=Ey(),{createLink:By,createLinkSync:jy}=Oy(),{createSymlink:Hy,createSymlinkSync:Wy}=qy();Gy.exports={createFile:My,createFileSync:Uy,ensureFile:My,ensureFileSync:Uy,createLink:By,createLinkSync:jy,ensureLink:By,ensureLinkSync:jy,createSymlink:Hy,createSymlinkSync:Wy,ensureSymlink:Hy,ensureSymlinkSync:Wy}});var La=w((jB,Vy)=>{function _I(t,{EOL:e="\n",finalEOL:r=!0,replacer:i=null,spaces:n}={}){let s=r?e:"";return JSON.stringify(t,i,n).replace(/\n/g,e)+s}function vI(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}Vy.exports={stringify:_I,stripBom:vI}});var Ky=w((HB,Xy)=>{var xn;try{xn=Xe()}catch{xn=require("fs")}var $a=at(),{stringify:Yy,stripBom:Qy}=La();async function OI(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||xn,i="throws"in e?e.throws:!0,n=await $a.fromCallback(r.readFile)(t,e);n=Qy(n);let s;try{s=JSON.parse(n,e?e.reviver:null)}catch(o){if(i)throw o.message="".concat(t,": ").concat(o.message),o;return null}return s}var TI=$a.fromPromise(OI);function CI(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||xn,i="throws"in e?e.throws:!0;try{let n=r.readFileSync(t,e);return n=Qy(n),JSON.parse(n,e.reviver)}catch(n){if(i)throw n.message="".concat(t,": ").concat(n.message),n;return null}}async function RI(t,e,r={}){let i=r.fs||xn,n=Yy(e,r);await $a.fromCallback(i.writeFile)(t,n,r)}var II=$a.fromPromise(RI);function NI(t,e,r={}){let i=r.fs||xn,n=Yy(e,r);return i.writeFileSync(t,n,r)}var xI={readFile:TI,readFileSync:CI,writeFile:II,writeFileSync:NI};Xy.exports=xI});var Zy=w((WB,Jy)=>{"use strict";var ka=Ky();Jy.exports={readJson:ka.readFile,readJsonSync:ka.readFileSync,writeJson:ka.writeFile,writeJsonSync:ka.writeFileSync}});var qa=w((GB,rw)=>{"use strict";var DI=at().fromCallback,ro=Xe(),ew=require("path"),tw=Bt(),PI=Hr().pathExists;function FI(t,e,r,i){typeof r=="function"&&(i=r,r="utf8");let n=ew.dirname(t);PI(n,(s,o)=>{if(s)return i(s);if(o)return ro.writeFile(t,e,r,i);tw.mkdirs(n,a=>{if(a)return i(a);ro.writeFile(t,e,r,i)})})}function LI(t,...e){let r=ew.dirname(t);if(ro.existsSync(r))return ro.writeFileSync(t,...e);tw.mkdirsSync(r),ro.writeFileSync(t,...e)}rw.exports={outputFile:DI(FI),outputFileSync:LI}});var nw=w((zB,iw)=>{"use strict";var{stringify:$I}=La(),{outputFile:kI}=qa();async function qI(t,e,r={}){let i=$I(e,r);await kI(t,i,r)}iw.exports=qI});var ow=w((VB,sw)=>{"use strict";var{stringify:MI}=La(),{outputFileSync:UI}=qa();function BI(t,e,r){let i=MI(e,r);UI(t,i,r)}sw.exports=BI});var lw=w((YB,aw)=>{"use strict";var jI=at().fromPromise,Ke=Zy();Ke.outputJson=jI(nw());Ke.outputJsonSync=ow();Ke.outputJSON=Ke.outputJson;Ke.outputJSONSync=Ke.outputJsonSync;Ke.writeJSON=Ke.writeJson;Ke.writeJSONSync=Ke.writeJsonSync;Ke.readJSON=Ke.readJson;Ke.readJSONSync=Ke.readJsonSync;aw.exports=Ke});var dw=w((QB,fw)=>{"use strict";var HI=Xe(),Qc=require("path"),WI=xa().copy,hw=eo().remove,GI=Bt().mkdirp,zI=Hr().pathExists,uw=Ni();function VI(t,e,r,i){typeof r=="function"&&(i=r,r={}),r=r||{};let n=r.overwrite||r.clobber||!1;uw.checkPaths(t,e,"move",r,(s,o)=>{if(s)return i(s);let{srcStat:a,isChangingCase:l=!1}=o;uw.checkParentPaths(t,a,e,"move",u=>{if(u)return i(u);if(YI(e))return cw(t,e,n,l,i);GI(Qc.dirname(e),c=>c?i(c):cw(t,e,n,l,i))})})}function YI(t){let e=Qc.dirname(t);return Qc.parse(e).root===e}function cw(t,e,r,i,n){if(i)return Yc(t,e,r,n);if(r)return hw(e,s=>s?n(s):Yc(t,e,r,n));zI(e,(s,o)=>s?n(s):o?n(new Error("dest already exists.")):Yc(t,e,r,n))}function Yc(t,e,r,i){HI.rename(t,e,n=>n?n.code!=="EXDEV"?i(n):QI(t,e,r,i):i())}function QI(t,e,r,i){WI(t,e,{overwrite:r,errorOnExist:!0},s=>s?i(s):hw(t,i))}fw.exports=VI});var ww=w((XB,yw)=>{"use strict";var mw=Xe(),Kc=require("path"),XI=xa().copySync,gw=eo().removeSync,KI=Bt().mkdirpSync,pw=Ni();function JI(t,e,r){r=r||{};let i=r.overwrite||r.clobber||!1,{srcStat:n,isChangingCase:s=!1}=pw.checkPathsSync(t,e,"move",r);return pw.checkParentPathsSync(t,n,e,"move"),ZI(e)||KI(Kc.dirname(e)),eN(t,e,i,s)}function ZI(t){let e=Kc.dirname(t);return Kc.parse(e).root===e}function eN(t,e,r,i){if(i)return Xc(t,e,r);if(r)return gw(e),Xc(t,e,r);if(mw.existsSync(e))throw new Error("dest already exists.");return Xc(t,e,r)}function Xc(t,e,r){try{mw.renameSync(t,e)}catch(i){if(i.code!=="EXDEV")throw i;return tN(t,e,r)}}function tN(t,e,r){return XI(t,e,{overwrite:r,errorOnExist:!0}),gw(t)}yw.exports=JI});var Ew=w((KB,Aw)=>{"use strict";var rN=at().fromCallback;Aw.exports={move:rN(dw()),moveSync:ww()}});var hr=w((JB,Sw)=>{"use strict";Sw.exports={...Ii(),...xa(),...gy(),...zy(),...lw(),...Bt(),...Ew(),...qa(),...Hr(),...eo()}});var Dn=w((ZB,xi)=>{"use strict";function bw(t){return typeof t>"u"||t===null}function iN(t){return typeof t=="object"&&t!==null}function nN(t){return Array.isArray(t)?t:bw(t)?[]:[t]}function sN(t,e){var r,i,n,s;if(e)for(s=Object.keys(e),r=0,i=s.length;r<i;r+=1)n=s[r],t[n]=e[n];return t}function oN(t,e){var r="",i;for(i=0;i<e;i+=1)r+=t;return r}function aN(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}xi.exports.isNothing=bw;xi.exports.isObject=iN;xi.exports.toArray=nN;xi.exports.repeat=oN;xi.exports.isNegativeZero=aN;xi.exports.extend=sN});var Pn=w((ej,vw)=>{"use strict";function _w(t,e){var r="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+="\n\n"+t.mark.snippet),i+" "+r):i}function io(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=_w(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}io.prototype=Object.create(Error.prototype);io.prototype.constructor=io;io.prototype.toString=function(e){return this.name+": "+_w(this,e)};vw.exports=io});var Tw=w((tj,Ow)=>{"use strict";var no=Dn();function Jc(t,e,r,i,n){var s="",o="",a=Math.floor(n/2)-1;return i-e>a&&(s=" ... ",e=i-a+s.length),r-i>a&&(o=" ...",r=i+a-o.length),{str:s+t.slice(e,r).replace(/\t/g,"\u2192")+o,pos:i-e+s.length}}function Zc(t,e){return no.repeat(" ",e-t.length)+t}function lN(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],n=[],s,o=-1;s=r.exec(t.buffer);)n.push(s.index),i.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var a="",l,u,c=Math.min(t.line+e.linesAfter,n.length).toString().length,h=e.maxLength-(e.indent+c+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)u=Jc(t.buffer,i[o-l],n[o-l],t.position-(i[o]-i[o-l]),h),a=no.repeat(" ",e.indent)+Zc((t.line-l+1).toString(),c)+" | "+u.str+"\n"+a;for(u=Jc(t.buffer,i[o],n[o],t.position,h),a+=no.repeat(" ",e.indent)+Zc((t.line+1).toString(),c)+" | "+u.str+"\n",a+=no.repeat("-",e.indent+c+3+u.pos)+"^\n",l=1;l<=e.linesAfter&&!(o+l>=n.length);l++)u=Jc(t.buffer,i[o+l],n[o+l],t.position-(i[o]-i[o+l]),h),a+=no.repeat(" ",e.indent)+Zc((t.line+l+1).toString(),c)+" | "+u.str+"\n";return a.replace(/\n$/,"")}Ow.exports=lN});var Be=w((rj,Rw)=>{"use strict";var Cw=Pn(),uN=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],cN=["scalar","sequence","mapping"];function hN(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(i){e[String(i)]=r})}),e}function fN(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(uN.indexOf(r)===-1)throw new Cw('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=hN(e.styleAliases||null),cN.indexOf(this.kind)===-1)throw new Cw('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}Rw.exports=fN});var rh=w((ij,Nw)=>{"use strict";var so=Pn(),eh=Be();function Iw(t,e){var r=[];return t[e].forEach(function(i){var n=r.length;r.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(n=o)}),r[n]=i}),r}function dN(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function i(n){n.multi?(t.multi[n.kind].push(n),t.multi.fallback.push(n)):t[n.kind][n.tag]=t.fallback[n.tag]=n}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(i);return t}function th(t){return this.extend(t)}th.prototype.extend=function(e){var r=[],i=[];if(e instanceof eh)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new so("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof eh))throw new so("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new so("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new so("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof eh))throw new so("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(th.prototype);return n.implicit=(this.implicit||[]).concat(r),n.explicit=(this.explicit||[]).concat(i),n.compiledImplicit=Iw(n,"implicit"),n.compiledExplicit=Iw(n,"explicit"),n.compiledTypeMap=dN(n.compiledImplicit,n.compiledExplicit),n};Nw.exports=th});var ih=w((nj,xw)=>{"use strict";var pN=Be();xw.exports=new pN("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}})});var nh=w((sj,Dw)=>{"use strict";var mN=Be();Dw.exports=new mN("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}})});var sh=w((oj,Pw)=>{"use strict";var gN=Be();Pw.exports=new gN("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}})});var oh=w((aj,Fw)=>{"use strict";var yN=rh();Fw.exports=new yN({explicit:[ih(),nh(),sh()]})});var ah=w((lj,Lw)=>{"use strict";var wN=Be();function AN(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function EN(){return null}function SN(t){return t===null}Lw.exports=new wN("tag:yaml.org,2002:null",{kind:"scalar",resolve:AN,construct:EN,predicate:SN,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})});var lh=w((uj,$w)=>{"use strict";var bN=Be();function _N(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function vN(t){return t==="true"||t==="True"||t==="TRUE"}function ON(t){return Object.prototype.toString.call(t)==="[object Boolean]"}$w.exports=new bN("tag:yaml.org,2002:bool",{kind:"scalar",resolve:_N,construct:vN,predicate:ON,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"})});var uh=w((cj,kw)=>{"use strict";var TN=Dn(),CN=Be();function RN(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function IN(t){return 48<=t&&t<=55}function NN(t){return 48<=t&&t<=57}function xN(t){if(t===null)return!1;var e=t.length,r=0,i=!1,n;if(!e)return!1;if(n=t[r],(n==="-"||n==="+")&&(n=t[++r]),n==="0"){if(r+1===e)return!0;if(n=t[++r],n==="b"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(!RN(t.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}if(n==="o"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(!IN(t.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}}if(n==="_")return!1;for(;r<e;r++)if(n=t[r],n!=="_"){if(!NN(t.charCodeAt(r)))return!1;i=!0}return!(!i||n==="_")}function DN(t){var e=t,r=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function PN(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!TN.isNegativeZero(t)}kw.exports=new CN("tag:yaml.org,2002:int",{kind:"scalar",resolve:xN,construct:DN,predicate:PN,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var ch=w((hj,Mw)=>{"use strict";var qw=Dn(),FN=Be(),LN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function $N(t){return!(t===null||!LN.test(t)||t[t.length-1]==="_")}function kN(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var qN=/^[-+]?[0-9]+e/;function MN(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(qw.isNegativeZero(t))return"-0.0";return r=t.toString(10),qN.test(r)?r.replace("e",".e"):r}function UN(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||qw.isNegativeZero(t))}Mw.exports=new FN("tag:yaml.org,2002:float",{kind:"scalar",resolve:$N,construct:kN,predicate:UN,represent:MN,defaultStyle:"lowercase"})});var hh=w((fj,Uw)=>{"use strict";Uw.exports=oh().extend({implicit:[ah(),lh(),uh(),ch()]})});var fh=w((dj,Bw)=>{"use strict";Bw.exports=hh()});var dh=w((pj,Ww)=>{"use strict";var BN=Be(),jw=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Hw=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function jN(t){return t===null?!1:jw.exec(t)!==null||Hw.exec(t)!==null}function HN(t){var e,r,i,n,s,o,a,l=0,u=null,c,h,f;if(e=jw.exec(t),e===null&&(e=Hw.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],i=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(r,i,n));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(c=+e[10],h=+(e[11]||0),u=(c*60+h)*6e4,e[9]==="-"&&(u=-u)),f=new Date(Date.UTC(r,i,n,s,o,a,l)),u&&f.setTime(f.getTime()-u),f}function WN(t){return t.toISOString()}Ww.exports=new BN("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:jN,construct:HN,instanceOf:Date,represent:WN})});var ph=w((mj,Gw)=>{"use strict";var GN=Be();function zN(t){return t==="<<"||t===null}Gw.exports=new GN("tag:yaml.org,2002:merge",{kind:"scalar",resolve:zN})});var gh=w((gj,zw)=>{"use strict";var VN=Be(),mh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function YN(t){if(t===null)return!1;var e,r,i=0,n=t.length,s=mh;for(r=0;r<n;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function QN(t){var e,r,i=t.replace(/[\r\n=]/g,""),n=i.length,s=mh,o=0,a=[];for(e=0;e<n;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(i.charAt(e));return r=n%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function XN(t){var e="",r=0,i,n,s=t.length,o=mh;for(i=0;i<s;i++)i%3===0&&i&&(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]),r=(r<<8)+t[i];return n=s%3,n===0?(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]):n===2?(e+=o[r>>10&63],e+=o[r>>4&63],e+=o[r<<2&63],e+=o[64]):n===1&&(e+=o[r>>2&63],e+=o[r<<4&63],e+=o[64],e+=o[64]),e}function KN(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}zw.exports=new VN("tag:yaml.org,2002:binary",{kind:"scalar",resolve:YN,construct:QN,predicate:KN,represent:XN})});var yh=w((yj,Vw)=>{"use strict";var JN=Be(),ZN=Object.prototype.hasOwnProperty,ex=Object.prototype.toString;function tx(t){if(t===null)return!0;var e=[],r,i,n,s,o,a=t;for(r=0,i=a.length;r<i;r+=1){if(n=a[r],o=!1,ex.call(n)!=="[object Object]")return!1;for(s in n)if(ZN.call(n,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function rx(t){return t!==null?t:[]}Vw.exports=new JN("tag:yaml.org,2002:omap",{kind:"sequence",resolve:tx,construct:rx})});var wh=w((wj,Yw)=>{"use strict";var ix=Be(),nx=Object.prototype.toString;function sx(t){if(t===null)return!0;var e,r,i,n,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1){if(i=o[e],nx.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;s[e]=[n[0],i[n[0]]]}return!0}function ox(t){if(t===null)return[];var e,r,i,n,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1)i=o[e],n=Object.keys(i),s[e]=[n[0],i[n[0]]];return s}Yw.exports=new ix("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:sx,construct:ox})});var Ah=w((Aj,Qw)=>{"use strict";var ax=Be(),lx=Object.prototype.hasOwnProperty;function ux(t){if(t===null)return!0;var e,r=t;for(e in r)if(lx.call(r,e)&&r[e]!==null)return!1;return!0}function cx(t){return t!==null?t:{}}Qw.exports=new ax("tag:yaml.org,2002:set",{kind:"mapping",resolve:ux,construct:cx})});var Ma=w((Ej,Xw)=>{"use strict";Xw.exports=fh().extend({implicit:[dh(),ph()],explicit:[gh(),yh(),wh(),Ah()]})});var f0=w((Sj,_h)=>{"use strict";var Pi=Dn(),i0=Pn(),hx=Tw(),fx=Ma(),Yr=Object.prototype.hasOwnProperty,Ua=1,n0=2,s0=3,Ba=4,Eh=1,dx=2,Kw=3,px=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,mx=/[\x85\u2028\u2029]/,gx=/[,\[\]\{\}]/,o0=/^(?:!|!!|![a-z\-]+!)$/i,a0=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Jw(t){return Object.prototype.toString.call(t)}function Yt(t){return t===10||t===13}function Fi(t){return t===9||t===32}function ct(t){return t===9||t===32||t===10||t===13}function Fn(t){return t===44||t===91||t===93||t===123||t===125}function yx(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function wx(t){return t===120?2:t===117?4:t===85?8:0}function Ax(t){return 48<=t&&t<=57?t-48:-1}function Zw(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?"\n":t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Ex(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var l0=new Array(256),u0=new Array(256);for(Di=0;Di<256;Di++)l0[Di]=Zw(Di)?1:0,u0[Di]=Zw(Di);var Di;function Sx(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||fx,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function c0(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=hx(r),new i0(e,r)}function $(t,e){throw c0(t,e)}function ja(t,e){t.onWarning&&t.onWarning.call(null,c0(t,e))}var e0={YAML:function(e,r,i){var n,s,o;e.version!==null&&$(e,"duplication of %YAML directive"),i.length!==1&&$(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&$(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),o=parseInt(n[2],10),s!==1&&$(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&ja(e,"unsupported YAML version of the document")},TAG:function(e,r,i){var n,s;i.length!==2&&$(e,"TAG directive accepts exactly two arguments"),n=i[0],s=i[1],o0.test(n)||$(e,"ill-formed tag handle (first argument) of the TAG directive"),Yr.call(e.tagMap,n)&&$(e,'there is a previously declared suffix for "'+n+'" tag handle'),a0.test(s)||$(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{$(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s}};function Vr(t,e,r,i){var n,s,o,a;if(e<r){if(a=t.input.slice(e,r),i)for(n=0,s=a.length;n<s;n+=1)o=a.charCodeAt(n),o===9||32<=o&&o<=1114111||$(t,"expected valid JSON character");else px.test(a)&&$(t,"the stream contains non-printable characters");t.result+=a}}function t0(t,e,r,i){var n,s,o,a;for(Pi.isObject(r)||$(t,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(r),o=0,a=n.length;o<a;o+=1)s=n[o],Yr.call(e,s)||(e[s]=r[s],i[s]=!0)}function Ln(t,e,r,i,n,s,o,a,l){var u,c;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),u=0,c=n.length;u<c;u+=1)Array.isArray(n[u])&&$(t,"nested arrays are not supported inside keys"),typeof n=="object"&&Jw(n[u])==="[object Object]"&&(n[u]="[object Object]");if(typeof n=="object"&&Jw(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,c=s.length;u<c;u+=1)t0(t,e,s[u],r);else t0(t,e,s,r);else!t.json&&!Yr.call(r,n)&&Yr.call(e,n)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,$(t,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete r[n];return e}function Sh(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):$(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function be(t,e,r){for(var i=0,n=t.input.charCodeAt(t.position);n!==0;){for(;Fi(n);)n===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(e&&n===35)do n=t.input.charCodeAt(++t.position);while(n!==10&&n!==13&&n!==0);if(Yt(n))for(Sh(t),n=t.input.charCodeAt(t.position),i++,t.lineIndent=0;n===32;)t.lineIndent++,n=t.input.charCodeAt(++t.position);else break}return r!==-1&&i!==0&&t.lineIndent<r&&ja(t,"deficient indentation"),i}function Ha(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||ct(r)))}function bh(t,e){e===1?t.result+=" ":e>1&&(t.result+=Pi.repeat("\n",e-1))}function bx(t,e,r){var i,n,s,o,a,l,u,c,h=t.kind,f=t.result,p;if(p=t.input.charCodeAt(t.position),ct(p)||Fn(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(n=t.input.charCodeAt(t.position+1),ct(n)||r&&Fn(n)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;p!==0;){if(p===58){if(n=t.input.charCodeAt(t.position+1),ct(n)||r&&Fn(n))break}else if(p===35){if(i=t.input.charCodeAt(t.position-1),ct(i))break}else{if(t.position===t.lineStart&&Ha(t)||r&&Fn(p))break;if(Yt(p))if(l=t.line,u=t.lineStart,c=t.lineIndent,be(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=l,t.lineStart=u,t.lineIndent=c;break}}a&&(Vr(t,s,o,!1),bh(t,t.line-l),s=o=t.position,a=!1),Fi(p)||(o=t.position+1),p=t.input.charCodeAt(++t.position)}return Vr(t,s,o,!1),t.result?!0:(t.kind=h,t.result=f,!1)}function _x(t,e){var r,i,n;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=n=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Vr(t,i,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)i=t.position,t.position++,n=t.position;else return!0;else Yt(r)?(Vr(t,i,n,!0),bh(t,be(t,!1,e)),i=n=t.position):t.position===t.lineStart&&Ha(t)?$(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);$(t,"unexpected end of the stream within a single quoted scalar")}function vx(t,e){var r,i,n,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Vr(t,r,t.position,!0),t.position++,!0;if(a===92){if(Vr(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),Yt(a))be(t,!1,e);else if(a<256&&l0[a])t.result+=u0[a],t.position++;else if((o=wx(a))>0){for(n=o,s=0;n>0;n--)a=t.input.charCodeAt(++t.position),(o=yx(a))>=0?s=(s<<4)+o:$(t,"expected hexadecimal character");t.result+=Ex(s),t.position++}else $(t,"unknown escape sequence");r=i=t.position}else Yt(a)?(Vr(t,r,i,!0),bh(t,be(t,!1,e)),r=i=t.position):t.position===t.lineStart&&Ha(t)?$(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}$(t,"unexpected end of the stream within a double quoted scalar")}function Ox(t,e){var r=!0,i,n,s,o=t.tag,a,l=t.anchor,u,c,h,f,p,y=Object.create(null),A,b,v,O;if(O=t.input.charCodeAt(t.position),O===91)c=93,p=!1,a=[];else if(O===123)c=125,p=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),O=t.input.charCodeAt(++t.position);O!==0;){if(be(t,!0,e),O=t.input.charCodeAt(t.position),O===c)return t.position++,t.tag=o,t.anchor=l,t.kind=p?"mapping":"sequence",t.result=a,!0;r?O===44&&$(t,"expected the node content, but found ','"):$(t,"missed comma between flow collection entries"),b=A=v=null,h=f=!1,O===63&&(u=t.input.charCodeAt(t.position+1),ct(u)&&(h=f=!0,t.position++,be(t,!0,e))),i=t.line,n=t.lineStart,s=t.position,$n(t,e,Ua,!1,!0),b=t.tag,A=t.result,be(t,!0,e),O=t.input.charCodeAt(t.position),(f||t.line===i)&&O===58&&(h=!0,O=t.input.charCodeAt(++t.position),be(t,!0,e),$n(t,e,Ua,!1,!0),v=t.result),p?Ln(t,a,y,b,A,v,i,n,s):h?a.push(Ln(t,null,y,b,A,v,i,n,s)):a.push(A),be(t,!0,e),O=t.input.charCodeAt(t.position),O===44?(r=!0,O=t.input.charCodeAt(++t.position)):r=!1}$(t,"unexpected end of the stream within a flow collection")}function Tx(t,e){var r,i,n=Eh,s=!1,o=!1,a=e,l=0,u=!1,c,h;if(h=t.input.charCodeAt(t.position),h===124)i=!1;else if(h===62)i=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)Eh===n?n=h===43?Kw:dx:$(t,"repeat of a chomping mode identifier");else if((c=Ax(h))>=0)c===0?$(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?$(t,"repeat of an indentation width identifier"):(a=e+c-1,o=!0);else break;if(Fi(h)){do h=t.input.charCodeAt(++t.position);while(Fi(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!Yt(h)&&h!==0)}for(;h!==0;){for(Sh(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),Yt(h)){l++;continue}if(t.lineIndent<a){n===Kw?t.result+=Pi.repeat("\n",s?1+l:l):n===Eh&&s&&(t.result+="\n");break}for(i?Fi(h)?(u=!0,t.result+=Pi.repeat("\n",s?1+l:l)):u?(u=!1,t.result+=Pi.repeat("\n",l+1)):l===0?s&&(t.result+=" "):t.result+=Pi.repeat("\n",l):t.result+=Pi.repeat("\n",s?1+l:l),s=!0,o=!0,l=0,r=t.position;!Yt(h)&&h!==0;)h=t.input.charCodeAt(++t.position);Vr(t,r,t.position,!1)}return!0}function r0(t,e){var r,i=t.tag,n=t.anchor,s=[],o,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$(t,"tab characters must not be used in indentation")),!(l!==45||(o=t.input.charCodeAt(t.position+1),!ct(o))));){if(a=!0,t.position++,be(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,$n(t,e,s0,!1,!0),s.push(t.result),be(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)$(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=i,t.anchor=n,t.kind="sequence",t.result=s,!0):!1}function Cx(t,e,r){var i,n,s,o,a,l,u=t.tag,c=t.anchor,h={},f=Object.create(null),p=null,y=null,A=null,b=!1,v=!1,O;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),O=t.input.charCodeAt(t.position);O!==0;){if(!b&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),s=t.line,(O===63||O===58)&&ct(i))O===63?(b&&(Ln(t,h,f,p,y,null,o,a,l),p=y=A=null),v=!0,b=!0,n=!0):b?(b=!1,n=!0):$(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,O=i;else{if(o=t.line,a=t.lineStart,l=t.position,!$n(t,r,n0,!1,!0))break;if(t.line===s){for(O=t.input.charCodeAt(t.position);Fi(O);)O=t.input.charCodeAt(++t.position);if(O===58)O=t.input.charCodeAt(++t.position),ct(O)||$(t,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(Ln(t,h,f,p,y,null,o,a,l),p=y=A=null),v=!0,b=!1,n=!1,p=t.tag,y=t.result;else if(v)$(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=c,!0}else if(v)$(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=c,!0}if((t.line===s||t.lineIndent>e)&&(b&&(o=t.line,a=t.lineStart,l=t.position),$n(t,e,Ba,!0,n)&&(b?y=t.result:A=t.result),b||(Ln(t,h,f,p,y,A,o,a,l),p=y=A=null),be(t,!0,-1),O=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&O!==0)$(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return b&&Ln(t,h,f,p,y,null,o,a,l),v&&(t.tag=u,t.anchor=c,t.kind="mapping",t.result=h),v}function Rx(t){var e,r=!1,i=!1,n,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&$(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(r=!0,o=t.input.charCodeAt(++t.position)):o===33?(i=!0,n="!!",o=t.input.charCodeAt(++t.position)):n="!",e=t.position,r){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):$(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ct(o);)o===33&&(i?$(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),o0.test(n)||$(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),gx.test(s)&&$(t,"tag suffix cannot contain flow indicator characters")}s&&!a0.test(s)&&$(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{$(t,"tag name is malformed: "+s)}return r?t.tag=s:Yr.call(t.tagMap,n)?t.tag=t.tagMap[n]+s:n==="!"?t.tag="!"+s:n==="!!"?t.tag="tag:yaml.org,2002:"+s:$(t,'undeclared tag handle "'+n+'"'),!0}function Ix(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&$(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!ct(r)&&!Fn(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&$(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Nx(t){var e,r,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!ct(i)&&!Fn(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&$(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Yr.call(t.anchorMap,r)||$(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],be(t,!0,-1),!0}function $n(t,e,r,i,n){var s,o,a,l=1,u=!1,c=!1,h,f,p,y,A,b;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=Ba===r||s0===r,i&&be(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;Rx(t)||Ix(t);)be(t,!0,-1)?(u=!0,a=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=u||n),(l===1||Ba===r)&&(Ua===r||n0===r?A=e:A=e+1,b=t.position-t.lineStart,l===1?a&&(r0(t,b)||Cx(t,b,A))||Ox(t,A)?c=!0:(o&&Tx(t,A)||_x(t,A)||vx(t,A)?c=!0:Nx(t)?(c=!0,(t.tag!==null||t.anchor!==null)&&$(t,"alias node should not have any properties")):bx(t,A,Ua===r)&&(c=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(c=a&&r0(t,b))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&$(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,f=t.implicitTypes.length;h<f;h+=1)if(y=t.implicitTypes[h],y.resolve(t.result)){t.result=y.construct(t.result),t.tag=y.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Yr.call(t.typeMap[t.kind||"fallback"],t.tag))y=t.typeMap[t.kind||"fallback"][t.tag];else for(y=null,p=t.typeMap.multi[t.kind||"fallback"],h=0,f=p.length;h<f;h+=1)if(t.tag.slice(0,p[h].tag.length)===p[h].tag){y=p[h];break}y||$(t,"unknown tag !<"+t.tag+">"),t.result!==null&&y.kind!==t.kind&&$(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+y.kind+'", not "'+t.kind+'"'),y.resolve(t.result,t.tag)?(t.result=y.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):$(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||c}function xx(t){var e=t.position,r,i,n,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(be(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),r=t.position;o!==0&&!ct(o);)o=t.input.charCodeAt(++t.position);for(i=t.input.slice(r,t.position),n=[],i.length<1&&$(t,"directive name must not be less than one character in length");o!==0;){for(;Fi(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!Yt(o));break}if(Yt(o))break;for(r=t.position;o!==0&&!ct(o);)o=t.input.charCodeAt(++t.position);n.push(t.input.slice(r,t.position))}o!==0&&Sh(t),Yr.call(e0,i)?e0[i](t,i,n):ja(t,'unknown document directive "'+i+'"')}if(be(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,be(t,!0,-1)):s&&$(t,"directives end mark is expected"),$n(t,t.lineIndent-1,Ba,!1,!0),be(t,!0,-1),t.checkLineBreaks&&mx.test(t.input.slice(e,t.position))&&ja(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Ha(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,be(t,!0,-1));return}if(t.position<t.length-1)$(t,"end of the stream or a document separator is expected");else return}function h0(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+="\n"),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Sx(t,e),i=t.indexOf("\0");for(i!==-1&&(r.position=i,$(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)xx(r);return r.documents}function Dx(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var i=h0(t,r);if(typeof e!="function")return i;for(var n=0,s=i.length;n<s;n+=1)e(i[n])}function Px(t,e){var r=h0(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new i0("expected a single document in the stream, but found more")}}_h.exports.loadAll=Dx;_h.exports.load=Px});var P0=w((bj,D0)=>{"use strict";var za=Dn(),co=Pn(),Fx=Ma(),S0=Object.prototype.toString,b0=Object.prototype.hasOwnProperty,Rh=65279,Lx=9,ao=10,$x=13,kx=32,qx=33,Mx=34,vh=35,Ux=37,Bx=38,jx=39,Hx=42,_0=44,Wx=45,Wa=58,Gx=61,zx=62,Vx=63,Yx=64,v0=91,O0=93,Qx=96,T0=123,Xx=124,C0=125,je={};je[0]="\\0";je[7]="\\a";je[8]="\\b";je[9]="\\t";je[10]="\\n";je[11]="\\v";je[12]="\\f";je[13]="\\r";je[27]="\\e";je[34]='\\"';je[92]="\\\\";je[133]="\\N";je[160]="\\_";je[8232]="\\L";je[8233]="\\P";var Kx=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Jx=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Zx(t,e){var r,i,n,s,o,a,l;if(e===null)return{};for(r={},i=Object.keys(e),n=0,s=i.length;n<s;n+=1)o=i[n],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=t.compiledTypeMap.fallback[o],l&&b0.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[o]=a;return r}function eD(t){var e,r,i;if(e=t.toString(16).toUpperCase(),t<=255)r="x",i=2;else if(t<=65535)r="u",i=4;else if(t<=4294967295)r="U",i=8;else throw new co("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+za.repeat("0",i-e.length)+e}var tD=1,lo=2;function rD(t){this.schema=t.schema||Fx,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=za.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Zx(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?lo:tD,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function d0(t,e){for(var r=za.repeat(" ",e),i=0,n=-1,s="",o,a=t.length;i<a;)n=t.indexOf("\n",i),n===-1?(o=t.slice(i),i=a):(o=t.slice(i,n+1),i=n+1),o.length&&o!=="\n"&&(s+=r),s+=o;return s}function Oh(t,e){return"\n"+za.repeat(" ",t.indent*e)}function iD(t,e){var r,i,n;for(r=0,i=t.implicitTypes.length;r<i;r+=1)if(n=t.implicitTypes[r],n.resolve(e))return!0;return!1}function Ga(t){return t===kx||t===Lx}function uo(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Rh||65536<=t&&t<=1114111}function p0(t){return uo(t)&&t!==Rh&&t!==$x&&t!==ao}function m0(t,e,r){var i=p0(t),n=i&&!Ga(t);return(r?i:i&&t!==_0&&t!==v0&&t!==O0&&t!==T0&&t!==C0)&&t!==vh&&!(e===Wa&&!n)||p0(e)&&!Ga(e)&&t===vh||e===Wa&&n}function nD(t){return uo(t)&&t!==Rh&&!Ga(t)&&t!==Wx&&t!==Vx&&t!==Wa&&t!==_0&&t!==v0&&t!==O0&&t!==T0&&t!==C0&&t!==vh&&t!==Bx&&t!==Hx&&t!==qx&&t!==Xx&&t!==Gx&&t!==zx&&t!==jx&&t!==Mx&&t!==Ux&&t!==Yx&&t!==Qx}function sD(t){return!Ga(t)&&t!==Wa}function oo(t,e){var r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function R0(t){var e=/^\n* /;return e.test(t)}var I0=1,Th=2,N0=3,x0=4,kn=5;function oD(t,e,r,i,n,s,o,a){var l,u=0,c=null,h=!1,f=!1,p=i!==-1,y=-1,A=nD(oo(t,0))&&sD(oo(t,t.length-1));if(e||o)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=oo(t,l),!uo(u))return kn;A=A&&m0(u,c,a),c=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=oo(t,l),u===ao)h=!0,p&&(f=f||l-y-1>i&&t[y+1]!==" ",y=l);else if(!uo(u))return kn;A=A&&m0(u,c,a),c=u}f=f||p&&l-y-1>i&&t[y+1]!==" "}return!h&&!f?A&&!o&&!n(t)?I0:s===lo?kn:Th:r>9&&R0(t)?kn:o?s===lo?kn:Th:f?x0:N0}function aD(t,e,r,i,n){t.dump=function(){if(e.length===0)return t.quotingType===lo?'""':"''";if(!t.noCompatMode&&(Kx.indexOf(e)!==-1||Jx.test(e)))return t.quotingType===lo?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=i||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return iD(t,u)}switch(oD(e,a,t.indent,o,l,t.quotingType,t.forceQuotes&&!i,n)){case I0:return e;case Th:return"'"+e.replace(/'/g,"''")+"'";case N0:return"|"+g0(e,t.indent)+y0(d0(e,s));case x0:return">"+g0(e,t.indent)+y0(d0(lD(e,o),s));case kn:return'"'+uD(e,o)+'"';default:throw new co("impossible error: invalid scalar style")}}()}function g0(t,e){var r=R0(t)?String(e):"",i=t[t.length-1]==="\n",n=i&&(t[t.length-2]==="\n"||t==="\n"),s=n?"+":i?"":"-";return r+s+"\n"}function y0(t){return t[t.length-1]==="\n"?t.slice(0,-1):t}function lD(t,e){for(var r=/(\n+)([^\n]*)/g,i=function(){var u=t.indexOf("\n");return u=u!==-1?u:t.length,r.lastIndex=u,w0(t.slice(0,u),e)}(),n=t[0]==="\n"||t[0]===" ",s,o;o=r.exec(t);){var a=o[1],l=o[2];s=l[0]===" ",i+=a+(!n&&!s&&l!==""?"\n":"")+w0(l,e),n=s}return i}function w0(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,i,n=0,s,o=0,a=0,l="";i=r.exec(t);)a=i.index,a-n>e&&(s=o>n?o:a,l+="\n"+t.slice(n,s),n=s+1),o=a;return l+="\n",t.length-n>e&&o>n?l+=t.slice(n,o)+"\n"+t.slice(o+1):l+=t.slice(n),l.slice(1)}function uD(t){for(var e="",r=0,i,n=0;n<t.length;r>=65536?n+=2:n++)r=oo(t,n),i=je[r],!i&&uo(r)?(e+=t[n],r>=65536&&(e+=t[n+1])):e+=i||eD(r);return e}function cD(t,e,r){var i="",n=t.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],t.replacer&&(a=t.replacer.call(r,String(s),a)),(fr(t,e,a,!1,!1)||typeof a>"u"&&fr(t,e,null,!1,!1))&&(i!==""&&(i+=","+(t.condenseFlow?"":" ")),i+=t.dump);t.tag=n,t.dump="["+i+"]"}function A0(t,e,r,i){var n="",s=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(fr(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&fr(t,e+1,null,!0,!0,!1,!0))&&((!i||n!=="")&&(n+=Oh(t,e)),t.dump&&ao===t.dump.charCodeAt(0)?n+="-":n+="- ",n+=t.dump);t.tag=s,t.dump=n||"[]"}function hD(t,e,r){var i="",n=t.tag,s=Object.keys(r),o,a,l,u,c;for(o=0,a=s.length;o<a;o+=1)c="",i!==""&&(c+=", "),t.condenseFlow&&(c+='"'),l=s[o],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),fr(t,e,l,!1,!1)&&(t.dump.length>1024&&(c+="? "),c+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),fr(t,e,u,!1,!1)&&(c+=t.dump,i+=c));t.tag=n,t.dump="{"+i+"}"}function fD(t,e,r,i){var n="",s=t.tag,o=Object.keys(r),a,l,u,c,h,f;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new co("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)f="",(!i||n!=="")&&(f+=Oh(t,e)),u=o[a],c=r[u],t.replacer&&(c=t.replacer.call(r,u,c)),fr(t,e+1,u,!0,!0,!0)&&(h=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,h&&(t.dump&&ao===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,h&&(f+=Oh(t,e)),fr(t,e+1,c,!0,h)&&(t.dump&&ao===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,n+=f));t.tag=s,t.dump=n||"{}"}function E0(t,e,r){var i,n,s,o,a,l;for(n=r?t.explicitTypes:t.implicitTypes,s=0,o=n.length;s<o;s+=1)if(a=n[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,S0.call(a.represent)==="[object Function]")i=a.represent(e,l);else if(b0.call(a.represent,l))i=a.represent[l](e,l);else throw new co("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=i}return!0}return!1}function fr(t,e,r,i,n,s,o){t.tag=null,t.dump=r,E0(t,r,!1)||E0(t,r,!0);var a=S0.call(t.dump),l=i,u;i&&(i=t.flowLevel<0||t.flowLevel>e);var c=a==="[object Object]"||a==="[object Array]",h,f;if(c&&(h=t.duplicates.indexOf(r),f=h!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(n=!1),f&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(c&&f&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),a==="[object Object]")i&&Object.keys(t.dump).length!==0?(fD(t,e,t.dump,n),f&&(t.dump="&ref_"+h+t.dump)):(hD(t,e,t.dump),f&&(t.dump="&ref_"+h+" "+t.dump));else if(a==="[object Array]")i&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?A0(t,e-1,t.dump,n):A0(t,e,t.dump,n),f&&(t.dump="&ref_"+h+t.dump)):(cD(t,e,t.dump),f&&(t.dump="&ref_"+h+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&aD(t,t.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new co("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function dD(t,e){var r=[],i=[],n,s;for(Ch(t,r,i),n=0,s=i.length;n<s;n+=1)e.duplicates.push(r[i[n]]);e.usedDuplicates=new Array(s)}function Ch(t,e,r){var i,n,s;if(t!==null&&typeof t=="object")if(n=e.indexOf(t),n!==-1)r.indexOf(n)===-1&&r.push(n);else if(e.push(t),Array.isArray(t))for(n=0,s=t.length;n<s;n+=1)Ch(t[n],e,r);else for(i=Object.keys(t),n=0,s=i.length;n<s;n+=1)Ch(t[i[n]],e,r)}function pD(t,e){e=e||{};var r=new rD(e);r.noRefs||dD(t,r);var i=t;return r.replacer&&(i=r.replacer.call({"":i},"",i)),fr(r,0,i,!0,!0)?r.dump+"\n":""}D0.exports.dump=pD});var Va=w((_j,Je)=>{"use strict";var F0=f0(),mD=P0();function Ih(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}Je.exports.Type=Be();Je.exports.Schema=rh();Je.exports.FAILSAFE_SCHEMA=oh();Je.exports.JSON_SCHEMA=hh();Je.exports.CORE_SCHEMA=fh();Je.exports.DEFAULT_SCHEMA=Ma();Je.exports.load=F0.load;Je.exports.loadAll=F0.loadAll;Je.exports.dump=mD.dump;Je.exports.YAMLException=Pn();Je.exports.types={binary:gh(),float:ch(),map:sh(),null:ah(),pairs:wh(),set:Ah(),timestamp:dh(),bool:lh(),int:uh(),merge:ph(),omap:yh(),seq:nh(),str:ih()};Je.exports.safeLoad=Ih("safeLoad","load");Je.exports.safeLoadAll=Ih("safeLoadAll","loadAll");Je.exports.safeDump=Ih("safeDump","dump")});var L0=w(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.Lazy=void 0;var Nh=class{constructor(e){this._value=null,this.creator=e}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;let e=this.creator();return this.value=e,e}set value(e){this._value=e,this.creator=null}};Ya.Lazy=Nh});var ho=w((Oj,$0)=>{"use strict";var gD="2.0.0",yD=Number.MAX_SAFE_INTEGER||9007199254740991,wD=16,AD=250,ED=["major","premajor","minor","preminor","patch","prepatch","prerelease"];$0.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:wD,MAX_SAFE_BUILD_LENGTH:AD,MAX_SAFE_INTEGER:yD,RELEASE_TYPES:ED,SEMVER_SPEC_VERSION:gD,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var fo=w((Tj,k0)=>{"use strict";var SD=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};k0.exports=SD});var qn=w((Qt,q0)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:xh,MAX_SAFE_BUILD_LENGTH:bD,MAX_LENGTH:_D}=ho(),vD=fo();Qt=q0.exports={};var OD=Qt.re=[],TD=Qt.safeRe=[],N=Qt.src=[],CD=Qt.safeSrc=[],x=Qt.t={},RD=0,Dh="[a-zA-Z0-9-]",ID=[["\\s",1],["\\d",_D],[Dh,bD]],ND=t=>{for(let[e,r]of ID)t=t.split("".concat(e,"*")).join("".concat(e,"{0,").concat(r,"}")).split("".concat(e,"+")).join("".concat(e,"{1,").concat(r,"}"));return t},B=(t,e,r)=>{let i=ND(e),n=RD++;vD(t,n,e),x[t]=n,N[n]=e,CD[n]=i,OD[n]=new RegExp(e,r?"g":void 0),TD[n]=new RegExp(i,r?"g":void 0)};B("NUMERICIDENTIFIER","0|[1-9]\\d*");B("NUMERICIDENTIFIERLOOSE","\\d+");B("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(Dh,"*"));B("MAINVERSION","(".concat(N[x.NUMERICIDENTIFIER],")\\.")+"(".concat(N[x.NUMERICIDENTIFIER],")\\.")+"(".concat(N[x.NUMERICIDENTIFIER],")"));B("MAINVERSIONLOOSE","(".concat(N[x.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(N[x.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(N[x.NUMERICIDENTIFIERLOOSE],")"));B("PRERELEASEIDENTIFIER","(?:".concat(N[x.NONNUMERICIDENTIFIER],"|").concat(N[x.NUMERICIDENTIFIER],")"));B("PRERELEASEIDENTIFIERLOOSE","(?:".concat(N[x.NONNUMERICIDENTIFIER],"|").concat(N[x.NUMERICIDENTIFIERLOOSE],")"));B("PRERELEASE","(?:-(".concat(N[x.PRERELEASEIDENTIFIER],"(?:\\.").concat(N[x.PRERELEASEIDENTIFIER],")*))"));B("PRERELEASELOOSE","(?:-?(".concat(N[x.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(N[x.PRERELEASEIDENTIFIERLOOSE],")*))"));B("BUILDIDENTIFIER","".concat(Dh,"+"));B("BUILD","(?:\\+(".concat(N[x.BUILDIDENTIFIER],"(?:\\.").concat(N[x.BUILDIDENTIFIER],")*))"));B("FULLPLAIN","v?".concat(N[x.MAINVERSION]).concat(N[x.PRERELEASE],"?").concat(N[x.BUILD],"?"));B("FULL","^".concat(N[x.FULLPLAIN],"$"));B("LOOSEPLAIN","[v=\\s]*".concat(N[x.MAINVERSIONLOOSE]).concat(N[x.PRERELEASELOOSE],"?").concat(N[x.BUILD],"?"));B("LOOSE","^".concat(N[x.LOOSEPLAIN],"$"));B("GTLT","((?:<|>)?=?)");B("XRANGEIDENTIFIERLOOSE","".concat(N[x.NUMERICIDENTIFIERLOOSE],"|x|X|\\*"));B("XRANGEIDENTIFIER","".concat(N[x.NUMERICIDENTIFIER],"|x|X|\\*"));B("XRANGEPLAIN","[v=\\s]*(".concat(N[x.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(N[x.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(N[x.XRANGEIDENTIFIER],")")+"(?:".concat(N[x.PRERELEASE],")?").concat(N[x.BUILD],"?")+")?)?");B("XRANGEPLAINLOOSE","[v=\\s]*(".concat(N[x.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(N[x.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(N[x.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(N[x.PRERELEASELOOSE],")?").concat(N[x.BUILD],"?")+")?)?");B("XRANGE","^".concat(N[x.GTLT],"\\s*").concat(N[x.XRANGEPLAIN],"$"));B("XRANGELOOSE","^".concat(N[x.GTLT],"\\s*").concat(N[x.XRANGEPLAINLOOSE],"$"));B("COERCEPLAIN","(^|[^\\d])(\\d{1,".concat(xh,"})")+"(?:\\.(\\d{1,".concat(xh,"}))?")+"(?:\\.(\\d{1,".concat(xh,"}))?"));B("COERCE","".concat(N[x.COERCEPLAIN],"(?:$|[^\\d])"));B("COERCEFULL",N[x.COERCEPLAIN]+"(?:".concat(N[x.PRERELEASE],")?")+"(?:".concat(N[x.BUILD],")?")+"(?:$|[^\\d])");B("COERCERTL",N[x.COERCE],!0);B("COERCERTLFULL",N[x.COERCEFULL],!0);B("LONETILDE","(?:~>?)");B("TILDETRIM","(\\s*)".concat(N[x.LONETILDE],"\\s+"),!0);Qt.tildeTrimReplace="$1~";B("TILDE","^".concat(N[x.LONETILDE]).concat(N[x.XRANGEPLAIN],"$"));B("TILDELOOSE","^".concat(N[x.LONETILDE]).concat(N[x.XRANGEPLAINLOOSE],"$"));B("LONECARET","(?:\\^)");B("CARETTRIM","(\\s*)".concat(N[x.LONECARET],"\\s+"),!0);Qt.caretTrimReplace="$1^";B("CARET","^".concat(N[x.LONECARET]).concat(N[x.XRANGEPLAIN],"$"));B("CARETLOOSE","^".concat(N[x.LONECARET]).concat(N[x.XRANGEPLAINLOOSE],"$"));B("COMPARATORLOOSE","^".concat(N[x.GTLT],"\\s*(").concat(N[x.LOOSEPLAIN],")$|^$"));B("COMPARATOR","^".concat(N[x.GTLT],"\\s*(").concat(N[x.FULLPLAIN],")$|^$"));B("COMPARATORTRIM","(\\s*)".concat(N[x.GTLT],"\\s*(").concat(N[x.LOOSEPLAIN],"|").concat(N[x.XRANGEPLAIN],")"),!0);Qt.comparatorTrimReplace="$1$2$3";B("HYPHENRANGE","^\\s*(".concat(N[x.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(N[x.XRANGEPLAIN],")")+"\\s*$");B("HYPHENRANGELOOSE","^\\s*(".concat(N[x.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(N[x.XRANGEPLAINLOOSE],")")+"\\s*$");B("STAR","(<|>)?=?\\s*\\*");B("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");B("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Qa=w((Cj,M0)=>{"use strict";var xD=Object.freeze({loose:!0}),DD=Object.freeze({}),PD=t=>t?typeof t!="object"?xD:t:DD;M0.exports=PD});var Ph=w((Rj,j0)=>{"use strict";var U0=/^[0-9]+$/,B0=(t,e)=>{let r=U0.test(t),i=U0.test(e);return r&&i&&(t=+t,e=+e),t===e?0:r&&!i?-1:i&&!r?1:t<e?-1:1},FD=(t,e)=>B0(e,t);j0.exports={compareIdentifiers:B0,rcompareIdentifiers:FD}});var He=w((Ij,W0)=>{"use strict";var Xa=fo(),{MAX_LENGTH:H0,MAX_SAFE_INTEGER:Ka}=ho(),{safeRe:Ja,t:Za}=qn(),LD=Qa(),{compareIdentifiers:Mn}=Ph(),Fh=class t{constructor(e,r){if(r=LD(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError('Invalid version. Must be a string. Got type "'.concat(typeof e,'".'));if(e.length>H0)throw new TypeError("version is longer than ".concat(H0," characters"));Xa("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let i=e.trim().match(r.loose?Ja[Za.LOOSE]:Ja[Za.FULL]);if(!i)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Ka||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ka||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ka||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let s=+n;if(s>=0&&s<Ka)return s}return n}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(e){if(Xa("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Mn(this.major,e.major)||Mn(this.minor,e.minor)||Mn(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let i=this.prerelease[r],n=e.prerelease[r];if(Xa("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return Mn(i,n)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let i=this.build[r],n=e.build[r];if(Xa("build compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return Mn(i,n)}while(++r)}inc(e,r,i){if(e.startsWith("pre")){if(!r&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let n="-".concat(r).match(this.options.loose?Ja[Za.PRERELEASELOOSE]:Ja[Za.PRERELEASE]);if(!n||n[1]!==r)throw new Error("invalid identifier: ".concat(r))}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,i),this.inc("pre",r,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,i),this.inc("pre",r,i);break;case"release":if(this.prerelease.length===0)throw new Error("version ".concat(this.raw," is not a prerelease"));this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(i)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let s=[r,n];i===!1&&(s=[r]),Mn(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error("invalid increment argument: ".concat(e))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}};W0.exports=Fh});var Li=w((Nj,z0)=>{"use strict";var G0=He(),$D=(t,e,r=!1)=>{if(t instanceof G0)return t;try{return new G0(t,e)}catch(i){if(!r)return null;throw i}};z0.exports=$D});var Y0=w((xj,V0)=>{"use strict";var kD=Li(),qD=(t,e)=>{let r=kD(t,e);return r?r.version:null};V0.exports=qD});var X0=w((Dj,Q0)=>{"use strict";var MD=Li(),UD=(t,e)=>{let r=MD(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};Q0.exports=UD});var Z0=w((Pj,J0)=>{"use strict";var K0=He(),BD=(t,e,r,i,n)=>{typeof r=="string"&&(n=i,i=r,r=void 0);try{return new K0(t instanceof K0?t.version:t,r).inc(e,i,n).version}catch{return null}};J0.exports=BD});var rA=w((Fj,tA)=>{"use strict";var eA=Li(),jD=(t,e)=>{let r=eA(t,null,!0),i=eA(e,null,!0),n=r.compare(i);if(n===0)return null;let s=n>0,o=s?r:i,a=s?i:r,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let c=l?"pre":"";return r.major!==i.major?c+"major":r.minor!==i.minor?c+"minor":r.patch!==i.patch?c+"patch":"prerelease"};tA.exports=jD});var nA=w((Lj,iA)=>{"use strict";var HD=He(),WD=(t,e)=>new HD(t,e).major;iA.exports=WD});var oA=w(($j,sA)=>{"use strict";var GD=He(),zD=(t,e)=>new GD(t,e).minor;sA.exports=zD});var lA=w((kj,aA)=>{"use strict";var VD=He(),YD=(t,e)=>new VD(t,e).patch;aA.exports=YD});var cA=w((qj,uA)=>{"use strict";var QD=Li(),XD=(t,e)=>{let r=QD(t,e);return r&&r.prerelease.length?r.prerelease:null};uA.exports=XD});var Tt=w((Mj,fA)=>{"use strict";var hA=He(),KD=(t,e,r)=>new hA(t,r).compare(new hA(e,r));fA.exports=KD});var pA=w((Uj,dA)=>{"use strict";var JD=Tt(),ZD=(t,e,r)=>JD(e,t,r);dA.exports=ZD});var gA=w((Bj,mA)=>{"use strict";var e1=Tt(),t1=(t,e)=>e1(t,e,!0);mA.exports=t1});var el=w((jj,wA)=>{"use strict";var yA=He(),r1=(t,e,r)=>{let i=new yA(t,r),n=new yA(e,r);return i.compare(n)||i.compareBuild(n)};wA.exports=r1});var EA=w((Hj,AA)=>{"use strict";var i1=el(),n1=(t,e)=>t.sort((r,i)=>i1(r,i,e));AA.exports=n1});var bA=w((Wj,SA)=>{"use strict";var s1=el(),o1=(t,e)=>t.sort((r,i)=>s1(i,r,e));SA.exports=o1});var po=w((Gj,_A)=>{"use strict";var a1=Tt(),l1=(t,e,r)=>a1(t,e,r)>0;_A.exports=l1});var tl=w((zj,vA)=>{"use strict";var u1=Tt(),c1=(t,e,r)=>u1(t,e,r)<0;vA.exports=c1});var Lh=w((Vj,OA)=>{"use strict";var h1=Tt(),f1=(t,e,r)=>h1(t,e,r)===0;OA.exports=f1});var $h=w((Yj,TA)=>{"use strict";var d1=Tt(),p1=(t,e,r)=>d1(t,e,r)!==0;TA.exports=p1});var rl=w((Qj,CA)=>{"use strict";var m1=Tt(),g1=(t,e,r)=>m1(t,e,r)>=0;CA.exports=g1});var il=w((Xj,RA)=>{"use strict";var y1=Tt(),w1=(t,e,r)=>y1(t,e,r)<=0;RA.exports=w1});var kh=w((Kj,IA)=>{"use strict";var A1=Lh(),E1=$h(),S1=po(),b1=rl(),_1=tl(),v1=il(),O1=(t,e,r,i)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return A1(t,r,i);case"!=":return E1(t,r,i);case">":return S1(t,r,i);case">=":return b1(t,r,i);case"<":return _1(t,r,i);case"<=":return v1(t,r,i);default:throw new TypeError("Invalid operator: ".concat(e))}};IA.exports=O1});var xA=w((Jj,NA)=>{"use strict";var T1=He(),C1=Li(),{safeRe:nl,t:sl}=qn(),R1=(t,e)=>{if(t instanceof T1)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?nl[sl.COERCEFULL]:nl[sl.COERCE]);else{let l=e.includePrerelease?nl[sl.COERCERTLFULL]:nl[sl.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let i=r[2],n=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?"-".concat(r[5]):"",a=e.includePrerelease&&r[6]?"+".concat(r[6]):"";return C1("".concat(i,".").concat(n,".").concat(s).concat(o).concat(a),e)};NA.exports=R1});var PA=w((Zj,DA)=>{"use strict";var qh=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let n=this.map.keys().next().value;this.delete(n)}this.map.set(e,r)}return this}};DA.exports=qh});var Ct=w((eH,kA)=>{"use strict";var I1=/\s+/g,Mh=class t{constructor(e,r){if(r=x1(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Uh)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(I1," "),this.set=this.raw.split("||").map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){let i=this.set[0];if(this.set=this.set.filter(n=>!LA(n[0])),this.set.length===0)this.set=[i];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&q1(n[0])){this.set=[n];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let i=0;i<r.length;i++)i>0&&(this.formatted+=" "),this.formatted+=r[i].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let i=((this.options.includePrerelease&&$1)|(this.options.loose&&k1))+":"+e,n=FA.get(i);if(n)return n;let s=this.options.loose,o=s?ht[Ze.HYPHENRANGELOOSE]:ht[Ze.HYPHENRANGE];e=e.replace(o,Y1(this.options.includePrerelease)),ce("hyphen replace",e),e=e.replace(ht[Ze.COMPARATORTRIM],P1),ce("comparator trim",e),e=e.replace(ht[Ze.TILDETRIM],F1),ce("tilde trim",e),e=e.replace(ht[Ze.CARETTRIM],L1),ce("caret trim",e);let a=e.split(" ").map(h=>M1(h,this.options)).join(" ").split(/\s+/).map(h=>V1(h,this.options));s&&(a=a.filter(h=>(ce("loose invalid filter",h,this.options),!!h.match(ht[Ze.COMPARATORLOOSE])))),ce("range list",a);let l=new Map,u=a.map(h=>new Uh(h,this.options));for(let h of u){if(LA(h))return[h];l.set(h.value,h)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return FA.set(i,c),c}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(i=>$A(i,r)&&e.set.some(n=>$A(n,r)&&i.every(s=>n.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new D1(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Q1(this.set[r],e,this.options))return!0;return!1}};kA.exports=Mh;var N1=PA(),FA=new N1,x1=Qa(),Uh=mo(),ce=fo(),D1=He(),{safeRe:ht,t:Ze,comparatorTrimReplace:P1,tildeTrimReplace:F1,caretTrimReplace:L1}=qn(),{FLAG_INCLUDE_PRERELEASE:$1,FLAG_LOOSE:k1}=ho(),LA=t=>t.value==="<0.0.0-0",q1=t=>t.value==="",$A=(t,e)=>{let r=!0,i=t.slice(),n=i.pop();for(;r&&i.length;)r=i.every(s=>n.intersects(s,e)),n=i.pop();return r},M1=(t,e)=>(ce("comp",t,e),t=j1(t,e),ce("caret",t),t=U1(t,e),ce("tildes",t),t=W1(t,e),ce("xrange",t),t=z1(t,e),ce("stars",t),t),et=t=>!t||t.toLowerCase()==="x"||t==="*",U1=(t,e)=>t.trim().split(/\s+/).map(r=>B1(r,e)).join(" "),B1=(t,e)=>{let r=e.loose?ht[Ze.TILDELOOSE]:ht[Ze.TILDE];return t.replace(r,(i,n,s,o,a)=>{ce("tilde",t,i,n,s,o,a);let l;return et(n)?l="":et(s)?l=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):et(o)?l=">=".concat(n,".").concat(s,".0 <").concat(n,".").concat(+s+1,".0-0"):a?(ce("replaceTilde pr",a),l=">=".concat(n,".").concat(s,".").concat(o,"-").concat(a," <").concat(n,".").concat(+s+1,".0-0")):l=">=".concat(n,".").concat(s,".").concat(o," <").concat(n,".").concat(+s+1,".0-0"),ce("tilde return",l),l})},j1=(t,e)=>t.trim().split(/\s+/).map(r=>H1(r,e)).join(" "),H1=(t,e)=>{ce("caret",t,e);let r=e.loose?ht[Ze.CARETLOOSE]:ht[Ze.CARET],i=e.includePrerelease?"-0":"";return t.replace(r,(n,s,o,a,l)=>{ce("caret",t,n,s,o,a,l);let u;return et(s)?u="":et(o)?u=">=".concat(s,".0.0").concat(i," <").concat(+s+1,".0.0-0"):et(a)?s==="0"?u=">=".concat(s,".").concat(o,".0").concat(i," <").concat(s,".").concat(+o+1,".0-0"):u=">=".concat(s,".").concat(o,".0").concat(i," <").concat(+s+1,".0.0-0"):l?(ce("replaceCaret pr",l),s==="0"?o==="0"?u=">=".concat(s,".").concat(o,".").concat(a,"-").concat(l," <").concat(s,".").concat(o,".").concat(+a+1,"-0"):u=">=".concat(s,".").concat(o,".").concat(a,"-").concat(l," <").concat(s,".").concat(+o+1,".0-0"):u=">=".concat(s,".").concat(o,".").concat(a,"-").concat(l," <").concat(+s+1,".0.0-0")):(ce("no pr"),s==="0"?o==="0"?u=">=".concat(s,".").concat(o,".").concat(a).concat(i," <").concat(s,".").concat(o,".").concat(+a+1,"-0"):u=">=".concat(s,".").concat(o,".").concat(a).concat(i," <").concat(s,".").concat(+o+1,".0-0"):u=">=".concat(s,".").concat(o,".").concat(a," <").concat(+s+1,".0.0-0")),ce("caret return",u),u})},W1=(t,e)=>(ce("replaceXRanges",t,e),t.split(/\s+/).map(r=>G1(r,e)).join(" ")),G1=(t,e)=>{t=t.trim();let r=e.loose?ht[Ze.XRANGELOOSE]:ht[Ze.XRANGE];return t.replace(r,(i,n,s,o,a,l)=>{ce("xRange",t,i,n,s,o,a,l);let u=et(s),c=u||et(o),h=c||et(a),f=h;return n==="="&&f&&(n=""),l=e.includePrerelease?"-0":"",u?n===">"||n==="<"?i="<0.0.0-0":i="*":n&&f?(c&&(o=0),a=0,n===">"?(n=">=",c?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):n==="<="&&(n="<",c?s=+s+1:o=+o+1),n==="<"&&(l="-0"),i="".concat(n+s,".").concat(o,".").concat(a).concat(l)):c?i=">=".concat(s,".0.0").concat(l," <").concat(+s+1,".0.0-0"):h&&(i=">=".concat(s,".").concat(o,".0").concat(l," <").concat(s,".").concat(+o+1,".0-0")),ce("xRange return",i),i})},z1=(t,e)=>(ce("replaceStars",t,e),t.trim().replace(ht[Ze.STAR],"")),V1=(t,e)=>(ce("replaceGTE0",t,e),t.trim().replace(ht[e.includePrerelease?Ze.GTE0PRE:Ze.GTE0],"")),Y1=t=>(e,r,i,n,s,o,a,l,u,c,h,f)=>(et(i)?r="":et(n)?r=">=".concat(i,".0.0").concat(t?"-0":""):et(s)?r=">=".concat(i,".").concat(n,".0").concat(t?"-0":""):o?r=">=".concat(r):r=">=".concat(r).concat(t?"-0":""),et(u)?l="":et(c)?l="<".concat(+u+1,".0.0-0"):et(h)?l="<".concat(u,".").concat(+c+1,".0-0"):f?l="<=".concat(u,".").concat(c,".").concat(h,"-").concat(f):t?l="<".concat(u,".").concat(c,".").concat(+h+1,"-0"):l="<=".concat(l),"".concat(r," ").concat(l).trim()),Q1=(t,e,r)=>{for(let i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let i=0;i<t.length;i++)if(ce(t[i].semver),t[i].semver!==Uh.ANY&&t[i].semver.prerelease.length>0){let n=t[i].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var mo=w((tH,HA)=>{"use strict";var go=Symbol("SemVer ANY"),Hh=class t{static get ANY(){return go}constructor(e,r){if(r=qA(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),jh("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===go?this.value="":this.value=this.operator+this.semver.version,jh("comp",this)}parse(e){let r=this.options.loose?MA[UA.COMPARATORLOOSE]:MA[UA.COMPARATOR],i=e.match(r);if(!i)throw new TypeError("Invalid comparator: ".concat(e));this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new BA(i[2],this.options.loose):this.semver=go}toString(){return this.value}test(e){if(jh("Comparator.test",e,this.options.loose),this.semver===go||e===go)return!0;if(typeof e=="string")try{e=new BA(e,this.options)}catch{return!1}return Bh(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new jA(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new jA(this.value,r).test(e.semver):(r=qA(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Bh(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Bh(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};HA.exports=Hh;var qA=Qa(),{safeRe:MA,t:UA}=qn(),Bh=kh(),jh=fo(),BA=He(),jA=Ct()});var yo=w((rH,WA)=>{"use strict";var X1=Ct(),K1=(t,e,r)=>{try{e=new X1(e,r)}catch{return!1}return e.test(t)};WA.exports=K1});var zA=w((iH,GA)=>{"use strict";var J1=Ct(),Z1=(t,e)=>new J1(t,e).set.map(r=>r.map(i=>i.value).join(" ").trim().split(" "));GA.exports=Z1});var YA=w((nH,VA)=>{"use strict";var eP=He(),tP=Ct(),rP=(t,e,r)=>{let i=null,n=null,s=null;try{s=new tP(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!i||n.compare(o)===-1)&&(i=o,n=new eP(i,r))}),i};VA.exports=rP});var XA=w((sH,QA)=>{"use strict";var iP=He(),nP=Ct(),sP=(t,e,r)=>{let i=null,n=null,s=null;try{s=new nP(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!i||n.compare(o)===1)&&(i=o,n=new iP(i,r))}),i};QA.exports=sP});var ZA=w((oH,JA)=>{"use strict";var Wh=He(),oP=Ct(),KA=po(),aP=(t,e)=>{t=new oP(t,e);let r=new Wh("0.0.0");if(t.test(r)||(r=new Wh("0.0.0-0"),t.test(r)))return r;r=null;for(let i=0;i<t.set.length;++i){let n=t.set[i],s=null;n.forEach(o=>{let a=new Wh(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||KA(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(o.operator))}}),s&&(!r||KA(r,s))&&(r=s)}return r&&t.test(r)?r:null};JA.exports=aP});var tE=w((aH,eE)=>{"use strict";var lP=Ct(),uP=(t,e)=>{try{return new lP(t,e).range||"*"}catch{return null}};eE.exports=uP});var ol=w((lH,sE)=>{"use strict";var cP=He(),nE=mo(),{ANY:hP}=nE,fP=Ct(),dP=yo(),rE=po(),iE=tl(),pP=il(),mP=rl(),gP=(t,e,r,i)=>{t=new cP(t,i),e=new fP(e,i);let n,s,o,a,l;switch(r){case">":n=rE,s=pP,o=iE,a=">",l=">=";break;case"<":n=iE,s=mP,o=rE,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(dP(t,e,i))return!1;for(let u=0;u<e.set.length;++u){let c=e.set[u],h=null,f=null;if(c.forEach(p=>{p.semver===hP&&(p=new nE(">=0.0.0")),h=h||p,f=f||p,n(p.semver,h.semver,i)?h=p:o(p.semver,f.semver,i)&&(f=p)}),h.operator===a||h.operator===l||(!f.operator||f.operator===a)&&s(t,f.semver))return!1;if(f.operator===l&&o(t,f.semver))return!1}return!0};sE.exports=gP});var aE=w((uH,oE)=>{"use strict";var yP=ol(),wP=(t,e,r)=>yP(t,e,">",r);oE.exports=wP});var uE=w((cH,lE)=>{"use strict";var AP=ol(),EP=(t,e,r)=>AP(t,e,"<",r);lE.exports=EP});var fE=w((hH,hE)=>{"use strict";var cE=Ct(),SP=(t,e,r)=>(t=new cE(t,r),e=new cE(e,r),t.intersects(e,r));hE.exports=SP});var pE=w((fH,dE)=>{"use strict";var bP=yo(),_P=Tt();dE.exports=(t,e,r)=>{let i=[],n=null,s=null,o=t.sort((c,h)=>_P(c,h,r));for(let c of o)bP(c,e,r)?(s=c,n||(n=c)):(s&&i.push([n,s]),s=null,n=null);n&&i.push([n,null]);let a=[];for(let[c,h]of i)c===h?a.push(c):!h&&c===o[0]?a.push("*"):h?c===o[0]?a.push("<=".concat(h)):a.push("".concat(c," - ").concat(h)):a.push(">=".concat(c));let l=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var EE=w((dH,AE)=>{"use strict";var mE=Ct(),zh=mo(),{ANY:Gh}=zh,wo=yo(),Vh=Tt(),vP=(t,e,r={})=>{if(t===e)return!0;t=new mE(t,r),e=new mE(e,r);let i=!1;e:for(let n of t.set){for(let s of e.set){let o=TP(n,s,r);if(i=i||o!==null,o)continue e}if(i)return!1}return!0},OP=[new zh(">=0.0.0-0")],gE=[new zh(">=0.0.0")],TP=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Gh){if(e.length===1&&e[0].semver===Gh)return!0;r.includePrerelease?t=OP:t=gE}if(e.length===1&&e[0].semver===Gh){if(r.includePrerelease)return!0;e=gE}let i=new Set,n,s;for(let p of t)p.operator===">"||p.operator===">="?n=yE(n,p,r):p.operator==="<"||p.operator==="<="?s=wE(s,p,r):i.add(p.semver);if(i.size>1)return null;let o;if(n&&s){if(o=Vh(n.semver,s.semver,r),o>0)return null;if(o===0&&(n.operator!==">="||s.operator!=="<="))return null}for(let p of i){if(n&&!wo(p,String(n),r)||s&&!wo(p,String(s),r))return null;for(let y of e)if(!wo(p,String(y),r))return!1;return!0}let a,l,u,c,h=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,f=n&&!r.includePrerelease&&n.semver.prerelease.length?n.semver:!1;h&&h.prerelease.length===1&&s.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(let p of e){if(c=c||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",n){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(a=yE(n,p,r),a===p&&a!==n)return!1}else if(n.operator===">="&&!wo(n.semver,String(p),r))return!1}if(s){if(h&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===h.major&&p.semver.minor===h.minor&&p.semver.patch===h.patch&&(h=!1),p.operator==="<"||p.operator==="<="){if(l=wE(s,p,r),l===p&&l!==s)return!1}else if(s.operator==="<="&&!wo(s.semver,String(p),r))return!1}if(!p.operator&&(s||n)&&o!==0)return!1}return!(n&&u&&!s&&o!==0||s&&c&&!n&&o!==0||f||h)},yE=(t,e,r)=>{if(!t)return e;let i=Vh(t.semver,e.semver,r);return i>0?t:i<0||e.operator===">"&&t.operator===">="?e:t},wE=(t,e,r)=>{if(!t)return e;let i=Vh(t.semver,e.semver,r);return i<0?t:i>0||e.operator==="<"&&t.operator==="<="?e:t};AE.exports=vP});var Qh=w((pH,_E)=>{"use strict";var Yh=qn(),SE=ho(),CP=He(),bE=Ph(),RP=Li(),IP=Y0(),NP=X0(),xP=Z0(),DP=rA(),PP=nA(),FP=oA(),LP=lA(),$P=cA(),kP=Tt(),qP=pA(),MP=gA(),UP=el(),BP=EA(),jP=bA(),HP=po(),WP=tl(),GP=Lh(),zP=$h(),VP=rl(),YP=il(),QP=kh(),XP=xA(),KP=mo(),JP=Ct(),ZP=yo(),eF=zA(),tF=YA(),rF=XA(),iF=ZA(),nF=tE(),sF=ol(),oF=aE(),aF=uE(),lF=fE(),uF=pE(),cF=EE();_E.exports={parse:RP,valid:IP,clean:NP,inc:xP,diff:DP,major:PP,minor:FP,patch:LP,prerelease:$P,compare:kP,rcompare:qP,compareLoose:MP,compareBuild:UP,sort:BP,rsort:jP,gt:HP,lt:WP,eq:GP,neq:zP,gte:VP,lte:YP,cmp:QP,coerce:XP,Comparator:KP,Range:JP,satisfies:ZP,toComparators:eF,maxSatisfying:tF,minSatisfying:rF,minVersion:iF,validRange:nF,outside:sF,gtr:oF,ltr:aF,intersects:lF,simplifyRange:uF,subset:cF,SemVer:CP,re:Yh.re,src:Yh.src,tokens:Yh.t,SEMVER_SPEC_VERSION:SE.SEMVER_SPEC_VERSION,RELEASE_TYPES:SE.RELEASE_TYPES,compareIdentifiers:bE.compareIdentifiers,rcompareIdentifiers:bE.rcompareIdentifiers}});var nS=w((Ao,Bn)=>{var hF=200,af="__lodash_hash_undefined__",pl=1,LE=2,$E=9007199254740991,al="[object Arguments]",Zh="[object Array]",fF="[object AsyncFunction]",kE="[object Boolean]",qE="[object Date]",ME="[object Error]",UE="[object Function]",dF="[object GeneratorFunction]",ll="[object Map]",BE="[object Number]",pF="[object Null]",Un="[object Object]",vE="[object Promise]",mF="[object Proxy]",jE="[object RegExp]",ul="[object Set]",HE="[object String]",gF="[object Symbol]",yF="[object Undefined]",ef="[object WeakMap]",WE="[object ArrayBuffer]",cl="[object DataView]",wF="[object Float32Array]",AF="[object Float64Array]",EF="[object Int8Array]",SF="[object Int16Array]",bF="[object Int32Array]",_F="[object Uint8Array]",vF="[object Uint8ClampedArray]",OF="[object Uint16Array]",TF="[object Uint32Array]",CF=/[\\^$.*+?()[\]{}|]/g,RF=/^\[object .+?Constructor\]$/,IF=/^(?:0|[1-9]\d*)$/,he={};he[wF]=he[AF]=he[EF]=he[SF]=he[bF]=he[_F]=he[vF]=he[OF]=he[TF]=!0;he[al]=he[Zh]=he[WE]=he[kE]=he[cl]=he[qE]=he[ME]=he[UE]=he[ll]=he[BE]=he[Un]=he[jE]=he[ul]=he[HE]=he[ef]=!1;var GE=typeof global=="object"&&global&&global.Object===Object&&global,NF=typeof self=="object"&&self&&self.Object===Object&&self,dr=GE||NF||Function("return this")(),zE=typeof Ao=="object"&&Ao&&!Ao.nodeType&&Ao,OE=zE&&typeof Bn=="object"&&Bn&&!Bn.nodeType&&Bn,VE=OE&&OE.exports===zE,Xh=VE&&GE.process,TE=function(){try{return Xh&&Xh.binding&&Xh.binding("util")}catch{}}(),CE=TE&&TE.isTypedArray;function xF(t,e){for(var r=-1,i=t==null?0:t.length,n=0,s=[];++r<i;){var o=t[r];e(o,r,t)&&(s[n++]=o)}return s}function DF(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}function PF(t,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}function FF(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}function LF(t){return function(e){return t(e)}}function $F(t,e){return t.has(e)}function kF(t,e){return t?.[e]}function qF(t){var e=-1,r=Array(t.size);return t.forEach(function(i,n){r[++e]=[n,i]}),r}function MF(t,e){return function(r){return t(e(r))}}function UF(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}var BF=Array.prototype,jF=Function.prototype,ml=Object.prototype,Kh=dr["__core-js_shared__"],YE=jF.toString,Xt=ml.hasOwnProperty,RE=function(){var t=/[^.]+$/.exec(Kh&&Kh.keys&&Kh.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),QE=ml.toString,HF=RegExp("^"+YE.call(Xt).replace(CF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),IE=VE?dr.Buffer:void 0,hl=dr.Symbol,NE=dr.Uint8Array,XE=ml.propertyIsEnumerable,WF=BF.splice,$i=hl?hl.toStringTag:void 0,xE=Object.getOwnPropertySymbols,GF=IE?IE.isBuffer:void 0,zF=MF(Object.keys,Object),tf=jn(dr,"DataView"),Eo=jn(dr,"Map"),rf=jn(dr,"Promise"),nf=jn(dr,"Set"),sf=jn(dr,"WeakMap"),So=jn(Object,"create"),VF=Mi(tf),YF=Mi(Eo),QF=Mi(rf),XF=Mi(nf),KF=Mi(sf),DE=hl?hl.prototype:void 0,Jh=DE?DE.valueOf:void 0;function ki(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function JF(){this.__data__=So?So(null):{},this.size=0}function ZF(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function eL(t){var e=this.__data__;if(So){var r=e[t];return r===af?void 0:r}return Xt.call(e,t)?e[t]:void 0}function tL(t){var e=this.__data__;return So?e[t]!==void 0:Xt.call(e,t)}function rL(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=So&&e===void 0?af:e,this}ki.prototype.clear=JF;ki.prototype.delete=ZF;ki.prototype.get=eL;ki.prototype.has=tL;ki.prototype.set=rL;function pr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function iL(){this.__data__=[],this.size=0}function nL(t){var e=this.__data__,r=gl(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():WF.call(e,r,1),--this.size,!0}function sL(t){var e=this.__data__,r=gl(e,t);return r<0?void 0:e[r][1]}function oL(t){return gl(this.__data__,t)>-1}function aL(t,e){var r=this.__data__,i=gl(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}pr.prototype.clear=iL;pr.prototype.delete=nL;pr.prototype.get=sL;pr.prototype.has=oL;pr.prototype.set=aL;function qi(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function lL(){this.size=0,this.__data__={hash:new ki,map:new(Eo||pr),string:new ki}}function uL(t){var e=yl(this,t).delete(t);return this.size-=e?1:0,e}function cL(t){return yl(this,t).get(t)}function hL(t){return yl(this,t).has(t)}function fL(t,e){var r=yl(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}qi.prototype.clear=lL;qi.prototype.delete=uL;qi.prototype.get=cL;qi.prototype.has=hL;qi.prototype.set=fL;function fl(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new qi;++e<r;)this.add(t[e])}function dL(t){return this.__data__.set(t,af),this}function pL(t){return this.__data__.has(t)}fl.prototype.add=fl.prototype.push=dL;fl.prototype.has=pL;function Xr(t){var e=this.__data__=new pr(t);this.size=e.size}function mL(){this.__data__=new pr,this.size=0}function gL(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function yL(t){return this.__data__.get(t)}function wL(t){return this.__data__.has(t)}function AL(t,e){var r=this.__data__;if(r instanceof pr){var i=r.__data__;if(!Eo||i.length<hF-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new qi(i)}return r.set(t,e),this.size=r.size,this}Xr.prototype.clear=mL;Xr.prototype.delete=gL;Xr.prototype.get=yL;Xr.prototype.has=wL;Xr.prototype.set=AL;function EL(t,e){var r=dl(t),i=!r&&LL(t),n=!r&&!i&&of(t),s=!r&&!i&&!n&&iS(t),o=r||i||n||s,a=o?FF(t.length,String):[],l=a.length;for(var u in t)(e||Xt.call(t,u))&&!(o&&(u=="length"||n&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||NL(u,l)))&&a.push(u);return a}function gl(t,e){for(var r=t.length;r--;)if(ZE(t[r][0],e))return r;return-1}function SL(t,e,r){var i=e(t);return dl(t)?i:DF(i,r(t))}function _o(t){return t==null?t===void 0?yF:pF:$i&&$i in Object(t)?RL(t):FL(t)}function PE(t){return bo(t)&&_o(t)==al}function KE(t,e,r,i,n){return t===e?!0:t==null||e==null||!bo(t)&&!bo(e)?t!==t&&e!==e:bL(t,e,r,i,KE,n)}function bL(t,e,r,i,n,s){var o=dl(t),a=dl(e),l=o?Zh:Qr(t),u=a?Zh:Qr(e);l=l==al?Un:l,u=u==al?Un:u;var c=l==Un,h=u==Un,f=l==u;if(f&&of(t)){if(!of(e))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new Xr),o||iS(t)?JE(t,e,r,i,n,s):TL(t,e,l,r,i,n,s);if(!(r&pl)){var p=c&&Xt.call(t,"__wrapped__"),y=h&&Xt.call(e,"__wrapped__");if(p||y){var A=p?t.value():t,b=y?e.value():e;return s||(s=new Xr),n(A,b,r,i,s)}}return f?(s||(s=new Xr),CL(t,e,r,i,n,s)):!1}function _L(t){if(!rS(t)||DL(t))return!1;var e=eS(t)?HF:RF;return e.test(Mi(t))}function vL(t){return bo(t)&&tS(t.length)&&!!he[_o(t)]}function OL(t){if(!PL(t))return zF(t);var e=[];for(var r in Object(t))Xt.call(t,r)&&r!="constructor"&&e.push(r);return e}function JE(t,e,r,i,n,s){var o=r&pl,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(t);if(u&&s.get(e))return u==e;var c=-1,h=!0,f=r&LE?new fl:void 0;for(s.set(t,e),s.set(e,t);++c<a;){var p=t[c],y=e[c];if(i)var A=o?i(y,p,c,e,t,s):i(p,y,c,t,e,s);if(A!==void 0){if(A)continue;h=!1;break}if(f){if(!PF(e,function(b,v){if(!$F(f,v)&&(p===b||n(p,b,r,i,s)))return f.push(v)})){h=!1;break}}else if(!(p===y||n(p,y,r,i,s))){h=!1;break}}return s.delete(t),s.delete(e),h}function TL(t,e,r,i,n,s,o){switch(r){case cl:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case WE:return!(t.byteLength!=e.byteLength||!s(new NE(t),new NE(e)));case kE:case qE:case BE:return ZE(+t,+e);case ME:return t.name==e.name&&t.message==e.message;case jE:case HE:return t==e+"";case ll:var a=qF;case ul:var l=i&pl;if(a||(a=UF),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;i|=LE,o.set(t,e);var c=JE(a(t),a(e),i,n,s,o);return o.delete(t),c;case gF:if(Jh)return Jh.call(t)==Jh.call(e)}return!1}function CL(t,e,r,i,n,s){var o=r&pl,a=FE(t),l=a.length,u=FE(e),c=u.length;if(l!=c&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in e:Xt.call(e,f)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var y=!0;s.set(t,e),s.set(e,t);for(var A=o;++h<l;){f=a[h];var b=t[f],v=e[f];if(i)var O=o?i(v,b,f,e,t,s):i(b,v,f,t,e,s);if(!(O===void 0?b===v||n(b,v,r,i,s):O)){y=!1;break}A||(A=f=="constructor")}if(y&&!A){var I=t.constructor,L=e.constructor;I!=L&&"constructor"in t&&"constructor"in e&&!(typeof I=="function"&&I instanceof I&&typeof L=="function"&&L instanceof L)&&(y=!1)}return s.delete(t),s.delete(e),y}function FE(t){return SL(t,qL,IL)}function yl(t,e){var r=t.__data__;return xL(e)?r[typeof e=="string"?"string":"hash"]:r.map}function jn(t,e){var r=kF(t,e);return _L(r)?r:void 0}function RL(t){var e=Xt.call(t,$i),r=t[$i];try{t[$i]=void 0;var i=!0}catch{}var n=QE.call(t);return i&&(e?t[$i]=r:delete t[$i]),n}var IL=xE?function(t){return t==null?[]:(t=Object(t),xF(xE(t),function(e){return XE.call(t,e)}))}:ML,Qr=_o;(tf&&Qr(new tf(new ArrayBuffer(1)))!=cl||Eo&&Qr(new Eo)!=ll||rf&&Qr(rf.resolve())!=vE||nf&&Qr(new nf)!=ul||sf&&Qr(new sf)!=ef)&&(Qr=function(t){var e=_o(t),r=e==Un?t.constructor:void 0,i=r?Mi(r):"";if(i)switch(i){case VF:return cl;case YF:return ll;case QF:return vE;case XF:return ul;case KF:return ef}return e});function NL(t,e){return e=e??$E,!!e&&(typeof t=="number"||IF.test(t))&&t>-1&&t%1==0&&t<e}function xL(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function DL(t){return!!RE&&RE in t}function PL(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ml;return t===r}function FL(t){return QE.call(t)}function Mi(t){if(t!=null){try{return YE.call(t)}catch{}try{return t+""}catch{}}return""}function ZE(t,e){return t===e||t!==t&&e!==e}var LL=PE(function(){return arguments}())?PE:function(t){return bo(t)&&Xt.call(t,"callee")&&!XE.call(t,"callee")},dl=Array.isArray;function $L(t){return t!=null&&tS(t.length)&&!eS(t)}var of=GF||UL;function kL(t,e){return KE(t,e)}function eS(t){if(!rS(t))return!1;var e=_o(t);return e==UE||e==dF||e==fF||e==mF}function tS(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=$E}function rS(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function bo(t){return t!=null&&typeof t=="object"}var iS=CE?LF(CE):vL;function qL(t){return $L(t)?EL(t):OL(t)}function ML(){return[]}function UL(){return!1}Bn.exports=kL});var oS=w(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.DownloadedUpdateHelper=void 0;Oo.createTempUpdateFile=WL;var BL=require("crypto"),jL=require("fs"),sS=nS(),Ui=hr(),vo=require("path"),lf=class{constructor(e){this.cacheDir=e,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return vo.join(this.cacheDir,"pending")}async validateDownloadedPath(e,r,i,n){if(this.versionInfo!=null&&this.file===e&&this.fileInfo!=null)return sS(this.versionInfo,r)&&sS(this.fileInfo.info,i.info)&&await(0,Ui.pathExists)(e)?e:null;let s=await this.getValidCachedUpdateFile(i,n);return s===null?null:(n.info("Update has already been downloaded to ".concat(e,").")),this._file=s,s)}async setDownloadedFile(e,r,i,n,s,o){this._file=e,this._packageFile=r,this.versionInfo=i,this.fileInfo=n,this._downloadedFileInfo={fileName:s,sha512:n.info.sha512,isAdminRightsRequired:n.info.isAdminRightsRequired===!0},o&&await(0,Ui.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,Ui.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(e,r){let i=this.getUpdateInfoFile();if(!await(0,Ui.pathExists)(i))return null;let s;try{s=await(0,Ui.readJson)(i)}catch(u){let c="No cached update info available";return u.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),c+=" (error on read: ".concat(u.message,")")),r.info(c),null}if(!(s?.fileName!==null))return r.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(e.info.sha512!==s.sha512)return r.info("Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ".concat(s.sha512,", expected: ").concat(e.info.sha512,". Directory for cached update will be cleaned")),await this.cleanCacheDirForPendingUpdate(),null;let a=vo.join(this.cacheDirForPendingUpdate,s.fileName);if(!await(0,Ui.pathExists)(a))return r.info("Cached update file doesn't exist"),null;let l=await HL(a);return e.info.sha512!==l?(r.warn("Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ".concat(l,", expected: ").concat(e.info.sha512)),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=s,a)}getUpdateInfoFile(){return vo.join(this.cacheDirForPendingUpdate,"update-info.json")}};Oo.DownloadedUpdateHelper=lf;function HL(t,e="sha512",r="base64",i){return new Promise((n,s)=>{let o=(0,BL.createHash)(e);o.on("error",s).setEncoding(r),(0,jL.createReadStream)(t,{...i,highWaterMark:1024*1024}).on("error",s).on("end",()=>{o.end(),n(o.read())}).pipe(o,{end:!1})})}async function WL(t,e,r){let i=0,n=vo.join(e,t);for(let s=0;s<3;s++)try{return await(0,Ui.unlink)(n),n}catch(o){if(o.code==="ENOENT")return n;r.warn("Error on remove temp update file: ".concat(o)),n=vo.join(e,"".concat(i++,"-").concat(t))}return n}});var aS=w(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.getAppCacheDir=zL;var uf=require("path"),GL=require("os");function zL(){let t=(0,GL.homedir)(),e;return process.platform==="win32"?e=process.env.LOCALAPPDATA||uf.join(t,"AppData","Local"):process.platform==="darwin"?e=uf.join(t,"Library","Caches"):e=process.env.XDG_CACHE_HOME||uf.join(t,".cache"),e}});var uS=w(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.ElectronAppAdapter=void 0;var lS=require("path"),VL=aS(),hf=class{constructor(e=require("electron").app){this.app=e}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?lS.join(process.resourcesPath,"app-update.yml"):lS.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,VL.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(e){this.app.once("quit",(r,i)=>e(i))}};wl.ElectronAppAdapter=hf});var hS=w(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.ElectronHttpExecutor=Kr.NET_SESSION_NAME=void 0;Kr.getNetSession=cS;var Al=Ie();Kr.NET_SESSION_NAME="electron-updater";function cS(){return require("electron").session.fromPartition(Kr.NET_SESSION_NAME,{cache:!1})}var ff=class extends Al.HttpExecutor{constructor(e){super(),this.proxyLoginCallback=e,this.cachedSession=null}async download(e,r,i){return await i.cancellationToken.createPromise((n,s,o)=>{let a={headers:i.headers||void 0,redirect:"manual"};(0,Al.configureRequestUrl)(e,a),(0,Al.configureRequestOptions)(a),this.doDownload(a,{destination:r,options:i,onCancel:o,callback:l=>{l==null?n(r):s(l)},responseHandler:null},0)})}createRequest(e,r){e.headers&&e.headers.Host&&(e.host=e.headers.Host,delete e.headers.Host),this.cachedSession==null&&(this.cachedSession=cS());let i=require("electron").net.request({...e,session:this.cachedSession});return i.on("response",r),this.proxyLoginCallback!=null&&i.on("login",this.proxyLoginCallback),i}addRedirectHandlers(e,r,i,n,s){e.on("redirect",(o,a,l)=>{e.abort(),n>this.maxRedirects?i(this.createMaxRedirectError()):s(Al.HttpExecutor.prepareRedirectUrlOptions(l,r))})}};Kr.ElectronHttpExecutor=ff});var yS=w((AH,gS)=>{var YL=1/0,QL="[object Symbol]",mS=/[\\^$.*+?()[\]{}|]/g,XL=RegExp(mS.source),KL=typeof global=="object"&&global&&global.Object===Object&&global,JL=typeof self=="object"&&self&&self.Object===Object&&self,ZL=KL||JL||Function("return this")(),e$=Object.prototype,t$=e$.toString,fS=ZL.Symbol,dS=fS?fS.prototype:void 0,pS=dS?dS.toString:void 0;function r$(t){if(typeof t=="string")return t;if(n$(t))return pS?pS.call(t):"";var e=t+"";return e=="0"&&1/t==-YL?"-0":e}function i$(t){return!!t&&typeof t=="object"}function n$(t){return typeof t=="symbol"||i$(t)&&t$.call(t)==QL}function s$(t){return t==null?"":r$(t)}function o$(t){return t=s$(t),t&&XL.test(t)?t.replace(mS,"\\$&"):t}gS.exports=o$});var Jr=w(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.newBaseUrl=l$;Hn.newUrlFromBase=df;Hn.getChannelFilename=u$;Hn.blockmapFiles=c$;var wS=require("url"),a$=yS();function l$(t){let e=new wS.URL(t);return e.pathname.endsWith("/")||(e.pathname+="/"),e}function df(t,e,r=!1){let i=new wS.URL(t,e),n=e.search;return n!=null&&n.length!==0?i.search=n:r&&(i.search="noCache=".concat(Date.now().toString(32))),i}function u$(t){return"".concat(t,".yml")}function c$(t,e,r){let i=df("".concat(t.pathname,".blockmap"),t);return[df("".concat(t.pathname.replace(new RegExp(a$(r),"g"),e),".blockmap"),t),i]}});var Rt=w(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.Provider=void 0;ei.findFile=f$;ei.parseUpdateInfo=d$;ei.getFileList=ES;ei.resolveFiles=p$;var Zr=Ie(),h$=Va(),AS=Jr(),pf=class{constructor(e){this.runtimeOptions=e,this.requestHeaders=null,this.executor=e.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){let e=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(e==="x64"?"":"-".concat(e))}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(e){return"".concat(e).concat(this.getChannelFilePrefix())}get fileExtraDownloadHeaders(){return null}setRequestHeaders(e){this.requestHeaders=e}httpRequest(e,r,i){return this.executor.request(this.createRequestOptions(e,r),i)}createRequestOptions(e,r){let i={};return this.requestHeaders==null?r!=null&&(i.headers=r):i.headers=r==null?this.requestHeaders:{...this.requestHeaders,...r},(0,Zr.configureRequestUrl)(e,i),i}};ei.Provider=pf;function f$(t,e,r){if(t.length===0)throw(0,Zr.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");let i=t.find(n=>n.url.pathname.toLowerCase().endsWith(".".concat(e)));return i??(r==null?t[0]:t.find(n=>!r.some(s=>n.url.pathname.toLowerCase().endsWith(".".concat(s)))))}function d$(t,e,r){if(t==null)throw(0,Zr.newError)("Cannot parse update info from ".concat(e," in the latest release artifacts (").concat(r,"): rawData: null"),"ERR_UPDATER_INVALID_UPDATE_INFO");let i;try{i=(0,h$.load)(t)}catch(n){throw(0,Zr.newError)("Cannot parse update info from ".concat(e," in the latest release artifacts (").concat(r,"): ").concat(n.stack||n.message,", rawData: ").concat(t),"ERR_UPDATER_INVALID_UPDATE_INFO")}return i}function ES(t){let e=t.files;if(e!=null&&e.length>0)return e;if(t.path!=null)return[{url:t.path,sha2:t.sha2,sha512:t.sha512}];throw(0,Zr.newError)("No files provided: ".concat((0,Zr.safeStringifyJson)(t)),"ERR_UPDATER_NO_FILES_PROVIDED")}function p$(t,e,r=i=>i){let n=ES(t).map(a=>{if(a.sha2==null&&a.sha512==null)throw(0,Zr.newError)("Update info doesn't contain nor sha256 neither sha512 checksum: ".concat((0,Zr.safeStringifyJson)(a)),"ERR_UPDATER_NO_CHECKSUM");return{url:(0,AS.newUrlFromBase)(r(a.url),e),info:a}}),s=t.packages,o=s==null?null:s[process.arch]||s.ia32;return o!=null&&(n[0].packageInfo={...o,path:(0,AS.newUrlFromBase)(r(o.path),e).href}),n}});var wf=w(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.GenericProvider=void 0;var SS=Ie(),mf=Jr(),gf=Rt(),yf=class extends gf.Provider{constructor(e,r,i){super(i),this.configuration=e,this.updater=r,this.baseUrl=(0,mf.newBaseUrl)(this.configuration.url)}get channel(){let e=this.updater.channel||this.configuration.channel;return e==null?this.getDefaultChannelName():this.getCustomChannelName(e)}async getLatestVersion(){let e=(0,mf.getChannelFilename)(this.channel),r=(0,mf.newUrlFromBase)(e,this.baseUrl,this.updater.isAddNoCacheQuery);for(let i=0;;i++)try{return(0,gf.parseUpdateInfo)(await this.httpRequest(r),e,r)}catch(n){if(n instanceof SS.HttpError&&n.statusCode===404)throw(0,SS.newError)('Cannot find channel "'.concat(e,'" update info: ').concat(n.stack||n.message),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(n.code==="ECONNREFUSED"&&i<3){await new Promise((s,o)=>{try{setTimeout(s,1e3*i)}catch(a){o(a)}});continue}throw n}}resolveFiles(e){return(0,gf.resolveFiles)(e,this.baseUrl)}};El.GenericProvider=yf});var _S=w(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.BitbucketProvider=void 0;var bS=Ie(),Af=Jr(),Ef=Rt(),Sf=class extends Ef.Provider{constructor(e,r,i){super({...i,isUseMultipleRangeRequest:!1}),this.configuration=e,this.updater=r;let{owner:n,slug:s}=e;this.baseUrl=(0,Af.newBaseUrl)("https://api.bitbucket.org/2.0/repositories/".concat(n,"/").concat(s,"/downloads"))}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){let e=new bS.CancellationToken,r=(0,Af.getChannelFilename)(this.getCustomChannelName(this.channel)),i=(0,Af.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{let n=await this.httpRequest(i,void 0,e);return(0,Ef.parseUpdateInfo)(n,r,i)}catch(n){throw(0,bS.newError)("Unable to find latest version on ".concat(this.toString(),", please ensure release exists: ").concat(n.stack||n.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(e){return(0,Ef.resolveFiles)(e,this.baseUrl)}toString(){let{owner:e,slug:r}=this.configuration;return"Bitbucket (owner: ".concat(e,", slug: ").concat(r,", channel: ").concat(this.channel,")")}};Sl.BitbucketProvider=Sf});var Of=w(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.GitHubProvider=Bi.BaseGitHubProvider=void 0;Bi.computeReleaseNotes=OS;var mr=Ie(),Wn=Qh(),m$=require("url"),Gn=Jr(),_f=Rt(),bf=/\/tag\/([^/]+)$/,bl=class extends _f.Provider{constructor(e,r,i){super({...i,isUseMultipleRangeRequest:!1}),this.options=e,this.baseUrl=(0,Gn.newBaseUrl)((0,mr.githubUrl)(e,r));let n=r==="github.com"?"api.github.com":r;this.baseApiUrl=(0,Gn.newBaseUrl)((0,mr.githubUrl)(e,n))}computeGithubBasePath(e){let r=this.options.host;return r&&!["github.com","api.github.com"].includes(r)?"/api/v3".concat(e):e}};Bi.BaseGitHubProvider=bl;var vf=class extends bl{constructor(e,r,i){super(e,"github.com",i),this.options=e,this.updater=r}get channel(){let e=this.updater.channel||this.options.channel;return e==null?this.getDefaultChannelName():this.getCustomChannelName(e)}async getLatestVersion(){var e,r,i,n,s;let o=new mr.CancellationToken,a=await this.httpRequest((0,Gn.newUrlFromBase)("".concat(this.basePath,".atom"),this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},o),l=(0,mr.parseXml)(a),u=l.element("entry",!1,"No published versions on GitHub"),c=null;try{if(this.updater.allowPrerelease){let b=((e=this.updater)===null||e===void 0?void 0:e.channel)||((r=Wn.prerelease(this.updater.currentVersion))===null||r===void 0?void 0:r[0])||null;if(b===null)c=bf.exec(u.element("link").attribute("href"))[1];else for(let v of l.getElements("entry")){let O=bf.exec(v.element("link").attribute("href"));if(O===null)continue;let I=O[1],L=((i=Wn.prerelease(I))===null||i===void 0?void 0:i[0])||null,ne=!b||["alpha","beta"].includes(b),U=L!==null&&!["alpha","beta"].includes(String(L));if(ne&&!U&&!(b==="beta"&&L==="alpha")){c=I;break}if(L&&L===b){c=I;break}}}else{c=await this.getLatestTagName(o);for(let b of l.getElements("entry"))if(bf.exec(b.element("link").attribute("href"))[1]===c){u=b;break}}}catch(b){throw(0,mr.newError)("Cannot parse releases feed: ".concat(b.stack||b.message,",\nXML:\n").concat(a),"ERR_UPDATER_INVALID_RELEASE_FEED")}if(c==null)throw(0,mr.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let h,f="",p="",y=async b=>{f=(0,Gn.getChannelFilename)(b),p=(0,Gn.newUrlFromBase)(this.getBaseDownloadPath(String(c),f),this.baseUrl);let v=this.createRequestOptions(p);try{return await this.executor.request(v,o)}catch(O){throw O instanceof mr.HttpError&&O.statusCode===404?(0,mr.newError)("Cannot find ".concat(f," in the latest release artifacts (").concat(p,"): ").concat(O.stack||O.message),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):O}};try{let b=this.channel;this.updater.allowPrerelease&&(!((n=Wn.prerelease(c))===null||n===void 0)&&n[0])&&(b=this.getCustomChannelName(String((s=Wn.prerelease(c))===null||s===void 0?void 0:s[0]))),h=await y(b)}catch(b){if(this.updater.allowPrerelease)h=await y(this.getDefaultChannelName());else throw b}let A=(0,_f.parseUpdateInfo)(h,f,p);return A.releaseName==null&&(A.releaseName=u.elementValueOrEmpty("title")),A.releaseNotes==null&&(A.releaseNotes=OS(this.updater.currentVersion,this.updater.fullChangelog,l,u)),{tag:c,...A}}async getLatestTagName(e){let r=this.options,i=r.host==null||r.host==="github.com"?(0,Gn.newUrlFromBase)("".concat(this.basePath,"/latest"),this.baseUrl):new m$.URL("".concat(this.computeGithubBasePath("/repos/".concat(r.owner,"/").concat(r.repo,"/releases")),"/latest"),this.baseApiUrl);try{let n=await this.httpRequest(i,{Accept:"application/json"},e);return n==null?null:JSON.parse(n).tag_name}catch(n){throw(0,mr.newError)("Unable to find latest version on GitHub (".concat(i,"), please ensure a production release exists: ").concat(n.stack||n.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return"/".concat(this.options.owner,"/").concat(this.options.repo,"/releases")}resolveFiles(e){return(0,_f.resolveFiles)(e,this.baseUrl,r=>this.getBaseDownloadPath(e.tag,r.replace(/ /g,"-")))}getBaseDownloadPath(e,r){return"".concat(this.basePath,"/download/").concat(e,"/").concat(r)}};Bi.GitHubProvider=vf;function vS(t){let e=t.elementValueOrEmpty("content");return e==="No content."?"":e}function OS(t,e,r,i){if(!e)return vS(i);let n=[];for(let s of r.getElements("entry")){let o=/\/tag\/v?([^/]+)$/.exec(s.element("link").attribute("href"))[1];Wn.lt(t,o)&&n.push({version:o,note:vS(s)})}return n.sort((s,o)=>Wn.rcompare(s.version,o.version))}});var CS=w(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.KeygenProvider=void 0;var TS=Ie(),Tf=Jr(),Cf=Rt(),Rf=class extends Cf.Provider{constructor(e,r,i){super({...i,isUseMultipleRangeRequest:!1}),this.configuration=e,this.updater=r,this.baseUrl=(0,Tf.newBaseUrl)("https://api.keygen.sh/v1/accounts/".concat(this.configuration.account,"/artifacts?product=").concat(this.configuration.product))}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){let e=new TS.CancellationToken,r=(0,Tf.getChannelFilename)(this.getCustomChannelName(this.channel)),i=(0,Tf.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{let n=await this.httpRequest(i,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},e);return(0,Cf.parseUpdateInfo)(n,r,i)}catch(n){throw(0,TS.newError)("Unable to find latest version on ".concat(this.toString(),", please ensure release exists: ").concat(n.stack||n.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(e){return(0,Cf.resolveFiles)(e,this.baseUrl)}toString(){let{account:e,product:r,platform:i}=this.configuration;return"Keygen (account: ".concat(e,", product: ").concat(r,", platform: ").concat(i,", channel: ").concat(this.channel,")")}};_l.KeygenProvider=Rf});var NS=w(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.PrivateGitHubProvider=void 0;var zn=Ie(),g$=Va(),y$=require("path"),RS=require("url"),IS=Jr(),w$=Of(),A$=Rt(),If=class extends w$.BaseGitHubProvider{constructor(e,r,i,n){super(e,"api.github.com",n),this.updater=r,this.token=i}createRequestOptions(e,r){let i=super.createRequestOptions(e,r);return i.redirect="manual",i}async getLatestVersion(){let e=new zn.CancellationToken,r=(0,IS.getChannelFilename)(this.getDefaultChannelName()),i=await this.getLatestVersionInfo(e),n=i.assets.find(a=>a.name===r);if(n==null)throw(0,zn.newError)("Cannot find ".concat(r," in the release ").concat(i.html_url||i.name),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");let s=new RS.URL(n.url),o;try{o=(0,g$.load)(await this.httpRequest(s,this.configureHeaders("application/octet-stream"),e))}catch(a){throw a instanceof zn.HttpError&&a.statusCode===404?(0,zn.newError)("Cannot find ".concat(r," in the latest release artifacts (").concat(s,"): ").concat(a.stack||a.message),"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):a}return o.assets=i.assets,o}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(e){return{accept:e,authorization:"token ".concat(this.token)}}async getLatestVersionInfo(e){let r=this.updater.allowPrerelease,i=this.basePath;r||(i="".concat(i,"/latest"));let n=(0,IS.newUrlFromBase)(i,this.baseUrl);try{let s=JSON.parse(await this.httpRequest(n,this.configureHeaders("application/vnd.github.v3+json"),e));return r?s.find(o=>o.prerelease)||s[0]:s}catch(s){throw(0,zn.newError)("Unable to find latest version on GitHub (".concat(n,"), please ensure a production release exists: ").concat(s.stack||s.message),"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath("/repos/".concat(this.options.owner,"/").concat(this.options.repo,"/releases"))}resolveFiles(e){return(0,A$.getFileList)(e).map(r=>{let i=y$.posix.basename(r.url).replace(/ /g,"-"),n=e.assets.find(s=>s!=null&&s.name===i);if(n==null)throw(0,zn.newError)('Cannot find asset "'.concat(i,'" in: ').concat(JSON.stringify(e.assets,null,2)),"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new RS.URL(n.url),info:r}})}};vl.PrivateGitHubProvider=If});var PS=w(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.isUrlProbablySupportMultiRangeRequests=DS;Tl.createClient=v$;var Ol=Ie(),E$=_S(),xS=wf(),S$=Of(),b$=CS(),_$=NS();function DS(t){return!t.includes("s3.amazonaws.com")}function v$(t,e,r){if(typeof t=="string")throw(0,Ol.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");let i=t.provider;switch(i){case"github":{let n=t,s=(n.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||n.token;return s==null?new S$.GitHubProvider(n,e,r):new _$.PrivateGitHubProvider(n,e,s,r)}case"bitbucket":return new E$.BitbucketProvider(t,e,r);case"keygen":return new b$.KeygenProvider(t,e,r);case"s3":case"spaces":return new xS.GenericProvider({provider:"generic",url:(0,Ol.getS3LikeProviderBaseUrl)(t),channel:t.channel||null},e,{...r,isUseMultipleRangeRequest:!1});case"generic":{let n=t;return new xS.GenericProvider(n,e,{...r,isUseMultipleRangeRequest:n.useMultipleRangeRequest!==!1&&DS(n.url)})}case"custom":{let n=t,s=n.updateProvider;if(!s)throw(0,Ol.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new s(n,e,r)}default:throw(0,Ol.newError)("Unsupported provider: ".concat(i),"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}});var Cl=w(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.OperationKind=void 0;To.computeOperations=O$;var ji;(function(t){t[t.COPY=0]="COPY",t[t.DOWNLOAD=1]="DOWNLOAD"})(ji||(To.OperationKind=ji={}));function O$(t,e,r){let i=LS(t.files),n=LS(e.files),s=null,o=e.files[0],a=[],l=o.name,u=i.get(l);if(u==null)throw new Error("no file ".concat(l," in old blockmap"));let c=n.get(l),h=0,{checksumToOffset:f,checksumToOldSize:p}=C$(i.get(l),u.offset,r),y=o.offset;for(let A=0;A<c.checksums.length;y+=c.sizes[A],A++){let b=c.sizes[A],v=c.checksums[A],O=f.get(v);O!=null&&p.get(v)!==b&&(r.warn('Checksum ("'.concat(v,'") matches, but size differs (old: ').concat(p.get(v),", new: ").concat(b,")")),O=void 0),O===void 0?(h++,s!=null&&s.kind===ji.DOWNLOAD&&s.end===y?s.end+=b:(s={kind:ji.DOWNLOAD,start:y,end:y+b},FS(s,a,v,A))):s!=null&&s.kind===ji.COPY&&s.end===O?s.end+=b:(s={kind:ji.COPY,start:O,end:O+b},FS(s,a,v,A))}return h>0&&r.info("File".concat(o.name==="file"?"":" "+o.name," has ").concat(h," changed blocks")),a}var T$=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function FS(t,e,r,i){if(T$&&e.length!==0){let n=e[e.length-1];if(n.kind===t.kind&&t.start<n.end&&t.start>n.start){let s=[n.start,n.end,t.start,t.end].reduce((o,a)=>o<a?o:a);throw new Error("operation (block index: ".concat(i,", checksum: ").concat(r,", kind: ").concat(ji[t.kind],") overlaps previous operation (checksum: ").concat(r,"):\n")+"abs: ".concat(n.start," until ").concat(n.end," and ").concat(t.start," until ").concat(t.end,"\n")+"rel: ".concat(n.start-s," until ").concat(n.end-s," and ").concat(t.start-s," until ").concat(t.end-s))}}e.push(t)}function C$(t,e,r){let i=new Map,n=new Map,s=e;for(let o=0;o<t.checksums.length;o++){let a=t.checksums[o],l=t.sizes[o],u=n.get(a);if(u===void 0)i.set(a,s),n.set(a,l);else if(r.debug!=null){let c=u===l?"(same size)":"(size: ".concat(u,", this size: ").concat(l,")");r.debug("".concat(a," duplicated in blockmap ").concat(c,", it doesn't lead to broken differential downloader, just corresponding block will be skipped)"))}s+=l}return{checksumToOffset:i,checksumToOldSize:n}}function LS(t){let e=new Map;for(let r of t)e.set(r.name,r);return e}});var xf=w(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.DataSplitter=void 0;Co.copyData=kS;var Rl=Ie(),R$=require("fs"),I$=require("stream"),N$=Cl(),$S=Buffer.from("\r\n\r\n"),ti;(function(t){t[t.INIT=0]="INIT",t[t.HEADER=1]="HEADER",t[t.BODY=2]="BODY"})(ti||(ti={}));function kS(t,e,r,i,n){let s=(0,R$.createReadStream)("",{fd:r,autoClose:!1,start:t.start,end:t.end-1});s.on("error",i),s.once("end",n),s.pipe(e,{end:!1})}var Nf=class extends I$.Writable{constructor(e,r,i,n,s,o){super(),this.out=e,this.options=r,this.partIndexToTaskIndex=i,this.partIndexToLength=s,this.finishHandler=o,this.partIndex=-1,this.headerListBuffer=null,this.readState=ti.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=n.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(e,r,i){if(this.isFinished){console.error("Trailing ignored data: ".concat(e.length," bytes"));return}this.handleData(e).then(i).catch(i)}async handleData(e){let r=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,Rl.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){let i=Math.min(this.ignoreByteCount,e.length);this.ignoreByteCount-=i,r=i}else if(this.remainingPartDataCount>0){let i=Math.min(this.remainingPartDataCount,e.length);this.remainingPartDataCount-=i,await this.processPartData(e,0,i),r=i}if(r!==e.length){if(this.readState===ti.HEADER){let i=this.searchHeaderListEnd(e,r);if(i===-1)return;r=i,this.readState=ti.BODY,this.headerListBuffer=null}for(;;){if(this.readState===ti.BODY)this.readState=ti.INIT;else{this.partIndex++;let o=this.partIndexToTaskIndex.get(this.partIndex);if(o==null)if(this.isFinished)o=this.options.end;else throw(0,Rl.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");let a=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(a<o)await this.copyExistingData(a,o);else if(a>o)throw(0,Rl.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(r=this.searchHeaderListEnd(e,r),r===-1){this.readState=ti.HEADER;return}}let i=this.partIndexToLength[this.partIndex],n=r+i,s=Math.min(n,e.length);if(await this.processPartStarted(e,r,s),this.remainingPartDataCount=i-(s-r),this.remainingPartDataCount>0)return;if(r=n+this.boundaryLength,r>=e.length){this.ignoreByteCount=this.boundaryLength-(e.length-n);return}}}}copyExistingData(e,r){return new Promise((i,n)=>{let s=()=>{if(e===r){i();return}let o=this.options.tasks[e];if(o.kind!==N$.OperationKind.COPY){n(new Error("Task kind must be COPY"));return}kS(o,this.out,this.options.oldFileFd,n,()=>{e++,s()})};s()})}searchHeaderListEnd(e,r){let i=e.indexOf($S,r);if(i!==-1)return i+$S.length;let n=r===0?e:e.slice(r);return this.headerListBuffer==null?this.headerListBuffer=n:this.headerListBuffer=Buffer.concat([this.headerListBuffer,n]),-1}onPartEnd(){let e=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==e)throw(0,Rl.newError)("Expected length: ".concat(e," differs from actual: ").concat(this.actualPartLength),"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(e,r,i){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(e,r,i)}processPartData(e,r,i){this.actualPartLength+=i-r;let n=this.out;return n.write(r===0&&e.length===i?e:e.slice(r,i))?Promise.resolve():new Promise((s,o)=>{n.on("error",o),n.once("drain",()=>{n.removeListener("error",o),s()})})}};Co.DataSplitter=Nf});var US=w(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.executeTasksUsingMultipleRangeRequests=x$;Il.checkIsRangesSupported=Pf;var Df=Ie(),qS=xf(),MS=Cl();function x$(t,e,r,i,n){let s=o=>{if(o>=e.length){t.fileMetadataBuffer!=null&&r.write(t.fileMetadataBuffer),r.end();return}let a=o+1e3;D$(t,{tasks:e,start:o,end:Math.min(e.length,a),oldFileFd:i},r,()=>s(a),n)};return s}function D$(t,e,r,i,n){let s="bytes=",o=0,a=new Map,l=[];for(let h=e.start;h<e.end;h++){let f=e.tasks[h];f.kind===MS.OperationKind.DOWNLOAD&&(s+="".concat(f.start,"-").concat(f.end-1,", "),a.set(o,h),o++,l.push(f.end-f.start))}if(o<=1){let h=f=>{if(f>=e.end){i();return}let p=e.tasks[f++];if(p.kind===MS.OperationKind.COPY)(0,qS.copyData)(p,r,e.oldFileFd,n,()=>h(f));else{let y=t.createRequestOptions();y.headers.Range="bytes=".concat(p.start,"-").concat(p.end-1);let A=t.httpExecutor.createRequest(y,b=>{Pf(b,n)&&(b.pipe(r,{end:!1}),b.once("end",()=>h(f)))});t.httpExecutor.addErrorAndTimeoutHandlers(A,n),A.end()}};h(e.start);return}let u=t.createRequestOptions();u.headers.Range=s.substring(0,s.length-2);let c=t.httpExecutor.createRequest(u,h=>{if(!Pf(h,n))return;let f=(0,Df.safeGetHeader)(h,"content-type"),p=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(f);if(p==null){n(new Error('Content-Type "multipart/byteranges" is expected, but got "'.concat(f,'"')));return}let y=new qS.DataSplitter(r,e,a,p[1]||p[2],l,i);y.on("error",n),h.pipe(y),h.on("end",()=>{setTimeout(()=>{c.abort(),n(new Error("Response ends without calling any handlers"))},1e4)})});t.httpExecutor.addErrorAndTimeoutHandlers(c,n),c.end()}function Pf(t,e){if(t.statusCode>=400)return e((0,Df.createHttpError)(t)),!1;if(t.statusCode!==206){let r=(0,Df.safeGetHeader)(t,"accept-ranges");if(r==null||r==="none")return e(new Error("Server doesn't support Accept-Ranges (response code ".concat(t.statusCode,")"))),!1}return!0}});var BS=w(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.ProgressDifferentialDownloadCallbackTransform=void 0;var P$=require("stream"),Vn;(function(t){t[t.COPY=0]="COPY",t[t.DOWNLOAD=1]="DOWNLOAD"})(Vn||(Vn={}));var Ff=class extends P$.Transform{constructor(e,r,i){super(),this.progressDifferentialDownloadInfo=e,this.cancellationToken=r,this.onProgress=i,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=Vn.COPY,this.nextUpdate=this.start+1e3}_transform(e,r,i){if(this.cancellationToken.cancelled){i(new Error("cancelled"),null);return}if(this.operationType==Vn.COPY){i(null,e);return}this.transferred+=e.length,this.delta+=e.length;let n=Date.now();n>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=n+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((n-this.start)/1e3))}),this.delta=0),i(null,e)}beginFileCopy(){this.operationType=Vn.COPY}beginRangeDownload(){this.operationType=Vn.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(e){if(this.cancellationToken.cancelled){e(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,e(null)}};Nl.ProgressDifferentialDownloadCallbackTransform=Ff});var kf=w(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.DifferentialDownloader=void 0;var Ro=Ie(),Lf=hr(),F$=require("fs"),L$=xf(),$$=require("url"),xl=Cl(),jS=US(),k$=BS(),$f=class{constructor(e,r,i){this.blockAwareFileInfo=e,this.httpExecutor=r,this.options=i,this.fileMetadataBuffer=null,this.logger=i.logger}createRequestOptions(){let e={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,Ro.configureRequestUrl)(this.options.newUrl,e),(0,Ro.configureRequestOptions)(e),e}doDownload(e,r){if(e.version!==r.version)throw new Error("version is different (".concat(e.version," - ").concat(r.version,"), full download is required"));let i=this.logger,n=(0,xl.computeOperations)(e,r,i);i.debug!=null&&i.debug(JSON.stringify(n,null,2));let s=0,o=0;for(let l of n){let u=l.end-l.start;l.kind===xl.OperationKind.DOWNLOAD?s+=u:o+=u}let a=this.blockAwareFileInfo.size;if(s+o+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==a)throw new Error("Internal error, size mismatch: downloadSize: ".concat(s,", copySize: ").concat(o,", newSize: ").concat(a));return i.info("Full: ".concat(HS(a),", To download: ").concat(HS(s)," (").concat(Math.round(s/(a/100)),"%)")),this.downloadFile(n)}downloadFile(e){let r=[],i=()=>Promise.all(r.map(n=>(0,Lf.close)(n.descriptor).catch(s=>{this.logger.error('cannot close file "'.concat(n.path,'": ').concat(s))})));return this.doDownloadFile(e,r).then(i).catch(n=>i().catch(s=>{try{this.logger.error("cannot close files: ".concat(s))}catch(o){try{console.error(o)}catch{}}throw n}).then(()=>{throw n}))}async doDownloadFile(e,r){let i=await(0,Lf.open)(this.options.oldFile,"r");r.push({descriptor:i,path:this.options.oldFile});let n=await(0,Lf.open)(this.options.newFile,"w");r.push({descriptor:n,path:this.options.newFile});let s=(0,F$.createWriteStream)(this.options.newFile,{fd:n});await new Promise((o,a)=>{let l=[],u;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){let v=[],O=0;for(let L of e)L.kind===xl.OperationKind.DOWNLOAD&&(v.push(L.end-L.start),O+=L.end-L.start);let I={expectedByteCounts:v,grandTotal:O};u=new k$.ProgressDifferentialDownloadCallbackTransform(I,this.options.cancellationToken,this.options.onProgress),l.push(u)}let c=new Ro.DigestTransform(this.blockAwareFileInfo.sha512);c.isValidateOnEnd=!1,l.push(c),s.on("finish",()=>{s.close(()=>{r.splice(1,1);try{c.validate()}catch(v){a(v);return}o(void 0)})}),l.push(s);let h=null;for(let v of l)v.on("error",a),h==null?h=v:h=h.pipe(v);let f=l[0],p;if(this.options.isUseMultipleRangeRequest){p=(0,jS.executeTasksUsingMultipleRangeRequests)(this,e,f,i,a),p(0);return}let y=0,A=null;this.logger.info("Differential download: ".concat(this.options.newUrl));let b=this.createRequestOptions();b.redirect="manual",p=v=>{var O,I;if(v>=e.length){this.fileMetadataBuffer!=null&&f.write(this.fileMetadataBuffer),f.end();return}let L=e[v++];if(L.kind===xl.OperationKind.COPY){u&&u.beginFileCopy(),(0,L$.copyData)(L,f,i,a,()=>p(v));return}let ne="bytes=".concat(L.start,"-").concat(L.end-1);b.headers.range=ne,(I=(O=this.logger)===null||O===void 0?void 0:O.debug)===null||I===void 0||I.call(O,"download range: ".concat(ne)),u&&u.beginRangeDownload();let U=this.httpExecutor.createRequest(b,G=>{G.on("error",a),G.on("aborted",()=>{a(new Error("response has been aborted by the server"))}),G.statusCode>=400&&a((0,Ro.createHttpError)(G)),G.pipe(f,{end:!1}),G.once("end",()=>{u&&u.endRangeDownload(),++y===100?(y=0,setTimeout(()=>p(v),1e3)):p(v)})});U.on("redirect",(G,E,F)=>{this.logger.info("Redirect to ".concat(q$(F))),A=F,(0,Ro.configureRequestUrl)(new $$.URL(A),b),U.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(U,a),U.end()},p(0)})}async readRemoteBytes(e,r){let i=Buffer.allocUnsafe(r+1-e),n=this.createRequestOptions();n.headers.range="bytes=".concat(e,"-").concat(r);let s=0;if(await this.request(n,o=>{o.copy(i,s),s+=o.length}),s!==i.length)throw new Error("Received data length ".concat(s," is not equal to expected ").concat(i.length));return i}request(e,r){return new Promise((i,n)=>{let s=this.httpExecutor.createRequest(e,o=>{(0,jS.checkIsRangesSupported)(o,n)&&(o.on("error",n),o.on("aborted",()=>{n(new Error("response has been aborted by the server"))}),o.on("data",r),o.on("end",()=>i()))});this.httpExecutor.addErrorAndTimeoutHandlers(s,n),s.end()})}};Dl.DifferentialDownloader=$f;function HS(t,e=" KB"){return new Intl.NumberFormat("en").format((t/1024).toFixed(2))+e}function q$(t){let e=t.indexOf("?");return e<0?t:t.substring(0,e)}});var WS=w(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.GenericDifferentialDownloader=void 0;var M$=kf(),qf=class extends M$.DifferentialDownloader{download(e,r){return this.doDownload(e,r)}};Pl.GenericDifferentialDownloader=qf});var Ll=w(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.NoOpLogger=Xn.AppUpdater=void 0;var tt=Ie(),U$=require("crypto"),B$=require("os"),j$=require("events"),Yn=hr(),H$=Va(),Mf=L0(),Hi=require("path"),Wi=Qh(),GS=oS(),W$=uS(),zS=hS(),G$=wf(),Qn=Gi(),Uf=PS(),z$=require("zlib"),V$=Jr(),Y$=WS(),Bf=class t extends j$.EventEmitter{get channel(){return this._channel}set channel(e){if(this._channel!=null){if(typeof e!="string")throw(0,tt.newError)("Channel must be a string, but got: ".concat(e),"ERR_UPDATER_INVALID_CHANNEL");if(e.length===0)throw(0,tt.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=e,this.allowDowngrade=!0}addAuthHeader(e){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:e})}get netSession(){return(0,zS.getNetSession)()}get logger(){return this._logger}set logger(e){this._logger=e??new Fl}set updateConfigPath(e){this.clientPromise=null,this._appUpdateConfigPath=e,this.configOnDisk=new Mf.Lazy(()=>this.loadUpdateConfig())}constructor(e,r){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new Qn.UpdaterSignal(this),this._appUpdateConfigPath=null,this.clientPromise=null,this.stagingUserIdPromise=new Mf.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new Mf.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",s=>{this._logger.error("Error: ".concat(s.stack||s.message))}),r==null?(this.app=new W$.ElectronAppAdapter,this.httpExecutor=new zS.ElectronHttpExecutor((s,o)=>this.emit("login",s,o))):(this.app=r,this.httpExecutor=null);let i=this.app.version,n=(0,Wi.parse)(i);if(n==null)throw(0,tt.newError)('App version is not a valid semver version: "'.concat(i,'"'),"ERR_UPDATER_INVALID_VERSION");this.currentVersion=n,this.allowPrerelease=Q$(n),e!=null&&(this.setFeedURL(e),typeof e!="string"&&e.requestHeaders&&(this.requestHeaders=e.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(e){let r=this.createProviderRuntimeOptions(),i;typeof e=="string"?i=new G$.GenericProvider({provider:"generic",url:e},this,{...r,isUseMultipleRangeRequest:(0,Uf.isUrlProbablySupportMultiRangeRequests)(e)}):i=(0,Uf.createClient)(e,this,r),this.clientPromise=Promise.resolve(i)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let e=this.checkForUpdatesPromise;if(e!=null)return this._logger.info("Checking for update (already in progress)"),e;let r=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),e=this.doCheckForUpdates().then(i=>(r(),i)).catch(i=>{throw r(),this.emit("error",i,"Cannot check for updates: ".concat((i.stack||i).toString())),i}),this.checkForUpdatesPromise=e,e}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(e){return this.checkForUpdates().then(r=>r?.downloadPromise?(r.downloadPromise.then(()=>{let i=t.formatDownloadNotification(r.updateInfo.version,this.app.name,e);new(require("electron")).Notification(i).show()}),r):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),r))}static formatDownloadNotification(e,r,i){return i==null&&(i={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),i={title:i.title.replace("{appName}",r).replace("{version}",e),body:i.body.replace("{appName}",r).replace("{version}",e)},i}async isStagingMatch(e){let r=e.stagingPercentage,i=r;if(i==null)return!0;if(i=parseInt(i,10),isNaN(i))return this._logger.warn("Staging percentage is NaN: ".concat(r)),!0;i=i/100;let n=await this.stagingUserIdPromise.value,o=tt.UUID.parse(n).readUInt32BE(12)/4294967295;return this._logger.info("Staging percentage: ".concat(i,", percentage: ").concat(o,", user id: ").concat(n)),o<i}computeFinalHeaders(e){return this.requestHeaders!=null&&Object.assign(e,this.requestHeaders),e}async isUpdateAvailable(e){let r=(0,Wi.parse)(e.version);if(r==null)throw(0,tt.newError)('This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "'.concat(e.version,'"'),"ERR_UPDATER_INVALID_VERSION");let i=this.currentVersion;if((0,Wi.eq)(r,i))return!1;let n=e?.minimumSystemVersion,s=(0,B$.release)();if(n)try{if((0,Wi.lt)(s,n))return this._logger.info("Current OS version ".concat(s," is less than the minimum OS version required ").concat(n," for version ").concat(s)),!1}catch(u){this._logger.warn("Failed to compare current OS version(".concat(s,") with minimum OS version(").concat(n,"): ").concat((u.message||u).toString()))}if(!await this.isStagingMatch(e))return!1;let a=(0,Wi.gt)(r,i),l=(0,Wi.lt)(r,i);return a?!0:this.allowDowngrade&&l}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(i=>(0,Uf.createClient)(i,this,this.createProviderRuntimeOptions())));let e=await this.clientPromise,r=await this.stagingUserIdPromise.value;return e.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":r})),{info:await e.getLatestVersion(),provider:e}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");let e=await this.getUpdateInfoAndProvider(),r=e.info;if(!await this.isUpdateAvailable(r))return this._logger.info("Update for version ".concat(this.currentVersion.format()," is not available (latest version: ").concat(r.version,", downgrade is ").concat(this.allowDowngrade?"allowed":"disallowed",").")),this.emit("update-not-available",r),{versionInfo:r,updateInfo:r};this.updateInfoAndProvider=e,this.onUpdateAvailable(r);let i=new tt.CancellationToken;return{versionInfo:r,updateInfo:r,cancellationToken:i,downloadPromise:this.autoDownload?this.downloadUpdate(i):null}}onUpdateAvailable(e){this._logger.info("Found version ".concat(e.version," (url: ").concat((0,tt.asArray)(e.files).map(r=>r.url).join(", "),")")),this.emit("update-available",e)}downloadUpdate(e=new tt.CancellationToken){let r=this.updateInfoAndProvider;if(r==null){let n=new Error("Please check update first");return this.dispatchError(n),Promise.reject(n)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info("Downloading update from ".concat((0,tt.asArray)(r.info.files).map(n=>n.url).join(", ")));let i=n=>{if(!(n instanceof tt.CancellationError))try{this.dispatchError(n)}catch(s){this._logger.warn("Cannot dispatch error event: ".concat(s.stack||s))}return n};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:r,requestHeaders:this.computeRequestHeaders(r.provider),cancellationToken:e,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(n=>{throw i(n)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(e){this.emit("error",e,(e.stack||e).toString())}dispatchUpdateDownloaded(e){this.emit(Qn.UPDATE_DOWNLOADED,e)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,H$.load)(await(0,Yn.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(e){let r=e.fileExtraDownloadHeaders;if(r!=null){let i=this.requestHeaders;return i==null?r:{...r,...i}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){let e=Hi.join(this.app.userDataPath,".updaterId");try{let i=await(0,Yn.readFile)(e,"utf-8");if(tt.UUID.check(i))return i;this._logger.warn("Staging user id file exists, but content was invalid: ".concat(i))}catch(i){i.code!=="ENOENT"&&this._logger.warn("Couldn't read staging user ID, creating a blank one: ".concat(i))}let r=tt.UUID.v5((0,U$.randomBytes)(4096),tt.UUID.OID);this._logger.info("Generated new staging user ID: ".concat(r));try{await(0,Yn.outputFile)(e,r)}catch(i){this._logger.warn("Couldn't write out staging user ID: ".concat(i))}return r}get isAddNoCacheQuery(){let e=this.requestHeaders;if(e==null)return!0;for(let r of Object.keys(e)){let i=r.toLowerCase();if(i==="authorization"||i==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let e=this.downloadedUpdateHelper;if(e==null){let r=(await this.configOnDisk.value).updaterCacheDirName,i=this._logger;r==null&&i.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");let n=Hi.join(this.app.baseCachePath,r||this.app.name);i.debug!=null&&i.debug("updater cache dir: ".concat(n)),e=new GS.DownloadedUpdateHelper(n),this.downloadedUpdateHelper=e}return e}async executeDownload(e){let r=e.fileInfo,i={headers:e.downloadUpdateOptions.requestHeaders,cancellationToken:e.downloadUpdateOptions.cancellationToken,sha2:r.info.sha2,sha512:r.info.sha512};this.listenerCount(Qn.DOWNLOAD_PROGRESS)>0&&(i.onProgress=O=>this.emit(Qn.DOWNLOAD_PROGRESS,O));let n=e.downloadUpdateOptions.updateInfoAndProvider.info,s=n.version,o=r.packageInfo;function a(){let O=decodeURIComponent(e.fileInfo.url.pathname);return O.endsWith(".".concat(e.fileExtension))?Hi.basename(O):e.fileInfo.info.url}let l=await this.getOrCreateDownloadHelper(),u=l.cacheDirForPendingUpdate;await(0,Yn.mkdir)(u,{recursive:!0});let c=a(),h=Hi.join(u,c),f=o==null?null:Hi.join(u,"package-".concat(s).concat(Hi.extname(o.path)||".7z")),p=async O=>(await l.setDownloadedFile(h,f,n,r,c,O),await e.done({...n,downloadedFile:h}),f==null?[h]:[h,f]),y=this._logger,A=await l.validateDownloadedPath(h,n,r,y);if(A!=null)return h=A,await p(!1);let b=async()=>(await l.clear().catch(()=>{}),await(0,Yn.unlink)(h).catch(()=>{})),v=await(0,GS.createTempUpdateFile)("temp-".concat(c),u,y);try{await e.task(v,i,f,b),await(0,tt.retry)(()=>(0,Yn.rename)(v,h),60,500,0,0,O=>O instanceof Error&&/^EBUSY:/.test(O.message))}catch(O){throw await b(),O instanceof tt.CancellationError&&(y.info("cancelled"),this.emit("update-cancelled",n)),O}return y.info("New version ".concat(s," has been downloaded to ").concat(h)),await p(!0)}async differentialDownloadInstaller(e,r,i,n,s){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;let o=(0,V$.blockmapFiles)(e.url,this.app.version,r.updateInfoAndProvider.info.version);this._logger.info('Download block maps (old: "'.concat(o[0],'", new: ').concat(o[1],")"));let a=async c=>{let h=await this.httpExecutor.downloadToBuffer(c,{headers:r.requestHeaders,cancellationToken:r.cancellationToken});if(h==null||h.length===0)throw new Error('Blockmap "'.concat(c.href,'" is empty'));try{return JSON.parse((0,z$.gunzipSync)(h).toString())}catch(f){throw new Error('Cannot parse blockmap "'.concat(c.href,'", error: ').concat(f))}},l={newUrl:e.url,oldFile:Hi.join(this.downloadedUpdateHelper.cacheDir,s),logger:this._logger,newFile:i,isUseMultipleRangeRequest:n.isUseMultipleRangeRequest,requestHeaders:r.requestHeaders,cancellationToken:r.cancellationToken};this.listenerCount(Qn.DOWNLOAD_PROGRESS)>0&&(l.onProgress=c=>this.emit(Qn.DOWNLOAD_PROGRESS,c));let u=await Promise.all(o.map(c=>a(c)));return await new Y$.GenericDifferentialDownloader(e.info,this.httpExecutor,l).download(u[0],u[1]),!1}catch(o){if(this._logger.error("Cannot download differentially, fallback to full download: ".concat(o.stack||o)),this._testOnlyOptions!=null)throw o;return!0}}};Xn.AppUpdater=Bf;function Q$(t){let e=(0,Wi.prerelease)(t);return e!=null&&e.length>0}var Fl=class{info(e){}warn(e){}error(e){}};Xn.NoOpLogger=Fl});var Kn=w($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.BaseUpdater=void 0;var VS=require("child_process"),X$=Ll(),jf=class extends X$.AppUpdater{constructor(e,r){super(e,r),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(e=!1,r=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(e,e?r:this.autoRunAppAfterInstall)?setImmediate(()=>{require("electron").autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(e){return super.executeDownload({...e,done:r=>(this.dispatchUpdateDownloaded(r),this.addQuitHandler(),Promise.resolve())})}install(e=!1,r=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;let i=this.downloadedUpdateHelper,n=i&&i.file?process.platform==="linux"?i.file.replace(/ /g,"\\ "):i.file:null,s=i==null?null:i.downloadedFileInfo;if(n==null||s==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info("Install: isSilent: ".concat(e,", isForceRunAfter: ").concat(r)),this.doInstall({installerPath:n,isSilent:e,isForceRunAfter:r,isAdminRightsRequired:s.isAdminRightsRequired})}catch(o){return this.dispatchError(o),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(e=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(e!==0){this._logger.info("Update will be not installed on quit because application is quitting with exit code ".concat(e));return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){let{name:e}=this.app,r='"'.concat(e,' would like to update"'),i=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),n=[i];return/kdesudo/i.test(i)?(n.push("--comment",r),n.push("-c")):/gksudo/i.test(i)?n.push("--message",r):/pkexec/i.test(i)&&n.push("--disable-internal-agent"),n.join(" ")}spawnSyncLog(e,r=[],i={}){return this._logger.info("Executing: ".concat(e," with args: ").concat(r)),(0,VS.spawnSync)(e,r,{env:{...process.env,...i},encoding:"utf-8",shell:!0}).stdout.trim()}async spawnLog(e,r=[],i=void 0,n="ignore"){return this._logger.info("Executing: ".concat(e," with args: ").concat(r)),new Promise((s,o)=>{try{let a={stdio:n,env:i,detached:!0},l=(0,VS.spawn)(e,r,a);l.on("error",u=>{o(u)}),l.unref(),l.pid!==void 0&&s(!0)}catch(a){o(a)}})}};$l.BaseUpdater=jf});var Wf=w(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;var Jn=hr(),K$=kf(),J$=require("zlib"),Hf=class extends K$.DifferentialDownloader{async download(){let e=this.blockAwareFileInfo,r=e.size,i=r-(e.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(i,r-1);let n=YS(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await Z$(this.options.oldFile),n)}};kl.FileWithEmbeddedBlockMapDifferentialDownloader=Hf;function YS(t){return JSON.parse((0,J$.inflateRawSync)(t).toString())}async function Z$(t){let e=await(0,Jn.open)(t,"r");try{let r=(await(0,Jn.fstat)(e)).size,i=Buffer.allocUnsafe(4);await(0,Jn.read)(e,i,0,i.length,r-i.length);let n=Buffer.allocUnsafe(i.readUInt32BE(0));return await(0,Jn.read)(e,n,0,n.length,r-i.length-n.length),await(0,Jn.close)(e),YS(n)}catch(r){throw await(0,Jn.close)(e),r}}});var zf=w(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.AppImageUpdater=void 0;var QS=Ie(),XS=require("child_process"),ek=hr(),tk=require("fs"),Io=require("path"),rk=Kn(),ik=Wf(),KS=Gi(),nk=Rt(),Gf=class extends rk.BaseUpdater{constructor(e,r){super(e,r)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider,i=(0,nk.findFile)(r.resolveFiles(e.updateInfoAndProvider.info),"AppImage",["rpm","deb"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:i,downloadUpdateOptions:e,task:async(n,s)=>{let o=process.env.APPIMAGE;if(o==null)throw(0,QS.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");let a=!1;try{let l={newUrl:i.url,oldFile:o,logger:this._logger,newFile:n,isUseMultipleRangeRequest:r.isUseMultipleRangeRequest,requestHeaders:e.requestHeaders,cancellationToken:e.cancellationToken};this.listenerCount(KS.DOWNLOAD_PROGRESS)>0&&(l.onProgress=u=>this.emit(KS.DOWNLOAD_PROGRESS,u)),await new ik.FileWithEmbeddedBlockMapDifferentialDownloader(i.info,this.httpExecutor,l).download()}catch(l){this._logger.error("Cannot download differentially, fallback to full download: ".concat(l.stack||l)),a=process.platform==="linux"}a&&await this.httpExecutor.download(i.url,n,s),await(0,ek.chmod)(n,493)}})}doInstall(e){let r=process.env.APPIMAGE;if(r==null)throw(0,QS.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,tk.unlinkSync)(r);let i,n=Io.basename(r);Io.basename(e.installerPath)===n||!/\d+\.\d+\.\d+/.test(n)?i=r:i=Io.join(Io.dirname(r),Io.basename(e.installerPath)),(0,XS.execFileSync)("mv",["-f",e.installerPath,i]),i!==r&&this.emit("appimage-filename-updated",i);let s={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return e.isForceRunAfter?this.spawnLog(i,[],s):(s.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,XS.execFileSync)(i,[],{env:s})),!0}};ql.AppImageUpdater=Gf});var Yf=w(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.DebUpdater=void 0;var sk=Kn(),JS=Gi(),ok=Rt(),Vf=class extends sk.BaseUpdater{constructor(e,r){super(e,r)}doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider,i=(0,ok.findFile)(r.resolveFiles(e.updateInfoAndProvider.info),"deb",["AppImage","rpm"]);return this.executeDownload({fileExtension:"deb",fileInfo:i,downloadUpdateOptions:e,task:async(n,s)=>{this.listenerCount(JS.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(JS.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(i.url,n,s)}})}doInstall(e){let r=this.wrapSudo(),i=/pkexec/i.test(r)?"":'"',n=["dpkg","-i",e.installerPath,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(r,["".concat(i,"/bin/bash"),"-c","'".concat(n.join(" "),"'").concat(i)]),e.isForceRunAfter&&this.app.relaunch(),!0}};Ml.DebUpdater=Vf});var Xf=w(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.RpmUpdater=void 0;var ak=Kn(),ZS=Gi(),lk=Rt(),Qf=class extends ak.BaseUpdater{constructor(e,r){super(e,r)}doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider,i=(0,lk.findFile)(r.resolveFiles(e.updateInfoAndProvider.info),"rpm",["AppImage","deb"]);return this.executeDownload({fileExtension:"rpm",fileInfo:i,downloadUpdateOptions:e,task:async(n,s)=>{this.listenerCount(ZS.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(ZS.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(i.url,n,s)}})}doInstall(e){let r=e.installerPath,i=this.wrapSudo(),n=/pkexec/i.test(i)?"":'"',s=this.spawnSyncLog("which zypper"),o;return s?o=[s,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",r]:o=[this.spawnSyncLog("which dnf || which yum"),"-y","install",r],this.spawnSyncLog(i,["".concat(n,"/bin/bash"),"-c","'".concat(o.join(" "),"'").concat(n)]),e.isForceRunAfter&&this.app.relaunch(),!0}};Ul.RpmUpdater=Qf});var Jf=w(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.MacUpdater=void 0;var eb=Ie(),tb=hr(),rb=require("fs"),ib=require("path"),uk=require("http"),ck=Ll(),hk=Rt(),nb=require("child_process"),sb=require("crypto"),Kf=class extends ck.AppUpdater{constructor(e,r){super(e,r),this.nativeUpdater=require("electron").autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",i=>{this._logger.warn(i),this.emit("error",i)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(e){this._logger.debug!=null&&this._logger.debug(e)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(e=>{e&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider.resolveFiles(e.updateInfoAndProvider.info),i=this._logger,n="sysctl.proc_translated",s=!1;try{this.debug("Checking for macOS Rosetta environment"),s=(0,nb.execFileSync)("sysctl",[n],{encoding:"utf8"}).includes("".concat(n,": 1")),i.info("Checked for macOS Rosetta environment (isRosetta=".concat(s,")"))}catch(h){i.warn("sysctl shell command to check for macOS Rosetta environment failed: ".concat(h))}let o=!1;try{this.debug("Checking for arm64 in uname");let f=(0,nb.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");i.info("Checked 'uname -a': arm64=".concat(f)),o=o||f}catch(h){i.warn("uname shell command to check for arm64 failed: ".concat(h))}o=o||process.arch==="arm64"||s;let a=h=>{var f;return h.url.pathname.includes("arm64")||((f=h.info.url)===null||f===void 0?void 0:f.includes("arm64"))};o&&r.some(a)?r=r.filter(h=>o===a(h)):r=r.filter(h=>!a(h));let l=(0,hk.findFile)(r,"zip",["pkg","dmg"]);if(l==null)throw(0,eb.newError)("ZIP file not provided: ".concat((0,eb.safeStringifyJson)(r)),"ERR_UPDATER_ZIP_FILE_NOT_FOUND");let u=e.updateInfoAndProvider.provider,c="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:l,downloadUpdateOptions:e,task:async(h,f)=>{let p=ib.join(this.downloadedUpdateHelper.cacheDir,c),y=()=>(0,tb.pathExistsSync)(p)?!e.disableDifferentialDownload:(i.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1),A=!0;y()&&(A=await this.differentialDownloadInstaller(l,e,h,u,c)),A&&await this.httpExecutor.download(l.url,h,f)},done:h=>{if(!e.disableDifferentialDownload)try{let f=ib.join(this.downloadedUpdateHelper.cacheDir,c);(0,rb.copyFileSync)(h.downloadedFile,f)}catch(f){this._logger.warn("Unable to copy file for caching for future differential downloads: ".concat(f.message))}return this.updateDownloaded(l,h)}})}async updateDownloaded(e,r){var i;let n=r.downloadedFile,s=(i=e.info.size)!==null&&i!==void 0?i:(await(0,tb.stat)(n)).size,o=this._logger,a="fileToProxy=".concat(e.url.href);this.closeServerIfExists(),this.debug("Creating proxy server for native Squirrel.Mac (".concat(a,")")),this.server=(0,uk.createServer)(),this.debug("Proxy server for native Squirrel.Mac is created (".concat(a,")")),this.server.on("close",()=>{o.info("Proxy server for native Squirrel.Mac is closed (".concat(a,")"))});let l=u=>{let c=u.address();return typeof c=="string"?c:"http://127.0.0.1:".concat(c?.port)};return await new Promise((u,c)=>{let h=(0,sb.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),f=Buffer.from("autoupdater:".concat(h),"ascii"),p="/".concat((0,sb.randomBytes)(64).toString("hex"),".zip");this.server.on("request",(y,A)=>{let b=y.url;if(o.info("".concat(b," requested")),b==="/"){if(!y.headers.authorization||y.headers.authorization.indexOf("Basic ")===-1){A.statusCode=401,A.statusMessage="Invalid Authentication Credentials",A.end(),o.warn("No authenthication info");return}let I=y.headers.authorization.split(" ")[1],L=Buffer.from(I,"base64").toString("ascii"),[ne,U]=L.split(":");if(ne!=="autoupdater"||U!==h){A.statusCode=401,A.statusMessage="Invalid Authentication Credentials",A.end(),o.warn("Invalid authenthication credentials");return}let G=Buffer.from('{ "url": "'.concat(l(this.server)).concat(p,'" }'));A.writeHead(200,{"Content-Type":"application/json","Content-Length":G.length}),A.end(G);return}if(!b.startsWith(p)){o.warn("".concat(b," requested, but not supported")),A.writeHead(404),A.end();return}o.info("".concat(p," requested by Squirrel.Mac, pipe ").concat(n));let v=!1;A.on("finish",()=>{v||(this.nativeUpdater.removeListener("error",c),u([]))});let O=(0,rb.createReadStream)(n);O.on("error",I=>{try{A.end()}catch(L){o.warn("cannot end response: ".concat(L))}v=!0,this.nativeUpdater.removeListener("error",c),c(new Error('Cannot pipe "'.concat(n,'": ').concat(I)))}),A.writeHead(200,{"Content-Type":"application/zip","Content-Length":s}),O.pipe(A)}),this.debug("Proxy server for native Squirrel.Mac is starting to listen (".concat(a,")")),this.server.listen(0,"127.0.0.1",()=>{this.debug("Proxy server for native Squirrel.Mac is listening (address=".concat(l(this.server),", ").concat(a,")")),this.nativeUpdater.setFeedURL({url:l(this.server),headers:{"Cache-Control":"no-cache",Authorization:"Basic ".concat(f.toString("base64"))}}),this.dispatchUpdateDownloaded(r),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",c),this.nativeUpdater.checkForUpdates()):u([])})})}quitAndInstall(){this.squirrelDownloadedUpdate?(this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()):(this.nativeUpdater.on("update-downloaded",()=>{this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()}),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};Bl.MacUpdater=Kf});var ub=w(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.verifySignature=dk;var ob=Ie(),lb=require("child_process"),fk=require("os"),ab=require("path");function dk(t,e,r){return new Promise((i,n)=>{let s=e.replace(/'/g,"''");r.info("Verifying signature ".concat(s)),(0,lb.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command","\"Get-AuthenticodeSignature -LiteralPath '".concat(s,"' | ConvertTo-Json -Compress\"")],{shell:!0,timeout:20*1e3},(o,a,l)=>{var u;try{if(o!=null||l){Zf(r,o,l,n),i(null);return}let c=pk(a);if(c.Status===0){try{let y=ab.normalize(c.Path),A=ab.normalize(e);if(r.info("LiteralPath: ".concat(y,". Update Path: ").concat(A)),y!==A){Zf(r,new Error("LiteralPath of ".concat(y," is different than ").concat(A)),l,n),i(null);return}}catch(y){r.warn("Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ".concat((u=y.message)!==null&&u!==void 0?u:y.stack))}let f=(0,ob.parseDn)(c.SignerCertificate.Subject),p=!1;for(let y of t){let A=(0,ob.parseDn)(y);if(A.size?p=Array.from(A.keys()).every(v=>A.get(v)===f.get(v)):y===f.get("CN")&&(r.warn("Signature validated using only CN ".concat(y,". Please add your full Distinguished Name (DN) to publisherNames configuration")),p=!0),p){i(null);return}}}let h="publisherNames: ".concat(t.join(" | "),", raw info: ")+JSON.stringify(c,(f,p)=>f==="RawData"?void 0:p,2);r.warn("Sign verification failed, installer signed with incorrect certificate: ".concat(h)),i(h)}catch(c){Zf(r,c,null,n),i(null);return}})})}function pk(t){let e=JSON.parse(t);delete e.PrivateKey,delete e.IsOSBinary,delete e.SignatureType;let r=e.SignerCertificate;return r!=null&&(delete r.Archived,delete r.Extensions,delete r.Handle,delete r.HasPrivateKey,delete r.SubjectName),e}function Zf(t,e,r,i){if(mk()){t.warn("Cannot execute Get-AuthenticodeSignature: ".concat(e||r,". Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher."));return}try{(0,lb.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(n){t.warn("Cannot execute ConvertTo-Json: ".concat(n.message,". Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher."));return}e!=null&&i(e),r&&i(new Error("Cannot execute Get-AuthenticodeSignature, stderr: ".concat(r,". Failing signature validation due to unknown stderr.")))}function mk(){let t=fk.release();return t.startsWith("6.")&&!t.startsWith("6.3")}});var rd=w(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.NsisUpdater=void 0;var jl=Ie(),cb=require("path"),gk=Kn(),yk=Wf(),hb=Gi(),wk=Rt(),Ak=hr(),Ek=ub(),fb=require("url"),td=class extends gk.BaseUpdater{constructor(e,r){super(e,r),this._verifyUpdateCodeSignature=(i,n)=>(0,Ek.verifySignature)(i,n,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(e){e&&(this._verifyUpdateCodeSignature=e)}doDownloadUpdate(e){let r=e.updateInfoAndProvider.provider,i=(0,wk.findFile)(r.resolveFiles(e.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:e,fileInfo:i,task:async(n,s,o,a)=>{let l=i.packageInfo,u=l!=null&&o!=null;if(u&&e.disableWebInstaller)throw(0,jl.newError)("Unable to download new version ".concat(e.updateInfoAndProvider.info.version,". Web Installers are disabled"),"ERR_UPDATER_WEB_INSTALLER_DISABLED");!u&&!e.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(u||e.disableDifferentialDownload||await this.differentialDownloadInstaller(i,e,n,r,jl.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(i.url,n,s);let c=await this.verifySignature(n);if(c!=null)throw await a(),(0,jl.newError)("New version ".concat(e.updateInfoAndProvider.info.version," is not signed by the application owner: ").concat(c),"ERR_UPDATER_INVALID_SIGNATURE");if(u&&await this.differentialDownloadWebPackage(e,l,o,r))try{await this.httpExecutor.download(new fb.URL(l.path),o,{headers:e.requestHeaders,cancellationToken:e.cancellationToken,sha512:l.sha512})}catch(h){try{await(0,Ak.unlink)(o)}catch{}throw h}}})}async verifySignature(e){let r;try{if(r=(await this.configOnDisk.value).publisherName,r==null)return null}catch(i){if(i.code==="ENOENT")return null;throw i}return await this._verifyUpdateCodeSignature(Array.isArray(r)?r:[r],e)}doInstall(e){let r=["--updated"];e.isSilent&&r.push("/S"),e.isForceRunAfter&&r.push("--force-run"),this.installDirectory&&r.push("/D=".concat(this.installDirectory));let i=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;i!=null&&r.push("--package-file=".concat(i));let n=()=>{this.spawnLog(cb.join(process.resourcesPath,"elevate.exe"),[e.installerPath].concat(r)).catch(s=>this.dispatchError(s))};return e.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),n(),!0):(this.spawnLog(e.installerPath,r).catch(s=>{let o=s.code;this._logger.info("Cannot run installer: error code: ".concat(o,', error message: "').concat(s.message,'", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT')),o==="UNKNOWN"||o==="EACCES"?n():o==="ENOENT"?require("electron").shell.openPath(e.installerPath).catch(a=>this.dispatchError(a)):this.dispatchError(s)}),!0)}async differentialDownloadWebPackage(e,r,i,n){if(r.blockMapSize==null)return!0;try{let s={newUrl:new fb.URL(r.path),oldFile:cb.join(this.downloadedUpdateHelper.cacheDir,jl.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:i,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:n.isUseMultipleRangeRequest,cancellationToken:e.cancellationToken};this.listenerCount(hb.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(hb.DOWNLOAD_PROGRESS,o)),await new yk.FileWithEmbeddedBlockMapDifferentialDownloader(r,this.httpExecutor,s).download()}catch(s){return this._logger.error("Cannot download differentially, fallback to full download: ".concat(s.stack||s)),process.platform==="win32"}return!1}};Hl.NsisUpdater=td});var Gi=w(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.UpdaterSignal=K.UPDATE_DOWNLOADED=K.DOWNLOAD_PROGRESS=K.NsisUpdater=K.MacUpdater=K.RpmUpdater=K.DebUpdater=K.AppImageUpdater=K.Provider=K.CancellationToken=K.NoOpLogger=K.AppUpdater=K.BaseUpdater=void 0;var Sk=Ie();Object.defineProperty(K,"CancellationToken",{enumerable:!0,get:function(){return Sk.CancellationToken}});var db=hr(),bk=require("path"),_k=Kn();Object.defineProperty(K,"BaseUpdater",{enumerable:!0,get:function(){return _k.BaseUpdater}});var pb=Ll();Object.defineProperty(K,"AppUpdater",{enumerable:!0,get:function(){return pb.AppUpdater}});Object.defineProperty(K,"NoOpLogger",{enumerable:!0,get:function(){return pb.NoOpLogger}});var vk=Rt();Object.defineProperty(K,"Provider",{enumerable:!0,get:function(){return vk.Provider}});var Ok=zf();Object.defineProperty(K,"AppImageUpdater",{enumerable:!0,get:function(){return Ok.AppImageUpdater}});var Tk=Yf();Object.defineProperty(K,"DebUpdater",{enumerable:!0,get:function(){return Tk.DebUpdater}});var Ck=Xf();Object.defineProperty(K,"RpmUpdater",{enumerable:!0,get:function(){return Ck.RpmUpdater}});var Rk=Jf();Object.defineProperty(K,"MacUpdater",{enumerable:!0,get:function(){return Rk.MacUpdater}});var Ik=rd();Object.defineProperty(K,"NsisUpdater",{enumerable:!0,get:function(){return Ik.NsisUpdater}});var ri;function Nk(){if(process.platform==="win32")ri=new(rd()).NsisUpdater;else if(process.platform==="darwin")ri=new(Jf()).MacUpdater;else{ri=new(zf()).AppImageUpdater;try{let t=bk.join(process.resourcesPath,"package-type");if(!(0,db.existsSync)(t))return ri;console.info("Checking for beta autoupdate feature for deb/rpm distributions");let e=(0,db.readFileSync)(t).toString().trim();switch(console.info("Found package-type:",e),e){case"deb":ri=new(Yf()).DebUpdater;break;case"rpm":ri=new(Xf()).RpmUpdater;break;default:break}}catch(t){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",t.message)}}return ri}Object.defineProperty(K,"autoUpdater",{enumerable:!0,get:()=>ri||Nk()});K.DOWNLOAD_PROGRESS="download-progress";K.UPDATE_DOWNLOADED="update-downloaded";var id=class{constructor(e){this.emitter=e}login(e){Wl(this.emitter,"login",e)}progress(e){Wl(this.emitter,K.DOWNLOAD_PROGRESS,e)}updateDownloaded(e){Wl(this.emitter,K.UPDATE_DOWNLOADED,e)}updateCancelled(e){Wl(this.emitter,"update-cancelled",e)}};K.UpdaterSignal=id;var xk=!1;function Wl(t,e,r){xk?t.on(e,(...i)=>{console.log("%s %s",e,i),r(...i)}):t.on(e,r)}});var Eb=w((WH,Ab)=>{var P={child:require("child_process"),crypto:require("crypto"),fs:require("fs"),os:require("os"),path:require("path"),process,util:require("util")};function Dk(t,e){var r=P.process.platform;if(r==="darwin")return $k(t,e);if(r==="linux")return Fk(t,e);if(r==="win32")return Hk(t,e);e(new Error("Platform not yet supported."))}function It(t){if(typeof t!="string")throw new Error("Expected a string.");return t.replace(/"/g,'\\"')}function Pk(){if(arguments.length<1||arguments.length>3)throw new Error("Wrong number of arguments.");var t=arguments[0],e={},r=function(){};if(typeof t!="string")throw new Error("Command should be a string.");if(arguments.length===2)if(P.util.isObject(arguments[1]))e=arguments[1];else if(P.util.isFunction(arguments[1]))r=arguments[1];else throw new Error("Expected options or callback.");else if(arguments.length===3){if(P.util.isObject(arguments[1]))e=arguments[1];else throw new Error("Expected options to be an object.");if(P.util.isFunction(arguments[2]))r=arguments[2];else throw new Error("Expected callback to be a function.")}if(/^sudo/i.test(t))return r(new Error('Command should not be prefixed with "sudo".'));if(typeof e.name>"u"){var i=P.process.title;if(mb(i))e.name=i;else return r(new Error("process.title cannot be used as a valid name."))}else if(!mb(e.name)){var n="";return n+="options.name must be alphanumeric only ",n+="(spaces are allowed) and <= 70 characters.",r(new Error(n))}if(typeof e.icns<"u"){if(typeof e.icns!="string")return r(new Error("options.icns must be a string if provided."));if(e.icns.trim().length===0)return r(new Error("options.icns must not be empty if provided."))}if(typeof e.env<"u"){if(typeof e.env!="object")return r(new Error("options.env must be an object if provided."));if(Object.keys(e.env).length===0)return r(new Error("options.env must not be empty if provided."));for(var s in e.env){var o=e.env[s];if(typeof s!="string"||typeof o!="string")return r(new Error("options.env environment variables must be strings."));if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(s))return r(new Error("options.env has an invalid environment variable name: "+JSON.stringify(s)));if(/[\r\n]/.test(o))return r(new Error("options.env has an invalid environment variable value: "+JSON.stringify(o)))}}var a=P.process.platform;if(a!=="darwin"&&a!=="linux"&&a!=="win32")return r(new Error("Platform not yet supported."));var l={command:t,options:e,uuid:void 0,path:void 0};Dk(l,r)}function Fk(t,e){Lk(t,function(r,i){if(r)return e(r);var n=[];n.push('cd "'+It(P.process.cwd())+'";');for(var s in t.options.env){var o=t.options.env[s];n.push("export "+s+'="'+It(o)+'";')}n.push('"'+It(i)+'"'),/kdesudo/i.test(i)?(n.push("--comment",'"'+t.options.name+' wants to make changes. Enter your password to allow this."'),n.push("-d"),n.push("--")):/pkexec/i.test(i)&&n.push("--disable-internal-agent");var a="SUDOPROMPT\n";n.push('/bin/bash -c "echo '+It(a.trim())+"; "+It(t.command)+'"'),n=n.join(" "),P.child.exec(n,{encoding:"utf-8",maxBuffer:Xk},function(l,u,c){var h=u&&u.slice(0,a.length)===a;h&&(u=u.slice(a.length)),l&&!h&&(/No authentication agent found/.test(c)?l.message=Qk:l.message=Gl),e(l,u,c)})})}function Lk(t,e){var r=0,i=["/usr/bin/kdesudo","/usr/bin/pkexec"];function n(){if(r===i.length)return e(new Error("Unable to find pkexec or kdesudo."));var s=i[r++];P.fs.stat(s,function(o){if(o){if(o.code==="ENOTDIR"||o.code==="ENOENT")return n();e(o)}else e(void 0,s)})}n()}function $k(t,e){var r=P.os.tmpdir();if(!r)return e(new Error("os.tmpdir() not defined."));var i=P.process.env.USER;if(!i)return e(new Error("env['USER'] not defined."));yb(t,function(n,s){if(n)return e(n);t.uuid=s,t.path=P.path.join(r,t.uuid,t.options.name+".app");function o(a,l,u){gb(P.path.dirname(t.path),function(c){if(a)return e(a);if(c)return e(c);e(void 0,l,u)})}kk(t,function(a,l,u){if(a)return o(a,l,u);Mk(t,function(c){if(c)return o(c);Bk(t,function(h,f,p){if(h)return o(h,f,p);qk(t,function(y){if(y)return o(y);Uk(t,function(A,b,v){if(A)return o(A,b,v);jk(t,o)})})})})})})}function kk(t,e){var r=P.path.dirname(t.path);P.fs.mkdir(r,function(i){if(i)return e(i);var n=P.path.join(r,"sudo-prompt-applet.zip");P.fs.writeFile(n,Yk,"base64",function(s){if(s)return e(s);var o=[];o.push("/usr/bin/unzip"),o.push("-o"),o.push('"'+It(n)+'"'),o.push('-d "'+It(t.path)+'"'),o=o.join(" "),P.child.exec(o,{encoding:"utf-8"},e)})})}function qk(t,e){var r=P.path.join(t.path,"Contents","MacOS","sudo-prompt-command"),i=[];i.push('cd "'+It(P.process.cwd())+'"');for(var n in t.options.env){var s=t.options.env[n];i.push("export "+n+'="'+It(s)+'"')}i.push(t.command),i=i.join("\n"),P.fs.writeFile(r,i,"utf-8",e)}function Mk(t,e){if(!t.options.icns)return e();P.fs.readFile(t.options.icns,function(r,i){if(r)return e(r);var n=P.path.join(t.path,"Contents","Resources","applet.icns");P.fs.writeFile(n,i,e)})}function Uk(t,e){var r=P.path.join(t.path,"Contents","MacOS","applet"),i={cwd:P.path.dirname(r),encoding:"utf-8"};P.child.exec("./"+P.path.basename(r),i,e)}function Bk(t,e){var r=P.path.join(t.path,"Contents","Info.plist"),i=It(r),n=It("CFBundleName"),s=t.options.name+" Password Prompt";if(/'/.test(s))return e(new Error("Value should not contain single quotes."));var o=[];o.push("/usr/bin/defaults"),o.push("write"),o.push('"'+i+'"'),o.push('"'+n+'"'),o.push("'"+s+"'"),o=o.join(" "),P.child.exec(o,{encoding:"utf-8"},e)}function jk(t,e){var r=P.path.join(t.path,"Contents","MacOS");P.fs.readFile(P.path.join(r,"code"),"utf-8",function(i,n){if(i){if(i.code==="ENOENT")return e(new Error(Gl));e(i)}else P.fs.readFile(P.path.join(r,"stdout"),"utf-8",function(s,o){if(s)return e(s);P.fs.readFile(P.path.join(r,"stderr"),"utf-8",function(a,l){if(a)return e(a);n=parseInt(n.trim(),10),n===0?e(void 0,o,l):(a=new Error("Command failed: "+t.command+"\n"+l),a.code=n,e(a,o,l))})})})}function gb(t,e){if(typeof t!="string"||!t.trim())return e(new Error("Argument path not defined."));var r=[];if(P.process.platform==="win32"){if(/"/.test(t))return e(new Error("Argument path cannot contain double-quotes."));r.push('rmdir /s /q "'+t+'"')}else r.push("/bin/rm"),r.push("-rf"),r.push('"'+It(P.path.normalize(t))+'"');r=r.join(" "),P.child.exec(r,{encoding:"utf-8"},e)}function yb(t,e){P.crypto.randomBytes(256,function(r,i){r&&(i=Date.now()+""+Math.random());var n=P.crypto.createHash("SHA256");n.update("sudo-prompt-3"),n.update(t.options.name),n.update(t.command),n.update(i);var s=n.digest("hex").slice(-32);if(!s||typeof s!="string"||s.length!==32)return e(new Error("Expected a valid UUID."));e(void 0,s)})}function mb(t){return!(!/^[a-z0-9 ]+$/i.test(t)||t.trim().length===0||t.length>70)}function Hk(t,e){var r=P.os.tmpdir();if(!r)return e(new Error("os.tmpdir() not defined."));yb(t,function(i,n){if(i)return e(i);if(t.uuid=n,t.path=P.path.join(r,t.uuid),/"/.test(t.path))return e(new Error("instance.path cannot contain double-quotes."));t.pathElevate=P.path.join(t.path,"elevate.vbs"),t.pathExecute=P.path.join(t.path,"execute.bat"),t.pathCommand=P.path.join(t.path,"command.bat"),t.pathStdout=P.path.join(t.path,"stdout"),t.pathStderr=P.path.join(t.path,"stderr"),t.pathStatus=P.path.join(t.path,"status"),P.fs.mkdir(t.path,function(s){if(s)return e(s);function o(a,l,u){gb(t.path,function(c){if(a)return e(a);if(c)return e(c);e(void 0,l,u)})}Vk(t,function(a){if(a)return o(a);zk(t,function(l){if(l)return o(l);Wk(t,function(u,c,h){if(u)return o(u,c,h);wb(t,function(f){if(f)return o(f);Gk(t,o)})})})})})})}function Wk(t,e){var r=[];r.push("powershell.exe"),r.push("Start-Process"),r.push("-FilePath"),r.push("\"'"+t.pathExecute.replace(/'/g,"`'")+"'\""),r.push("-WindowStyle hidden"),r.push("-Verb runAs"),r=r.join(" ");var i=P.child.exec(r,{encoding:"utf-8"},function(n,s,o){if(n)return e(new Error(Gl),s,o);e()});i.stdin.end()}function Gk(t,e){P.fs.readFile(t.pathStatus,"utf-8",function(r,i){if(r)return e(r);P.fs.readFile(t.pathStdout,"utf-8",function(n,s){if(n)return e(n);P.fs.readFile(t.pathStderr,"utf-8",function(o,a){if(o)return e(o);i=parseInt(i.trim(),10),i===0?e(void 0,s,a):(o=new Error("Command failed: "+t.command+"\r\n"+a),o.code=i,e(o,s,a))})})})}function wb(t,e){P.fs.stat(t.pathStatus,function(r,i){r&&r.code==="ENOENT"||i.size<2?setTimeout(function(){P.fs.stat(t.pathStdout,function(n){if(n)return e(new Error(Gl));wb(t,e)})},1e3):r?e(r):e()})}function zk(t,e){var r=P.process.cwd();if(/"/.test(r))return e(new Error("process.cwd() cannot contain double-quotes."));var i=[];i.push("@echo off"),i.push("chcp 65001>nul"),i.push('cd /d "'+r+'"');for(var n in t.options.env){var s=t.options.env[n];i.push("set "+n+"="+s.replace(/([<>\\|&^])/g,"^$1"))}i.push(t.command),i=i.join("\r\n"),P.fs.writeFile(t.pathCommand,i,"utf-8",e)}function Vk(t,e){var r=[];r.push("@echo off"),r.push('call "'+t.pathCommand+'" > "'+t.pathStdout+'" 2> "'+t.pathStderr+'"'),r.push('(echo %ERRORLEVEL%) > "'+t.pathStatus+'"'),r=r.join("\r\n"),P.fs.writeFile(t.pathExecute,r,"utf-8",e)}Ab.exports.exec=Pk;var Yk="UEsDBAoAAAAAAO1YcEcAAAAAAAAAAAAAAAAJABwAQ29udGVudHMvVVQJAAPNnElWLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACACgeXBHlHaGqKEBAAC+AwAAEwAcAENvbnRlbnRzL0luZm8ucGxpc3RVVAkAA1zWSVYtkRBXdXgLAAEE9QEAAAQUAAAAfZNRb5swFIWfl1/BeA9OpSmqJkqVBCJFop1VyKQ9Ta59S6wa27NNCfv1M0naJWTsEXO+c8+9vo7v97UI3sBYruRdeBPNwgAkVYzL6i7cluvpbXifTOLP6bdV+QNngRbcugBvl/lmFYRThBZaC0AoLdMA55uiDLwHQtljGIQ75/RXhNq2jUiviqiqe6FF2CgNxnW5N5t6IGKOhb7M0f0ijj9lnLpk8il+hS5ZrZeNZAIWQqj2ge+B5YoSwX8T5xEbo17ktc40gIZQCm8glK5BuieovP5Dbp3xHSeZrHyCXYxO3wM+2wNtHHkWMAQP/bkxbkOVXPMxKuK0Dz6CMh+Wv3AwQ9gPM7INU1NtVK3Ha8sXlfoB+m6J6b4fRzv0mkezMf6R1Fe5MbG2VYYF+L+lMaGvpIKy01cOC4zzMazYKeNOQYuDYkjfjMcteCWJa8w/Zi2ugubFA5e8buqisw7qU81ltzB0xx3QC5/TFh7J/e385/zL+7+/wWbR/LwIOl/dvHiCXw03YFfEPJ9dwsWu5sV2kwnod3QoeLeL0eGdJJM/UEsDBAoAAAAAAHSBjkgAAAAAAAAAAAAAAAAPABwAQ29udGVudHMvTWFjT1MvVVQJAAMbpQ9XLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACABVHBdH7Dk4KTIIAADIYQAAFQAcAENvbnRlbnRzL01hY09TL2FwcGxldFVUCQADMiPZVVOlD1d1eAsAAQT1AQAABBQAAADtnG9sHEcVwGfti7M1/rONLNVtXHqpzsipis+pHOSWFOzEm25at3XrJI2ozbK+W/suuds79vaSuCKSpaOIxRy1+NSPRPAhlWj7AVRaQCWpTRz+CEo+RSKCCho4K67kVhUyAeV4b3fWt17fXZqKFgHvp8zO3/dmdmfPmtl5L7+8/uPXGWMNELZCaGRMgmjHIlxaBCibdcoGsewCljGCIAiCIAiCIAiCIP7r+M21d67zjb/zEaAdwr1bGHuWMQH2/2wAgqqODj0kf0F+8nGfoFRbJ8p9U0C5g/KRgwEZqZLGfrfwwJx+LP2kVWkelD9zJ2NfBr1nWt2xrhNisxWZ3Ex6MpNSc1Z+soqOO+5i7JMYt7vj9BC5jiZXBwirCT2V1c0qOgZAxwMYt9cbRyxnmUljusa9mKBjGON2tgG/PlXNGyeSRlxNGlOZKjpeBR0KxsFx+MB7VJy5GB46OOSrCLPKfEjrH3/gFry+4zOpuH8sm+VF5srW6ltVjZQ3HVnL3KRDDLsflMSADpyDyjuR0urp6AAdHRgHdOD9iOs6Ypl0OmPUupeecOW19OsQAmn3tzBy4LFH5OED3jz0MbYouM8D460BOdTXCaEF6tsgLkF8GeJPQBj16Rb4PTf5xl2NH4J8a5Vy1N3F3OcZzefMaCo5GeVTuJ2P4cUf/aH5qbbP73/utpfeevdbLzwfYfy+Q80woGan/1E+ljo/703g77IaOJY479t5rqFLDag9OjaTs/R0dCQ5aWrmTHS/qaX1ExnzWC66L2PqY7p5PBnTc71TXnn0sG7mkhkjFx3a0IL30e/rQxB+EXL68J4BBLe73r298DySk5tlGPtJY1BmOhZTc727PBH2Ke+ZhF35nTyP80oQBEEQBPFRcJTZVwpvrxZWpLmJkN0VKT4q2iORUGFBOPfnBuFX9nhELOG67f1D9pWxpw4XVrrmTklz+ZY5Wfwurm/t3ffi9cE+uM41vYbbj2fP5kNXt9sXiopwVRj6xhPlr160mttfuVi4Fs2vXv2rfc5u7UeZfxQ+y4pPh/JrpyUUBjmrofzmadGXKf0eui7KK/ZwJLQUiuRAe+mLUFQ+tFKUV3npd7AU9ytz8iqIiXYoUnoBsqdxDbXk3CXcRov9lYhoW5EQjBxb4NoSY9iQsvn5+QSuusrduAybL3eHIIIbLqyIS9CHlY3loB8rldVKuLfyOsE1+a6zhUVxYsFp3Amqz8tr7Lz8dza1JF8TmC3/syivYVtcfxcWOycWQDvuLcrdnc61y7mGnWsErgmsXDbK5TKkscnypJvGhsuH3TQ2X37YTaPQ8ucw7W6t1LR2TFfjekqb0SGTiedTOmz0klZSSyWf0U01pqVSufXGmThsjs20OpU3Yrjuxbnu4u+GP8b1LO6PcX2L4Q6+v8Q07u9aQFLy71Ckt54TIfjfNdzfDkMYhTAOIXHXh39vCYIgCIIgCIIgCIL4z3Nm+84/Ci1Nn8b0ryHsgbBX1rbgOXD7LZJzNtrC0/gFqYOn8csQ/GONguQchPXzcvy+9CBzvk84HxkO+tJH3bRz5Fb0pb/nS3/fl/6BL/2aL43faLzz3Wbmju8W5p6pttaoR9THjgyZ0zEeH2eqqmbNzLShpXVIpxOqflKP5S1dTehaXDeZqhvHk2bGYOo+LZXal0lnM4ZuWMPJXFazYgmmPp7VjWF9SsunrPVa1HpMn0lPm2r8hGZO3aea+nQyZ+mmmtNjFp5i4oG0lTChE+eDj2pm8lbSgDFoln4yCRp00zQyEDmZtBZLbGxnanHzgWh092d29e/uv+/f+DIQBEEQBEEQBEEQ/7P81rX/FxoZm/Xs/5UmtP8PO/W3M9fGvKoPAEfYXLQJ1HOpmk+AJx80OOb5m/URGG9z9c378rVs9F15tPXP1dS3wvVtC+Q9/H4DFX21fQcY9zvo9eXrj6++D0Af1zfqy9eyx3f16QnVMayufr+zXN+sL99YRx/O69er+RdIgXkNxJv9DfBTDIxLPa6Zudr6enz5euO6ke9Bj7TRzr0noK+JbczfyA9hgOvr9OX98t57XNFX3ydhlOsL+2T8+oK/ucrvNOCfEHbbXhAqeebLB/0V7oYp7+Pt8PsZWnl1+urRpAn7SUCcYBX/hkth95kd2cFYllX3bxB4+xCrzcCO6v4PbXzo1fwbEM/H4ds/f/nCgZH+8k+j0vNPv7Jlz7qPQ1PFx+FVPoZ76ozj42K87YP9/cT7xuf9UfpSeP0MsJvzp0A8/4g3w+78ef4R+F4QBEEQBPH/w1Gm2FeUwturytwpUSnmJfta4Q3h3J8aFeE9xf7d1ZBSOCcqhftZ/m+YKuG6wV4qaQzdGED0Z2jJ/zpa9ZcegjIF7fkVaIBrt11nJxYOOepXpPPyKjsvvytOLcnvCWxJfh87V+xTa0rx1Kpj0a8UFqWJhXL3fgHt9xXn+rCz7Bop3rkTEkNj5e7bIZ7HNRZb/ku5XE6g58HyZUzdj6mLjh1/Pbt7XMt5dvfvtLl1Fbv7BtbhrtyEPW6V038H1yE88yQTTkqC1LJVnIeaCNe7dr3sEPEe6lCb9LWGfa3efvNG8pe5fF8NeW8g3n7jCI+/xOOEVH19KvF9oudHH2n/YOtYgiAIgiAIgiAIgiA+fm69mx3aO8bYtkHn/xlwDq8nkwaavz9h9swzc+DWwRrm71A5CJVVjeChTtk26Fqwu0fxQjUL+9vqHVV/KC53OUd+bJxVfBkw7/gzCO5pr3dOK/g+WUQDeZlV/A2QRwJ5THjn1/xcd9BfhlT1KbgpVwLn+W2amGr2//8CUEsDBBQAAAAIAAVHj0ga7FYjfQEAAKoCAAAhABwAQ29udGVudHMvTWFjT1Mvc3Vkby1wcm9tcHQtc2NyaXB0VVQJAAOJkBBXipAQV3V4CwABBPUBAAAEFAAAAI1SO08cMRDu91cMHIKGxUB5xSGEUqTlFKWMvPYca+EXnjGXy6/PeNcg0qVay+PvObs5U5OLatI0DxvYIwNVm4BdQGIdMhxSkauJ8K1i7FOjvSdwB2A+/WJnXpEJdEGwjvTk0W6HhTW8WldgzKDedVF2Ug2tLn7svz3DDpTFdxWr93C/u7wbVKWyoDhVM/8XZAOPOXvcm+IyXxGcizeaUca0XJ1D0CfQnlEysE2VwbuII0br4gvdCMF37m9IoC39+oxTO2EpS8oZJdtRS0aIKY5/sCQoyLVEMMki6Ghl0BGN9SeuICkPIctXDHDDSB9oGEQi1yZWUAda8EZnIcR/eIOOVao+9TrbkpYFjLmkkHk0KYSGvdt12/e71cP6Hs2c4OJBemtsYusplVX+GLHQ7DKkQ098/ZF38dLEpRCeNUMlMW90BIseeQkWtuu2qKmIyDHCuqFuo1N11Ud/1Cf6CHb7Sfxld2ATklQoUGEDActfZ5326WU74G/HcDv8BVBLAwQKAAAAAADtWHBHqiAGewgAAAAIAAAAEAAcAENvbnRlbnRzL1BrZ0luZm9VVAkAA82cSVYqkRBXdXgLAAEE9QEAAAQUAAAAQVBQTGFwbHRQSwMECgAAAAAAm3lwRwAAAAAAAAAAAAAAABMAHABDb250ZW50cy9SZXNvdXJjZXMvVVQJAANW1klWLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACACAeXBHfrnysfYGAAAf3AAAHgAcAENvbnRlbnRzL1Jlc291cmNlcy9hcHBsZXQuaWNuc1VUCQADH9ZJVnGlD1d1eAsAAQT1AQAABBQAAADt3Xk81Hkcx/Hvb5yVo5bGsVlKbcpRRqFlGZGS5JikRBIdI0OZttMZloqiYwrVjD1UqJaUokTRubG72bZVjqR1VZNjp2XEGo9H+9gt+9h/9tHx8H7N4/fw5MHjYeaPz+P7+P7x/bL9griEPNBm+001J0S+ZbvL/NmKwzWHE0IUHebYuRFCEckjL9v/xSvk2EpCpBXZtrYuDra2Oi4hwSvZgSsIMU9MdPdePcZd1aqQu0p3fDkrcFrs+mPWihMU9y6clp5XEFFdbRrEczCtGtfkL3pWfvBGublJ4ct051kuocYtaaqll/IjdfR+V75vlTdl//AJVZU6elZ5f0S7NO3MaE2xMElhF+TUrHgW2nFYeGTrs/OrhDJN5zMX8ZJVKXrqSUM1Rj03bnf85/pJMXECNdl0D1ctfe/j82imziM2nllSa3t5q8+vP1f38k/k22uN1lmnvfz0b8dGxO+mnh91v7WB2tKdrG3d4vmJaHlTvjGzdMqWcw/9frnCtQpPZK9sMKi/Ey/jzgqIPzBy9/dlf9griI2/u+sjcApozWx6/NXytC+qBTlrhb69fE7J6tgOzpWjFSl8qxihr5dYf/qExoeupY6Ze/j2PfL1azhhZ8fU3eelJY+ylk16UJN6KmOU0M4r+75cZhH/mxNndowNb4wx7TCoN4yvMGu8ySq5l5W5t+xQyYbS/Ome7e0W0sXbC5aktl0LEXNYR9obH7dMT721dbNdT/eFzXNEYSH8GU+bQ5s6YniGcj3fHtgXPbo0Oj4i3d5G1Fjfm/Ng7kgpjQDNxw4RRnu+Vloy5ZE3J6OpwlFBzaxS25He2h3lJuizO70zJPLUYtks14RE5yrD8y2tXa5l5Wqh/NBY06yoiCLF08Nk9A5Ojbs43GmR1Ch/PaZsLf3e6uPRSrIM1ROqGjt80leqfdxYbNn+WV7K7ZKiy/t6r1/3ie46V5432T/Oahs9V7NnVzb9zoq2rFgvPxXrcAMzmvWnGjof/RpdsZThIEpex6DGbd5h6STaOyZXxV/YfW9u4KyllmZ3X15IMHHLSJtVPSOvULCsz2TyPC/WL9kGSme/1L01SSzjfbHnqk+OV7OBmevZeo3DBR7lXT5drT0MkX5PwDd1EQ0ebfkh1zy/L8ydd+VJ4CLuRndNjuwj+vMfU8q2l2l1rGtr8FC2D+fdSGk81eltuTjYSMk++4BMd0DXQo35iXbZndGdcXkGFyeG6b28evF22M2w22HlYSXetGSLW4cfFT00WqvN9bkqCujQ9KzdSt+snr+qmbcme+5Y3cDRn9BDLps+dPVltE9UkPeb6XovineiVUznTznyuZaSn/ZvR8VeRUYLqe3iHFqnU6+7+4LmtfsmaS0MdjIvslFJGG/rn7DPdMGLcx4d6eP2Oz92Y49kWbBUjudU2ijHnc7YIODQxD1aPx8PynVr+cmvJoy2+M5nQa2Kt0dvdPxp73LNU6aTeaktTfHH1L+8Pm/XalZcFcfzYxlhTefuzjRGobLKEqPZh8QKxUXWbU/ERvW78ghvTGTUNd0g9YqbcjUy5h0xVbn3S7SS54SOqKt88UR0qZuxKfxlZfODUm52o2HkGTOLw5dqhevvWjH7ssiqxAhKwA91d1nWG9w/GJIc7GwWbKKe/mAsGRqXBb87P10jH8/0LY6kpGQV1KcuAwAAeCt4LiVFWRJKs4DJ6p9GxGHWfLuTM5dt61/pzCCE7vLmSodGJM/ASqdzU2U3VjpY6WClg5XOICudUaI3VjocuWCsdAAAAAAAAAAAAAAAAD5o1Gmr054TSoqWxPvnfrLxVEIc29/cT5YmkmdgPzlCSz8a+8nYT8Z+MvaTB9lPZpJX+8lRktFyRdDF0m6IdcF2MgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC8ddD8G5oJkUuQnAXwnvxLAAAAADDkEFURRckVE6rIv+Tb1078MiZEetubJ34RHckzcOIXd8uWTpz4hRO/cOIXTvwa5MQvoidZ5S8a9h8nfl1QVhipQ6jyyWeuvTaBGP3D5fwgE4gpeQYmUCZ7XQ0mECYQJhAm0GATyOfVmYOU4sAdNi+cOUpm/9cdNv2Di8kkFN3mYOtrg8sE14xicGFwYXDhmlEAAD5w/Os1o8bTcM0oVjpY6WClg2tGAQAAAAAAAAAAAAAAgL/wb9eMBpow+r817yN/fwnJf33P5g78nWofEZNXD3u95GdSkh3o135/aL2i3vl/gHf/7t59oDlnDSHS8gQhNGQL8uWs6P+iwPYLDuIOzARqyM+E9QOfA3PIfw4IIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhND70J9QSwMEFAAAAAgA7VhwR/dYplZAAAAAagEAAB4AHABDb250ZW50cy9SZXNvdXJjZXMvYXBwbGV0LnJzcmNVVAkAA82cSVZTpQ9XdXgLAAEE9QEAAAQUAAAAY2BgZGBgYFQBEiDsxjDygJQDPlkmEIEaRpJAQg8kLAMML8bi5OIqIFuouKA4A0jLMTD8/w+S5AdrB7PlBIAEAFBLAwQKAAAAAADtWHBHAAAAAAAAAAAAAAAAJAAcAENvbnRlbnRzL1Jlc291cmNlcy9kZXNjcmlwdGlvbi5ydGZkL1VUCQADzZxJVi2REFd1eAsAAQT1AQAABBQAAABQSwMEFAAAAAgA7VhwRzPLNU9TAAAAZgAAACsAHABDb250ZW50cy9SZXNvdXJjZXMvZGVzY3JpcHRpb24ucnRmZC9UWFQucnRmVVQJAAPNnElWU6UPV3V4CwABBPUBAAAEFAAAACWJOw6AIBAFe08DCBVX2QbWhZgQ1vCpCHcXtHkzkzegtCDB5Xp/g0+UyihARnb70kL/UbvffYpjQODcmk9zKXListxCoUsZA7EQ5S0+dVq085gvUEsDBAoAAAAAAIeBjkgAAAAAAAAAAAAAAAAbABwAQ29udGVudHMvUmVzb3VyY2VzL1NjcmlwdHMvVVQJAAM9pQ9XLZEQV3V4CwABBPUBAAAEFAAAAFBLAwQUAAAACAAJgI5ICl5liTUBAADMAQAAJAAcAENvbnRlbnRzL1Jlc291cmNlcy9TY3JpcHRzL21haW4uc2NwdFVUCQADcaIPV1OlD1d1eAsAAQT1AQAABBQAAAB9UMtOAkEQrNldd9dhH3Dz6NGYiPIJHjTxLCZeF9iDcXEJC0RvfoI/4sEfIvoHPEQEhbIHvOok01U16emu7vOkaF2dXu7XqrUTcyMATkxCwYKthCAUbmciAQ8O11yFcGBfbF/4jR24WmCvWjwUeXqfNutn13XyEeYYHkqKam+kghdJGfUCvwIfB6jiGAX6aCHHETroCrYFe6IKNEXfGOXChc0v7HKpBRzdSFrtELvbumKVC80F/FIjzwe9bj91uZRuXJuwAiLjNi7DlsxPaJSUAMrCFOeac3GfpINennQ6d/0sA4z7JxzKiVCCV+YHAs74LuuIONUi//4RIoC63czrIbYQS3PFicWJcTMTv1JHmocmROLJ45gjzfHvXJqjf7ZZ4RT+61uaBbDipGh2ZanBcjh8/gFQSwECHgMKAAAAAADtWHBHAAAAAAAAAAAAAAAACQAYAAAAAAAAABAA7UEAAAAAQ29udGVudHMvVVQFAAPNnElWdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAoHlwR5R2hqihAQAAvgMAABMAGAAAAAAAAQAAAKSBQwAAAENvbnRlbnRzL0luZm8ucGxpc3RVVAUAA1zWSVZ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAAB0gY5IAAAAAAAAAAAAAAAADwAYAAAAAAAAABAA7UExAgAAQ29udGVudHMvTWFjT1MvVVQFAAMbpQ9XdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAVRwXR+w5OCkyCAAAyGEAABUAGAAAAAAAAAAAAO2BegIAAENvbnRlbnRzL01hY09TL2FwcGxldFVUBQADMiPZVXV4CwABBPUBAAAEFAAAAFBLAQIeAxQAAAAIAAVHj0ga7FYjfQEAAKoCAAAhABgAAAAAAAEAAADtgfsKAABDb250ZW50cy9NYWNPUy9zdWRvLXByb21wdC1zY3JpcHRVVAUAA4mQEFd1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAADtWHBHqiAGewgAAAAIAAAAEAAYAAAAAAABAAAApIHTDAAAQ29udGVudHMvUGtnSW5mb1VUBQADzZxJVnV4CwABBPUBAAAEFAAAAFBLAQIeAwoAAAAAAJt5cEcAAAAAAAAAAAAAAAATABgAAAAAAAAAEADtQSUNAABDb250ZW50cy9SZXNvdXJjZXMvVVQFAANW1klWdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgAgHlwR3658rH2BgAAH9wAAB4AGAAAAAAAAAAAAKSBcg0AAENvbnRlbnRzL1Jlc291cmNlcy9hcHBsZXQuaWNuc1VUBQADH9ZJVnV4CwABBPUBAAAEFAAAAFBLAQIeAxQAAAAIAO1YcEf3WKZWQAAAAGoBAAAeABgAAAAAAAAAAACkgcAUAABDb250ZW50cy9SZXNvdXJjZXMvYXBwbGV0LnJzcmNVVAUAA82cSVZ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAADtWHBHAAAAAAAAAAAAAAAAJAAYAAAAAAAAABAA7UFYFQAAQ29udGVudHMvUmVzb3VyY2VzL2Rlc2NyaXB0aW9uLnJ0ZmQvVVQFAAPNnElWdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgA7VhwRzPLNU9TAAAAZgAAACsAGAAAAAAAAQAAAKSBthUAAENvbnRlbnRzL1Jlc291cmNlcy9kZXNjcmlwdGlvbi5ydGZkL1RYVC5ydGZVVAUAA82cSVZ1eAsAAQT1AQAABBQAAABQSwECHgMKAAAAAACHgY5IAAAAAAAAAAAAAAAAGwAYAAAAAAAAABAA7UFuFgAAQ29udGVudHMvUmVzb3VyY2VzL1NjcmlwdHMvVVQFAAM9pQ9XdXgLAAEE9QEAAAQUAAAAUEsBAh4DFAAAAAgACYCOSApeZYk1AQAAzAEAACQAGAAAAAAAAAAAAKSBwxYAAENvbnRlbnRzL1Jlc291cmNlcy9TY3JpcHRzL21haW4uc2NwdFVUBQADcaIPV3V4CwABBPUBAAAEFAAAAFBLBQYAAAAADQANANwEAABWGAAAAAA=",Gl="User did not grant permission.",Qk="No polkit authentication agent found.",Xk=134217728});var Db=w((zH,xb)=>{var{autoUpdater:Zn}=Gi(),{app:nd,session:Sb}=require("electron"),Kk=Eb(),bb=require("path"),zl=require("fs"),_b=Gt(),Jk=lr(),vb=Si(),Zk=aa(),eq=(t,e)=>{let r="".concat(typeof t=="string"?t:"0").split(".").map(Number),i="".concat(typeof e=="string"?e:"0").split(".").map(Number),n=Math.max(r.length,i.length);for(let s=0;s<n;s++){let o=r[s]||0,a=i[s]||0;if(o>a)return!0;if(o<a)return!1}return!1},zi,No,yr,Vi,xo,qe,ii,fe,gr,Vl,Tb,Cb,Rb,Ib,Nb,Ob;xb.exports=(Ob=class extends Jk{constructor(r){super(r);R(this,fe);R(this,zi,!0);R(this,No,!1);R(this,yr,!1);R(this,Vi,!1);R(this,xo,!1);R(this,qe,{version:null,filePath:null,progress:0});R(this,ii,null);_(this,"check",()=>{if(!m(this,zi)||m(this,yr))return!1;M(this,yr,!0);try{M(this,qe,{version:null,filePath:null,progress:0}),V(this,fe,gr).call(this),vb.LINUX===process.platform?V(this,fe,Tb).call(this):V(this,fe,Cb).call(this)}catch{}return!0});_(this,"install",async()=>{if(!m(this,zi)||typeof m(this,qe).version!="string"||typeof m(this,qe).filePath!="string"||m(this,Vi))return!1;M(this,Vi,!0);try{if(typeof m(this,qe).filePath!="string")throw new Error("Nothing to install");V(this,fe,Vl).call(this),vb.LINUX===process.platform?await V(this,fe,Rb).call(this):V(this,fe,Ib).call(this),V(this,fe,Vl).call(this,!1)}catch(r){V(this,fe,Vl).call(this,!1,"".concat(r.message??r))}return!0});M(this,zi,!0),this._register("updater"),M(this,ii,bb.join(Zk.getPathCache(),"pending"))}async start(){if(!m(this,No)&&(M(this,No,!0),!!m(this,zi)))try{zl.existsSync(m(this,ii))&&zl.rmSync(m(this,ii),{recursive:!0,force:!0}),zl.mkdirSync(m(this,ii),{recursive:!0})}catch{}}isChecking(){return m(this,yr)}isInstalling(){return m(this,Vi)}},zi=new WeakMap,No=new WeakMap,yr=new WeakMap,Vi=new WeakMap,xo=new WeakMap,qe=new WeakMap,ii=new WeakMap,fe=new WeakSet,gr=function(){if(typeof this._oglama.main?.view.webContents?.send=="function"){let r=["ipc:updater:check",[m(this,qe)],{type:"req"}];this._oglama.main?.view.webContents?.send(_b.WINDOW_MAIN,r)}},Vl=function(r=!0,i=null){if(r||M(this,Vi,!1),typeof this._oglama.main?.view.webContents?.send=="function"){let n=["ipc:updater:install",[{working:r,error:i}],{type:"req"}];this._oglama.main?.view.webContents?.send(_b.WINDOW_MAIN,n)}},Tb=async function(){try{let r=await(await fetch("https://api.github.com/repos/oglama/oglama-app/releases/latest")).json(),i=(Array.isArray(r?.assets)?r.assets:[]).find(s=>typeof s?.name=="string"&&s.name.endsWith(".deb")&&typeof s.browser_download_url=="string");if(!i)throw new Error("No assets released");let n=i.browser_download_url.replace(/^.*?\-(\d+\.\d+\.\d+)\.deb$/,"$1");if(!eq(n,nd.getVersion()))throw new Error("No update available");m(this,qe).version=n,V(this,fe,gr).call(this),m(this,qe).filePath=await V(this,fe,Nb).call(this,i.browser_download_url,i.name)}catch{}V(this,fe,gr).call(this),M(this,yr,!1)},Cb=async function(){m(this,xo)||(M(this,xo,!0),Zn.on("update-not-available",r=>{V(this,fe,gr).call(this),M(this,yr,!1)}),Zn.on("update-available",r=>{m(this,qe).version=r?.version??null,V(this,fe,gr).call(this)}),Zn.on("download-progress",r=>{m(this,qe).progress=parseInt(r.percent,10),V(this,fe,gr).call(this)}),Zn.on("update-downloaded",r=>{m(this,qe).filePath=r.downloadedFile,m(this,qe).progress=100,V(this,fe,gr).call(this),M(this,yr,!1)})),Zn.checkForUpdates()},Rb=async function(){return new Promise((r,i)=>{let n='"'.concat(m(this,qe).filePath.replace(/(["\\$`])/g,"\\$1"),'"');Kk.exec("dpkg -i ".concat(n),{name:"Oglama"},s=>{if(s){i(s);return}r(),setTimeout(()=>nd.relaunch(),nd.quit(),250)})})},Ib=function(){Zn.quitAndInstall()},Nb=async function(r,i){let n=bb.join(m(this,ii),i);return zl.existsSync(n)?(m(this,qe).progress=100,n):new Promise((s,o)=>{let a=(l,u)=>{u.setSavePath(n),u.on("updated",(c,h)=>{h==="progressing"&&(m(this,qe).progress=Math.floor(u.getReceivedBytes()/u.getTotalBytes()*100),V(this,fe,gr).call(this))}),u.once("done",(c,h)=>{if(Sb.defaultSession.removeListener("will-download",a),h==="completed"){s(u.getSavePath());return}o(new Error("Download failed: ".concat(h)))})};Sb.defaultSession.once("will-download",a),this._oglama.main?.view.webContents.downloadURL(r)})},Ob)});var $b=w((QH,Lb)=>{var{execSync:sd}=require("child_process"),{shell:tq}=require("electron"),Pb=require("crypto"),od=require("os"),rq=lr(),rt=Si(),es,ts,rs,ni,Fb;Lb.exports=(Fb=class extends rq{constructor(r){super(r);R(this,es,null);R(this,ts,null);R(this,rs,null);R(this,ni,null);_(this,"getOS",()=>{if(typeof m(this,ni)!="string")switch(process.platform){case rt.MACOS:M(this,ni,"macos");break;case rt.WINDOWS:M(this,ni,"windows");break;case rt.LINUX:M(this,ni,"linux");break}return m(this,ni)});_(this,"getName",()=>{if(typeof m(this,ts)!="string"){let r=null;switch(process.platform){case rt.MACOS:r="echo $(scutil --get LocalHostName).local";break;case rt.WINDOWS:case rt.LINUX:r="hostname";break}if(r!==null)try{let i=sd(r).toString();M(this,ts,i.replace(/[\r\n\s]+/g,"").toLowerCase())}catch{}}return m(this,ts)});_(this,"getUUID",()=>{if(typeof m(this,es)!="string"){let r=null,i=process.arch==="ia32"&&process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?"%windir%\\sysnative\\cmd.exe /c %windir%\\System32":"%windir%\\System32";switch(process.platform){case rt.MACOS:r="ioreg -rd1 -c IOPlatformExpertDevice";break;case rt.WINDOWS:r="".concat(i,"\\REG.exe")+" QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid";break;case rt.LINUX:r="( cat /var/lib/dbus/machine-id /etc/machine-id 2> /dev/null || hostname ) | head -n 1 || :";break}if(r!==null)try{let n=sd(r).toString();switch(process.platform){case rt.MACOS:n=n.replace(/^.*?\bIOPlatformUUID"\s*=\s*"(.*?)".*$/gs,"$1");break;case rt.WINDOWS:n=n.split("REG_SZ")[1];break}n=n.replace(/[\r\n\s]+/g,"");let s=Pb.createHash("md5").update([n,n,n].join("::")).digest("hex");M(this,es,[s.slice(0,8),s.slice(8,12),s.slice(12,16),s.slice(16,20),s.slice(20)].join("-"))}catch{}}return m(this,es)});_(this,"getSerialNumber",()=>{if(typeof m(this,rs)!="string"){let r=null;switch(process.platform){case rt.MACOS:r="ioreg -l | grep IOPlatformSerialNumber";break;case rt.WINDOWS:r='powershell -Command "(Get-CimInstance -ClassName Win32_BIOS).SerialNumber"';break;case rt.LINUX:r='lsblk -o UUID -n /dev/sda* | grep -v "^$" | grep -vE "^.{,20}$" | sed -n 1p';break}if(r!==null)try{let i=sd(r).toString();switch(process.platform){case rt.MACOS:i=i.replace(/^.*?\bIOPlatformSerialNumber"\s*=\s*"(.*?)".*$/gs,"$1");break}i=i.replace(/[\r\n\s]+/g,"");let n=Pb.createHash("md5").update([i,i,i].join("::")).digest("hex");M(this,rs,[n.slice(0,8),n.slice(8,12),n.slice(12,16),n.slice(16,20),n.slice(20)].join("-"))}catch{}}return m(this,rs)});_(this,"getRam",()=>Math.ceil(od.totalmem()/1024**3));_(this,"getCpuArch",()=>od.arch());_(this,"getCpuName",()=>{let r="",i=od.cpus();return Array.isArray(i)&&i.length&&(r=i[0].model),r});_(this,"setPostAuth",r=>this._oglama.setPostAuth(!!r));_(this,"getPostAuth",()=>this._oglama.getPostAuth());_(this,"showFileInFolder",r=>{let i=!1;try{tq.showItemInFolder(r),i=!0}catch{}return i});this._register("device")}},es=new WeakMap,ts=new WeakMap,rs=new WeakMap,ni=new WeakMap,Fb)});var jb=w((JH,Bb)=>{var{ipcMain:kb,session:iq,BrowserWindow:qb}=require("electron"),Mb=require("path"),nq=Gt(),sq=lr(),ge,wr,Ub;Bb.exports=(Ub=class extends sq{constructor(r){super(r);R(this,ge,{});R(this,wr,{});_(this,"list",()=>Object.keys(m(this,ge)));_(this,"closeAll",()=>{let r=Object.keys(m(this,ge)).length>0;for(let i of Object.keys(m(this,ge)))this.close(i);return r});_(this,"open",r=>{let i=!1;do{if(typeof r!="string"||!r.length)break;if(typeof m(this,ge)[r]<"u"){typeof m(this,ge)[r]?.webContents?.focus=="function"&&m(this,ge)[r].webContents.focus();break}m(this,ge)[r]=new qb({show:!1,minWidth:this._oglama.config.getSourceMinWidth(),minHeight:this._oglama.config.getSourceMinHeight(),width:this._oglama.config.getSourceMinWidth(),height:this._oglama.config.getSourceMinHeight(),icon:Mb.join(this._oglama.rootPath,"res/icons/icon.png"),resizable:!0,fullscreenable:!1,titleBarStyle:"default",title:"Agent source code",useContentSize:!0,autoHideMenuBar:!0,backgroundColor:"#000",webPreferences:{backgroundThrottling:!1,imageAnimationPolicy:"noAnimation",spellcheck:!1,preload:Mb.join(this._oglama.rootPath,"lib/preloader/entry/source.js"),nodeIntegration:!0,devTools:!1,session:iq.defaultSession,cache:!1,webSecurity:!1,allowRunningInsecureContent:!0,additionalArguments:["--agent-id=".concat(r)]}});let n=nq.getSourceChannelName(r);m(this,wr)[r]={channel:n,listener:(s,...o)=>{o.length>=3&&m(this,ge)[r].webContents.send(n,o)}},kb.on(m(this,wr)[r].channel,m(this,wr)[r].listener),m(this,ge)[r].setMenu(null),m(this,ge)[r].on("closed",()=>{kb.off(m(this,wr)[r].channel,m(this,wr)[r].listener),delete m(this,wr)[r],delete m(this,ge)[r]}),m(this,ge)[r].webContents.on("did-finish-load",()=>{m(this,ge)[r].show(),m(this,ge)[r].webContents.focus()}),m(this,ge)[r].loadURL("http://localhost:".concat(this._oglama.config.getServerPort(),"/source-code/")),i=!0}while(!1);return i});_(this,"close",r=>{let i=!1;return typeof m(this,ge)[r]?.destroy=="function"&&(m(this,ge)[r].destroy(),i=!0),i});_(this,"webContents",async(r,i,n)=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");if(!(m(this,ge)[r]instanceof qb))throw new Error("Invalid agent ID");if(typeof i!="string"||typeof m(this,ge)[r].webContents[i]!="function")throw new Error("Invalid source webContents method: ".concat(i));return Array.isArray(n)||(n=[]),await m(this,ge)[r].webContents[i](...n)});this._register("source")}},ge=new WeakMap,wr=new WeakMap,Ub)});var zb=w((t3,Gb)=>{var{ipcMain:Hb,BrowserView:oe,session:oq}=require("electron"),Wb=require("path"),Ar=Gt(),aq=lr(),ad=Si(),Yi,Do,Po,Fo,is,W,Kt,Jt,Qi,ns,si,Xi,ld,Lo,Yl,Ki,Er;Gb.exports=(Yi=class extends aq{constructor(r){super(r);R(this,Do);R(this,Po);R(this,Fo,"");R(this,is,{});R(this,W,{});R(this,Kt,{});R(this,Jt,"");R(this,Qi,[]);R(this,ns,{});R(this,si,{});R(this,Xi,()=>{if(!Object.keys(m(this,W)).length)return;let r=m(this,Do)-this.constructor.MARGIN_LEFT,i=m(this,Po)-(this.constructor.MARGIN_TOP+this.constructor.MARGIN_BOTTOM);for(let n of Object.keys(m(this,W))){let s=n===m(this,Jt)?this.constructor.MARGIN_LEFT:100-r,o=n===m(this,Jt)?this.constructor.MARGIN_TOP:50-i,a=m(this,W)[n];a instanceof oe&&a.setBounds({x:s,y:o,width:r,height:i})}});R(this,ld,async r=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");if(m(this,Qi).reduce((n,s)=>s.agentId===r?s:n,null)!==null)throw new Error("Previous focus request pending");return new Promise((n,s)=>{m(this,Qi).push({agentId:r,resolve:n,reject:s})})});R(this,Lo,r=>{r="".concat(r);let i=null,n=!1;do{if(r.match(/^[a-z\d]$/gi)){i=r,n=r!==r.toLowerCase();break}if('~!@#$%^&*()_+{}:"|<>?'.indexOf(r)!==-1&&r.length===1){i=r,n=!0;break}if(" `-=[];'\\,./".indexOf(r)!==-1&&r.length===1){i=r,n=!1;break}let s={backspace:"Backspace",capslock:"CapsLock",pagedown:"PageDown",pageup:"PageUp",insert:"Insert",delete:"Delete",escape:"Escape",space:"Space",enter:"Enter",right:"Right",home:"Home",down:"Down",left:"Left",end:"End",tab:"Tab",up:"Up",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12"};typeof s[r]<"u"&&(i=s[r])}while(!1);return{keyCode:i,shift:n}});R(this,Yl,async(r,i,n)=>{if(typeof r!="string"||!r.length)return!1;let s=m(this,W)[r];if(!(s instanceof oe)||typeof i!="string"||i.length!==1)return!1;let{keyCode:o,shift:a}=m(this,Lo).call(this,i);if(o!==null){let u=a?["shift"]:[];a&&s.webContents.sendInputEvent({type:"keyDown",keyCode:"Shift",modifiers:u}),s.webContents.sendInputEvent({type:"keyDown",keyCode:o,modifiers:u}),s.webContents.sendInputEvent({type:"char",keyCode:i,modifiers:u}),s.webContents.sendInputEvent({type:"keyUp",keyCode:o,modifiers:u}),a&&s.webContents.sendInputEvent({type:"keyUp",keyCode:"Shift",modifiers:[]})}else s.webContents.sendInputEvent({type:"char",keyCode:i});let l=Math.round(1e3/n-2)+Math.floor(Math.random()*5);return await new Promise(u=>setTimeout(u,l)),!0});R(this,Ki,(r,i=!0)=>{if(typeof r=="string"){let n=["http://localhost:".concat(this._oglama.config.getServerPort(),"/home"),"about:home"],s=n[i?0:1],o=n[i?1:0];if(r.indexOf(s)===0)return"".concat(o).concat(r.substring(s.length))}return r});R(this,Er,r=>{let i=m(this,W)[r];i instanceof oe&&(i.metadata.statusCode=null,i.metadata.domReady=!1,i.metadata.domError=null)});_(this,"setControlled",(r,i=!0)=>{let n=m(this,W)[r];if(!(n instanceof oe))return!1;let s=!!i!==n.metadata.controlled;return n.metadata.controlled=!!i,s});_(this,"setWindowSize",(r,i)=>{M(this,Do,r),M(this,Po,i),m(this,Xi).call(this)});_(this,"list",()=>Object.keys(m(this,W)));_(this,"removeAll",()=>{let r=Object.keys(m(this,W)).length>0;for(let i of Object.keys(m(this,W)))this.remove(i);return r});_(this,"add",(r,i,n=!1)=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");if(m(this,W)[r]instanceof oe)return!1;if(i=m(this,Ki).call(this,i,!1),typeof i!="string"||!i.match(/^https?:\/\//gi))throw new Error("Invalid URL");let s=new oe({width:this._oglama.config.getMainMinWidth()-this.constructor.MARGIN_LEFT,height:this._oglama.config.getMainMinHeight()-(this.constructor.MARGIN_TOP+this.constructor.MARGIN_BOTTOM),resizable:!1,backgroundColor:"#333",transparent:!0,webPreferences:{disableBlinkFeatures:["FreezeFramesOnVisibility","DispatchHiddenVisibilityTransitions"].join(","),preload:Wb.join(this._oglama.rootPath,"lib/preloader/entry/target.js"),additionalArguments:["--agent-id=".concat(r)],partition:"persist:target-".concat(r),imageAnimationPolicy:"noAnimation",allowRunningInsecureContent:!0,backgroundThrottling:!1,contextIsolation:!0,nodeIntegration:!0,spellcheck:!1,devTools:!0,cache:!1}});s.metadata={agentId:r,controlled:!1,homeUrl:i,statusCode:null,domReady:!1,domError:null,downloads:{pending:[],files:{}}},s.webContents.on("ready-to-show",()=>{s.webContents.setZoomFactor(1),s.webContents.setVisualZoomLevelLimits(1,1)}),s.webContents.setZoomLevel(0),s.webContents.setAudioMuted(!0),s.webContents.setUserAgent(m(this,Fo)),s.webContents.on("will-prevent-unload",c=>{c.preventDefault()});let o=c=>{this._oglama.main?.view.webContents?.send(Ar.WINDOW_MAIN,["ibc-target:nav:start",[r,m(this,Ki).call(this,c)],{type:"req"}])},a=(c=!0)=>{c&&this._oglama.main?.view.webContents?.send(Ar.WINDOW_MAIN,["ibc-target:cancel-promises",r,s.metadata.domError]),this._oglama.main?.view.webContents?.send(Ar.WINDOW_MAIN,["ibc-target:nav:end",[r,s.metadata.domError===null?1:0,s.webContents?.canGoBack()??!1,s.webContents?.canGoForward()??!1],{type:"req"}])};s.webContents.on("did-navigate-in-page",(c,h,f)=>{f&&(o(h),a(!1))}),s.webContents.on("did-start-navigation",c=>{c.isMainFrame&&!c.isSameDocument&&(m(this,Er).call(this,r),o(c.url))}),s.webContents.on("did-finish-load",()=>{if(Number.isInteger(s.metadata.statusCode)&&s.metadata.statusCode>=400){s.metadata.domReady||(s.metadata.domError="Status code ".concat(s.metadata.statusCode),s.metadata.domReady=!0,a());return}s.webContents.executeJavaScript('new Promise(resolve => {\n                        const a = window.alert;\n                        const c = window.confirm;\n                        const s = JSON.stringify;\n\n                        window.alert = (m) => a("::"+s({t:"alert",a:"'.concat(r,'",m:m??""}));\n                        Object.defineProperty(window.alert, "name", { value: "alert", configurable: true });\n                        Object.defineProperty(window.alert, "length", { value: 0, configurable: true });\n\n                        window.confirm = (m) => c("::"+s({t:"confirm",a:"').concat(r,'",m:m??""}));\n                        Object.defineProperty(window.confirm, "name", { value: "confirm", configurable: true });\n                        Object.defineProperty(window.confirm, "length", { value: 0, configurable: true });\n\n                        window.prompt = (m, d) => (a("::"+s({t:"prompt",a:"').concat(r,'",m:m??"",d:d??""})),d??"");\n                        Object.defineProperty(window.prompt, "name", { value: "prompt", configurable: true });\n                        Object.defineProperty(window.prompt, "length", { value: 0, configurable: true });\n\n                        const originalToString = Function.prototype.toString;\n                        Function.prototype.toString = function (...args) {\n                            if (this === window.alert) {\n                                return "function alert() { [native code] }";\n                            }\n                            if (this === window.confirm) {\n                                return "function confirm() { [native code] }";\n                            }\n                            if (this === window.prompt) {\n                                return "function prompt() { [native code] }";\n                            }\n                            if (this === Function.prototype.toString) {\n                                return "function toString() { [native code] }";\n                            }\n                            return originalToString.apply(this, args);\n                        };\n\n                        "complete" === document.readyState \n                            ? resolve() \n                            : window.addEventListener("load", () => resolve());\n                    });').replace(/[\n\s]{2,}/g," ")).then(()=>{setTimeout(()=>{s.metadata.domReady||(s.metadata.domReady=!0,a())},1500)})}),s.webContents.session.webRequest.onCompleted({urls:["*://*/*"]},c=>{c.resourceType==="mainFrame"&&(s.metadata.statusCode=c.statusCode)}),s.webContents.on("did-fail-load",(c,h,f,p,y)=>{y&&(s.metadata.domError=f,s.metadata.domReady=!0,a())});let l=oq.fromPartition("persist:target-".concat(r));l.setPermissionCheckHandler((c,h,f,p)=>!0),l.setPermissionRequestHandler((c,h,f,p)=>{f(!0)}),l.on("will-download",(c,h)=>{let f=new Date().getTime(),p=s.metadata.downloads.pending.shift();if(typeof p!="string"){s.metadata.controlled&&(this._oglama.main?.view.webContents?.send(Ar.WINDOW_MAIN,["ibc-target:download:skipped",[r,h.getFilename()],{type:"req"}]),c.preventDefault());return}let y=h.getTotalBytes(),{runId:A,outputKey:b,timeout:v}=s.metadata.downloads.files[p],{fileName:O,filePath:I,minSize:L,maxSize:ne}=this._oglama.diskStorage.outputFilesInit(r,A,b,Wb.extname(h.getFilename()).substring(1)),U=(E=null)=>{typeof s.metadata.downloads.files[p]=="object"&&!s.metadata.downloads.files[p].done&&(s.metadata.downloads.files[p].done=!0,s.metadata.downloads.files[p].error=E,this._oglama.main?.view.webContents?.send(Ar.WINDOW_MAIN,["ibc-target:download:info",[r,p,{fileName:O,totalBytes:y,progress:"100",done:!0,error:E}],{type:"req"}]),E!==null&&(h.cancel(),this._oglama.diskStorage.outputFilesDelete(r,A,O)))};if(y>0){if(Number.isInteger(L)&&y<L*1048576){U('Minimum file size not met for "'.concat(O,'" (').concat((y/1048576).toFixed(3),"MB)"));return}if(Number.isInteger(ne)&&y>ne*1048576){U('Maximum file size exceeded for "'.concat(O,'" (').concat((y/1048576).toFixed(3),"MB)"));return}}if(!s.metadata.controlled){U('Download cancelled for "'.concat(O,'"'));return}h.setSavePath(I),s.metadata.downloads.files[p].filePath=I;let G=!1;h.on("updated",(E,F)=>{if(new Date().getTime()-f>=v*1e3){E.preventDefault(),U('Download timed out for "'.concat(O,'" after ').concat(v,"s"));return}if(!s.metadata.controlled){E.preventDefault(),U('Download cancelled for "'.concat(O,'"'));return}if(F==="progressing"&&(!G||y>0)){G=!0;let H=h.getReceivedBytes(),D=y>0?(H/y*100).toFixed(2):"0";this._oglama.main?.view.webContents?.send(Ar.WINDOW_MAIN,["ibc-target:download:info",[r,p,{fileName:O,totalBytes:y,progress:D,done:!1,error:null}],{type:"req"}])}}),h.once("done",(E,F)=>{U()})}),this._oglama.mainWindow().addBrowserView(s),this._oglama.main.view instanceof oe&&(this._oglama.mainWindow().removeBrowserView(this._oglama.main.view),this._oglama.mainWindow().addBrowserView(this._oglama.main.view));let u=Ar.getTargetChannelName(r);return m(this,Kt)[r]={channel:u,listener:(c,...h)=>{h.length>=3&&s.webContents.send(u,h)}},Hb.on(m(this,Kt)[r].channel,m(this,Kt)[r].listener),s.webContents.loadURL(s.metadata.homeUrl),m(this,W)[r]=s,n?this.select(r):m(this,Xi).call(this),!0});_(this,"remove",r=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");if(!(m(this,W)[r]instanceof oe)||typeof m(this,Kt)[r]>"u")return!1;Hb.off(m(this,Kt)[r].channel,m(this,Kt)[r].listener),delete m(this,Kt)[r];try{this._oglama.mainWindow().removeBrowserView(m(this,W)[r])}catch{}try{m(this,W)[r].webContents.destroy()}catch{}return delete m(this,W)[r],r===m(this,Jt)&&M(this,Jt,""),m(this,Xi).call(this),!0});_(this,"select",r=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");let i=m(this,W)[r];if(i instanceof oe&&m(this,Jt)!==r){M(this,Jt,r);let n={};for(let s of Object.keys(m(this,W)).filter(o=>o!==r))n[s]=m(this,W)[s];return n[r]=i,M(this,W,n),this._oglama.mainWindow().removeBrowserView(i),this._oglama.mainWindow().removeBrowserView(this._oglama.main.view),this._oglama.main.onTop?(this._oglama.mainWindow().addBrowserView(i),this._oglama.mainWindow().addBrowserView(this._oglama.main.view)):(this._oglama.mainWindow().addBrowserView(this._oglama.main.view),this._oglama.mainWindow().addBrowserView(i)),m(this,Xi).call(this),!0}return!1});_(this,"getSelected",()=>m(this,Jt));_(this,"openDevTools",(r,i=null)=>{let n=!1;do{if(typeof r!="string"||!r.length)break;let s=m(this,W)[r];if(!(s instanceof oe)||m(this,is)[r])break;s.webContents.openDevTools({mode:"detach",title:"Developer Tools ".concat(typeof i=="string"?"- ".concat(i," "):"","- Oglama")}),n=!0}while(!1);return n});_(this,"getBounds",r=>{let i=null;do{if(typeof r!="string"||!r.length)break;let n=m(this,W)[r];if(!(n instanceof oe))break;i=n.getBounds()}while(!1);return i});_(this,"getTargets",()=>m(this,W));_(this,"webContents",async(r,i,n)=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");let s=m(this,W)[r];if(!(s instanceof oe))throw new Error("Missing target ".concat(r));if(typeof i!="string"||typeof s.webContents[i]!="function")throw new Error("Invalid target method: webContents.".concat(i,"()"));return Array.isArray(n)||(n=[]),await s.webContents[i](...n)??null});_(this,"sendKeys",async(r,i,n={})=>{if(typeof r!="string"||!r.length)return!1;let s=m(this,W)[r];if(!(s instanceof oe))return!1;(typeof n!="object"||n===null)&&(n={});let{keyCode:o,shift:a}=m(this,Lo).call(this,i);if(o===null)return!1;n.shift=a;let l=[n.ctrl?process.platform==="darwin"?"meta":"control":null,n.shift?"shift":null,n.alt?"alt":null].filter(c=>c!==null),u=[...l.map(c=>c.charAt(0).toUpperCase()+c.slice(1)),o].join(" + ");return s.webContents.sendInputEvent({type:"keyDown",keyCode:o,modifiers:l}),o.length===1&&s.webContents.sendInputEvent({type:"char",keyCode:o,modifiers:l}),s.webContents.sendInputEvent({type:"keyUp",keyCode:o,modifiers:l}),await new Promise(c=>setTimeout(c,150+Math.floor(Math.random()*51))),!0});_(this,"mouse",async(r,i,n,s=null,o=!1,a=[])=>{if(typeof r!="string"||!r.length)return!1;let l=m(this,W)[r];if(!(l instanceof oe)||m(this,ns)[r]||(i=parseInt(i,10),n=parseInt(n,10),!Number.isInteger(i)||!Number.isInteger(n)))return!1;a=(Array.isArray(a)?a:[]).map(h=>{if(typeof h!="object"||h===null)return null;let f={};for(let p of["x","y","w","h"]){if(!Number.isInteger(h[p]))return null;f[p]=h[p]}return f}).filter(Boolean),i<0&&(i=0),n<0&&(n=0);let u=this.getBounds(r);if(typeof u=="object"&&u!==null){let{width:h,height:f}=u;i>h&&(i=h),n>f&&(n=f)}m(this,ns)[r]=!0,typeof m(this,si)[r]!="object"&&(m(this,si)[r]={x:0,y:0,name:null});let c=(h,f)=>{for(let p of a)if(h>=p.x&&h<=p.x+p.w&&f>=p.y&&f<=p.y+p.h)return!1;return!0};return new Promise(h=>{let f=(o?25:150)+Math.floor(Math.random()*(o?25:150)),p=(o?10:14)+Math.floor(Math.random()*3);this._oglama.main?.view.webContents?.send(Ar.WINDOW_MAIN,["ibc-target:mouse:move",[r,i,n,f],{type:"req"}]);let y=m(this,si)[r].x,A=m(this,si)[r].y,b=i,v=n;m(this,si)[r]={x:i,y:n,name:s};let O={x:null,y:null},I=!1,L=G=>G<.5?2*G*G:-1+(4-2*G)*G,ne=0,U=setInterval(async()=>{let G=Date.now();ne===0&&(ne=G);let F=(G-ne)/f;(F>1||!l.metadata.controlled)&&(F=1);let H=L(F),D=Math.round(y+(b-y)*H),J=Math.round(A+(v-A)*H);if(O.x!==D||O.y!==J){let pe=O.x!==null?D-O.x:0,Z=O.y!==null?J-O.y:0;O={x:D,y:J},c(D,J)&&l.webContents.sendInputEvent({type:"mouseMove",x:D,y:J,movementX:pe,movementY:Z})}if(F===1&&!I){if(clearInterval(U),I=!0,l.metadata.controlled&&["click","double-click"].includes(s)){await new Promise(z=>setTimeout(z,50)),this._oglama.main?.view.webContents?.send(Ar.WINDOW_MAIN,["ibc-target:mouse:click",[r,D,J,s],{type:"req"}]),await new Promise(z=>setTimeout(z,50));let Z={x:b,y:v,button:0,clickCount:1};if(l.webContents.sendInputEvent({type:"mouseDown",...Z}),l.webContents.sendInputEvent({type:"mouseUp",...Z}),s==="double-click"){let z={x:b,y:v,button:0,clickCount:2};l.webContents.sendInputEvent({type:"mouseDown",...z}),l.webContents.sendInputEvent({type:"mouseUp",...z})}}let pe=(["click","double-click"].includes(s)?450:100)+Math.floor(Math.random()*150);setTimeout(async()=>{m(this,ns)[r]=!1,h(!0)},o?10:pe)}},p)})});_(this,"typeAt",async(r,i,n,s,o=!1,a=50,l=250)=>{if(typeof r!="string"||!r.length)return!1;let u=m(this,W)[r];if(!(u instanceof oe))return!1;s=typeof s=="string"?s.replace(/\r\n|\n/g,"\r\n"):"",a=parseInt(a,10),a=Number.isInteger(a)?a>250?250:a<25?25:a:50,l=parseInt(l,10),l=Number.isInteger(l)?l>1e3?1e3:l<10?10:l:250,await this.mouse(r,i,n,"click");let c=i+10+Math.floor(Math.random()*90),h=Math.abs(n-50+Math.floor(Math.random()*100));await this.mouse(r,c,h),u.webContents.selectAll(),await new Promise(f=>setTimeout(f,250)),await this.sendKeys(r,o?"backspace":"right"),await new Promise(f=>setTimeout(f,150)),s.length>l&&(u.webContents.insertText(s.substring(0,s.length-l)),s=s.substring(s.length-l),await new Promise(f=>setTimeout(f,150)));for(let f of s)await m(this,Yl).call(this,r,f,a);return!0});_(this,"loadUrl",async(r,i)=>{if(typeof r!="string"||!r.length)return!1;let n=m(this,W)[r];if(!(n instanceof oe))return!1;if(i=m(this,Ki).call(this,i,!1),typeof i!="string"||!i.match(/^https?:\/\//gi))throw new Error("Invalid URL");return m(this,Er).call(this,r),await n.webContents.loadURL(i),await this.waitForDomReady(r)});_(this,"getUrl",async r=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");let i=m(this,W)[r];if(!(i instanceof oe))throw new Error("Missing target ".concat(r));return m(this,Ki).call(this,i.webContents.getURL())});_(this,"getTitle",async r=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");let i=m(this,W)[r];if(!(i instanceof oe))throw new Error("Missing target ".concat(r));return i.webContents.getTitle()});_(this,"reload",async(r,i=!1)=>{if(typeof r!="string"||!r.length)return!1;let n=m(this,W)[r];return n instanceof oe?(m(this,Er).call(this,r),i?n.webContents.reloadIgnoringCache():n.webContents.reload(),await this.waitForDomReady(r)):!1});_(this,"goHome",async r=>{if(typeof r!="string"||!r.length)return!1;let i=m(this,W)[r];return i instanceof oe?(m(this,Er).call(this,r),await i.webContents.loadURL(i.metadata.homeUrl),await this.waitForDomReady(r)):!1});_(this,"goBack",async r=>{if(typeof r!="string"||!r.length)return!1;let i=m(this,W)[r];return!(i instanceof oe)||!i.webContents?.canGoBack()?!1:(m(this,Er).call(this,r),i.webContents.goBack(),await this.waitForDomReady(r))});_(this,"goForward",async r=>{if(typeof r!="string"||!r.length)return!1;let i=m(this,W)[r];return!(i instanceof oe)||!i.webContents?.canGoForward()?!1:(m(this,Er).call(this,r),i.webContents.goForward(),await this.waitForDomReady(r))});_(this,"saveDownload",async(r,i,n,s=600)=>{if(typeof r!="string"||!r.length)throw new Error("Invalid agent ID");let o=m(this,W)[r];if(!(o instanceof oe))throw new Error("Missing target ".concat(r));let a="".concat(i,"-").concat(n);if(typeof o.metadata.downloads.files[a]=="object")throw new Error("Download in progress for ".concat(n));return o.metadata.downloads.pending.push(a),o.metadata.downloads.files[a]={runId:i,outputKey:n,timeout:s,filePath:null,done:!1,error:null},new Promise(l=>{let u=new Date().getTime(),c=setInterval(()=>{if(!(o instanceof oe)||!o.metadata.controlled||new Date().getTime()-u>=s*1e3){clearInterval(c),l(null);return}if(o.metadata.downloads.files[a].done){clearInterval(c);let{filePath:h,error:f}=o.metadata.downloads.files[a];delete o.metadata.downloads.files[a];let p=typeof f=="string"?null:h;setTimeout(()=>l(p),250)}},750)})});_(this,"setFileInput",async(r,i,n)=>{if(typeof r!="string"||!r.length)return!1;let s=m(this,W)[r];if(!(s instanceof oe))return!1;let o=!1;m(this,is)[r]=!0,s.webContents.isDevToolsOpened()&&s.webContents.closeDevTools();try{s.webContents.debugger.attach("1.1");let{root:a}=await s.webContents.debugger.sendCommand("DOM.getDocument",{});if(typeof a?.nodeId<"u"){let{nodeId:l}=await s.webContents.debugger.sendCommand("DOM.querySelector",{nodeId:a.nodeId,selector:i});typeof l<"u"&&(await s.webContents.debugger.sendCommand("DOM.setFileInputFiles",{nodeId:l,files:n}),o=!0)}}finally{s.webContents.debugger.detach(),m(this,is)[r]=!1}return o});_(this,"waitForDomReady",async(r,i=120)=>{if(typeof r!="string"||!r.length)return!1;let n=m(this,W)[r];if(!(n instanceof oe))return!1;if(n.metadata.domReady){if(n.metadata.domError!==null)throw new Error(n.metadata.domError);return n.metadata.domError===null}return new Promise((s,o)=>{let a=new Date().getTime(),l=setInterval(()=>{if(n.metadata.domReady){clearInterval(l),typeof n.metadata.domError=="string"?o(new Error(n.metadata.domError)):setTimeout(()=>s(!0),250);return}new Date().getTime()-a>=i*1e3&&(clearInterval(l),o(new Error("Page load timed out")))},500)})});let i="";switch(process.platform){case ad.MACOS:i="(Macintosh; Intel Mac OS X 13_3)";break;case ad.WINDOWS:i="(Windows NT 10.0; Win64; x64)";break;case ad.LINUX:i="(X11; Linux x86_64)";break}M(this,Fo,"Mozilla/5.0 ".concat(i," AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36"));let n=async()=>{do{if(!m(this,Qi).length)break;let{agentId:s,resolve:o,reject:a}=m(this,Qi).shift();if(typeof s!="string"||!s.length){a(new Error("Invalid agent ID"));break}let l=m(this,W)[s];if(!(l instanceof oe)){a(new Error("Missing target ".concat(s)));break}if(typeof o!="function"||typeof a!="function")break;l.webContents.isFocused()||(l.webContents.focus(),await new Promise(u=>setTimeout(u,100))),await new Promise(u=>{let c=setTimeout(()=>{a(new Error("Focused action has timed out")),u(!1)},this.constructor.FOCUS_TIMEOUT*1e3);o(async()=>{clearTimeout(c),u(!0),await new Promise(h=>setTimeout(h,100))})})}while(!1);await new Promise(s=>setTimeout(s,500)),n()};this.constructor.FOCUS_ENABLED&&n(),this._register("target")}},Do=new WeakMap,Po=new WeakMap,Fo=new WeakMap,is=new WeakMap,W=new WeakMap,Kt=new WeakMap,Jt=new WeakMap,Qi=new WeakMap,ns=new WeakMap,si=new WeakMap,Xi=new WeakMap,ld=new WeakMap,Lo=new WeakMap,Yl=new WeakMap,Ki=new WeakMap,Er=new WeakMap,_(Yi,"MARGIN_LEFT",250),_(Yi,"MARGIN_TOP",50),_(Yi,"MARGIN_BOTTOM",50),_(Yi,"FOCUS_ENABLED",!1),_(Yi,"FOCUS_TIMEOUT",60),Yi)});var Xb=w((n3,Qb)=>{var{session:lq,shell:uq,ipcMain:cq,BrowserView:ud}=require("electron"),hq=require("path"),Vb=Gt(),fq=lr(),Ql,Yb;Qb.exports=(Yb=class extends fq{constructor(r){super(r);_(this,"windowWidth");_(this,"windowHeight");_(this,"view",null);_(this,"darkMode",!0);R(this,Ql,()=>this.view instanceof ud?(this.view.setBounds({x:0,y:0,width:this.windowWidth,height:this.windowHeight}),!0):!1);_(this,"init",()=>this.view instanceof ud?!1:(this.windowWidth=this._oglama.config.getMainLoginWidth(),this.windowHeight=this._oglama.config.getMainLoginHeight(),this.view=new ud({width:this.windowWidth,height:this.windowHeight,resizable:!1,backgroundColor:"#00000000",transparent:!0,webPreferences:{backgroundThrottling:!1,imageAnimationPolicy:"noAnimation",spellcheck:!1,preload:hq.join(this._oglama.rootPath,"lib/preloader/entry/main.js"),nodeIntegration:!0,devTools:!1,session:lq.defaultSession,cache:!1,webSecurity:!1,allowRunningInsecureContent:!0,additionalArguments:["--win-type=main/login"]}}),this.view.webContents.on("ready-to-show",()=>this.view.webContents.setZoomFactor(1)),this.view.webContents.setZoomLevel(0),this.view.webContents.setAudioMuted(!1),this.view.webContents.loadURL("http://localhost:".concat(this._oglama.config.getServerPort(),"/login/")),this.view.webContents.on("dom-ready",()=>this.view.webContents.focus()),cq.on(Vb.WINDOW_MAIN_LOGIN,(r,...i)=>{i.length>=3&&this.view.webContents.send(Vb.WINDOW_MAIN_LOGIN,i)}),this._oglama.mainLoginWindow().addBrowserView(this.view),m(this,Ql).call(this),!0));_(this,"openExternal",r=>{typeof r=="string"&&uq.openExternal(r)});this._register("main/login")}},Ql=new WeakMap,Yb)});var r_=w((a3,t_)=>{var{app:dq,session:pq,shell:mq,ipcMain:gq,BrowserView:Xl,nativeTheme:yq,dialog:wq}=require("electron"),Kb=require("path"),Jb=require("fs"),Zb=Gt(),Aq=Xb(),Eq=lr(),ss,e_;t_.exports=(e_=class extends Eq{constructor(r){super(r);_(this,"windowWidth");_(this,"windowHeight");_(this,"view",null);_(this,"onTop",!1);_(this,"darkMode",!0);_(this,"login",null);R(this,ss,()=>this.view instanceof Xl?(this.view.setBounds({x:0,y:0,width:this.windowWidth,height:this.windowHeight}),!0):!1);_(this,"init",()=>this.view instanceof Xl?!1:(this.windowWidth=this._oglama.config.getMainMinWidth(),this.windowHeight=this._oglama.config.getMainMinHeight(),this.view=new Xl({width:this.windowWidth,height:this.windowHeight,resizable:!1,backgroundColor:"#00000000",transparent:!0,webPreferences:{preload:Kb.join(this._oglama.rootPath,"lib/preloader/entry/main.js"),imageAnimationPolicy:"noAnimation",allowRunningInsecureContent:!0,session:pq.defaultSession,devTools:!1,backgroundThrottling:!1,nodeIntegration:!0,webSecurity:!1,spellcheck:!1,cache:!1}}),this.view.webContents.on("ready-to-show",()=>{this.view.webContents.setZoomFactor(1),this.view.webContents.setVisualZoomLevelLimits(1,1)}),this.view.webContents.setZoomLevel(0),this.view.webContents.setAudioMuted(!1),this.view.webContents.loadURL("http://localhost:".concat(this._oglama.config.getServerPort(),"/")),this.view.webContents.on("dom-ready",()=>this.view.webContents.focus()),this.view.webContents.on("page-title-updated",(r,i)=>{this._oglama.mainWindow().setTitle(i)}),gq.on(Zb.WINDOW_MAIN,(r,...i)=>{i.length>=3&&this.view.webContents.send(Zb.WINDOW_MAIN,i)}),this._oglama.mainWindow().addBrowserView(this.view),m(this,ss).call(this),!0));_(this,"setWindowSize",(r,i)=>{this.windowWidth=r,this.windowHeight=i,m(this,ss).call(this)});_(this,"setOnTop",(r=!0)=>{let i=!1;if(r=!!r,this.getOnTop()!==r){if(this.onTop=r,this.onTop)this._oglama.mainWindow().removeBrowserView(this.view),this._oglama.mainWindow().addBrowserView(this.view);else{let n=this._oglama.target.getSelected();if(typeof n=="string"&&n.length){let s=this._oglama.target.getTargets()[n];s instanceof Xl&&(this._oglama.mainWindow().removeBrowserView(s),this._oglama.mainWindow().removeBrowserView(this.view),this._oglama.mainWindow().addBrowserView(this.view),this._oglama.mainWindow().addBrowserView(s))}}m(this,ss).call(this),i=!0}return i});_(this,"getOnTop",()=>this.onTop);_(this,"setDarkMode",r=>{let i=!1;return r=!!r,this.getDarkMode()!==r&&(this.darkMode=r,yq.themeSource=r?"dark":"light",this._oglama.mainWindow().setBackgroundColor(r?"#333":"#fff"),i=!0),i});_(this,"quit",()=>dq.quit());_(this,"getProcessVersions",()=>process.versions);_(this,"getDarkMode",()=>this.darkMode);_(this,"openExternal",r=>{typeof r=="string"&&mq.openExternal(r)});_(this,"showOpenDialog",async(r,i=[],n=!1)=>{let s=[];i=(Array.isArray(i)?i:[]).map(a=>"".concat(a).replace(/^\.+/g,"").trim()).filter(Boolean);let o=await wq.showOpenDialog({properties:["openFile",...n?["multiSelections"]:[]],filters:[{name:typeof r=="string"&&r.length?r:n?"Select files":"Select file",extensions:i}]});return o.canceled||(s=(Array.isArray(o.filePaths)?o.filePaths:[]).map(a=>{if(Jb.existsSync(a))try{return{path:a,name:Kb.basename(a),size:Jb.statSync(a).size}}catch{}return null}).filter(a=>a!==null)),s});this._register("main"),this.login=new Aq(r)}},ss=new WeakMap,e_)});var os=w((u3,n_)=>{"use strict";var i_=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);n_.exports=t=>t?Object.keys(t).map(e=>[i_.has(e)?i_.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var iu=w(p_=>{"use strict";var s_=typeof process=="object"&&process?process:{stdout:null,stderr:null},Sq=require("events"),o_=require("stream"),bq=require("string_decoder"),a_=bq.StringDecoder,Sr=Symbol("EOF"),br=Symbol("maybeEmitEnd"),oi=Symbol("emittedEnd"),Kl=Symbol("emittingEnd"),$o=Symbol("emittedError"),Jl=Symbol("closed"),l_=Symbol("read"),Zl=Symbol("flush"),u_=Symbol("flushChunk"),ft=Symbol("encoding"),_r=Symbol("decoder"),eu=Symbol("flowing"),ko=Symbol("paused"),as=Symbol("resume"),Ae=Symbol("buffer"),Zt=Symbol("pipes"),xe=Symbol("bufferLength"),cd=Symbol("bufferPush"),hd=Symbol("bufferShift"),Me=Symbol("objectMode"),Ee=Symbol("destroyed"),fd=Symbol("error"),dd=Symbol("emitData"),c_=Symbol("emitEnd"),pd=Symbol("emitEnd2"),vr=Symbol("async"),md=Symbol("abort"),tu=Symbol("aborted"),Ji=Symbol("signal"),qo=t=>Promise.resolve().then(t),d_=global._MP_NO_ITERATOR_SYMBOLS_!=="1",h_=d_&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),f_=d_&&Symbol.iterator||Symbol("iterator not implemented"),_q=t=>t==="end"||t==="finish"||t==="prefinish",vq=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Oq=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),ru=class{constructor(e,r,i){this.src=e,this.dest=r,this.opts=i,this.ondrain=()=>e[as](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},gd=class extends ru{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,i){super(e,r,i),this.proxyErrors=n=>r.emit("error",n),e.on("error",this.proxyErrors)}},yd=class t extends o_{constructor(e){super(),this[eu]=!1,this[ko]=!1,this[Zt]=[],this[Ae]=[],this[Me]=e&&e.objectMode||!1,this[Me]?this[ft]=null:this[ft]=e&&e.encoding||null,this[ft]==="buffer"&&(this[ft]=null),this[vr]=e&&!!e.async||!1,this[_r]=this[ft]?new a_(this[ft]):null,this[Sr]=!1,this[oi]=!1,this[Kl]=!1,this[Jl]=!1,this[$o]=null,this.writable=!0,this.readable=!0,this[xe]=0,this[Ee]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Ae]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Zt]}),this[Ji]=e&&e.signal,this[tu]=!1,this[Ji]&&(this[Ji].addEventListener("abort",()=>this[md]()),this[Ji].aborted&&this[md]())}get bufferLength(){return this[xe]}get encoding(){return this[ft]}set encoding(e){if(this[Me])throw new Error("cannot set encoding in objectMode");if(this[ft]&&e!==this[ft]&&(this[_r]&&this[_r].lastNeed||this[xe]))throw new Error("cannot change encoding");this[ft]!==e&&(this[_r]=e?new a_(e):null,this[Ae].length&&(this[Ae]=this[Ae].map(r=>this[_r].write(r)))),this[ft]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Me]}set objectMode(e){this[Me]=this[Me]||!!e}get async(){return this[vr]}set async(e){this[vr]=this[vr]||!!e}[md](){this[tu]=!0,this.emit("abort",this[Ji].reason),this.destroy(this[Ji].reason)}get aborted(){return this[tu]}set aborted(e){}write(e,r,i){if(this[tu])return!1;if(this[Sr])throw new Error("write after end");if(this[Ee])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(i=r,r="utf8"),r||(r="utf8");let n=this[vr]?qo:s=>s();return!this[Me]&&!Buffer.isBuffer(e)&&(Oq(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):vq(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Me]?(this.flowing&&this[xe]!==0&&this[Zl](!0),this.flowing?this.emit("data",e):this[cd](e),this[xe]!==0&&this.emit("readable"),i&&n(i),this.flowing):e.length?(typeof e=="string"&&!(r===this[ft]&&!this[_r].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[ft]&&(e=this[_r].write(e)),this.flowing&&this[xe]!==0&&this[Zl](!0),this.flowing?this.emit("data",e):this[cd](e),this[xe]!==0&&this.emit("readable"),i&&n(i),this.flowing):(this[xe]!==0&&this.emit("readable"),i&&n(i),this.flowing)}read(e){if(this[Ee])return null;if(this[xe]===0||e===0||e>this[xe])return this[br](),null;this[Me]&&(e=null),this[Ae].length>1&&!this[Me]&&(this.encoding?this[Ae]=[this[Ae].join("")]:this[Ae]=[Buffer.concat(this[Ae],this[xe])]);let r=this[l_](e||null,this[Ae][0]);return this[br](),r}[l_](e,r){return e===r.length||e===null?this[hd]():(this[Ae][0]=r.slice(e),r=r.slice(0,e),this[xe]-=e),this.emit("data",r),!this[Ae].length&&!this[Sr]&&this.emit("drain"),r}end(e,r,i){return typeof e=="function"&&(i=e,e=null),typeof r=="function"&&(i=r,r="utf8"),e&&this.write(e,r),i&&this.once("end",i),this[Sr]=!0,this.writable=!1,(this.flowing||!this[ko])&&this[br](),this}[as](){this[Ee]||(this[ko]=!1,this[eu]=!0,this.emit("resume"),this[Ae].length?this[Zl]():this[Sr]?this[br]():this.emit("drain"))}resume(){return this[as]()}pause(){this[eu]=!1,this[ko]=!0}get destroyed(){return this[Ee]}get flowing(){return this[eu]}get paused(){return this[ko]}[cd](e){this[Me]?this[xe]+=1:this[xe]+=e.length,this[Ae].push(e)}[hd](){return this[Me]?this[xe]-=1:this[xe]-=this[Ae][0].length,this[Ae].shift()}[Zl](e){do;while(this[u_](this[hd]())&&this[Ae].length);!e&&!this[Ae].length&&!this[Sr]&&this.emit("drain")}[u_](e){return this.emit("data",e),this.flowing}pipe(e,r){if(this[Ee])return;let i=this[oi];return r=r||{},e===s_.stdout||e===s_.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,i?r.end&&e.end():(this[Zt].push(r.proxyErrors?new gd(this,e,r):new ru(this,e,r)),this[vr]?qo(()=>this[as]()):this[as]()),e}unpipe(e){let r=this[Zt].find(i=>i.dest===e);r&&(this[Zt].splice(this[Zt].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let i=super.on(e,r);return e==="data"&&!this[Zt].length&&!this.flowing?this[as]():e==="readable"&&this[xe]!==0?super.emit("readable"):_q(e)&&this[oi]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[$o]&&(this[vr]?qo(()=>r.call(this,this[$o])):r.call(this,this[$o])),i}get emittedEnd(){return this[oi]}[br](){!this[Kl]&&!this[oi]&&!this[Ee]&&this[Ae].length===0&&this[Sr]&&(this[Kl]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Jl]&&this.emit("close"),this[Kl]=!1)}emit(e,r,...i){if(e!=="error"&&e!=="close"&&e!==Ee&&this[Ee])return;if(e==="data")return!this[Me]&&!r?!1:this[vr]?qo(()=>this[dd](r)):this[dd](r);if(e==="end")return this[c_]();if(e==="close"){if(this[Jl]=!0,!this[oi]&&!this[Ee])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[$o]=r,super.emit(fd,r);let s=!this[Ji]||this.listeners("error").length?super.emit("error",r):!1;return this[br](),s}else if(e==="resume"){let s=super.emit("resume");return this[br](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,r,...i);return this[br](),n}[dd](e){for(let i of this[Zt])i.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[br](),r}[c_](){this[oi]||(this[oi]=!0,this.readable=!1,this[vr]?qo(()=>this[pd]()):this[pd]())}[pd](){if(this[_r]){let r=this[_r].end();if(r){for(let i of this[Zt])i.dest.write(r);super.emit("data",r)}}for(let r of this[Zt])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Me]||(e.dataLength=0);let r=this.promise();return this.on("data",i=>{e.push(i),this[Me]||(e.dataLength+=i.length)}),r.then(()=>e)}concat(){return this[Me]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Me]?Promise.reject(new Error("cannot concat in objectMode")):this[ft]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Ee,()=>r(new Error("stream destroyed"))),this.on("error",i=>r(i)),this.on("end",()=>e())})}[h_](){let e=!1,r=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return r();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Sr])return r();let s=null,o=null,a=h=>{this.removeListener("data",l),this.removeListener("end",u),this.removeListener(Ee,c),r(),o(h)},l=h=>{this.removeListener("error",a),this.removeListener("end",u),this.removeListener(Ee,c),this.pause(),s({value:h,done:!!this[Sr]})},u=()=>{this.removeListener("error",a),this.removeListener("data",l),this.removeListener(Ee,c),r(),s({done:!0})},c=()=>a(new Error("stream destroyed"));return new Promise((h,f)=>{o=f,s=h,this.once(Ee,c),this.once("error",a),this.once("end",u),this.once("data",l)})},throw:r,return:r,[h_](){return this}}}[f_](){let e=!1,r=()=>(this.pause(),this.removeListener(fd,r),this.removeListener(Ee,r),this.removeListener("end",r),e=!0,{done:!0}),i=()=>{if(e)return r();let n=this.read();return n===null?r():{value:n}};return this.once("end",r),this.once(fd,r),this.once(Ee,r),{next:i,throw:r,return:r,[f_](){return this}}}destroy(e){return this[Ee]?(e?this.emit("error",e):this.emit(Ee),this):(this[Ee]=!0,this[Ae].length=0,this[xe]=0,typeof this.close=="function"&&!this[Jl]&&this.close(),e?this.emit("error",e):this.emit(Ee),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof o_||e instanceof Sq&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};p_.Minipass=yd});var g_=w((h3,m_)=>{var Tq=require("zlib").constants||{ZLIB_VERNUM:4736};m_.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},Tq))});var T_=w((f3,O_)=>{"use strict";var y_=typeof process=="object"&&process?process:{stdout:null,stderr:null},Cq=require("events"),w_=require("stream"),A_=require("string_decoder").StringDecoder,Or=Symbol("EOF"),Tr=Symbol("maybeEmitEnd"),ai=Symbol("emittedEnd"),nu=Symbol("emittingEnd"),Mo=Symbol("emittedError"),su=Symbol("closed"),E_=Symbol("read"),ou=Symbol("flush"),S_=Symbol("flushChunk"),dt=Symbol("encoding"),Cr=Symbol("decoder"),au=Symbol("flowing"),Uo=Symbol("paused"),ls=Symbol("resume"),De=Symbol("bufferLength"),wd=Symbol("bufferPush"),Ad=Symbol("bufferShift"),We=Symbol("objectMode"),Ge=Symbol("destroyed"),Ed=Symbol("emitData"),b_=Symbol("emitEnd"),Sd=Symbol("emitEnd2"),Rr=Symbol("async"),Bo=t=>Promise.resolve().then(t),__=global._MP_NO_ITERATOR_SYMBOLS_!=="1",Rq=__&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Iq=__&&Symbol.iterator||Symbol("iterator not implemented"),Nq=t=>t==="end"||t==="finish"||t==="prefinish",xq=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Dq=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),lu=class{constructor(e,r,i){this.src=e,this.dest=r,this.opts=i,this.ondrain=()=>e[ls](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},bd=class extends lu{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,i){super(e,r,i),this.proxyErrors=n=>r.emit("error",n),e.on("error",this.proxyErrors)}};O_.exports=class v_ extends w_{constructor(e){super(),this[au]=!1,this[Uo]=!1,this.pipes=[],this.buffer=[],this[We]=e&&e.objectMode||!1,this[We]?this[dt]=null:this[dt]=e&&e.encoding||null,this[dt]==="buffer"&&(this[dt]=null),this[Rr]=e&&!!e.async||!1,this[Cr]=this[dt]?new A_(this[dt]):null,this[Or]=!1,this[ai]=!1,this[nu]=!1,this[su]=!1,this[Mo]=null,this.writable=!0,this.readable=!0,this[De]=0,this[Ge]=!1}get bufferLength(){return this[De]}get encoding(){return this[dt]}set encoding(e){if(this[We])throw new Error("cannot set encoding in objectMode");if(this[dt]&&e!==this[dt]&&(this[Cr]&&this[Cr].lastNeed||this[De]))throw new Error("cannot change encoding");this[dt]!==e&&(this[Cr]=e?new A_(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Cr].write(r)))),this[dt]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[We]}set objectMode(e){this[We]=this[We]||!!e}get async(){return this[Rr]}set async(e){this[Rr]=this[Rr]||!!e}write(e,r,i){if(this[Or])throw new Error("write after end");if(this[Ge])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(i=r,r="utf8"),r||(r="utf8");let n=this[Rr]?Bo:s=>s();return!this[We]&&!Buffer.isBuffer(e)&&(Dq(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):xq(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[We]?(this.flowing&&this[De]!==0&&this[ou](!0),this.flowing?this.emit("data",e):this[wd](e),this[De]!==0&&this.emit("readable"),i&&n(i),this.flowing):e.length?(typeof e=="string"&&!(r===this[dt]&&!this[Cr].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[dt]&&(e=this[Cr].write(e)),this.flowing&&this[De]!==0&&this[ou](!0),this.flowing?this.emit("data",e):this[wd](e),this[De]!==0&&this.emit("readable"),i&&n(i),this.flowing):(this[De]!==0&&this.emit("readable"),i&&n(i),this.flowing)}read(e){if(this[Ge])return null;if(this[De]===0||e===0||e>this[De])return this[Tr](),null;this[We]&&(e=null),this.buffer.length>1&&!this[We]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[De])]);let r=this[E_](e||null,this.buffer[0]);return this[Tr](),r}[E_](e,r){return e===r.length||e===null?this[Ad]():(this.buffer[0]=r.slice(e),r=r.slice(0,e),this[De]-=e),this.emit("data",r),!this.buffer.length&&!this[Or]&&this.emit("drain"),r}end(e,r,i){return typeof e=="function"&&(i=e,e=null),typeof r=="function"&&(i=r,r="utf8"),e&&this.write(e,r),i&&this.once("end",i),this[Or]=!0,this.writable=!1,(this.flowing||!this[Uo])&&this[Tr](),this}[ls](){this[Ge]||(this[Uo]=!1,this[au]=!0,this.emit("resume"),this.buffer.length?this[ou]():this[Or]?this[Tr]():this.emit("drain"))}resume(){return this[ls]()}pause(){this[au]=!1,this[Uo]=!0}get destroyed(){return this[Ge]}get flowing(){return this[au]}get paused(){return this[Uo]}[wd](e){this[We]?this[De]+=1:this[De]+=e.length,this.buffer.push(e)}[Ad](){return this.buffer.length&&(this[We]?this[De]-=1:this[De]-=this.buffer[0].length),this.buffer.shift()}[ou](e){do;while(this[S_](this[Ad]()));!e&&!this.buffer.length&&!this[Or]&&this.emit("drain")}[S_](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[Ge])return;let i=this[ai];return r=r||{},e===y_.stdout||e===y_.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,i?r.end&&e.end():(this.pipes.push(r.proxyErrors?new bd(this,e,r):new lu(this,e,r)),this[Rr]?Bo(()=>this[ls]()):this[ls]()),e}unpipe(e){let r=this.pipes.find(i=>i.dest===e);r&&(this.pipes.splice(this.pipes.indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let i=super.on(e,r);return e==="data"&&!this.pipes.length&&!this.flowing?this[ls]():e==="readable"&&this[De]!==0?super.emit("readable"):Nq(e)&&this[ai]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Mo]&&(this[Rr]?Bo(()=>r.call(this,this[Mo])):r.call(this,this[Mo])),i}get emittedEnd(){return this[ai]}[Tr](){!this[nu]&&!this[ai]&&!this[Ge]&&this.buffer.length===0&&this[Or]&&(this[nu]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[su]&&this.emit("close"),this[nu]=!1)}emit(e,r,...i){if(e!=="error"&&e!=="close"&&e!==Ge&&this[Ge])return;if(e==="data")return r?this[Rr]?Bo(()=>this[Ed](r)):this[Ed](r):!1;if(e==="end")return this[b_]();if(e==="close"){if(this[su]=!0,!this[ai]&&!this[Ge])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Mo]=r;let s=super.emit("error",r);return this[Tr](),s}else if(e==="resume"){let s=super.emit("resume");return this[Tr](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,r,...i);return this[Tr](),n}[Ed](e){for(let i of this.pipes)i.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[Tr](),r}[b_](){this[ai]||(this[ai]=!0,this.readable=!1,this[Rr]?Bo(()=>this[Sd]()):this[Sd]())}[Sd](){if(this[Cr]){let r=this[Cr].end();if(r){for(let i of this.pipes)i.dest.write(r);super.emit("data",r)}}for(let r of this.pipes)r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[We]||(e.dataLength=0);let r=this.promise();return this.on("data",i=>{e.push(i),this[We]||(e.dataLength+=i.length)}),r.then(()=>e)}concat(){return this[We]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[We]?Promise.reject(new Error("cannot concat in objectMode")):this[dt]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Ge,()=>r(new Error("stream destroyed"))),this.on("error",i=>r(i)),this.on("end",()=>e())})}[Rq](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Or])return Promise.resolve({done:!0});let i=null,n=null,s=u=>{this.removeListener("data",o),this.removeListener("end",a),n(u)},o=u=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),i({value:u,done:!!this[Or]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),i({done:!0})},l=()=>s(new Error("stream destroyed"));return new Promise((u,c)=>{n=c,i=u,this.once(Ge,l),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[Iq](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[Ge]?(e?this.emit("error",e):this.emit(Ge),this):(this[Ge]=!0,this.buffer.length=0,this[De]=0,typeof this.close=="function"&&!this[su]&&this.close(),e?this.emit("error",e):this.emit(Ge),this)}static isStream(e){return!!e&&(e instanceof v_||e instanceof w_||e instanceof Cq&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var qd=w(At=>{"use strict";var Cd=require("assert"),li=require("buffer").Buffer,I_=require("zlib"),Zi=At.constants=g_(),Pq=T_(),C_=li.concat,en=Symbol("_superWrite"),cs=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},Fq=Symbol("opts"),jo=Symbol("flushFlag"),R_=Symbol("finishFlushFlag"),kd=Symbol("fullFlushFlag"),ae=Symbol("handle"),uu=Symbol("onError"),us=Symbol("sawError"),_d=Symbol("level"),vd=Symbol("strategy"),Od=Symbol("ended"),d3=Symbol("_defaultFullFlush"),cu=class extends Pq{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[us]=!1,this[Od]=!1,this[Fq]=e,this[jo]=e.flush,this[R_]=e.finishFlush;try{this[ae]=new I_[r](e)}catch(i){throw new cs(i)}this[uu]=i=>{this[us]||(this[us]=!0,this.close(),this.emit("error",i))},this[ae].on("error",i=>this[uu](new cs(i))),this.once("end",()=>this.close)}close(){this[ae]&&(this[ae].close(),this[ae]=null,this.emit("close"))}reset(){if(!this[us])return Cd(this[ae],"zlib binding closed"),this[ae].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[kd]),this.write(Object.assign(li.alloc(0),{[jo]:e})))}end(e,r,i){return e&&this.write(e,r),this.flush(this[R_]),this[Od]=!0,super.end(null,null,i)}get ended(){return this[Od]}write(e,r,i){if(typeof r=="function"&&(i=r,r="utf8"),typeof e=="string"&&(e=li.from(e,r)),this[us])return;Cd(this[ae],"zlib binding closed");let n=this[ae]._handle,s=n.close;n.close=()=>{};let o=this[ae].close;this[ae].close=()=>{},li.concat=u=>u;let a;try{let u=typeof e[jo]=="number"?e[jo]:this[jo];a=this[ae]._processChunk(e,u),li.concat=C_}catch(u){li.concat=C_,this[uu](new cs(u))}finally{this[ae]&&(this[ae]._handle=n,n.close=s,this[ae].close=o,this[ae].removeAllListeners("error"))}this[ae]&&this[ae].on("error",u=>this[uu](new cs(u)));let l;if(a)if(Array.isArray(a)&&a.length>0){l=this[en](li.from(a[0]));for(let u=1;u<a.length;u++)l=this[en](a[u])}else l=this[en](li.from(a));return i&&i(),l}[en](e){return super.write(e)}},Ir=class extends cu{constructor(e,r){e=e||{},e.flush=e.flush||Zi.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Zi.Z_FINISH,super(e,r),this[kd]=Zi.Z_FULL_FLUSH,this[_d]=e.level,this[vd]=e.strategy}params(e,r){if(!this[us]){if(!this[ae])throw new Error("cannot switch params when binding is closed");if(!this[ae].params)throw new Error("not supported in this implementation");if(this[_d]!==e||this[vd]!==r){this.flush(Zi.Z_SYNC_FLUSH),Cd(this[ae],"zlib binding closed");let i=this[ae].flush;this[ae].flush=(n,s)=>{this.flush(n),s()};try{this[ae].params(e,r)}finally{this[ae].flush=i}this[ae]&&(this[_d]=e,this[vd]=r)}}}},Rd=class extends Ir{constructor(e){super(e,"Deflate")}},Id=class extends Ir{constructor(e){super(e,"Inflate")}},Td=Symbol("_portable"),Nd=class extends Ir{constructor(e){super(e,"Gzip"),this[Td]=e&&!!e.portable}[en](e){return this[Td]?(this[Td]=!1,e[9]=255,super[en](e)):super[en](e)}},xd=class extends Ir{constructor(e){super(e,"Gunzip")}},Dd=class extends Ir{constructor(e){super(e,"DeflateRaw")}},Pd=class extends Ir{constructor(e){super(e,"InflateRaw")}},Fd=class extends Ir{constructor(e){super(e,"Unzip")}},hu=class extends cu{constructor(e,r){e=e||{},e.flush=e.flush||Zi.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Zi.BROTLI_OPERATION_FINISH,super(e,r),this[kd]=Zi.BROTLI_OPERATION_FLUSH}},Ld=class extends hu{constructor(e){super(e,"BrotliCompress")}},$d=class extends hu{constructor(e){super(e,"BrotliDecompress")}};At.Deflate=Rd;At.Inflate=Id;At.Gzip=Nd;At.Gunzip=xd;At.DeflateRaw=Dd;At.InflateRaw=Pd;At.Unzip=Fd;typeof I_.BrotliCompress=="function"?(At.BrotliCompress=Ld,At.BrotliDecompress=$d):At.BrotliCompress=At.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var hs=w((g3,N_)=>{var Lq=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;N_.exports=Lq!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var fu=w((w3,x_)=>{"use strict";var{Minipass:$q}=iu(),Md=hs(),Ud=Symbol("slurp");x_.exports=class extends $q{constructor(e,r,i){switch(super(),this.pause(),this.extended=r,this.globalExtended=i,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Md(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Md(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[Ud](r),i&&this[Ud](i,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let i=this.remain,n=this.blockRemain;return this.remain=Math.max(0,i-r),this.blockRemain=Math.max(0,n-r),this.ignore?!0:i>=r?super.write(e):super.write(e.slice(0,i))}[Ud](e,r){for(let i in e)e[i]!==null&&e[i]!==void 0&&!(r&&i==="path")&&(this[i]=i==="path"||i==="linkpath"?Md(e[i]):e[i])}}});var Bd=w(du=>{"use strict";du.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);du.code=new Map(Array.from(du.name).map(t=>[t[1],t[0]]))});var L_=w((E3,F_)=>{"use strict";var kq=(t,e)=>{if(Number.isSafeInteger(t))t<0?Mq(t,e):qq(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},qq=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},Mq=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var i=e.length;i>1;i--){var n=t&255;t=Math.floor(t/256),r?e[i-1]=D_(n):n===0?e[i-1]=0:(r=!0,e[i-1]=P_(n))}},Uq=t=>{let e=t[0],r=e===128?jq(t.slice(1,t.length)):e===255?Bq(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},Bq=t=>{for(var e=t.length,r=0,i=!1,n=e-1;n>-1;n--){var s=t[n],o;i?o=D_(s):s===0?o=s:(i=!0,o=P_(s)),o!==0&&(r-=o*Math.pow(256,e-n-1))}return r},jq=t=>{for(var e=t.length,r=0,i=e-1;i>-1;i--){var n=t[i];n!==0&&(r+=n*Math.pow(256,e-i-1))}return r},D_=t=>(255^t)&255,P_=t=>(255^t)+1&255;F_.exports={encode:kq,parse:Uq}});var ds=w((S3,k_)=>{"use strict";var jd=Bd(),fs=require("path").posix,$_=L_(),Hd=Symbol("slurp"),Et=Symbol("type"),zd=class{constructor(e,r,i,n){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Et]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,i,n):e&&this.set(e)}decode(e,r,i,n){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=tn(e,r,100),this.mode=ui(e,r+100,8),this.uid=ui(e,r+108,8),this.gid=ui(e,r+116,8),this.size=ui(e,r+124,12),this.mtime=Wd(e,r+136,12),this.cksum=ui(e,r+148,12),this[Hd](i),this[Hd](n,!0),this[Et]=tn(e,r+156,1),this[Et]===""&&(this[Et]="0"),this[Et]==="0"&&this.path.slice(-1)==="/"&&(this[Et]="5"),this[Et]==="5"&&(this.size=0),this.linkpath=tn(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=tn(e,r+265,32),this.gname=tn(e,r+297,32),this.devmaj=ui(e,r+329,8),this.devmin=ui(e,r+337,8),e[r+475]!==0){let o=tn(e,r+345,155);this.path=o+"/"+this.path}else{let o=tn(e,r+345,130);o&&(this.path=o+"/"+this.path),this.atime=Wd(e,r+476,12),this.ctime=Wd(e,r+488,12)}let s=8*32;for(let o=r;o<r+148;o++)s+=e[o];for(let o=r+156;o<r+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===8*32&&(this.nullBlock=!0)}[Hd](e,r){for(let i in e)e[i]!==null&&e[i]!==void 0&&!(r&&i==="path")&&(this[i]=e[i])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let i=this.ctime||this.atime?130:155,n=Hq(this.path||"",i),s=n[0],o=n[1];this.needPax=n[2],this.needPax=rn(e,r,100,s)||this.needPax,this.needPax=ci(e,r+100,8,this.mode)||this.needPax,this.needPax=ci(e,r+108,8,this.uid)||this.needPax,this.needPax=ci(e,r+116,8,this.gid)||this.needPax,this.needPax=ci(e,r+124,12,this.size)||this.needPax,this.needPax=Gd(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[Et].charCodeAt(0),this.needPax=rn(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=rn(e,r+265,32,this.uname)||this.needPax,this.needPax=rn(e,r+297,32,this.gname)||this.needPax,this.needPax=ci(e,r+329,8,this.devmaj)||this.needPax,this.needPax=ci(e,r+337,8,this.devmin)||this.needPax,this.needPax=rn(e,r+345,i,o)||this.needPax,e[r+475]!==0?this.needPax=rn(e,r+345,155,o)||this.needPax:(this.needPax=rn(e,r+345,130,o)||this.needPax,this.needPax=Gd(e,r+476,12,this.atime)||this.needPax,this.needPax=Gd(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let l=r;l<r+148;l++)a+=e[l];for(let l=r+156;l<r+512;l++)a+=e[l];return this.cksum=a,ci(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return jd.name.get(this[Et])||this[Et]}get typeKey(){return this[Et]}set type(e){jd.code.has(e)?this[Et]=jd.code.get(e):this[Et]=e}},Hq=(t,e)=>{let i=t,n="",s,o=fs.parse(t).root||".";if(Buffer.byteLength(i)<100)s=[i,n,!1];else{n=fs.dirname(i),i=fs.basename(i);do Buffer.byteLength(i)<=100&&Buffer.byteLength(n)<=e?s=[i,n,!1]:Buffer.byteLength(i)>100&&Buffer.byteLength(n)<=e?s=[i.slice(0,99),n,!0]:(i=fs.join(fs.basename(n),i),n=fs.dirname(n));while(n!==o&&!s);s||(s=[t.slice(0,99),"",!0])}return s},tn=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),Wd=(t,e,r)=>Wq(ui(t,e,r)),Wq=t=>t===null?null:new Date(t*1e3),ui=(t,e,r)=>t[e]&128?$_.parse(t.slice(e,e+r)):zq(t,e,r),Gq=t=>isNaN(t)?null:t,zq=(t,e,r)=>Gq(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),Vq={12:8589934591,8:2097151},ci=(t,e,r,i)=>i===null?!1:i>Vq[r]||i<0?($_.encode(i,t.slice(e,e+r)),!0):(Yq(t,e,r,i),!1),Yq=(t,e,r,i)=>t.write(Qq(i,r),e,r,"ascii"),Qq=(t,e)=>Xq(Math.floor(t).toString(8),e),Xq=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",Gd=(t,e,r,i)=>i===null?!1:ci(t,e,r,i.getTime()/1e3),Kq=new Array(156).join("\0"),rn=(t,e,r,i)=>i===null?!1:(t.write(i+Kq,e,r,"utf8"),i.length!==Buffer.byteLength(i)||i.length>r);k_.exports=zd});var pu=w((b3,q_)=>{"use strict";var Jq=ds(),Zq=require("path"),Ho=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),i=512*Math.ceil(1+r/512),n=Buffer.allocUnsafe(i);for(let s=0;s<512;s++)n[s]=0;new Jq({path:("PaxHeader/"+Zq.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(n),n.write(e,512,r,"utf8");for(let s=r+512;s<n.length;s++)n[s]=0;return n}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],i=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+"\n",n=Buffer.byteLength(i),s=Math.floor(Math.log(n)/Math.log(10))+1;return n+s>=Math.pow(10,s)&&(s+=1),s+n+i}};Ho.parse=(t,e,r)=>new Ho(eM(tM(t),e),r);var eM=(t,e)=>e?Object.keys(t).reduce((r,i)=>(r[i]=t[i],r),e):t,tM=t=>t.replace(/\n$/,"").split("\n").reduce(rM,Object.create(null)),rM=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.slice((r+" ").length);let i=e.split("="),n=i.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!n)return t;let s=i.join("=");return t[n]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(n)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,t};q_.exports=Ho});var ps=w((_3,M_)=>{M_.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var mu=w((v3,U_)=>{"use strict";U_.exports=t=>class extends t{warn(e,r,i={}){this.file&&(i.file=this.file),this.cwd&&(i.cwd=this.cwd),i.code=r instanceof Error&&r.code||e,i.tarCode=e,!this.strict&&i.recoverable!==!1?(r instanceof Error&&(i=Object.assign(r,i),r=r.message),this.emit("warn",i.tarCode,r,i)):r instanceof Error?this.emit("error",Object.assign(r,i)):this.emit("error",Object.assign(new Error("".concat(e,": ").concat(r)),i))}}});var Yd=w((T3,B_)=>{"use strict";var gu=["|","<",">","?",":"],Vd=gu.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),iM=new Map(gu.map((t,e)=>[t,Vd[e]])),nM=new Map(Vd.map((t,e)=>[t,gu[e]]));B_.exports={encode:t=>gu.reduce((e,r)=>e.split(r).join(iM.get(r)),t),decode:t=>Vd.reduce((e,r)=>e.split(r).join(nM.get(r)),t)}});var Qd=w((C3,H_)=>{var{isAbsolute:sM,parse:j_}=require("path").win32;H_.exports=t=>{let e="",r=j_(t);for(;sM(t)||r.root;){let i=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.slice(i.length),e+=i,r=j_(t)}return[e,t]}});var G_=w((R3,W_)=>{"use strict";W_.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var sp=w((x3,sv)=>{"use strict";var{Minipass:J_}=iu(),Z_=pu(),ev=ds(),tr=require("fs"),z_=require("path"),er=hs(),oM=ps(),tv=(t,e)=>e?(t=er(t).replace(/^\.(\/|$)/,""),oM(e)+"/"+t):er(t),aM=16*1024*1024,V_=Symbol("process"),Y_=Symbol("file"),Q_=Symbol("directory"),Kd=Symbol("symlink"),X_=Symbol("hardlink"),Wo=Symbol("header"),yu=Symbol("read"),Jd=Symbol("lstat"),wu=Symbol("onlstat"),Zd=Symbol("onread"),ep=Symbol("onreadlink"),tp=Symbol("openfile"),rp=Symbol("onopenfile"),hi=Symbol("close"),Au=Symbol("mode"),ip=Symbol("awaitDrain"),Xd=Symbol("ondrain"),rr=Symbol("prefix"),K_=Symbol("hadError"),rv=mu(),lM=Yd(),iv=Qd(),nv=G_(),Eu=rv(class extends J_{constructor(e,r){if(r=r||{},super(r),typeof e!="string")throw new TypeError("path is required");this.path=er(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||aM,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=er(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?er(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let i=!1;if(!this.preservePaths){let[n,s]=iv(this.path);n&&(this.path=s,i=n)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=lM.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=er(r.absolute||z_.resolve(this.cwd,e)),this.path===""&&(this.path="./"),i&&this.warn("TAR_ENTRY_INFO","stripping ".concat(i," from absolute path"),{entry:this,path:i+this.path}),this.statCache.has(this.absolute)?this[wu](this.statCache.get(this.absolute)):this[Jd]()}emit(e,...r){return e==="error"&&(this[K_]=!0),super.emit(e,...r)}[Jd](){tr.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[wu](r)})}[wu](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=cM(e),this.emit("stat",e),this[V_]()}[V_](){switch(this.type){case"File":return this[Y_]();case"Directory":return this[Q_]();case"SymbolicLink":return this[Kd]();default:return this.end()}}[Au](e){return nv(e,this.type==="Directory",this.portable)}[rr](e){return tv(e,this.prefix)}[Wo](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new ev({path:this[rr](this.path),linkpath:this.type==="Link"?this[rr](this.linkpath):this.linkpath,mode:this[Au](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new Z_({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[rr](this.path),linkpath:this.type==="Link"?this[rr](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[Q_](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Wo](),this.end()}[Kd](){tr.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[ep](r)})}[ep](e){this.linkpath=er(e),this[Wo](),this.end()}[X_](e){this.type="Link",this.linkpath=er(z_.relative(this.cwd,e)),this.stat.size=0,this[Wo](),this.end()}[Y_](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[X_](r)}this.linkCache.set(e,this.absolute)}if(this[Wo](),this.stat.size===0)return this.end();this[tp]()}[tp](){tr.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[rp](r)})}[rp](e){if(this.fd=e,this[K_])return this[hi]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[yu]()}[yu](){let{fd:e,buf:r,offset:i,length:n,pos:s}=this;tr.read(e,r,i,n,s,(o,a)=>{if(o)return this[hi](()=>this.emit("error",o));this[Zd](a)})}[hi](e){tr.close(this.fd,e)}[Zd](e){if(e<=0&&this.remain>0){let n=new Error("encountered unexpected EOF");return n.path=this.absolute,n.syscall="read",n.code="EOF",this[hi](()=>this.emit("error",n))}if(e>this.remain){let n=new Error("did not encounter expected EOF");return n.path=this.absolute,n.syscall="read",n.code="EOF",this[hi](()=>this.emit("error",n))}if(e===this.remain)for(let n=e;n<this.length&&e<this.blockRemain;n++)this.buf[n+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[Xd]():this[ip](()=>this[Xd]())}[ip](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Xd](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[hi](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[yu]()}}),np=class extends Eu{[Jd](){this[wu](tr.lstatSync(this.absolute))}[Kd](){this[ep](tr.readlinkSync(this.absolute))}[tp](){this[rp](tr.openSync(this.absolute,"r"))}[yu](){let e=!0;try{let{fd:r,buf:i,offset:n,length:s,pos:o}=this,a=tr.readSync(r,i,n,s,o);this[Zd](a),e=!1}finally{if(e)try{this[hi](()=>{})}catch{}}}[ip](e){e()}[hi](e){tr.closeSync(this.fd),e()}},uM=rv(class extends J_{constructor(e,r){r=r||{},super(r),this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=er(e.path),this.mode=this[Au](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=er(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let i=!1;if(!this.preservePaths){let[n,s]=iv(this.path);n&&(this.path=s,i=n)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new ev({path:this[rr](this.path),linkpath:this.type==="Link"?this[rr](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),i&&this.warn("TAR_ENTRY_INFO","stripping ".concat(i," from absolute path"),{entry:this,path:i+this.path}),this.header.encode()&&!this.noPax&&super.write(new Z_({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[rr](this.path),linkpath:this.type==="Link"?this[rr](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[rr](e){return tv(e,this.prefix)}[Au](e){return nv(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Eu.Sync=np;Eu.Tar=uM;var cM=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";sv.exports=Eu});var av=w((D3,ov)=>{"use strict";ov.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var op=w((P3,lv)=>{"use strict";lv.exports=Q;Q.Node=nn;Q.create=Q;function Q(t){var e=this;if(e instanceof Q||(e=new Q),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)e.push(arguments[r]);return e}Q.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Q.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Q.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Q.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)fM(this,arguments[t]);return this.length};Q.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)dM(this,arguments[t]);return this.length};Q.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Q.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Q.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,i=0;r!==null;i++)t.call(e,r.value,i,this),r=r.next};Q.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,i=this.length-1;r!==null;i--)t.call(e,r.value,i,this),r=r.prev};Q.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Q.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Q.prototype.map=function(t,e){e=e||this;for(var r=new Q,i=this.head;i!==null;)r.push(t.call(e,i.value,this)),i=i.next;return r};Q.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Q,i=this.tail;i!==null;)r.push(t.call(e,i.value,this)),i=i.prev;return r};Q.prototype.reduce=function(t,e){var r,i=this.head;if(arguments.length>1)r=e;else if(this.head)i=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;i!==null;n++)r=t(r,i.value,n),i=i.next;return r};Q.prototype.reduceReverse=function(t,e){var r,i=this.tail;if(arguments.length>1)r=e;else if(this.tail)i=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;i!==null;n--)r=t(r,i.value,n),i=i.prev;return r};Q.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Q.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Q.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Q;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,n=this.head;n!==null&&i<t;i++)n=n.next;for(;n!==null&&i<e;i++,n=n.next)r.push(n.value);return r};Q.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Q;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,n=this.tail;n!==null&&i>e;i--)n=n.prev;for(;n!==null&&i>t;i--,n=n.prev)r.push(n.value);return r};Q.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,n=this.head;n!==null&&i<t;i++)n=n.next;for(var s=[],i=0;n&&i<e;i++)s.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var i=0;i<r.length;i++)n=hM(this,n,r[i]);return s};Q.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i}return this.head=e,this.tail=t,this};function hM(t,e,r){var i=e===t.head?new nn(r,null,e,t):new nn(r,e,e.next,t);return i.next===null&&(t.tail=i),i.prev===null&&(t.head=i),t.length++,i}function fM(t,e){t.tail=new nn(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function dM(t,e){t.head=new nn(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function nn(t,e,r,i){if(!(this instanceof nn))return new nn(t,e,r,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{av()(Q)}catch{}});var Iu=w((L3,gv)=>{"use strict";var Cu=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},{Minipass:pM}=iu(),uv=qd(),mM=fu(),mp=sp(),gM=mp.Sync,yM=mp.Tar,wM=op(),cv=Buffer.alloc(1024),_u=Symbol("onStat"),Su=Symbol("ended"),ir=Symbol("queue"),ms=Symbol("current"),sn=Symbol("process"),bu=Symbol("processing"),hv=Symbol("processJob"),nr=Symbol("jobs"),ap=Symbol("jobDone"),vu=Symbol("addFSEntry"),fv=Symbol("addTarEntry"),hp=Symbol("stat"),fp=Symbol("readdir"),Ou=Symbol("onreaddir"),Tu=Symbol("pipe"),dv=Symbol("entry"),lp=Symbol("entryOpt"),dp=Symbol("writeEntryClass"),mv=Symbol("write"),up=Symbol("ondrain"),Ru=require("fs"),pv=require("path"),AM=mu(),cp=hs(),gp=AM(class extends pM{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=cp(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[dp]=mp,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new uv.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new uv.BrotliCompress(e.brotli)),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[up]()),this.on("resume",r=>this.zip.resume())}else this.on("drain",this[up]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[ir]=new wM,this[nr]=0,this.jobs=+e.jobs||4,this[bu]=!1,this[Su]=!1}[mv](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Su]=!0,this[sn](),this}write(e){if(this[Su])throw new Error("write after end");return e instanceof mM?this[fv](e):this[vu](e),this.flowing}[fv](e){let r=cp(pv.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let i=new Cu(e.path,r,!1);i.entry=new yM(e,this[lp](i)),i.entry.on("end",n=>this[ap](i)),this[nr]+=1,this[ir].push(i)}this[sn]()}[vu](e){let r=cp(pv.resolve(this.cwd,e));this[ir].push(new Cu(e,r)),this[sn]()}[hp](e){e.pending=!0,this[nr]+=1;let r=this.follow?"stat":"lstat";Ru[r](e.absolute,(i,n)=>{e.pending=!1,this[nr]-=1,i?this.emit("error",i):this[_u](e,n)})}[_u](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[sn]()}[fp](e){e.pending=!0,this[nr]+=1,Ru.readdir(e.absolute,(r,i)=>{if(e.pending=!1,this[nr]-=1,r)return this.emit("error",r);this[Ou](e,i)})}[Ou](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[sn]()}[sn](){if(!this[bu]){this[bu]=!0;for(let e=this[ir].head;e!==null&&this[nr]<this.jobs;e=e.next)if(this[hv](e.value),e.value.ignore){let r=e.next;this[ir].removeNode(e),e.next=r}this[bu]=!1,this[Su]&&!this[ir].length&&this[nr]===0&&(this.zip?this.zip.end(cv):(super.write(cv),super.end()))}}get[ms](){return this[ir]&&this[ir].head&&this[ir].head.value}[ap](e){this[ir].shift(),this[nr]-=1,this[sn]()}[hv](e){if(!e.pending){if(e.entry){e===this[ms]&&!e.piped&&this[Tu](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[_u](e,this.statCache.get(e.absolute)):this[hp](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Ou](e,this.readdirCache.get(e.absolute)):this[fp](e),!e.readdir))){if(e.entry=this[dv](e),!e.entry){e.ignore=!0;return}e===this[ms]&&!e.piped&&this[Tu](e)}}}[lp](e){return{onwarn:(r,i,n)=>this.warn(r,i,n),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[dv](e){this[nr]+=1;try{return new this[dp](e.path,this[lp](e)).on("end",()=>this[ap](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[up](){this[ms]&&this[ms].entry&&this[ms].entry.resume()}[Tu](e){e.piped=!0,e.readdir&&e.readdir.forEach(n=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[vu](o+n)});let r=e.entry,i=this.zip;i?r.on("data",n=>{i.write(n)||r.pause()}):r.on("data",n=>{super.write(n)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),pp=class extends gp{constructor(e){super(e),this[dp]=gM}pause(){}resume(){}[hp](e){let r=this.follow?"statSync":"lstatSync";this[_u](e,Ru[r](e.absolute))}[fp](e,r){this[Ou](e,Ru.readdirSync(e.absolute))}[Tu](e){let r=e.entry,i=this.zip;e.readdir&&e.readdir.forEach(n=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[vu](o+n)}),i?r.on("data",n=>{i.write(n)}):r.on("data",n=>{super[mv](n)})}};gp.Sync=pp;gv.exports=gp});var Tv=w(($3,Ov)=>{"use strict";var yv=typeof process=="object"&&process?process:{stdout:null,stderr:null},EM=require("events"),wv=require("stream"),Av=require("string_decoder").StringDecoder,Nr=Symbol("EOF"),xr=Symbol("maybeEmitEnd"),fi=Symbol("emittedEnd"),Nu=Symbol("emittingEnd"),Go=Symbol("emittedError"),xu=Symbol("closed"),Ev=Symbol("read"),Du=Symbol("flush"),Sv=Symbol("flushChunk"),pt=Symbol("encoding"),Dr=Symbol("decoder"),Pu=Symbol("flowing"),zo=Symbol("paused"),gs=Symbol("resume"),Pe=Symbol("bufferLength"),yp=Symbol("bufferPush"),wp=Symbol("bufferShift"),ze=Symbol("objectMode"),Ve=Symbol("destroyed"),Ap=Symbol("emitData"),bv=Symbol("emitEnd"),Ep=Symbol("emitEnd2"),Pr=Symbol("async"),Vo=t=>Promise.resolve().then(t),_v=global._MP_NO_ITERATOR_SYMBOLS_!=="1",SM=_v&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),bM=_v&&Symbol.iterator||Symbol("iterator not implemented"),_M=t=>t==="end"||t==="finish"||t==="prefinish",vM=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,OM=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Fu=class{constructor(e,r,i){this.src=e,this.dest=r,this.opts=i,this.ondrain=()=>e[gs](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Sp=class extends Fu{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,i){super(e,r,i),this.proxyErrors=n=>r.emit("error",n),e.on("error",this.proxyErrors)}};Ov.exports=class vv extends wv{constructor(e){super(),this[Pu]=!1,this[zo]=!1,this.pipes=[],this.buffer=[],this[ze]=e&&e.objectMode||!1,this[ze]?this[pt]=null:this[pt]=e&&e.encoding||null,this[pt]==="buffer"&&(this[pt]=null),this[Pr]=e&&!!e.async||!1,this[Dr]=this[pt]?new Av(this[pt]):null,this[Nr]=!1,this[fi]=!1,this[Nu]=!1,this[xu]=!1,this[Go]=null,this.writable=!0,this.readable=!0,this[Pe]=0,this[Ve]=!1}get bufferLength(){return this[Pe]}get encoding(){return this[pt]}set encoding(e){if(this[ze])throw new Error("cannot set encoding in objectMode");if(this[pt]&&e!==this[pt]&&(this[Dr]&&this[Dr].lastNeed||this[Pe]))throw new Error("cannot change encoding");this[pt]!==e&&(this[Dr]=e?new Av(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Dr].write(r)))),this[pt]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[ze]}set objectMode(e){this[ze]=this[ze]||!!e}get async(){return this[Pr]}set async(e){this[Pr]=this[Pr]||!!e}write(e,r,i){if(this[Nr])throw new Error("write after end");if(this[Ve])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(i=r,r="utf8"),r||(r="utf8");let n=this[Pr]?Vo:s=>s();return!this[ze]&&!Buffer.isBuffer(e)&&(OM(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):vM(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[ze]?(this.flowing&&this[Pe]!==0&&this[Du](!0),this.flowing?this.emit("data",e):this[yp](e),this[Pe]!==0&&this.emit("readable"),i&&n(i),this.flowing):e.length?(typeof e=="string"&&!(r===this[pt]&&!this[Dr].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[pt]&&(e=this[Dr].write(e)),this.flowing&&this[Pe]!==0&&this[Du](!0),this.flowing?this.emit("data",e):this[yp](e),this[Pe]!==0&&this.emit("readable"),i&&n(i),this.flowing):(this[Pe]!==0&&this.emit("readable"),i&&n(i),this.flowing)}read(e){if(this[Ve])return null;if(this[Pe]===0||e===0||e>this[Pe])return this[xr](),null;this[ze]&&(e=null),this.buffer.length>1&&!this[ze]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[Pe])]);let r=this[Ev](e||null,this.buffer[0]);return this[xr](),r}[Ev](e,r){return e===r.length||e===null?this[wp]():(this.buffer[0]=r.slice(e),r=r.slice(0,e),this[Pe]-=e),this.emit("data",r),!this.buffer.length&&!this[Nr]&&this.emit("drain"),r}end(e,r,i){return typeof e=="function"&&(i=e,e=null),typeof r=="function"&&(i=r,r="utf8"),e&&this.write(e,r),i&&this.once("end",i),this[Nr]=!0,this.writable=!1,(this.flowing||!this[zo])&&this[xr](),this}[gs](){this[Ve]||(this[zo]=!1,this[Pu]=!0,this.emit("resume"),this.buffer.length?this[Du]():this[Nr]?this[xr]():this.emit("drain"))}resume(){return this[gs]()}pause(){this[Pu]=!1,this[zo]=!0}get destroyed(){return this[Ve]}get flowing(){return this[Pu]}get paused(){return this[zo]}[yp](e){this[ze]?this[Pe]+=1:this[Pe]+=e.length,this.buffer.push(e)}[wp](){return this.buffer.length&&(this[ze]?this[Pe]-=1:this[Pe]-=this.buffer[0].length),this.buffer.shift()}[Du](e){do;while(this[Sv](this[wp]()));!e&&!this.buffer.length&&!this[Nr]&&this.emit("drain")}[Sv](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[Ve])return;let i=this[fi];return r=r||{},e===yv.stdout||e===yv.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,i?r.end&&e.end():(this.pipes.push(r.proxyErrors?new Sp(this,e,r):new Fu(this,e,r)),this[Pr]?Vo(()=>this[gs]()):this[gs]()),e}unpipe(e){let r=this.pipes.find(i=>i.dest===e);r&&(this.pipes.splice(this.pipes.indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let i=super.on(e,r);return e==="data"&&!this.pipes.length&&!this.flowing?this[gs]():e==="readable"&&this[Pe]!==0?super.emit("readable"):_M(e)&&this[fi]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Go]&&(this[Pr]?Vo(()=>r.call(this,this[Go])):r.call(this,this[Go])),i}get emittedEnd(){return this[fi]}[xr](){!this[Nu]&&!this[fi]&&!this[Ve]&&this.buffer.length===0&&this[Nr]&&(this[Nu]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[xu]&&this.emit("close"),this[Nu]=!1)}emit(e,r,...i){if(e!=="error"&&e!=="close"&&e!==Ve&&this[Ve])return;if(e==="data")return r?this[Pr]?Vo(()=>this[Ap](r)):this[Ap](r):!1;if(e==="end")return this[bv]();if(e==="close"){if(this[xu]=!0,!this[fi]&&!this[Ve])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Go]=r;let s=super.emit("error",r);return this[xr](),s}else if(e==="resume"){let s=super.emit("resume");return this[xr](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,r,...i);return this[xr](),n}[Ap](e){for(let i of this.pipes)i.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[xr](),r}[bv](){this[fi]||(this[fi]=!0,this.readable=!1,this[Pr]?Vo(()=>this[Ep]()):this[Ep]())}[Ep](){if(this[Dr]){let r=this[Dr].end();if(r){for(let i of this.pipes)i.dest.write(r);super.emit("data",r)}}for(let r of this.pipes)r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[ze]||(e.dataLength=0);let r=this.promise();return this.on("data",i=>{e.push(i),this[ze]||(e.dataLength+=i.length)}),r.then(()=>e)}concat(){return this[ze]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[ze]?Promise.reject(new Error("cannot concat in objectMode")):this[pt]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Ve,()=>r(new Error("stream destroyed"))),this.on("error",i=>r(i)),this.on("end",()=>e())})}[SM](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Nr])return Promise.resolve({done:!0});let i=null,n=null,s=u=>{this.removeListener("data",o),this.removeListener("end",a),n(u)},o=u=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),i({value:u,done:!!this[Nr]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),i({done:!0})},l=()=>s(new Error("stream destroyed"));return new Promise((u,c)=>{n=c,i=u,this.once(Ve,l),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[bM](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[Ve]?(e?this.emit("error",e):this.emit(Ve),this):(this[Ve]=!0,this.buffer.length=0,this[Pe]=0,typeof this.close=="function"&&!this[xu]&&this.close(),e?this.emit("error",e):this.emit(Ve),this)}static isStream(e){return!!e&&(e instanceof vv||e instanceof wv||e instanceof EM&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var vs=w(Qo=>{"use strict";var TM=Tv(),CM=require("events").EventEmitter,mt=require("fs"),vp=mt.writev;if(!vp){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;vp=(r,i,n,s)=>{let o=(l,u)=>s(l,u,i),a=new e;a.oncomplete=o,t.writeBuffers(r,i,n,a)}}var bs=Symbol("_autoClose"),Ht=Symbol("_close"),Yo=Symbol("_ended"),ie=Symbol("_fd"),Cv=Symbol("_finished"),pi=Symbol("_flags"),bp=Symbol("_flush"),Op=Symbol("_handleChunk"),Tp=Symbol("_makeBuf"),Mu=Symbol("_mode"),Lu=Symbol("_needDrain"),Es=Symbol("_onerror"),_s=Symbol("_onopen"),_p=Symbol("_onread"),ws=Symbol("_onwrite"),mi=Symbol("_open"),Fr=Symbol("_path"),on=Symbol("_pos"),sr=Symbol("_queue"),As=Symbol("_read"),Rv=Symbol("_readSize"),di=Symbol("_reading"),$u=Symbol("_remain"),Iv=Symbol("_size"),ku=Symbol("_write"),ys=Symbol("_writing"),qu=Symbol("_defaultFlag"),Ss=Symbol("_errored"),Uu=class extends TM{constructor(e,r){if(r=r||{},super(r),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Ss]=!1,this[ie]=typeof r.fd=="number"?r.fd:null,this[Fr]=e,this[Rv]=r.readSize||16*1024*1024,this[di]=!1,this[Iv]=typeof r.size=="number"?r.size:1/0,this[$u]=this[Iv],this[bs]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[ie]=="number"?this[As]():this[mi]()}get fd(){return this[ie]}get path(){return this[Fr]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[mi](){mt.open(this[Fr],"r",(e,r)=>this[_s](e,r))}[_s](e,r){e?this[Es](e):(this[ie]=r,this.emit("open",r),this[As]())}[Tp](){return Buffer.allocUnsafe(Math.min(this[Rv],this[$u]))}[As](){if(!this[di]){this[di]=!0;let e=this[Tp]();if(e.length===0)return process.nextTick(()=>this[_p](null,0,e));mt.read(this[ie],e,0,e.length,null,(r,i,n)=>this[_p](r,i,n))}}[_p](e,r,i){this[di]=!1,e?this[Es](e):this[Op](r,i)&&this[As]()}[Ht](){if(this[bs]&&typeof this[ie]=="number"){let e=this[ie];this[ie]=null,mt.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Es](e){this[di]=!0,this[Ht](),this.emit("error",e)}[Op](e,r){let i=!1;return this[$u]-=e,e>0&&(i=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[$u]<=0)&&(i=!1,this[Ht](),super.end()),i}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[ie]=="number"&&this[As]();break;case"error":return this[Ss]?void 0:(this[Ss]=!0,super.emit(e,r));default:return super.emit(e,r)}}},Cp=class extends Uu{[mi](){let e=!0;try{this[_s](null,mt.openSync(this[Fr],"r")),e=!1}finally{e&&this[Ht]()}}[As](){let e=!0;try{if(!this[di]){this[di]=!0;do{let r=this[Tp](),i=r.length===0?0:mt.readSync(this[ie],r,0,r.length,null);if(!this[Op](i,r))break}while(!0);this[di]=!1}e=!1}finally{e&&this[Ht]()}}[Ht](){if(this[bs]&&typeof this[ie]=="number"){let e=this[ie];this[ie]=null,mt.closeSync(e),this.emit("close")}}},Bu=class extends CM{constructor(e,r){r=r||{},super(r),this.readable=!1,this.writable=!0,this[Ss]=!1,this[ys]=!1,this[Yo]=!1,this[Lu]=!1,this[sr]=[],this[Fr]=e,this[ie]=typeof r.fd=="number"?r.fd:null,this[Mu]=r.mode===void 0?438:r.mode,this[on]=typeof r.start=="number"?r.start:null,this[bs]=typeof r.autoClose=="boolean"?r.autoClose:!0;let i=this[on]!==null?"r+":"w";this[qu]=r.flags===void 0,this[pi]=this[qu]?i:r.flags,this[ie]===null&&this[mi]()}emit(e,r){if(e==="error"){if(this[Ss])return;this[Ss]=!0}return super.emit(e,r)}get fd(){return this[ie]}get path(){return this[Fr]}[Es](e){this[Ht](),this[ys]=!0,this.emit("error",e)}[mi](){mt.open(this[Fr],this[pi],this[Mu],(e,r)=>this[_s](e,r))}[_s](e,r){this[qu]&&this[pi]==="r+"&&e&&e.code==="ENOENT"?(this[pi]="w",this[mi]()):e?this[Es](e):(this[ie]=r,this.emit("open",r),this[bp]())}end(e,r){return e&&this.write(e,r),this[Yo]=!0,!this[ys]&&!this[sr].length&&typeof this[ie]=="number"&&this[ws](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[Yo]?(this.emit("error",new Error("write() after end()")),!1):this[ie]===null||this[ys]||this[sr].length?(this[sr].push(e),this[Lu]=!0,!1):(this[ys]=!0,this[ku](e),!0)}[ku](e){mt.write(this[ie],e,0,e.length,this[on],(r,i)=>this[ws](r,i))}[ws](e,r){e?this[Es](e):(this[on]!==null&&(this[on]+=r),this[sr].length?this[bp]():(this[ys]=!1,this[Yo]&&!this[Cv]?(this[Cv]=!0,this[Ht](),this.emit("finish")):this[Lu]&&(this[Lu]=!1,this.emit("drain"))))}[bp](){if(this[sr].length===0)this[Yo]&&this[ws](null,0);else if(this[sr].length===1)this[ku](this[sr].pop());else{let e=this[sr];this[sr]=[],vp(this[ie],e,this[on],(r,i)=>this[ws](r,i))}}[Ht](){if(this[bs]&&typeof this[ie]=="number"){let e=this[ie];this[ie]=null,mt.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},Rp=class extends Bu{[mi](){let e;if(this[qu]&&this[pi]==="r+")try{e=mt.openSync(this[Fr],this[pi],this[Mu])}catch(r){if(r.code==="ENOENT")return this[pi]="w",this[mi]();throw r}else e=mt.openSync(this[Fr],this[pi],this[Mu]);this[_s](null,e)}[Ht](){if(this[bs]&&typeof this[ie]=="number"){let e=this[ie];this[ie]=null,mt.closeSync(e),this.emit("close")}}[ku](e){let r=!0;try{this[ws](null,mt.writeSync(this[ie],e,0,e.length,this[on])),r=!1}finally{if(r)try{this[Ht]()}catch{}}}};Qo.ReadStream=Uu;Qo.ReadStreamSync=Cp;Qo.WriteStream=Bu;Qo.WriteStreamSync=Rp});var Yu=w((M3,Mv)=>{"use strict";var RM=mu(),Nv=ds(),IM=require("events"),NM=op(),xM=1024*1024,DM=fu(),xv=pu(),Dv=qd(),{nextTick:PM}=require("process"),Ip=Buffer.from([31,139]),Nt=Symbol("state"),an=Symbol("writeEntry"),Lr=Symbol("readEntry"),Np=Symbol("nextEntry"),Pv=Symbol("processEntry"),xt=Symbol("extendedHeader"),Xo=Symbol("globalExtendedHeader"),gi=Symbol("meta"),Fv=Symbol("emitMeta"),le=Symbol("buffer"),$r=Symbol("queue"),yi=Symbol("ended"),Lv=Symbol("emittedEnd"),ln=Symbol("emit"),Fe=Symbol("unzip"),ju=Symbol("consumeChunk"),Hu=Symbol("consumeChunkSub"),xp=Symbol("consumeBody"),$v=Symbol("consumeMeta"),kv=Symbol("consumeHeader"),Wu=Symbol("consuming"),Dp=Symbol("bufferConcat"),Pp=Symbol("maybeEnd"),Ko=Symbol("writing"),wi=Symbol("aborted"),Gu=Symbol("onDone"),un=Symbol("sawValidEntry"),zu=Symbol("sawNullBlock"),Vu=Symbol("sawEOF"),qv=Symbol("closeStream"),FM=t=>!0;Mv.exports=RM(class extends IM{constructor(e){e=e||{},super(e),this.file=e.file||"",this[un]=null,this.on(Gu,i=>{(this[Nt]==="begin"||this[un]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Gu,e.ondone):this.on(Gu,i=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||xM,this.filter=typeof e.filter=="function"?e.filter:FM;let r=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:r?void 0:!1,this.writable=!0,this.readable=!1,this[$r]=new NM,this[le]=null,this[Lr]=null,this[an]=null,this[Nt]="begin",this[gi]="",this[xt]=null,this[Xo]=null,this[yi]=!1,this[Fe]=null,this[wi]=!1,this[zu]=!1,this[Vu]=!1,this.on("end",()=>this[qv]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[kv](e,r){this[un]===null&&(this[un]=!1);let i;try{i=new Nv(e,r,this[xt],this[Xo])}catch(n){return this.warn("TAR_ENTRY_INVALID",n)}if(i.nullBlock)this[zu]?(this[Vu]=!0,this[Nt]==="begin"&&(this[Nt]="header"),this[ln]("eof")):(this[zu]=!0,this[ln]("nullBlock"));else if(this[zu]=!1,!i.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:i});else if(!i.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:i});else{let n=i.type;if(/^(Symbolic)?Link$/.test(n)&&!i.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:i});else if(!/^(Symbolic)?Link$/.test(n)&&i.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:i});else{let s=this[an]=new DM(i,this[xt],this[Xo]);if(!this[un])if(s.remain){let o=()=>{s.invalid||(this[un]=!0)};s.on("end",o)}else this[un]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[ln]("ignoredEntry",s),this[Nt]="ignore",s.resume()):s.size>0&&(this[gi]="",s.on("data",o=>this[gi]+=o),this[Nt]="meta"):(this[xt]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[ln]("ignoredEntry",s),this[Nt]=s.remain?"ignore":"header",s.resume()):(s.remain?this[Nt]="body":(this[Nt]="header",s.end()),this[Lr]?this[$r].push(s):(this[$r].push(s),this[Np]())))}}}[qv](){PM(()=>this.emit("close"))}[Pv](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Lr]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",i=>this[Np]()),r=!1)):(this[Lr]=null,r=!1),r}[Np](){do;while(this[Pv](this[$r].shift()));if(!this[$r].length){let e=this[Lr];!e||e.flowing||e.size===e.remain?this[Ko]||this.emit("drain"):e.once("drain",i=>this.emit("drain"))}}[xp](e,r){let i=this[an],n=i.blockRemain,s=n>=e.length&&r===0?e:e.slice(r,r+n);return i.write(s),i.blockRemain||(this[Nt]="header",this[an]=null,i.end()),s.length}[$v](e,r){let i=this[an],n=this[xp](e,r);return this[an]||this[Fv](i),n}[ln](e,r,i){!this[$r].length&&!this[Lr]?this.emit(e,r,i):this[$r].push([e,r,i])}[Fv](e){switch(this[ln]("meta",this[gi]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[xt]=xv.parse(this[gi],this[xt],!1);break;case"GlobalExtendedHeader":this[Xo]=xv.parse(this[gi],this[Xo],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[xt]=this[xt]||Object.create(null),this[xt].path=this[gi].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[xt]=this[xt]||Object.create(null),this[xt].linkpath=this[gi].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[wi]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[wi])return;if((this[Fe]===null||this.brotli===void 0&&this[Fe]===!1)&&e){if(this[le]&&(e=Buffer.concat([this[le],e]),this[le]=null),e.length<Ip.length)return this[le]=e,!0;for(let s=0;this[Fe]===null&&s<Ip.length;s++)e[s]!==Ip[s]&&(this[Fe]=!1);let n=this.brotli===void 0;if(this[Fe]===!1&&n)if(e.length<512)if(this[yi])this.brotli=!0;else return this[le]=e,!0;else try{new Nv(e.slice(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[Fe]===null||this[Fe]===!1&&this.brotli){let s=this[yi];this[yi]=!1,this[Fe]=this[Fe]===null?new Dv.Unzip:new Dv.BrotliDecompress,this[Fe].on("data",a=>this[ju](a)),this[Fe].on("error",a=>this.abort(a)),this[Fe].on("end",a=>{this[yi]=!0,this[ju]()}),this[Ko]=!0;let o=this[Fe][s?"end":"write"](e);return this[Ko]=!1,o}}this[Ko]=!0,this[Fe]?this[Fe].write(e):this[ju](e),this[Ko]=!1;let i=this[$r].length?!1:this[Lr]?this[Lr].flowing:!0;return!i&&!this[$r].length&&this[Lr].once("drain",n=>this.emit("drain")),i}[Dp](e){e&&!this[wi]&&(this[le]=this[le]?Buffer.concat([this[le],e]):e)}[Pp](){if(this[yi]&&!this[Lv]&&!this[wi]&&!this[Wu]){this[Lv]=!0;let e=this[an];if(e&&e.blockRemain){let r=this[le]?this[le].length:0;this.warn("TAR_BAD_ARCHIVE","Truncated input (needed ".concat(e.blockRemain," more bytes, only ").concat(r," available)"),{entry:e}),this[le]&&e.write(this[le]),e.end()}this[ln](Gu)}}[ju](e){if(this[Wu])this[Dp](e);else if(!e&&!this[le])this[Pp]();else{if(this[Wu]=!0,this[le]){this[Dp](e);let r=this[le];this[le]=null,this[Hu](r)}else this[Hu](e);for(;this[le]&&this[le].length>=512&&!this[wi]&&!this[Vu];){let r=this[le];this[le]=null,this[Hu](r)}this[Wu]=!1}(!this[le]||this[yi])&&this[Pp]()}[Hu](e){let r=0,i=e.length;for(;r+512<=i&&!this[wi]&&!this[Vu];)switch(this[Nt]){case"begin":case"header":this[kv](e,r),r+=512;break;case"ignore":case"body":r+=this[xp](e,r);break;case"meta":r+=this[$v](e,r);break;default:throw new Error("invalid state: "+this[Nt])}r<i&&(this[le]?this[le]=Buffer.concat([e.slice(r),this[le]]):this[le]=e.slice(r))}end(e){this[wi]||(this[Fe]?this[Fe].end(e):(this[yi]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),this.write(e)))}})});var Qu=w((U3,Hv)=>{"use strict";var LM=os(),Bv=Yu(),Os=require("fs"),$M=vs(),Uv=require("path"),Fp=ps();Hv.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let i=LM(t);if(i.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&qM(i,e),i.noResume||kM(i),i.file&&i.sync?MM(i):i.file?UM(i,r):jv(i)};var kM=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},qM=(t,e)=>{let r=new Map(e.map(s=>[Fp(s),!0])),i=t.filter,n=(s,o)=>{let a=o||Uv.parse(s).root||".",l=s===a?!1:r.has(s)?r.get(s):n(Uv.dirname(s),a);return r.set(s,l),l};t.filter=i?(s,o)=>i(s,o)&&n(Fp(s)):s=>n(Fp(s))},MM=t=>{let e=jv(t),r=t.file,i=!0,n;try{let s=Os.statSync(r),o=t.maxReadSize||16*1024*1024;if(s.size<o)e.end(Os.readFileSync(r));else{let a=0,l=Buffer.allocUnsafe(o);for(n=Os.openSync(r,"r");a<s.size;){let u=Os.readSync(n,l,0,o,a);a+=u,e.write(l.slice(0,u))}e.end()}i=!1}finally{if(i&&n)try{Os.closeSync(n)}catch{}}},UM=(t,e)=>{let r=new Bv(t),i=t.maxReadSize||16*1024*1024,n=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("end",o),Os.stat(n,(l,u)=>{if(l)a(l);else{let c=new $M.ReadStream(n,{readSize:i,size:u.size});c.on("error",a),c.pipe(r)}})});return e?s.then(e,e):s},jv=t=>new Bv(t)});var Qv=w((B3,Yv)=>{"use strict";var BM=os(),Xu=Iu(),Wv=vs(),Gv=Qu(),zv=require("path");Yv.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let i=BM(t);if(i.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return i.file&&i.sync?jM(i,e):i.file?HM(i,e,r):i.sync?WM(i,e):GM(i,e)};var jM=(t,e)=>{let r=new Xu.Sync(t),i=new Wv.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(i),Vv(r,e)},HM=(t,e,r)=>{let i=new Xu(t),n=new Wv.WriteStream(t.file,{mode:t.mode||438});i.pipe(n);let s=new Promise((o,a)=>{n.on("error",a),n.on("close",o),i.on("error",a)});return Lp(i,e),r?s.then(r,r):s},Vv=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Gv({file:zv.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:i=>t.add(i)}):t.add(r)}),t.end()},Lp=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Gv({file:zv.resolve(t.cwd,r.slice(1)),noResume:!0,onentry:i=>t.add(i)}).then(i=>Lp(t,e));t.add(r)}t.end()},WM=(t,e)=>{let r=new Xu.Sync(t);return Vv(r,e),r},GM=(t,e)=>{let r=new Xu(t);return Lp(r,e),r}});var $p=w((j3,rO)=>{"use strict";var zM=os(),Xv=Iu(),St=require("fs"),Kv=vs(),Jv=Qu(),Zv=require("path"),eO=ds();rO.exports=(t,e,r)=>{let i=zM(t);if(!i.file)throw new TypeError("file is required");if(i.gzip||i.brotli||i.file.endsWith(".br")||i.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),i.sync?VM(i,e):QM(i,e,r)};var VM=(t,e)=>{let r=new Xv.Sync(t),i=!0,n,s;try{try{n=St.openSync(t.file,"r+")}catch(l){if(l.code==="ENOENT")n=St.openSync(t.file,"w+");else throw l}let o=St.fstatSync(n),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let c=0,h=0;c<512;c+=h){if(h=St.readSync(n,a,c,a.length-c,s+c),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!h)break e}let l=new eO(a);if(!l.cksumValid)break;let u=512*Math.ceil(l.size/512);if(s+u+512>o.size)break;s+=u,t.mtimeCache&&t.mtimeCache.set(l.path,l.mtime)}i=!1,YM(t,r,s,n,e)}finally{if(i)try{St.closeSync(n)}catch{}}},YM=(t,e,r,i,n)=>{let s=new Kv.WriteStreamSync(t.file,{fd:i,start:r});e.pipe(s),XM(e,n)},QM=(t,e,r)=>{e=Array.from(e);let i=new Xv(t),n=(o,a,l)=>{let u=(y,A)=>{y?St.close(o,b=>l(y)):l(null,A)},c=0;if(a===0)return u(null,0);let h=0,f=Buffer.alloc(512),p=(y,A)=>{if(y)return u(y);if(h+=A,h<512&&A)return St.read(o,f,h,f.length-h,c+h,p);if(c===0&&f[0]===31&&f[1]===139)return u(new Error("cannot append to compressed archives"));if(h<512)return u(null,c);let b=new eO(f);if(!b.cksumValid)return u(null,c);let v=512*Math.ceil(b.size/512);if(c+v+512>a||(c+=v+512,c>=a))return u(null,c);t.mtimeCache&&t.mtimeCache.set(b.path,b.mtime),h=0,St.read(o,f,0,512,c,p)};St.read(o,f,0,512,c,p)},s=new Promise((o,a)=>{i.on("error",a);let l="r+",u=(c,h)=>{if(c&&c.code==="ENOENT"&&l==="r+")return l="w+",St.open(t.file,l,u);if(c)return a(c);St.fstat(h,(f,p)=>{if(f)return St.close(h,()=>a(f));n(h,p.size,(y,A)=>{if(y)return a(y);let b=new Kv.WriteStream(t.file,{fd:h,start:A});i.pipe(b),b.on("error",a),b.on("close",o),tO(i,e)})})};St.open(t.file,l,u)});return r?s.then(r,r):s},XM=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Jv({file:Zv.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:i=>t.add(i)}):t.add(r)}),t.end()},tO=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Jv({file:Zv.resolve(t.cwd,r.slice(1)),noResume:!0,onentry:i=>t.add(i)}).then(i=>tO(t,e));t.add(r)}t.end()}});var nO=w((H3,iO)=>{"use strict";var KM=os(),JM=$p();iO.exports=(t,e,r)=>{let i=KM(t);if(!i.file)throw new TypeError("file is required");if(i.gzip||i.brotli||i.file.endsWith(".br")||i.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),ZM(i),JM(i,e,r)};var ZM=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,i)=>e(r,i)&&!(t.mtimeCache.get(r)>i.mtime):(r,i)=>!(t.mtimeCache.get(r)>i.mtime)}});var aO=w((W3,oO)=>{var{promisify:sO}=require("util"),Ai=require("fs"),eU=t=>{if(!t)t={mode:511,fs:Ai};else if(typeof t=="object")t={mode:511,fs:Ai,...t};else if(typeof t=="number")t={mode:t,fs:Ai};else if(typeof t=="string")t={mode:parseInt(t,8),fs:Ai};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||Ai.mkdir,t.mkdirAsync=sO(t.mkdir),t.stat=t.stat||t.fs.stat||Ai.stat,t.statAsync=sO(t.stat),t.statSync=t.statSync||t.fs.statSync||Ai.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||Ai.mkdirSync,t};oO.exports=eU});var uO=w((G3,lO)=>{var tU=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:rU,parse:iU}=require("path"),nU=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=rU(t),tU==="win32"){let e=/[*|"<>?:]/,{root:r}=iU(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};lO.exports=nU});var pO=w((z3,dO)=>{var{dirname:cO}=require("path"),hO=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(i=>i.isDirectory()?r:void 0,i=>i.code==="ENOENT"?hO(t,cO(e),e):void 0),fO=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(i){return i.code==="ENOENT"?fO(t,cO(e),e):void 0}};dO.exports={findMade:hO,findMadeSync:fO}});var Mp=w((V3,gO)=>{var{dirname:mO}=require("path"),kp=(t,e,r)=>{e.recursive=!1;let i=mO(t);return i===t?e.mkdirAsync(t,e).catch(n=>{if(n.code!=="EISDIR")throw n}):e.mkdirAsync(t,e).then(()=>r||t,n=>{if(n.code==="ENOENT")return kp(i,e).then(s=>kp(t,e,s));if(n.code!=="EEXIST"&&n.code!=="EROFS")throw n;return e.statAsync(t).then(s=>{if(s.isDirectory())return r;throw n},()=>{throw n})})},qp=(t,e,r)=>{let i=mO(t);if(e.recursive=!1,i===t)try{return e.mkdirSync(t,e)}catch(n){if(n.code!=="EISDIR")throw n;return}try{return e.mkdirSync(t,e),r||t}catch(n){if(n.code==="ENOENT")return qp(t,e,qp(i,e,r));if(n.code!=="EEXIST"&&n.code!=="EROFS")throw n;try{if(!e.statSync(t).isDirectory())throw n}catch{throw n}}};gO.exports={mkdirpManual:kp,mkdirpManualSync:qp}});var AO=w((Y3,wO)=>{var{dirname:yO}=require("path"),{findMade:sU,findMadeSync:oU}=pO(),{mkdirpManual:aU,mkdirpManualSync:lU}=Mp(),uU=(t,e)=>(e.recursive=!0,yO(t)===t?e.mkdirAsync(t,e):sU(e,t).then(i=>e.mkdirAsync(t,e).then(()=>i).catch(n=>{if(n.code==="ENOENT")return aU(t,e);throw n}))),cU=(t,e)=>{if(e.recursive=!0,yO(t)===t)return e.mkdirSync(t,e);let i=oU(e,t);try{return e.mkdirSync(t,e),i}catch(n){if(n.code==="ENOENT")return lU(t,e);throw n}};wO.exports={mkdirpNative:uU,mkdirpNativeSync:cU}});var _O=w((Q3,bO)=>{var EO=require("fs"),hU=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Up=hU.replace(/^v/,"").split("."),SO=+Up[0]>10||+Up[0]==10&&+Up[1]>=12,fU=SO?t=>t.mkdir===EO.mkdir:()=>!1,dU=SO?t=>t.mkdirSync===EO.mkdirSync:()=>!1;bO.exports={useNative:fU,useNativeSync:dU}});var IO=w((X3,RO)=>{var Ts=aO(),Cs=uO(),{mkdirpNative:vO,mkdirpNativeSync:OO}=AO(),{mkdirpManual:TO,mkdirpManualSync:CO}=Mp(),{useNative:pU,useNativeSync:mU}=_O(),Rs=(t,e)=>(t=Cs(t),e=Ts(e),pU(e)?vO(t,e):TO(t,e)),gU=(t,e)=>(t=Cs(t),e=Ts(e),mU(e)?OO(t,e):CO(t,e));Rs.sync=gU;Rs.native=(t,e)=>vO(Cs(t),Ts(e));Rs.manual=(t,e)=>TO(Cs(t),Ts(e));Rs.nativeSync=(t,e)=>OO(Cs(t),Ts(e));Rs.manualSync=(t,e)=>CO(Cs(t),Ts(e));RO.exports=Rs});var $O=w((K3,LO)=>{"use strict";var Dt=require("fs"),cn=require("path"),yU=Dt.lchown?"lchown":"chown",wU=Dt.lchownSync?"lchownSync":"chownSync",xO=Dt.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),NO=(t,e,r)=>{try{return Dt[wU](t,e,r)}catch(i){if(i.code!=="ENOENT")throw i}},AU=(t,e,r)=>{try{return Dt.chownSync(t,e,r)}catch(i){if(i.code!=="ENOENT")throw i}},EU=xO?(t,e,r,i)=>n=>{!n||n.code!=="EISDIR"?i(n):Dt.chown(t,e,r,i)}:(t,e,r,i)=>i,Bp=xO?(t,e,r)=>{try{return NO(t,e,r)}catch(i){if(i.code!=="EISDIR")throw i;AU(t,e,r)}}:(t,e,r)=>NO(t,e,r),SU=process.version,DO=(t,e,r)=>Dt.readdir(t,e,r),bU=(t,e)=>Dt.readdirSync(t,e);/^v4\./.test(SU)&&(DO=(t,e,r)=>Dt.readdir(t,r));var Ku=(t,e,r,i)=>{Dt[yU](t,e,r,EU(t,e,r,n=>{i(n&&n.code!=="ENOENT"?n:null)}))},PO=(t,e,r,i,n)=>{if(typeof e=="string")return Dt.lstat(cn.resolve(t,e),(s,o)=>{if(s)return n(s.code!=="ENOENT"?s:null);o.name=e,PO(t,o,r,i,n)});if(e.isDirectory())jp(cn.resolve(t,e.name),r,i,s=>{if(s)return n(s);let o=cn.resolve(t,e.name);Ku(o,r,i,n)});else{let s=cn.resolve(t,e.name);Ku(s,r,i,n)}},jp=(t,e,r,i)=>{DO(t,{withFileTypes:!0},(n,s)=>{if(n){if(n.code==="ENOENT")return i();if(n.code!=="ENOTDIR"&&n.code!=="ENOTSUP")return i(n)}if(n||!s.length)return Ku(t,e,r,i);let o=s.length,a=null,l=u=>{if(!a){if(u)return i(a=u);if(--o===0)return Ku(t,e,r,i)}};s.forEach(u=>PO(t,u,e,r,l))})},_U=(t,e,r,i)=>{if(typeof e=="string")try{let n=Dt.lstatSync(cn.resolve(t,e));n.name=e,e=n}catch(n){if(n.code==="ENOENT")return;throw n}e.isDirectory()&&FO(cn.resolve(t,e.name),r,i),Bp(cn.resolve(t,e.name),r,i)},FO=(t,e,r)=>{let i;try{i=bU(t,{withFileTypes:!0})}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR"||n.code==="ENOTSUP")return Bp(t,e,r);throw n}return i&&i.length&&i.forEach(n=>_U(t,n,e,r)),Bp(t,e,r)};LO.exports=jp;jp.sync=FO});var UO=w((J3,Hp)=>{"use strict";var kO=IO(),Pt=require("fs"),Ju=require("path"),qO=$O(),Wt=hs(),Zu=class extends Error{constructor(e,r){super("Cannot extract through symbolic link"),this.path=r,this.symlink=e}get name(){return"SylinkError"}},ec=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'"),this.path=e,this.code=r}get name(){return"CwdError"}},tc=(t,e)=>t.get(Wt(e)),Jo=(t,e,r)=>t.set(Wt(e),r),vU=(t,e)=>{Pt.stat(t,(r,i)=>{(r||!i.isDirectory())&&(r=new ec(t,r&&r.code||"ENOTDIR")),e(r)})};Hp.exports=(t,e,r)=>{t=Wt(t);let i=e.umask,n=e.mode|448,s=(n&i)!==0,o=e.uid,a=e.gid,l=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),u=e.preserve,c=e.unlink,h=e.cache,f=Wt(e.cwd),p=(b,v)=>{b?r(b):(Jo(h,t,!0),v&&l?qO(v,o,a,O=>p(O)):s?Pt.chmod(t,n,r):r())};if(h&&tc(h,t)===!0)return p();if(t===f)return vU(t,p);if(u)return kO(t,{mode:n}).then(b=>p(null,b),p);let A=Wt(Ju.relative(f,t)).split("/");rc(f,A,n,h,c,f,null,p)};var rc=(t,e,r,i,n,s,o,a)=>{if(!e.length)return a(null,o);let l=e.shift(),u=Wt(Ju.resolve(t+"/"+l));if(tc(i,u))return rc(u,e,r,i,n,s,o,a);Pt.mkdir(u,r,MO(u,e,r,i,n,s,o,a))},MO=(t,e,r,i,n,s,o,a)=>l=>{l?Pt.lstat(t,(u,c)=>{if(u)u.path=u.path&&Wt(u.path),a(u);else if(c.isDirectory())rc(t,e,r,i,n,s,o,a);else if(n)Pt.unlink(t,h=>{if(h)return a(h);Pt.mkdir(t,r,MO(t,e,r,i,n,s,o,a))});else{if(c.isSymbolicLink())return a(new Zu(t,t+"/"+e.join("/")));a(l)}}):(o=o||t,rc(t,e,r,i,n,s,o,a))},OU=t=>{let e=!1,r="ENOTDIR";try{e=Pt.statSync(t).isDirectory()}catch(i){r=i.code}finally{if(!e)throw new ec(t,r)}};Hp.exports.sync=(t,e)=>{t=Wt(t);let r=e.umask,i=e.mode|448,n=(i&r)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),l=e.preserve,u=e.unlink,c=e.cache,h=Wt(e.cwd),f=b=>{Jo(c,t,!0),b&&a&&qO.sync(b,s,o),n&&Pt.chmodSync(t,i)};if(c&&tc(c,t)===!0)return f();if(t===h)return OU(h),f();if(l)return f(kO.sync(t,i));let y=Wt(Ju.relative(h,t)).split("/"),A=null;for(let b=y.shift(),v=h;b&&(v+="/"+b);b=y.shift())if(v=Wt(Ju.resolve(v)),!tc(c,v))try{Pt.mkdirSync(v,i),A=A||v,Jo(c,v,!0)}catch{let I=Pt.lstatSync(v);if(I.isDirectory()){Jo(c,v,!0);continue}else if(u){Pt.unlinkSync(v),Pt.mkdirSync(v,i),A=A||v,Jo(c,v,!0);continue}else if(I.isSymbolicLink())return new Zu(v,v+"/"+y.join("/"))}return f(A)}});var Gp=w((Z3,BO)=>{var Wp=Object.create(null),{hasOwnProperty:TU}=Object.prototype;BO.exports=t=>(TU.call(Wp,t)||(Wp[t]=t.normalize("NFD")),Wp[t])});var GO=w((eW,WO)=>{var jO=require("assert"),CU=Gp(),RU=ps(),{join:HO}=require("path"),IU=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,NU=IU==="win32";WO.exports=()=>{let t=new Map,e=new Map,r=u=>u.split("/").slice(0,-1).reduce((h,f)=>(h.length&&(f=HO(h[h.length-1],f)),h.push(f||"/"),h),[]),i=new Set,n=u=>{let c=e.get(u);if(!c)throw new Error("function does not have any path reservations");return{paths:c.paths.map(h=>t.get(h)),dirs:[...c.dirs].map(h=>t.get(h))}},s=u=>{let{paths:c,dirs:h}=n(u);return c.every(f=>f[0]===u)&&h.every(f=>f[0]instanceof Set&&f[0].has(u))},o=u=>i.has(u)||!s(u)?!1:(i.add(u),u(()=>a(u)),!0),a=u=>{if(!i.has(u))return!1;let{paths:c,dirs:h}=e.get(u),f=new Set;return c.forEach(p=>{let y=t.get(p);jO.equal(y[0],u),y.length===1?t.delete(p):(y.shift(),typeof y[0]=="function"?f.add(y[0]):y[0].forEach(A=>f.add(A)))}),h.forEach(p=>{let y=t.get(p);jO(y[0]instanceof Set),y[0].size===1&&y.length===1?t.delete(p):y[0].size===1?(y.shift(),f.add(y[0])):y[0].delete(u)}),i.delete(u),f.forEach(p=>o(p)),!0};return{check:s,reserve:(u,c)=>{u=NU?["win32 parallelization disabled"]:u.map(f=>RU(HO(CU(f))).toLowerCase());let h=new Set(u.map(f=>r(f)).reduce((f,p)=>f.concat(p)));return e.set(c,{dirs:h,paths:u}),u.forEach(f=>{let p=t.get(f);p?p.push(c):t.set(f,[c])}),h.forEach(f=>{let p=t.get(f);p?p[p.length-1]instanceof Set?p[p.length-1].add(c):p.push(new Set([c])):t.set(f,[new Set([c])])}),o(c)}}}});var YO=w((tW,VO)=>{var xU=process.env.__FAKE_PLATFORM__||process.platform,DU=xU==="win32",PU=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:FU,O_TRUNC:LU,O_WRONLY:$U,UV_FS_O_FILEMAP:zO=0}=PU.constants,kU=DU&&!!zO,qU=512*1024,MU=zO|LU|FU|$U;VO.exports=kU?t=>t<qU?MU:"w":()=>"w"});var em=w((rW,lT)=>{"use strict";var UU=require("assert"),BU=Yu(),X=require("fs"),jU=vs(),kr=require("path"),sT=UO(),QO=Yd(),HU=GO(),WU=Qd(),Ft=hs(),GU=ps(),zU=Gp(),XO=Symbol("onEntry"),Yp=Symbol("checkFs"),KO=Symbol("checkFs2"),sc=Symbol("pruneCache"),Qp=Symbol("isReusable"),Lt=Symbol("makeFs"),Xp=Symbol("file"),Kp=Symbol("directory"),oc=Symbol("link"),JO=Symbol("symlink"),ZO=Symbol("hardlink"),eT=Symbol("unsupported"),tT=Symbol("checkPath"),Ei=Symbol("mkdir"),Ye=Symbol("onError"),ic=Symbol("pending"),rT=Symbol("pend"),Is=Symbol("unpend"),zp=Symbol("ended"),Vp=Symbol("maybeClose"),Jp=Symbol("skip"),Zo=Symbol("doChown"),ea=Symbol("uid"),ta=Symbol("gid"),ra=Symbol("checkedCwd"),oT=require("crypto"),aT=YO(),VU=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,ia=VU==="win32",YU=1024,QU=(t,e)=>{if(!ia)return X.unlink(t,e);let r=t+".DELETE."+oT.randomBytes(16).toString("hex");X.rename(t,r,i=>{if(i)return e(i);X.unlink(r,e)})},XU=t=>{if(!ia)return X.unlinkSync(t);let e=t+".DELETE."+oT.randomBytes(16).toString("hex");X.renameSync(t,e),X.unlinkSync(e)},iT=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,nT=t=>GU(Ft(zU(t))).toLowerCase(),KU=(t,e)=>{e=nT(e);for(let r of t.keys()){let i=nT(r);(i===e||i.indexOf(e+"/")===0)&&t.delete(r)}},JU=t=>{for(let e of t.keys())t.delete(e)},na=class extends BU{constructor(e){if(e||(e={}),e.ondone=r=>{this[zp]=!0,this[Vp]()},super(e),this[ra]=!1,this.reservations=HU(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[ic]=0,this[zp]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:YU,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||ia,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Ft(kr.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[XO](r))}warn(e,r,i={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(i.recoverable=!1),super.warn(e,r,i)}[Vp](){this[zp]&&this[ic]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[tT](e){let r=Ft(e.path),i=r.split("/");if(this.strip){if(i.length<this.strip)return!1;if(e.type==="Link"){let n=Ft(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}i.splice(0,this.strip),e.path=i.join("/")}if(isFinite(this.maxDepth)&&i.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:r,depth:i.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(i.includes("..")||ia&&/^[a-z]:\.\.$/i.test(i[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[n,s]=WU(r);n&&(e.path=s,this.warn("TAR_ENTRY_INFO","stripping ".concat(n," from absolute path"),{entry:e,path:r}))}if(kr.isAbsolute(e.path)?e.absolute=Ft(kr.resolve(e.path)):e.absolute=Ft(kr.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Ft(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:n}=kr.win32.parse(e.absolute);e.absolute=n+QO.encode(e.absolute.slice(n.length));let{root:s}=kr.win32.parse(e.path);e.path=s+QO.encode(e.path.slice(s.length))}return!0}[XO](e){if(!this[tT](e))return e.resume();switch(UU.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Yp](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[eT](e)}}[Ye](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[Is](),r.resume())}[Ei](e,r,i){sT(Ft(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},i)}[Zo](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[ea](e){return iT(this.uid,e.uid,this.processUid)}[ta](e){return iT(this.gid,e.gid,this.processGid)}[Xp](e,r){let i=e.mode&4095||this.fmode,n=new jU.WriteStream(e.absolute,{flags:aT(e.size),mode:i,autoClose:!1});n.on("error",l=>{n.fd&&X.close(n.fd,()=>{}),n.write=()=>!0,this[Ye](l,e),r()});let s=1,o=l=>{if(l){n.fd&&X.close(n.fd,()=>{}),this[Ye](l,e),r();return}--s===0&&X.close(n.fd,u=>{u?this[Ye](u,e):this[Is](),r()})};n.on("finish",l=>{let u=e.absolute,c=n.fd;if(e.mtime&&!this.noMtime){s++;let h=e.atime||new Date,f=e.mtime;X.futimes(c,h,f,p=>p?X.utimes(u,h,f,y=>o(y&&p)):o())}if(this[Zo](e)){s++;let h=this[ea](e),f=this[ta](e);X.fchown(c,h,f,p=>p?X.chown(u,h,f,y=>o(y&&p)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",l=>{this[Ye](l,e),r()}),e.pipe(a)),a.pipe(n)}[Kp](e,r){let i=e.mode&4095||this.dmode;this[Ei](e.absolute,i,n=>{if(n){this[Ye](n,e),r();return}let s=1,o=a=>{--s===0&&(r(),this[Is](),e.resume())};e.mtime&&!this.noMtime&&(s++,X.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[Zo](e)&&(s++,X.chown(e.absolute,this[ea](e),this[ta](e),o)),o()})}[eT](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED","unsupported entry type: ".concat(e.type),{entry:e}),e.resume()}[JO](e,r){this[oc](e,e.linkpath,"symlink",r)}[ZO](e,r){let i=Ft(kr.resolve(this.cwd,e.linkpath));this[oc](e,i,"link",r)}[rT](){this[ic]++}[Is](){this[ic]--,this[Vp]()}[Jp](e){this[Is](),e.resume()}[Qp](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!ia}[Yp](e){this[rT]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,i=>this[KO](e,i))}[sc](e){e.type==="SymbolicLink"?JU(this.dirCache):e.type!=="Directory"&&KU(this.dirCache,e.absolute)}[KO](e,r){this[sc](e);let i=a=>{this[sc](e),r(a)},n=()=>{this[Ei](this.cwd,this.dmode,a=>{if(a){this[Ye](a,e),i();return}this[ra]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=Ft(kr.dirname(e.absolute));if(a!==this.cwd)return this[Ei](a,this.dmode,l=>{if(l){this[Ye](l,e),i();return}o()})}o()},o=()=>{X.lstat(e.absolute,(a,l)=>{if(l&&(this.keep||this.newer&&l.mtime>e.mtime)){this[Jp](e),i();return}if(a||this[Qp](e,l))return this[Lt](null,e,i);if(l.isDirectory()){if(e.type==="Directory"){let u=!this.noChmod&&e.mode&&(l.mode&4095)!==e.mode,c=h=>this[Lt](h,e,i);return u?X.chmod(e.absolute,e.mode,c):c()}if(e.absolute!==this.cwd)return X.rmdir(e.absolute,u=>this[Lt](u,e,i))}if(e.absolute===this.cwd)return this[Lt](null,e,i);QU(e.absolute,u=>this[Lt](u,e,i))})};this[ra]?s():n()}[Lt](e,r,i){if(e){this[Ye](e,r),i();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[Xp](r,i);case"Link":return this[ZO](r,i);case"SymbolicLink":return this[JO](r,i);case"Directory":case"GNUDumpDir":return this[Kp](r,i)}}[oc](e,r,i,n){X[i](r,e.absolute,s=>{s?this[Ye](s,e):(this[Is](),e.resume()),n()})}},nc=t=>{try{return[null,t()]}catch(e){return[e,null]}},Zp=class extends na{[Lt](e,r){return super[Lt](e,r,()=>{})}[Yp](e){if(this[sc](e),!this[ra]){let s=this[Ei](this.cwd,this.dmode);if(s)return this[Ye](s,e);this[ra]=!0}if(e.absolute!==this.cwd){let s=Ft(kr.dirname(e.absolute));if(s!==this.cwd){let o=this[Ei](s,this.dmode);if(o)return this[Ye](o,e)}}let[r,i]=nc(()=>X.lstatSync(e.absolute));if(i&&(this.keep||this.newer&&i.mtime>e.mtime))return this[Jp](e);if(r||this[Qp](e,i))return this[Lt](null,e);if(i.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(i.mode&4095)!==e.mode,[a]=o?nc(()=>{X.chmodSync(e.absolute,e.mode)}):[];return this[Lt](a,e)}let[s]=nc(()=>X.rmdirSync(e.absolute));this[Lt](s,e)}let[n]=e.absolute===this.cwd?[]:nc(()=>XU(e.absolute));this[Lt](n,e)}[Xp](e,r){let i=e.mode&4095||this.fmode,n=a=>{let l;try{X.closeSync(s)}catch(u){l=u}(a||l)&&this[Ye](a||l,e),r()},s;try{s=X.openSync(e.absolute,aT(e.size),i)}catch(a){return n(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[Ye](a,e)),e.pipe(o)),o.on("data",a=>{try{X.writeSync(s,a,0,a.length)}catch(l){n(l)}}),o.on("end",a=>{let l=null;if(e.mtime&&!this.noMtime){let u=e.atime||new Date,c=e.mtime;try{X.futimesSync(s,u,c)}catch(h){try{X.utimesSync(e.absolute,u,c)}catch{l=h}}}if(this[Zo](e)){let u=this[ea](e),c=this[ta](e);try{X.fchownSync(s,u,c)}catch(h){try{X.chownSync(e.absolute,u,c)}catch{l=l||h}}}n(l)})}[Kp](e,r){let i=e.mode&4095||this.dmode,n=this[Ei](e.absolute,i);if(n){this[Ye](n,e),r();return}if(e.mtime&&!this.noMtime)try{X.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Zo](e))try{X.chownSync(e.absolute,this[ea](e),this[ta](e))}catch{}r(),e.resume()}[Ei](e,r){try{return sT.sync(Ft(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(i){return i}}[oc](e,r,i,n){try{X[i+"Sync"](r,e.absolute),n(),e.resume()}catch(s){return this[Ye](s,e)}}};na.Sync=Zp;lT.exports=na});var dT=w((iW,fT)=>{"use strict";var ZU=os(),ac=em(),cT=require("fs"),hT=vs(),uT=require("path"),tm=ps();fT.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let i=ZU(t);if(i.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&e2(i,e),i.file&&i.sync?t2(i):i.file?r2(i,r):i.sync?i2(i):n2(i)};var e2=(t,e)=>{let r=new Map(e.map(s=>[tm(s),!0])),i=t.filter,n=(s,o)=>{let a=o||uT.parse(s).root||".",l=s===a?!1:r.has(s)?r.get(s):n(uT.dirname(s),a);return r.set(s,l),l};t.filter=i?(s,o)=>i(s,o)&&n(tm(s)):s=>n(tm(s))},t2=t=>{let e=new ac.Sync(t),r=t.file,i=cT.statSync(r),n=t.maxReadSize||16*1024*1024;new hT.ReadStreamSync(r,{readSize:n,size:i.size}).pipe(e)},r2=(t,e)=>{let r=new ac(t),i=t.maxReadSize||16*1024*1024,n=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("close",o),cT.stat(n,(l,u)=>{if(l)a(l);else{let c=new hT.ReadStream(n,{readSize:i,size:u.size});c.on("error",a),c.pipe(r)}})});return e?s.then(e,e):s},i2=t=>new ac.Sync(t),n2=t=>new ac(t)});var pT=w(Te=>{"use strict";Te.c=Te.create=Qv();Te.r=Te.replace=$p();Te.t=Te.list=Qu();Te.u=Te.update=nO();Te.x=Te.extract=dT();Te.Pack=Iu();Te.Unpack=em();Te.Parse=Yu();Te.ReadEntry=fu();Te.WriteEntry=sp();Te.Header=ds();Te.Pax=pu();Te.types=Bd()});var ET=w((sW,AT)=>{var{spawn:rm}=require("child_process"),{session:mT}=require("electron"),hn=require("path"),s2=pT(),gt=require("fs"),o2=require("os"),a2=Gt(),l2=lr(),fn=Si(),u2=aa(),de,$t,kt,dn,or,Se,bt,gT,yT,wT;AT.exports=(de=class extends l2{constructor(r){super(r);R(this,Se);R(this,$t,null);R(this,kt,null);R(this,dn,!1);R(this,or,{code:de.CODE_OLLAMA_DOWNLOAD,success:!0,progressBar:!1,message:""});_(this,"install",(r=!1)=>m(this,dn)?(V(this,Se,bt).call(this,m(this,or).code,m(this,or).success,m(this,or).progressBar,m(this,or).message),!1):(M(this,dn,!0),m(this,$t)!==null?(V(this,Se,bt).call(this,de.CODE_OLLAMA_FINISH),M(this,dn,!1),!0):(r&&(V(this,Se,bt).call(this,de.CODE_OLLAMA_DOWNLOAD,!0,!0),gt.existsSync(m(this,kt))&&gt.rmSync(m(this,kt),{recursive:!0,force:!0}),gt.mkdirSync(m(this,kt),{recursive:!0})),(async()=>{let i=["arm","arm64"].includes(o2.arch()),n=hn.join(m(this,kt),"ollama"),s=hn.join(m(this,kt),"models");try{let o=hn.join(n,fn.MACOS===process.platform?"ollama":fn.WINDOWS===process.platform?"ollama.exe":"bin/ollama"),a=gt.existsSync(o),l=[{codeDownload:de.CODE_OLLAMA_DOWNLOAD,codeUnpack:de.CODE_OLLAMA_UNPACK,outputPath:n,archiveName:fn.MACOS===process.platform?"ollama-darwin.tgz":fn.WINDOWS===process.platform?"ollama-windows-".concat(i?"arm64":"amd64",".zip"):"ollama-linux-".concat(i?"arm64":"amd64",".tgz")},{codeDownload:de.CODE_MODELS_DOWNLOAD,codeUnpack:de.CODE_MODELS_UNPACK,outputPath:s,archiveName:"models.tgz"}];for(let u of l){let c="".concat(de.DOWNLOAD_URL,"/").concat(u.archiveName),h=await V(this,Se,gT).call(this,u.codeDownload,c,u.archiveName);await V(this,Se,yT).call(this,u.codeUnpack,h,u.outputPath),!a&&gt.existsSync(o)&&de.CODE_OLLAMA_DOWNLOAD===u.codeDownload&&fn.WINDOWS!==process.platform&&gt.chmodSync(o,493)}m(this,$t)===null&&(V(this,Se,bt).call(this,de.CODE_OLLAMA_SERVE,!0,!0),M(this,$t,rm(o,["serve"],{env:{...process.env,OLLAMA_HOST:"0.0.0.0:".concat(this._oglama.config.getOllamaPort()),OLLAMA_MODELS:s},detached:!1,stdio:"ignore"})),m(this,$t).unref(),m(this,$t).on("error",u=>{this.stop(),V(this,Se,bt).call(this,de.CODE_OLLAMA_SERVE,!1,!1,"Ollama server offline")})),V(this,Se,bt).call(this,de.CODE_OLLAMA_FINISH)}catch(o){V(this,Se,bt).call(this,m(this,or).code||de.CODE_OLLAMA_DOWNLOAD,!1,!1,"".concat(o.message??o))}M(this,dn,!1)})(),!0)));_(this,"getPort",()=>this._oglama.config.getOllamaPort());this._register("llm"),M(this,kt,hn.join(u2.getPathConfig(),"llm")),gt.existsSync(m(this,kt))||gt.mkdirSync(m(this,kt),{recursive:!0})}stop(){if(m(this,$t)!==null){try{process.platform==="win32"?rm("taskkill",["/PID",m(this,$t).pid,"/T","/F"],{shell:!0,windowsHide:!0}):m(this,$t).kill("SIGTERM")}catch{}M(this,$t,null)}}},$t=new WeakMap,kt=new WeakMap,dn=new WeakMap,or=new WeakMap,Se=new WeakSet,bt=async function(r,i=!0,n=!1,s=""){if(M(this,or,{code:r,success:i,progressBar:n,message:s}),typeof this._oglama.main?.view.webContents?.send=="function"){let o=["ipc:llm:install",[m(this,or)],{type:"req"}];this._oglama.main?.view.webContents?.send(a2.WINDOW_MAIN,o)}},gT=async function(r,i,n){let s=hn.join(m(this,kt),n);return gt.existsSync(s)?s:new Promise((o,a)=>{let l=(u,c)=>{c.setSavePath(s),V(this,Se,bt).call(this,r,!0,0),c.on("updated",(h,f)=>{if(f==="progressing"){let p=Math.floor(c.getReceivedBytes()/c.getTotalBytes()*100);V(this,Se,bt).call(this,r,!0,p)}}),c.once("done",(h,f)=>{if(mT.defaultSession.removeListener("will-download",l),f==="completed"){V(this,Se,bt).call(this,r,!0,100),o(c.getSavePath());return}a(new Error("".concat(r," download failed: ").concat(f)))})};mT.defaultSession.once("will-download",l),this._oglama.main?.view.webContents.downloadURL(i)})},yT=async function(r,i,n){let s=hn.join(n,"meta.json");if(gt.existsSync(s))return;V(this,Se,bt).call(this,r,!0,!0),gt.existsSync(n)&&gt.rmSync(n,{recursive:!0,force:!0}),gt.mkdirSync(n,{recursive:!0});let o=Math.floor(new Date().getTime()/1e3);try{hn.extname(i)===".zip"?await V(this,Se,wT).call(this,i,n):await s2.extract({file:i,cwd:n,strict:!0});let a=Math.floor(new Date().getTime()/1e3);gt.writeFileSync(s,JSON.stringify({t:a,d:a-o})),V(this,Se,bt).call(this,r,!0,100)}catch(a){throw new Error("".concat(r," extraction failed: ").concat(a.message??a))}},wT=async function(r,i){return new Promise((n,s)=>{let o=fn.WINDOWS===process.platform?"powershell":"unzip",a=fn.WINDOWS===process.platform?["-Command","Expand-Archive -Path '".concat(r,"' -DestinationPath '").concat(i,"' -Force")]:["-o",r,"-d",i];rm(o,a,{shell:!0}).on("close",u=>{if(u===0){n();return}s(new Error("Extraction failed with code ".concat(u)))})})},_(de,"DOWNLOAD_URL","https://dl.oglama.com"),_(de,"CODE_OLLAMA_DOWNLOAD","download:ollama"),_(de,"CODE_OLLAMA_UNPACK","unpack:ollama"),_(de,"CODE_MODELS_DOWNLOAD","download:models"),_(de,"CODE_MODELS_UNPACK","unpack:models"),_(de,"CODE_OLLAMA_SERVE","serve"),_(de,"CODE_OLLAMA_FINISH","finish"),de)});var TT=w((lW,OT)=>{var{app:im,session:lc,BrowserWindow:ST,powerSaveBlocker:bT}=require("electron"),_T=require("path"),sa=Gt(),c2=dm(),h2=mm(),f2=ym(),d2=Am(),nm=Si(),p2=Pm(),m2=Db(),g2=$b(),y2=jb(),w2=zb(),A2=r_(),E2=ET(),ye,Ns,oa,qt,vT;OT.exports=(vT=class{constructor(){R(this,ye,null);R(this,Ns,null);R(this,oa,!1);R(this,qt,null);_(this,"rootPath",im.getAppPath());_(this,"devMode",!1);_(this,"log",new f2(this));_(this,"webserver",new c2(this));_(this,"activity",new h2(this));_(this,"diskStorage",new p2(this));_(this,"llm",new E2(this));_(this,"updater",new m2(this));_(this,"device",new g2(this));_(this,"source",new y2(this));_(this,"target",new w2(this));_(this,"main",new A2(this));_(this,"config",new d2(this))}mainWindow(){let e=this;if(lc.defaultSession.setPermissionCheckHandler((r,i,n,s)=>!0),lc.defaultSession.setPermissionRequestHandler((r,i,n,s)=>{n(!0)}),m(e,ye)===null){M(e,ye,new ST({icon:_T.join(e.rootPath,"res/icons/icon.png"),minHeight:e.config.getMainMinHeight(),minWidth:e.config.getMainMinWidth(),height:e.config.getMainMinHeight(),width:e.config.getMainMinWidth(),titleBarStyle:"default",backgroundColor:"#000",fullscreenable:!1,useContentSize:!0,resizable:!0,title:"Oglama",show:!1,webPreferences:{session:lc.defaultSession,backgroundThrottling:!1,nodeIntegration:!0,spellcheck:!1}})),m(e,ye).setMenu(null),m(e,ye).on("minimize",i=>{if(i.preventDefault(),!e.updater.isInstalling()){let n=["ipc:oglama:restored",[],{type:"req",fromWin:sa.WINDOW_MAIN_LOGIN}];e.main.view?.webContents.send(sa.WINDOW_MAIN,n)}setTimeout(()=>{m(e,ye).restore(),m(e,ye).webContents.invalidate()},250)}),m(e,ye).setMaxListeners(0),m(e,ye).on("closed",()=>{e.llm.stop(),M(e,ye,null),m(e,Ns)!==null&&bT.stop(m(e,Ns)),im.quit()});let r=()=>{let i=m(e,ye).getSize(),n=[nm.WINDOWS,nm.MACOS].includes(process.platform)?Math.abs(m(e,ye).getSize()[1]-m(e,ye).getContentSize()[1]):0,s=[nm.WINDOWS].includes(process.platform)?Math.abs(m(e,ye).getSize()[0]-m(e,ye).getContentSize()[0]):0;e.main.setWindowSize(i[0]-s,i[1]-n),e.target.setWindowSize(i[0]-s,i[1]-n)};m(e,ye).on("resize",()=>r()),m(e,ye).once("ready-to-show",()=>r()),e.main.init(),e.main.view.webContents.on("did-finish-load",()=>{e.getPostAuth()&&m(e,ye).show(),r()}),m(e,ye).setMenu(null),M(e,Ns,bT.start("prevent-app-suspension"))}return m(e,ye)}mainLoginWindow(){let e=this;return m(e,qt)===null&&(M(e,qt,new ST({width:e.config.getMainLoginWidth(),height:e.config.getMainLoginHeight(),icon:_T.join(e.rootPath,"res/icons/icon.png"),resizable:!1,fullscreenable:!1,transparent:!0,titleBarStyle:"hidden",title:"Oglama",backgroundColor:"#00000000",webPreferences:{backgroundThrottling:!1,spellcheck:!1,nodeIntegration:!0,session:lc.defaultSession}})),m(e,qt).setMenu(null),m(e,qt).setMaxListeners(0),m(e,qt).on("closed",()=>{M(e,qt,null),im.quit()}),e.main?.login?.init(),e.main?.login?.view.webContents.on("did-finish-load",()=>{e.getPostAuth()||m(e,qt).show()}),m(e,qt).setMenu(null)),m(e,qt)}getPostAuth(){return m(this,oa)}setPostAuth(e){let r=!1;if(e=!!e,e!==this.getPostAuth()){M(this,oa,e);let i=["ipc:oglama:auth",[e],{type:"req",fromWin:sa.WINDOW_MAIN_LOGIN}];this.main?.login?.view.webContents.send(sa.WINDOW_MAIN_LOGIN,i),setTimeout(()=>{this.main?.view.webContents.send(sa.WINDOW_MAIN,i)},750),e?(this.mainWindow().show(),this.mainLoginWindow().hide()):(this.mainWindow().hide(),this.mainLoginWindow().show()),r=!0}return r}},ye=new WeakMap,Ns=new WeakMap,oa=new WeakMap,qt=new WeakMap,vT)});var{app:yt,BrowserWindow:S2}=require("electron"),b2=TT();yt.disableHardwareAcceleration();yt.commandLine.appendSwitch("disable-gpu");yt.commandLine.appendSwitch("allow-insecure-localhost");yt.commandLine.appendSwitch("disable-renderer-backgrounding");yt.commandLine.appendSwitch("disable-background-timer-throttling");yt.commandLine.appendSwitch("disable-backgrounding-occluded-windows");process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";process.on("uncaughtException",t=>{});var qr=null;do{if(!yt.requestSingleInstanceLock()){yt.quit();break}yt.on("second-instance",()=>{if(qr!==null){let t=qr.getPostAuth()?qr.mainWindow():qr.mainLoginWindow();t.isMinimized()&&(t.restore(),t.webContents?.invalidate()),t.show()}}),yt.on("ready",async()=>{qr=new b2,yt.on("activate",()=>{S2.getAllWindows().length===0&&qr.activity.start()}),await qr.webserver.start(),await qr.activity.start(),await qr.updater.start()}),yt.on("before-quit",()=>{process.exit(0)}),yt.on("window-all-closed",()=>{process.platform!=="darwin"&&yt.quit()})}while(!1);
